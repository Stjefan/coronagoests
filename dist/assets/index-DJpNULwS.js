function lS(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xp={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function uS(){if(e_)return pc;e_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:e,type:i,key:c,ref:a!==void 0?a:null,props:l}}return pc.Fragment=t,pc.jsx=n,pc.jsxs=n,pc}var t_;function cS(){return t_||(t_=1,Xp.exports=uS()),Xp.exports}var b=cS(),Wp={exports:{}},Dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function fS(){if(n_)return Dt;n_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function _(Z){return Z===null||typeof Z!="object"?null:(Z=g&&Z[g]||Z["@@iterator"],typeof Z=="function"?Z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,y={};function S(Z,$,ee){this.props=Z,this.context=$,this.refs=y,this.updater=ee||x}S.prototype.isReactComponent={},S.prototype.setState=function(Z,$){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,$,"setState")},S.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function w(){}w.prototype=S.prototype;function A(Z,$,ee){this.props=Z,this.context=$,this.refs=y,this.updater=ee||x}var N=A.prototype=new w;N.constructor=A,D(N,S.prototype),N.isPureReactComponent=!0;var z=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function B(Z,$,ee,se,oe,he){return ee=he.ref,{$$typeof:e,type:Z,key:$,ref:ee!==void 0?ee:null,props:he}}function P(Z,$){return B(Z.type,$,void 0,void 0,void 0,Z.props)}function R(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===e}function H(Z){var $={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ee){return $[ee]})}var U=/\/+/g;function I(Z,$){return typeof Z=="object"&&Z!==null&&Z.key!=null?H(""+Z.key):$.toString(36)}function X(){}function j(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(X,X):(Z.status="pending",Z.then(function($){Z.status==="pending"&&(Z.status="fulfilled",Z.value=$)},function($){Z.status==="pending"&&(Z.status="rejected",Z.reason=$)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function J(Z,$,ee,se,oe){var he=typeof Z;(he==="undefined"||he==="boolean")&&(Z=null);var ge=!1;if(Z===null)ge=!0;else switch(he){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(Z.$$typeof){case e:case t:ge=!0;break;case m:return ge=Z._init,J(ge(Z._payload),$,ee,se,oe)}}if(ge)return oe=oe(Z),ge=se===""?"."+I(Z,0):se,z(oe)?(ee="",ge!=null&&(ee=ge.replace(U,"$&/")+"/"),J(oe,$,ee,"",function(Ge){return Ge})):oe!=null&&(R(oe)&&(oe=P(oe,ee+(oe.key==null||Z&&Z.key===oe.key?"":(""+oe.key).replace(U,"$&/")+"/")+ge)),$.push(oe)),1;ge=0;var Re=se===""?".":se+":";if(z(Z))for(var Le=0;Le<Z.length;Le++)se=Z[Le],he=Re+I(se,Le),ge+=J(se,$,ee,he,oe);else if(Le=_(Z),typeof Le=="function")for(Z=Le.call(Z),Le=0;!(se=Z.next()).done;)se=se.value,he=Re+I(se,Le++),ge+=J(se,$,ee,he,oe);else if(he==="object"){if(typeof Z.then=="function")return J(j(Z),$,ee,se,oe);throw $=String(Z),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ge}function q(Z,$,ee){if(Z==null)return Z;var se=[],oe=0;return J(Z,se,"","",function(he){return $.call(ee,he,oe++)}),se}function ne(Z){if(Z._status===-1){var $=Z._result;$=$(),$.then(function(ee){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ee)},function(ee){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ee)}),Z._status===-1&&(Z._status=0,Z._result=$)}if(Z._status===1)return Z._result.default;throw Z._result}var V=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function Q(){}return Dt.Children={map:q,forEach:function(Z,$,ee){q(Z,function(){$.apply(this,arguments)},ee)},count:function(Z){var $=0;return q(Z,function(){$++}),$},toArray:function(Z){return q(Z,function($){return $})||[]},only:function(Z){if(!R(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Dt.Component=S,Dt.Fragment=n,Dt.Profiler=a,Dt.PureComponent=A,Dt.StrictMode=i,Dt.Suspense=d,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return k.H.useMemoCache(Z)}},Dt.cache=function(Z){return function(){return Z.apply(null,arguments)}},Dt.cloneElement=function(Z,$,ee){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var se=D({},Z.props),oe=Z.key,he=void 0;if($!=null)for(ge in $.ref!==void 0&&(he=void 0),$.key!==void 0&&(oe=""+$.key),$)!M.call($,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&$.ref===void 0||(se[ge]=$[ge]);var ge=arguments.length-2;if(ge===1)se.children=ee;else if(1<ge){for(var Re=Array(ge),Le=0;Le<ge;Le++)Re[Le]=arguments[Le+2];se.children=Re}return B(Z.type,oe,void 0,void 0,he,se)},Dt.createContext=function(Z){return Z={$$typeof:c,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:l,_context:Z},Z},Dt.createElement=function(Z,$,ee){var se,oe={},he=null;if($!=null)for(se in $.key!==void 0&&(he=""+$.key),$)M.call($,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(oe[se]=$[se]);var ge=arguments.length-2;if(ge===1)oe.children=ee;else if(1<ge){for(var Re=Array(ge),Le=0;Le<ge;Le++)Re[Le]=arguments[Le+2];oe.children=Re}if(Z&&Z.defaultProps)for(se in ge=Z.defaultProps,ge)oe[se]===void 0&&(oe[se]=ge[se]);return B(Z,he,void 0,void 0,null,oe)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(Z){return{$$typeof:f,render:Z}},Dt.isValidElement=R,Dt.lazy=function(Z){return{$$typeof:m,_payload:{_status:-1,_result:Z},_init:ne}},Dt.memo=function(Z,$){return{$$typeof:h,type:Z,compare:$===void 0?null:$}},Dt.startTransition=function(Z){var $=k.T,ee={};k.T=ee;try{var se=Z(),oe=k.S;oe!==null&&oe(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Q,V)}catch(he){V(he)}finally{k.T=$}},Dt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Dt.use=function(Z){return k.H.use(Z)},Dt.useActionState=function(Z,$,ee){return k.H.useActionState(Z,$,ee)},Dt.useCallback=function(Z,$){return k.H.useCallback(Z,$)},Dt.useContext=function(Z){return k.H.useContext(Z)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(Z,$){return k.H.useDeferredValue(Z,$)},Dt.useEffect=function(Z,$,ee){var se=k.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(Z,$)},Dt.useId=function(){return k.H.useId()},Dt.useImperativeHandle=function(Z,$,ee){return k.H.useImperativeHandle(Z,$,ee)},Dt.useInsertionEffect=function(Z,$){return k.H.useInsertionEffect(Z,$)},Dt.useLayoutEffect=function(Z,$){return k.H.useLayoutEffect(Z,$)},Dt.useMemo=function(Z,$){return k.H.useMemo(Z,$)},Dt.useOptimistic=function(Z,$){return k.H.useOptimistic(Z,$)},Dt.useReducer=function(Z,$,ee){return k.H.useReducer(Z,$,ee)},Dt.useRef=function(Z){return k.H.useRef(Z)},Dt.useState=function(Z){return k.H.useState(Z)},Dt.useSyncExternalStore=function(Z,$,ee){return k.H.useSyncExternalStore(Z,$,ee)},Dt.useTransition=function(){return k.H.useTransition()},Dt.version="19.1.1",Dt}var r_;function wg(){return r_||(r_=1,Wp.exports=fS()),Wp.exports}var W=wg();const Jn=kd(W),Bb=lS({__proto__:null,default:Jn},[W]);var Qp={exports:{}},gc={},Jp={exports:{}},e0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function hS(){return i_||(i_=1,(function(e){function t(q,ne){var V=q.length;q.push(ne);e:for(;0<V;){var Q=V-1>>>1,Z=q[Q];if(0<a(Z,ne))q[Q]=ne,q[V]=Z,V=Q;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ne=q[0],V=q.pop();if(V!==ne){q[0]=V;e:for(var Q=0,Z=q.length,$=Z>>>1;Q<$;){var ee=2*(Q+1)-1,se=q[ee],oe=ee+1,he=q[oe];if(0>a(se,V))oe<Z&&0>a(he,se)?(q[Q]=he,q[oe]=V,Q=oe):(q[Q]=se,q[ee]=V,Q=ee);else if(oe<Z&&0>a(he,V))q[Q]=he,q[oe]=V,Q=oe;else break e}}return ne}function a(q,ne){var V=q.sortIndex-ne.sortIndex;return V!==0?V:q.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var d=[],h=[],m=1,g=null,_=3,x=!1,D=!1,y=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function z(q){for(var ne=n(h);ne!==null;){if(ne.callback===null)i(h);else if(ne.startTime<=q)i(h),ne.sortIndex=ne.expirationTime,t(d,ne);else break;ne=n(h)}}function k(q){if(y=!1,z(q),!D)if(n(d)!==null)D=!0,M||(M=!0,I());else{var ne=n(h);ne!==null&&J(k,ne.startTime-q)}}var M=!1,B=-1,P=5,R=-1;function H(){return S?!0:!(e.unstable_now()-R<P)}function U(){if(S=!1,M){var q=e.unstable_now();R=q;var ne=!0;try{e:{D=!1,y&&(y=!1,A(B),B=-1),x=!0;var V=_;try{t:{for(z(q),g=n(d);g!==null&&!(g.expirationTime>q&&H());){var Q=g.callback;if(typeof Q=="function"){g.callback=null,_=g.priorityLevel;var Z=Q(g.expirationTime<=q);if(q=e.unstable_now(),typeof Z=="function"){g.callback=Z,z(q),ne=!0;break t}g===n(d)&&i(d),z(q)}else i(d);g=n(d)}if(g!==null)ne=!0;else{var $=n(h);$!==null&&J(k,$.startTime-q),ne=!1}}break e}finally{g=null,_=V,x=!1}ne=void 0}}finally{ne?I():M=!1}}}var I;if(typeof N=="function")I=function(){N(U)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,j=X.port2;X.port1.onmessage=U,I=function(){j.postMessage(null)}}else I=function(){w(U,0)};function J(q,ne){B=w(function(){q(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(q){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var V=_;_=ne;try{return q()}finally{_=V}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(q,ne){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var V=_;_=q;try{return ne()}finally{_=V}},e.unstable_scheduleCallback=function(q,ne,V){var Q=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Q+V:Q):V=Q,q){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=V+Z,q={id:m++,callback:ne,priorityLevel:q,startTime:V,expirationTime:Z,sortIndex:-1},V>Q?(q.sortIndex=V,t(h,q),n(d)===null&&q===n(h)&&(y?(A(B),B=-1):y=!0,J(k,V-Q))):(q.sortIndex=Z,t(d,q),D||x||(D=!0,M||(M=!0,I()))),q},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(q){var ne=_;return function(){var V=_;_=ne;try{return q.apply(this,arguments)}finally{_=V}}}})(e0)),e0}var a_;function dS(){return a_||(a_=1,Jp.exports=hS()),Jp.exports}var t0={exports:{}},sr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function mS(){if(s_)return sr;s_=1;var e=wg();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:d,containerInfo:h,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sr.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return l(d,h,null,m)},sr.flushSync=function(d){var h=c.T,m=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=h,i.p=m,i.d.f()}},sr.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},sr.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},sr.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,g=f(m,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:x}):m==="script"&&i.d.X(d,{crossOrigin:g,integrity:_,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},sr.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=f(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},sr.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=f(m,h.crossOrigin);i.d.L(d,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},sr.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=f(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},sr.requestFormReset=function(d){i.d.r(d)},sr.unstable_batchedUpdates=function(d,h){return d(h)},sr.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},sr.useFormStatus=function(){return c.H.useHostTransitionStatus()},sr.version="19.1.1",sr}var o_;function Pb(){if(o_)return t0.exports;o_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),t0.exports=mS(),t0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function pS(){if(l_)return gc;l_=1;var e=dS(),t=wg(),n=Pb();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,u=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(u=s.return),r=s.return;while(r)}return s.tag===3?u:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function d(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var u=r,v=s;;){var C=u.return;if(C===null)break;var T=C.alternate;if(T===null){if(v=C.return,v!==null){u=v;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===u)return f(C),r;if(T===v)return f(C),s;T=T.sibling}throw Error(i(188))}if(u.return!==v.return)u=C,v=T;else{for(var K=!1,re=C.child;re;){if(re===u){K=!0,u=C,v=T;break}if(re===v){K=!0,v=C,u=T;break}re=re.sibling}if(!K){for(re=T.child;re;){if(re===u){K=!0,u=T,v=C;break}if(re===v){K=!0,v=T,u=C;break}re=re.sibling}if(!K)throw Error(i(189))}}if(u.alternate!==v)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:s}function h(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=h(r),s!==null)return s;r=r.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),N=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function I(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function j(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case S:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case M:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case N:return(r.displayName||"Context")+".Provider";case A:return(r._context.displayName||"Context")+".Consumer";case z:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case B:return s=r.displayName||null,s!==null?s:j(r.type)||"Memo";case P:s=r._payload,r=r._init;try{return j(r(s))}catch{}}return null}var J=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},Q=[],Z=-1;function $(r){return{current:r}}function ee(r){0>Z||(r.current=Q[Z],Q[Z]=null,Z--)}function se(r,s){Z++,Q[Z]=r.current,r.current=s}var oe=$(null),he=$(null),ge=$(null),Re=$(null);function Le(r,s){switch(se(ge,s),se(he,r),se(oe,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Ny(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Ny(s),r=My(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(oe),se(oe,r)}function Ge(){ee(oe),ee(he),ee(ge)}function Ke(r){r.memoizedState!==null&&se(Re,r);var s=oe.current,u=My(s,r.type);s!==u&&(se(he,r),se(oe,u))}function Qe(r){he.current===r&&(ee(oe),ee(he)),Re.current===r&&(ee(Re),cc._currentValue=V)}var $e=Object.prototype.hasOwnProperty,Ve=e.unstable_scheduleCallback,G=e.unstable_cancelCallback,ke=e.unstable_shouldYield,Se=e.unstable_requestPaint,ae=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,de=e.unstable_ImmediatePriority,Fe=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,xe=e.unstable_LowPriority,te=e.unstable_IdlePriority,le=e.log,ue=e.unstable_setDisableYieldValue,ve=null,Ne=null;function Ce(r){if(typeof le=="function"&&ue(r),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(ve,r)}catch{}}var Ie=Math.clz32?Math.clz32:me,ye=Math.log,we=Math.LN2;function me(r){return r>>>=0,r===0?32:31-(ye(r)/we|0)|0}var De=256,je=4194304;function Xe(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ye(r,s,u){var v=r.pendingLanes;if(v===0)return 0;var C=0,T=r.suspendedLanes,K=r.pingedLanes;r=r.warmLanes;var re=v&134217727;return re!==0?(v=re&~T,v!==0?C=Xe(v):(K&=re,K!==0?C=Xe(K):u||(u=re&~r,u!==0&&(C=Xe(u))))):(re=v&~T,re!==0?C=Xe(re):K!==0?C=Xe(K):u||(u=v&~r,u!==0&&(C=Xe(u)))),C===0?0:s!==0&&s!==C&&(s&T)===0&&(T=C&-C,u=s&-s,T>=u||T===32&&(u&4194048)!==0)?s:C}function We(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function gt(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zt(){var r=De;return De<<=1,(De&4194048)===0&&(De=256),r}function Ut(){var r=je;return je<<=1,(je&62914560)===0&&(je=4194304),r}function It(r){for(var s=[],u=0;31>u;u++)s.push(r);return s}function rn(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function zn(r,s,u,v,C,T){var K=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var re=r.entanglements,fe=r.expirationTimes,Ae=r.hiddenUpdates;for(u=K&~u;0<u;){var Pe=31-Ie(u),Ue=1<<Pe;re[Pe]=0,fe[Pe]=-1;var Me=Ae[Pe];if(Me!==null)for(Ae[Pe]=null,Pe=0;Pe<Me.length;Pe++){var Te=Me[Pe];Te!==null&&(Te.lane&=-536870913)}u&=~Ue}v!==0&&zr(r,v,0),T!==0&&C===0&&r.tag!==0&&(r.suspendedLanes|=T&~(K&~s))}function zr(r,s,u){r.pendingLanes|=s,r.suspendedLanes&=~s;var v=31-Ie(s);r.entangledLanes|=s,r.entanglements[v]=r.entanglements[v]|1073741824|u&4194090}function aa(r,s){var u=r.entangledLanes|=s;for(r=r.entanglements;u;){var v=31-Ie(u),C=1<<v;C&s|r[v]&s&&(r[v]|=s),u&=~C}}function Vs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ys(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Uo(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:Vy(r.type))}function Xs(r,s){var u=ne.p;try{return ne.p=r,s()}finally{ne.p=u}}var Qr=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Qr,Ln="__reactProps$"+Qr,Fi="__reactContainer$"+Qr,nr="__reactEvents$"+Qr,ut="__reactListeners$"+Qr,Zo="__reactHandles$"+Qr,Ws="__reactResources$"+Qr,Ri="__reactMarker$"+Qr;function Ia(r){delete r[Dn],delete r[Ln],delete r[nr],delete r[ut],delete r[Zo]}function Jr(r){var s=r[Dn];if(s)return s;for(var u=r.parentNode;u;){if(s=u[Fi]||u[Dn]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(r=Ly(r);r!==null;){if(u=r[Dn])return u;r=Ly(r)}return s}r=u,u=r.parentNode}return null}function mi(r){if(r=r[Dn]||r[Fi]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function br(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function pi(r){var s=r[Ws];return s||(s=r[Ws]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function hn(r){r[Ri]=!0}var Ko=new Set,qo={};function gi(r,s){vi(r,s),vi(r+"Capture",s)}function vi(r,s){for(qo[r]=s,r=0;r<s.length;r++)Ko.add(s[r])}var yu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lr={},Ft={};function Fn(r){return $e.call(Ft,r)?!0:$e.call(Lr,r)?!1:yu.test(r)?Ft[r]=!0:(Lr[r]=!0,!1)}function Ha(r,s,u){if(Fn(s))if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var v=s.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+u)}}function yi(r,s,u){if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+u)}}function Kn(r,s,u,v){if(v===null)r.removeAttribute(u);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(s,u,""+v)}}var sa,Ga;function oa(r){if(sa===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);sa=s&&s[1]||"",Ga=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sa+r+Ga}var $o=!1;function la(r,s){if(!r||$o)return"";$o=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(s){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Te){var Me=Te}Reflect.construct(r,[],Ue)}else{try{Ue.call()}catch(Te){Me=Te}r.call(Ue.prototype)}}else{try{throw Error()}catch(Te){Me=Te}(Ue=r())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Te){if(Te&&Me&&typeof Te.stack=="string")return[Te.stack,Me.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=v.DetermineComponentFrameRoot(),K=T[0],re=T[1];if(K&&re){var fe=K.split(`
`),Ae=re.split(`
`);for(C=v=0;v<fe.length&&!fe[v].includes("DetermineComponentFrameRoot");)v++;for(;C<Ae.length&&!Ae[C].includes("DetermineComponentFrameRoot");)C++;if(v===fe.length||C===Ae.length)for(v=fe.length-1,C=Ae.length-1;1<=v&&0<=C&&fe[v]!==Ae[C];)C--;for(;1<=v&&0<=C;v--,C--)if(fe[v]!==Ae[C]){if(v!==1||C!==1)do if(v--,C--,0>C||fe[v]!==Ae[C]){var Pe=`
`+fe[v].replace(" at new "," at ");return r.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",r.displayName)),Pe}while(1<=v&&0<=C);break}}}finally{$o=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?oa(u):""}function Rt(r){switch(r.tag){case 26:case 27:case 5:return oa(r.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 15:return la(r.type,!1);case 11:return la(r.type.render,!1);case 1:return la(r.type,!0);case 31:return oa("Activity");default:return""}}function Wt(r){try{var s="";do s+=Rt(r),r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function qn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ua(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(r){var s=ua(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),v=""+r[s];if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var C=u.get,T=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return C.call(this)},set:function(K){v=""+K,T.call(this,K)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return v},setValue:function(K){v=""+K},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Za(r){r._valueTracker||(r._valueTracker=Ua(r))}function bt(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var u=s.getValue(),v="";return r&&(v=ua(r)?r.checked?"true":"false":r.value),r=v,r!==u?(s.setValue(r),!0):!1}function Qt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var _u=/[\n"\\]/g;function $n(r){return r.replace(_u,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function rr(r,s,u,v,C,T,K,re){r.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?r.type=K:r.removeAttribute("type"),s!=null?K==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+qn(s)):r.value!==""+qn(s)&&(r.value=""+qn(s)):K!=="submit"&&K!=="reset"||r.removeAttribute("value"),s!=null?Ka(r,K,qn(s)):u!=null?Ka(r,K,qn(u)):v!=null&&r.removeAttribute("value"),C==null&&T!=null&&(r.defaultChecked=!!T),C!=null&&(r.checked=C&&typeof C!="function"&&typeof C!="symbol"),re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?r.name=""+qn(re):r.removeAttribute("name")}function Wc(r,s,u,v,C,T,K,re){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.type=T),s!=null||u!=null){if(!(T!=="submit"&&T!=="reset"||s!=null))return;u=u!=null?""+qn(u):"",s=s!=null?""+qn(s):u,re||s===r.value||(r.value=s),r.defaultValue=s}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,r.checked=re?r.checked:!!v,r.defaultChecked=!!v,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(r.name=K)}function Ka(r,s,u){s==="number"&&Qt(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function wr(r,s,u,v){if(r=r.options,s){s={};for(var C=0;C<u.length;C++)s["$"+u[C]]=!0;for(u=0;u<r.length;u++)C=s.hasOwnProperty("$"+r[u].value),r[u].selected!==C&&(r[u].selected=C),C&&v&&(r[u].defaultSelected=!0)}else{for(u=""+qn(u),s=null,C=0;C<r.length;C++){if(r[C].value===u){r[C].selected=!0,v&&(r[C].defaultSelected=!0);return}s!==null||r[C].disabled||(s=r[C])}s!==null&&(s.selected=!0)}}function un(r,s,u){if(s!=null&&(s=""+qn(s),s!==r.value&&(r.value=s),u==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=u!=null?""+qn(u):""}function ji(r,s,u,v){if(s==null){if(v!=null){if(u!=null)throw Error(i(92));if(J(v)){if(1<v.length)throw Error(i(93));v=v[0]}u=v}u==null&&(u=""),s=u}u=qn(s),r.defaultValue=u,v=r.textContent,v===u&&v!==""&&v!==null&&(r.value=v)}function ei(r,s){if(s){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=s;return}}r.textContent=s}var Qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vo(r,s,u){var v=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?v?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":v?r.setProperty(s,u):typeof u!="number"||u===0||Qs.has(s)?s==="float"?r.cssFloat=u:r[s]=(""+u).trim():r[s]=u+"px"}function qa(r,s,u){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,u!=null){for(var v in u)!u.hasOwnProperty(v)||s!=null&&s.hasOwnProperty(v)||(v.indexOf("--")===0?r.setProperty(v,""):v==="float"?r.cssFloat="":r[v]="");for(var C in s)v=s[C],s.hasOwnProperty(C)&&u[C]!==v&&Vo(r,C,v)}else for(var T in s)s.hasOwnProperty(T)&&Vo(r,T,s[T])}function Js(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $a(r){return Yo.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var eo=null;function Va(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ca=null,Bi=null;function Qc(r){var s=mi(r);if(s&&(r=s.stateNode)){var u=r[Ln]||null;e:switch(r=s.stateNode,s.type){case"input":if(rr(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+$n(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var v=u[s];if(v!==r&&v.form===r.form){var C=v[Ln]||null;if(!C)throw Error(i(90));rr(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(s=0;s<u.length;s++)v=u[s],v.form===r.form&&bt(v)}break e;case"textarea":un(r,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&wr(r,!!u.multiple,s,!1)}}}var _t=!1;function Fr(r,s,u){if(_t)return r(s,u);_t=!0;try{var v=r(s);return v}finally{if(_t=!1,(ca!==null||Bi!==null)&&($f(),ca&&(s=ca,r=Bi,Bi=ca=null,Qc(s),r)))for(s=0;s<r.length;s++)Qc(r[s])}}function Bt(r,s){var u=r.stateNode;if(u===null)return null;var v=u[Ln]||null;if(v===null)return null;u=v[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(r=r.type,v=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!v;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,s,typeof u));return u}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(ti)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){to=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{to=!1}var ni=null,_i=null,Ya=null;function Xa(){if(Ya)return Ya;var r,s=_i,u=s.length,v,C="value"in ni?ni.value:ni.textContent,T=C.length;for(r=0;r<u&&s[r]===C[r];r++);var K=u-r;for(v=1;v<=K&&s[u-v]===C[T-v];v++);return Ya=C.slice(r,1<v?1-v:void 0)}function dn(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ri(){return!0}function bu(){return!1}function Vn(r){function s(u,v,C,T,K){this._reactName=u,this._targetInst=C,this.type=v,this.nativeEvent=T,this.target=K,this.currentTarget=null;for(var re in r)r.hasOwnProperty(re)&&(u=r[re],this[re]=u?u(T):T[re]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ri:bu,this.isPropagationStopped=bu,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),s}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Vn(ha),da=m({},ha,{view:0,detail:0}),lm=Vn(da),Xo,Nt,ro,ir=m({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wo,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ro&&(ro&&r.type==="mousemove"?(Xo=r.screenX-ro.screenX,Nt=r.screenY-ro.screenY):Nt=Xo=0,ro=r),Xo)},movementY:function(r){return"movementY"in r?r.movementY:Nt}}),Wa=Vn(ir),Jc=m({},ir,{dataTransfer:0}),um=Vn(Jc),wu=m({},da,{relatedTarget:0}),Du=Vn(wu),ef=m({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),cm=Vn(ef),fm=m({},ha,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Eu=Vn(fm),hm=m({},ha,{data:0}),Rr=Vn(hm),dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nf(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Pi[r])?!!s[r]:!1}function Wo(){return nf}var Su=m({},da,{key:function(r){if(r.key){var s=dm[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=dn(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?tf[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wo,charCode:function(r){return r.type==="keypress"?dn(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?dn(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),mm=Vn(Su),rf=m({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cu=Vn(rf),pm=m({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wo}),gm=Vn(pm),Au=m({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),vm=Vn(Au),af=m({},ir,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),sf=Vn(af),Qo=m({},ha,{newState:0,oldState:0}),ma=Vn(Qo),ym=[9,13,27,32],pa=ti&&"CompositionEvent"in window,Rn=null;ti&&"documentMode"in document&&(Rn=document.documentMode);var of=ti&&"TextEvent"in window&&!Rn,Nu=ti&&(!pa||Rn&&8<Rn&&11>=Rn),lf=" ",Jo=!1;function el(r,s){switch(r){case"keyup":return ym.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Qa=!1;function cf(r,s){switch(r){case"compositionend":return uf(s);case"keypress":return s.which!==32?null:(Jo=!0,lf);case"textInput":return r=s.data,r===lf&&Jo?null:r;default:return null}}function _m(r,s){if(Qa)return r==="compositionend"||!pa&&el(r,s)?(r=Xa(),Ya=_i=ni=null,Qa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Nu&&s.locale!=="ko"?null:s.data;default:return null}}var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ga(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!jr[r.type]:s==="textarea"}function ff(r,s,u,v){ca?Bi?Bi.push(v):Bi=[v]:ca=v,s=Jf(s,"onChange"),0<s.length&&(u=new no("onChange","change",null,u,v),r.push({event:u,listeners:s}))}var dr=null,io=null;function Ja(r){Dy(r,0)}function tl(r){var s=br(r);if(bt(s))return r}function es(r,s){if(r==="change")return s}var Mu=!1;if(ti){var ts;if(ti){var ku="oninput"in document;if(!ku){var xi=document.createElement("div");xi.setAttribute("oninput","return;"),ku=typeof xi.oninput=="function"}ts=ku}else ts=!1;Mu=ts&&(!document.documentMode||9<document.documentMode)}function ao(){dr&&(dr.detachEvent("onpropertychange",hf),io=dr=null)}function hf(r){if(r.propertyName==="value"&&tl(io)){var s=[];ff(s,io,r,Va(r)),Fr(Ja,s)}}function Tu(r,s,u){r==="focusin"?(ao(),dr=s,io=u,dr.attachEvent("onpropertychange",hf)):r==="focusout"&&ao()}function xm(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return tl(io)}function bi(r,s){if(r==="click")return tl(s)}function bm(r,s){if(r==="input"||r==="change")return tl(s)}function ns(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var mr=typeof Object.is=="function"?Object.is:ns;function pr(r,s){if(mr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var u=Object.keys(r),v=Object.keys(s);if(u.length!==v.length)return!1;for(v=0;v<u.length;v++){var C=u[v];if(!$e.call(s,C)||!mr(r[C],s[C]))return!1}return!0}function so(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zu(r,s){var u=so(r);r=0;for(var v;u;){if(u.nodeType===3){if(v=r+u.textContent.length,r<=s&&v>=s)return{node:u,offset:s-r};r=v}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=so(u)}}function nl(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?nl(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function oo(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Qt(r.document);s instanceof r.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)r=s.contentWindow;else break;s=Qt(r.document)}return s}function lo(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var rl=ti&&"documentMode"in document&&11>=document.documentMode,Br=null,rs=null,va=null,il=!1;function df(r,s,u){var v=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;il||Br==null||Br!==Qt(v)||(v=Br,"selectionStart"in v&&lo(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),va&&pr(va,v)||(va=v,v=Jf(rs,"onSelect"),0<v.length&&(s=new no("onSelect","select",null,s,u),r.push({event:s,listeners:v}),s.target=Br)))}function ii(r,s){var u={};return u[r.toLowerCase()]=s.toLowerCase(),u["Webkit"+r]="webkit"+s,u["Moz"+r]="moz"+s,u}var is={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionrun:ii("Transition","TransitionRun"),transitionstart:ii("Transition","TransitionStart"),transitioncancel:ii("Transition","TransitionCancel"),transitionend:ii("Transition","TransitionEnd")},al={},mf={};ti&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Oi(r){if(al[r])return al[r];if(!is[r])return r;var s=is[r],u;for(u in s)if(s.hasOwnProperty(u)&&u in mf)return al[r]=s[u];return r}var pf=Oi("animationend"),Pr=Oi("animationiteration"),uo=Oi("animationstart"),wm=Oi("transitionrun"),sl=Oi("transitionstart"),Dm=Oi("transitioncancel"),Lu=Oi("transitionend"),gf=new Map,ya="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ya.push("scrollEnd");function Or(r,s){gf.set(r,s),gi(s,[r])}var _a=new WeakMap;function gr(r,s){if(typeof r=="object"&&r!==null){var u=_a.get(r);return u!==void 0?u:(s={value:r,source:s,stack:Wt(s)},_a.set(r,s),s)}return{value:r,source:s,stack:Wt(s)}}var vr=[],as=0,Ir=0;function co(){for(var r=as,s=Ir=as=0;s<r;){var u=vr[s];vr[s++]=null;var v=vr[s];vr[s++]=null;var C=vr[s];vr[s++]=null;var T=vr[s];if(vr[s++]=null,v!==null&&C!==null){var K=v.pending;K===null?C.next=C:(C.next=K.next,K.next=C),v.pending=C}T!==0&&ho(u,C,T)}}function fo(r,s,u,v){vr[as++]=r,vr[as++]=s,vr[as++]=u,vr[as++]=v,Ir|=v,r.lanes|=v,r=r.alternate,r!==null&&(r.lanes|=v)}function xa(r,s,u,v){return fo(r,s,u,v),Ii(r)}function ss(r,s){return fo(r,null,null,s),Ii(r)}function ho(r,s,u){r.lanes|=u;var v=r.alternate;v!==null&&(v.lanes|=u);for(var C=!1,T=r.return;T!==null;)T.childLanes|=u,v=T.alternate,v!==null&&(v.childLanes|=u),T.tag===22&&(r=T.stateNode,r===null||r._visibility&1||(C=!0)),r=T,T=T.return;return r.tag===3?(T=r.stateNode,C&&s!==null&&(C=31-Ie(u),r=T.hiddenUpdates,v=r[C],v===null?r[C]=[s]:v.push(s),s.lane=u|536870912),T):null}function Ii(r){if(50<nc)throw nc=0,xp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ba={};function vf(r,s,u,v){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(r,s,u,v){return new vf(r,s,u,v)}function ol(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ai(r,s){var u=r.alternate;return u===null?(u=yr(r.tag,s,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=s,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,s=r.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Fu(r,s){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,s=u.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function mo(r,s,u,v,C,T){var K=0;if(v=r,typeof r=="function")ol(r)&&(K=1);else if(typeof r=="string")K=Y3(r,u,oe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=yr(31,u,s,C),r.elementType=R,r.lanes=T,r;case D:return Hi(u.children,C,T,s);case y:K=8,C|=24;break;case S:return r=yr(12,u,s,C|2),r.elementType=S,r.lanes=T,r;case k:return r=yr(13,u,s,C),r.elementType=k,r.lanes=T,r;case M:return r=yr(19,u,s,C),r.elementType=M,r.lanes=T,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case w:case N:K=10;break e;case A:K=9;break e;case z:K=11;break e;case B:K=14;break e;case P:K=16,v=null;break e}K=29,u=Error(i(130,r===null?"null":typeof r,"")),v=null}return s=yr(K,u,s,C),s.elementType=r,s.type=v,s.lanes=T,s}function Hi(r,s,u,v){return r=yr(7,r,v,s),r.lanes=u,r}function Ru(r,s,u){return r=yr(6,r,null,s),r.lanes=u,r}function ll(r,s,u){return s=yr(4,r.children!==null?r.children:[],r.key,s),s.lanes=u,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var wa=[],os=0,o=null,p=0,E=[],F=0,O=null,Y=1,ce="";function be(r,s){wa[os++]=p,wa[os++]=o,o=r,p=s}function ze(r,s,u){E[F++]=Y,E[F++]=ce,E[F++]=O,O=r;var v=Y;r=ce;var C=32-Ie(v)-1;v&=~(1<<C),u+=1;var T=32-Ie(s)+C;if(30<T){var K=C-C%5;T=(v&(1<<K)-1).toString(32),v>>=K,C-=K,Y=1<<32-Ie(s)+C|u<<C|v,ce=T+r}else Y=1<<T|u<<C|v,ce=r}function Ze(r){r.return!==null&&(be(r,1),ze(r,1,0))}function et(r){for(;r===o;)o=wa[--os],wa[os]=null,p=wa[--os],wa[os]=null;for(;r===O;)O=E[--F],E[F]=null,ce=E[--F],E[F]=null,Y=E[--F],E[F]=null}var nt=null,lt=null,yt=!1,Jt=null,cn=!1,jn=Error(i(519));function Dr(r){var s=Error(i(418,""));throw us(gr(s,r)),jn}function yf(r){var s=r.stateNode,u=r.type,v=r.memoizedProps;switch(s[Dn]=r,s[Ln]=v,u){case"dialog":Tt("cancel",s),Tt("close",s);break;case"iframe":case"object":case"embed":Tt("load",s);break;case"video":case"audio":for(u=0;u<ic.length;u++)Tt(ic[u],s);break;case"source":Tt("error",s);break;case"img":case"image":case"link":Tt("error",s),Tt("load",s);break;case"details":Tt("toggle",s);break;case"input":Tt("invalid",s),Wc(s,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Za(s);break;case"select":Tt("invalid",s);break;case"textarea":Tt("invalid",s),ji(s,v.value,v.defaultValue,v.children),Za(s)}u=v.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||v.suppressHydrationWarning===!0||Ay(s.textContent,u)?(v.popover!=null&&(Tt("beforetoggle",s),Tt("toggle",s)),v.onScroll!=null&&Tt("scroll",s),v.onScrollEnd!=null&&Tt("scrollend",s),v.onClick!=null&&(s.onclick=eh),s=!0):s=!1,s||Dr(r)}function _f(r){for(nt=r.return;nt;)switch(nt.tag){case 5:case 13:cn=!1;return;case 27:case 3:cn=!0;return;default:nt=nt.return}}function po(r){if(r!==nt)return!1;if(!yt)return _f(r),yt=!0,!1;var s=r.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||jp(r.type,r.memoizedProps)),u=!u),u&&lt&&Dr(r),_f(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(u=r.data,u==="/$"){if(s===0){lt=Si(r.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;r=r.nextSibling}lt=null}}else s===27?(s=lt,Es(r.type)?(r=Ip,Ip=null,lt=r):lt=s):lt=nt?Si(r.stateNode.nextSibling):null;return!0}function ls(){lt=nt=null,yt=!1}function xf(){var r=Jt;return r!==null&&(Cr===null?Cr=r:Cr.push.apply(Cr,r),Jt=null),r}function us(r){Jt===null?Jt=[r]:Jt.push(r)}var sn=$(null),si=null,wi=null;function Gi(r,s,u){se(sn,s._currentValue),s._currentValue=u}function Di(r){r._currentValue=sn.current,ee(sn)}function go(r,s,u){for(;r!==null;){var v=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,v!==null&&(v.childLanes|=s)):v!==null&&(v.childLanes&s)!==s&&(v.childLanes|=s),r===u)break;r=r.return}}function ul(r,s,u,v){var C=r.child;for(C!==null&&(C.return=r);C!==null;){var T=C.dependencies;if(T!==null){var K=C.child;T=T.firstContext;e:for(;T!==null;){var re=T;T=C;for(var fe=0;fe<s.length;fe++)if(re.context===s[fe]){T.lanes|=u,re=T.alternate,re!==null&&(re.lanes|=u),go(T.return,u,r),v||(K=null);break e}T=re.next}}else if(C.tag===18){if(K=C.return,K===null)throw Error(i(341));K.lanes|=u,T=K.alternate,T!==null&&(T.lanes|=u),go(K,u,r),K=null}else K=C.child;if(K!==null)K.return=C;else for(K=C;K!==null;){if(K===r){K=null;break}if(C=K.sibling,C!==null){C.return=K.return,K=C;break}K=K.return}C=K}}function vo(r,s,u,v){r=null;for(var C=s,T=!1;C!==null;){if(!T){if((C.flags&524288)!==0)T=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var K=C.alternate;if(K===null)throw Error(i(387));if(K=K.memoizedProps,K!==null){var re=C.type;mr(C.pendingProps.value,K.value)||(r!==null?r.push(re):r=[re])}}else if(C===Re.current){if(K=C.alternate,K===null)throw Error(i(387));K.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(r!==null?r.push(cc):r=[cc])}C=C.return}r!==null&&ul(s,r,u,v),s.flags|=262144}function bf(r){for(r=r.firstContext;r!==null;){if(!mr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function yo(r){si=r,wi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ar(r){return dv(si,r)}function wf(r,s){return si===null&&yo(r),dv(r,s)}function dv(r,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},wi===null){if(r===null)throw Error(i(308));wi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else wi=wi.next=s;return u}var VE=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(u,v){r.push(v)}};this.abort=function(){s.aborted=!0,r.forEach(function(u){return u()})}},YE=e.unstable_scheduleCallback,XE=e.unstable_NormalPriority,Nn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Em(){return{controller:new VE,data:new Map,refCount:0}}function ju(r){r.refCount--,r.refCount===0&&YE(XE,function(){r.controller.abort()})}var Bu=null,Sm=0,cl=0,fl=null;function WE(r,s){if(Bu===null){var u=Bu=[];Sm=0,cl=Ap(),fl={status:"pending",value:void 0,then:function(v){u.push(v)}}}return Sm++,s.then(mv,mv),s}function mv(){if(--Sm===0&&Bu!==null){fl!==null&&(fl.status="fulfilled");var r=Bu;Bu=null,cl=0,fl=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function QE(r,s){var u=[],v={status:"pending",value:null,reason:null,then:function(C){u.push(C)}};return r.then(function(){v.status="fulfilled",v.value=s;for(var C=0;C<u.length;C++)(0,u[C])(s)},function(C){for(v.status="rejected",v.reason=C,C=0;C<u.length;C++)(0,u[C])(void 0)}),v}var pv=q.S;q.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&WE(r,s),pv!==null&&pv(r,s)};var _o=$(null);function Cm(){var r=_o.current;return r!==null?r:en.pooledCache}function Df(r,s){s===null?se(_o,_o.current):se(_o,s.pool)}function gv(){var r=Cm();return r===null?null:{parent:Nn._currentValue,pool:r}}var Pu=Error(i(460)),vv=Error(i(474)),Ef=Error(i(542)),Am={then:function(){}};function yv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Sf(){}function _v(r,s,u){switch(u=r[u],u===void 0?r.push(s):u!==s&&(s.then(Sf,Sf),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,bv(r),r;default:if(typeof s.status=="string")s.then(Sf,Sf);else{if(r=en,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(v){if(s.status==="pending"){var C=s;C.status="fulfilled",C.value=v}},function(v){if(s.status==="pending"){var C=s;C.status="rejected",C.reason=v}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,bv(r),r}throw Ou=s,Pu}}var Ou=null;function xv(){if(Ou===null)throw Error(i(459));var r=Ou;return Ou=null,r}function bv(r){if(r===Pu||r===Ef)throw Error(i(483))}var cs=!1;function Nm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function hs(r,s,u){var v=r.updateQueue;if(v===null)return null;if(v=v.shared,(Ht&2)!==0){var C=v.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),v.pending=s,s=Ii(r),ho(r,null,u),s}return fo(r,v,s,u),Ii(r)}function Iu(r,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var v=s.lanes;v&=r.pendingLanes,u|=v,s.lanes=u,aa(r,u)}}function km(r,s){var u=r.updateQueue,v=r.alternate;if(v!==null&&(v=v.updateQueue,u===v)){var C=null,T=null;if(u=u.firstBaseUpdate,u!==null){do{var K={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};T===null?C=T=K:T=T.next=K,u=u.next}while(u!==null);T===null?C=T=s:T=T.next=s}else C=T=s;u={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:v.shared,callbacks:v.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=s:r.next=s,u.lastBaseUpdate=s}var Tm=!1;function Hu(){if(Tm){var r=fl;if(r!==null)throw r}}function Gu(r,s,u,v){Tm=!1;var C=r.updateQueue;cs=!1;var T=C.firstBaseUpdate,K=C.lastBaseUpdate,re=C.shared.pending;if(re!==null){C.shared.pending=null;var fe=re,Ae=fe.next;fe.next=null,K===null?T=Ae:K.next=Ae,K=fe;var Pe=r.alternate;Pe!==null&&(Pe=Pe.updateQueue,re=Pe.lastBaseUpdate,re!==K&&(re===null?Pe.firstBaseUpdate=Ae:re.next=Ae,Pe.lastBaseUpdate=fe))}if(T!==null){var Ue=C.baseState;K=0,Pe=Ae=fe=null,re=T;do{var Me=re.lane&-536870913,Te=Me!==re.lane;if(Te?(jt&Me)===Me:(v&Me)===Me){Me!==0&&Me===cl&&(Tm=!0),Pe!==null&&(Pe=Pe.next={lane:0,tag:re.tag,payload:re.payload,callback:null,next:null});e:{var vt=r,dt=re;Me=s;var qt=u;switch(dt.tag){case 1:if(vt=dt.payload,typeof vt=="function"){Ue=vt.call(qt,Ue,Me);break e}Ue=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=dt.payload,Me=typeof vt=="function"?vt.call(qt,Ue,Me):vt,Me==null)break e;Ue=m({},Ue,Me);break e;case 2:cs=!0}}Me=re.callback,Me!==null&&(r.flags|=64,Te&&(r.flags|=8192),Te=C.callbacks,Te===null?C.callbacks=[Me]:Te.push(Me))}else Te={lane:Me,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Pe===null?(Ae=Pe=Te,fe=Ue):Pe=Pe.next=Te,K|=Me;if(re=re.next,re===null){if(re=C.shared.pending,re===null)break;Te=re,re=Te.next,Te.next=null,C.lastBaseUpdate=Te,C.shared.pending=null}}while(!0);Pe===null&&(fe=Ue),C.baseState=fe,C.firstBaseUpdate=Ae,C.lastBaseUpdate=Pe,T===null&&(C.shared.lanes=0),xs|=K,r.lanes=K,r.memoizedState=Ue}}function wv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Dv(r,s){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)wv(u[r],s)}var hl=$(null),Cf=$(0);function Ev(r,s){r=Ma,se(Cf,r),se(hl,s),Ma=r|s.baseLanes}function zm(){se(Cf,Ma),se(hl,hl.current)}function Lm(){Ma=Cf.current,ee(hl),ee(Cf)}var ds=0,St=null,Zt=null,En=null,Af=!1,dl=!1,xo=!1,Nf=0,Uu=0,ml=null,JE=0;function vn(){throw Error(i(321))}function Fm(r,s){if(s===null)return!1;for(var u=0;u<s.length&&u<r.length;u++)if(!mr(r[u],s[u]))return!1;return!0}function Rm(r,s,u,v,C,T){return ds=T,St=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=r===null||r.memoizedState===null?o1:l1,xo=!1,T=u(v,C),xo=!1,dl&&(T=Cv(s,u,v,C)),Sv(r),T}function Sv(r){q.H=Ff;var s=Zt!==null&&Zt.next!==null;if(ds=0,En=Zt=St=null,Af=!1,Uu=0,ml=null,s)throw Error(i(300));r===null||Bn||(r=r.dependencies,r!==null&&bf(r)&&(Bn=!0))}function Cv(r,s,u,v){St=r;var C=0;do{if(dl&&(ml=null),Uu=0,dl=!1,25<=C)throw Error(i(301));if(C+=1,En=Zt=null,r.updateQueue!=null){var T=r.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}q.H=s3,T=s(u,v)}while(dl);return T}function e3(){var r=q.H,s=r.useState()[0];return s=typeof s.then=="function"?Zu(s):s,r=r.useState()[0],(Zt!==null?Zt.memoizedState:null)!==r&&(St.flags|=1024),s}function jm(){var r=Nf!==0;return Nf=0,r}function Bm(r,s,u){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~u}function Pm(r){if(Af){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Af=!1}ds=0,En=Zt=St=null,dl=!1,Uu=Nf=0,ml=null}function Er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?St.memoizedState=En=r:En=En.next=r,En}function Sn(){if(Zt===null){var r=St.alternate;r=r!==null?r.memoizedState:null}else r=Zt.next;var s=En===null?St.memoizedState:En.next;if(s!==null)En=s,Zt=r;else{if(r===null)throw St.alternate===null?Error(i(467)):Error(i(310));Zt=r,r={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},En===null?St.memoizedState=En=r:En=En.next=r}return En}function Om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zu(r){var s=Uu;return Uu+=1,ml===null&&(ml=[]),r=_v(ml,r,s),s=St,(En===null?s.memoizedState:En.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?o1:l1),r}function Mf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Zu(r);if(r.$$typeof===N)return ar(r)}throw Error(i(438,String(r)))}function Im(r){var s=null,u=St.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var v=St.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(s={data:v.data.map(function(C){return C.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Om(),St.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(r),v=0;v<r;v++)u[v]=H;return s.index++,u}function Da(r,s){return typeof s=="function"?s(r):s}function kf(r){var s=Sn();return Hm(s,Zt,r)}function Hm(r,s,u){var v=r.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=u;var C=r.baseQueue,T=v.pending;if(T!==null){if(C!==null){var K=C.next;C.next=T.next,T.next=K}s.baseQueue=C=T,v.pending=null}if(T=r.baseState,C===null)r.memoizedState=T;else{s=C.next;var re=K=null,fe=null,Ae=s,Pe=!1;do{var Ue=Ae.lane&-536870913;if(Ue!==Ae.lane?(jt&Ue)===Ue:(ds&Ue)===Ue){var Me=Ae.revertLane;if(Me===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Ue===cl&&(Pe=!0);else if((ds&Me)===Me){Ae=Ae.next,Me===cl&&(Pe=!0);continue}else Ue={lane:0,revertLane:Ae.revertLane,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},fe===null?(re=fe=Ue,K=T):fe=fe.next=Ue,St.lanes|=Me,xs|=Me;Ue=Ae.action,xo&&u(T,Ue),T=Ae.hasEagerState?Ae.eagerState:u(T,Ue)}else Me={lane:Ue,revertLane:Ae.revertLane,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},fe===null?(re=fe=Me,K=T):fe=fe.next=Me,St.lanes|=Ue,xs|=Ue;Ae=Ae.next}while(Ae!==null&&Ae!==s);if(fe===null?K=T:fe.next=re,!mr(T,r.memoizedState)&&(Bn=!0,Pe&&(u=fl,u!==null)))throw u;r.memoizedState=T,r.baseState=K,r.baseQueue=fe,v.lastRenderedState=T}return C===null&&(v.lanes=0),[r.memoizedState,v.dispatch]}function Gm(r){var s=Sn(),u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var v=u.dispatch,C=u.pending,T=s.memoizedState;if(C!==null){u.pending=null;var K=C=C.next;do T=r(T,K.action),K=K.next;while(K!==C);mr(T,s.memoizedState)||(Bn=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),u.lastRenderedState=T}return[T,v]}function Av(r,s,u){var v=St,C=Sn(),T=yt;if(T){if(u===void 0)throw Error(i(407));u=u()}else u=s();var K=!mr((Zt||C).memoizedState,u);K&&(C.memoizedState=u,Bn=!0),C=C.queue;var re=kv.bind(null,v,C,r);if(Ku(2048,8,re,[r]),C.getSnapshot!==s||K||En!==null&&En.memoizedState.tag&1){if(v.flags|=2048,pl(9,Tf(),Mv.bind(null,v,C,u,s),null),en===null)throw Error(i(349));T||(ds&124)!==0||Nv(v,s,u)}return u}function Nv(r,s,u){r.flags|=16384,r={getSnapshot:s,value:u},s=St.updateQueue,s===null?(s=Om(),St.updateQueue=s,s.stores=[r]):(u=s.stores,u===null?s.stores=[r]:u.push(r))}function Mv(r,s,u,v){s.value=u,s.getSnapshot=v,Tv(s)&&zv(r)}function kv(r,s,u){return u(function(){Tv(s)&&zv(r)})}function Tv(r){var s=r.getSnapshot;r=r.value;try{var u=s();return!mr(r,u)}catch{return!0}}function zv(r){var s=ss(r,2);s!==null&&Kr(s,r,2)}function Um(r){var s=Er();if(typeof r=="function"){var u=r;if(r=u(),xo){Ce(!0);try{u()}finally{Ce(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:r},s}function Lv(r,s,u,v){return r.baseState=u,Hm(r,Zt,typeof v=="function"?v:Da)}function t3(r,s,u,v,C){if(Lf(r))throw Error(i(485));if(r=s.action,r!==null){var T={payload:C,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){T.listeners.push(K)}};q.T!==null?u(!0):T.isTransition=!1,v(T),u=s.pending,u===null?(T.next=s.pending=T,Fv(s,T)):(T.next=u.next,s.pending=u.next=T)}}function Fv(r,s){var u=s.action,v=s.payload,C=r.state;if(s.isTransition){var T=q.T,K={};q.T=K;try{var re=u(C,v),fe=q.S;fe!==null&&fe(K,re),Rv(r,s,re)}catch(Ae){Zm(r,s,Ae)}finally{q.T=T}}else try{T=u(C,v),Rv(r,s,T)}catch(Ae){Zm(r,s,Ae)}}function Rv(r,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(v){jv(r,s,v)},function(v){return Zm(r,s,v)}):jv(r,s,u)}function jv(r,s,u){s.status="fulfilled",s.value=u,Bv(s),r.state=u,s=r.pending,s!==null&&(u=s.next,u===s?r.pending=null:(u=u.next,s.next=u,Fv(r,u)))}function Zm(r,s,u){var v=r.pending;if(r.pending=null,v!==null){v=v.next;do s.status="rejected",s.reason=u,Bv(s),s=s.next;while(s!==v)}r.action=null}function Bv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Pv(r,s){return s}function Ov(r,s){if(yt){var u=en.formState;if(u!==null){e:{var v=St;if(yt){if(lt){t:{for(var C=lt,T=cn;C.nodeType!==8;){if(!T){C=null;break t}if(C=Si(C.nextSibling),C===null){C=null;break t}}T=C.data,C=T==="F!"||T==="F"?C:null}if(C){lt=Si(C.nextSibling),v=C.data==="F!";break e}}Dr(v)}v=!1}v&&(s=u[0])}}return u=Er(),u.memoizedState=u.baseState=s,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pv,lastRenderedState:s},u.queue=v,u=i1.bind(null,St,v),v.dispatch=u,v=Um(!1),T=Ym.bind(null,St,!1,v.queue),v=Er(),C={state:s,dispatch:null,action:r,pending:null},v.queue=C,u=t3.bind(null,St,C,T,u),C.dispatch=u,v.memoizedState=r,[s,u,!1]}function Iv(r){var s=Sn();return Hv(s,Zt,r)}function Hv(r,s,u){if(s=Hm(r,s,Pv)[0],r=kf(Da)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var v=Zu(s)}catch(K){throw K===Pu?Ef:K}else v=s;s=Sn();var C=s.queue,T=C.dispatch;return u!==s.memoizedState&&(St.flags|=2048,pl(9,Tf(),n3.bind(null,C,u),null)),[v,T,r]}function n3(r,s){r.action=s}function Gv(r){var s=Sn(),u=Zt;if(u!==null)return Hv(s,u,r);Sn(),s=s.memoizedState,u=Sn();var v=u.queue.dispatch;return u.memoizedState=r,[s,v,!1]}function pl(r,s,u,v){return r={tag:r,create:u,deps:v,inst:s,next:null},s=St.updateQueue,s===null&&(s=Om(),St.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=r.next=r:(v=u.next,u.next=r,r.next=v,s.lastEffect=r),r}function Tf(){return{destroy:void 0,resource:void 0}}function Uv(){return Sn().memoizedState}function zf(r,s,u,v){var C=Er();v=v===void 0?null:v,St.flags|=r,C.memoizedState=pl(1|s,Tf(),u,v)}function Ku(r,s,u,v){var C=Sn();v=v===void 0?null:v;var T=C.memoizedState.inst;Zt!==null&&v!==null&&Fm(v,Zt.memoizedState.deps)?C.memoizedState=pl(s,T,u,v):(St.flags|=r,C.memoizedState=pl(1|s,T,u,v))}function Zv(r,s){zf(8390656,8,r,s)}function Kv(r,s){Ku(2048,8,r,s)}function qv(r,s){return Ku(4,2,r,s)}function $v(r,s){return Ku(4,4,r,s)}function Vv(r,s){if(typeof s=="function"){r=r();var u=s(r);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Yv(r,s,u){u=u!=null?u.concat([r]):null,Ku(4,4,Vv.bind(null,s,r),u)}function Km(){}function Xv(r,s){var u=Sn();s=s===void 0?null:s;var v=u.memoizedState;return s!==null&&Fm(s,v[1])?v[0]:(u.memoizedState=[r,s],r)}function Wv(r,s){var u=Sn();s=s===void 0?null:s;var v=u.memoizedState;if(s!==null&&Fm(s,v[1]))return v[0];if(v=r(),xo){Ce(!0);try{r()}finally{Ce(!1)}}return u.memoizedState=[v,s],v}function qm(r,s,u){return u===void 0||(ds&1073741824)!==0?r.memoizedState=s:(r.memoizedState=u,r=ey(),St.lanes|=r,xs|=r,u)}function Qv(r,s,u,v){return mr(u,s)?u:hl.current!==null?(r=qm(r,u,v),mr(r,s)||(Bn=!0),r):(ds&42)===0?(Bn=!0,r.memoizedState=u):(r=ey(),St.lanes|=r,xs|=r,s)}function Jv(r,s,u,v,C){var T=ne.p;ne.p=T!==0&&8>T?T:8;var K=q.T,re={};q.T=re,Ym(r,!1,s,u);try{var fe=C(),Ae=q.S;if(Ae!==null&&Ae(re,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Pe=QE(fe,v);qu(r,s,Pe,Zr(r))}else qu(r,s,v,Zr(r))}catch(Ue){qu(r,s,{then:function(){},status:"rejected",reason:Ue},Zr())}finally{ne.p=T,q.T=K}}function r3(){}function $m(r,s,u,v){if(r.tag!==5)throw Error(i(476));var C=e1(r).queue;Jv(r,C,s,V,u===null?r3:function(){return t1(r),u(v)})}function e1(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:V},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:u},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function t1(r){var s=e1(r).next.queue;qu(r,s,{},Zr())}function Vm(){return ar(cc)}function n1(){return Sn().memoizedState}function r1(){return Sn().memoizedState}function i3(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var u=Zr();r=fs(u);var v=hs(s,r,u);v!==null&&(Kr(v,s,u),Iu(v,s,u)),s={cache:Em()},r.payload=s;return}s=s.return}}function a3(r,s,u){var v=Zr();u={lane:v,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Lf(r)?a1(s,u):(u=xa(r,s,u,v),u!==null&&(Kr(u,r,v),s1(u,s,v)))}function i1(r,s,u){var v=Zr();qu(r,s,u,v)}function qu(r,s,u,v){var C={lane:v,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Lf(r))a1(s,C);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var K=s.lastRenderedState,re=T(K,u);if(C.hasEagerState=!0,C.eagerState=re,mr(re,K))return fo(r,s,C,0),en===null&&co(),!1}catch{}finally{}if(u=xa(r,s,C,v),u!==null)return Kr(u,r,v),s1(u,s,v),!0}return!1}function Ym(r,s,u,v){if(v={lane:2,revertLane:Ap(),action:v,hasEagerState:!1,eagerState:null,next:null},Lf(r)){if(s)throw Error(i(479))}else s=xa(r,u,v,2),s!==null&&Kr(s,r,2)}function Lf(r){var s=r.alternate;return r===St||s!==null&&s===St}function a1(r,s){dl=Af=!0;var u=r.pending;u===null?s.next=s:(s.next=u.next,u.next=s),r.pending=s}function s1(r,s,u){if((u&4194048)!==0){var v=s.lanes;v&=r.pendingLanes,u|=v,s.lanes=u,aa(r,u)}}var Ff={readContext:ar,use:Mf,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn},o1={readContext:ar,use:Mf,useCallback:function(r,s){return Er().memoizedState=[r,s===void 0?null:s],r},useContext:ar,useEffect:Zv,useImperativeHandle:function(r,s,u){u=u!=null?u.concat([r]):null,zf(4194308,4,Vv.bind(null,s,r),u)},useLayoutEffect:function(r,s){return zf(4194308,4,r,s)},useInsertionEffect:function(r,s){zf(4,2,r,s)},useMemo:function(r,s){var u=Er();s=s===void 0?null:s;var v=r();if(xo){Ce(!0);try{r()}finally{Ce(!1)}}return u.memoizedState=[v,s],v},useReducer:function(r,s,u){var v=Er();if(u!==void 0){var C=u(s);if(xo){Ce(!0);try{u(s)}finally{Ce(!1)}}}else C=s;return v.memoizedState=v.baseState=C,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:C},v.queue=r,r=r.dispatch=a3.bind(null,St,r),[v.memoizedState,r]},useRef:function(r){var s=Er();return r={current:r},s.memoizedState=r},useState:function(r){r=Um(r);var s=r.queue,u=i1.bind(null,St,s);return s.dispatch=u,[r.memoizedState,u]},useDebugValue:Km,useDeferredValue:function(r,s){var u=Er();return qm(u,r,s)},useTransition:function(){var r=Um(!1);return r=Jv.bind(null,St,r.queue,!0,!1),Er().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,u){var v=St,C=Er();if(yt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=s(),en===null)throw Error(i(349));(jt&124)!==0||Nv(v,s,u)}C.memoizedState=u;var T={value:u,getSnapshot:s};return C.queue=T,Zv(kv.bind(null,v,T,r),[r]),v.flags|=2048,pl(9,Tf(),Mv.bind(null,v,T,u,s),null),u},useId:function(){var r=Er(),s=en.identifierPrefix;if(yt){var u=ce,v=Y;u=(v&~(1<<32-Ie(v)-1)).toString(32)+u,s="«"+s+"R"+u,u=Nf++,0<u&&(s+="H"+u.toString(32)),s+="»"}else u=JE++,s="«"+s+"r"+u.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:Vm,useFormState:Ov,useActionState:Ov,useOptimistic:function(r){var s=Er();s.memoizedState=s.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Ym.bind(null,St,!0,u),u.dispatch=s,[r,s]},useMemoCache:Im,useCacheRefresh:function(){return Er().memoizedState=i3.bind(null,St)}},l1={readContext:ar,use:Mf,useCallback:Xv,useContext:ar,useEffect:Kv,useImperativeHandle:Yv,useInsertionEffect:qv,useLayoutEffect:$v,useMemo:Wv,useReducer:kf,useRef:Uv,useState:function(){return kf(Da)},useDebugValue:Km,useDeferredValue:function(r,s){var u=Sn();return Qv(u,Zt.memoizedState,r,s)},useTransition:function(){var r=kf(Da)[0],s=Sn().memoizedState;return[typeof r=="boolean"?r:Zu(r),s]},useSyncExternalStore:Av,useId:n1,useHostTransitionStatus:Vm,useFormState:Iv,useActionState:Iv,useOptimistic:function(r,s){var u=Sn();return Lv(u,Zt,r,s)},useMemoCache:Im,useCacheRefresh:r1},s3={readContext:ar,use:Mf,useCallback:Xv,useContext:ar,useEffect:Kv,useImperativeHandle:Yv,useInsertionEffect:qv,useLayoutEffect:$v,useMemo:Wv,useReducer:Gm,useRef:Uv,useState:function(){return Gm(Da)},useDebugValue:Km,useDeferredValue:function(r,s){var u=Sn();return Zt===null?qm(u,r,s):Qv(u,Zt.memoizedState,r,s)},useTransition:function(){var r=Gm(Da)[0],s=Sn().memoizedState;return[typeof r=="boolean"?r:Zu(r),s]},useSyncExternalStore:Av,useId:n1,useHostTransitionStatus:Vm,useFormState:Gv,useActionState:Gv,useOptimistic:function(r,s){var u=Sn();return Zt!==null?Lv(u,Zt,r,s):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Im,useCacheRefresh:r1},gl=null,$u=0;function Rf(r){var s=$u;return $u+=1,gl===null&&(gl=[]),_v(gl,r,s)}function Vu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function jf(r,s){throw s.$$typeof===g?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function u1(r){var s=r._init;return s(r._payload)}function c1(r){function s(_e,pe){if(r){var Ee=_e.deletions;Ee===null?(_e.deletions=[pe],_e.flags|=16):Ee.push(pe)}}function u(_e,pe){if(!r)return null;for(;pe!==null;)s(_e,pe),pe=pe.sibling;return null}function v(_e){for(var pe=new Map;_e!==null;)_e.key!==null?pe.set(_e.key,_e):pe.set(_e.index,_e),_e=_e.sibling;return pe}function C(_e,pe){return _e=ai(_e,pe),_e.index=0,_e.sibling=null,_e}function T(_e,pe,Ee){return _e.index=Ee,r?(Ee=_e.alternate,Ee!==null?(Ee=Ee.index,Ee<pe?(_e.flags|=67108866,pe):Ee):(_e.flags|=67108866,pe)):(_e.flags|=1048576,pe)}function K(_e){return r&&_e.alternate===null&&(_e.flags|=67108866),_e}function re(_e,pe,Ee,He){return pe===null||pe.tag!==6?(pe=Ru(Ee,_e.mode,He),pe.return=_e,pe):(pe=C(pe,Ee),pe.return=_e,pe)}function fe(_e,pe,Ee,He){var rt=Ee.type;return rt===D?Pe(_e,pe,Ee.props.children,He,Ee.key):pe!==null&&(pe.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===P&&u1(rt)===pe.type)?(pe=C(pe,Ee.props),Vu(pe,Ee),pe.return=_e,pe):(pe=mo(Ee.type,Ee.key,Ee.props,null,_e.mode,He),Vu(pe,Ee),pe.return=_e,pe)}function Ae(_e,pe,Ee,He){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ee.containerInfo||pe.stateNode.implementation!==Ee.implementation?(pe=ll(Ee,_e.mode,He),pe.return=_e,pe):(pe=C(pe,Ee.children||[]),pe.return=_e,pe)}function Pe(_e,pe,Ee,He,rt){return pe===null||pe.tag!==7?(pe=Hi(Ee,_e.mode,He,rt),pe.return=_e,pe):(pe=C(pe,Ee),pe.return=_e,pe)}function Ue(_e,pe,Ee){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=Ru(""+pe,_e.mode,Ee),pe.return=_e,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case _:return Ee=mo(pe.type,pe.key,pe.props,null,_e.mode,Ee),Vu(Ee,pe),Ee.return=_e,Ee;case x:return pe=ll(pe,_e.mode,Ee),pe.return=_e,pe;case P:var He=pe._init;return pe=He(pe._payload),Ue(_e,pe,Ee)}if(J(pe)||I(pe))return pe=Hi(pe,_e.mode,Ee,null),pe.return=_e,pe;if(typeof pe.then=="function")return Ue(_e,Rf(pe),Ee);if(pe.$$typeof===N)return Ue(_e,wf(_e,pe),Ee);jf(_e,pe)}return null}function Me(_e,pe,Ee,He){var rt=pe!==null?pe.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return rt!==null?null:re(_e,pe,""+Ee,He);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case _:return Ee.key===rt?fe(_e,pe,Ee,He):null;case x:return Ee.key===rt?Ae(_e,pe,Ee,He):null;case P:return rt=Ee._init,Ee=rt(Ee._payload),Me(_e,pe,Ee,He)}if(J(Ee)||I(Ee))return rt!==null?null:Pe(_e,pe,Ee,He,null);if(typeof Ee.then=="function")return Me(_e,pe,Rf(Ee),He);if(Ee.$$typeof===N)return Me(_e,pe,wf(_e,Ee),He);jf(_e,Ee)}return null}function Te(_e,pe,Ee,He,rt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return _e=_e.get(Ee)||null,re(pe,_e,""+He,rt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case _:return _e=_e.get(He.key===null?Ee:He.key)||null,fe(pe,_e,He,rt);case x:return _e=_e.get(He.key===null?Ee:He.key)||null,Ae(pe,_e,He,rt);case P:var Mt=He._init;return He=Mt(He._payload),Te(_e,pe,Ee,He,rt)}if(J(He)||I(He))return _e=_e.get(Ee)||null,Pe(pe,_e,He,rt,null);if(typeof He.then=="function")return Te(_e,pe,Ee,Rf(He),rt);if(He.$$typeof===N)return Te(_e,pe,Ee,wf(pe,He),rt);jf(pe,He)}return null}function vt(_e,pe,Ee,He){for(var rt=null,Mt=null,ft=pe,pt=pe=0,On=null;ft!==null&&pt<Ee.length;pt++){ft.index>pt?(On=ft,ft=null):On=ft.sibling;var Pt=Me(_e,ft,Ee[pt],He);if(Pt===null){ft===null&&(ft=On);break}r&&ft&&Pt.alternate===null&&s(_e,ft),pe=T(Pt,pe,pt),Mt===null?rt=Pt:Mt.sibling=Pt,Mt=Pt,ft=On}if(pt===Ee.length)return u(_e,ft),yt&&be(_e,pt),rt;if(ft===null){for(;pt<Ee.length;pt++)ft=Ue(_e,Ee[pt],He),ft!==null&&(pe=T(ft,pe,pt),Mt===null?rt=ft:Mt.sibling=ft,Mt=ft);return yt&&be(_e,pt),rt}for(ft=v(ft);pt<Ee.length;pt++)On=Te(ft,_e,pt,Ee[pt],He),On!==null&&(r&&On.alternate!==null&&ft.delete(On.key===null?pt:On.key),pe=T(On,pe,pt),Mt===null?rt=On:Mt.sibling=On,Mt=On);return r&&ft.forEach(function(Ms){return s(_e,Ms)}),yt&&be(_e,pt),rt}function dt(_e,pe,Ee,He){if(Ee==null)throw Error(i(151));for(var rt=null,Mt=null,ft=pe,pt=pe=0,On=null,Pt=Ee.next();ft!==null&&!Pt.done;pt++,Pt=Ee.next()){ft.index>pt?(On=ft,ft=null):On=ft.sibling;var Ms=Me(_e,ft,Pt.value,He);if(Ms===null){ft===null&&(ft=On);break}r&&ft&&Ms.alternate===null&&s(_e,ft),pe=T(Ms,pe,pt),Mt===null?rt=Ms:Mt.sibling=Ms,Mt=Ms,ft=On}if(Pt.done)return u(_e,ft),yt&&be(_e,pt),rt;if(ft===null){for(;!Pt.done;pt++,Pt=Ee.next())Pt=Ue(_e,Pt.value,He),Pt!==null&&(pe=T(Pt,pe,pt),Mt===null?rt=Pt:Mt.sibling=Pt,Mt=Pt);return yt&&be(_e,pt),rt}for(ft=v(ft);!Pt.done;pt++,Pt=Ee.next())Pt=Te(ft,_e,pt,Pt.value,He),Pt!==null&&(r&&Pt.alternate!==null&&ft.delete(Pt.key===null?pt:Pt.key),pe=T(Pt,pe,pt),Mt===null?rt=Pt:Mt.sibling=Pt,Mt=Pt);return r&&ft.forEach(function(oS){return s(_e,oS)}),yt&&be(_e,pt),rt}function qt(_e,pe,Ee,He){if(typeof Ee=="object"&&Ee!==null&&Ee.type===D&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case _:e:{for(var rt=Ee.key;pe!==null;){if(pe.key===rt){if(rt=Ee.type,rt===D){if(pe.tag===7){u(_e,pe.sibling),He=C(pe,Ee.props.children),He.return=_e,_e=He;break e}}else if(pe.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===P&&u1(rt)===pe.type){u(_e,pe.sibling),He=C(pe,Ee.props),Vu(He,Ee),He.return=_e,_e=He;break e}u(_e,pe);break}else s(_e,pe);pe=pe.sibling}Ee.type===D?(He=Hi(Ee.props.children,_e.mode,He,Ee.key),He.return=_e,_e=He):(He=mo(Ee.type,Ee.key,Ee.props,null,_e.mode,He),Vu(He,Ee),He.return=_e,_e=He)}return K(_e);case x:e:{for(rt=Ee.key;pe!==null;){if(pe.key===rt)if(pe.tag===4&&pe.stateNode.containerInfo===Ee.containerInfo&&pe.stateNode.implementation===Ee.implementation){u(_e,pe.sibling),He=C(pe,Ee.children||[]),He.return=_e,_e=He;break e}else{u(_e,pe);break}else s(_e,pe);pe=pe.sibling}He=ll(Ee,_e.mode,He),He.return=_e,_e=He}return K(_e);case P:return rt=Ee._init,Ee=rt(Ee._payload),qt(_e,pe,Ee,He)}if(J(Ee))return vt(_e,pe,Ee,He);if(I(Ee)){if(rt=I(Ee),typeof rt!="function")throw Error(i(150));return Ee=rt.call(Ee),dt(_e,pe,Ee,He)}if(typeof Ee.then=="function")return qt(_e,pe,Rf(Ee),He);if(Ee.$$typeof===N)return qt(_e,pe,wf(_e,Ee),He);jf(_e,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,pe!==null&&pe.tag===6?(u(_e,pe.sibling),He=C(pe,Ee),He.return=_e,_e=He):(u(_e,pe),He=Ru(Ee,_e.mode,He),He.return=_e,_e=He),K(_e)):u(_e,pe)}return function(_e,pe,Ee,He){try{$u=0;var rt=qt(_e,pe,Ee,He);return gl=null,rt}catch(ft){if(ft===Pu||ft===Ef)throw ft;var Mt=yr(29,ft,null,_e.mode);return Mt.lanes=He,Mt.return=_e,Mt}finally{}}}var vl=c1(!0),f1=c1(!1),oi=$(null),Ui=null;function ms(r){var s=r.alternate;se(Mn,Mn.current&1),se(oi,r),Ui===null&&(s===null||hl.current!==null||s.memoizedState!==null)&&(Ui=r)}function h1(r){if(r.tag===22){if(se(Mn,Mn.current),se(oi,r),Ui===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Ui=r)}}else ps()}function ps(){se(Mn,Mn.current),se(oi,oi.current)}function Ea(r){ee(oi),Ui===r&&(Ui=null),ee(Mn)}var Mn=$(0);function Bf(r){for(var s=r;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Op(u)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Xm(r,s,u,v){s=r.memoizedState,u=u(v,s),u=u==null?s:m({},s,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Wm={enqueueSetState:function(r,s,u){r=r._reactInternals;var v=Zr(),C=fs(v);C.payload=s,u!=null&&(C.callback=u),s=hs(r,C,v),s!==null&&(Kr(s,r,v),Iu(s,r,v))},enqueueReplaceState:function(r,s,u){r=r._reactInternals;var v=Zr(),C=fs(v);C.tag=1,C.payload=s,u!=null&&(C.callback=u),s=hs(r,C,v),s!==null&&(Kr(s,r,v),Iu(s,r,v))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var u=Zr(),v=fs(u);v.tag=2,s!=null&&(v.callback=s),s=hs(r,v,u),s!==null&&(Kr(s,r,u),Iu(s,r,u))}};function d1(r,s,u,v,C,T,K){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(v,T,K):s.prototype&&s.prototype.isPureReactComponent?!pr(u,v)||!pr(C,T):!0}function m1(r,s,u,v){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,v),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,v),s.state!==r&&Wm.enqueueReplaceState(s,s.state,null)}function bo(r,s){var u=s;if("ref"in s){u={};for(var v in s)v!=="ref"&&(u[v]=s[v])}if(r=r.defaultProps){u===s&&(u=m({},u));for(var C in r)u[C]===void 0&&(u[C]=r[C])}return u}var Pf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function p1(r){Pf(r)}function g1(r){console.error(r)}function v1(r){Pf(r)}function Of(r,s){try{var u=r.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(v){setTimeout(function(){throw v})}}function y1(r,s,u){try{var v=r.onCaughtError;v(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Qm(r,s,u){return u=fs(u),u.tag=3,u.payload={element:null},u.callback=function(){Of(r,s)},u}function _1(r){return r=fs(r),r.tag=3,r}function x1(r,s,u,v){var C=u.type.getDerivedStateFromError;if(typeof C=="function"){var T=v.value;r.payload=function(){return C(T)},r.callback=function(){y1(s,u,v)}}var K=u.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(r.callback=function(){y1(s,u,v),typeof C!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var re=v.stack;this.componentDidCatch(v.value,{componentStack:re!==null?re:""})})}function o3(r,s,u,v,C){if(u.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(s=u.alternate,s!==null&&vo(s,u,C,!0),u=oi.current,u!==null){switch(u.tag){case 13:return Ui===null?wp():u.alternate===null&&mn===0&&(mn=3),u.flags&=-257,u.flags|=65536,u.lanes=C,v===Am?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([v]):s.add(v),Ep(r,v,C)),!1;case 22:return u.flags|=65536,v===Am?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([v])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([v]):u.add(v)),Ep(r,v,C)),!1}throw Error(i(435,u.tag))}return Ep(r,v,C),wp(),!1}if(yt)return s=oi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=C,v!==jn&&(r=Error(i(422),{cause:v}),us(gr(r,u)))):(v!==jn&&(s=Error(i(423),{cause:v}),us(gr(s,u))),r=r.current.alternate,r.flags|=65536,C&=-C,r.lanes|=C,v=gr(v,u),C=Qm(r.stateNode,v,C),km(r,C),mn!==4&&(mn=2)),!1;var T=Error(i(520),{cause:v});if(T=gr(T,u),tc===null?tc=[T]:tc.push(T),mn!==4&&(mn=2),s===null)return!0;v=gr(v,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,r=C&-C,u.lanes|=r,r=Qm(u.stateNode,v,r),km(u,r),!1;case 1:if(s=u.type,T=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(bs===null||!bs.has(T))))return u.flags|=65536,C&=-C,u.lanes|=C,C=_1(C),x1(C,r,u,v),km(u,C),!1}u=u.return}while(u!==null);return!1}var b1=Error(i(461)),Bn=!1;function Yn(r,s,u,v){s.child=r===null?f1(s,null,u,v):vl(s,r.child,u,v)}function w1(r,s,u,v,C){u=u.render;var T=s.ref;if("ref"in v){var K={};for(var re in v)re!=="ref"&&(K[re]=v[re])}else K=v;return yo(s),v=Rm(r,s,u,K,T,C),re=jm(),r!==null&&!Bn?(Bm(r,s,C),Sa(r,s,C)):(yt&&re&&Ze(s),s.flags|=1,Yn(r,s,v,C),s.child)}function D1(r,s,u,v,C){if(r===null){var T=u.type;return typeof T=="function"&&!ol(T)&&T.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=T,E1(r,s,T,v,C)):(r=mo(u.type,null,v,s,s.mode,C),r.ref=s.ref,r.return=s,s.child=r)}if(T=r.child,!sp(r,C)){var K=T.memoizedProps;if(u=u.compare,u=u!==null?u:pr,u(K,v)&&r.ref===s.ref)return Sa(r,s,C)}return s.flags|=1,r=ai(T,v),r.ref=s.ref,r.return=s,s.child=r}function E1(r,s,u,v,C){if(r!==null){var T=r.memoizedProps;if(pr(T,v)&&r.ref===s.ref)if(Bn=!1,s.pendingProps=v=T,sp(r,C))(r.flags&131072)!==0&&(Bn=!0);else return s.lanes=r.lanes,Sa(r,s,C)}return Jm(r,s,u,v,C)}function S1(r,s,u){var v=s.pendingProps,C=v.children,T=r!==null?r.memoizedState:null;if(v.mode==="hidden"){if((s.flags&128)!==0){if(v=T!==null?T.baseLanes|u:u,r!==null){for(C=s.child=r.child,T=0;C!==null;)T=T|C.lanes|C.childLanes,C=C.sibling;s.childLanes=T&~v}else s.childLanes=0,s.child=null;return C1(r,s,v,u)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Df(s,T!==null?T.cachePool:null),T!==null?Ev(s,T):zm(),h1(s);else return s.lanes=s.childLanes=536870912,C1(r,s,T!==null?T.baseLanes|u:u,u)}else T!==null?(Df(s,T.cachePool),Ev(s,T),ps(),s.memoizedState=null):(r!==null&&Df(s,null),zm(),ps());return Yn(r,s,C,u),s.child}function C1(r,s,u,v){var C=Cm();return C=C===null?null:{parent:Nn._currentValue,pool:C},s.memoizedState={baseLanes:u,cachePool:C},r!==null&&Df(s,null),zm(),h1(s),r!==null&&vo(r,s,v,!0),null}function If(r,s){var u=s.ref;if(u===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(s.flags|=4194816)}}function Jm(r,s,u,v,C){return yo(s),u=Rm(r,s,u,v,void 0,C),v=jm(),r!==null&&!Bn?(Bm(r,s,C),Sa(r,s,C)):(yt&&v&&Ze(s),s.flags|=1,Yn(r,s,u,C),s.child)}function A1(r,s,u,v,C,T){return yo(s),s.updateQueue=null,u=Cv(s,v,u,C),Sv(r),v=jm(),r!==null&&!Bn?(Bm(r,s,T),Sa(r,s,T)):(yt&&v&&Ze(s),s.flags|=1,Yn(r,s,u,T),s.child)}function N1(r,s,u,v,C){if(yo(s),s.stateNode===null){var T=ba,K=u.contextType;typeof K=="object"&&K!==null&&(T=ar(K)),T=new u(v,T),s.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Wm,s.stateNode=T,T._reactInternals=s,T=s.stateNode,T.props=v,T.state=s.memoizedState,T.refs={},Nm(s),K=u.contextType,T.context=typeof K=="object"&&K!==null?ar(K):ba,T.state=s.memoizedState,K=u.getDerivedStateFromProps,typeof K=="function"&&(Xm(s,u,K,v),T.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(K=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),K!==T.state&&Wm.enqueueReplaceState(T,T.state,null),Gu(s,v,T,C),Hu(),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308),v=!0}else if(r===null){T=s.stateNode;var re=s.memoizedProps,fe=bo(u,re);T.props=fe;var Ae=T.context,Pe=u.contextType;K=ba,typeof Pe=="object"&&Pe!==null&&(K=ar(Pe));var Ue=u.getDerivedStateFromProps;Pe=typeof Ue=="function"||typeof T.getSnapshotBeforeUpdate=="function",re=s.pendingProps!==re,Pe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(re||Ae!==K)&&m1(s,T,v,K),cs=!1;var Me=s.memoizedState;T.state=Me,Gu(s,v,T,C),Hu(),Ae=s.memoizedState,re||Me!==Ae||cs?(typeof Ue=="function"&&(Xm(s,u,Ue,v),Ae=s.memoizedState),(fe=cs||d1(s,u,fe,v,Me,Ae,K))?(Pe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=v,s.memoizedState=Ae),T.props=v,T.state=Ae,T.context=K,v=fe):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),v=!1)}else{T=s.stateNode,Mm(r,s),K=s.memoizedProps,Pe=bo(u,K),T.props=Pe,Ue=s.pendingProps,Me=T.context,Ae=u.contextType,fe=ba,typeof Ae=="object"&&Ae!==null&&(fe=ar(Ae)),re=u.getDerivedStateFromProps,(Ae=typeof re=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(K!==Ue||Me!==fe)&&m1(s,T,v,fe),cs=!1,Me=s.memoizedState,T.state=Me,Gu(s,v,T,C),Hu();var Te=s.memoizedState;K!==Ue||Me!==Te||cs||r!==null&&r.dependencies!==null&&bf(r.dependencies)?(typeof re=="function"&&(Xm(s,u,re,v),Te=s.memoizedState),(Pe=cs||d1(s,u,Pe,v,Me,Te,fe)||r!==null&&r.dependencies!==null&&bf(r.dependencies))?(Ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(v,Te,fe),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(v,Te,fe)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||K===r.memoizedProps&&Me===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||K===r.memoizedProps&&Me===r.memoizedState||(s.flags|=1024),s.memoizedProps=v,s.memoizedState=Te),T.props=v,T.state=Te,T.context=fe,v=Pe):(typeof T.componentDidUpdate!="function"||K===r.memoizedProps&&Me===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||K===r.memoizedProps&&Me===r.memoizedState||(s.flags|=1024),v=!1)}return T=v,If(r,s),v=(s.flags&128)!==0,T||v?(T=s.stateNode,u=v&&typeof u.getDerivedStateFromError!="function"?null:T.render(),s.flags|=1,r!==null&&v?(s.child=vl(s,r.child,null,C),s.child=vl(s,null,u,C)):Yn(r,s,u,C),s.memoizedState=T.state,r=s.child):r=Sa(r,s,C),r}function M1(r,s,u,v){return ls(),s.flags|=256,Yn(r,s,u,v),s.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(r){return{baseLanes:r,cachePool:gv()}}function np(r,s,u){return r=r!==null?r.childLanes&~u:0,s&&(r|=li),r}function k1(r,s,u){var v=s.pendingProps,C=!1,T=(s.flags&128)!==0,K;if((K=T)||(K=r!==null&&r.memoizedState===null?!1:(Mn.current&2)!==0),K&&(C=!0,s.flags&=-129),K=(s.flags&32)!==0,s.flags&=-33,r===null){if(yt){if(C?ms(s):ps(),yt){var re=lt,fe;if(fe=re){e:{for(fe=re,re=cn;fe.nodeType!==8;){if(!re){re=null;break e}if(fe=Si(fe.nextSibling),fe===null){re=null;break e}}re=fe}re!==null?(s.memoizedState={dehydrated:re,treeContext:O!==null?{id:Y,overflow:ce}:null,retryLane:536870912,hydrationErrors:null},fe=yr(18,null,null,0),fe.stateNode=re,fe.return=s,s.child=fe,nt=s,lt=null,fe=!0):fe=!1}fe||Dr(s)}if(re=s.memoizedState,re!==null&&(re=re.dehydrated,re!==null))return Op(re)?s.lanes=32:s.lanes=536870912,null;Ea(s)}return re=v.children,v=v.fallback,C?(ps(),C=s.mode,re=Hf({mode:"hidden",children:re},C),v=Hi(v,C,u,null),re.return=s,v.return=s,re.sibling=v,s.child=re,C=s.child,C.memoizedState=tp(u),C.childLanes=np(r,K,u),s.memoizedState=ep,v):(ms(s),rp(s,re))}if(fe=r.memoizedState,fe!==null&&(re=fe.dehydrated,re!==null)){if(T)s.flags&256?(ms(s),s.flags&=-257,s=ip(r,s,u)):s.memoizedState!==null?(ps(),s.child=r.child,s.flags|=128,s=null):(ps(),C=v.fallback,re=s.mode,v=Hf({mode:"visible",children:v.children},re),C=Hi(C,re,u,null),C.flags|=2,v.return=s,C.return=s,v.sibling=C,s.child=v,vl(s,r.child,null,u),v=s.child,v.memoizedState=tp(u),v.childLanes=np(r,K,u),s.memoizedState=ep,s=C);else if(ms(s),Op(re)){if(K=re.nextSibling&&re.nextSibling.dataset,K)var Ae=K.dgst;K=Ae,v=Error(i(419)),v.stack="",v.digest=K,us({value:v,source:null,stack:null}),s=ip(r,s,u)}else if(Bn||vo(r,s,u,!1),K=(u&r.childLanes)!==0,Bn||K){if(K=en,K!==null&&(v=u&-u,v=(v&42)!==0?1:Vs(v),v=(v&(K.suspendedLanes|u))!==0?0:v,v!==0&&v!==fe.retryLane))throw fe.retryLane=v,ss(r,v),Kr(K,r,v),b1;re.data==="$?"||wp(),s=ip(r,s,u)}else re.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=fe.treeContext,lt=Si(re.nextSibling),nt=s,yt=!0,Jt=null,cn=!1,r!==null&&(E[F++]=Y,E[F++]=ce,E[F++]=O,Y=r.id,ce=r.overflow,O=s),s=rp(s,v.children),s.flags|=4096);return s}return C?(ps(),C=v.fallback,re=s.mode,fe=r.child,Ae=fe.sibling,v=ai(fe,{mode:"hidden",children:v.children}),v.subtreeFlags=fe.subtreeFlags&65011712,Ae!==null?C=ai(Ae,C):(C=Hi(C,re,u,null),C.flags|=2),C.return=s,v.return=s,v.sibling=C,s.child=v,v=C,C=s.child,re=r.child.memoizedState,re===null?re=tp(u):(fe=re.cachePool,fe!==null?(Ae=Nn._currentValue,fe=fe.parent!==Ae?{parent:Ae,pool:Ae}:fe):fe=gv(),re={baseLanes:re.baseLanes|u,cachePool:fe}),C.memoizedState=re,C.childLanes=np(r,K,u),s.memoizedState=ep,v):(ms(s),u=r.child,r=u.sibling,u=ai(u,{mode:"visible",children:v.children}),u.return=s,u.sibling=null,r!==null&&(K=s.deletions,K===null?(s.deletions=[r],s.flags|=16):K.push(r)),s.child=u,s.memoizedState=null,u)}function rp(r,s){return s=Hf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Hf(r,s){return r=yr(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function ip(r,s,u){return vl(s,r.child,null,u),r=rp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function T1(r,s,u){r.lanes|=s;var v=r.alternate;v!==null&&(v.lanes|=s),go(r.return,s,u)}function ap(r,s,u,v,C){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:v,tail:u,tailMode:C}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=v,T.tail=u,T.tailMode=C)}function z1(r,s,u){var v=s.pendingProps,C=v.revealOrder,T=v.tail;if(Yn(r,s,v.children,u),v=Mn.current,(v&2)!==0)v=v&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&T1(r,u,s);else if(r.tag===19)T1(r,u,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}v&=1}switch(se(Mn,v),C){case"forwards":for(u=s.child,C=null;u!==null;)r=u.alternate,r!==null&&Bf(r)===null&&(C=u),u=u.sibling;u=C,u===null?(C=s.child,s.child=null):(C=u.sibling,u.sibling=null),ap(s,!1,C,u,T);break;case"backwards":for(u=null,C=s.child,s.child=null;C!==null;){if(r=C.alternate,r!==null&&Bf(r)===null){s.child=C;break}r=C.sibling,C.sibling=u,u=C,C=r}ap(s,!0,u,null,T);break;case"together":ap(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Sa(r,s,u){if(r!==null&&(s.dependencies=r.dependencies),xs|=s.lanes,(u&s.childLanes)===0)if(r!==null){if(vo(r,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,u=ai(r,r.pendingProps),s.child=u,u.return=s;r.sibling!==null;)r=r.sibling,u=u.sibling=ai(r,r.pendingProps),u.return=s;u.sibling=null}return s.child}function sp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&bf(r)))}function l3(r,s,u){switch(s.tag){case 3:Le(s,s.stateNode.containerInfo),Gi(s,Nn,r.memoizedState.cache),ls();break;case 27:case 5:Ke(s);break;case 4:Le(s,s.stateNode.containerInfo);break;case 10:Gi(s,s.type,s.memoizedProps.value);break;case 13:var v=s.memoizedState;if(v!==null)return v.dehydrated!==null?(ms(s),s.flags|=128,null):(u&s.child.childLanes)!==0?k1(r,s,u):(ms(s),r=Sa(r,s,u),r!==null?r.sibling:null);ms(s);break;case 19:var C=(r.flags&128)!==0;if(v=(u&s.childLanes)!==0,v||(vo(r,s,u,!1),v=(u&s.childLanes)!==0),C){if(v)return z1(r,s,u);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),se(Mn,Mn.current),v)break;return null;case 22:case 23:return s.lanes=0,S1(r,s,u);case 24:Gi(s,Nn,r.memoizedState.cache)}return Sa(r,s,u)}function L1(r,s,u){if(r!==null)if(r.memoizedProps!==s.pendingProps)Bn=!0;else{if(!sp(r,u)&&(s.flags&128)===0)return Bn=!1,l3(r,s,u);Bn=(r.flags&131072)!==0}else Bn=!1,yt&&(s.flags&1048576)!==0&&ze(s,p,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var v=s.elementType,C=v._init;if(v=C(v._payload),s.type=v,typeof v=="function")ol(v)?(r=bo(v,r),s.tag=1,s=N1(null,s,v,r,u)):(s.tag=0,s=Jm(null,s,v,r,u));else{if(v!=null){if(C=v.$$typeof,C===z){s.tag=11,s=w1(null,s,v,r,u);break e}else if(C===B){s.tag=14,s=D1(null,s,v,r,u);break e}}throw s=j(v)||v,Error(i(306,s,""))}}return s;case 0:return Jm(r,s,s.type,s.pendingProps,u);case 1:return v=s.type,C=bo(v,s.pendingProps),N1(r,s,v,C,u);case 3:e:{if(Le(s,s.stateNode.containerInfo),r===null)throw Error(i(387));v=s.pendingProps;var T=s.memoizedState;C=T.element,Mm(r,s),Gu(s,v,null,u);var K=s.memoizedState;if(v=K.cache,Gi(s,Nn,v),v!==T.cache&&ul(s,[Nn],u,!0),Hu(),v=K.element,T.isDehydrated)if(T={element:v,isDehydrated:!1,cache:K.cache},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){s=M1(r,s,v,u);break e}else if(v!==C){C=gr(Error(i(424)),s),us(C),s=M1(r,s,v,u);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(lt=Si(r.firstChild),nt=s,yt=!0,Jt=null,cn=!0,u=f1(s,null,v,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ls(),v===C){s=Sa(r,s,u);break e}Yn(r,s,v,u)}s=s.child}return s;case 26:return If(r,s),r===null?(u=By(s.type,null,s.pendingProps,null))?s.memoizedState=u:yt||(u=s.type,r=s.pendingProps,v=th(ge.current).createElement(u),v[Dn]=s,v[Ln]=r,Wn(v,u,r),hn(v),s.stateNode=v):s.memoizedState=By(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ke(s),r===null&&yt&&(v=s.stateNode=Fy(s.type,s.pendingProps,ge.current),nt=s,cn=!0,C=lt,Es(s.type)?(Ip=C,lt=Si(v.firstChild)):lt=C),Yn(r,s,s.pendingProps.children,u),If(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&yt&&((C=v=lt)&&(v=j3(v,s.type,s.pendingProps,cn),v!==null?(s.stateNode=v,nt=s,lt=Si(v.firstChild),cn=!1,C=!0):C=!1),C||Dr(s)),Ke(s),C=s.type,T=s.pendingProps,K=r!==null?r.memoizedProps:null,v=T.children,jp(C,T)?v=null:K!==null&&jp(C,K)&&(s.flags|=32),s.memoizedState!==null&&(C=Rm(r,s,e3,null,null,u),cc._currentValue=C),If(r,s),Yn(r,s,v,u),s.child;case 6:return r===null&&yt&&((r=u=lt)&&(u=B3(u,s.pendingProps,cn),u!==null?(s.stateNode=u,nt=s,lt=null,r=!0):r=!1),r||Dr(s)),null;case 13:return k1(r,s,u);case 4:return Le(s,s.stateNode.containerInfo),v=s.pendingProps,r===null?s.child=vl(s,null,v,u):Yn(r,s,v,u),s.child;case 11:return w1(r,s,s.type,s.pendingProps,u);case 7:return Yn(r,s,s.pendingProps,u),s.child;case 8:return Yn(r,s,s.pendingProps.children,u),s.child;case 12:return Yn(r,s,s.pendingProps.children,u),s.child;case 10:return v=s.pendingProps,Gi(s,s.type,v.value),Yn(r,s,v.children,u),s.child;case 9:return C=s.type._context,v=s.pendingProps.children,yo(s),C=ar(C),v=v(C),s.flags|=1,Yn(r,s,v,u),s.child;case 14:return D1(r,s,s.type,s.pendingProps,u);case 15:return E1(r,s,s.type,s.pendingProps,u);case 19:return z1(r,s,u);case 31:return v=s.pendingProps,u=s.mode,v={mode:v.mode,children:v.children},r===null?(u=Hf(v,u),u.ref=s.ref,s.child=u,u.return=s,s=u):(u=ai(r.child,v),u.ref=s.ref,s.child=u,u.return=s,s=u),s;case 22:return S1(r,s,u);case 24:return yo(s),v=ar(Nn),r===null?(C=Cm(),C===null&&(C=en,T=Em(),C.pooledCache=T,T.refCount++,T!==null&&(C.pooledCacheLanes|=u),C=T),s.memoizedState={parent:v,cache:C},Nm(s),Gi(s,Nn,C)):((r.lanes&u)!==0&&(Mm(r,s),Gu(s,null,null,u),Hu()),C=r.memoizedState,T=s.memoizedState,C.parent!==v?(C={parent:v,cache:v},s.memoizedState=C,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=C),Gi(s,Nn,v)):(v=T.cache,Gi(s,Nn,v),v!==C.cache&&ul(s,[Nn],u,!0))),Yn(r,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ca(r){r.flags|=4}function F1(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Gy(s)){if(s=oi.current,s!==null&&((jt&4194048)===jt?Ui!==null:(jt&62914560)!==jt&&(jt&536870912)===0||s!==Ui))throw Ou=Am,vv;r.flags|=8192}}function Gf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ut():536870912,r.lanes|=s,bl|=s)}function Yu(r,s){if(!yt)switch(r.tailMode){case"hidden":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:v.sibling=null}}function fn(r){var s=r.alternate!==null&&r.alternate.child===r.child,u=0,v=0;if(s)for(var C=r.child;C!==null;)u|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=r,C=C.sibling;else for(C=r.child;C!==null;)u|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=r,C=C.sibling;return r.subtreeFlags|=v,r.childLanes=u,s}function u3(r,s,u){var v=s.pendingProps;switch(et(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(s),null;case 1:return fn(s),null;case 3:return u=s.stateNode,v=null,r!==null&&(v=r.memoizedState.cache),s.memoizedState.cache!==v&&(s.flags|=2048),Di(Nn),Ge(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(po(s)?Ca(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xf())),fn(s),null;case 26:return u=s.memoizedState,r===null?(Ca(s),u!==null?(fn(s),F1(s,u)):(fn(s),s.flags&=-16777217)):u?u!==r.memoizedState?(Ca(s),fn(s),F1(s,u)):(fn(s),s.flags&=-16777217):(r.memoizedProps!==v&&Ca(s),fn(s),s.flags&=-16777217),null;case 27:Qe(s),u=ge.current;var C=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==v&&Ca(s);else{if(!v){if(s.stateNode===null)throw Error(i(166));return fn(s),null}r=oe.current,po(s)?yf(s):(r=Fy(C,v,u),s.stateNode=r,Ca(s))}return fn(s),null;case 5:if(Qe(s),u=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==v&&Ca(s);else{if(!v){if(s.stateNode===null)throw Error(i(166));return fn(s),null}if(r=oe.current,po(s))yf(s);else{switch(C=th(ge.current),r){case 1:r=C.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:r=C.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":r=C.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":r=C.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":r=C.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof v.is=="string"?C.createElement("select",{is:v.is}):C.createElement("select"),v.multiple?r.multiple=!0:v.size&&(r.size=v.size);break;default:r=typeof v.is=="string"?C.createElement(u,{is:v.is}):C.createElement(u)}}r[Dn]=s,r[Ln]=v;e:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)r.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break e;for(;C.sibling===null;){if(C.return===null||C.return===s)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=r;e:switch(Wn(r,u,v),u){case"button":case"input":case"select":case"textarea":r=!!v.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ca(s)}}return fn(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==v&&Ca(s);else{if(typeof v!="string"&&s.stateNode===null)throw Error(i(166));if(r=ge.current,po(s)){if(r=s.stateNode,u=s.memoizedProps,v=null,C=nt,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}r[Dn]=s,r=!!(r.nodeValue===u||v!==null&&v.suppressHydrationWarning===!0||Ay(r.nodeValue,u)),r||Dr(s)}else r=th(r).createTextNode(v),r[Dn]=s,s.stateNode=r}return fn(s),null;case 13:if(v=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(C=po(s),v!==null&&v.dehydrated!==null){if(r===null){if(!C)throw Error(i(318));if(C=s.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[Dn]=s}else ls(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;fn(s),C=!1}else C=xf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=C),C=!0;if(!C)return s.flags&256?(Ea(s),s):(Ea(s),null)}if(Ea(s),(s.flags&128)!==0)return s.lanes=u,s;if(u=v!==null,r=r!==null&&r.memoizedState!==null,u){v=s.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool);var T=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(T=v.memoizedState.cachePool.pool),T!==C&&(v.flags|=2048)}return u!==r&&u&&(s.child.flags|=8192),Gf(s,s.updateQueue),fn(s),null;case 4:return Ge(),r===null&&Tp(s.stateNode.containerInfo),fn(s),null;case 10:return Di(s.type),fn(s),null;case 19:if(ee(Mn),C=s.memoizedState,C===null)return fn(s),null;if(v=(s.flags&128)!==0,T=C.rendering,T===null)if(v)Yu(C,!1);else{if(mn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(T=Bf(r),T!==null){for(s.flags|=128,Yu(C,!1),r=T.updateQueue,s.updateQueue=r,Gf(s,r),s.subtreeFlags=0,r=u,u=s.child;u!==null;)Fu(u,r),u=u.sibling;return se(Mn,Mn.current&1|2),s.child}r=r.sibling}C.tail!==null&&ae()>Kf&&(s.flags|=128,v=!0,Yu(C,!1),s.lanes=4194304)}else{if(!v)if(r=Bf(T),r!==null){if(s.flags|=128,v=!0,r=r.updateQueue,s.updateQueue=r,Gf(s,r),Yu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!T.alternate&&!yt)return fn(s),null}else 2*ae()-C.renderingStartTime>Kf&&u!==536870912&&(s.flags|=128,v=!0,Yu(C,!1),s.lanes=4194304);C.isBackwards?(T.sibling=s.child,s.child=T):(r=C.last,r!==null?r.sibling=T:s.child=T,C.last=T)}return C.tail!==null?(s=C.tail,C.rendering=s,C.tail=s.sibling,C.renderingStartTime=ae(),s.sibling=null,r=Mn.current,se(Mn,v?r&1|2:r&1),s):(fn(s),null);case 22:case 23:return Ea(s),Lm(),v=s.memoizedState!==null,r!==null?r.memoizedState!==null!==v&&(s.flags|=8192):v&&(s.flags|=8192),v?(u&536870912)!==0&&(s.flags&128)===0&&(fn(s),s.subtreeFlags&6&&(s.flags|=8192)):fn(s),u=s.updateQueue,u!==null&&Gf(s,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),v=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(v=s.memoizedState.cachePool.pool),v!==u&&(s.flags|=2048),r!==null&&ee(_o),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Di(Nn),fn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function c3(r,s){switch(et(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Di(Nn),Ge(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Qe(s),null;case 13:if(Ea(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ls()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ee(Mn),null;case 4:return Ge(),null;case 10:return Di(s.type),null;case 22:case 23:return Ea(s),Lm(),r!==null&&ee(_o),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Di(Nn),null;case 25:return null;default:return null}}function R1(r,s){switch(et(s),s.tag){case 3:Di(Nn),Ge();break;case 26:case 27:case 5:Qe(s);break;case 4:Ge();break;case 13:Ea(s);break;case 19:ee(Mn);break;case 10:Di(s.type);break;case 22:case 23:Ea(s),Lm(),r!==null&&ee(_o);break;case 24:Di(Nn)}}function Xu(r,s){try{var u=s.updateQueue,v=u!==null?u.lastEffect:null;if(v!==null){var C=v.next;u=C;do{if((u.tag&r)===r){v=void 0;var T=u.create,K=u.inst;v=T(),K.destroy=v}u=u.next}while(u!==C)}}catch(re){Vt(s,s.return,re)}}function gs(r,s,u){try{var v=s.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var T=C.next;v=T;do{if((v.tag&r)===r){var K=v.inst,re=K.destroy;if(re!==void 0){K.destroy=void 0,C=s;var fe=u,Ae=re;try{Ae()}catch(Pe){Vt(C,fe,Pe)}}}v=v.next}while(v!==T)}}catch(Pe){Vt(s,s.return,Pe)}}function j1(r){var s=r.updateQueue;if(s!==null){var u=r.stateNode;try{Dv(s,u)}catch(v){Vt(r,r.return,v)}}}function B1(r,s,u){u.props=bo(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(v){Vt(r,s,v)}}function Wu(r,s){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var v=r.stateNode;break;case 30:v=r.stateNode;break;default:v=r.stateNode}typeof u=="function"?r.refCleanup=u(v):u.current=v}}catch(C){Vt(r,s,C)}}function Zi(r,s){var u=r.ref,v=r.refCleanup;if(u!==null)if(typeof v=="function")try{v()}catch(C){Vt(r,s,C)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(C){Vt(r,s,C)}else u.current=null}function P1(r){var s=r.type,u=r.memoizedProps,v=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&v.focus();break e;case"img":u.src?v.src=u.src:u.srcSet&&(v.srcset=u.srcSet)}}catch(C){Vt(r,r.return,C)}}function op(r,s,u){try{var v=r.stateNode;T3(v,r.type,u,s),v[Ln]=s}catch(C){Vt(r,r.return,C)}}function O1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Es(r.type)||r.tag===4}function lp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||O1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Es(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function up(r,s,u){var v=r.tag;if(v===5||v===6)r=r.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(r),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=eh));else if(v!==4&&(v===27&&Es(r.type)&&(u=r.stateNode,s=null),r=r.child,r!==null))for(up(r,s,u),r=r.sibling;r!==null;)up(r,s,u),r=r.sibling}function Uf(r,s,u){var v=r.tag;if(v===5||v===6)r=r.stateNode,s?u.insertBefore(r,s):u.appendChild(r);else if(v!==4&&(v===27&&Es(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Uf(r,s,u),r=r.sibling;r!==null;)Uf(r,s,u),r=r.sibling}function I1(r){var s=r.stateNode,u=r.memoizedProps;try{for(var v=r.type,C=s.attributes;C.length;)s.removeAttributeNode(C[0]);Wn(s,v,u),s[Dn]=r,s[Ln]=u}catch(T){Vt(r,r.return,T)}}var Aa=!1,yn=!1,cp=!1,H1=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function f3(r,s){if(r=r.containerInfo,Fp=oh,r=oo(r),lo(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var v=u.getSelection&&u.getSelection();if(v&&v.rangeCount!==0){u=v.anchorNode;var C=v.anchorOffset,T=v.focusNode;v=v.focusOffset;try{u.nodeType,T.nodeType}catch{u=null;break e}var K=0,re=-1,fe=-1,Ae=0,Pe=0,Ue=r,Me=null;t:for(;;){for(var Te;Ue!==u||C!==0&&Ue.nodeType!==3||(re=K+C),Ue!==T||v!==0&&Ue.nodeType!==3||(fe=K+v),Ue.nodeType===3&&(K+=Ue.nodeValue.length),(Te=Ue.firstChild)!==null;)Me=Ue,Ue=Te;for(;;){if(Ue===r)break t;if(Me===u&&++Ae===C&&(re=K),Me===T&&++Pe===v&&(fe=K),(Te=Ue.nextSibling)!==null)break;Ue=Me,Me=Ue.parentNode}Ue=Te}u=re===-1||fe===-1?null:{start:re,end:fe}}else u=null}u=u||{start:0,end:0}}else u=null;for(Rp={focusedElem:r,selectionRange:u},oh=!1,Pn=s;Pn!==null;)if(s=Pn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Pn=r;else for(;Pn!==null;){switch(s=Pn,T=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&T!==null){r=void 0,u=s,C=T.memoizedProps,T=T.memoizedState,v=u.stateNode;try{var vt=bo(u.type,C,u.elementType===u.type);r=v.getSnapshotBeforeUpdate(vt,T),v.__reactInternalSnapshotBeforeUpdate=r}catch(dt){Vt(u,u.return,dt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,u=r.nodeType,u===9)Pp(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Pp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Pn=r;break}Pn=s.return}}function G1(r,s,u){var v=u.flags;switch(u.tag){case 0:case 11:case 15:vs(r,u),v&4&&Xu(5,u);break;case 1:if(vs(r,u),v&4)if(r=u.stateNode,s===null)try{r.componentDidMount()}catch(K){Vt(u,u.return,K)}else{var C=bo(u.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(C,s,r.__reactInternalSnapshotBeforeUpdate)}catch(K){Vt(u,u.return,K)}}v&64&&j1(u),v&512&&Wu(u,u.return);break;case 3:if(vs(r,u),v&64&&(r=u.updateQueue,r!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{Dv(r,s)}catch(K){Vt(u,u.return,K)}}break;case 27:s===null&&v&4&&I1(u);case 26:case 5:vs(r,u),s===null&&v&4&&P1(u),v&512&&Wu(u,u.return);break;case 12:vs(r,u);break;case 13:vs(r,u),v&4&&K1(r,u),v&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=x3.bind(null,u),P3(r,u))));break;case 22:if(v=u.memoizedState!==null||Aa,!v){s=s!==null&&s.memoizedState!==null||yn,C=Aa;var T=yn;Aa=v,(yn=s)&&!T?ys(r,u,(u.subtreeFlags&8772)!==0):vs(r,u),Aa=C,yn=T}break;case 30:break;default:vs(r,u)}}function U1(r){var s=r.alternate;s!==null&&(r.alternate=null,U1(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ia(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var on=null,Sr=!1;function Na(r,s,u){for(u=u.child;u!==null;)Z1(r,s,u),u=u.sibling}function Z1(r,s,u){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(ve,u)}catch{}switch(u.tag){case 26:yn||Zi(u,s),Na(r,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:yn||Zi(u,s);var v=on,C=Sr;Es(u.type)&&(on=u.stateNode,Sr=!1),Na(r,s,u),sc(u.stateNode),on=v,Sr=C;break;case 5:yn||Zi(u,s);case 6:if(v=on,C=Sr,on=null,Na(r,s,u),on=v,Sr=C,on!==null)if(Sr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(u.stateNode)}catch(T){Vt(u,s,T)}else try{on.removeChild(u.stateNode)}catch(T){Vt(u,s,T)}break;case 18:on!==null&&(Sr?(r=on,zy(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),mc(r)):zy(on,u.stateNode));break;case 4:v=on,C=Sr,on=u.stateNode.containerInfo,Sr=!0,Na(r,s,u),on=v,Sr=C;break;case 0:case 11:case 14:case 15:yn||gs(2,u,s),yn||gs(4,u,s),Na(r,s,u);break;case 1:yn||(Zi(u,s),v=u.stateNode,typeof v.componentWillUnmount=="function"&&B1(u,s,v)),Na(r,s,u);break;case 21:Na(r,s,u);break;case 22:yn=(v=yn)||u.memoizedState!==null,Na(r,s,u),yn=v;break;default:Na(r,s,u)}}function K1(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{mc(r)}catch(u){Vt(s,s.return,u)}}function h3(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new H1),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new H1),s;default:throw Error(i(435,r.tag))}}function fp(r,s){var u=h3(r);s.forEach(function(v){var C=b3.bind(null,r,v);u.has(v)||(u.add(v),v.then(C,C))})}function Hr(r,s){var u=s.deletions;if(u!==null)for(var v=0;v<u.length;v++){var C=u[v],T=r,K=s,re=K;e:for(;re!==null;){switch(re.tag){case 27:if(Es(re.type)){on=re.stateNode,Sr=!1;break e}break;case 5:on=re.stateNode,Sr=!1;break e;case 3:case 4:on=re.stateNode.containerInfo,Sr=!0;break e}re=re.return}if(on===null)throw Error(i(160));Z1(T,K,C),on=null,Sr=!1,T=C.alternate,T!==null&&(T.return=null),C.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)q1(s,r),s=s.sibling}var Ei=null;function q1(r,s){var u=r.alternate,v=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Hr(s,r),Gr(r),v&4&&(gs(3,r,r.return),Xu(3,r),gs(5,r,r.return));break;case 1:Hr(s,r),Gr(r),v&512&&(yn||u===null||Zi(u,u.return)),v&64&&Aa&&(r=r.updateQueue,r!==null&&(v=r.callbacks,v!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?v:u.concat(v))));break;case 26:var C=Ei;if(Hr(s,r),Gr(r),v&512&&(yn||u===null||Zi(u,u.return)),v&4){var T=u!==null?u.memoizedState:null;if(v=r.memoizedState,u===null)if(v===null)if(r.stateNode===null){e:{v=r.type,u=r.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":T=C.getElementsByTagName("title")[0],(!T||T[Ri]||T[Dn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=C.createElement(v),C.head.insertBefore(T,C.querySelector("head > title"))),Wn(T,v,u),T[Dn]=r,hn(T),v=T;break e;case"link":var K=Iy("link","href",C).get(v+(u.href||""));if(K){for(var re=0;re<K.length;re++)if(T=K[re],T.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&T.getAttribute("rel")===(u.rel==null?null:u.rel)&&T.getAttribute("title")===(u.title==null?null:u.title)&&T.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){K.splice(re,1);break t}}T=C.createElement(v),Wn(T,v,u),C.head.appendChild(T);break;case"meta":if(K=Iy("meta","content",C).get(v+(u.content||""))){for(re=0;re<K.length;re++)if(T=K[re],T.getAttribute("content")===(u.content==null?null:""+u.content)&&T.getAttribute("name")===(u.name==null?null:u.name)&&T.getAttribute("property")===(u.property==null?null:u.property)&&T.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&T.getAttribute("charset")===(u.charSet==null?null:u.charSet)){K.splice(re,1);break t}}T=C.createElement(v),Wn(T,v,u),C.head.appendChild(T);break;default:throw Error(i(468,v))}T[Dn]=r,hn(T),v=T}r.stateNode=v}else Hy(C,r.type,r.stateNode);else r.stateNode=Oy(C,v,r.memoizedProps);else T!==v?(T===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):T.count--,v===null?Hy(C,r.type,r.stateNode):Oy(C,v,r.memoizedProps)):v===null&&r.stateNode!==null&&op(r,r.memoizedProps,u.memoizedProps)}break;case 27:Hr(s,r),Gr(r),v&512&&(yn||u===null||Zi(u,u.return)),u!==null&&v&4&&op(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Hr(s,r),Gr(r),v&512&&(yn||u===null||Zi(u,u.return)),r.flags&32){C=r.stateNode;try{ei(C,"")}catch(Te){Vt(r,r.return,Te)}}v&4&&r.stateNode!=null&&(C=r.memoizedProps,op(r,C,u!==null?u.memoizedProps:C)),v&1024&&(cp=!0);break;case 6:if(Hr(s,r),Gr(r),v&4){if(r.stateNode===null)throw Error(i(162));v=r.memoizedProps,u=r.stateNode;try{u.nodeValue=v}catch(Te){Vt(r,r.return,Te)}}break;case 3:if(ih=null,C=Ei,Ei=nh(s.containerInfo),Hr(s,r),Ei=C,Gr(r),v&4&&u!==null&&u.memoizedState.isDehydrated)try{mc(s.containerInfo)}catch(Te){Vt(r,r.return,Te)}cp&&(cp=!1,$1(r));break;case 4:v=Ei,Ei=nh(r.stateNode.containerInfo),Hr(s,r),Gr(r),Ei=v;break;case 12:Hr(s,r),Gr(r);break;case 13:Hr(s,r),Gr(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(vp=ae()),v&4&&(v=r.updateQueue,v!==null&&(r.updateQueue=null,fp(r,v)));break;case 22:C=r.memoizedState!==null;var fe=u!==null&&u.memoizedState!==null,Ae=Aa,Pe=yn;if(Aa=Ae||C,yn=Pe||fe,Hr(s,r),yn=Pe,Aa=Ae,Gr(r),v&8192)e:for(s=r.stateNode,s._visibility=C?s._visibility&-2:s._visibility|1,C&&(u===null||fe||Aa||yn||wo(r)),u=null,s=r;;){if(s.tag===5||s.tag===26){if(u===null){fe=u=s;try{if(T=fe.stateNode,C)K=T.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{re=fe.stateNode;var Ue=fe.memoizedProps.style,Me=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;re.style.display=Me==null||typeof Me=="boolean"?"":(""+Me).trim()}}catch(Te){Vt(fe,fe.return,Te)}}}else if(s.tag===6){if(u===null){fe=s;try{fe.stateNode.nodeValue=C?"":fe.memoizedProps}catch(Te){Vt(fe,fe.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}v&4&&(v=r.updateQueue,v!==null&&(u=v.retryQueue,u!==null&&(v.retryQueue=null,fp(r,u))));break;case 19:Hr(s,r),Gr(r),v&4&&(v=r.updateQueue,v!==null&&(r.updateQueue=null,fp(r,v)));break;case 30:break;case 21:break;default:Hr(s,r),Gr(r)}}function Gr(r){var s=r.flags;if(s&2){try{for(var u,v=r.return;v!==null;){if(O1(v)){u=v;break}v=v.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var C=u.stateNode,T=lp(r);Uf(r,T,C);break;case 5:var K=u.stateNode;u.flags&32&&(ei(K,""),u.flags&=-33);var re=lp(r);Uf(r,re,K);break;case 3:case 4:var fe=u.stateNode.containerInfo,Ae=lp(r);up(r,Ae,fe);break;default:throw Error(i(161))}}catch(Pe){Vt(r,r.return,Pe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function $1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;$1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function vs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)G1(r,s.alternate,s),s=s.sibling}function wo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:gs(4,s,s.return),wo(s);break;case 1:Zi(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&B1(s,s.return,u),wo(s);break;case 27:sc(s.stateNode);case 26:case 5:Zi(s,s.return),wo(s);break;case 22:s.memoizedState===null&&wo(s);break;case 30:wo(s);break;default:wo(s)}r=r.sibling}}function ys(r,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var v=s.alternate,C=r,T=s,K=T.flags;switch(T.tag){case 0:case 11:case 15:ys(C,T,u),Xu(4,T);break;case 1:if(ys(C,T,u),v=T,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Ae){Vt(v,v.return,Ae)}if(v=T,C=v.updateQueue,C!==null){var re=v.stateNode;try{var fe=C.shared.hiddenCallbacks;if(fe!==null)for(C.shared.hiddenCallbacks=null,C=0;C<fe.length;C++)wv(fe[C],re)}catch(Ae){Vt(v,v.return,Ae)}}u&&K&64&&j1(T),Wu(T,T.return);break;case 27:I1(T);case 26:case 5:ys(C,T,u),u&&v===null&&K&4&&P1(T),Wu(T,T.return);break;case 12:ys(C,T,u);break;case 13:ys(C,T,u),u&&K&4&&K1(C,T);break;case 22:T.memoizedState===null&&ys(C,T,u),Wu(T,T.return);break;case 30:break;default:ys(C,T,u)}s=s.sibling}}function hp(r,s){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&ju(u))}function dp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ju(r))}function Ki(r,s,u,v){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)V1(r,s,u,v),s=s.sibling}function V1(r,s,u,v){var C=s.flags;switch(s.tag){case 0:case 11:case 15:Ki(r,s,u,v),C&2048&&Xu(9,s);break;case 1:Ki(r,s,u,v);break;case 3:Ki(r,s,u,v),C&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ju(r)));break;case 12:if(C&2048){Ki(r,s,u,v),r=s.stateNode;try{var T=s.memoizedProps,K=T.id,re=T.onPostCommit;typeof re=="function"&&re(K,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(fe){Vt(s,s.return,fe)}}else Ki(r,s,u,v);break;case 13:Ki(r,s,u,v);break;case 23:break;case 22:T=s.stateNode,K=s.alternate,s.memoizedState!==null?T._visibility&2?Ki(r,s,u,v):Qu(r,s):T._visibility&2?Ki(r,s,u,v):(T._visibility|=2,yl(r,s,u,v,(s.subtreeFlags&10256)!==0)),C&2048&&hp(K,s);break;case 24:Ki(r,s,u,v),C&2048&&dp(s.alternate,s);break;default:Ki(r,s,u,v)}}function yl(r,s,u,v,C){for(C=C&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var T=r,K=s,re=u,fe=v,Ae=K.flags;switch(K.tag){case 0:case 11:case 15:yl(T,K,re,fe,C),Xu(8,K);break;case 23:break;case 22:var Pe=K.stateNode;K.memoizedState!==null?Pe._visibility&2?yl(T,K,re,fe,C):Qu(T,K):(Pe._visibility|=2,yl(T,K,re,fe,C)),C&&Ae&2048&&hp(K.alternate,K);break;case 24:yl(T,K,re,fe,C),C&&Ae&2048&&dp(K.alternate,K);break;default:yl(T,K,re,fe,C)}s=s.sibling}}function Qu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=r,v=s,C=v.flags;switch(v.tag){case 22:Qu(u,v),C&2048&&hp(v.alternate,v);break;case 24:Qu(u,v),C&2048&&dp(v.alternate,v);break;default:Qu(u,v)}s=s.sibling}}var Ju=8192;function _l(r){if(r.subtreeFlags&Ju)for(r=r.child;r!==null;)Y1(r),r=r.sibling}function Y1(r){switch(r.tag){case 26:_l(r),r.flags&Ju&&r.memoizedState!==null&&W3(Ei,r.memoizedState,r.memoizedProps);break;case 5:_l(r);break;case 3:case 4:var s=Ei;Ei=nh(r.stateNode.containerInfo),_l(r),Ei=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Ju,Ju=16777216,_l(r),Ju=s):_l(r));break;default:_l(r)}}function X1(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ec(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var v=s[u];Pn=v,Q1(v,r)}X1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)W1(r),r=r.sibling}function W1(r){switch(r.tag){case 0:case 11:case 15:ec(r),r.flags&2048&&gs(9,r,r.return);break;case 3:ec(r);break;case 12:ec(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Zf(r)):ec(r);break;default:ec(r)}}function Zf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var v=s[u];Pn=v,Q1(v,r)}X1(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:gs(8,s,s.return),Zf(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Zf(s));break;default:Zf(s)}r=r.sibling}}function Q1(r,s){for(;Pn!==null;){var u=Pn;switch(u.tag){case 0:case 11:case 15:gs(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var v=u.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:ju(u.memoizedState.cache)}if(v=u.child,v!==null)v.return=u,Pn=v;else e:for(u=r;Pn!==null;){v=Pn;var C=v.sibling,T=v.return;if(U1(v),v===u){Pn=null;break e}if(C!==null){C.return=T,Pn=C;break e}Pn=T}}}var d3={getCacheForType:function(r){var s=ar(Nn),u=s.data.get(r);return u===void 0&&(u=r(),s.data.set(r,u)),u}},m3=typeof WeakMap=="function"?WeakMap:Map,Ht=0,en=null,kt=null,jt=0,Gt=0,Ur=null,_s=!1,xl=!1,mp=!1,Ma=0,mn=0,xs=0,Do=0,pp=0,li=0,bl=0,tc=null,Cr=null,gp=!1,vp=0,Kf=1/0,qf=null,bs=null,Xn=0,ws=null,wl=null,Dl=0,yp=0,_p=null,J1=null,nc=0,xp=null;function Zr(){if((Ht&2)!==0&&jt!==0)return jt&-jt;if(q.T!==null){var r=cl;return r!==0?r:Ap()}return Uo()}function ey(){li===0&&(li=(jt&536870912)===0||yt?zt():536870912);var r=oi.current;return r!==null&&(r.flags|=32),li}function Kr(r,s,u){(r===en&&(Gt===2||Gt===9)||r.cancelPendingCommit!==null)&&(El(r,0),Ds(r,jt,li,!1)),rn(r,u),((Ht&2)===0||r!==en)&&(r===en&&((Ht&2)===0&&(Do|=u),mn===4&&Ds(r,jt,li,!1)),qi(r))}function ty(r,s,u){if((Ht&6)!==0)throw Error(i(327));var v=!u&&(s&124)===0&&(s&r.expiredLanes)===0||We(r,s),C=v?v3(r,s):Dp(r,s,!0),T=v;do{if(C===0){xl&&!v&&Ds(r,s,0,!1);break}else{if(u=r.current.alternate,T&&!p3(u)){C=Dp(r,s,!1),T=!1;continue}if(C===2){if(T=s,r.errorRecoveryDisabledLanes&T)var K=0;else K=r.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){s=K;e:{var re=r;C=tc;var fe=re.current.memoizedState.isDehydrated;if(fe&&(El(re,K).flags|=256),K=Dp(re,K,!1),K!==2){if(mp&&!fe){re.errorRecoveryDisabledLanes|=T,Do|=T,C=4;break e}T=Cr,Cr=C,T!==null&&(Cr===null?Cr=T:Cr.push.apply(Cr,T))}C=K}if(T=!1,C!==2)continue}}if(C===1){El(r,0),Ds(r,s,0,!0);break}e:{switch(v=r,T=C,T){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ds(v,s,li,!_s);break e;case 2:Cr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(C=vp+300-ae(),10<C)){if(Ds(v,s,li,!_s),Ye(v,0,!0)!==0)break e;v.timeoutHandle=ky(ny.bind(null,v,u,Cr,qf,gp,s,li,Do,bl,_s,T,2,-0,0),C);break e}ny(v,u,Cr,qf,gp,s,li,Do,bl,_s,T,0,-0,0)}}break}while(!0);qi(r)}function ny(r,s,u,v,C,T,K,re,fe,Ae,Pe,Ue,Me,Te){if(r.timeoutHandle=-1,Ue=s.subtreeFlags,(Ue&8192||(Ue&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:X3},Y1(s),Ue=Q3(),Ue!==null)){r.cancelPendingCommit=Ue(uy.bind(null,r,s,T,u,v,C,K,re,fe,Pe,1,Me,Te)),Ds(r,T,K,!Ae);return}uy(r,s,T,u,v,C,K,re,fe)}function p3(r){for(var s=r;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var v=0;v<u.length;v++){var C=u[v],T=C.getSnapshot;C=C.value;try{if(!mr(T(),C))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ds(r,s,u,v){s&=~pp,s&=~Do,r.suspendedLanes|=s,r.pingedLanes&=~s,v&&(r.warmLanes|=s),v=r.expirationTimes;for(var C=s;0<C;){var T=31-Ie(C),K=1<<T;v[T]=-1,C&=~K}u!==0&&zr(r,u,s)}function $f(){return(Ht&6)===0?(rc(0),!1):!0}function bp(){if(kt!==null){if(Gt===0)var r=kt.return;else r=kt,wi=si=null,Pm(r),gl=null,$u=0,r=kt;for(;r!==null;)R1(r.alternate,r),r=r.return;kt=null}}function El(r,s){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,L3(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),bp(),en=r,kt=u=ai(r.current,null),jt=s,Gt=0,Ur=null,_s=!1,xl=We(r,s),mp=!1,bl=li=pp=Do=xs=mn=0,Cr=tc=null,gp=!1,(s&8)!==0&&(s|=s&32);var v=r.entangledLanes;if(v!==0)for(r=r.entanglements,v&=s;0<v;){var C=31-Ie(v),T=1<<C;s|=r[C],v&=~T}return Ma=s,co(),u}function ry(r,s){St=null,q.H=Ff,s===Pu||s===Ef?(s=xv(),Gt=3):s===vv?(s=xv(),Gt=4):Gt=s===b1?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ur=s,kt===null&&(mn=1,Of(r,gr(s,r.current)))}function iy(){var r=q.H;return q.H=Ff,r===null?Ff:r}function ay(){var r=q.A;return q.A=d3,r}function wp(){mn=4,_s||(jt&4194048)!==jt&&oi.current!==null||(xl=!0),(xs&134217727)===0&&(Do&134217727)===0||en===null||Ds(en,jt,li,!1)}function Dp(r,s,u){var v=Ht;Ht|=2;var C=iy(),T=ay();(en!==r||jt!==s)&&(qf=null,El(r,s)),s=!1;var K=mn;e:do try{if(Gt!==0&&kt!==null){var re=kt,fe=Ur;switch(Gt){case 8:bp(),K=6;break e;case 3:case 2:case 9:case 6:oi.current===null&&(s=!0);var Ae=Gt;if(Gt=0,Ur=null,Sl(r,re,fe,Ae),u&&xl){K=0;break e}break;default:Ae=Gt,Gt=0,Ur=null,Sl(r,re,fe,Ae)}}g3(),K=mn;break}catch(Pe){ry(r,Pe)}while(!0);return s&&r.shellSuspendCounter++,wi=si=null,Ht=v,q.H=C,q.A=T,kt===null&&(en=null,jt=0,co()),K}function g3(){for(;kt!==null;)sy(kt)}function v3(r,s){var u=Ht;Ht|=2;var v=iy(),C=ay();en!==r||jt!==s?(qf=null,Kf=ae()+500,El(r,s)):xl=We(r,s);e:do try{if(Gt!==0&&kt!==null){s=kt;var T=Ur;t:switch(Gt){case 1:Gt=0,Ur=null,Sl(r,s,T,1);break;case 2:case 9:if(yv(T)){Gt=0,Ur=null,oy(s);break}s=function(){Gt!==2&&Gt!==9||en!==r||(Gt=7),qi(r)},T.then(s,s);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:yv(T)?(Gt=0,Ur=null,oy(s)):(Gt=0,Ur=null,Sl(r,s,T,7));break;case 5:var K=null;switch(kt.tag){case 26:K=kt.memoizedState;case 5:case 27:var re=kt;if(!K||Gy(K)){Gt=0,Ur=null;var fe=re.sibling;if(fe!==null)kt=fe;else{var Ae=re.return;Ae!==null?(kt=Ae,Vf(Ae)):kt=null}break t}}Gt=0,Ur=null,Sl(r,s,T,5);break;case 6:Gt=0,Ur=null,Sl(r,s,T,6);break;case 8:bp(),mn=6;break e;default:throw Error(i(462))}}y3();break}catch(Pe){ry(r,Pe)}while(!0);return wi=si=null,q.H=v,q.A=C,Ht=u,kt!==null?0:(en=null,jt=0,co(),mn)}function y3(){for(;kt!==null&&!ke();)sy(kt)}function sy(r){var s=L1(r.alternate,r,Ma);r.memoizedProps=r.pendingProps,s===null?Vf(r):kt=s}function oy(r){var s=r,u=s.alternate;switch(s.tag){case 15:case 0:s=A1(u,s,s.pendingProps,s.type,void 0,jt);break;case 11:s=A1(u,s,s.pendingProps,s.type.render,s.ref,jt);break;case 5:Pm(s);default:R1(u,s),s=kt=Fu(s,Ma),s=L1(u,s,Ma)}r.memoizedProps=r.pendingProps,s===null?Vf(r):kt=s}function Sl(r,s,u,v){wi=si=null,Pm(s),gl=null,$u=0;var C=s.return;try{if(o3(r,C,s,u,jt)){mn=1,Of(r,gr(u,r.current)),kt=null;return}}catch(T){if(C!==null)throw kt=C,T;mn=1,Of(r,gr(u,r.current)),kt=null;return}s.flags&32768?(yt||v===1?r=!0:xl||(jt&536870912)!==0?r=!1:(_s=r=!0,(v===2||v===9||v===3||v===6)&&(v=oi.current,v!==null&&v.tag===13&&(v.flags|=16384))),ly(s,r)):Vf(s)}function Vf(r){var s=r;do{if((s.flags&32768)!==0){ly(s,_s);return}r=s.return;var u=u3(s.alternate,s,Ma);if(u!==null){kt=u;return}if(s=s.sibling,s!==null){kt=s;return}kt=s=r}while(s!==null);mn===0&&(mn=5)}function ly(r,s){do{var u=c3(r.alternate,r);if(u!==null){u.flags&=32767,kt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(r=r.sibling,r!==null)){kt=r;return}kt=r=u}while(r!==null);mn=6,kt=null}function uy(r,s,u,v,C,T,K,re,fe){r.cancelPendingCommit=null;do Yf();while(Xn!==0);if((Ht&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(T=s.lanes|s.childLanes,T|=Ir,zn(r,u,T,K,re,fe),r===en&&(kt=en=null,jt=0),wl=s,ws=r,Dl=u,yp=T,_p=C,J1=v,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,w3(Oe,function(){return my(),null})):(r.callbackNode=null,r.callbackPriority=0),v=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||v){v=q.T,q.T=null,C=ne.p,ne.p=2,K=Ht,Ht|=4;try{f3(r,s,u)}finally{Ht=K,ne.p=C,q.T=v}}Xn=1,cy(),fy(),hy()}}function cy(){if(Xn===1){Xn=0;var r=ws,s=wl,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=q.T,q.T=null;var v=ne.p;ne.p=2;var C=Ht;Ht|=4;try{q1(s,r);var T=Rp,K=oo(r.containerInfo),re=T.focusedElem,fe=T.selectionRange;if(K!==re&&re&&re.ownerDocument&&nl(re.ownerDocument.documentElement,re)){if(fe!==null&&lo(re)){var Ae=fe.start,Pe=fe.end;if(Pe===void 0&&(Pe=Ae),"selectionStart"in re)re.selectionStart=Ae,re.selectionEnd=Math.min(Pe,re.value.length);else{var Ue=re.ownerDocument||document,Me=Ue&&Ue.defaultView||window;if(Me.getSelection){var Te=Me.getSelection(),vt=re.textContent.length,dt=Math.min(fe.start,vt),qt=fe.end===void 0?dt:Math.min(fe.end,vt);!Te.extend&&dt>qt&&(K=qt,qt=dt,dt=K);var _e=zu(re,dt),pe=zu(re,qt);if(_e&&pe&&(Te.rangeCount!==1||Te.anchorNode!==_e.node||Te.anchorOffset!==_e.offset||Te.focusNode!==pe.node||Te.focusOffset!==pe.offset)){var Ee=Ue.createRange();Ee.setStart(_e.node,_e.offset),Te.removeAllRanges(),dt>qt?(Te.addRange(Ee),Te.extend(pe.node,pe.offset)):(Ee.setEnd(pe.node,pe.offset),Te.addRange(Ee))}}}}for(Ue=[],Te=re;Te=Te.parentNode;)Te.nodeType===1&&Ue.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<Ue.length;re++){var He=Ue[re];He.element.scrollLeft=He.left,He.element.scrollTop=He.top}}oh=!!Fp,Rp=Fp=null}finally{Ht=C,ne.p=v,q.T=u}}r.current=s,Xn=2}}function fy(){if(Xn===2){Xn=0;var r=ws,s=wl,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=q.T,q.T=null;var v=ne.p;ne.p=2;var C=Ht;Ht|=4;try{G1(r,s.alternate,s)}finally{Ht=C,ne.p=v,q.T=u}}Xn=3}}function hy(){if(Xn===4||Xn===3){Xn=0,Se();var r=ws,s=wl,u=Dl,v=J1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Xn=5:(Xn=0,wl=ws=null,dy(r,r.pendingLanes));var C=r.pendingLanes;if(C===0&&(bs=null),Ys(u),s=s.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(ve,s,void 0,(s.current.flags&128)===128)}catch{}if(v!==null){s=q.T,C=ne.p,ne.p=2,q.T=null;try{for(var T=r.onRecoverableError,K=0;K<v.length;K++){var re=v[K];T(re.value,{componentStack:re.stack})}}finally{q.T=s,ne.p=C}}(Dl&3)!==0&&Yf(),qi(r),C=r.pendingLanes,(u&4194090)!==0&&(C&42)!==0?r===xp?nc++:(nc=0,xp=r):nc=0,rc(0)}}function dy(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,ju(s)))}function Yf(r){return cy(),fy(),hy(),my()}function my(){if(Xn!==5)return!1;var r=ws,s=yp;yp=0;var u=Ys(Dl),v=q.T,C=ne.p;try{ne.p=32>u?32:u,q.T=null,u=_p,_p=null;var T=ws,K=Dl;if(Xn=0,wl=ws=null,Dl=0,(Ht&6)!==0)throw Error(i(331));var re=Ht;if(Ht|=4,W1(T.current),V1(T,T.current,K,u),Ht=re,rc(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(ve,T)}catch{}return!0}finally{ne.p=C,q.T=v,dy(r,s)}}function py(r,s,u){s=gr(u,s),s=Qm(r.stateNode,s,2),r=hs(r,s,2),r!==null&&(rn(r,2),qi(r))}function Vt(r,s,u){if(r.tag===3)py(r,r,u);else for(;s!==null;){if(s.tag===3){py(s,r,u);break}else if(s.tag===1){var v=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(bs===null||!bs.has(v))){r=gr(u,r),u=_1(2),v=hs(s,u,2),v!==null&&(x1(u,v,s,r),rn(v,2),qi(v));break}}s=s.return}}function Ep(r,s,u){var v=r.pingCache;if(v===null){v=r.pingCache=new m3;var C=new Set;v.set(s,C)}else C=v.get(s),C===void 0&&(C=new Set,v.set(s,C));C.has(u)||(mp=!0,C.add(u),r=_3.bind(null,r,s,u),s.then(r,r))}function _3(r,s,u){var v=r.pingCache;v!==null&&v.delete(s),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,en===r&&(jt&u)===u&&(mn===4||mn===3&&(jt&62914560)===jt&&300>ae()-vp?(Ht&2)===0&&El(r,0):pp|=u,bl===jt&&(bl=0)),qi(r)}function gy(r,s){s===0&&(s=Ut()),r=ss(r,s),r!==null&&(rn(r,s),qi(r))}function x3(r){var s=r.memoizedState,u=0;s!==null&&(u=s.retryLane),gy(r,u)}function b3(r,s){var u=0;switch(r.tag){case 13:var v=r.stateNode,C=r.memoizedState;C!==null&&(u=C.retryLane);break;case 19:v=r.stateNode;break;case 22:v=r.stateNode._retryCache;break;default:throw Error(i(314))}v!==null&&v.delete(s),gy(r,u)}function w3(r,s){return Ve(r,s)}var Xf=null,Cl=null,Sp=!1,Wf=!1,Cp=!1,Eo=0;function qi(r){r!==Cl&&r.next===null&&(Cl===null?Xf=Cl=r:Cl=Cl.next=r),Wf=!0,Sp||(Sp=!0,E3())}function rc(r,s){if(!Cp&&Wf){Cp=!0;do for(var u=!1,v=Xf;v!==null;){if(r!==0){var C=v.pendingLanes;if(C===0)var T=0;else{var K=v.suspendedLanes,re=v.pingedLanes;T=(1<<31-Ie(42|r)+1)-1,T&=C&~(K&~re),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(u=!0,xy(v,T))}else T=jt,T=Ye(v,v===en?T:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(T&3)===0||We(v,T)||(u=!0,xy(v,T));v=v.next}while(u);Cp=!1}}function D3(){vy()}function vy(){Wf=Sp=!1;var r=0;Eo!==0&&(z3()&&(r=Eo),Eo=0);for(var s=ae(),u=null,v=Xf;v!==null;){var C=v.next,T=yy(v,s);T===0?(v.next=null,u===null?Xf=C:u.next=C,C===null&&(Cl=u)):(u=v,(r!==0||(T&3)!==0)&&(Wf=!0)),v=C}rc(r)}function yy(r,s){for(var u=r.suspendedLanes,v=r.pingedLanes,C=r.expirationTimes,T=r.pendingLanes&-62914561;0<T;){var K=31-Ie(T),re=1<<K,fe=C[K];fe===-1?((re&u)===0||(re&v)!==0)&&(C[K]=gt(re,s)):fe<=s&&(r.expiredLanes|=re),T&=~re}if(s=en,u=jt,u=Ye(r,r===s?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),v=r.callbackNode,u===0||r===s&&(Gt===2||Gt===9)||r.cancelPendingCommit!==null)return v!==null&&v!==null&&G(v),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||We(r,u)){if(s=u&-u,s===r.callbackPriority)return s;switch(v!==null&&G(v),Ys(u)){case 2:case 8:u=Fe;break;case 32:u=Oe;break;case 268435456:u=te;break;default:u=Oe}return v=_y.bind(null,r),u=Ve(u,v),r.callbackPriority=s,r.callbackNode=u,s}return v!==null&&v!==null&&G(v),r.callbackPriority=2,r.callbackNode=null,2}function _y(r,s){if(Xn!==0&&Xn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Yf()&&r.callbackNode!==u)return null;var v=jt;return v=Ye(r,r===en?v:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),v===0?null:(ty(r,v,s),yy(r,ae()),r.callbackNode!=null&&r.callbackNode===u?_y.bind(null,r):null)}function xy(r,s){if(Yf())return null;ty(r,s,!0)}function E3(){F3(function(){(Ht&6)!==0?Ve(de,D3):vy()})}function Ap(){return Eo===0&&(Eo=zt()),Eo}function by(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:$a(""+r)}function wy(r,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,r.id&&u.setAttribute("form",r.id),s.parentNode.insertBefore(u,s),r=new FormData(r),u.parentNode.removeChild(u),r}function S3(r,s,u,v,C){if(s==="submit"&&u&&u.stateNode===C){var T=by((C[Ln]||null).action),K=v.submitter;K&&(s=(s=K[Ln]||null)?by(s.formAction):K.getAttribute("formAction"),s!==null&&(T=s,K=null));var re=new no("action","action",null,v,C);r.push({event:re,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Eo!==0){var fe=K?wy(C,K):new FormData(C);$m(u,{pending:!0,data:fe,method:C.method,action:T},null,fe)}}else typeof T=="function"&&(re.preventDefault(),fe=K?wy(C,K):new FormData(C),$m(u,{pending:!0,data:fe,method:C.method,action:T},T,fe))},currentTarget:C}]})}}for(var Np=0;Np<ya.length;Np++){var Mp=ya[Np],C3=Mp.toLowerCase(),A3=Mp[0].toUpperCase()+Mp.slice(1);Or(C3,"on"+A3)}Or(pf,"onAnimationEnd"),Or(Pr,"onAnimationIteration"),Or(uo,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(wm,"onTransitionRun"),Or(sl,"onTransitionStart"),Or(Dm,"onTransitionCancel"),Or(Lu,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ic));function Dy(r,s){s=(s&4)!==0;for(var u=0;u<r.length;u++){var v=r[u],C=v.event;v=v.listeners;e:{var T=void 0;if(s)for(var K=v.length-1;0<=K;K--){var re=v[K],fe=re.instance,Ae=re.currentTarget;if(re=re.listener,fe!==T&&C.isPropagationStopped())break e;T=re,C.currentTarget=Ae;try{T(C)}catch(Pe){Pf(Pe)}C.currentTarget=null,T=fe}else for(K=0;K<v.length;K++){if(re=v[K],fe=re.instance,Ae=re.currentTarget,re=re.listener,fe!==T&&C.isPropagationStopped())break e;T=re,C.currentTarget=Ae;try{T(C)}catch(Pe){Pf(Pe)}C.currentTarget=null,T=fe}}}}function Tt(r,s){var u=s[nr];u===void 0&&(u=s[nr]=new Set);var v=r+"__bubble";u.has(v)||(Ey(s,r,2,!1),u.add(v))}function kp(r,s,u){var v=0;s&&(v|=4),Ey(u,r,v,s)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function Tp(r){if(!r[Qf]){r[Qf]=!0,Ko.forEach(function(u){u!=="selectionchange"&&(N3.has(u)||kp(u,!1,r),kp(u,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Qf]||(s[Qf]=!0,kp("selectionchange",!1,s))}}function Ey(r,s,u,v){switch(Vy(s)){case 2:var C=tS;break;case 8:C=nS;break;default:C=Kp}u=C.bind(null,s,u,r),C=void 0,!to||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),v?C!==void 0?r.addEventListener(s,u,{capture:!0,passive:C}):r.addEventListener(s,u,!0):C!==void 0?r.addEventListener(s,u,{passive:C}):r.addEventListener(s,u,!1)}function zp(r,s,u,v,C){var T=v;if((s&1)===0&&(s&2)===0&&v!==null)e:for(;;){if(v===null)return;var K=v.tag;if(K===3||K===4){var re=v.stateNode.containerInfo;if(re===C)break;if(K===4)for(K=v.return;K!==null;){var fe=K.tag;if((fe===3||fe===4)&&K.stateNode.containerInfo===C)return;K=K.return}for(;re!==null;){if(K=Jr(re),K===null)return;if(fe=K.tag,fe===5||fe===6||fe===26||fe===27){v=T=K;continue e}re=re.parentNode}}v=v.return}Fr(function(){var Ae=T,Pe=Va(u),Ue=[];e:{var Me=gf.get(r);if(Me!==void 0){var Te=no,vt=r;switch(r){case"keypress":if(dn(u)===0)break e;case"keydown":case"keyup":Te=mm;break;case"focusin":vt="focus",Te=Du;break;case"focusout":vt="blur",Te=Du;break;case"beforeblur":case"afterblur":Te=Du;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=gm;break;case pf:case Pr:case uo:Te=cm;break;case Lu:Te=vm;break;case"scroll":case"scrollend":Te=lm;break;case"wheel":Te=sf;break;case"copy":case"cut":case"paste":Te=Eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Cu;break;case"toggle":case"beforetoggle":Te=ma}var dt=(s&4)!==0,qt=!dt&&(r==="scroll"||r==="scrollend"),_e=dt?Me!==null?Me+"Capture":null:Me;dt=[];for(var pe=Ae,Ee;pe!==null;){var He=pe;if(Ee=He.stateNode,He=He.tag,He!==5&&He!==26&&He!==27||Ee===null||_e===null||(He=Bt(pe,_e),He!=null&&dt.push(ac(pe,He,Ee))),qt)break;pe=pe.return}0<dt.length&&(Me=new Te(Me,vt,null,u,Pe),Ue.push({event:Me,listeners:dt}))}}if((s&7)===0){e:{if(Me=r==="mouseover"||r==="pointerover",Te=r==="mouseout"||r==="pointerout",Me&&u!==eo&&(vt=u.relatedTarget||u.fromElement)&&(Jr(vt)||vt[Fi]))break e;if((Te||Me)&&(Me=Pe.window===Pe?Pe:(Me=Pe.ownerDocument)?Me.defaultView||Me.parentWindow:window,Te?(vt=u.relatedTarget||u.toElement,Te=Ae,vt=vt?Jr(vt):null,vt!==null&&(qt=l(vt),dt=vt.tag,vt!==qt||dt!==5&&dt!==27&&dt!==6)&&(vt=null)):(Te=null,vt=Ae),Te!==vt)){if(dt=Wa,He="onMouseLeave",_e="onMouseEnter",pe="mouse",(r==="pointerout"||r==="pointerover")&&(dt=Cu,He="onPointerLeave",_e="onPointerEnter",pe="pointer"),qt=Te==null?Me:br(Te),Ee=vt==null?Me:br(vt),Me=new dt(He,pe+"leave",Te,u,Pe),Me.target=qt,Me.relatedTarget=Ee,He=null,Jr(Pe)===Ae&&(dt=new dt(_e,pe+"enter",vt,u,Pe),dt.target=Ee,dt.relatedTarget=qt,He=dt),qt=He,Te&&vt)t:{for(dt=Te,_e=vt,pe=0,Ee=dt;Ee;Ee=Al(Ee))pe++;for(Ee=0,He=_e;He;He=Al(He))Ee++;for(;0<pe-Ee;)dt=Al(dt),pe--;for(;0<Ee-pe;)_e=Al(_e),Ee--;for(;pe--;){if(dt===_e||_e!==null&&dt===_e.alternate)break t;dt=Al(dt),_e=Al(_e)}dt=null}else dt=null;Te!==null&&Sy(Ue,Me,Te,dt,!1),vt!==null&&qt!==null&&Sy(Ue,qt,vt,dt,!0)}}e:{if(Me=Ae?br(Ae):window,Te=Me.nodeName&&Me.nodeName.toLowerCase(),Te==="select"||Te==="input"&&Me.type==="file")var rt=es;else if(ga(Me))if(Mu)rt=bm;else{rt=xm;var Mt=Tu}else Te=Me.nodeName,!Te||Te.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?Ae&&Js(Ae.elementType)&&(rt=es):rt=bi;if(rt&&(rt=rt(r,Ae))){ff(Ue,rt,u,Pe);break e}Mt&&Mt(r,Me,Ae),r==="focusout"&&Ae&&Me.type==="number"&&Ae.memoizedProps.value!=null&&Ka(Me,"number",Me.value)}switch(Mt=Ae?br(Ae):window,r){case"focusin":(ga(Mt)||Mt.contentEditable==="true")&&(Br=Mt,rs=Ae,va=null);break;case"focusout":va=rs=Br=null;break;case"mousedown":il=!0;break;case"contextmenu":case"mouseup":case"dragend":il=!1,df(Ue,u,Pe);break;case"selectionchange":if(rl)break;case"keydown":case"keyup":df(Ue,u,Pe)}var ft;if(pa)e:{switch(r){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Qa?el(r,u)&&(pt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(pt="onCompositionStart");pt&&(Nu&&u.locale!=="ko"&&(Qa||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Qa&&(ft=Xa()):(ni=Pe,_i="value"in ni?ni.value:ni.textContent,Qa=!0)),Mt=Jf(Ae,pt),0<Mt.length&&(pt=new Rr(pt,r,null,u,Pe),Ue.push({event:pt,listeners:Mt}),ft?pt.data=ft:(ft=uf(u),ft!==null&&(pt.data=ft)))),(ft=of?cf(r,u):_m(r,u))&&(pt=Jf(Ae,"onBeforeInput"),0<pt.length&&(Mt=new Rr("onBeforeInput","beforeinput",null,u,Pe),Ue.push({event:Mt,listeners:pt}),Mt.data=ft)),S3(Ue,r,Ae,u,Pe)}Dy(Ue,s)})}function ac(r,s,u){return{instance:r,listener:s,currentTarget:u}}function Jf(r,s){for(var u=s+"Capture",v=[];r!==null;){var C=r,T=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||T===null||(C=Bt(r,u),C!=null&&v.unshift(ac(r,C,T)),C=Bt(r,s),C!=null&&v.push(ac(r,C,T))),r.tag===3)return v;r=r.return}return[]}function Al(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Sy(r,s,u,v,C){for(var T=s._reactName,K=[];u!==null&&u!==v;){var re=u,fe=re.alternate,Ae=re.stateNode;if(re=re.tag,fe!==null&&fe===v)break;re!==5&&re!==26&&re!==27||Ae===null||(fe=Ae,C?(Ae=Bt(u,T),Ae!=null&&K.unshift(ac(u,Ae,fe))):C||(Ae=Bt(u,T),Ae!=null&&K.push(ac(u,Ae,fe)))),u=u.return}K.length!==0&&r.push({event:s,listeners:K})}var M3=/\r\n?/g,k3=/\u0000|\uFFFD/g;function Cy(r){return(typeof r=="string"?r:""+r).replace(M3,`
`).replace(k3,"")}function Ay(r,s){return s=Cy(s),Cy(r)===s}function eh(){}function Kt(r,s,u,v,C,T){switch(u){case"children":typeof v=="string"?s==="body"||s==="textarea"&&v===""||ei(r,v):(typeof v=="number"||typeof v=="bigint")&&s!=="body"&&ei(r,""+v);break;case"className":yi(r,"class",v);break;case"tabIndex":yi(r,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":yi(r,u,v);break;case"style":qa(r,v,T);break;case"data":if(s!=="object"){yi(r,"data",v);break}case"src":case"href":if(v===""&&(s!=="a"||u!=="href")){r.removeAttribute(u);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){r.removeAttribute(u);break}v=$a(""+v),r.setAttribute(u,v);break;case"action":case"formAction":if(typeof v=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(u==="formAction"?(s!=="input"&&Kt(r,s,"name",C.name,C,null),Kt(r,s,"formEncType",C.formEncType,C,null),Kt(r,s,"formMethod",C.formMethod,C,null),Kt(r,s,"formTarget",C.formTarget,C,null)):(Kt(r,s,"encType",C.encType,C,null),Kt(r,s,"method",C.method,C,null),Kt(r,s,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){r.removeAttribute(u);break}v=$a(""+v),r.setAttribute(u,v);break;case"onClick":v!=null&&(r.onclick=eh);break;case"onScroll":v!=null&&Tt("scroll",r);break;case"onScrollEnd":v!=null&&Tt("scrollend",r);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(u=v.__html,u!=null){if(C.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":r.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){r.removeAttribute("xlink:href");break}u=$a(""+v),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(u,""+v):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":v===!0?r.setAttribute(u,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(u,v):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?r.setAttribute(u,v):r.removeAttribute(u);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?r.removeAttribute(u):r.setAttribute(u,v);break;case"popover":Tt("beforetoggle",r),Tt("toggle",r),Ha(r,"popover",v);break;case"xlinkActuate":Kn(r,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Kn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Kn(r,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Kn(r,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Kn(r,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Kn(r,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Ha(r,"is",v);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=xu.get(u)||u,Ha(r,u,v))}}function Lp(r,s,u,v,C,T){switch(u){case"style":qa(r,v,T);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(u=v.__html,u!=null){if(C.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof v=="string"?ei(r,v):(typeof v=="number"||typeof v=="bigint")&&ei(r,""+v);break;case"onScroll":v!=null&&Tt("scroll",r);break;case"onScrollEnd":v!=null&&Tt("scrollend",r);break;case"onClick":v!=null&&(r.onclick=eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qo.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(C=u.endsWith("Capture"),s=u.slice(2,C?u.length-7:void 0),T=r[Ln]||null,T=T!=null?T[u]:null,typeof T=="function"&&r.removeEventListener(s,T,C),typeof v=="function")){typeof T!="function"&&T!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(s,v,C);break e}u in r?r[u]=v:v===!0?r.setAttribute(u,""):Ha(r,u,v)}}}function Wn(r,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",r),Tt("load",r);var v=!1,C=!1,T;for(T in u)if(u.hasOwnProperty(T)){var K=u[T];if(K!=null)switch(T){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Kt(r,s,T,K,u,null)}}C&&Kt(r,s,"srcSet",u.srcSet,u,null),v&&Kt(r,s,"src",u.src,u,null);return;case"input":Tt("invalid",r);var re=T=K=C=null,fe=null,Ae=null;for(v in u)if(u.hasOwnProperty(v)){var Pe=u[v];if(Pe!=null)switch(v){case"name":C=Pe;break;case"type":K=Pe;break;case"checked":fe=Pe;break;case"defaultChecked":Ae=Pe;break;case"value":T=Pe;break;case"defaultValue":re=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(i(137,s));break;default:Kt(r,s,v,Pe,u,null)}}Wc(r,T,re,fe,Ae,K,C,!1),Za(r);return;case"select":Tt("invalid",r),v=K=T=null;for(C in u)if(u.hasOwnProperty(C)&&(re=u[C],re!=null))switch(C){case"value":T=re;break;case"defaultValue":K=re;break;case"multiple":v=re;default:Kt(r,s,C,re,u,null)}s=T,u=K,r.multiple=!!v,s!=null?wr(r,!!v,s,!1):u!=null&&wr(r,!!v,u,!0);return;case"textarea":Tt("invalid",r),T=C=v=null;for(K in u)if(u.hasOwnProperty(K)&&(re=u[K],re!=null))switch(K){case"value":v=re;break;case"defaultValue":C=re;break;case"children":T=re;break;case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(91));break;default:Kt(r,s,K,re,u,null)}ji(r,v,C,T),Za(r);return;case"option":for(fe in u)if(u.hasOwnProperty(fe)&&(v=u[fe],v!=null))switch(fe){case"selected":r.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Kt(r,s,fe,v,u,null)}return;case"dialog":Tt("beforetoggle",r),Tt("toggle",r),Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":Tt("load",r);break;case"video":case"audio":for(v=0;v<ic.length;v++)Tt(ic[v],r);break;case"image":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"embed":case"source":case"link":Tt("error",r),Tt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in u)if(u.hasOwnProperty(Ae)&&(v=u[Ae],v!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Kt(r,s,Ae,v,u,null)}return;default:if(Js(s)){for(Pe in u)u.hasOwnProperty(Pe)&&(v=u[Pe],v!==void 0&&Lp(r,s,Pe,v,u,void 0));return}}for(re in u)u.hasOwnProperty(re)&&(v=u[re],v!=null&&Kt(r,s,re,v,u,null))}function T3(r,s,u,v){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,T=null,K=null,re=null,fe=null,Ae=null,Pe=null;for(Te in u){var Ue=u[Te];if(u.hasOwnProperty(Te)&&Ue!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":fe=Ue;default:v.hasOwnProperty(Te)||Kt(r,s,Te,null,v,Ue)}}for(var Me in v){var Te=v[Me];if(Ue=u[Me],v.hasOwnProperty(Me)&&(Te!=null||Ue!=null))switch(Me){case"type":T=Te;break;case"name":C=Te;break;case"checked":Ae=Te;break;case"defaultChecked":Pe=Te;break;case"value":K=Te;break;case"defaultValue":re=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(i(137,s));break;default:Te!==Ue&&Kt(r,s,Me,Te,v,Ue)}}rr(r,K,re,fe,Ae,Pe,T,C);return;case"select":Te=K=re=Me=null;for(T in u)if(fe=u[T],u.hasOwnProperty(T)&&fe!=null)switch(T){case"value":break;case"multiple":Te=fe;default:v.hasOwnProperty(T)||Kt(r,s,T,null,v,fe)}for(C in v)if(T=v[C],fe=u[C],v.hasOwnProperty(C)&&(T!=null||fe!=null))switch(C){case"value":Me=T;break;case"defaultValue":re=T;break;case"multiple":K=T;default:T!==fe&&Kt(r,s,C,T,v,fe)}s=re,u=K,v=Te,Me!=null?wr(r,!!u,Me,!1):!!v!=!!u&&(s!=null?wr(r,!!u,s,!0):wr(r,!!u,u?[]:"",!1));return;case"textarea":Te=Me=null;for(re in u)if(C=u[re],u.hasOwnProperty(re)&&C!=null&&!v.hasOwnProperty(re))switch(re){case"value":break;case"children":break;default:Kt(r,s,re,null,v,C)}for(K in v)if(C=v[K],T=u[K],v.hasOwnProperty(K)&&(C!=null||T!=null))switch(K){case"value":Me=C;break;case"defaultValue":Te=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==T&&Kt(r,s,K,C,v,T)}un(r,Me,Te);return;case"option":for(var vt in u)if(Me=u[vt],u.hasOwnProperty(vt)&&Me!=null&&!v.hasOwnProperty(vt))switch(vt){case"selected":r.selected=!1;break;default:Kt(r,s,vt,null,v,Me)}for(fe in v)if(Me=v[fe],Te=u[fe],v.hasOwnProperty(fe)&&Me!==Te&&(Me!=null||Te!=null))switch(fe){case"selected":r.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:Kt(r,s,fe,Me,v,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in u)Me=u[dt],u.hasOwnProperty(dt)&&Me!=null&&!v.hasOwnProperty(dt)&&Kt(r,s,dt,null,v,Me);for(Ae in v)if(Me=v[Ae],Te=u[Ae],v.hasOwnProperty(Ae)&&Me!==Te&&(Me!=null||Te!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(i(137,s));break;default:Kt(r,s,Ae,Me,v,Te)}return;default:if(Js(s)){for(var qt in u)Me=u[qt],u.hasOwnProperty(qt)&&Me!==void 0&&!v.hasOwnProperty(qt)&&Lp(r,s,qt,void 0,v,Me);for(Pe in v)Me=v[Pe],Te=u[Pe],!v.hasOwnProperty(Pe)||Me===Te||Me===void 0&&Te===void 0||Lp(r,s,Pe,Me,v,Te);return}}for(var _e in u)Me=u[_e],u.hasOwnProperty(_e)&&Me!=null&&!v.hasOwnProperty(_e)&&Kt(r,s,_e,null,v,Me);for(Ue in v)Me=v[Ue],Te=u[Ue],!v.hasOwnProperty(Ue)||Me===Te||Me==null&&Te==null||Kt(r,s,Ue,Me,v,Te)}var Fp=null,Rp=null;function th(r){return r.nodeType===9?r:r.ownerDocument}function Ny(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function My(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function jp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bp=null;function z3(){var r=window.event;return r&&r.type==="popstate"?r===Bp?!1:(Bp=r,!0):(Bp=null,!1)}var ky=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,F3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(r){return Ty.resolve(null).then(r).catch(R3)}:ky;function R3(r){setTimeout(function(){throw r})}function Es(r){return r==="head"}function zy(r,s){var u=s,v=0,C=0;do{var T=u.nextSibling;if(r.removeChild(u),T&&T.nodeType===8)if(u=T.data,u==="/$"){if(0<v&&8>v){u=v;var K=r.ownerDocument;if(u&1&&sc(K.documentElement),u&2&&sc(K.body),u&4)for(u=K.head,sc(u),K=u.firstChild;K;){var re=K.nextSibling,fe=K.nodeName;K[Ri]||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&K.rel.toLowerCase()==="stylesheet"||u.removeChild(K),K=re}}if(C===0){r.removeChild(T),mc(s);return}C--}else u==="$"||u==="$?"||u==="$!"?C++:v=u.charCodeAt(0)-48;else v=0;u=T}while(u);mc(s)}function Pp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Pp(u),Ia(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function j3(r,s,u,v){for(;r.nodeType===1;){var C=u;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!v&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(v){if(!r[Ri])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(T=r.getAttribute("rel"),T==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(T!==C.rel||r.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||r.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||r.getAttribute("title")!==(C.title==null?null:C.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(T=r.getAttribute("src"),(T!==(C.src==null?null:C.src)||r.getAttribute("type")!==(C.type==null?null:C.type)||r.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&T&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var T=C.name==null?null:""+C.name;if(C.type==="hidden"&&r.getAttribute("name")===T)return r}else return r;if(r=Si(r.nextSibling),r===null)break}return null}function B3(r,s,u){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Si(r.nextSibling),r===null))return null;return r}function Op(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function P3(r,s){var u=r.ownerDocument;if(r.data!=="$?"||u.readyState==="complete")s();else{var v=function(){s(),u.removeEventListener("DOMContentLoaded",v)};u.addEventListener("DOMContentLoaded",v),r._reactRetry=v}}function Si(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Ip=null;function Ly(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return r;s--}else u==="/$"&&s++}r=r.previousSibling}return null}function Fy(r,s,u){switch(s=th(u),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function sc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ia(r)}var ui=new Map,Ry=new Set;function nh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ka=ne.d;ne.d={f:O3,r:I3,D:H3,C:G3,L:U3,m:Z3,X:q3,S:K3,M:$3};function O3(){var r=ka.f(),s=$f();return r||s}function I3(r){var s=mi(r);s!==null&&s.tag===5&&s.type==="form"?t1(s):ka.r(r)}var Nl=typeof document>"u"?null:document;function jy(r,s,u){var v=Nl;if(v&&typeof s=="string"&&s){var C=$n(s);C='link[rel="'+r+'"][href="'+C+'"]',typeof u=="string"&&(C+='[crossorigin="'+u+'"]'),Ry.has(C)||(Ry.add(C),r={rel:r,crossOrigin:u,href:s},v.querySelector(C)===null&&(s=v.createElement("link"),Wn(s,"link",r),hn(s),v.head.appendChild(s)))}}function H3(r){ka.D(r),jy("dns-prefetch",r,null)}function G3(r,s){ka.C(r,s),jy("preconnect",r,s)}function U3(r,s,u){ka.L(r,s,u);var v=Nl;if(v&&r&&s){var C='link[rel="preload"][as="'+$n(s)+'"]';s==="image"&&u&&u.imageSrcSet?(C+='[imagesrcset="'+$n(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(C+='[imagesizes="'+$n(u.imageSizes)+'"]')):C+='[href="'+$n(r)+'"]';var T=C;switch(s){case"style":T=Ml(r);break;case"script":T=kl(r)}ui.has(T)||(r=m({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:r,as:s},u),ui.set(T,r),v.querySelector(C)!==null||s==="style"&&v.querySelector(oc(T))||s==="script"&&v.querySelector(lc(T))||(s=v.createElement("link"),Wn(s,"link",r),hn(s),v.head.appendChild(s)))}}function Z3(r,s){ka.m(r,s);var u=Nl;if(u&&r){var v=s&&typeof s.as=="string"?s.as:"script",C='link[rel="modulepreload"][as="'+$n(v)+'"][href="'+$n(r)+'"]',T=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=kl(r)}if(!ui.has(T)&&(r=m({rel:"modulepreload",href:r},s),ui.set(T,r),u.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(lc(T)))return}v=u.createElement("link"),Wn(v,"link",r),hn(v),u.head.appendChild(v)}}}function K3(r,s,u){ka.S(r,s,u);var v=Nl;if(v&&r){var C=pi(v).hoistableStyles,T=Ml(r);s=s||"default";var K=C.get(T);if(!K){var re={loading:0,preload:null};if(K=v.querySelector(oc(T)))re.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":s},u),(u=ui.get(T))&&Hp(r,u);var fe=K=v.createElement("link");hn(fe),Wn(fe,"link",r),fe._p=new Promise(function(Ae,Pe){fe.onload=Ae,fe.onerror=Pe}),fe.addEventListener("load",function(){re.loading|=1}),fe.addEventListener("error",function(){re.loading|=2}),re.loading|=4,rh(K,s,v)}K={type:"stylesheet",instance:K,count:1,state:re},C.set(T,K)}}}function q3(r,s){ka.X(r,s);var u=Nl;if(u&&r){var v=pi(u).hoistableScripts,C=kl(r),T=v.get(C);T||(T=u.querySelector(lc(C)),T||(r=m({src:r,async:!0},s),(s=ui.get(C))&&Gp(r,s),T=u.createElement("script"),hn(T),Wn(T,"link",r),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},v.set(C,T))}}function $3(r,s){ka.M(r,s);var u=Nl;if(u&&r){var v=pi(u).hoistableScripts,C=kl(r),T=v.get(C);T||(T=u.querySelector(lc(C)),T||(r=m({src:r,async:!0,type:"module"},s),(s=ui.get(C))&&Gp(r,s),T=u.createElement("script"),hn(T),Wn(T,"link",r),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},v.set(C,T))}}function By(r,s,u,v){var C=(C=ge.current)?nh(C):null;if(!C)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Ml(u.href),u=pi(C).hoistableStyles,v=u.get(s),v||(v={type:"style",instance:null,count:0,state:null},u.set(s,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Ml(u.href);var T=pi(C).hoistableStyles,K=T.get(r);if(K||(C=C.ownerDocument||C,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(r,K),(T=C.querySelector(oc(r)))&&!T._p&&(K.instance=T,K.state.loading=5),ui.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ui.set(r,u),T||V3(C,r,u,K.state))),s&&v===null)throw Error(i(528,""));return K}if(s&&v!==null)throw Error(i(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=kl(u),u=pi(C).hoistableScripts,v=u.get(s),v||(v={type:"script",instance:null,count:0,state:null},u.set(s,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ml(r){return'href="'+$n(r)+'"'}function oc(r){return'link[rel="stylesheet"]['+r+"]"}function Py(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function V3(r,s,u,v){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?v.loading=1:(s=r.createElement("link"),v.preload=s,s.addEventListener("load",function(){return v.loading|=1}),s.addEventListener("error",function(){return v.loading|=2}),Wn(s,"link",u),hn(s),r.head.appendChild(s))}function kl(r){return'[src="'+$n(r)+'"]'}function lc(r){return"script[async]"+r}function Oy(r,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var v=r.querySelector('style[data-href~="'+$n(u.href)+'"]');if(v)return s.instance=v,hn(v),v;var C=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return v=(r.ownerDocument||r).createElement("style"),hn(v),Wn(v,"style",C),rh(v,u.precedence,r),s.instance=v;case"stylesheet":C=Ml(u.href);var T=r.querySelector(oc(C));if(T)return s.state.loading|=4,s.instance=T,hn(T),T;v=Py(u),(C=ui.get(C))&&Hp(v,C),T=(r.ownerDocument||r).createElement("link"),hn(T);var K=T;return K._p=new Promise(function(re,fe){K.onload=re,K.onerror=fe}),Wn(T,"link",v),s.state.loading|=4,rh(T,u.precedence,r),s.instance=T;case"script":return T=kl(u.src),(C=r.querySelector(lc(T)))?(s.instance=C,hn(C),C):(v=u,(C=ui.get(T))&&(v=m({},u),Gp(v,C)),r=r.ownerDocument||r,C=r.createElement("script"),hn(C),Wn(C,"link",v),r.head.appendChild(C),s.instance=C);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(v=s.instance,s.state.loading|=4,rh(v,u.precedence,r));return s.instance}function rh(r,s,u){for(var v=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,T=C,K=0;K<v.length;K++){var re=v[K];if(re.dataset.precedence===s)T=re;else if(T!==C)break}T?T.parentNode.insertBefore(r,T.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(r,s.firstChild))}function Hp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Gp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var ih=null;function Iy(r,s,u){if(ih===null){var v=new Map,C=ih=new Map;C.set(u,v)}else C=ih,v=C.get(u),v||(v=new Map,C.set(u,v));if(v.has(r))return v;for(v.set(r,null),u=u.getElementsByTagName(r),C=0;C<u.length;C++){var T=u[C];if(!(T[Ri]||T[Dn]||r==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var K=T.getAttribute(s)||"";K=r+K;var re=v.get(K);re?re.push(T):v.set(K,[T])}}return v}function Hy(r,s,u){r=r.ownerDocument||r,r.head.insertBefore(u,s==="title"?r.querySelector("head > title"):null)}function Y3(r,s,u){if(u===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Gy(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var uc=null;function X3(){}function W3(r,s,u){if(uc===null)throw Error(i(475));var v=uc;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var C=Ml(u.href),T=r.querySelector(oc(C));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(v.count++,v=ah.bind(v),r.then(v,v)),s.state.loading|=4,s.instance=T,hn(T);return}T=r.ownerDocument||r,u=Py(u),(C=ui.get(C))&&Hp(u,C),T=T.createElement("link"),hn(T);var K=T;K._p=new Promise(function(re,fe){K.onload=re,K.onerror=fe}),Wn(T,"link",u),s.instance=T}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(v.count++,s=ah.bind(v),r.addEventListener("load",s),r.addEventListener("error",s))}}function Q3(){if(uc===null)throw Error(i(475));var r=uc;return r.stylesheets&&r.count===0&&Up(r,r.stylesheets),0<r.count?function(s){var u=setTimeout(function(){if(r.stylesheets&&Up(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(u)}}:null}function ah(){if(this.count--,this.count===0){if(this.stylesheets)Up(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var sh=null;function Up(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,sh=new Map,s.forEach(J3,r),sh=null,ah.call(r))}function J3(r,s){if(!(s.state.loading&4)){var u=sh.get(r);if(u)var v=u.get(null);else{u=new Map,sh.set(r,u);for(var C=r.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<C.length;T++){var K=C[T];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(u.set(K.dataset.precedence,K),v=K)}v&&u.set(null,v)}C=s.instance,K=C.getAttribute("data-precedence"),T=u.get(K)||v,T===v&&u.set(null,C),u.set(K,C),this.count++,v=ah.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),T?T.parentNode.insertBefore(C,T.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(C,r.firstChild)),s.state.loading|=4}}var cc={$$typeof:N,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function eS(r,s,u,v,C,T,K,re){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=It(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.hiddenUpdates=It(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=T,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function Uy(r,s,u,v,C,T,K,re,fe,Ae,Pe,Ue){return r=new eS(r,s,u,K,re,fe,Ae,Ue),s=1,T===!0&&(s|=24),T=yr(3,null,null,s),r.current=T,T.stateNode=r,s=Em(),s.refCount++,r.pooledCache=s,s.refCount++,T.memoizedState={element:v,isDehydrated:u,cache:s},Nm(T),r}function Zy(r){return r?(r=ba,r):ba}function Ky(r,s,u,v,C,T){C=Zy(C),v.context===null?v.context=C:v.pendingContext=C,v=fs(s),v.payload={element:u},T=T===void 0?null:T,T!==null&&(v.callback=T),u=hs(r,v,s),u!==null&&(Kr(u,r,s),Iu(u,r,s))}function qy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<s?u:s}}function Zp(r,s){qy(r,s),(r=r.alternate)&&qy(r,s)}function $y(r){if(r.tag===13){var s=ss(r,67108864);s!==null&&Kr(s,r,67108864),Zp(r,67108864)}}var oh=!0;function tS(r,s,u,v){var C=q.T;q.T=null;var T=ne.p;try{ne.p=2,Kp(r,s,u,v)}finally{ne.p=T,q.T=C}}function nS(r,s,u,v){var C=q.T;q.T=null;var T=ne.p;try{ne.p=8,Kp(r,s,u,v)}finally{ne.p=T,q.T=C}}function Kp(r,s,u,v){if(oh){var C=qp(v);if(C===null)zp(r,s,v,lh,u),Yy(r,v);else if(iS(C,r,s,u,v))v.stopPropagation();else if(Yy(r,v),s&4&&-1<rS.indexOf(r)){for(;C!==null;){var T=mi(C);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var K=Xe(T.pendingLanes);if(K!==0){var re=T;for(re.pendingLanes|=2,re.entangledLanes|=2;K;){var fe=1<<31-Ie(K);re.entanglements[1]|=fe,K&=~fe}qi(T),(Ht&6)===0&&(Kf=ae()+500,rc(0))}}break;case 13:re=ss(T,2),re!==null&&Kr(re,T,2),$f(),Zp(T,2)}if(T=qp(v),T===null&&zp(r,s,v,lh,u),T===C)break;C=T}C!==null&&v.stopPropagation()}else zp(r,s,v,null,u)}}function qp(r){return r=Va(r),$p(r)}var lh=null;function $p(r){if(lh=null,r=Jr(r),r!==null){var s=l(r);if(s===null)r=null;else{var u=s.tag;if(u===13){if(r=c(s),r!==null)return r;r=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return lh=r,null}function Vy(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case de:return 2;case Fe:return 8;case Oe:case xe:return 32;case te:return 268435456;default:return 32}default:return 32}}var Vp=!1,Ss=null,Cs=null,As=null,fc=new Map,hc=new Map,Ns=[],rS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yy(r,s){switch(r){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":fc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(s.pointerId)}}function dc(r,s,u,v,C,T){return r===null||r.nativeEvent!==T?(r={blockedOn:s,domEventName:u,eventSystemFlags:v,nativeEvent:T,targetContainers:[C]},s!==null&&(s=mi(s),s!==null&&$y(s)),r):(r.eventSystemFlags|=v,s=r.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),r)}function iS(r,s,u,v,C){switch(s){case"focusin":return Ss=dc(Ss,r,s,u,v,C),!0;case"dragenter":return Cs=dc(Cs,r,s,u,v,C),!0;case"mouseover":return As=dc(As,r,s,u,v,C),!0;case"pointerover":var T=C.pointerId;return fc.set(T,dc(fc.get(T)||null,r,s,u,v,C)),!0;case"gotpointercapture":return T=C.pointerId,hc.set(T,dc(hc.get(T)||null,r,s,u,v,C)),!0}return!1}function Xy(r){var s=Jr(r.target);if(s!==null){var u=l(s);if(u!==null){if(s=u.tag,s===13){if(s=c(u),s!==null){r.blockedOn=s,Xs(r.priority,function(){if(u.tag===13){var v=Zr();v=Vs(v);var C=ss(u,v);C!==null&&Kr(C,u,v),Zp(u,v)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function uh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var u=qp(r.nativeEvent);if(u===null){u=r.nativeEvent;var v=new u.constructor(u.type,u);eo=v,u.target.dispatchEvent(v),eo=null}else return s=mi(u),s!==null&&$y(s),r.blockedOn=u,!1;s.shift()}return!0}function Wy(r,s,u){uh(r)&&u.delete(s)}function aS(){Vp=!1,Ss!==null&&uh(Ss)&&(Ss=null),Cs!==null&&uh(Cs)&&(Cs=null),As!==null&&uh(As)&&(As=null),fc.forEach(Wy),hc.forEach(Wy)}function ch(r,s){r.blockedOn===s&&(r.blockedOn=null,Vp||(Vp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aS)))}var fh=null;function Qy(r){fh!==r&&(fh=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){fh===r&&(fh=null);for(var s=0;s<r.length;s+=3){var u=r[s],v=r[s+1],C=r[s+2];if(typeof v!="function"){if($p(v||u)===null)continue;break}var T=mi(u);T!==null&&(r.splice(s,3),s-=3,$m(T,{pending:!0,data:C,method:u.method,action:v},v,C))}}))}function mc(r){function s(fe){return ch(fe,r)}Ss!==null&&ch(Ss,r),Cs!==null&&ch(Cs,r),As!==null&&ch(As,r),fc.forEach(s),hc.forEach(s);for(var u=0;u<Ns.length;u++){var v=Ns[u];v.blockedOn===r&&(v.blockedOn=null)}for(;0<Ns.length&&(u=Ns[0],u.blockedOn===null);)Xy(u),u.blockedOn===null&&Ns.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(v=0;v<u.length;v+=3){var C=u[v],T=u[v+1],K=C[Ln]||null;if(typeof T=="function")K||Qy(u);else if(K){var re=null;if(T&&T.hasAttribute("formAction")){if(C=T,K=T[Ln]||null)re=K.formAction;else if($p(C)!==null)continue}else re=K.action;typeof re=="function"?u[v+1]=re:(u.splice(v,3),v-=3),Qy(u)}}}function Yp(r){this._internalRoot=r}hh.prototype.render=Yp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var u=s.current,v=Zr();Ky(u,v,r,s,null,null)},hh.prototype.unmount=Yp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ky(r.current,2,null,r,null,null),$f(),s[Fi]=null}};function hh(r){this._internalRoot=r}hh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Uo();r={blockedOn:null,target:r,priority:s};for(var u=0;u<Ns.length&&s!==0&&s<Ns[u].priority;u++);Ns.splice(u,0,r),u===0&&Xy(r)}};var Jy=t.version;if(Jy!=="19.1.1")throw Error(i(527,Jy,"19.1.1"));ne.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(s),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var sS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{ve=dh.inject(sS),Ne=dh}catch{}}return gc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var u=!1,v="",C=p1,T=g1,K=v1,re=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onUncaughtError!==void 0&&(C=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(K=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(re=s.unstable_transitionCallbacks)),s=Uy(r,1,!1,null,null,u,v,C,T,K,re,null),r[Fi]=s.current,Tp(r),new Yp(s)},gc.hydrateRoot=function(r,s,u){if(!a(r))throw Error(i(299));var v=!1,C="",T=p1,K=g1,re=v1,fe=null,Ae=null;return u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(C=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(K=u.onCaughtError),u.onRecoverableError!==void 0&&(re=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(fe=u.unstable_transitionCallbacks),u.formState!==void 0&&(Ae=u.formState)),s=Uy(r,1,!0,s,u??null,v,C,T,K,re,fe,Ae),s.context=Zy(null),u=s.current,v=Zr(),v=Vs(v),C=fs(v),C.callback=null,hs(u,C,v),u=v,s.current.lanes=u,rn(s,u),qi(s),r[Fi]=s.current,Tp(r),new hh(s)},gc.version="19.1.1",gc}var u_;function gS(){if(u_)return Qp.exports;u_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qp.exports=pS(),Qp.exports}var Dg=gS(),wc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var vS=wc.exports,c_;function yS(){return c_||(c_=1,(function(e,t){(function(n,i){i(t)})(vS,(function(n){var i="1.9.4";function a(o){var p,E,F,O;for(E=1,F=arguments.length;E<F;E++){O=arguments[E];for(p in O)o[p]=O[p]}return o}var l=Object.create||(function(){function o(){}return function(p){return o.prototype=p,new o}})();function c(o,p){var E=Array.prototype.slice;if(o.bind)return o.bind.apply(o,E.call(arguments,1));var F=E.call(arguments,2);return function(){return o.apply(p,F.length?F.concat(E.call(arguments)):arguments)}}var f=0;function d(o){return"_leaflet_id"in o||(o._leaflet_id=++f),o._leaflet_id}function h(o,p,E){var F,O,Y,ce;return ce=function(){F=!1,O&&(Y.apply(E,O),O=!1)},Y=function(){F?O=arguments:(o.apply(E,arguments),setTimeout(ce,p),F=!0)},Y}function m(o,p,E){var F=p[1],O=p[0],Y=F-O;return o===F&&E?o:((o-O)%Y+Y)%Y+O}function g(){return!1}function _(o,p){if(p===!1)return o;var E=Math.pow(10,p===void 0?6:p);return Math.round(o*E)/E}function x(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function D(o){return x(o).split(/\s+/)}function y(o,p){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?l(o.options):{});for(var E in p)o.options[E]=p[E];return o.options}function S(o,p,E){var F=[];for(var O in o)F.push(encodeURIComponent(E?O.toUpperCase():O)+"="+encodeURIComponent(o[O]));return(!p||p.indexOf("?")===-1?"?":"&")+F.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function A(o,p){return o.replace(w,function(E,F){var O=p[F];if(O===void 0)throw new Error("No value provided for variable "+E);return typeof O=="function"&&(O=O(p)),O})}var N=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function z(o,p){for(var E=0;E<o.length;E++)if(o[E]===p)return E;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var B=0;function P(o){var p=+new Date,E=Math.max(0,16-(p-B));return B=p+E,window.setTimeout(o,E)}var R=window.requestAnimationFrame||M("RequestAnimationFrame")||P,H=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function U(o,p,E){if(E&&R===P)o.call(p);else return R.call(window,c(o,p))}function I(o){o&&H.call(window,o)}var X={__proto__:null,extend:a,create:l,bind:c,get lastId(){return f},stamp:d,throttle:h,wrapNum:m,falseFn:g,formatNum:_,trim:x,splitWords:D,setOptions:y,getParamString:S,template:A,isArray:N,indexOf:z,emptyImageUrl:k,requestFn:R,cancelFn:H,requestAnimFrame:U,cancelAnimFrame:I};function j(){}j.extend=function(o){var p=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=p.__super__=this.prototype,F=l(E);F.constructor=p,p.prototype=F;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(p[O]=this[O]);return o.statics&&a(p,o.statics),o.includes&&(J(o.includes),a.apply(null,[F].concat(o.includes))),a(F,o),delete F.statics,delete F.includes,F.options&&(F.options=E.options?l(E.options):{},a(F.options,o.options)),F._initHooks=[],F.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var Y=0,ce=F._initHooks.length;Y<ce;Y++)F._initHooks[Y].call(this)}},p},j.include=function(o){var p=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=p,this.mergeOptions(o.options)),this},j.mergeOptions=function(o){return a(this.prototype.options,o),this},j.addInitHook=function(o){var p=Array.prototype.slice.call(arguments,1),E=typeof o=="function"?o:function(){this[o].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function J(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=N(o)?o:[o];for(var p=0;p<o.length;p++)o[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(o,p,E){if(typeof o=="object")for(var F in o)this._on(F,o[F],p);else{o=D(o);for(var O=0,Y=o.length;O<Y;O++)this._on(o[O],p,E)}return this},off:function(o,p,E){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var F in o)this._off(F,o[F],p);else{o=D(o);for(var O=arguments.length===1,Y=0,ce=o.length;Y<ce;Y++)O?this._off(o[Y]):this._off(o[Y],p,E)}return this},_on:function(o,p,E,F){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(o,p,E)===!1){E===this&&(E=void 0);var O={fn:p,ctx:E};F&&(O.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(O)}},_off:function(o,p,E){var F,O,Y;if(this._events&&(F=this._events[o],!!F)){if(arguments.length===1){if(this._firingCount)for(O=0,Y=F.length;O<Y;O++)F[O].fn=g;delete this._events[o];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var ce=this._listens(o,p,E);if(ce!==!1){var be=F[ce];this._firingCount&&(be.fn=g,this._events[o]=F=F.slice()),F.splice(ce,1)}}},fire:function(o,p,E){if(!this.listens(o,E))return this;var F=a({},p,{type:o,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var O=this._events[o];if(O){this._firingCount=this._firingCount+1||1;for(var Y=0,ce=O.length;Y<ce;Y++){var be=O[Y],ze=be.fn;be.once&&this.off(o,ze,be.ctx),ze.call(be.ctx||this,F)}this._firingCount--}}return E&&this._propagateEvent(F),this},listens:function(o,p,E,F){typeof o!="string"&&console.warn('"string" type argument expected');var O=p;typeof p!="function"&&(F=!!p,O=void 0,E=void 0);var Y=this._events&&this._events[o];if(Y&&Y.length&&this._listens(o,O,E)!==!1)return!0;if(F){for(var ce in this._eventParents)if(this._eventParents[ce].listens(o,p,E,F))return!0}return!1},_listens:function(o,p,E){if(!this._events)return!1;var F=this._events[o]||[];if(!p)return!!F.length;E===this&&(E=void 0);for(var O=0,Y=F.length;O<Y;O++)if(F[O].fn===p&&F[O].ctx===E)return O;return!1},once:function(o,p,E){if(typeof o=="object")for(var F in o)this._on(F,o[F],p,!0);else{o=D(o);for(var O=0,Y=o.length;O<Y;O++)this._on(o[O],p,E,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[d(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[d(o)],this},_propagateEvent:function(o){for(var p in this._eventParents)this._eventParents[p].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var ne=j.extend(q);function V(o,p,E){this.x=E?Math.round(o):o,this.y=E?Math.round(p):p}var Q=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(o){return this.clone()._add(Z(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Z(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new V(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new V(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(o){o=Z(o);var p=o.x-this.x,E=o.y-this.y;return Math.sqrt(p*p+E*E)},equals:function(o){return o=Z(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Z(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function Z(o,p,E){return o instanceof V?o:N(o)?new V(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new V(o.x,o.y):new V(o,p,E)}function $(o,p){if(o)for(var E=p?[o,p]:o,F=0,O=E.length;F<O;F++)this.extend(E[F])}$.prototype={extend:function(o){var p,E;if(!o)return this;if(o instanceof V||typeof o[0]=="number"||"x"in o)p=E=Z(o);else if(o=ee(o),p=o.min,E=o.max,!p||!E)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=E.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(o){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var p,E;return typeof o[0]=="number"||o instanceof V?o=Z(o):o=ee(o),o instanceof $?(p=o.min,E=o.max):p=E=o,p.x>=this.min.x&&E.x<=this.max.x&&p.y>=this.min.y&&E.y<=this.max.y},intersects:function(o){o=ee(o);var p=this.min,E=this.max,F=o.min,O=o.max,Y=O.x>=p.x&&F.x<=E.x,ce=O.y>=p.y&&F.y<=E.y;return Y&&ce},overlaps:function(o){o=ee(o);var p=this.min,E=this.max,F=o.min,O=o.max,Y=O.x>p.x&&F.x<E.x,ce=O.y>p.y&&F.y<E.y;return Y&&ce},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var p=this.min,E=this.max,F=Math.abs(p.x-E.x)*o,O=Math.abs(p.y-E.y)*o;return ee(Z(p.x-F,p.y-O),Z(E.x+F,E.y+O))},equals:function(o){return o?(o=ee(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ee(o,p){return!o||o instanceof $?o:new $(o,p)}function se(o,p){if(o)for(var E=p?[o,p]:o,F=0,O=E.length;F<O;F++)this.extend(E[F])}se.prototype={extend:function(o){var p=this._southWest,E=this._northEast,F,O;if(o instanceof he)F=o,O=o;else if(o instanceof se){if(F=o._southWest,O=o._northEast,!F||!O)return this}else return o?this.extend(ge(o)||oe(o)):this;return!p&&!E?(this._southWest=new he(F.lat,F.lng),this._northEast=new he(O.lat,O.lng)):(p.lat=Math.min(F.lat,p.lat),p.lng=Math.min(F.lng,p.lng),E.lat=Math.max(O.lat,E.lat),E.lng=Math.max(O.lng,E.lng)),this},pad:function(o){var p=this._southWest,E=this._northEast,F=Math.abs(p.lat-E.lat)*o,O=Math.abs(p.lng-E.lng)*o;return new se(new he(p.lat-F,p.lng-O),new he(E.lat+F,E.lng+O))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof he||"lat"in o?o=ge(o):o=oe(o);var p=this._southWest,E=this._northEast,F,O;return o instanceof se?(F=o.getSouthWest(),O=o.getNorthEast()):F=O=o,F.lat>=p.lat&&O.lat<=E.lat&&F.lng>=p.lng&&O.lng<=E.lng},intersects:function(o){o=oe(o);var p=this._southWest,E=this._northEast,F=o.getSouthWest(),O=o.getNorthEast(),Y=O.lat>=p.lat&&F.lat<=E.lat,ce=O.lng>=p.lng&&F.lng<=E.lng;return Y&&ce},overlaps:function(o){o=oe(o);var p=this._southWest,E=this._northEast,F=o.getSouthWest(),O=o.getNorthEast(),Y=O.lat>p.lat&&F.lat<E.lat,ce=O.lng>p.lng&&F.lng<E.lng;return Y&&ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,p){return o?(o=oe(o),this._southWest.equals(o.getSouthWest(),p)&&this._northEast.equals(o.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function oe(o,p){return o instanceof se?o:new se(o,p)}function he(o,p,E){if(isNaN(o)||isNaN(p))throw new Error("Invalid LatLng object: ("+o+", "+p+")");this.lat=+o,this.lng=+p,E!==void 0&&(this.alt=+E)}he.prototype={equals:function(o,p){if(!o)return!1;o=ge(o);var E=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return E<=(p===void 0?1e-9:p)},toString:function(o){return"LatLng("+_(this.lat,o)+", "+_(this.lng,o)+")"},distanceTo:function(o){return Le.distance(this,ge(o))},wrap:function(){return Le.wrapLatLng(this)},toBounds:function(o){var p=180*o/40075017,E=p/Math.cos(Math.PI/180*this.lat);return oe([this.lat-p,this.lng-E],[this.lat+p,this.lng+E])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function ge(o,p,E){return o instanceof he?o:N(o)&&typeof o[0]!="object"?o.length===3?new he(o[0],o[1],o[2]):o.length===2?new he(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new he(o.lat,"lng"in o?o.lng:o.lon,o.alt):p===void 0?null:new he(o,p,E)}var Re={latLngToPoint:function(o,p){var E=this.projection.project(o),F=this.scale(p);return this.transformation._transform(E,F)},pointToLatLng:function(o,p){var E=this.scale(p),F=this.transformation.untransform(o,E);return this.projection.unproject(F)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var p=this.projection.bounds,E=this.scale(o),F=this.transformation.transform(p.min,E),O=this.transformation.transform(p.max,E);return new $(F,O)},infinite:!1,wrapLatLng:function(o){var p=this.wrapLng?m(o.lng,this.wrapLng,!0):o.lng,E=this.wrapLat?m(o.lat,this.wrapLat,!0):o.lat,F=o.alt;return new he(E,p,F)},wrapLatLngBounds:function(o){var p=o.getCenter(),E=this.wrapLatLng(p),F=p.lat-E.lat,O=p.lng-E.lng;if(F===0&&O===0)return o;var Y=o.getSouthWest(),ce=o.getNorthEast(),be=new he(Y.lat-F,Y.lng-O),ze=new he(ce.lat-F,ce.lng-O);return new se(be,ze)}},Le=a({},Re,{wrapLng:[-180,180],R:6371e3,distance:function(o,p){var E=Math.PI/180,F=o.lat*E,O=p.lat*E,Y=Math.sin((p.lat-o.lat)*E/2),ce=Math.sin((p.lng-o.lng)*E/2),be=Y*Y+Math.cos(F)*Math.cos(O)*ce*ce,ze=2*Math.atan2(Math.sqrt(be),Math.sqrt(1-be));return this.R*ze}}),Ge=6378137,Ke={R:Ge,MAX_LATITUDE:85.0511287798,project:function(o){var p=Math.PI/180,E=this.MAX_LATITUDE,F=Math.max(Math.min(E,o.lat),-E),O=Math.sin(F*p);return new V(this.R*o.lng*p,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(o){var p=180/Math.PI;return new he((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*p,o.x*p/this.R)},bounds:(function(){var o=Ge*Math.PI;return new $([-o,-o],[o,o])})()};function Qe(o,p,E,F){if(N(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=p,this._c=E,this._d=F}Qe.prototype={transform:function(o,p){return this._transform(o.clone(),p)},_transform:function(o,p){return p=p||1,o.x=p*(this._a*o.x+this._b),o.y=p*(this._c*o.y+this._d),o},untransform:function(o,p){return p=p||1,new V((o.x/p-this._b)/this._a,(o.y/p-this._d)/this._c)}};function $e(o,p,E,F){return new Qe(o,p,E,F)}var Ve=a({},Le,{code:"EPSG:3857",projection:Ke,transformation:(function(){var o=.5/(Math.PI*Ke.R);return $e(o,.5,-o,.5)})()}),G=a({},Ve,{code:"EPSG:900913"});function ke(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Se(o,p){var E="",F,O,Y,ce,be,ze;for(F=0,Y=o.length;F<Y;F++){for(be=o[F],O=0,ce=be.length;O<ce;O++)ze=be[O],E+=(O?"L":"M")+ze.x+" "+ze.y;E+=p?ut.svg?"z":"x":""}return E||"M0 0"}var ae=document.documentElement.style,ie="ActiveXObject"in window,de=ie&&!document.addEventListener,Fe="msLaunchUri"in navigator&&!("documentMode"in document),Oe=nr("webkit"),xe=nr("android"),te=nr("android 2")||nr("android 3"),le=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ue=xe&&nr("Google")&&le<537&&!("AudioNode"in window),ve=!!window.opera,Ne=!Fe&&nr("chrome"),Ce=nr("gecko")&&!Oe&&!ve&&!ie,Ie=!Ne&&nr("safari"),ye=nr("phantom"),we="OTransition"in ae,me=navigator.platform.indexOf("Win")===0,De=ie&&"transition"in ae,je="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!te,Xe="MozPerspective"in ae,Ye=!window.L_DISABLE_3D&&(De||je||Xe)&&!we&&!ye,We=typeof orientation<"u"||nr("mobile"),gt=We&&Oe,zt=We&&je,Ut=!window.PointerEvent&&window.MSPointerEvent,It=!!(window.PointerEvent||Ut),rn="ontouchstart"in window||!!window.TouchEvent,zn=!window.L_NO_TOUCH&&(rn||It),zr=We&&ve,aa=We&&Ce,Vs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ys=(function(){var o=!1;try{var p=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",g,p),window.removeEventListener("testPassiveEventSupport",g,p)}catch{}return o})(),Uo=(function(){return!!document.createElement("canvas").getContext})(),Xs=!!(document.createElementNS&&ke("svg").createSVGRect),Qr=!!Xs&&(function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Dn=!Xs&&(function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var p=o.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}})(),Ln=navigator.platform.indexOf("Mac")===0,Fi=navigator.platform.indexOf("Linux")===0;function nr(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ut={ie,ielt9:de,edge:Fe,webkit:Oe,android:xe,android23:te,androidStock:ue,opera:ve,chrome:Ne,gecko:Ce,safari:Ie,phantom:ye,opera12:we,win:me,ie3d:De,webkit3d:je,gecko3d:Xe,any3d:Ye,mobile:We,mobileWebkit:gt,mobileWebkit3d:zt,msPointer:Ut,pointer:It,touch:zn,touchNative:rn,mobileOpera:zr,mobileGecko:aa,retina:Vs,passiveEvents:Ys,canvas:Uo,svg:Xs,vml:Dn,inlineSvg:Qr,mac:Ln,linux:Fi},Zo=ut.msPointer?"MSPointerDown":"pointerdown",Ws=ut.msPointer?"MSPointerMove":"pointermove",Ri=ut.msPointer?"MSPointerUp":"pointerup",Ia=ut.msPointer?"MSPointerCancel":"pointercancel",Jr={touchstart:Zo,touchmove:Ws,touchend:Ri,touchcancel:Ia},mi={touchstart:Ft,touchmove:Lr,touchend:Lr,touchcancel:Lr},br={},pi=!1;function hn(o,p,E){return p==="touchstart"&&yu(),mi[p]?(E=mi[p].bind(this,E),o.addEventListener(Jr[p],E,!1),E):(console.warn("wrong event specified:",p),g)}function Ko(o,p,E){if(!Jr[p]){console.warn("wrong event specified:",p);return}o.removeEventListener(Jr[p],E,!1)}function qo(o){br[o.pointerId]=o}function gi(o){br[o.pointerId]&&(br[o.pointerId]=o)}function vi(o){delete br[o.pointerId]}function yu(){pi||(document.addEventListener(Zo,qo,!0),document.addEventListener(Ws,gi,!0),document.addEventListener(Ri,vi,!0),document.addEventListener(Ia,vi,!0),pi=!0)}function Lr(o,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var E in br)p.touches.push(br[E]);p.changedTouches=[p],o(p)}}function Ft(o,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&dn(p),Lr(o,p)}function Fn(o){var p={},E,F;for(F in o)E=o[F],p[F]=E&&E.bind?E.bind(o):E;return o=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var Ha=200;function yi(o,p){o.addEventListener("dblclick",p);var E=0,F;function O(Y){if(Y.detail!==1){F=Y.detail;return}if(!(Y.pointerType==="mouse"||Y.sourceCapabilities&&!Y.sourceCapabilities.firesTouchEvents)){var ce=bu(Y);if(!(ce.some(function(ze){return ze instanceof HTMLLabelElement&&ze.attributes.for})&&!ce.some(function(ze){return ze instanceof HTMLInputElement||ze instanceof HTMLSelectElement}))){var be=Date.now();be-E<=Ha?(F++,F===2&&p(Fn(Y))):F=1,E=be}}}return o.addEventListener("click",O),{dblclick:p,simDblclick:O}}function Kn(o,p){o.removeEventListener("dblclick",p.dblclick),o.removeEventListener("click",p.simDblclick)}var sa=Ka(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ga=Ka(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),oa=Ga==="webkitTransition"||Ga==="OTransition"?Ga+"End":"transitionend";function $o(o){return typeof o=="string"?document.getElementById(o):o}function la(o,p){var E=o.style[p]||o.currentStyle&&o.currentStyle[p];if((!E||E==="auto")&&document.defaultView){var F=document.defaultView.getComputedStyle(o,null);E=F?F[p]:null}return E==="auto"?null:E}function Rt(o,p,E){var F=document.createElement(o);return F.className=p||"",E&&E.appendChild(F),F}function Wt(o){var p=o.parentNode;p&&p.removeChild(o)}function qn(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function ua(o){var p=o.parentNode;p&&p.lastChild!==o&&p.appendChild(o)}function Ua(o){var p=o.parentNode;p&&p.firstChild!==o&&p.insertBefore(o,p.firstChild)}function Za(o,p){if(o.classList!==void 0)return o.classList.contains(p);var E=$n(o);return E.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(E)}function bt(o,p){if(o.classList!==void 0)for(var E=D(p),F=0,O=E.length;F<O;F++)o.classList.add(E[F]);else if(!Za(o,p)){var Y=$n(o);_u(o,(Y?Y+" ":"")+p)}}function Qt(o,p){o.classList!==void 0?o.classList.remove(p):_u(o,x((" "+$n(o)+" ").replace(" "+p+" "," ")))}function _u(o,p){o.className.baseVal===void 0?o.className=p:o.className.baseVal=p}function $n(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function rr(o,p){"opacity"in o.style?o.style.opacity=p:"filter"in o.style&&Wc(o,p)}function Wc(o,p){var E=!1,F="DXImageTransform.Microsoft.Alpha";try{E=o.filters.item(F)}catch{if(p===1)return}p=Math.round(p*100),E?(E.Enabled=p!==100,E.Opacity=p):o.style.filter+=" progid:"+F+"(opacity="+p+")"}function Ka(o){for(var p=document.documentElement.style,E=0;E<o.length;E++)if(o[E]in p)return o[E];return!1}function wr(o,p,E){var F=p||new V(0,0);o.style[sa]=(ut.ie3d?"translate("+F.x+"px,"+F.y+"px)":"translate3d("+F.x+"px,"+F.y+"px,0)")+(E?" scale("+E+")":"")}function un(o,p){o._leaflet_pos=p,ut.any3d?wr(o,p):(o.style.left=p.x+"px",o.style.top=p.y+"px")}function ji(o){return o._leaflet_pos||new V(0,0)}var ei,Qs,Vo;if("onselectstart"in document)ei=function(){_t(window,"selectstart",dn)},Qs=function(){Bt(window,"selectstart",dn)};else{var qa=Ka(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ei=function(){if(qa){var o=document.documentElement.style;Vo=o[qa],o[qa]="none"}},Qs=function(){qa&&(document.documentElement.style[qa]=Vo,Vo=void 0)}}function Js(){_t(window,"dragstart",dn)}function xu(){Bt(window,"dragstart",dn)}var Yo,$a;function eo(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Va(),Yo=o,$a=o.style.outlineStyle,o.style.outlineStyle="none",_t(window,"keydown",Va))}function Va(){Yo&&(Yo.style.outlineStyle=$a,Yo=void 0,$a=void 0,Bt(window,"keydown",Va))}function ca(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Bi(o){var p=o.getBoundingClientRect();return{x:p.width/o.offsetWidth||1,y:p.height/o.offsetHeight||1,boundingClientRect:p}}var Qc={__proto__:null,TRANSFORM:sa,TRANSITION:Ga,TRANSITION_END:oa,get:$o,getStyle:la,create:Rt,remove:Wt,empty:qn,toFront:ua,toBack:Ua,hasClass:Za,addClass:bt,removeClass:Qt,setClass:_u,getClass:$n,setOpacity:rr,testProp:Ka,setTransform:wr,setPosition:un,getPosition:ji,get disableTextSelection(){return ei},get enableTextSelection(){return Qs},disableImageDrag:Js,enableImageDrag:xu,preventOutline:eo,restoreOutline:Va,getSizedParentNode:ca,getScale:Bi};function _t(o,p,E,F){if(p&&typeof p=="object")for(var O in p)fa(o,O,p[O],E);else{p=D(p);for(var Y=0,ce=p.length;Y<ce;Y++)fa(o,p[Y],E,F)}return this}var Fr="_leaflet_events";function Bt(o,p,E,F){if(arguments.length===1)ti(o),delete o[Fr];else if(p&&typeof p=="object")for(var O in p)ni(o,O,p[O],E);else if(p=D(p),arguments.length===2)ti(o,function(be){return z(p,be)!==-1});else for(var Y=0,ce=p.length;Y<ce;Y++)ni(o,p[Y],E,F);return this}function ti(o,p){for(var E in o[Fr]){var F=E.split(/\d/)[0];(!p||p(F))&&ni(o,F,null,null,E)}}var to={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fa(o,p,E,F){var O=p+d(E)+(F?"_"+d(F):"");if(o[Fr]&&o[Fr][O])return this;var Y=function(be){return E.call(F||o,be||window.event)},ce=Y;!ut.touchNative&&ut.pointer&&p.indexOf("touch")===0?Y=hn(o,p,Y):ut.touch&&p==="dblclick"?Y=yi(o,Y):"addEventListener"in o?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?o.addEventListener(to[p]||p,Y,ut.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Y=function(be){be=be||window.event,da(o,be)&&ce(be)},o.addEventListener(to[p],Y,!1)):o.addEventListener(p,ce,!1):o.attachEvent("on"+p,Y),o[Fr]=o[Fr]||{},o[Fr][O]=Y}function ni(o,p,E,F,O){O=O||p+d(E)+(F?"_"+d(F):"");var Y=o[Fr]&&o[Fr][O];if(!Y)return this;!ut.touchNative&&ut.pointer&&p.indexOf("touch")===0?Ko(o,p,Y):ut.touch&&p==="dblclick"?Kn(o,Y):"removeEventListener"in o?o.removeEventListener(to[p]||p,Y,!1):o.detachEvent("on"+p,Y),o[Fr][O]=null}function _i(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Ya(o){return fa(o,"wheel",_i),this}function Xa(o){return _t(o,"mousedown touchstart dblclick contextmenu",_i),o._leaflet_disable_click=!0,this}function dn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function ri(o){return dn(o),_i(o),this}function bu(o){if(o.composedPath)return o.composedPath();for(var p=[],E=o.target;E;)p.push(E),E=E.parentNode;return p}function Vn(o,p){if(!p)return new V(o.clientX,o.clientY);var E=Bi(p),F=E.boundingClientRect;return new V((o.clientX-F.left)/E.x-p.clientLeft,(o.clientY-F.top)/E.y-p.clientTop)}var ha=ut.linux&&ut.chrome?window.devicePixelRatio:ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function no(o){return ut.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/ha:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function da(o,p){var E=p.relatedTarget;if(!E)return!0;try{for(;E&&E!==o;)E=E.parentNode}catch{return!1}return E!==o}var lm={__proto__:null,on:_t,off:Bt,stopPropagation:_i,disableScrollPropagation:Ya,disableClickPropagation:Xa,preventDefault:dn,stop:ri,getPropagationPath:bu,getMousePosition:Vn,getWheelDelta:no,isExternalTarget:da,addListener:_t,removeListener:Bt},Xo=ne.extend({run:function(o,p,E,F){this.stop(),this._el=o,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(F||.5,.2),this._startPos=ji(o),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(o){var p=+new Date-this._startTime,E=this._duration*1e3;p<E?this._runFrame(this._easeOut(p/E),o):(this._runFrame(1),this._complete())},_runFrame:function(o,p){var E=this._startPos.add(this._offset.multiplyBy(o));p&&E._round(),un(this._el,E),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Nt=ne.extend({options:{crs:Ve,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,p){p=y(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(ge(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ga&&ut.any3d&&!ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_t(this._proxy,oa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,p,E){if(p=p===void 0?this._zoom:this._limitZoom(p),o=this._limitCenter(ge(o),p,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=a({animate:E.animate},E.zoom),E.pan=a({animate:E.animate,duration:E.duration},E.pan));var F=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,p,E.zoom):this._tryAnimatedPan(o,E.pan);if(F)return clearTimeout(this._sizeTimer),this}return this._resetView(o,p,E.pan&&E.pan.noMoveStart),this},setZoom:function(o,p){return this._loaded?this.setView(this.getCenter(),o,{zoom:p}):(this._zoom=o,this)},zoomIn:function(o,p){return o=o||(ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,p)},zoomOut:function(o,p){return o=o||(ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,p)},setZoomAround:function(o,p,E){var F=this.getZoomScale(p),O=this.getSize().divideBy(2),Y=o instanceof V?o:this.latLngToContainerPoint(o),ce=Y.subtract(O).multiplyBy(1-1/F),be=this.containerPointToLatLng(O.add(ce));return this.setView(be,p,{zoom:E})},_getBoundsCenterZoom:function(o,p){p=p||{},o=o.getBounds?o.getBounds():oe(o);var E=Z(p.paddingTopLeft||p.padding||[0,0]),F=Z(p.paddingBottomRight||p.padding||[0,0]),O=this.getBoundsZoom(o,!1,E.add(F));if(O=typeof p.maxZoom=="number"?Math.min(p.maxZoom,O):O,O===1/0)return{center:o.getCenter(),zoom:O};var Y=F.subtract(E).divideBy(2),ce=this.project(o.getSouthWest(),O),be=this.project(o.getNorthEast(),O),ze=this.unproject(ce.add(be).divideBy(2).add(Y),O);return{center:ze,zoom:O}},fitBounds:function(o,p){if(o=oe(o),!o.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(o,p);return this.setView(E.center,E.zoom,p)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,p){return this.setView(o,this._zoom,{pan:p})},panBy:function(o,p){if(o=Z(o).round(),p=p||{},!o.x&&!o.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){bt(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,E,p.duration||.25,p.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,p,E){if(E=E||{},E.animate===!1||!ut.any3d)return this.setView(o,p,E);this._stop();var F=this.project(this.getCenter()),O=this.project(o),Y=this.getSize(),ce=this._zoom;o=ge(o),p=p===void 0?ce:p;var be=Math.max(Y.x,Y.y),ze=be*this.getZoomScale(ce,p),Ze=O.distanceTo(F)||1,et=1.42,nt=et*et;function lt(sn){var si=sn?-1:1,wi=sn?ze:be,Gi=ze*ze-be*be+si*nt*nt*Ze*Ze,Di=2*wi*nt*Ze,go=Gi/Di,ul=Math.sqrt(go*go+1)-go,vo=ul<1e-9?-18:Math.log(ul);return vo}function yt(sn){return(Math.exp(sn)-Math.exp(-sn))/2}function Jt(sn){return(Math.exp(sn)+Math.exp(-sn))/2}function cn(sn){return yt(sn)/Jt(sn)}var jn=lt(0);function Dr(sn){return be*(Jt(jn)/Jt(jn+et*sn))}function yf(sn){return be*(Jt(jn)*cn(jn+et*sn)-yt(jn))/nt}function _f(sn){return 1-Math.pow(1-sn,1.5)}var po=Date.now(),ls=(lt(1)-jn)/et,xf=E.duration?1e3*E.duration:1e3*ls*.8;function us(){var sn=(Date.now()-po)/xf,si=_f(sn)*ls;sn<=1?(this._flyToFrame=U(us,this),this._move(this.unproject(F.add(O.subtract(F).multiplyBy(yf(si)/Ze)),ce),this.getScaleZoom(be/Dr(si),ce),{flyTo:!0})):this._move(o,p)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),us.call(this),this},flyToBounds:function(o,p){var E=this._getBoundsCenterZoom(o,p);return this.flyTo(E.center,E.zoom,p)},setMaxBounds:function(o){return o=oe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var p=this.options.minZoom;return this.options.minZoom=o,this._loaded&&p!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var p=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&p!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,p){this._enforcingBounds=!0;var E=this.getCenter(),F=this._limitCenter(E,this._zoom,oe(o));return E.equals(F)||this.panTo(F,p),this._enforcingBounds=!1,this},panInside:function(o,p){p=p||{};var E=Z(p.paddingTopLeft||p.padding||[0,0]),F=Z(p.paddingBottomRight||p.padding||[0,0]),O=this.project(this.getCenter()),Y=this.project(o),ce=this.getPixelBounds(),be=ee([ce.min.add(E),ce.max.subtract(F)]),ze=be.getSize();if(!be.contains(Y)){this._enforcingBounds=!0;var Ze=Y.subtract(be.getCenter()),et=be.extend(Y).getSize().subtract(ze);O.x+=Ze.x<0?-et.x:et.x,O.y+=Ze.y<0?-et.y:et.y,this.panTo(this.unproject(O),p),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),F=p.divideBy(2).round(),O=E.divideBy(2).round(),Y=F.subtract(O);return!Y.x&&!Y.y?this:(o.animate&&o.pan?this.panBy(Y):(o.pan&&this._rawPanBy(Y),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=c(this._handleGeolocationResponse,this),E=c(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,E,o):navigator.geolocation.getCurrentPosition(p,E,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var p=o.code,E=o.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var p=o.coords.latitude,E=o.coords.longitude,F=new he(p,E),O=F.toBounds(o.coords.accuracy*2),Y=this._locateOptions;if(Y.setView){var ce=this.getBoundsZoom(O);this.setView(F,Y.maxZoom?Math.min(ce,Y.maxZoom):ce)}var be={latlng:F,bounds:O,timestamp:o.timestamp};for(var ze in o.coords)typeof o.coords[ze]=="number"&&(be[ze]=o.coords[ze]);this.fire("locationfound",be)}},addHandler:function(o,p){if(!p)return this;var E=this[o]=new p(this);return this._handlers.push(E),this.options[o]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Wt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,p){var E="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),F=Rt("div",E,p||this._mapPane);return o&&(this._panes[o]=F),F},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),p=this.unproject(o.getBottomLeft()),E=this.unproject(o.getTopRight());return new se(p,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,p,E){o=oe(o),E=Z(E||[0,0]);var F=this.getZoom()||0,O=this.getMinZoom(),Y=this.getMaxZoom(),ce=o.getNorthWest(),be=o.getSouthEast(),ze=this.getSize().subtract(E),Ze=ee(this.project(be,F),this.project(ce,F)).getSize(),et=ut.any3d?this.options.zoomSnap:1,nt=ze.x/Ze.x,lt=ze.y/Ze.y,yt=p?Math.max(nt,lt):Math.min(nt,lt);return F=this.getScaleZoom(yt,F),et&&(F=Math.round(F/(et/100))*(et/100),F=p?Math.ceil(F/et)*et:Math.floor(F/et)*et),Math.max(O,Math.min(Y,F))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,p){var E=this._getTopLeftPoint(o,p);return new $(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,p){var E=this.options.crs;return p=p===void 0?this._zoom:p,E.scale(o)/E.scale(p)},getScaleZoom:function(o,p){var E=this.options.crs;p=p===void 0?this._zoom:p;var F=E.zoom(o*E.scale(p));return isNaN(F)?1/0:F},project:function(o,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(ge(o),p)},unproject:function(o,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Z(o),p)},layerPointToLatLng:function(o){var p=Z(o).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(o){var p=this.project(ge(o))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ge(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(oe(o))},distance:function(o,p){return this.options.crs.distance(ge(o),ge(p))},containerPointToLayerPoint:function(o){return Z(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Z(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var p=this.containerPointToLayerPoint(Z(o));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(o)))},mouseEventToContainerPoint:function(o){return Vn(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var p=this._container=$o(o);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_t(p,"scroll",this._onScroll,this),this._containerId=d(p)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ut.any3d,bt(o,"leaflet-container"+(ut.touch?" leaflet-touch":"")+(ut.retina?" leaflet-retina":"")+(ut.ielt9?" leaflet-oldie":"")+(ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=la(o,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),un(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(o.markerPane,"leaflet-zoom-hide"),bt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,p,E){un(this._mapPane,new V(0,0));var F=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var O=this._zoom!==p;this._moveStart(O,E)._move(o,p)._moveEnd(O),this.fire("viewreset"),F&&this.fire("load")},_moveStart:function(o,p){return o&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(o,p,E,F){p===void 0&&(p=this._zoom);var O=this._zoom!==p;return this._zoom=p,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),F?E&&E.pinch&&this.fire("zoom",E):((O||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){un(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[d(this._container)]=this;var p=o?Bt:_t;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),ut.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,p){for(var E=[],F,O=p==="mouseout"||p==="mouseover",Y=o.target||o.srcElement,ce=!1;Y;){if(F=this._targets[d(Y)],F&&(p==="click"||p==="preclick")&&this._draggableMoved(F)){ce=!0;break}if(F&&F.listens(p,!0)&&(O&&!da(Y,o)||(E.push(F),O))||Y===this._container)break;Y=Y.parentNode}return!E.length&&!ce&&!O&&this.listens(p,!0)&&(E=[this]),E},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var p=o.target||o.srcElement;if(!(!this._loaded||p._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(p))){var E=o.type;E==="mousedown"&&eo(p),this._fireDOMEvent(o,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,p,E){if(o.type==="click"){var F=a({},o);F.type="preclick",this._fireDOMEvent(F,F.type,E)}var O=this._findEventTargets(o,p);if(E){for(var Y=[],ce=0;ce<E.length;ce++)E[ce].listens(p,!0)&&Y.push(E[ce]);O=Y.concat(O)}if(O.length){p==="contextmenu"&&dn(o);var be=O[0],ze={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Ze=be.getLatLng&&(!be._radius||be._radius<=10);ze.containerPoint=Ze?this.latLngToContainerPoint(be.getLatLng()):this.mouseEventToContainerPoint(o),ze.layerPoint=this.containerPointToLayerPoint(ze.containerPoint),ze.latlng=Ze?be.getLatLng():this.layerPointToLatLng(ze.layerPoint)}for(ce=0;ce<O.length;ce++)if(O[ce].fire(p,ze,!0),ze.originalEvent._stopped||O[ce].options.bubblingMouseEvents===!1&&z(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,p=this._handlers.length;o<p;o++)this._handlers[o].disable()},whenReady:function(o,p){return this._loaded?o.call(p||this,{target:this}):this.on("load",o,p),this},_getMapPanePos:function(){return ji(this._mapPane)||new V(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,p){var E=o&&p!==void 0?this._getNewPixelOrigin(o,p):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,p){var E=this.getSize()._divideBy(2);return this.project(o,p)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,p,E){var F=this._getNewPixelOrigin(E,p);return this.project(o,p)._subtract(F)},_latLngBoundsToNewLayerBounds:function(o,p,E){var F=this._getNewPixelOrigin(E,p);return ee([this.project(o.getSouthWest(),p)._subtract(F),this.project(o.getNorthWest(),p)._subtract(F),this.project(o.getSouthEast(),p)._subtract(F),this.project(o.getNorthEast(),p)._subtract(F)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,p,E){if(!E)return o;var F=this.project(o,p),O=this.getSize().divideBy(2),Y=new $(F.subtract(O),F.add(O)),ce=this._getBoundsOffset(Y,E,p);return Math.abs(ce.x)<=1&&Math.abs(ce.y)<=1?o:this.unproject(F.add(ce),p)},_limitOffset:function(o,p){if(!p)return o;var E=this.getPixelBounds(),F=new $(E.min.add(o),E.max.add(o));return o.add(this._getBoundsOffset(F,p))},_getBoundsOffset:function(o,p,E){var F=ee(this.project(p.getNorthEast(),E),this.project(p.getSouthWest(),E)),O=F.min.subtract(o.min),Y=F.max.subtract(o.max),ce=this._rebound(O.x,-Y.x),be=this._rebound(O.y,-Y.y);return new V(ce,be)},_rebound:function(o,p){return o+p>0?Math.round(o-p)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(p))},_limitZoom:function(o){var p=this.getMinZoom(),E=this.getMaxZoom(),F=ut.any3d?this.options.zoomSnap:1;return F&&(o=Math.round(o/F)*F),Math.max(p,Math.min(E,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,p){var E=this._getCenterOffset(o)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,p),!0)},_createAnimProxy:function(){var o=this._proxy=Rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(p){var E=sa,F=this._proxy.style[E];wr(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),F===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),p=this.getZoom();wr(this._proxy,this.project(o,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,p,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var F=this.getZoomScale(p),O=this._getCenterOffset(o)._divideBy(1-1/F);return E.animate!==!0&&!this.getSize().contains(O)?!1:(U(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(o,p,!0)},this),!0)},_animateZoom:function(o,p,E,F){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=p,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:p,noUpdate:F}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ro(o,p){return new Nt(o,p)}var ir=j.extend({options:{position:"topright"},initialize:function(o){y(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var p=this._map;return p&&p.removeControl(this),this.options.position=o,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var p=this._container=this.onAdd(o),E=this.getPosition(),F=o._controlCorners[E];return bt(p,"leaflet-control"),E.indexOf("bottom")!==-1?F.insertBefore(p,F.firstChild):F.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Wa=function(o){return new ir(o)};Nt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},p="leaflet-",E=this._controlContainer=Rt("div",p+"control-container",this._container);function F(O,Y){var ce=p+O+" "+p+Y;o[O+Y]=Rt("div",ce,E)}F("top","left"),F("top","right"),F("bottom","left"),F("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Wt(this._controlCorners[o]);Wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Jc=ir.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,p,E,F){return E<F?-1:F<E?1:0}},initialize:function(o,p,E){y(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var F in o)this._addLayer(o[F],F);for(F in p)this._addLayer(p[F],F,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return ir.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,p){return this._addLayer(o,p),this._map?this._update():this},addOverlay:function(o,p){return this._addLayer(o,p,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var p=this._getLayer(d(o));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",p=this._container=Rt("div",o),E=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Xa(p),Ya(p);var F=this._section=Rt("section",o+"-list");E&&(this._map.on("click",this.collapse,this),_t(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=Rt("a",o+"-toggle",p);O.href="#",O.title="Layers",O.setAttribute("role","button"),_t(O,{keydown:function(Y){Y.keyCode===13&&this._expandSafely()},click:function(Y){dn(Y),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=Rt("div",o+"-base",F),this._separator=Rt("div",o+"-separator",F),this._overlaysList=Rt("div",o+"-overlays",F),p.appendChild(F)},_getLayer:function(o){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&d(this._layers[p].layer)===o)return this._layers[p]},_addLayer:function(o,p,E){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:p,overlay:E}),this.options.sortLayers&&this._layers.sort(c(function(F,O){return this.options.sortFunction(F.layer,O.layer,F.name,O.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;qn(this._baseLayersList),qn(this._overlaysList),this._layerControlInputs=[];var o,p,E,F,O=0;for(E=0;E<this._layers.length;E++)F=this._layers[E],this._addItem(F),p=p||F.overlay,o=o||!F.overlay,O+=F.overlay?0:1;return this.options.hideSingleBase&&(o=o&&O>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=p&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var p=this._getLayer(d(o.target)),E=p.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;E&&this._map.fire(E,p)},_createRadioElement:function(o,p){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(p?' checked="checked"':"")+"/>",F=document.createElement("div");return F.innerHTML=E,F.firstChild},_addItem:function(o){var p=document.createElement("label"),E=this._map.hasLayer(o.layer),F;o.overlay?(F=document.createElement("input"),F.type="checkbox",F.className="leaflet-control-layers-selector",F.defaultChecked=E):F=this._createRadioElement("leaflet-base-layers_"+d(this),E),this._layerControlInputs.push(F),F.layerId=d(o.layer),_t(F,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+o.name;var Y=document.createElement("span");p.appendChild(Y),Y.appendChild(F),Y.appendChild(O);var ce=o.overlay?this._overlaysList:this._baseLayersList;return ce.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,p,E,F=[],O=[];this._handlingClick=!0;for(var Y=o.length-1;Y>=0;Y--)p=o[Y],E=this._getLayer(p.layerId).layer,p.checked?F.push(E):p.checked||O.push(E);for(Y=0;Y<O.length;Y++)this._map.hasLayer(O[Y])&&this._map.removeLayer(O[Y]);for(Y=0;Y<F.length;Y++)this._map.hasLayer(F[Y])||this._map.addLayer(F[Y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,p,E,F=this._map.getZoom(),O=o.length-1;O>=0;O--)p=o[O],E=this._getLayer(p.layerId).layer,p.disabled=E.options.minZoom!==void 0&&F<E.options.minZoom||E.options.maxZoom!==void 0&&F>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,_t(o,"click",dn),this.expand();var p=this;setTimeout(function(){Bt(o,"click",dn),p._preventClick=!1})}}),um=function(o,p,E){return new Jc(o,p,E)},wu=ir.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var p="leaflet-control-zoom",E=Rt("div",p+" leaflet-bar"),F=this.options;return this._zoomInButton=this._createButton(F.zoomInText,F.zoomInTitle,p+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(F.zoomOutText,F.zoomOutTitle,p+"-out",E,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,p,E,F,O){var Y=Rt("a",E,F);return Y.innerHTML=o,Y.href="#",Y.title=p,Y.setAttribute("role","button"),Y.setAttribute("aria-label",p),Xa(Y),_t(Y,"click",ri),_t(Y,"click",O,this),_t(Y,"click",this._refocusOnMap,this),Y},_updateDisabled:function(){var o=this._map,p="leaflet-disabled";Qt(this._zoomInButton,p),Qt(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(bt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(bt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nt.mergeOptions({zoomControl:!0}),Nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wu,this.addControl(this.zoomControl))});var Du=function(o){return new wu(o)},ef=ir.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var p="leaflet-control-scale",E=Rt("div",p),F=this.options;return this._addScales(F,p+"-line",E),o.on(F.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),E},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,p,E){o.metric&&(this._mScale=Rt("div",p,E)),o.imperial&&(this._iScale=Rt("div",p,E))},_update:function(){var o=this._map,p=o.getSize().y/2,E=o.distance(o.containerPointToLatLng([0,p]),o.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(E)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var p=this._getRoundNum(o),E=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,E,p/o)},_updateImperial:function(o){var p=o*3.2808399,E,F,O;p>5280?(E=p/5280,F=this._getRoundNum(E),this._updateScale(this._iScale,F+" mi",F/E)):(O=this._getRoundNum(p),this._updateScale(this._iScale,O+" ft",O/p))},_updateScale:function(o,p,E){o.style.width=Math.round(this.options.maxWidth*E)+"px",o.innerHTML=p},_getRoundNum:function(o){var p=Math.pow(10,(Math.floor(o)+"").length-1),E=o/p;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,p*E}}),cm=function(o){return new ef(o)},fm='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eu=ir.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ut.inlineSvg?fm+" ":"")+"Leaflet</a>"},initialize:function(o){y(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Rt("div","leaflet-control-attribution"),Xa(this._container);for(var p in o._layers)o._layers[p].getAttribution&&this.addAttribution(o._layers[p].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var p in this._attributions)this._attributions[p]&&o.push(p);var E=[];this.options.prefix&&E.push(this.options.prefix),o.length&&E.push(o.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});Nt.mergeOptions({attributionControl:!0}),Nt.addInitHook(function(){this.options.attributionControl&&new Eu().addTo(this)});var hm=function(o){return new Eu(o)};ir.Layers=Jc,ir.Zoom=wu,ir.Scale=ef,ir.Attribution=Eu,Wa.layers=um,Wa.zoom=Du,Wa.scale=cm,Wa.attribution=hm;var Rr=j.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Rr.addTo=function(o,p){return o.addHandler(p,this),this};var dm={Events:q},tf=ut.touch?"touchstart mousedown":"mousedown",Pi=ne.extend({options:{clickTolerance:3},initialize:function(o,p,E,F){y(this,F),this._element=o,this._dragStartTarget=p||o,this._preventOutline=E},enable:function(){this._enabled||(_t(this._dragStartTarget,tf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Pi._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,tf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Za(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Pi._dragging===this&&this.finishDrag();return}if(!(Pi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Pi._dragging=this,this._preventOutline&&eo(this._element),Js(),ei(),!this._moving)){this.fire("down");var p=o.touches?o.touches[0]:o,E=ca(this._element);this._startPoint=new V(p.clientX,p.clientY),this._startPos=ji(this._element),this._parentScale=Bi(E);var F=o.type==="mousedown";_t(document,F?"mousemove":"touchmove",this._onMove,this),_t(document,F?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var p=o.touches&&o.touches.length===1?o.touches[0]:o,E=new V(p.clientX,p.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,dn(o),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),un(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Qt(document.body,"leaflet-dragging"),this._lastTarget&&(Qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),xu(),Qs();var p=this._moved&&this._moving;this._moving=!1,Pi._dragging=!1,p&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function nf(o,p,E){var F,O=[1,4,2,8],Y,ce,be,ze,Ze,et,nt,lt;for(Y=0,et=o.length;Y<et;Y++)o[Y]._code=ma(o[Y],p);for(be=0;be<4;be++){for(nt=O[be],F=[],Y=0,et=o.length,ce=et-1;Y<et;ce=Y++)ze=o[Y],Ze=o[ce],ze._code&nt?Ze._code&nt||(lt=Qo(Ze,ze,nt,p,E),lt._code=ma(lt,p),F.push(lt)):(Ze._code&nt&&(lt=Qo(Ze,ze,nt,p,E),lt._code=ma(lt,p),F.push(lt)),F.push(ze));o=F}return o}function Wo(o,p){var E,F,O,Y,ce,be,ze,Ze,et;if(!o||o.length===0)throw new Error("latlngs not passed");Rn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var nt=ge([0,0]),lt=oe(o),yt=lt.getNorthWest().distanceTo(lt.getSouthWest())*lt.getNorthEast().distanceTo(lt.getNorthWest());yt<1700&&(nt=Su(o));var Jt=o.length,cn=[];for(E=0;E<Jt;E++){var jn=ge(o[E]);cn.push(p.project(ge([jn.lat-nt.lat,jn.lng-nt.lng])))}for(be=ze=Ze=0,E=0,F=Jt-1;E<Jt;F=E++)O=cn[E],Y=cn[F],ce=O.y*Y.x-Y.y*O.x,ze+=(O.x+Y.x)*ce,Ze+=(O.y+Y.y)*ce,be+=ce*3;be===0?et=cn[0]:et=[ze/be,Ze/be];var Dr=p.unproject(Z(et));return ge([Dr.lat+nt.lat,Dr.lng+nt.lng])}function Su(o){for(var p=0,E=0,F=0,O=0;O<o.length;O++){var Y=ge(o[O]);p+=Y.lat,E+=Y.lng,F++}return ge([p/F,E/F])}var mm={__proto__:null,clipPolygon:nf,polygonCenter:Wo,centroid:Su};function rf(o,p){if(!p||!o.length)return o.slice();var E=p*p;return o=vm(o,E),o=gm(o,E),o}function Cu(o,p,E){return Math.sqrt(pa(o,p,E,!0))}function pm(o,p,E){return pa(o,p,E)}function gm(o,p){var E=o.length,F=typeof Uint8Array<"u"?Uint8Array:Array,O=new F(E);O[0]=O[E-1]=1,Au(o,O,p,0,E-1);var Y,ce=[];for(Y=0;Y<E;Y++)O[Y]&&ce.push(o[Y]);return ce}function Au(o,p,E,F,O){var Y=0,ce,be,ze;for(be=F+1;be<=O-1;be++)ze=pa(o[be],o[F],o[O],!0),ze>Y&&(ce=be,Y=ze);Y>E&&(p[ce]=1,Au(o,p,E,F,ce),Au(o,p,E,ce,O))}function vm(o,p){for(var E=[o[0]],F=1,O=0,Y=o.length;F<Y;F++)ym(o[F],o[O])>p&&(E.push(o[F]),O=F);return O<Y-1&&E.push(o[Y-1]),E}var af;function sf(o,p,E,F,O){var Y=F?af:ma(o,E),ce=ma(p,E),be,ze,Ze;for(af=ce;;){if(!(Y|ce))return[o,p];if(Y&ce)return!1;be=Y||ce,ze=Qo(o,p,be,E,O),Ze=ma(ze,E),be===Y?(o=ze,Y=Ze):(p=ze,ce=Ze)}}function Qo(o,p,E,F,O){var Y=p.x-o.x,ce=p.y-o.y,be=F.min,ze=F.max,Ze,et;return E&8?(Ze=o.x+Y*(ze.y-o.y)/ce,et=ze.y):E&4?(Ze=o.x+Y*(be.y-o.y)/ce,et=be.y):E&2?(Ze=ze.x,et=o.y+ce*(ze.x-o.x)/Y):E&1&&(Ze=be.x,et=o.y+ce*(be.x-o.x)/Y),new V(Ze,et,O)}function ma(o,p){var E=0;return o.x<p.min.x?E|=1:o.x>p.max.x&&(E|=2),o.y<p.min.y?E|=4:o.y>p.max.y&&(E|=8),E}function ym(o,p){var E=p.x-o.x,F=p.y-o.y;return E*E+F*F}function pa(o,p,E,F){var O=p.x,Y=p.y,ce=E.x-O,be=E.y-Y,ze=ce*ce+be*be,Ze;return ze>0&&(Ze=((o.x-O)*ce+(o.y-Y)*be)/ze,Ze>1?(O=E.x,Y=E.y):Ze>0&&(O+=ce*Ze,Y+=be*Ze)),ce=o.x-O,be=o.y-Y,F?ce*ce+be*be:new V(O,Y)}function Rn(o){return!N(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function of(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rn(o)}function Nu(o,p){var E,F,O,Y,ce,be,ze,Ze;if(!o||o.length===0)throw new Error("latlngs not passed");Rn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var et=ge([0,0]),nt=oe(o),lt=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());lt<1700&&(et=Su(o));var yt=o.length,Jt=[];for(E=0;E<yt;E++){var cn=ge(o[E]);Jt.push(p.project(ge([cn.lat-et.lat,cn.lng-et.lng])))}for(E=0,F=0;E<yt-1;E++)F+=Jt[E].distanceTo(Jt[E+1])/2;if(F===0)Ze=Jt[0];else for(E=0,Y=0;E<yt-1;E++)if(ce=Jt[E],be=Jt[E+1],O=ce.distanceTo(be),Y+=O,Y>F){ze=(Y-F)/O,Ze=[be.x-ze*(be.x-ce.x),be.y-ze*(be.y-ce.y)];break}var jn=p.unproject(Z(Ze));return ge([jn.lat+et.lat,jn.lng+et.lng])}var lf={__proto__:null,simplify:rf,pointToSegmentDistance:Cu,closestPointOnSegment:pm,clipSegment:sf,_getEdgeIntersection:Qo,_getBitCode:ma,_sqClosestPointOnSegment:pa,isFlat:Rn,_flat:of,polylineCenter:Nu},Jo={project:function(o){return new V(o.lng,o.lat)},unproject:function(o){return new he(o.y,o.x)},bounds:new $([-180,-90],[180,90])},el={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var p=Math.PI/180,E=this.R,F=o.lat*p,O=this.R_MINOR/E,Y=Math.sqrt(1-O*O),ce=Y*Math.sin(F),be=Math.tan(Math.PI/4-F/2)/Math.pow((1-ce)/(1+ce),Y/2);return F=-E*Math.log(Math.max(be,1e-10)),new V(o.lng*p*E,F)},unproject:function(o){for(var p=180/Math.PI,E=this.R,F=this.R_MINOR/E,O=Math.sqrt(1-F*F),Y=Math.exp(-o.y/E),ce=Math.PI/2-2*Math.atan(Y),be=0,ze=.1,Ze;be<15&&Math.abs(ze)>1e-7;be++)Ze=O*Math.sin(ce),Ze=Math.pow((1-Ze)/(1+Ze),O/2),ze=Math.PI/2-2*Math.atan(Y*Ze)-ce,ce+=ze;return new he(ce*p,o.x*p/E)}},uf={__proto__:null,LonLat:Jo,Mercator:el,SphericalMercator:Ke},Qa=a({},Le,{code:"EPSG:3395",projection:el,transformation:(function(){var o=.5/(Math.PI*el.R);return $e(o,.5,-o,.5)})()}),cf=a({},Le,{code:"EPSG:4326",projection:Jo,transformation:$e(1/180,1,-1/180,.5)}),_m=a({},Re,{projection:Jo,transformation:$e(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,p){var E=p.lng-o.lng,F=p.lat-o.lat;return Math.sqrt(E*E+F*F)},infinite:!0});Re.Earth=Le,Re.EPSG3395=Qa,Re.EPSG3857=Ve,Re.EPSG900913=G,Re.EPSG4326=cf,Re.Simple=_m;var jr=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[d(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[d(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var p=o.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var E=this.getEvents();p.on(E,this),this.once("remove",function(){p.off(E,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Nt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var p=d(o);return this._layers[p]?this:(this._layers[p]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var p=d(o);return this._layers[p]?(this._loaded&&o.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return d(o)in this._layers},eachLayer:function(o,p){for(var E in this._layers)o.call(p,this._layers[E]);return this},_addLayers:function(o){o=o?N(o)?o:[o]:[];for(var p=0,E=o.length;p<E;p++)this.addLayer(o[p])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[d(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var p=d(o);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,p=-1/0,E=this._getZoomSpan();for(var F in this._zoomBoundLayers){var O=this._zoomBoundLayers[F].options;o=O.minZoom===void 0?o:Math.min(o,O.minZoom),p=O.maxZoom===void 0?p:Math.max(p,O.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=o===1/0?void 0:o,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ga=jr.extend({initialize:function(o,p){y(this,p),this._layers={};var E,F;if(o)for(E=0,F=o.length;E<F;E++)this.addLayer(o[E])},addLayer:function(o){var p=this.getLayerId(o);return this._layers[p]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var p=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(o){var p=typeof o=="number"?o:this.getLayerId(o);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var p=Array.prototype.slice.call(arguments,1),E,F;for(E in this._layers)F=this._layers[E],F[o]&&F[o].apply(F,p);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,p){for(var E in this._layers)o.call(p,this._layers[E]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return d(o)}}),ff=function(o,p){return new ga(o,p)},dr=ga.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),ga.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),ga.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new se;for(var p in this._layers){var E=this._layers[p];o.extend(E.getBounds?E.getBounds():E.getLatLng())}return o}}),io=function(o,p){return new dr(o,p)},Ja=j.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){y(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,p){var E=this._getIconUrl(o);if(!E){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var F=this._createImg(E,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(F,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),F},_setIconStyles:function(o,p){var E=this.options,F=E[p+"Size"];typeof F=="number"&&(F=[F,F]);var O=Z(F),Y=Z(p==="shadow"&&E.shadowAnchor||E.iconAnchor||O&&O.divideBy(2,!0));o.className="leaflet-marker-"+p+" "+(E.className||""),Y&&(o.style.marginLeft=-Y.x+"px",o.style.marginTop=-Y.y+"px"),O&&(o.style.width=O.x+"px",o.style.height=O.y+"px")},_createImg:function(o,p){return p=p||document.createElement("img"),p.src=o,p},_getIconUrl:function(o){return ut.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function tl(o){return new Ja(o)}var es=Ja.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof es.imagePath!="string"&&(es.imagePath=this._detectIconPath()),(this.options.imagePath||es.imagePath)+Ja.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var p=function(E,F,O){var Y=F.exec(E);return Y&&Y[O]};return o=p(o,/^url\((['"])?(.+)\1\)$/,2),o&&p(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Rt("div","leaflet-default-icon-path",document.body),p=la(o,"background-image")||la(o,"backgroundImage");if(document.body.removeChild(o),p=this._stripUrl(p),p)return p;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),Mu=Rr.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Pi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var p=this._marker,E=p._map,F=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,Y=ji(p._icon),ce=E.getPixelBounds(),be=E.getPixelOrigin(),ze=ee(ce.min._subtract(be).add(O),ce.max._subtract(be).subtract(O));if(!ze.contains(Y)){var Ze=Z((Math.max(ze.max.x,Y.x)-ze.max.x)/(ce.max.x-ze.max.x)-(Math.min(ze.min.x,Y.x)-ze.min.x)/(ce.min.x-ze.min.x),(Math.max(ze.max.y,Y.y)-ze.max.y)/(ce.max.y-ze.max.y)-(Math.min(ze.min.y,Y.y)-ze.min.y)/(ce.min.y-ze.min.y)).multiplyBy(F);E.panBy(Ze,{animate:!1}),this._draggable._newPos._add(Ze),this._draggable._startPos._add(Ze),un(p._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=U(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,o)))},_onDrag:function(o){var p=this._marker,E=p._shadow,F=ji(p._icon),O=p._map.layerPointToLatLng(F);E&&un(E,F),p._latlng=O,o.latlng=O,o.oldLatLng=this._oldLatLng,p.fire("move",o).fire("drag",o)},_onDragEnd:function(o){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),ts=jr.extend({options:{icon:new es,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,p){y(this,p),this._latlng=ge(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var p=this._latlng;return this._latlng=ge(o),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=o.icon.createIcon(this._icon),F=!1;E!==this._icon&&(this._icon&&this._removeIcon(),F=!0,o.title&&(E.title=o.title),E.tagName==="IMG"&&(E.alt=o.alt||"")),bt(E,p),o.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(E,"focus",this._panOnFocus,this);var O=o.icon.createShadow(this._shadow),Y=!1;O!==this._shadow&&(this._removeShadow(),Y=!0),O&&(bt(O,p),O.alt=""),this._shadow=O,o.opacity<1&&this._updateOpacity(),F&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&Y&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),Wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Wt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&un(this._icon,o),this._shadow&&un(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var p=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mu)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mu(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&rr(this._icon,o),this._shadow&&rr(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var p=this.options.icon.options,E=p.iconSize?Z(p.iconSize):Z(0,0),F=p.iconAnchor?Z(p.iconAnchor):Z(0,0);o.panInside(this._latlng,{paddingTopLeft:F,paddingBottomRight:E.subtract(F)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ku(o,p){return new ts(o,p)}var xi=jr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return y(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ao=xi.extend({options:{fill:!0,radius:10},initialize:function(o,p){y(this,p),this._latlng=ge(o),this._radius=this.options.radius},setLatLng:function(o){var p=this._latlng;return this._latlng=ge(o),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var p=o&&o.radius||this._radius;return xi.prototype.setStyle.call(this,o),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,p=this._radiusY||o,E=this._clickTolerance(),F=[o+E,p+E];this._pxBounds=new $(this._point.subtract(F),this._point.add(F))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function hf(o,p){return new ao(o,p)}var Tu=ao.extend({initialize:function(o,p,E){if(typeof p=="number"&&(p=a({},E,{radius:p})),y(this,p),this._latlng=ge(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new se(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:xi.prototype.setStyle,_project:function(){var o=this._latlng.lng,p=this._latlng.lat,E=this._map,F=E.options.crs;if(F.distance===Le.distance){var O=Math.PI/180,Y=this._mRadius/Le.R/O,ce=E.project([p+Y,o]),be=E.project([p-Y,o]),ze=ce.add(be).divideBy(2),Ze=E.unproject(ze).lat,et=Math.acos((Math.cos(Y*O)-Math.sin(p*O)*Math.sin(Ze*O))/(Math.cos(p*O)*Math.cos(Ze*O)))/O;(isNaN(et)||et===0)&&(et=Y/Math.cos(Math.PI/180*p)),this._point=ze.subtract(E.getPixelOrigin()),this._radius=isNaN(et)?0:ze.x-E.project([Ze,o-et]).x,this._radiusY=ze.y-ce.y}else{var nt=F.unproject(F.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(nt).x}this._updateBounds()}});function xm(o,p,E){return new Tu(o,p,E)}var bi=xi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,p){y(this,p),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var p=1/0,E=null,F=pa,O,Y,ce=0,be=this._parts.length;ce<be;ce++)for(var ze=this._parts[ce],Ze=1,et=ze.length;Ze<et;Ze++){O=ze[Ze-1],Y=ze[Ze];var nt=F(o,O,Y,!0);nt<p&&(p=nt,E=F(o,O,Y))}return E&&(E.distance=Math.sqrt(p)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,p){return p=p||this._defaultShape(),o=ge(o),p.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new se,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Rn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var p=[],E=Rn(o),F=0,O=o.length;F<O;F++)E?(p[F]=ge(o[F]),this._bounds.extend(p[F])):p[F]=this._convertLatLngs(o[F]);return p},_project:function(){var o=new $;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),p=new V(o,o);this._rawPxBounds&&(this._pxBounds=new $([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(o,p,E){var F=o[0]instanceof he,O=o.length,Y,ce;if(F){for(ce=[],Y=0;Y<O;Y++)ce[Y]=this._map.latLngToLayerPoint(o[Y]),E.extend(ce[Y]);p.push(ce)}else for(Y=0;Y<O;Y++)this._projectLatlngs(o[Y],p,E)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,E,F,O,Y,ce,be,ze;for(E=0,O=0,Y=this._rings.length;E<Y;E++)for(ze=this._rings[E],F=0,ce=ze.length;F<ce-1;F++)be=sf(ze[F],ze[F+1],o,F,!0),be&&(p[O]=p[O]||[],p[O].push(be[0]),(be[1]!==ze[F+1]||F===ce-2)&&(p[O].push(be[1]),O++))}},_simplifyPoints:function(){for(var o=this._parts,p=this.options.smoothFactor,E=0,F=o.length;E<F;E++)o[E]=rf(o[E],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,p){var E,F,O,Y,ce,be,ze=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(E=0,Y=this._parts.length;E<Y;E++)for(be=this._parts[E],F=0,ce=be.length,O=ce-1;F<ce;O=F++)if(!(!p&&F===0)&&Cu(o,be[O],be[F])<=ze)return!0;return!1}});function bm(o,p){return new bi(o,p)}bi._flat=of;var ns=bi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var p=bi.prototype._convertLatLngs.call(this,o),E=p.length;return E>=2&&p[0]instanceof he&&p[0].equals(p[E-1])&&p.pop(),p},_setLatLngs:function(o){bi.prototype._setLatLngs.call(this,o),Rn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,p=this.options.weight,E=new V(p,p);if(o=new $(o.min.subtract(E),o.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var F=0,O=this._rings.length,Y;F<O;F++)Y=nf(this._rings[F],o,!0),Y.length&&this._parts.push(Y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var p=!1,E,F,O,Y,ce,be,ze,Ze;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(Y=0,ze=this._parts.length;Y<ze;Y++)for(E=this._parts[Y],ce=0,Ze=E.length,be=Ze-1;ce<Ze;be=ce++)F=E[ce],O=E[be],F.y>o.y!=O.y>o.y&&o.x<(O.x-F.x)*(o.y-F.y)/(O.y-F.y)+F.x&&(p=!p);return p||bi.prototype._containsPoint.call(this,o,!0)}});function mr(o,p){return new ns(o,p)}var pr=dr.extend({initialize:function(o,p){y(this,p),this._layers={},o&&this.addData(o)},addData:function(o){var p=N(o)?o:o.features,E,F,O;if(p){for(E=0,F=p.length;E<F;E++)O=p[E],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var Y=this.options;if(Y.filter&&!Y.filter(o))return this;var ce=so(o,Y);return ce?(ce.feature=rs(o),ce.defaultOptions=ce.options,this.resetStyle(ce),Y.onEachFeature&&Y.onEachFeature(o,ce),this.addLayer(ce)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(p){this._setLayerStyle(p,o)},this)},_setLayerStyle:function(o,p){o.setStyle&&(typeof p=="function"&&(p=p(o.feature)),o.setStyle(p))}});function so(o,p){var E=o.type==="Feature"?o.geometry:o,F=E?E.coordinates:null,O=[],Y=p&&p.pointToLayer,ce=p&&p.coordsToLatLng||nl,be,ze,Ze,et;if(!F&&!E)return null;switch(E.type){case"Point":return be=ce(F),zu(Y,o,be,p);case"MultiPoint":for(Ze=0,et=F.length;Ze<et;Ze++)be=ce(F[Ze]),O.push(zu(Y,o,be,p));return new dr(O);case"LineString":case"MultiLineString":return ze=oo(F,E.type==="LineString"?0:1,ce),new bi(ze,p);case"Polygon":case"MultiPolygon":return ze=oo(F,E.type==="Polygon"?1:2,ce),new ns(ze,p);case"GeometryCollection":for(Ze=0,et=E.geometries.length;Ze<et;Ze++){var nt=so({geometry:E.geometries[Ze],type:"Feature",properties:o.properties},p);nt&&O.push(nt)}return new dr(O);case"FeatureCollection":for(Ze=0,et=E.features.length;Ze<et;Ze++){var lt=so(E.features[Ze],p);lt&&O.push(lt)}return new dr(O);default:throw new Error("Invalid GeoJSON object.")}}function zu(o,p,E,F){return o?o(p,E):new ts(E,F&&F.markersInheritOptions&&F)}function nl(o){return new he(o[1],o[0],o[2])}function oo(o,p,E){for(var F=[],O=0,Y=o.length,ce;O<Y;O++)ce=p?oo(o[O],p-1,E):(E||nl)(o[O]),F.push(ce);return F}function lo(o,p){return o=ge(o),o.alt!==void 0?[_(o.lng,p),_(o.lat,p),_(o.alt,p)]:[_(o.lng,p),_(o.lat,p)]}function rl(o,p,E,F){for(var O=[],Y=0,ce=o.length;Y<ce;Y++)O.push(p?rl(o[Y],Rn(o[Y])?0:p-1,E,F):lo(o[Y],F));return!p&&E&&O.length>0&&O.push(O[0].slice()),O}function Br(o,p){return o.feature?a({},o.feature,{geometry:p}):rs(p)}function rs(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var va={toGeoJSON:function(o){return Br(this,{type:"Point",coordinates:lo(this.getLatLng(),o)})}};ts.include(va),Tu.include(va),ao.include(va),bi.include({toGeoJSON:function(o){var p=!Rn(this._latlngs),E=rl(this._latlngs,p?1:0,!1,o);return Br(this,{type:(p?"Multi":"")+"LineString",coordinates:E})}}),ns.include({toGeoJSON:function(o){var p=!Rn(this._latlngs),E=p&&!Rn(this._latlngs[0]),F=rl(this._latlngs,E?2:p?1:0,!0,o);return p||(F=[F]),Br(this,{type:(E?"Multi":"")+"Polygon",coordinates:F})}}),ga.include({toMultiPoint:function(o){var p=[];return this.eachLayer(function(E){p.push(E.toGeoJSON(o).geometry.coordinates)}),Br(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(o){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(o);var E=p==="GeometryCollection",F=[];return this.eachLayer(function(O){if(O.toGeoJSON){var Y=O.toGeoJSON(o);if(E)F.push(Y.geometry);else{var ce=rs(Y);ce.type==="FeatureCollection"?F.push.apply(F,ce.features):F.push(ce)}}}),E?Br(this,{geometries:F,type:"GeometryCollection"}):{type:"FeatureCollection",features:F}}});function il(o,p){return new pr(o,p)}var df=il,ii=jr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,p,E){this._url=o,this._bounds=oe(p),y(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&ua(this._image),this},bringToBack:function(){return this._map&&Ua(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=oe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",p=this._image=o?this._url:Rt("img");if(bt(p,"leaflet-image-layer"),this._zoomAnimated&&bt(p,"leaflet-zoom-animated"),this.options.className&&bt(p,this.options.className),p.onselectstart=g,p.onmousemove=g,p.onload=c(this.fire,this,"load"),p.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(o){var p=this._map.getZoomScale(o.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;wr(this._image,E,p)},_reset:function(){var o=this._image,p=new $(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=p.getSize();un(o,p.min),o.style.width=E.x+"px",o.style.height=E.y+"px"},_updateOpacity:function(){rr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),is=function(o,p,E){return new ii(o,p,E)},al=ii.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",p=this._image=o?this._url:Rt("video");if(bt(p,"leaflet-image-layer"),this._zoomAnimated&&bt(p,"leaflet-zoom-animated"),this.options.className&&bt(p,this.options.className),p.onselectstart=g,p.onmousemove=g,p.onloadeddata=c(this.fire,this,"load"),o){for(var E=p.getElementsByTagName("source"),F=[],O=0;O<E.length;O++)F.push(E[O].src);this._url=E.length>0?F:[p.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Y=0;Y<this._url.length;Y++){var ce=Rt("source");ce.src=this._url[Y],p.appendChild(ce)}}});function mf(o,p,E){return new al(o,p,E)}var Oi=ii.extend({_initImage:function(){var o=this._image=this._url;bt(o,"leaflet-image-layer"),this._zoomAnimated&&bt(o,"leaflet-zoom-animated"),this.options.className&&bt(o,this.options.className),o.onselectstart=g,o.onmousemove=g}});function pf(o,p,E){return new Oi(o,p,E)}var Pr=jr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,p){o&&(o instanceof he||N(o))?(this._latlng=ge(o),y(this,p)):(y(this,o),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&rr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&rr(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(rr(this._container,0),this._removeTimeout=setTimeout(c(Wt,void 0,this._container),200)):Wt(this._container),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ge(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ua(this._container),this},bringToBack:function(){return this._map&&Ua(this._container),this},_prepareOpen:function(o){var p=this._source;if(!p._map)return!1;if(p instanceof dr){p=null;var E=this._source._layers;for(var F in E)if(E[F]._map){p=E[F];break}if(!p)return!1;this._source=p}if(!o)if(p.getCenter)o=p.getCenter();else if(p.getLatLng)o=p.getLatLng();else if(p.getBounds)o=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")o.innerHTML=p;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),p=Z(this.options.offset),E=this._getAnchor();this._zoomAnimated?un(this._container,o.add(E)):p=p.add(o).add(E);var F=this._containerBottom=-p.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=F+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});Nt.include({_initOverlay:function(o,p,E,F){var O=p;return O instanceof o||(O=new o(F).setContent(p)),E&&O.setLatLng(E),O}}),jr.include({_initOverlay:function(o,p,E,F){var O=E;return O instanceof o?(y(O,F),O._source=this):(O=p&&!F?p:new o(F,this),O.setContent(E)),O}});var uo=Pr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Pr.prototype.openOn.call(this,o)},onAdd:function(o){Pr.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xi||this._source.on("preclick",_i))},onRemove:function(o){Pr.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xi||this._source.off("preclick",_i))},getEvents:function(){var o=Pr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",p=this._container=Rt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=Rt("div",o+"-content-wrapper",p);if(this._contentNode=Rt("div",o+"-content",E),Xa(p),Ya(this._contentNode),_t(p,"contextmenu",_i),this._tipContainer=Rt("div",o+"-tip-container",p),this._tip=Rt("div",o+"-tip",this._tipContainer),this.options.closeButton){var F=this._closeButton=Rt("a",o+"-close-button",p);F.setAttribute("role","button"),F.setAttribute("aria-label","Close popup"),F.href="#close",F.innerHTML='<span aria-hidden="true">&#215;</span>',_t(F,"click",function(O){dn(O),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,p=o.style;p.width="",p.whiteSpace="nowrap";var E=o.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),p.width=E+1+"px",p.whiteSpace="",p.height="";var F=o.offsetHeight,O=this.options.maxHeight,Y="leaflet-popup-scrolled";O&&F>O?(p.height=O+"px",bt(o,Y)):Qt(o,Y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var p=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),E=this._getAnchor();un(this._container,p.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,p=parseInt(la(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+p,F=this._containerWidth,O=new V(this._containerLeft,-E-this._containerBottom);O._add(ji(this._container));var Y=o.layerPointToContainerPoint(O),ce=Z(this.options.autoPanPadding),be=Z(this.options.autoPanPaddingTopLeft||ce),ze=Z(this.options.autoPanPaddingBottomRight||ce),Ze=o.getSize(),et=0,nt=0;Y.x+F+ze.x>Ze.x&&(et=Y.x+F-Ze.x+ze.x),Y.x-et-be.x<0&&(et=Y.x-be.x),Y.y+E+ze.y>Ze.y&&(nt=Y.y+E-Ze.y+ze.y),Y.y-nt-be.y<0&&(nt=Y.y-be.y),(et||nt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([et,nt]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),wm=function(o,p){return new uo(o,p)};Nt.mergeOptions({closePopupOnClick:!0}),Nt.include({openPopup:function(o,p,E){return this._initOverlay(uo,o,p,E).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),jr.include({bindPopup:function(o,p){return this._popup=this._initOverlay(uo,this._popup,o,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof dr||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){ri(o);var p=o.layer||o.target;if(this._popup._source===p&&!(p instanceof xi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=p,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var sl=Pr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Pr.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Pr.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Pr.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",p=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rt("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var p,E,F=this._map,O=this._container,Y=F.latLngToContainerPoint(F.getCenter()),ce=F.layerPointToContainerPoint(o),be=this.options.direction,ze=O.offsetWidth,Ze=O.offsetHeight,et=Z(this.options.offset),nt=this._getAnchor();be==="top"?(p=ze/2,E=Ze):be==="bottom"?(p=ze/2,E=0):be==="center"?(p=ze/2,E=Ze/2):be==="right"?(p=0,E=Ze/2):be==="left"?(p=ze,E=Ze/2):ce.x<Y.x?(be="right",p=0,E=Ze/2):(be="left",p=ze+(et.x+nt.x)*2,E=Ze/2),o=o.subtract(Z(p,E,!0)).add(et).add(nt),Qt(O,"leaflet-tooltip-right"),Qt(O,"leaflet-tooltip-left"),Qt(O,"leaflet-tooltip-top"),Qt(O,"leaflet-tooltip-bottom"),bt(O,"leaflet-tooltip-"+be),un(O,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&rr(this._container,o)},_animateZoom:function(o){var p=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(p)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Dm=function(o,p){return new sl(o,p)};Nt.include({openTooltip:function(o,p,E){return this._initOverlay(sl,o,p,E).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),jr.include({bindTooltip:function(o,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(sl,this._tooltip,o,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var p=o?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[p](E),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof dr||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var p=typeof o.getElement=="function"&&o.getElement();p&&(_t(p,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),_t(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var p=typeof o.getElement=="function"&&o.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var p=o.latlng,E,F;this._tooltip.options.sticky&&o.originalEvent&&(E=this._map.mouseEventToContainerPoint(o.originalEvent),F=this._map.containerPointToLayerPoint(E),p=this._map.layerPointToLatLng(F)),this._tooltip.setLatLng(p)}});var Lu=Ja.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var p=o&&o.tagName==="DIV"?o:document.createElement("div"),E=this.options;if(E.html instanceof Element?(qn(p),p.appendChild(E.html)):p.innerHTML=E.html!==!1?E.html:"",E.bgPos){var F=Z(E.bgPos);p.style.backgroundPosition=-F.x+"px "+-F.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function gf(o){return new Lu(o)}Ja.Default=es;var ya=jr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){y(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Wt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ua(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ua(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof V?o:new V(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var p=this.getPane().children,E=-o(-1/0,1/0),F=0,O=p.length,Y;F<O;F++)Y=p[F].style.zIndex,p[F]!==this._container&&Y&&(E=o(E,+Y));isFinite(E)&&(this.options.zIndex=E+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ut.ielt9){rr(this._container,this.options.opacity);var o=+new Date,p=!1,E=!1;for(var F in this._tiles){var O=this._tiles[F];if(!(!O.current||!O.loaded)){var Y=Math.min(1,(o-O.loaded)/200);rr(O.el,Y),Y<1?p=!0:(O.active?E=!0:this._onOpaqueTile(O),O.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),p&&(I(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,p=this.options.maxZoom;if(o!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===o?(this._levels[E].el.style.zIndex=p-Math.abs(o-E),this._onUpdateLevel(E)):(Wt(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var F=this._levels[o],O=this._map;return F||(F=this._levels[o]={},F.el=Rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),F.el.style.zIndex=p,F.origin=O.project(O.unproject(O.getPixelOrigin()),o).round(),F.zoom=o,this._setZoomTransform(F,O.getCenter(),O.getZoom()),g(F.el.offsetWidth),this._onCreateLevel(F)),this._level=F,F}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var o,p,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)p=this._tiles[o],p.retain=p.current;for(o in this._tiles)if(p=this._tiles[o],p.current&&!p.active){var F=p.coords;this._retainParent(F.x,F.y,F.z,F.z-5)||this._retainChildren(F.x,F.y,F.z,F.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var p in this._tiles)this._tiles[p].coords.z===o&&this._removeTile(p)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Wt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,p,E,F){var O=Math.floor(o/2),Y=Math.floor(p/2),ce=E-1,be=new V(+O,+Y);be.z=+ce;var ze=this._tileCoordsToKey(be),Ze=this._tiles[ze];return Ze&&Ze.active?(Ze.retain=!0,!0):(Ze&&Ze.loaded&&(Ze.retain=!0),ce>F?this._retainParent(O,Y,ce,F):!1)},_retainChildren:function(o,p,E,F){for(var O=2*o;O<2*o+2;O++)for(var Y=2*p;Y<2*p+2;Y++){var ce=new V(O,Y);ce.z=E+1;var be=this._tileCoordsToKey(ce),ze=this._tiles[be];if(ze&&ze.active){ze.retain=!0;continue}else ze&&ze.loaded&&(ze.retain=!0);E+1<F&&this._retainChildren(O,Y,E+1,F)}},_resetView:function(o){var p=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var p=this.options;return p.minNativeZoom!==void 0&&o<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<o?p.maxNativeZoom:o},_setView:function(o,p,E,F){var O=Math.round(p);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var Y=this.options.updateWhenZooming&&O!==this._tileZoom;(!F||Y)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(o),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(o,p)},_setZoomTransforms:function(o,p){for(var E in this._levels)this._setZoomTransform(this._levels[E],o,p)},_setZoomTransform:function(o,p,E){var F=this._map.getZoomScale(E,o.zoom),O=o.origin.multiplyBy(F).subtract(this._map._getNewPixelOrigin(p,E)).round();ut.any3d?wr(o.el,O,F):un(o.el,O)},_resetGrid:function(){var o=this._map,p=o.options.crs,E=this._tileSize=this.getTileSize(),F=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,p.wrapLng[0]],F).x/E.x),Math.ceil(o.project([0,p.wrapLng[1]],F).x/E.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([p.wrapLat[0],0],F).y/E.x),Math.ceil(o.project([p.wrapLat[1],0],F).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var p=this._map,E=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),F=p.getZoomScale(E,this._tileZoom),O=p.project(o,this._tileZoom).floor(),Y=p.getSize().divideBy(F*2);return new $(O.subtract(Y),O.add(Y))},_update:function(o){var p=this._map;if(p){var E=this._clampZoom(p.getZoom());if(o===void 0&&(o=p.getCenter()),this._tileZoom!==void 0){var F=this._getTiledPixelBounds(o),O=this._pxBoundsToTileRange(F),Y=O.getCenter(),ce=[],be=this.options.keepBuffer,ze=new $(O.getBottomLeft().subtract([be,-be]),O.getTopRight().add([be,-be]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ze in this._tiles){var et=this._tiles[Ze].coords;(et.z!==this._tileZoom||!ze.contains(new V(et.x,et.y)))&&(this._tiles[Ze].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(o,E);return}for(var nt=O.min.y;nt<=O.max.y;nt++)for(var lt=O.min.x;lt<=O.max.x;lt++){var yt=new V(lt,nt);if(yt.z=this._tileZoom,!!this._isValidTile(yt)){var Jt=this._tiles[this._tileCoordsToKey(yt)];Jt?Jt.current=!0:ce.push(yt)}}if(ce.sort(function(jn,Dr){return jn.distanceTo(Y)-Dr.distanceTo(Y)}),ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var cn=document.createDocumentFragment();for(lt=0;lt<ce.length;lt++)this._addTile(ce[lt],cn);this._level.el.appendChild(cn)}}}},_isValidTile:function(o){var p=this._map.options.crs;if(!p.infinite){var E=this._globalTileRange;if(!p.wrapLng&&(o.x<E.min.x||o.x>E.max.x)||!p.wrapLat&&(o.y<E.min.y||o.y>E.max.y))return!1}if(!this.options.bounds)return!0;var F=this._tileCoordsToBounds(o);return oe(this.options.bounds).overlaps(F)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var p=this._map,E=this.getTileSize(),F=o.scaleBy(E),O=F.add(E),Y=p.unproject(F,o.z),ce=p.unproject(O,o.z);return[Y,ce]},_tileCoordsToBounds:function(o){var p=this._tileCoordsToNwSe(o),E=new se(p[0],p[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var p=o.split(":"),E=new V(+p[0],+p[1]);return E.z=+p[2],E},_removeTile:function(o){var p=this._tiles[o];p&&(Wt(p.el),delete this._tiles[o],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){bt(o,"leaflet-tile");var p=this.getTileSize();o.style.width=p.x+"px",o.style.height=p.y+"px",o.onselectstart=g,o.onmousemove=g,ut.ielt9&&this.options.opacity<1&&rr(o,this.options.opacity)},_addTile:function(o,p){var E=this._getTilePos(o),F=this._tileCoordsToKey(o),O=this.createTile(this._wrapCoords(o),c(this._tileReady,this,o));this._initTile(O),this.createTile.length<2&&U(c(this._tileReady,this,o,null,O)),un(O,E),this._tiles[F]={el:O,coords:o,current:!0},p.appendChild(O),this.fire("tileloadstart",{tile:O,coords:o})},_tileReady:function(o,p,E){p&&this.fire("tileerror",{error:p,tile:E,coords:o});var F=this._tileCoordsToKey(o);E=this._tiles[F],E&&(E.loaded=+new Date,this._map._fadeAnimated?(rr(E.el,0),I(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),p||(bt(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ut.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var p=new V(this._wrapX?m(o.x,this._wrapX):o.x,this._wrapY?m(o.y,this._wrapY):o.y);return p.z=o.z,p},_pxBoundsToTileRange:function(o){var p=this.getTileSize();return new $(o.min.unscaleBy(p).floor(),o.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Or(o){return new ya(o)}var _a=ya.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,p){this._url=o,p=y(this,p),p.detectRetina&&ut.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,p){return this._url===o&&p===void 0&&(p=!0),this._url=o,p||this.redraw(),this},createTile:function(o,p){var E=document.createElement("img");return _t(E,"load",c(this._tileOnLoad,this,p,E)),_t(E,"error",c(this._tileOnError,this,p,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(o),E},getTileUrl:function(o){var p={r:ut.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-o.y;this.options.tms&&(p.y=E),p["-y"]=E}return A(this._url,a(p,this.options))},_tileOnLoad:function(o,p){ut.ielt9?setTimeout(c(o,this,null,p),0):o(null,p)},_tileOnError:function(o,p,E){var F=this.options.errorTileUrl;F&&p.getAttribute("src")!==F&&(p.src=F),o(E,p)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,p=this.options.maxZoom,E=this.options.zoomReverse,F=this.options.zoomOffset;return E&&(o=p-o),o+F},_getSubdomain:function(o){var p=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var o,p;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(p=this._tiles[o].el,p.onload=g,p.onerror=g,!p.complete)){p.src=k;var E=this._tiles[o].coords;Wt(p),delete this._tiles[o],this.fire("tileabort",{tile:p,coords:E})}},_removeTile:function(o){var p=this._tiles[o];if(p)return p.el.setAttribute("src",k),ya.prototype._removeTile.call(this,o)},_tileReady:function(o,p,E){if(!(!this._map||E&&E.getAttribute("src")===k))return ya.prototype._tileReady.call(this,o,p,E)}});function gr(o,p){return new _a(o,p)}var vr=_a.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,p){this._url=o;var E=a({},this.defaultWmsParams);for(var F in p)F in this.options||(E[F]=p[F]);p=y(this,p);var O=p.detectRetina&&ut.retina?2:1,Y=this.getTileSize();E.width=Y.x*O,E.height=Y.y*O,this.wmsParams=E},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,_a.prototype.onAdd.call(this,o)},getTileUrl:function(o){var p=this._tileCoordsToNwSe(o),E=this._crs,F=ee(E.project(p[0]),E.project(p[1])),O=F.min,Y=F.max,ce=(this._wmsVersion>=1.3&&this._crs===cf?[O.y,O.x,Y.y,Y.x]:[O.x,O.y,Y.x,Y.y]).join(","),be=_a.prototype.getTileUrl.call(this,o);return be+S(this.wmsParams,be,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ce},setParams:function(o,p){return a(this.wmsParams,o),p||this.redraw(),this}});function as(o,p){return new vr(o,p)}_a.WMS=vr,gr.wms=as;var Ir=jr.extend({options:{padding:.1},initialize:function(o){y(this,o),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,p){var E=this._map.getZoomScale(p,this._zoom),F=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,p),Y=F.multiplyBy(-E).add(O).subtract(this._map._getNewPixelOrigin(o,p));ut.any3d?wr(this._container,Y,E):un(this._container,Y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,p=this._map.getSize(),E=this._map.containerPointToLayerPoint(p.multiplyBy(-o)).round();this._bounds=new $(E,E.add(p.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),co=Ir.extend({options:{tolerance:0},getEvents:function(){var o=Ir.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ir.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");_t(o,"mousemove",this._onMouseMove,this),_t(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_t(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,Wt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var p in this._layers)o=this._layers[p],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ir.prototype._update.call(this);var o=this._bounds,p=this._container,E=o.getSize(),F=ut.retina?2:1;un(p,o.min),p.width=F*E.x,p.height=F*E.y,p.style.width=E.x+"px",p.style.height=E.y+"px",ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Ir.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[d(o)]=o;var p=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var p=o._order,E=p.next,F=p.prev;E?E.prev=F:this._drawLast=F,F?F.next=E:this._drawFirst=E,delete o._order,delete this._layers[d(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var p=o.options.dashArray.split(/[, ]+/),E=[],F,O;for(O=0;O<p.length;O++){if(F=Number(p[O]),isNaN(F))return;E.push(F)}o.options._dashArray=E}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var p=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $,this._redrawBounds.extend(o._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(o._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var p=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,p=this._redrawBounds;if(this._ctx.save(),p){var E=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var F=this._drawFirst;F;F=F.next)o=F.layer,(!p||o._pxBounds&&o._pxBounds.intersects(p))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,p){if(this._drawing){var E,F,O,Y,ce=o._parts,be=ce.length,ze=this._ctx;if(be){for(ze.beginPath(),E=0;E<be;E++){for(F=0,O=ce[E].length;F<O;F++)Y=ce[E][F],ze[F?"lineTo":"moveTo"](Y.x,Y.y);p&&ze.closePath()}this._fillStroke(ze,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var p=o._point,E=this._ctx,F=Math.max(Math.round(o._radius),1),O=(Math.max(Math.round(o._radiusY),1)||F)/F;O!==1&&(E.save(),E.scale(1,O)),E.beginPath(),E.arc(p.x,p.y/O,F,0,Math.PI*2,!1),O!==1&&E.restore(),this._fillStroke(E,o)}},_fillStroke:function(o,p){var E=p.options;E.fill&&(o.globalAlpha=E.fillOpacity,o.fillStyle=E.fillColor||E.color,o.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(o.setLineDash&&o.setLineDash(p.options&&p.options._dashArray||[]),o.globalAlpha=E.opacity,o.lineWidth=E.weight,o.strokeStyle=E.color,o.lineCap=E.lineCap,o.lineJoin=E.lineJoin,o.stroke())},_onClick:function(o){for(var p=this._map.mouseEventToLayerPoint(o),E,F,O=this._drawFirst;O;O=O.next)E=O.layer,E.options.interactive&&E._containsPoint(p)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(E))&&(F=E);this._fireEvent(F?[F]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,p)}},_handleMouseOut:function(o){var p=this._hoveredLayer;p&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([p],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,p){if(!this._mouseHoverThrottled){for(var E,F,O=this._drawFirst;O;O=O.next)E=O.layer,E.options.interactive&&E._containsPoint(p)&&(F=E);F!==this._hoveredLayer&&(this._handleMouseOut(o),F&&(bt(this._container,"leaflet-interactive"),this._fireEvent([F],o,"mouseover"),this._hoveredLayer=F)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,p,E){this._map._fireDOMEvent(p,E||p.type,o)},_bringToFront:function(o){var p=o._order;if(p){var E=p.next,F=p.prev;if(E)E.prev=F;else return;F?F.next=E:E&&(this._drawFirst=E),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(o)}},_bringToBack:function(o){var p=o._order;if(p){var E=p.next,F=p.prev;if(F)F.next=E;else return;E?E.prev=F:F&&(this._drawLast=F),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(o)}}});function fo(o){return ut.canvas?new co(o):null}var xa=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ss={_initContainer:function(){this._container=Rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ir.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var p=o._container=xa("shape");bt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",o._path=xa("path"),p.appendChild(o._path),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){var p=o._container;this._container.appendChild(p),o.options.interactive&&o.addInteractiveTarget(p)},_removePath:function(o){var p=o._container;Wt(p),o.removeInteractiveTarget(p),delete this._layers[d(o)]},_updateStyle:function(o){var p=o._stroke,E=o._fill,F=o.options,O=o._container;O.stroked=!!F.stroke,O.filled=!!F.fill,F.stroke?(p||(p=o._stroke=xa("stroke")),O.appendChild(p),p.weight=F.weight+"px",p.color=F.color,p.opacity=F.opacity,F.dashArray?p.dashStyle=N(F.dashArray)?F.dashArray.join(" "):F.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=F.lineCap.replace("butt","flat"),p.joinstyle=F.lineJoin):p&&(O.removeChild(p),o._stroke=null),F.fill?(E||(E=o._fill=xa("fill")),O.appendChild(E),E.color=F.fillColor||F.color,E.opacity=F.fillOpacity):E&&(O.removeChild(E),o._fill=null)},_updateCircle:function(o){var p=o._point.round(),E=Math.round(o._radius),F=Math.round(o._radiusY||E);this._setPath(o,o._empty()?"M0 0":"AL "+p.x+","+p.y+" "+E+","+F+" 0,"+65535*360)},_setPath:function(o,p){o._path.v=p},_bringToFront:function(o){ua(o._container)},_bringToBack:function(o){Ua(o._container)}},ho=ut.vml?xa:ke,Ii=Ir.extend({_initContainer:function(){this._container=ho("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ho("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Wt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ir.prototype._update.call(this);var o=this._bounds,p=o.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,E.setAttribute("width",p.x),E.setAttribute("height",p.y)),un(E,o.min),E.setAttribute("viewBox",[o.min.x,o.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(o){var p=o._path=ho("path");o.options.className&&bt(p,o.options.className),o.options.interactive&&bt(p,"leaflet-interactive"),this._updateStyle(o),this._layers[d(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Wt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[d(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var p=o._path,E=o.options;p&&(E.stroke?(p.setAttribute("stroke",E.color),p.setAttribute("stroke-opacity",E.opacity),p.setAttribute("stroke-width",E.weight),p.setAttribute("stroke-linecap",E.lineCap),p.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?p.setAttribute("stroke-dasharray",E.dashArray):p.removeAttribute("stroke-dasharray"),E.dashOffset?p.setAttribute("stroke-dashoffset",E.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),E.fill?(p.setAttribute("fill",E.fillColor||E.color),p.setAttribute("fill-opacity",E.fillOpacity),p.setAttribute("fill-rule",E.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(o,p){this._setPath(o,Se(o._parts,p))},_updateCircle:function(o){var p=o._point,E=Math.max(Math.round(o._radius),1),F=Math.max(Math.round(o._radiusY),1)||E,O="a"+E+","+F+" 0 1,0 ",Y=o._empty()?"M0 0":"M"+(p.x-E)+","+p.y+O+E*2+",0 "+O+-E*2+",0 ";this._setPath(o,Y)},_setPath:function(o,p){o._path.setAttribute("d",p)},_bringToFront:function(o){ua(o._path)},_bringToBack:function(o){Ua(o._path)}});ut.vml&&Ii.include(ss);function ba(o){return ut.svg||ut.vml?new Ii(o):null}Nt.include({getRenderer:function(o){var p=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var p=this._paneRenderers[o];return p===void 0&&(p=this._createRenderer({pane:o}),this._paneRenderers[o]=p),p},_createRenderer:function(o){return this.options.preferCanvas&&fo(o)||ba(o)}});var vf=ns.extend({initialize:function(o,p){ns.prototype.initialize.call(this,this._boundsToLatLngs(o),p)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=oe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function yr(o,p){return new vf(o,p)}Ii.create=ho,Ii.pointsToPath=Se,pr.geometryToLayer=so,pr.coordsToLatLng=nl,pr.coordsToLatLngs=oo,pr.latLngToCoords=lo,pr.latLngsToCoords=rl,pr.getFeature=Br,pr.asFeature=rs,Nt.mergeOptions({boxZoom:!0});var ol=Rr.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ei(),Js(),this._startPoint=this._map.mouseEventToContainerPoint(o),_t(document,{contextmenu:ri,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Rt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var p=new $(this._point,this._startPoint),E=p.getSize();un(this._box,p.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(Wt(this._box),Qt(this._container,"leaflet-crosshair")),Qs(),xu(),Bt(document,{contextmenu:ri,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var p=new se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nt.addInitHook("addHandler","boxZoom",ol),Nt.mergeOptions({doubleClickZoom:!0});var ai=Rr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var p=this._map,E=p.getZoom(),F=p.options.zoomDelta,O=o.originalEvent.shiftKey?E-F:E+F;p.options.doubleClickZoom==="center"?p.setZoom(O):p.setZoomAround(o.containerPoint,O)}});Nt.addInitHook("addHandler","doubleClickZoom",ai),Nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fu=Rr.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Pi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qt(this._map._container,"leaflet-grab"),Qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=oe(this._map.options.maxBounds);this._offsetLimit=ee(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var p=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(p),this._prunePositions(p)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,p){return o-(o-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;o.x<p.min.x&&(o.x=this._viscousLimit(o.x,p.min.x)),o.y<p.min.y&&(o.y=this._viscousLimit(o.y,p.min.y)),o.x>p.max.x&&(o.x=this._viscousLimit(o.x,p.max.x)),o.y>p.max.y&&(o.y=this._viscousLimit(o.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,p=Math.round(o/2),E=this._initialWorldOffset,F=this._draggable._newPos.x,O=(F-p+E)%o+p-E,Y=(F+p+E)%o-p-E,ce=Math.abs(O+E)<Math.abs(Y+E)?O:Y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ce},_onDragEnd:function(o){var p=this._map,E=p.options,F=!E.inertia||o.noInertia||this._times.length<2;if(p.fire("dragend",o),F)p.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),Y=(this._lastTime-this._times[0])/1e3,ce=E.easeLinearity,be=O.multiplyBy(ce/Y),ze=be.distanceTo([0,0]),Ze=Math.min(E.inertiaMaxSpeed,ze),et=be.multiplyBy(Ze/ze),nt=Ze/(E.inertiaDeceleration*ce),lt=et.multiplyBy(-nt/2).round();!lt.x&&!lt.y?p.fire("moveend"):(lt=p._limitOffset(lt,p.options.maxBounds),U(function(){p.panBy(lt,{duration:nt,easeLinearity:ce,noMoveStart:!0,animate:!0})}))}}});Nt.addInitHook("addHandler","dragging",Fu),Nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mo=Rr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),_t(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,p=document.documentElement,E=o.scrollTop||p.scrollTop,F=o.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(F,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var p=this._panKeys={},E=this.keyCodes,F,O;for(F=0,O=E.left.length;F<O;F++)p[E.left[F]]=[-1*o,0];for(F=0,O=E.right.length;F<O;F++)p[E.right[F]]=[o,0];for(F=0,O=E.down.length;F<O;F++)p[E.down[F]]=[0,o];for(F=0,O=E.up.length;F<O;F++)p[E.up[F]]=[0,-1*o]},_setZoomDelta:function(o){var p=this._zoomKeys={},E=this.keyCodes,F,O;for(F=0,O=E.zoomIn.length;F<O;F++)p[E.zoomIn[F]]=o;for(F=0,O=E.zoomOut.length;F<O;F++)p[E.zoomOut[F]]=-o},_addHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var p=o.keyCode,E=this._map,F;if(p in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(F=this._panKeys[p],o.shiftKey&&(F=Z(F).multiplyBy(3)),E.options.maxBounds&&(F=E._limitOffset(Z(F),E.options.maxBounds)),E.options.worldCopyJump){var O=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(F)));E.panTo(O)}else E.panBy(F)}else if(p in this._zoomKeys)E.setZoom(E.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;ri(o)}}});Nt.addInitHook("addHandler","keyboard",mo),Nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Hi=Rr.extend({addHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var p=no(o),E=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var F=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),F),ri(o)},_performZoom:function(){var o=this._map,p=o.getZoom(),E=this._map.options.zoomSnap||0;o._stop();var F=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(F))))/Math.LN2,Y=E?Math.ceil(O/E)*E:O,ce=o._limitZoom(p+(this._delta>0?Y:-Y))-p;this._delta=0,this._startTime=null,ce&&(o.options.scrollWheelZoom==="center"?o.setZoom(p+ce):o.setZoomAround(this._lastMousePos,p+ce))}});Nt.addInitHook("addHandler","scrollWheelZoom",Hi);var Ru=600;Nt.mergeOptions({tapHold:ut.touchNative&&ut.safari&&ut.mobile,tapTolerance:15});var ll=Rr.extend({addHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var p=o.touches[0];this._startPos=this._newPos=new V(p.clientX,p.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(_t(document,"touchend",dn),_t(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),Ru),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Bt(document,"touchend",dn),Bt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(o){var p=o.touches[0];this._newPos=new V(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,p){var E=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});E._simulated=!0,p.target.dispatchEvent(E)}});Nt.addInitHook("addHandler","tapHold",ll),Nt.mergeOptions({touchZoom:ut.touch,bounceAtZoomLimits:!0});var wa=Rr.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var p=this._map;if(!(!o.touches||o.touches.length!==2||p._animatingZoom||this._zooming)){var E=p.mouseEventToContainerPoint(o.touches[0]),F=p.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(E.add(F)._divideBy(2))),this._startDist=E.distanceTo(F),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),dn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var p=this._map,E=p.mouseEventToContainerPoint(o.touches[0]),F=p.mouseEventToContainerPoint(o.touches[1]),O=E.distanceTo(F)/this._startDist;if(this._zoom=p.getScaleZoom(O,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&O<1||this._zoom>p.getMaxZoom()&&O>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var Y=E._add(F)._divideBy(2)._subtract(this._centerPoint);if(O===1&&Y.x===0&&Y.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Y),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var ce=c(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(ce,this,!0),dn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nt.addInitHook("addHandler","touchZoom",wa),Nt.BoxZoom=ol,Nt.DoubleClickZoom=ai,Nt.Drag=Fu,Nt.Keyboard=mo,Nt.ScrollWheelZoom=Hi,Nt.TapHold=ll,Nt.TouchZoom=wa,n.Bounds=$,n.Browser=ut,n.CRS=Re,n.Canvas=co,n.Circle=Tu,n.CircleMarker=ao,n.Class=j,n.Control=ir,n.DivIcon=Lu,n.DivOverlay=Pr,n.DomEvent=lm,n.DomUtil=Qc,n.Draggable=Pi,n.Evented=ne,n.FeatureGroup=dr,n.GeoJSON=pr,n.GridLayer=ya,n.Handler=Rr,n.Icon=Ja,n.ImageOverlay=ii,n.LatLng=he,n.LatLngBounds=se,n.Layer=jr,n.LayerGroup=ga,n.LineUtil=lf,n.Map=Nt,n.Marker=ts,n.Mixin=dm,n.Path=xi,n.Point=V,n.PolyUtil=mm,n.Polygon=ns,n.Polyline=bi,n.Popup=uo,n.PosAnimation=Xo,n.Projection=uf,n.Rectangle=vf,n.Renderer=Ir,n.SVG=Ii,n.SVGOverlay=Oi,n.TileLayer=_a,n.Tooltip=sl,n.Transformation=Qe,n.Util=X,n.VideoOverlay=al,n.bind=c,n.bounds=ee,n.canvas=fo,n.circle=xm,n.circleMarker=hf,n.control=Wa,n.divIcon=gf,n.extend=a,n.featureGroup=io,n.geoJSON=il,n.geoJson=df,n.gridLayer=Or,n.icon=tl,n.imageOverlay=is,n.latLng=ge,n.latLngBounds=oe,n.layerGroup=ff,n.map=ro,n.marker=ku,n.point=Z,n.polygon=mr,n.polyline=bm,n.popup=wm,n.rectangle=yr,n.setOptions=y,n.stamp=d,n.svg=ba,n.svgOverlay=pf,n.tileLayer=gr,n.tooltip=Dm,n.transformation=$e,n.version=i,n.videoOverlay=mf;var os=window.L;n.noConflict=function(){return window.L=os,this},window.L=n}))})(wc,wc.exports)),wc.exports}var Qi=yS();const fr=kd(Qi);function Ob(e,t){const n=W.useRef(t);W.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}var Eg=Pb();const Td=kd(Eg),_S=1;function xS(e){return Object.freeze({__version:_S,map:e})}function zd(e,t){return Object.freeze({...e,...t})}const Sg=W.createContext(null);function Ld(){const e=W.use(Sg);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Ib(e){function t(n,i){const{instance:a,context:l}=e(n).current;W.useImperativeHandle(i,()=>a);const{children:c}=n;return c==null?null:Jn.createElement(Sg,{value:l},c)}return W.forwardRef(t)}function bS(e){function t(n,i){const[a,l]=W.useState(!1),{instance:c}=e(n,l).current;W.useImperativeHandle(i,()=>c),W.useEffect(function(){a&&c.update()},[c,a,n.children]);const f=c._contentNode;return f?Eg.createPortal(n.children,f):null}return W.forwardRef(t)}function Cg(e,t){const n=W.useRef(void 0);W.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Ag(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function wS(e,t){return function(i,a){const l=Ld(),c=e(Ag(i,l),l);return Ob(l.map,i.attribution),Cg(c.current,i.eventHandlers),t(c.current,l,i,a),c}}function Uc(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Ng(e,t){return t==null?function(i,a){const l=W.useRef(void 0);return l.current||(l.current=e(i,a)),l}:function(i,a){const l=W.useRef(void 0);l.current||(l.current=e(i,a));const c=W.useRef(i),{instance:f}=l.current;return W.useEffect(function(){c.current!==i&&(t(f,i,c.current),c.current=i)},[f,i,t]),l}}function Hb(e,t){W.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function DS(e){return function(n){const i=Ld(),a=e(Ag(n,i),i);return Ob(i.map,n.attribution),Cg(a.current,n.eventHandlers),Hb(a.current,i),a}}function ES(e,t){const n=W.useRef(void 0);W.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function SS(e){return function(n){const i=Ld(),a=e(Ag(n,i),i);return Cg(a.current,n.eventHandlers),Hb(a.current,i),ES(a.current,n),a}}function Gb(e,t){const n=Ng(e,t),i=DS(n);return Ib(i)}function CS(e,t){const n=Ng(e),i=wS(n,t);return bS(i)}function Ub(e,t){const n=Ng(e,t),i=SS(n);return Ib(i)}function AS(e,t,n){t.bounds instanceof Qi.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}function Fd(){return Ld().map}function Mg(e){const t=Fd();return W.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const NS=Gb(function({bounds:t,url:n,...i},a){const l=new Qi.ImageOverlay(n,t,i);return Uc(l,zd(a,{overlayContainer:l}))},function(t,n,i){if(AS(t,n,i),n.bounds!==i.bounds){const a=n.bounds instanceof Qi.LatLngBounds?n.bounds:new Qi.LatLngBounds(n.bounds);t.setBounds(a)}n.url!==i.url&&t.setUrl(n.url)});function MS({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:l,placeholder:c,style:f,whenReady:d,zoom:h,...m},g){const[_]=W.useState({className:a,id:l,style:f}),[x,D]=W.useState(null),y=W.useRef(void 0);W.useImperativeHandle(g,()=>x?.map??null,[x]);const S=W.useCallback(A=>{if(A!==null&&!y.current){const N=new Qi.Map(A,m);y.current=N,n!=null&&h!=null?N.setView(n,h):e!=null&&N.fitBounds(e,t),d!=null&&N.whenReady(d),D(xS(N))}},[]);W.useEffect(()=>()=>{x?.map.remove()},[x]);const w=x?Jn.createElement(Sg,{value:x},i):c??null;return Jn.createElement("div",{..._,ref:S},w)}const kS=W.forwardRef(MS),N0=Gb(function({position:t,...n},i){const a=new Qi.Marker(t,n);return Uc(a,zd(i,{overlayContainer:a}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),TS=Ub(function({positions:t,...n},i){const a=new Qi.Polygon(t,n);return Uc(a,zd(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Zb=Ub(function({positions:t,...n},i){const a=new Qi.Polyline(t,n);return Uc(a,zd(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Gl=CS(function(t,n){const i=new Qi.Popup(t,n.overlayContainer);return Uc(i,n)},function(t,n,{position:i},a){W.useEffect(function(){const{instance:c}=t;function f(h){h.popup===c&&(c.update(),a(!0))}function d(h){h.popup===c&&a(!1)}return n.map.on({popupopen:f,popupclose:d}),n.overlayContainer==null?(i!=null&&c.setLatLng(i),c.openOn(n.map)):n.overlayContainer.bindPopup(c),function(){n.map.off({popupopen:f,popupclose:d}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(c)}},[t,n,a,i])}),f_=e=>{let t;const n=new Set,i=(h,m)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const _=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(x=>x(t,_))}},a=()=>t,f={setState:i,getState:a,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h))},d=t=e(i,a,f);return f},zS=(e=>e?f_(e):f_),LS=e=>e;function FS(e,t=LS){const n=Jn.useSyncExternalStore(e.subscribe,Jn.useCallback(()=>t(e.getState()),[e,t]),Jn.useCallback(()=>t(e.getInitialState()),[e,t]));return Jn.useDebugValue(n),n}const h_=e=>{const t=zS(e),n=i=>FS(t,i);return Object.assign(n,t),n},RS=(e=>e?h_(e):h_),Qn=[];for(let e=0;e<256;++e)Qn.push((e+256).toString(16).slice(1));function jS(e,t=0){return(Qn[e[t+0]]+Qn[e[t+1]]+Qn[e[t+2]]+Qn[e[t+3]]+"-"+Qn[e[t+4]]+Qn[e[t+5]]+"-"+Qn[e[t+6]]+Qn[e[t+7]]+"-"+Qn[e[t+8]]+Qn[e[t+9]]+"-"+Qn[e[t+10]]+Qn[e[t+11]]+Qn[e[t+12]]+Qn[e[t+13]]+Qn[e[t+14]]+Qn[e[t+15]]).toLowerCase()}let n0;const BS=new Uint8Array(16);function PS(){if(!n0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n0=crypto.getRandomValues.bind(crypto)}return n0(BS)}const OS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),d_={randomUUID:OS};function Gn(e,t,n){if(d_.randomUUID&&!e)return d_.randomUUID();e=e||{};const i=e.random??e.rng?.()??PS();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,jS(i)}const Kb=[{name:"Einfacher Einzelmast",description:"Einzelmast mit einer Ebene und einem Leiter rechts",anzahlEbenen:1,ebenenConfig:[{nummerEbene:1,anzahlLeitungenLinks:0,anzahlLeitungenRechts:1}]}];function M0(e){const t={id:e.id||"",name:e.name||"Neue Vorlage",description:e.description,anzahlEbenen:e.anzahlEbenen||1,ebenenConfig:[]};return!e.ebenenConfig||e.ebenenConfig.length===0?t.ebenenConfig=IS(t.anzahlEbenen):t.ebenenConfig=e.ebenenConfig,t}function IS(e){const t=[];for(let n=0;n<e;n++)t.push({nummerEbene:n+1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1});return t}function HS(e){const t=[];return(!e.name||e.name.trim()==="")&&t.push("Template name is required"),e.anzahlEbenen<1&&t.push("At least one level (Ebene) is required"),e.ebenenConfig.length!==e.anzahlEbenen&&t.push("Number of level configurations must match anzahlEbenen"),e.ebenenConfig.forEach((n,i)=>{(n.anzahlLeitungenLinks<0||n.anzahlLeitungenRechts<0)&&t.push(`Ebene ${i+1}: Number of conductors cannot be negative`),n.anzahlLeitungenLinks===0&&n.anzahlLeitungenRechts===0&&t.push(`Ebene ${i+1}: At least one conductor is required`)}),t}function Lc(e,t,n,i){return`${e}_L${t}_${n[0].toUpperCase()}${i}`}function GS(e){const t=e.match(/^(.+)_L(\d+)_([LR])(\d+)$/);return t?{poleId:t[1],levelNumber:parseInt(t[2]),side:t[3]==="L"?"left":"right",connectionNumber:parseInt(t[4])}:null}function Kh(e,t){const n=t.x-e.x,i=t.y-e.y,a=Math.sqrt(n*n+i*i);return{x:n,y:i,Length:a}}function qh(e,t){const n=t.Rechts-e.Rechts,i=t.Hoch-e.Hoch;return{Rechts:n,Hoch:i}}function k0(e){const t=e.Length||Math.sqrt(e.x*e.x+e.y*e.y);if(t===0)return{x:0,y:1,Length:1};const n=e.x/t;return{x:-(e.y/t),y:n,Length:1}}function T0(e){const t=Math.sqrt(e.Rechts*e.Rechts+e.Hoch*e.Hoch);if(t===0)return{Rechts:0,Hoch:1};const n=e.Rechts/t;return{Rechts:-(e.Hoch/t),Hoch:n}}function US(e,t,n){const i=Kh(e,t),a=Kh(e,n),l=i.Length||Math.sqrt(i.x*i.x+i.y*i.y),c=a.Length||Math.sqrt(a.x*a.x+a.y*a.y);if(l===0||c===0)return{x:0,y:1,Length:1};const f={x:i.x/l,y:i.y/l},d={x:a.x/c,y:a.y/c};let h=f.x+d.x,m=f.y+d.y;const g=Math.sqrt(h*h+m*m);return g<.001?k0(a):(h/=g,m/=g,{x:-m,y:h,Length:1})}function ZS(e,t,n){const i=qh(e,t),a=qh(e,n),l=Math.sqrt(i.Rechts*i.Rechts+i.Hoch*i.Hoch),c=Math.sqrt(a.Rechts*a.Rechts+a.Hoch*a.Hoch);if(l===0||c===0)return{Rechts:0,Hoch:1};const f={Rechts:i.Rechts/l,Hoch:i.Hoch/l},d={Rechts:a.Rechts/c,Hoch:a.Hoch/c};let h=f.Rechts+d.Rechts,m=f.Hoch+d.Hoch;const g=Math.sqrt(h*h+m*m);return g<.001?T0(a):(h/=g,m/=g,{Rechts:-m,Hoch:h})}function KS(e,t){const n=[],i=e.length;if(i===0)return n;if(i===1)return n.push({ausrichtung:{x:0,y:1,Length:1},gkAusrichtung:{Rechts:0,Hoch:1}}),n;for(let a=0;a<i;a++)if(a===0){const l=Kh(e[0],e[1]),c=qh(t[0],t[1]);n.push({ausrichtung:k0(l),gkAusrichtung:T0(c)})}else if(a===i-1){const l=Kh(e[a-1],e[a]),c=qh(t[a-1],t[a]);n.push({ausrichtung:k0(l),gkAusrichtung:T0(c)})}else n.push({ausrichtung:US(e[a],e[a-1],e[a+1]),gkAusrichtung:ZS(t[a],t[a-1],t[a+1])});return n}function z0(e,t,n,i){const a=[],l=new Map;for(const _ of n)l.set(_.fromConnectionId,_);const c=Array.from(t.values()).filter(_=>_.trasseId===e.id).sort((_,x)=>{const D=e.poleIds.indexOf(_.id),y=e.poleIds.indexOf(x.id);return D-y}),f=c.map(_=>({x:_.position.GK.Rechts,y:_.position.GK.Hoch,Length:Math.sqrt(_.position.GK.Rechts*_.position.GK.Rechts+_.position.GK.Hoch*_.position.GK.Hoch)})),d=c.map(_=>_.position.GK),h=KS(f,d);for(let _=0;_<c.length;_++){const x=c[_],D=_<c.length-1?c[_+1]:null,y=h[_],S=qS(x,D,l,i,_+1,y);a.push(S)}const m=Math.max(...a.map(_=>_.UsedEbenen.length),1),g=a.reduce((_,x)=>Math.max(_,x.UsedEbenen.reduce((D,y)=>D+y.UsedLeitungenLinks.length+y.UsedLeitungenRechts.length,0)),0);return{Nummer:parseInt(e.id.replace(/\D/g,"").substr(0,5))||1,Name:e.name,AnzahlMastebenen:m,AnzahlMastleitungen:g,UsedMasten:a}}function m_(e){if(console.log("connection",e),e.einbauart===0)return 5;if(e.einbauart===1)return 4;if(e.einbauart===2)return 0;throw new Error("Invalid einbauart: "+e.einbauart)}function qS(e,t,n,i,a,l){const c={lfdNummer:a,OVektor:{x:e.position.GK.Rechts,y:e.position.GK.Hoch,Length:Math.sqrt(e.position.GK.Rechts*e.position.GK.Rechts+e.position.GK.Hoch*e.position.GK.Hoch)},GK_Vektor:e.position},f={...e,orientation:l?.ausrichtung||e.orientation,gkOrientation:l?.gkAusrichtung||e.gkOrientation||{Rechts:e.orientation.x,Hoch:e.orientation.y}},d=[];for(const m of e.levels){const g=$S(m,f,t,n,i);d.push(g)}const h=e.position.z+e.poleHeight;return{Fusspunkt:c,Name:e.name||`Mast ${a}`,NullpunktHoehe:h,MastHoehe:e.poleHeight,Ausrichtung:f.orientation,GKAusrichtung:f.gkOrientation,UsedEbenen:d}}function $S(e,t,n,i,a){const l=[],c=[];for(const d of e.leftConnections){const h=i.get(d.id);!h&&d.connected2Connection&&console.log(`WARNING: No connection line found for ${d.id}`);const m=p_(d,t,e,h,n,a,!0);l.push(m)}for(const d of e.rightConnections){const h=i.get(d.id),m=p_(d,t,e,h,n,a,!1);c.push(m)}const f=e.levelHeight;return{NummerEbene:e.levelNumber,AbstandNullpunkt:f,UsedLeitungenLinks:l,UsedLeitungenRechts:c}}function p_(e,t,n,i,a,l,c,f=!0){const d=t.gkOrientation||{Rechts:t.orientation.x,Hoch:t.orientation.y},h=Math.sqrt(d.Rechts*d.Rechts+d.Hoch*d.Hoch);let m=d.Rechts,g=d.Hoch;h>0&&(m/=h,g/=h);const _=c?e.horizontalDistance2Pole:-e.horizontalDistance2Pole,x=e.durchgangspunktZ!==void 0?e.durchgangspunktZ:t.position.z+n.levelHeight;console.log("connection",e),console.log("pole",t),console.log("level",n),console.log("Legacy DurchgangspunktZ",e.durchgangspunktZ),console.log("Expected Isolatorlaenge",m_(e));const D=t.nullpunktHeight+n.levelHeight-m_(e);console.log("Computed DurchgangspunktZ",D);const y={GK:{Rechts:t.position.GK.Rechts+m*_,Hoch:t.position.GK.Hoch+g*_},z:f?D:x};let S=0,w=0;if(e.connected2Connection&&a){const M=GS(e.connected2Connection);M&&(S=M.levelNumber,w=M.side==="left"?-M.connectionNumber:M.connectionNumber)}let A=i?.connectionLineType||"",N=i?.soundPowerLevel!==void 0?i.soundPowerLevel:0;if(A&&i?.soundPowerLevel===void 0){const M=l.find(B=>B.Name===A);M&&(N=M.SchallLW)}const z=y,k=i?.acdc!==void 0?i.acdc:e.acdc!==void 0?e.acdc:1;return!i&&e.schallLw!==void 0&&(A=e.schallLw),!i&&e.schallLwDB!==void 0&&(N=e.schallLwDB),console.log("Provided to computation: ",y),{Durchgangspunkt:y,ACDC:k,NummerLeiter:c?-e.connectionNumber:e.connectionNumber,AbstandMastachse:e.horizontalDistance2Pole,Isolatorlaenge:e.isolatorLength||2.5,NextMastEbene:S,NextMastLeiter:w,Einbauart:0,Durchhang:i?.maxSag||5,ParabelA:0,ParabelB:0,ParabelC:0,SchallLw:A,SchallLwDB:N,BetrU:i?.operatingVoltage||0,AmSeg:0,SegLenU:0,LeiterLen:0,Mittelpkt:z,SegmentPunkte:[]}}function VS(e,t,n){const i=new Map,a=[],l=[],c=new Map,f=n||e.Nummer.toString();for(let h=0;h<e.UsedMasten.length;h++){const m=e.UsedMasten[h],g=`pole_${f}_${h+1}`;l.push(g);const _=YS(m,g,f);i.set(g,_);for(const x of _.levels){for(const D of x.leftConnections)c.set(D.id,D);for(const D of x.rightConnections)c.set(D.id,D)}}for(let h=0;h<e.UsedMasten.length-1;h++){const m=l[h],g=l[h+1],_=i.get(g),x=e.UsedMasten[h];for(const D of x.UsedEbenen){for(let y=0;y<D.UsedLeitungenLinks.length;y++){const S=D.UsedLeitungenLinks[y];if(S.NextMastEbene>0){const w=Lc(m,D.NummerEbene,"left",y+1),A=_.levels.find(N=>N.levelNumber===S.NextMastEbene);if(A){let N;if(S.NextMastLeiter<0){const z=Math.abs(S.NextMastLeiter)-1;N=A.leftConnections[z]}else if(S.NextMastLeiter>0){const z=S.NextMastLeiter-1;N=A.rightConnections[z]}if(N){const z=c.get(w);z&&(z.connected2Connection=N.id),a.push({id:`line_${h}_${D.NummerEbene}_L${y+1}`,trasseId:f,fromConnectionId:w,toConnectionId:N.id,connectionLineType:S.SchallLw||`Type_${S.SchallLwDB}dB`,maxSag:S.Durchhang>0?S.Durchhang:5,operatingVoltage:S.BetrU,soundPowerLevel:S.SchallLwDB,acdc:S.ACDC})}}}}for(let y=0;y<D.UsedLeitungenRechts.length;y++){const S=D.UsedLeitungenRechts[y];if(S.NextMastEbene>0){const w=Lc(m,D.NummerEbene,"right",y+1),A=_.levels.find(N=>N.levelNumber===S.NextMastEbene);if(A){let N;if(S.NextMastLeiter<0){const z=Math.abs(S.NextMastLeiter)-1;N=A.leftConnections[z]}else if(S.NextMastLeiter>0){const z=S.NextMastLeiter-1;N=A.rightConnections[z]}if(N){const z=c.get(w);z&&(z.connected2Connection=N.id),a.push({id:`line_${h}_${D.NummerEbene}_R${y+1}`,trasseId:f,fromConnectionId:w,toConnectionId:N.id,connectionLineType:S.SchallLw||`Type_${S.SchallLwDB}dB`,maxSag:S.Durchhang>0?S.Durchhang:5,operatingVoltage:S.BetrU,soundPowerLevel:S.SchallLwDB,acdc:S.ACDC})}}}}}}return{trasse:{id:n||e.Nummer.toString(),name:e.Name,templateId:t,poleIds:l},poles:i,connectionLines:a}}function YS(e,t,n){const i=[];console.log("Using this mast: ",e);for(const a of e.UsedEbenen){const l={levelNumber:a.NummerEbene,levelHeight:a.AbstandNullpunkt,leftConnections:[],rightConnections:[]};for(let c=0;c<a.UsedLeitungenLinks.length;c++){const f=a.UsedLeitungenLinks[c],d={id:Lc(t,a.NummerEbene,"left",c+1),poleId:t,levelNumber:a.NummerEbene,side:"left",connectionNumber:c+1,horizontalDistance2Pole:f.AbstandMastachse,isolatorLength:f.Isolatorlaenge,einbauart:f.Einbauart,durchgangspunktGK:{Rechts:f.Durchgangspunkt.GK.Rechts,Hoch:f.Durchgangspunkt.GK.Hoch},durchgangspunktZ:f.Durchgangspunkt.z,acdc:f.ACDC,schallLw:f.SchallLw,schallLwDB:f.SchallLwDB};l.leftConnections.push(d)}for(let c=0;c<a.UsedLeitungenRechts.length;c++){const f=a.UsedLeitungenRechts[c],d={id:Lc(t,a.NummerEbene,"right",c+1),poleId:t,levelNumber:a.NummerEbene,side:"right",connectionNumber:c+1,horizontalDistance2Pole:f.AbstandMastachse,isolatorLength:f.Isolatorlaenge,einbauart:f.Einbauart,durchgangspunktGK:{Rechts:f.Durchgangspunkt.GK.Rechts,Hoch:f.Durchgangspunkt.GK.Hoch},durchgangspunktZ:f.Durchgangspunkt.z,acdc:f.ACDC,schallLw:f.SchallLw,schallLwDB:f.SchallLwDB};l.rightConnections.push(d)}i.push(l)}return console.log("Return this levels: ",i),{id:t,trasseId:n,name:e.Name||"No Name",position:e.Fusspunkt.GK_Vektor,poleHeight:e.MastHoehe,nullpunktHeight:e.NullpunktHoehe||0,orientation:e.Ausrichtung,gkOrientation:e.GKAusrichtung,levels:i}}const Ba=11102230246251565e-32,or=134217729,XS=(3+8*Ba)*Ba;function r0(e,t,n,i,a){let l,c,f,d,h=t[0],m=i[0],g=0,_=0;m>h==m>-h?(l=h,h=t[++g]):(l=m,m=i[++_]);let x=0;if(g<e&&_<n)for(m>h==m>-h?(c=h+l,f=l-(c-h),h=t[++g]):(c=m+l,f=l-(c-m),m=i[++_]),l=c,f!==0&&(a[x++]=f);g<e&&_<n;)m>h==m>-h?(c=l+h,d=c-l,f=l-(c-d)+(h-d),h=t[++g]):(c=l+m,d=c-l,f=l-(c-d)+(m-d),m=i[++_]),l=c,f!==0&&(a[x++]=f);for(;g<e;)c=l+h,d=c-l,f=l-(c-d)+(h-d),h=t[++g],l=c,f!==0&&(a[x++]=f);for(;_<n;)c=l+m,d=c-l,f=l-(c-d)+(m-d),m=i[++_],l=c,f!==0&&(a[x++]=f);return(l!==0||x===0)&&(a[x++]=l),x}function WS(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Zc(e){return new Float64Array(e)}const QS=(3+16*Ba)*Ba,JS=(2+12*Ba)*Ba,eC=(9+64*Ba)*Ba*Ba,Tl=Zc(4),g_=Zc(8),v_=Zc(12),y_=Zc(16),_r=Zc(4);function tC(e,t,n,i,a,l,c){let f,d,h,m,g,_,x,D,y,S,w,A,N,z,k,M,B,P;const R=e-a,H=n-a,U=t-l,I=i-l;z=R*I,_=or*R,x=_-(_-R),D=R-x,_=or*I,y=_-(_-I),S=I-y,k=D*S-(z-x*y-D*y-x*S),M=U*H,_=or*U,x=_-(_-U),D=U-x,_=or*H,y=_-(_-H),S=H-y,B=D*S-(M-x*y-D*y-x*S),w=k-B,g=k-w,Tl[0]=k-(w+g)+(g-B),A=z+w,g=A-z,N=z-(A-g)+(w-g),w=N-M,g=N-w,Tl[1]=N-(w+g)+(g-M),P=A+w,g=P-A,Tl[2]=A-(P-g)+(w-g),Tl[3]=P;let X=WS(4,Tl),j=JS*c;if(X>=j||-X>=j||(g=e-R,f=e-(R+g)+(g-a),g=n-H,h=n-(H+g)+(g-a),g=t-U,d=t-(U+g)+(g-l),g=i-I,m=i-(I+g)+(g-l),f===0&&d===0&&h===0&&m===0)||(j=eC*c+XS*Math.abs(X),X+=R*m+I*f-(U*h+H*d),X>=j||-X>=j))return X;z=f*I,_=or*f,x=_-(_-f),D=f-x,_=or*I,y=_-(_-I),S=I-y,k=D*S-(z-x*y-D*y-x*S),M=d*H,_=or*d,x=_-(_-d),D=d-x,_=or*H,y=_-(_-H),S=H-y,B=D*S-(M-x*y-D*y-x*S),w=k-B,g=k-w,_r[0]=k-(w+g)+(g-B),A=z+w,g=A-z,N=z-(A-g)+(w-g),w=N-M,g=N-w,_r[1]=N-(w+g)+(g-M),P=A+w,g=P-A,_r[2]=A-(P-g)+(w-g),_r[3]=P;const J=r0(4,Tl,4,_r,g_);z=R*m,_=or*R,x=_-(_-R),D=R-x,_=or*m,y=_-(_-m),S=m-y,k=D*S-(z-x*y-D*y-x*S),M=U*h,_=or*U,x=_-(_-U),D=U-x,_=or*h,y=_-(_-h),S=h-y,B=D*S-(M-x*y-D*y-x*S),w=k-B,g=k-w,_r[0]=k-(w+g)+(g-B),A=z+w,g=A-z,N=z-(A-g)+(w-g),w=N-M,g=N-w,_r[1]=N-(w+g)+(g-M),P=A+w,g=P-A,_r[2]=A-(P-g)+(w-g),_r[3]=P;const q=r0(J,g_,4,_r,v_);z=f*m,_=or*f,x=_-(_-f),D=f-x,_=or*m,y=_-(_-m),S=m-y,k=D*S-(z-x*y-D*y-x*S),M=d*h,_=or*d,x=_-(_-d),D=d-x,_=or*h,y=_-(_-h),S=h-y,B=D*S-(M-x*y-D*y-x*S),w=k-B,g=k-w,_r[0]=k-(w+g)+(g-B),A=z+w,g=A-z,N=z-(A-g)+(w-g),w=N-M,g=N-w,_r[1]=N-(w+g)+(g-M),P=A+w,g=P-A,_r[2]=A-(P-g)+(w-g),_r[3]=P;const ne=r0(q,v_,4,_r,y_);return y_[ne-1]}function ph(e,t,n,i,a,l){const c=(t-l)*(n-a),f=(e-a)*(i-l),d=c-f,h=Math.abs(c+f);return Math.abs(d)>=QS*h?d:-tC(e,t,n,i,a,l,h)}const __=Math.pow(2,-52),gh=new Uint32Array(512);class Rs{static from(t,n=sC,i=oC){const a=t.length,l=new Float64Array(a*2);for(let c=0;c<a;c++){const f=t[c];l[2*c]=n(f),l[2*c+1]=i(f)}return new Rs(l)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:a,_hullHash:l}=this,c=t.length>>1;let f=1/0,d=1/0,h=-1/0,m=-1/0;for(let R=0;R<c;R++){const H=t[2*R],U=t[2*R+1];H<f&&(f=H),U<d&&(d=U),H>h&&(h=H),U>m&&(m=U),this._ids[R]=R}const g=(f+h)/2,_=(d+m)/2;let x,D,y;for(let R=0,H=1/0;R<c;R++){const U=i0(g,_,t[2*R],t[2*R+1]);U<H&&(x=R,H=U)}const S=t[2*x],w=t[2*x+1];for(let R=0,H=1/0;R<c;R++){if(R===x)continue;const U=i0(S,w,t[2*R],t[2*R+1]);U<H&&U>0&&(D=R,H=U)}let A=t[2*D],N=t[2*D+1],z=1/0;for(let R=0;R<c;R++){if(R===x||R===D)continue;const H=iC(S,w,A,N,t[2*R],t[2*R+1]);H<z&&(y=R,z=H)}let k=t[2*y],M=t[2*y+1];if(z===1/0){for(let U=0;U<c;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];Ul(this._ids,this._dists,0,c-1);const R=new Uint32Array(c);let H=0;for(let U=0,I=-1/0;U<c;U++){const X=this._ids[U],j=this._dists[X];j>I&&(R[H++]=X,I=j)}this.hull=R.subarray(0,H),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(ph(S,w,A,N,k,M)<0){const R=D,H=A,U=N;D=y,A=k,N=M,y=R,k=H,M=U}const B=aC(S,w,A,N,k,M);this._cx=B.x,this._cy=B.y;for(let R=0;R<c;R++)this._dists[R]=i0(t[2*R],t[2*R+1],B.x,B.y);Ul(this._ids,this._dists,0,c-1),this._hullStart=x;let P=3;i[x]=n[y]=D,i[D]=n[x]=y,i[y]=n[D]=x,a[x]=0,a[D]=1,a[y]=2,l.fill(-1),l[this._hashKey(S,w)]=x,l[this._hashKey(A,N)]=D,l[this._hashKey(k,M)]=y,this.trianglesLen=0,this._addTriangle(x,D,y,-1,-1,-1);for(let R=0,H,U;R<this._ids.length;R++){const I=this._ids[R],X=t[2*I],j=t[2*I+1];if(R>0&&Math.abs(X-H)<=__&&Math.abs(j-U)<=__||(H=X,U=j,I===x||I===D||I===y))continue;let J=0;for(let Z=0,$=this._hashKey(X,j);Z<this._hashSize&&(J=l[($+Z)%this._hashSize],!(J!==-1&&J!==i[J]));Z++);J=n[J];let q=J,ne;for(;ne=i[q],ph(X,j,t[2*q],t[2*q+1],t[2*ne],t[2*ne+1])>=0;)if(q=ne,q===J){q=-1;break}if(q===-1)continue;let V=this._addTriangle(q,I,i[q],-1,-1,a[q]);a[I]=this._legalize(V+2),a[q]=V,P++;let Q=i[q];for(;ne=i[Q],ph(X,j,t[2*Q],t[2*Q+1],t[2*ne],t[2*ne+1])<0;)V=this._addTriangle(Q,I,ne,a[I],-1,a[Q]),a[I]=this._legalize(V+2),i[Q]=Q,P--,Q=ne;if(q===J)for(;ne=n[q],ph(X,j,t[2*ne],t[2*ne+1],t[2*q],t[2*q+1])<0;)V=this._addTriangle(ne,I,q,-1,a[q],a[ne]),this._legalize(V+2),a[ne]=V,i[q]=q,P--,q=ne;this._hullStart=n[I]=q,i[q]=n[Q]=I,i[I]=Q,l[this._hashKey(X,j)]=I,l[this._hashKey(t[2*q],t[2*q+1])]=q}this.hull=new Uint32Array(P);for(let R=0,H=this._hullStart;R<P;R++)this.hull[R]=H,H=i[H];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(nC(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:a}=this;let l=0,c=0;for(;;){const f=i[t],d=t-t%3;if(c=d+(t+2)%3,f===-1){if(l===0)break;t=gh[--l];continue}const h=f-f%3,m=d+(t+1)%3,g=h+(f+2)%3,_=n[c],x=n[t],D=n[m],y=n[g];if(rC(a[2*_],a[2*_+1],a[2*x],a[2*x+1],a[2*D],a[2*D+1],a[2*y],a[2*y+1])){n[t]=y,n[f]=_;const w=i[g];if(w===-1){let N=this._hullStart;do{if(this._hullTri[N]===g){this._hullTri[N]=t;break}N=this._hullPrev[N]}while(N!==this._hullStart)}this._link(t,w),this._link(f,i[c]),this._link(c,g);const A=h+(f+1)%3;l<gh.length&&(gh[l++]=A)}else{if(l===0)break;t=gh[--l]}}return c}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,a,l,c){const f=this.trianglesLen;return this._triangles[f]=t,this._triangles[f+1]=n,this._triangles[f+2]=i,this._link(f,a),this._link(f+1,l),this._link(f+2,c),this.trianglesLen+=3,f}}function nC(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function i0(e,t,n,i){const a=e-n,l=t-i;return a*a+l*l}function rC(e,t,n,i,a,l,c,f){const d=e-c,h=t-f,m=n-c,g=i-f,_=a-c,x=l-f,D=d*d+h*h,y=m*m+g*g,S=_*_+x*x;return d*(g*S-y*x)-h*(m*S-y*_)+D*(m*x-g*_)<0}function iC(e,t,n,i,a,l){const c=n-e,f=i-t,d=a-e,h=l-t,m=c*c+f*f,g=d*d+h*h,_=.5/(c*h-f*d),x=(h*m-f*g)*_,D=(c*g-d*m)*_;return x*x+D*D}function aC(e,t,n,i,a,l){const c=n-e,f=i-t,d=a-e,h=l-t,m=c*c+f*f,g=d*d+h*h,_=.5/(c*h-f*d),x=e+(h*m-f*g)*_,D=t+(c*g-d*m)*_;return{x,y:D}}function Ul(e,t,n,i){if(i-n<=20)for(let a=n+1;a<=i;a++){const l=e[a],c=t[l];let f=a-1;for(;f>=n&&t[e[f]]>c;)e[f+1]=e[f--];e[f+1]=l}else{const a=n+i>>1;let l=n+1,c=i;vc(e,a,l),t[e[n]]>t[e[i]]&&vc(e,n,i),t[e[l]]>t[e[i]]&&vc(e,l,i),t[e[n]]>t[e[l]]&&vc(e,n,l);const f=e[l],d=t[f];for(;;){do l++;while(t[e[l]]<d);do c--;while(t[e[c]]>d);if(c<l)break;vc(e,l,c)}e[n+1]=e[c],e[c]=f,i-l+1>=c-n?(Ul(e,t,l,i),Ul(e,t,n,c-1)):(Ul(e,t,n,c-1),Ul(e,t,l,i))}}function vc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function sC(e){return e[0]}function oC(e){return e[1]}function x_(e){if(console.log("Computing triangulation for",e.length,"points"),e.length<3)return console.log("Not enough points for triangulation"),{dreiecke:[],kanten:[]};const t=e.map(_=>_.GK_Vektor.GK.Rechts),n=e.map(_=>_.GK_Vektor.GK.Hoch),i=Math.min(...t),a=Math.min(...n);console.log("Coordinate ranges - X:",Math.min(...t),"to",Math.max(...t)),console.log("Coordinate ranges - Y:",Math.min(...n),"to",Math.max(...n));const l=[];e.forEach((_,x)=>{const D=_.GK_Vektor.GK.Rechts-i,y=_.GK_Vektor.GK.Hoch-a;console.log(`Point ${x}: original(${_.GK_Vektor.GK.Rechts}, ${_.GK_Vektor.GK.Hoch}) normalized(${D}, ${y})`),l.push(D),l.push(y)}),console.log("Normalized points array for Delaunator:",l);const c=new Set;for(let _=0;_<l.length;_+=2){const x=`${l[_]},${l[_+1]}`;c.has(x)&&console.warn("Duplicate point found:",l[_],l[_+1]),c.add(x)}console.log("Unique points count:",c.size),console.log("Testing Delaunator with simple triangle..."),console.log("Delaunator constructor:",typeof Rs),console.log("Delaunator.from function:",typeof Rs.from);try{const _=[168,180,168,178,168,179,168,181,168,183];console.log("Using coords from docs:",_);const x=new Rs(_);console.log("Doc example triangles:",x.triangles.length),console.log("Doc example result:",Array.from(x.triangles));const D=[0,0,1,0,0,1],y=new Rs(D);console.log("Simple triangle triangles:",y.triangles.length),console.log("Simple triangle result:",Array.from(y.triangles))}catch(_){console.error("Test triangulation failed:",_)}let f;try{if(f=new Rs(l),console.log("Delaunator triangles array length:",f.triangles.length),console.log("First few triangles:",Array.from(f.triangles.slice(0,12))),console.log("Hull:",Array.from(f.hull)),console.log("Hull length:",f.hull.length),!f.triangles||f.triangles.length===0){if(console.error("Delaunator produced no triangles - points might be collinear or invalid"),l.length>=6){console.log("Attempting manual triangle creation...");const _=[l[0],l[1]],x=[l[2],l[3]],D=[l[4],l[5]];console.log("Three points for manual triangle:",_,x,D);const y=(x[0]-_[0])*(D[1]-_[1])-(x[1]-_[1])*(D[0]-_[0]);console.log("Cross product (collinearity test):",y),Math.abs(y)<1e-10&&console.error("Points are collinear!")}return{dreiecke:[],kanten:[]}}}catch(_){return console.error("Delaunator error:",_),{dreiecke:[],kanten:[]}}const d=[],h=f.triangles.length/3;console.log("Generated",h,"triangles");for(let _=0;_<h;_++){const x=f.triangles[_*3],D=f.triangles[_*3+1],y=f.triangles[_*3+2],S={LfdNummer:_+1,A:{Nummer:-1,HP:{lfdNummer:x+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[x].GK_Vektor}},B:{Nummer:-1,HP:{lfdNummer:D+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[D].GK_Vektor}},C:{Nummer:-1,HP:{lfdNummer:y+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[y].GK_Vektor}}};d.push(S)}const m=[],g=new Map;for(let _=0;_<h;_++){const x=f.triangles[_*3],D=f.triangles[_*3+1],y=f.triangles[_*3+2];[[Math.min(x,D),Math.max(x,D)],[Math.min(D,y),Math.max(D,y)],[Math.min(y,x),Math.max(y,x)]].forEach(w=>{const A=`${w[0]}-${w[1]}`;g.has(A)||g.set(A,{indices:w,triangles:[]}),g.get(A).triangles.push(_+1)})}return g.forEach(_=>{const[x,D]=_.indices,y={EckeA:{Nummer:-1,HP:{lfdNummer:x+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[x].GK_Vektor}},EckeB:{Nummer:-1,HP:{lfdNummer:D+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[D].GK_Vektor}},DreieckA:_.triangles[0]||-1,DreieckB:_.triangles[1]||-1};m.push(y)}),{dreiecke:d,kanten:m}}class Cn{usedData;dtmProcessor;absorpKoeff=1;constructor(t,n=null){this.usedData=t,this.dtmProcessor=n}getDtmProcessor(){return this.dtmProcessor}calculateLatLTForImmissionPointDetailed(t){if(t>=this.usedData.ImmissionPoints.length)return{total:0,esq:0,trassen:0};const n=this.usedData.ImmissionPoints[t],i={GK:{Rechts:n.Position.GK.Rechts,Hoch:n.Position.GK.Hoch},z:n.Position.z+n.HeightOffset},a=this.calculateESQContribution(i,n);let l=0;for(const g of this.usedData.Trassen)for(let _=0;_<g.UsedMasten.length-1;_++){const x=g.UsedMasten[_],D=g.UsedMasten[_+1];for(const y of x.UsedEbenen){for(const S of y.UsedLeitungenLinks){const w=this.findNextConductor(D,S.NextMastEbene,S.NextMastLeiter);if(w){const A=this.calcLeiter(S,w,i,n.G_Bodenfaktor);A>0&&(l+=A)}}for(const S of y.UsedLeitungenRechts){const w=this.findNextConductor(D,S.NextMastEbene,S.NextMastLeiter);if(w){const A=this.calcLeiter(S,w,i,n.G_Bodenfaktor);A>0&&(l+=A)}}}}const c=a+l;let f=0;c>=1&&(f=10*Math.log10(c));let d=0;a>=1&&(d=10*Math.log10(a));let h=0;l>=1&&(h=10*Math.log10(l));const m=this.usedData.Kt??0;return{total:f+m,esq:d+m,trassen:h+m}}calculateLatLTForImmissionPoint(t){return this.calculateLatLTForImmissionPointDetailed(t).total}findNextConductor(t,n,i){if(n<=0||n>t.UsedEbenen.length)throw new Error(`findNextConductor: nextMastEbene=${n} is out of range`);const a=t.UsedEbenen.find(l=>l.NummerEbene===n);if(!a)throw new Error(`findNextConductor: targetEbene=${n} not found`);if(i<0){const l=-i-1;if(l>=0&&l<a.UsedLeitungenLinks.length)return a.UsedLeitungenLinks[l]}else if(i>0){const l=i-1;if(l>=0&&l<a.UsedLeitungenRechts.length)return a.UsedLeitungenRechts[l]}throw new Error(`findNextConductor: nextMastLeiter=${i} not found`)}calcLeiter(t,n,i,a){let l=0;const c=t.SchallLw?.trim()||"";for(const d of this.usedData.LeiterTypes){const h=d.Name?.trim()||"",m=d.SchallLW||0;if(h===c){l=m;break}}if(l===0)throw new Error(`No sound power level found for conductor type '${c}'`);return this.iterationLeiter(l,0,t.BetrU,t,n,i,!1,a)}iterationLeiter(t,n,i,a,l,c,f,d){const h=n+(i-n)/2,m=this.parabelpunkt(a.BetrU,a.Durchgangspunkt.GK,l.Durchgangspunkt.GK,a.ParabelA,a.ParabelB,a.ParabelC,a.Durchhang,h),g=Cn.GKVector3d_Abstand(m,c),_=2*a.ParabelA*n+a.ParabelB,x=2*a.ParabelA*i+a.ParabelB,D=Math.sqrt(1+_*_),y=Math.sqrt(1+x*x),S=(x*y+Math.log(x+y)-(_*D+Math.log(_+D)))/(4*a.ParabelA);if(Number.isNaN(S))throw new Error("SegLen is NaN!");if(g>2*S||S<5){const w=t+10*Math.log10(S);if(g<=.28*Math.sqrt(Math.pow(10,.1*w)))return this.segTrasse(w,m,c,g,f,a.ACDC,d)}else return this.iterationLeiter(t,n,h,a,l,c,f,d)+this.iterationLeiter(t,h,i,a,l,c,f,d);return 0}parabelpunkt(t,n,i,a,l,c,f,d){if(a===0&&l===0&&c===0)throw new Error("Parabelpunkt: a, b, c are all 0!");return console.log("Used d",f),{GK:{Hoch:n.Hoch+d*(i.Hoch-n.Hoch)/t,Rechts:n.Rechts+d*(i.Rechts-n.Rechts)/t},z:a*d*d+l*d+c}}segTrasse(t,n,i,a,l,c,f){if(this.usedData.mitFrequenz===!1||this.usedData.mitFrequenz===void 0){const d=this.calculateAdiv(a),h=this.calculateAatm(a),m=this.berechneAgr(n,i,f,l),g=this.getDOmega(n,i);let _=0;this.usedData.AgrKorrektur&&(_=this.getAgrKorrektur(a,n,i));const D=d+h+0+m;return t+g>D+_?Math.pow(10,.1*(t+g-D-_)):0}else{let d=0;for(let h=0;h<=32;h++){const m=20*Math.log10(a)+11,g=this.getAlphaAtm(h)*a/1e3,_=0,x=this.berechneAbschirmungMtlHoeheDpFreq(n,i,a,h,l),D=x[0],y=x[1],S=x[2];let w=D;w<=0&&(w=this.berechneAgrF0124(y,S,h,f));const A=m+g+_+w,N=this.getLwAF(h,c),z=.1*(t+N-A),k=Math.pow(10,z);d=d+k}return d}}calculateAdiv(t){return 20*Math.log10(t)+11}calculateAatm(t){return this.absorpKoeff*t/1e3}berechneAgr(t,n,i,a=!0){const l=Cn.GKVector3d_Abstand(t,n),c=this.berechneAbschirmungMtlHoeheDp(t,n,l,a),f=c[0],d=c[1],h=c[2];if(f<=0){let m=4.8-2*d/h*(17+300/h);return m<0&&(m=0),m}else return f}berechneAbschirmungMtlHoeheDpFreq(t,n,i,a,l=!0){const c=t.GK.Rechts,f=t.GK.Hoch;console.log("bIsESQ",l);const d=Cn.GKVector3d_Richtungsvektor(t,n),h=d.GK.Rechts,m=d.GK.Hoch;let g=!1;const _=[];if(this.dtmProcessor&&this.dtmProcessor.DGMKante)for(let w=0;w<this.dtmProcessor.DGMKante.length;w++){const A=this.dtmProcessor.DGMKante[w];if(!A||!A.EckeA)break;const N=this.getHeightPointByLfdNummer(A.EckeA.HP.lfdNummer),z=this.getHeightPointByLfdNummer(A.EckeB.HP.lfdNummer);if(!N||!z)continue;const k=N.GK.Rechts,M=N.GK.Hoch,B=Cn.GKVector3d_Richtungsvektor(N,z),P=B.GK.Rechts,R=B.GK.Hoch,H=R*h-P*m;if(Math.abs(H)>1e-4){const U=(-c*m+f*h+k*m-M*h)/H,I=(-c*R+f*P+k*R-M*P)/H;if(U>=0&&U<=1&&I>=0&&I<=1){const X={GK:{Rechts:B.GK.Rechts*U,Hoch:B.GK.Hoch*U},z:B.z*U},j=Cn.GKVector3d_Add(N,X),J=Cn.GKVector2d_Abstand(t.GK,j.GK),q=t.z+J*(n.z-t.z)/Cn.GKVector2d_Abstand(t.GK,n.GK);j.z>q&&(g=!0),_.push({index:w,point:j,distance:J})}}}let x=-1;if(g&&_.length>0){let w=_[0];for(const M of _)M.point.z>w.point.z&&(w=M);const A=Cn.GKVector3d_Abstand(t,w.point),N=Cn.GKVector3d_Abstand(w.point,n),z=Cn.GKVector3d_Abstand(t,n),k=A+N-z;if(k>0){const M=Math.exp(-Math.sqrt(A*N*z/(2*k))/2e3);if(a===-1)x=10*Math.log10(3+k*M*20/.7);else{const B=this.getLambdaAbsch(a);x=10*Math.log10(3+k*M*20/B)}}else x=0}const D=this.getMittlereHoeheDpWithEdges(_,t,n),y=D[0],S=D[1];return[x,y,S]}berechneAbschirmungMtlHoeheDp(t,n,i,a=!0){return this.berechneAbschirmungMtlHoeheDpFreq(t,n,i,-1,a)}getHeightPointByLfdNummer(t){if(!this.usedData.Hoehenpunkte||t===0)return null;const n=this.usedData.Hoehenpunkte.find(i=>i.LfdNummer===t);return n?n.GK_Vektor:null}getMittlereHoeheDpWithEdges(t,n,i){const a=Cn.GKVector2d_Abstand(n.GK,i.GK),l=[],c=this.dtmProcessor?.berechneHoeheDGM(n.GK)||0;l.push({distance:0,height:c});for(const D of t)l.push({distance:D.distance,height:D.point.z});const f=this.dtmProcessor?.berechneHoeheDGM(i.GK)||0;l.push({distance:a,height:f}),l.sort((D,y)=>D.distance-y.distance);let d=0,h=0,m=0,g=n.z;for(const D of l){const y=D.distance,S=D.height;d+=(g+S)*(m-y),y>m&&(h+=Math.sqrt(Math.pow(y-m,2)+Math.pow(S-g,2))),m=y,g=S}const _=a,x=i.z;return d+=(g+x)*(m-_),d+=(x+n.z)*(_-0),d=d/2,d=d/a,h===0&&(h=a),[d,h]}getDOmega(t,n){const i=this.dtmProcessor?.berechneHoeheDGM(t.GK)||0,a=this.dtmProcessor?.berechneHoeheDGM(n.GK)||0,l=t.z-i,c=n.z-a,f=Cn.GKVector2d_Abstand(t.GK,n.GK);return 10*Math.log10(1+(f*f+Math.pow(l-c,2))/(f*f+Math.pow(l+c,2)))}getAgrKorrektur(t,n,i){const a=this.dtmProcessor?.berechneHoeheDGM(n.GK)||0,l=this.dtmProcessor?.berechneHoeheDGM(i.GK)||0,c=n.z-a,f=i.z-l,d=(c+f)/2;if(d<=0)return 0;const h=10*Math.log10(t/d);let m=0;if(h<=9&&h>=-5){const g=h-3;m=-2e-5*Math.pow(g,6)-3e-5*Math.pow(g,5)+.0017*Math.pow(g,4)-.0019*Math.pow(g,3)-.0491*Math.pow(g,2)+.3146*g+2.0716}else if(h<=19&&h>9){const g=h-13;m=1e-5*Math.pow(g,6)-1e-4*Math.pow(g,5)+6e-5*Math.pow(g,4)-.0028*Math.pow(g,3)+.0525*Math.pow(g,2)-.4149*g-.0884-1}else m=0;return m}berechneCmet(t,n,i,a,l){const c=i,f=a,d=Cn.GKVector2d_Abstand(t.GK,n.GK);return console.log("Provided c0",l),d<=10*(c+f),0}calculateESQContribution(t,n){let i=0;for(const a of this.usedData.ESQSources){const l={GK:{Rechts:a.Position.GK.Rechts,Hoch:a.Position.GK.Hoch},z:a.Position.z+a.Hoehe},c=Cn.GKVector3d_Abstand(l,t);let f=0;if(a.Schallleistungspegel?f=a.L:f=a.L+10*Math.log10(4*Math.PI*a.S*a.S),f>0){const d=20*Math.log10(c)+11,h=this.absorpKoeff*c/1e3,m=this.berechneAgr(l,t,n.G_Bodenfaktor,!0),g=a.Raumwinkelmass;let _=0;this.usedData.AgrKorrektur&&(_=this.getAgrKorrektur(c,l,t));const x=n.HeightOffset,D=this.berechneCmet(l,t,a.Hoehe,x,a.Z_Cmet),S=d+h+0+m;let w=0,A=0;a.Beurteilungszeitraum===0?w=16:a.Beurteilungszeitraum===1?w=8:a.Beurteilungszeitraum===2&&(w=1),a.Zeiteinheit===0?A=a.Einwirkzeit/3600:a.Zeiteinheit===1?A=a.Einwirkzeit/60:(a.Zeiteinheit===2||console.log("WARNING: Unknown time unit for ESQ",a),A=a.Einwirkzeit);const N=A>0?10*Math.log10(A/w):0,z=a.Ruhezeitzuschlag?1.9:0,k=a.Z_Tonhaltigkeit,M=a.Z_Impulshaltigkeit,B=f+g-S-_-D+N+z+k+M;if(B>0){const P=Math.pow(10,.1*B);i+=P}}}return i}getAlphaAtm(t){return t>=0&&t<=8?.1:t>=9&&t<=11?.4:t>=12&&t<=14?1:t>=15&&t<=17?1.9:t>=18&&t<=20?3.7:t>=21&&t<=23?9.7:t>=24&&t<=26?32.8:t>=27&&t<=32?117:0}getAC(t){return{0:-1e6,1:-1e6,2:-1e6,3:-1e6,4:-1e6,5:-1e6,6:-38.1,7:-37.6,8:-34.9,9:-20.7,10:-28.9,11:-28.9,12:-22.9,13:-26,14:-22.7,15:-21.3,16:-20,17:-17.6,18:-15.9,19:-13.6,20:-11.9,21:-10.7,22:-9.8,23:-9.4,24:-9.8,25:-10.4,26:-10.3,27:-10.7,28:-11.5,29:-12.5,30:-14.8,31:-19.5,32:-22.2}[t]||0}getDCpos(t){return t>=0&&t<=5?-1e6:t>=6&&t<=8?-44.1+4.77:t>=9&&t<=11?-33+4.77:t>=12&&t<=14?-20.5+4.77:t>=15&&t<=17?-13.1+4.77:t>=18&&t<=20?-8+4.77:t>=21&&t<=23?-5.7+4.77:t>=24&&t<=26?-5.9+4.77:t>=27&&t<=29?-6+4.77:t>=30&&t<=32?-14.5+4.77:0}getDCneg(t){return t>=0&&t<=14?-1e6:t>=15&&t<=17?-25.4+4.77:t>=18&&t<=20?-21.2+4.77:t>=21&&t<=23?-17+4.77:t>=24&&t<=26?-7.2+4.77:t>=27&&t<=29?-4.3+4.77:t>=30&&t<=32?-3.8+4.77:0}getLwAF(t,n){switch(n){case 1:return this.getAC(t);case 2:return this.getDCpos(t);case 3:return this.getDCneg(t);default:return this.getAC(t)}}getStrF(t){return["12.5","16","20","25","31.5","40","50","63","80","100","125","160","200","250","315","400","500","630","800","1000","1250","1600","2000","2500","3150","4000","5000","6300","8000","10000","12500","16000","20000"][t]||"unknown"}getLambdaAbsch(t){const i=[12.5,16,20,25,31.5,40,50,63,80,100,125,160,200,250,315,400,500,630,800,1e3,1250,1600,2e3,2500,3150,4e3,5e3,6300,8e3,1e4,12500,16e3,2e4][t];return i?340/i:340/1e3}berechneAgrF0124(t,n,i,a){let l=4.8-2*t/n*(17+300/n);return l<0&&(l=0),l}static GKVector3d_Abstand(t,n){const i=n.GK.Rechts-t.GK.Rechts,a=n.GK.Hoch-t.GK.Hoch,l=n.z-t.z;return Math.sqrt(i*i+a*a+l*l)}static GKVector2d_Abstand(t,n){const i=n.Rechts-t.Rechts,a=n.Hoch-t.Hoch;return Math.sqrt(i*i+a*a)}static GKVector3d_Richtungsvektor(t,n){return{GK:{Rechts:n.GK.Rechts-t.GK.Rechts,Hoch:n.GK.Hoch-t.GK.Hoch},z:n.z-t.z}}static GKVector3d_Add(t,n){return{GK:{Rechts:t.GK.Rechts+n.GK.Rechts,Hoch:t.GK.Hoch+n.GK.Hoch},z:t.z+n.z}}}class yc{dreiecke;hPunkte;dgmKanten=[];constructor(t,n){this.dreiecke=t||[],this.hPunkte=n||[],this.dreiecke.length>0&&this.generateEdgesFromTriangles()}setDGMKante(t){t&&t.length>0&&(this.dgmKanten=t)}get DGMKante(){return this.dgmKanten}generateEdgesFromTriangles(){const t=new Map;for(const n of this.dreiecke){if(!n||!n.A||!n.B||!n.C)continue;const i=[[n.A,n.B],[n.B,n.C],[n.C,n.A]];for(const[a,l]of i){const c=a.HP.lfdNummer,f=l.HP.lfdNummer,d=c<f?`${c}-${f}`:`${f}-${c}`;if(t.has(d)){const h=t.get(d);h.DreieckB===-1&&(h.DreieckB=n.LfdNummer)}else{const h={EckeA:{Nummer:a.Nummer,HP:{lfdNummer:a.HP.lfdNummer}},EckeB:{Nummer:l.Nummer,HP:{lfdNummer:l.HP.lfdNummer}},DreieckA:n.LfdNummer,DreieckB:-1};t.set(d,h)}}}this.dgmKanten=Array.from(t.values())}berechneHoeheDGM(t){for(const n of this.dreiecke){if(!n||n.LfdNummer===0)continue;const i=this.getPointFromHLinie(n.A),a=this.getPointFromHLinie(n.B),l=this.getPointFromHLinie(n.C);if(!(!i||!a||!l)&&this.isPointInTriangle(t,i.GK,a.GK,l.GK))return this.interpolateHeight(t,i,a,l)}return this.getNearestPointHeight(t)}getPointFromHLinie(t){if(!t||!t.HP)return null;const n=t.HP.lfdNummer;if(n===0)return null;const i=this.hPunkte.find(a=>a.LfdNummer===n);return i?i.GK_Vektor:null}isPointInTriangle(t,n,i,a){const l=a.Rechts-n.Rechts,c=a.Hoch-n.Hoch,f=i.Rechts-n.Rechts,d=i.Hoch-n.Hoch,h=t.Rechts-n.Rechts,m=t.Hoch-n.Hoch,g=l*l+c*c,_=l*f+c*d,x=l*h+c*m,D=f*f+d*d,y=f*h+d*m,S=1/(g*D-_*_),w=(D*x-_*y)*S,A=(g*y-_*x)*S;return w>=0&&A>=0&&w+A<=1}interpolateHeight(t,n,i,a){const l=a.GK.Rechts-n.GK.Rechts,c=a.GK.Hoch-n.GK.Hoch,f=i.GK.Rechts-n.GK.Rechts,d=i.GK.Hoch-n.GK.Hoch,h=t.Rechts-n.GK.Rechts,m=t.Hoch-n.GK.Hoch,g=l*l+c*c,_=l*f+c*d,x=l*h+c*m,D=f*f+d*d,y=f*h+d*m,S=1/(g*D-_*_),w=(D*x-_*y)*S,A=(g*y-_*x)*S;return(1-w-A)*n.z+A*i.z+w*a.z}getNearestPointHeight(t){if(this.hPunkte.length===0)return 0;let n=Number.MAX_VALUE,i=0;for(const a of this.hPunkte){if(!a||a.LfdNummer===0)continue;const l=a.GK_Vektor.GK.Rechts-t.Rechts,c=a.GK_Vektor.GK.Hoch-t.Hoch,f=Math.sqrt(l*l+c*c);f<n&&(n=f,i=a.GK_Vektor.z)}return i}findEdgeIntersections(t,n){const i=[];for(let a=0;a<this.dgmKanten.length;a++){const l=this.dgmKanten[a];if(!l)continue;const c=this.getPointFromHLinie(l.EckeA),f=this.getPointFromHLinie(l.EckeB);if(!c||!f)continue;const d=this.lineSegmentIntersection(t,n,c.GK,f.GK);if(d){const h=d.Rechts-t.Rechts,m=d.Hoch-t.Hoch,g=Math.sqrt(h*h+m*m),_=this.getParameterOnLineSegment(c.GK,f.GK,d),x=c.z+_*(f.z-c.z);i.push({distance:g,point:{GK:d,z:x},edgeIndex:a})}}return i.sort((a,l)=>a.distance-l.distance),i}lineSegmentIntersection(t,n,i,a){const l=t.Rechts,c=t.Hoch,f=n.Rechts,d=n.Hoch,h=i.Rechts,m=i.Hoch,g=a.Rechts,_=a.Hoch,x=(l-f)*(m-_)-(c-d)*(h-g);if(Math.abs(x)<1e-10)return null;const D=((l-h)*(m-_)-(c-m)*(h-g))/x,y=-((l-f)*(c-m)-(c-d)*(l-h))/x;return D>=0&&D<=1&&y>=0&&y<=1?{Rechts:l+D*(f-l),Hoch:c+D*(d-c)}:null}getParameterOnLineSegment(t,n,i){const a=n.Rechts-t.Rechts,l=n.Hoch-t.Hoch;return Math.abs(a)>Math.abs(l)?(i.Rechts-t.Rechts)/a:(i.Hoch-t.Hoch)/l}}function $h(){return $h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$h.apply(null,arguments)}var qb={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function lC(e,t){if(Vh(e,t))return e[t];throw typeof e[t]=="function"&&cC(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function uC(e,t,n){if(Vh(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function Vh(e,t){return!fC(e)&&!Array.isArray(e)?!1:Fc(hC,t)?!0:!(t in Object.prototype||t in Function.prototype)}function cC(e,t){return e==null||typeof e[t]!="function"||Fc(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Fc(dC,t)?!0:!(t in Object.prototype||t in Function.prototype)}function fC(e){return typeof e=="object"&&e&&e.constructor===Object}var hC={length:!0,name:!0},dC={toString:!0,valueOf:!0,toLocaleString:!0};class mC{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return lC(this.wrappedObject,t)}set(t,n){return uC(this.wrappedObject,t,n),this}has(t){return Vh(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return pC(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){Vh(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function pC(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function tn(e){return typeof e=="number"}function bn(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function gC(e){return typeof e=="bigint"}function $b(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Vb(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Yb(e){return e&&e.constructor.prototype.isUnit===!0||!1}function $i(e){return typeof e=="string"}var _n=Array.isArray;function nn(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Yh(e){return Array.isArray(e)||nn(e)}function Xb(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Wb(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function vC(e){return e&&e.constructor.prototype.isRange===!0||!1}function kg(e){return e&&e.constructor.prototype.isIndex===!0||!1}function yC(e){return typeof e=="boolean"}function _C(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function xC(e){return e&&e.constructor.prototype.isHelp===!0||!1}function bC(e){return typeof e=="function"}function wC(e){return e instanceof Date}function DC(e){return e instanceof RegExp}function Tg(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!$b(e)&&!Vb(e))}function EC(e){return e?e instanceof Map||e instanceof mC||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function SC(e){return e===null}function CC(e){return e===void 0}function AC(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function NC(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function MC(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function kC(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function TC(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function zC(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function LC(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function FC(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function RC(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function jC(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function BC(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function PC(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function OC(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function IC(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function HC(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function GC(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function UC(e){return e&&e.constructor.prototype.isChain===!0||!1}function Ps(e){var t=typeof e;return t==="object"?e===null?"null":bn(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function $t(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return $t(n)});if(e instanceof Date)return new Date(e.valueOf());if(bn(e))return e;if(Tg(e))return ZC(e,$t);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function ZC(e,t){var n={};for(var i in e)Fc(e,i)&&(n[i]=t(e[i]));return n}function KC(e,t){for(var n in t)Fc(t,n)&&(e[n]=t[n]);return e}function Gs(e,t){var n,i,a;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(i=0,a=e.length;i<a;i++)if(!Gs(e[i],t[i]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Gs(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function Fc(e,t){return e&&Object.hasOwnProperty.call(e,t)}function qC(e,t){for(var n={},i=0;i<t.length;i++){var a=t[i],l=e[a];l!==void 0&&(n[a]=l)}return n}var $C=["Matrix","Array"],VC=["number","BigNumber","Fraction"],Zs=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(qb)};$h(Zs,qb,{MATRIX_OPTIONS:$C,NUMBER_OPTIONS:VC});function b_(){return!0}function ci(){return!1}function zl(){}const w_="Argument is not a typed-function.";function Qb(){function e(te){return typeof te=="object"&&te!==null&&te.constructor===Object}const t=[{name:"number",test:function(te){return typeof te=="number"}},{name:"string",test:function(te){return typeof te=="string"}},{name:"boolean",test:function(te){return typeof te=="boolean"}},{name:"Function",test:function(te){return typeof te=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(te){return te instanceof Date}},{name:"RegExp",test:function(te){return te instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(te){return te===null}},{name:"undefined",test:function(te){return te===void 0}}],n={name:"any",test:b_,isAny:!0};let i,a,l=0,c={createCount:0};function f(te){const le=i.get(te);if(le)return le;let ue='Unknown type "'+te+'"';const ve=te.toLowerCase();let Ne;for(Ne of a)if(Ne.toLowerCase()===ve){ue+='. Did you mean "'+Ne+'" ?';break}throw new TypeError(ue)}function d(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ue=le?f(le).index:a.length,ve=[];for(let Ce=0;Ce<te.length;++Ce){if(!te[Ce]||typeof te[Ce].name!="string"||typeof te[Ce].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Ie=te[Ce].name;if(i.has(Ie))throw new TypeError('Duplicate type name "'+Ie+'"');ve.push(Ie),i.set(Ie,{name:Ie,test:te[Ce].test,isAny:te[Ce].isAny,index:ue+Ce,conversionsTo:[]})}const Ne=a.slice(ue);a=a.slice(0,ue).concat(ve).concat(Ne);for(let Ce=ue+ve.length;Ce<a.length;++Ce)i.get(a[Ce]).index=Ce}function h(){i=new Map,a=[],l=0,d([n],!1)}h(),d(t);function m(){let te;for(te of a)i.get(te).conversionsTo=[];l=0}function g(te){const le=a.filter(ue=>{const ve=i.get(ue);return!ve.isAny&&ve.test(te)});return le.length?le:["any"]}function _(te){return te&&typeof te=="function"&&"_typedFunctionData"in te}function x(te,le,ue){if(!_(te))throw new TypeError(w_);const ve=ue&&ue.exact,Ne=Array.isArray(le)?le.join(","):le,Ce=z(Ne),Ie=S(Ce);if(!ve||Ie in te.signatures){const De=te._typedFunctionData.signatureMap.get(Ie);if(De)return De}const ye=Ce.length;let we;if(ve){we=[];let De;for(De in te.signatures)we.push(te._typedFunctionData.signatureMap.get(De))}else we=te._typedFunctionData.signatures;for(let De=0;De<ye;++De){const je=Ce[De],Xe=[];let Ye;for(Ye of we){const We=P(Ye.params,De);if(!(!We||je.restParam&&!We.restParam)){if(!We.hasAny){const gt=N(We);if(je.types.some(zt=>!gt.has(zt.name)))continue}Xe.push(Ye)}}if(we=Xe,we.length===0)break}let me;for(me of we)if(me.params.length<=ye)return me;throw new TypeError("Signature not found (signature: "+(te.name||"unnamed")+"("+S(Ce,", ")+"))")}function D(te,le,ue){return x(te,le,ue).implementation}function y(te,le){const ue=f(le);if(ue.test(te))return te;const ve=ue.conversionsTo;if(ve.length===0)throw new Error("There are no conversions to "+le+" defined.");for(let Ne=0;Ne<ve.length;Ne++)if(f(ve[Ne].from).test(te))return ve[Ne].convert(te);throw new Error("Cannot convert "+te+" to "+le)}function S(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return te.map(ue=>ue.name).join(le)}function w(te){const le=te.indexOf("...")===0,ve=(le?te.length>3?te.slice(3):"any":te).split("|").map(ye=>f(ye.trim()));let Ne=!1,Ce=le?"...":"";return{types:ve.map(function(ye){return Ne=ye.isAny||Ne,Ce+=ye.name+"|",{name:ye.name,typeIndex:ye.index,test:ye.test,isAny:ye.isAny,conversion:null,conversionIndex:-1}}),name:Ce.slice(0,-1),hasAny:Ne,hasConversion:!1,restParam:le}}function A(te){const le=te.types.map(Ie=>Ie.name),ue=ne(le);let ve=te.hasAny,Ne=te.name;const Ce=ue.map(function(Ie){const ye=f(Ie.from);return ve=ye.isAny||ve,Ne+="|"+Ie.from,{name:Ie.from,typeIndex:ye.index,test:ye.test,isAny:ye.isAny,conversion:Ie,conversionIndex:Ie.index}});return{types:te.types.concat(Ce),name:Ne,hasAny:ve,hasConversion:Ce.length>0,restParam:te.restParam}}function N(te){return te.typeSet||(te.typeSet=new Set,te.types.forEach(le=>te.typeSet.add(le.name))),te.typeSet}function z(te){const le=[];if(typeof te!="string")throw new TypeError("Signatures must be strings");const ue=te.trim();if(ue==="")return le;const ve=ue.split(",");for(let Ne=0;Ne<ve.length;++Ne){const Ce=w(ve[Ne].trim());if(Ce.restParam&&Ne!==ve.length-1)throw new SyntaxError('Unexpected rest parameter "'+ve[Ne]+'": only allowed for the last parameter');if(Ce.types.length===0)return null;le.push(Ce)}return le}function k(te){const le=Ge(te);return le?le.restParam:!1}function M(te){if(!te||te.types.length===0)return b_;if(te.types.length===1)return f(te.types[0].name).test;if(te.types.length===2){const le=f(te.types[0].name).test,ue=f(te.types[1].name).test;return function(Ne){return le(Ne)||ue(Ne)}}else{const le=te.types.map(function(ue){return f(ue.name).test});return function(ve){for(let Ne=0;Ne<le.length;Ne++)if(le[Ne](ve))return!0;return!1}}}function B(te){let le,ue,ve;if(k(te)){le=Le(te).map(M);const Ne=le.length,Ce=M(Ge(te)),Ie=function(ye){for(let we=Ne;we<ye.length;we++)if(!Ce(ye[we]))return!1;return!0};return function(we){for(let me=0;me<le.length;me++)if(!le[me](we[me]))return!1;return Ie(we)&&we.length>=Ne+1}}else return te.length===0?function(Ce){return Ce.length===0}:te.length===1?(ue=M(te[0]),function(Ce){return ue(Ce[0])&&Ce.length===1}):te.length===2?(ue=M(te[0]),ve=M(te[1]),function(Ce){return ue(Ce[0])&&ve(Ce[1])&&Ce.length===2}):(le=te.map(M),function(Ce){for(let Ie=0;Ie<le.length;Ie++)if(!le[Ie](Ce[Ie]))return!1;return Ce.length===le.length})}function P(te,le){return le<te.length?te[le]:k(te)?Ge(te):null}function R(te,le){const ue=P(te,le);return ue?N(ue):new Set}function H(te){return te.conversion===null||te.conversion===void 0}function U(te,le){const ue=new Set;return te.forEach(ve=>{const Ne=R(ve.params,le);let Ce;for(Ce of Ne)ue.add(Ce)}),ue.has("any")?["any"]:Array.from(ue)}function I(te,le,ue){let ve,Ne;const Ce=te||"unnamed";let Ie=ue,ye;for(ye=0;ye<le.length;ye++){const je=[];if(Ie.forEach(Xe=>{const Ye=P(Xe.params,ye),We=M(Ye);(ye<Xe.params.length||k(Xe.params))&&We(le[ye])&&je.push(Xe)}),je.length===0){if(Ne=U(Ie,ye),Ne.length>0){const Xe=g(le[ye]);return ve=new TypeError("Unexpected type of argument in function "+Ce+" (expected: "+Ne.join(" or ")+", actual: "+Xe.join(" | ")+", index: "+ye+")"),ve.data={category:"wrongType",fn:Ce,index:ye,actual:Xe,expected:Ne},ve}}else Ie=je}const we=Ie.map(function(je){return k(je.params)?1/0:je.params.length});if(le.length<Math.min.apply(null,we))return Ne=U(Ie,ye),ve=new TypeError("Too few arguments in function "+Ce+" (expected: "+Ne.join(" or ")+", index: "+le.length+")"),ve.data={category:"tooFewArgs",fn:Ce,index:le.length,expected:Ne},ve;const me=Math.max.apply(null,we);if(le.length>me)return ve=new TypeError("Too many arguments in function "+Ce+" (expected: "+me+", actual: "+le.length+")"),ve.data={category:"tooManyArgs",fn:Ce,index:le.length,expectedLength:me},ve;const De=[];for(let je=0;je<le.length;++je)De.push(g(le[je]).join("|"));return ve=new TypeError('Arguments of type "'+De.join(", ")+'" do not match any of the defined signatures of function '+Ce+"."),ve.data={category:"mismatch",actual:De},ve}function X(te){let le=a.length+1;for(let ue=0;ue<te.types.length;ue++)H(te.types[ue])&&(le=Math.min(le,te.types[ue].typeIndex));return le}function j(te){let le=l+1;for(let ue=0;ue<te.types.length;ue++)H(te.types[ue])||(le=Math.min(le,te.types[ue].conversionIndex));return le}function J(te,le){if(te.hasAny){if(!le.hasAny)return 1}else if(le.hasAny)return-1;if(te.restParam){if(!le.restParam)return 1}else if(le.restParam)return-1;if(te.hasConversion){if(!le.hasConversion)return 1}else if(le.hasConversion)return-1;const ue=X(te)-X(le);if(ue<0)return-1;if(ue>0)return 1;const ve=j(te)-j(le);return ve<0?-1:ve>0?1:0}function q(te,le){const ue=te.params,ve=le.params,Ne=Ge(ue),Ce=Ge(ve),Ie=k(ue),ye=k(ve);if(Ie&&Ne.hasAny){if(!ye||!Ce.hasAny)return 1}else if(ye&&Ce.hasAny)return-1;let we=0,me=0,De;for(De of ue)De.hasAny&&++we,De.hasConversion&&++me;let je=0,Xe=0;for(De of ve)De.hasAny&&++je,De.hasConversion&&++Xe;if(we!==je)return we-je;if(Ie&&Ne.hasConversion){if(!ye||!Ce.hasConversion)return 1}else if(ye&&Ce.hasConversion)return-1;if(me!==Xe)return me-Xe;if(Ie){if(!ye)return 1}else if(ye)return-1;const Ye=(ue.length-ve.length)*(Ie?-1:1);if(Ye!==0)return Ye;const We=[];let gt=0;for(let Ut=0;Ut<ue.length;++Ut){const It=J(ue[Ut],ve[Ut]);We.push(It),gt+=It}if(gt!==0)return gt;let zt;for(zt of We)if(zt!==0)return zt;return 0}function ne(te){if(te.length===0)return[];const le=te.map(f);te.length>1&&le.sort((Ne,Ce)=>Ne.index-Ce.index);let ue=le[0].conversionsTo;if(te.length===1)return ue;ue=ue.concat([]);const ve=new Set(te);for(let Ne=1;Ne<le.length;++Ne){let Ce;for(Ce of le[Ne].conversionsTo)ve.has(Ce.from)||(ue.push(Ce),ve.add(Ce.from))}return ue}function V(te,le){let ue=le;if(te.some(Ne=>Ne.hasConversion)){const Ne=k(te),Ce=te.map(Q);ue=function(){const ye=[],we=Ne?arguments.length-1:arguments.length;for(let me=0;me<we;me++)ye[me]=Ce[me](arguments[me]);return Ne&&(ye[we]=arguments[we].map(Ce[we])),le.apply(this,ye)}}let ve=ue;if(k(te)){const Ne=te.length-1;ve=function(){return ue.apply(this,Ke(arguments,0,Ne).concat([Ke(arguments,Ne)]))}}return ve}function Q(te){let le,ue,ve,Ne;const Ce=[],Ie=[];switch(te.types.forEach(function(ye){ye.conversion&&(Ce.push(f(ye.conversion.from).test),Ie.push(ye.conversion.convert))}),Ie.length){case 0:return function(we){return we};case 1:return le=Ce[0],ve=Ie[0],function(we){return le(we)?ve(we):we};case 2:return le=Ce[0],ue=Ce[1],ve=Ie[0],Ne=Ie[1],function(we){return le(we)?ve(we):ue(we)?Ne(we):we};default:return function(we){for(let me=0;me<Ie.length;me++)if(Ce[me](we))return Ie[me](we);return we}}}function Z(te){function le(ue,ve,Ne){if(ve<ue.length){const Ce=ue[ve];let Ie=[];if(Ce.restParam){const ye=Ce.types.filter(H);ye.length<Ce.types.length&&Ie.push({types:ye,name:"..."+ye.map(we=>we.name).join("|"),hasAny:ye.some(we=>we.isAny),hasConversion:!1,restParam:!0}),Ie.push(Ce)}else Ie=Ce.types.map(function(ye){return{types:[ye],name:ye.name,hasAny:ye.isAny,hasConversion:ye.conversion,restParam:!1}});return $e(Ie,function(ye){return le(ue,ve+1,Ne.concat([ye]))})}else return[Ne]}return le(te,0,[])}function $(te,le){const ue=Math.max(te.length,le.length);for(let ye=0;ye<ue;ye++){const we=R(te,ye),me=R(le,ye);let De=!1,je;for(je of me)if(we.has(je)){De=!0;break}if(!De)return!1}const ve=te.length,Ne=le.length,Ce=k(te),Ie=k(le);return Ce?Ie?ve===Ne:Ne>=ve:Ie?ve>=Ne:ve===Ne}function ee(te){return te.map(le=>ae(le)?ke(le.referToSelf.callback):Se(le)?G(le.referTo.references,le.referTo.callback):le)}function se(te,le,ue){const ve=[];let Ne;for(Ne of te){let Ce=ue[Ne];if(typeof Ce!="number")throw new TypeError('No definition for referenced signature "'+Ne+'"');if(Ce=le[Ce],typeof Ce!="function")return!1;ve.push(Ce)}return ve}function oe(te,le,ue){const ve=ee(te),Ne=new Array(ve.length).fill(!1);let Ce=!0;for(;Ce;){Ce=!1;let Ie=!0;for(let ye=0;ye<ve.length;++ye){if(Ne[ye])continue;const we=ve[ye];if(ae(we))ve[ye]=we.referToSelf.callback(ue),ve[ye].referToSelf=we.referToSelf,Ne[ye]=!0,Ie=!1;else if(Se(we)){const me=se(we.referTo.references,ve,le);me?(ve[ye]=we.referTo.callback.apply(this,me),ve[ye].referTo=we.referTo,Ne[ye]=!0,Ie=!1):Ce=!0}}if(Ie&&Ce)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ve}function he(te){const le=/\bthis(\(|\.signatures\b)/;Object.keys(te).forEach(ue=>{const ve=te[ue];if(le.test(ve.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ge(te,le){if(c.createCount++,Object.keys(le).length===0)throw new SyntaxError("No signatures provided");c.warnAgainstDeprecatedThis&&he(le);const ue=[],ve=[],Ne={},Ce=[];let Ie;for(Ie in le){if(!Object.prototype.hasOwnProperty.call(le,Ie))continue;const Ft=z(Ie);if(!Ft)continue;ue.forEach(function(Kn){if($(Kn,Ft))throw new TypeError('Conflicting signatures "'+S(Kn)+'" and "'+S(Ft)+'".')}),ue.push(Ft);const Fn=ve.length;ve.push(le[Ie]);const Ha=Ft.map(A);let yi;for(yi of Z(Ha)){const Kn=S(yi);Ce.push({params:yi,name:Kn,fn:Fn}),yi.every(sa=>!sa.hasConversion)&&(Ne[Kn]=Fn)}}Ce.sort(q);const ye=oe(ve,Ne,Lr);let we;for(we in Ne)Object.prototype.hasOwnProperty.call(Ne,we)&&(Ne[we]=ye[Ne[we]]);const me=[],De=new Map;for(we of Ce)De.has(we.name)||(we.fn=ye[we.fn],me.push(we),De.set(we.name,we));const je=me[0]&&me[0].params.length<=2&&!k(me[0].params),Xe=me[1]&&me[1].params.length<=2&&!k(me[1].params),Ye=me[2]&&me[2].params.length<=2&&!k(me[2].params),We=me[3]&&me[3].params.length<=2&&!k(me[3].params),gt=me[4]&&me[4].params.length<=2&&!k(me[4].params),zt=me[5]&&me[5].params.length<=2&&!k(me[5].params),Ut=je&&Xe&&Ye&&We&&gt&&zt;for(let Ft=0;Ft<me.length;++Ft)me[Ft].test=B(me[Ft].params);const It=je?M(me[0].params[0]):ci,rn=Xe?M(me[1].params[0]):ci,zn=Ye?M(me[2].params[0]):ci,zr=We?M(me[3].params[0]):ci,aa=gt?M(me[4].params[0]):ci,Vs=zt?M(me[5].params[0]):ci,Ys=je?M(me[0].params[1]):ci,Uo=Xe?M(me[1].params[1]):ci,Xs=Ye?M(me[2].params[1]):ci,Qr=We?M(me[3].params[1]):ci,Dn=gt?M(me[4].params[1]):ci,Ln=zt?M(me[5].params[1]):ci;for(let Ft=0;Ft<me.length;++Ft)me[Ft].implementation=V(me[Ft].params,me[Ft].fn);const Fi=je?me[0].implementation:zl,nr=Xe?me[1].implementation:zl,ut=Ye?me[2].implementation:zl,Zo=We?me[3].implementation:zl,Ws=gt?me[4].implementation:zl,Ri=zt?me[5].implementation:zl,Ia=je?me[0].params.length:-1,Jr=Xe?me[1].params.length:-1,mi=Ye?me[2].params.length:-1,br=We?me[3].params.length:-1,pi=gt?me[4].params.length:-1,hn=zt?me[5].params.length:-1,Ko=Ut?6:0,qo=me.length,gi=me.map(Ft=>Ft.test),vi=me.map(Ft=>Ft.implementation),yu=function(){for(let Fn=Ko;Fn<qo;Fn++)if(gi[Fn](arguments))return vi[Fn].apply(this,arguments);return c.onMismatch(te,arguments,me)};function Lr(Ft,Fn){return arguments.length===Ia&&It(Ft)&&Ys(Fn)?Fi.apply(this,arguments):arguments.length===Jr&&rn(Ft)&&Uo(Fn)?nr.apply(this,arguments):arguments.length===mi&&zn(Ft)&&Xs(Fn)?ut.apply(this,arguments):arguments.length===br&&zr(Ft)&&Qr(Fn)?Zo.apply(this,arguments):arguments.length===pi&&aa(Ft)&&Dn(Fn)?Ws.apply(this,arguments):arguments.length===hn&&Vs(Ft)&&Ln(Fn)?Ri.apply(this,arguments):yu.apply(this,arguments)}try{Object.defineProperty(Lr,"name",{value:te})}catch{}return Lr.signatures=Ne,Lr._typedFunctionData={signatures:me,signatureMap:De},Lr}function Re(te,le,ue){throw I(te,le,ue)}function Le(te){return Ke(te,0,te.length-1)}function Ge(te){return te[te.length-1]}function Ke(te,le,ue){return Array.prototype.slice.call(te,le,ue)}function Qe(te,le){for(let ue=0;ue<te.length;ue++)if(le(te[ue]))return te[ue]}function $e(te,le){return Array.prototype.concat.apply([],te.map(le))}function Ve(){const te=Le(arguments).map(ue=>S(z(ue))),le=Ge(arguments);if(typeof le!="function")throw new TypeError("Callback function expected as last argument");return G(te,le)}function G(te,le){return{referTo:{references:te,callback:le}}}function ke(te){if(typeof te!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:te}}}function Se(te){return te&&typeof te.referTo=="object"&&Array.isArray(te.referTo.references)&&typeof te.referTo.callback=="function"}function ae(te){return te&&typeof te.referToSelf=="object"&&typeof te.referToSelf.callback=="function"}function ie(te,le){if(!te)return le;if(le&&le!==te){const ue=new Error("Function names do not match (expected: "+te+", actual: "+le+")");throw ue.data={actual:le,expected:te},ue}return te}function de(te){let le;for(const ue in te)Object.prototype.hasOwnProperty.call(te,ue)&&(_(te[ue])||typeof te[ue].signature=="string")&&(le=ie(le,te[ue].name));return le}function Fe(te,le){let ue;for(ue in le)if(Object.prototype.hasOwnProperty.call(le,ue)){if(ue in te&&le[ue]!==te[ue]){const ve=new Error('Signature "'+ue+'" is defined twice');throw ve.data={signature:ue,sourceFunction:le[ue],destFunction:te[ue]},ve}te[ue]=le[ue]}}const Oe=c;c=function(te){const le=typeof te=="string",ue=le?1:0;let ve=le?te:"";const Ne={};for(let Ce=ue;Ce<arguments.length;++Ce){const Ie=arguments[Ce];let ye={},we;if(typeof Ie=="function"?(we=Ie.name,typeof Ie.signature=="string"?ye[Ie.signature]=Ie:_(Ie)&&(ye=Ie.signatures)):e(Ie)&&(ye=Ie,le||(we=de(Ie))),Object.keys(ye).length===0){const me=new TypeError("Argument to 'typed' at index "+Ce+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw me.data={index:Ce,argument:Ie},me}le||(ve=ie(ve,we)),Fe(Ne,ye)}return ge(ve||"",Ne)},c.create=Qb,c.createCount=Oe.createCount,c.onMismatch=Re,c.throwMismatchError=Re,c.createError=I,c.clear=h,c.clearConversions=m,c.addTypes=d,c._findType=f,c.referTo=Ve,c.referToSelf=ke,c.convert=y,c.findSignature=x,c.find=D,c.isTypedFunction=_,c.warnAgainstDeprecatedThis=!0,c.addType=function(te,le){let ue="any";le!==!1&&i.has("Object")&&(ue="Object"),c.addTypes([te],ue)};function xe(te){if(!te||typeof te.from!="string"||typeof te.to!="string"||typeof te.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(te.to===te.from)throw new SyntaxError('Illegal to define conversion from "'+te.from+'" to itself.')}return c.addConversion=function(te){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};xe(te);const ue=f(te.to),ve=ue.conversionsTo.find(Ne=>Ne.from===te.from);if(ve)if(le&&le.override)c.removeConversion({from:ve.from,to:te.to,convert:ve.convert});else throw new Error('There is already a conversion from "'+te.from+'" to "'+ue.name+'"');ue.conversionsTo.push({from:te.from,convert:te.convert,index:l++})},c.addConversions=function(te,le){te.forEach(ue=>c.addConversion(ue,le))},c.removeConversion=function(te){xe(te);const le=f(te.to),ue=Qe(le.conversionsTo,Ne=>Ne.from===te.from);if(!ue)throw new Error("Attempt to remove nonexistent conversion from "+te.from+" to "+te.to);if(ue.convert!==te.convert)throw new Error("Conversion to remove does not match existing conversion");const ve=le.conversionsTo.indexOf(ue);le.conversionsTo.splice(ve,1)},c.resolve=function(te,le){if(!_(te))throw new TypeError(w_);const ue=te._typedFunctionData.signatures;for(let ve=0;ve<ue.length;++ve)if(ue[ve].test(le))return ue[ve];return null},c}const Xh=Qb();function tt(e,t,n,i){function a(l){var c=qC(l,t.map(WC));return YC(e,t,l),n(c)}return a.isFactory=!0,a.fn=e,a.dependencies=t.slice().sort(),i&&(a.meta=i),a}function YC(e,t,n){var i=t.filter(l=>!XC(l)).every(l=>n[l]!==void 0);if(!i){var a=t.filter(l=>n[l]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(a.map(l=>'"'.concat(l,'"')).join(", "),"."))}}function XC(e){return e&&e[0]==="?"}function WC(e){return e&&e[0]==="?"?e.slice(1):e}function xn(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function a0(e,t,n){var i={2:"0b",8:"0o",16:"0x"},a=i[t],l="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!xn(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!xn(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),l="i".concat(n)}var c="";return e<0&&(e=-e,c="-"),"".concat(c).concat(a).concat(e.toString(t)).concat(l)}function L0(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:i,wordSize:a}=Jb(t);switch(n){case"fixed":return JC(e,i);case"exponential":return e2(e,i);case"engineering":return QC(e,i);case"bin":return a0(e,2,a);case"oct":return a0(e,8,a);case"hex":return a0(e,16,a);case"auto":return eA(e,i,t).replace(/((\.\d*?)(0+))($|e)/,function(){var l=arguments[2],c=arguments[4];return l!=="."?l+c:c});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Jb(e){var t="auto",n,i;if(e!==void 0)if(tn(e))n=e;else if(bn(e))n=e.toNumber();else if(Tg(e))e.precision!==void 0&&(n=D_(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(i=D_(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:i}}function Rd(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],i=t[2],a=parseFloat(t[4]||"0"),l=i.indexOf(".");a+=l!==-1?l-1:i.length-1;var c=i.replace(".","").replace(/^0*/,function(f){return a-=f.length,""}).replace(/0*$/,"").split("").map(function(f){return parseInt(f)});return c.length===0&&(c.push(0),a++),{sign:n,coefficients:c,exponent:a}}function QC(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Rd(e),i=jd(n,t),a=i.exponent,l=i.coefficients,c=a%3===0?a:a<0?a-3-a%3:a-a%3;if(tn(t))for(;t>l.length||a-c+1>l.length;)l.push(0);else for(var f=Math.abs(a-c)-(l.length-1),d=0;d<f;d++)l.push(0);for(var h=Math.abs(a-c),m=1;h>0;)m++,h--;var g=l.slice(m).join(""),_=tn(t)&&g.length||g.match(/[1-9]/)?"."+g:"",x=l.slice(0,m).join("")+_+"e"+(a>=0?"+":"")+c.toString();return i.sign+x}function JC(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Rd(e),i=typeof t=="number"?jd(n,n.exponent+1+t):n,a=i.coefficients,l=i.exponent+1,c=l+(t||0);return a.length<c&&(a=a.concat($l(c-a.length))),l<0&&(a=$l(-l+1).concat(a),l=1),l<a.length&&a.splice(l,0,l===0?"0.":"."),i.sign+a.join("")}function e2(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Rd(e),i=t?jd(n,t):n,a=i.coefficients,l=i.exponent;a.length<t&&(a=a.concat($l(t-a.length)));var c=a.shift();return i.sign+c+(a.length>0?"."+a.join(""):"")+"e"+(l>=0?"+":"")+l}function eA(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var i=E_(n?.lowerExp,-3),a=E_(n?.upperExp,5),l=Rd(e),c=t?jd(l,t):l;if(c.exponent<i||c.exponent>=a)return e2(e,t);var f=c.coefficients,d=c.exponent;f.length<t&&(f=f.concat($l(t-f.length))),f=f.concat($l(d-f.length+1+(f.length<t?t-f.length:0))),f=$l(-d).concat(f);var h=d>0?d:0;return h<f.length-1&&f.splice(h+1,0,"."),c.sign+f.join("")}function jd(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=n.coefficients;t<=0;)i.unshift(0),n.exponent++,t++;if(i.length>t){var a=i.splice(t,i.length-t);if(a[0]>=5){var l=t-1;for(i[l]++;i[l]===10;)i.pop(),l===0&&(i.unshift(0),n.exponent++,l++),l--,i[l]++}}return n}function $l(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function tA(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Fo(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),i)}function D_(e,t){if(tn(e))return e;if(bn(e))return e.toNumber();t()}function E_(e,t){return tn(e)?e:bn(e)?e.toNumber():t}var t2=function(){return t2=Xh.create,Xh},nA=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],rA=tt("typed",nA,function(t){var{BigNumber:n,Complex:i,DenseMatrix:a,Fraction:l}=t,c=t2();return c.clear(),c.addTypes([{name:"number",test:tn},{name:"Complex",test:$b},{name:"BigNumber",test:bn},{name:"bigint",test:gC},{name:"Fraction",test:Vb},{name:"Unit",test:Yb},{name:"identifier",test:f=>$i&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(f)},{name:"string",test:$i},{name:"Chain",test:UC},{name:"Array",test:_n},{name:"Matrix",test:nn},{name:"DenseMatrix",test:Xb},{name:"SparseMatrix",test:Wb},{name:"Range",test:vC},{name:"Index",test:kg},{name:"boolean",test:yC},{name:"ResultSet",test:_C},{name:"Help",test:xC},{name:"function",test:bC},{name:"Date",test:wC},{name:"RegExp",test:DC},{name:"null",test:SC},{name:"undefined",test:CC},{name:"AccessorNode",test:AC},{name:"ArrayNode",test:NC},{name:"AssignmentNode",test:MC},{name:"BlockNode",test:kC},{name:"ConditionalNode",test:TC},{name:"ConstantNode",test:zC},{name:"FunctionNode",test:FC},{name:"FunctionAssignmentNode",test:LC},{name:"IndexNode",test:RC},{name:"Node",test:jC},{name:"ObjectNode",test:BC},{name:"OperatorNode",test:PC},{name:"ParenthesisNode",test:OC},{name:"RangeNode",test:IC},{name:"RelationalNode",test:HC},{name:"SymbolNode",test:GC},{name:"Map",test:EC},{name:"Object",test:Tg}]),c.addConversions([{from:"number",to:"BigNumber",convert:function(d){if(n||vh(d),tA(d)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+d+"). Use function bignumber(x) to convert to BigNumber.");return new n(d)}},{from:"number",to:"Complex",convert:function(d){return i||yh(d),new i(d,0)}},{from:"BigNumber",to:"Complex",convert:function(d){return i||yh(d),new i(d.toNumber(),0)}},{from:"bigint",to:"number",convert:function(d){if(d>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+d+")");return Number(d)}},{from:"bigint",to:"BigNumber",convert:function(d){return n||vh(d),new n(d.toString())}},{from:"bigint",to:"Fraction",convert:function(d){return l||_h(d),new l(d)}},{from:"Fraction",to:"BigNumber",convert:function(d){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(d){return i||yh(d),new i(d.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(d){l||_h(d);var h=new l(d);if(h.valueOf()!==d)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+d+"). Use function fraction(x) to convert to Fraction.");return h}},{from:"string",to:"number",convert:function(d){var h=Number(d);if(isNaN(h))throw new Error('Cannot convert "'+d+'" to a number');return h}},{from:"string",to:"BigNumber",convert:function(d){n||vh(d);try{return new n(d)}catch{throw new Error('Cannot convert "'+d+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(d){try{return BigInt(d)}catch{throw new Error('Cannot convert "'+d+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(d){l||_h(d);try{return new l(d)}catch{throw new Error('Cannot convert "'+d+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(d){i||yh(d);try{return new i(d)}catch{throw new Error('Cannot convert "'+d+'" to Complex')}}},{from:"boolean",to:"number",convert:function(d){return+d}},{from:"boolean",to:"BigNumber",convert:function(d){return n||vh(d),new n(+d)}},{from:"boolean",to:"bigint",convert:function(d){return BigInt(+d)}},{from:"boolean",to:"Fraction",convert:function(d){return l||_h(d),new l(+d)}},{from:"boolean",to:"string",convert:function(d){return String(d)}},{from:"Array",to:"Matrix",convert:function(d){return a||iA(),new a(d)}},{from:"Matrix",to:"Array",convert:function(d){return d.valueOf()}}]),c.onMismatch=(f,d,h)=>{var m=c.createError(f,d,h);if(["wrongType","mismatch"].includes(m.data.category)&&d.length===1&&Yh(d[0])&&h.some(_=>!_.params.includes(","))){var g=new TypeError("Function '".concat(f,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(f,")'."));throw g.data=m.data,g}throw m},c.onMismatch=(f,d,h)=>{var m=c.createError(f,d,h);if(["wrongType","mismatch"].includes(m.data.category)&&d.length===1&&Yh(d[0])&&h.some(_=>!_.params.includes(","))){var g=new TypeError("Function '".concat(f,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(f,")'."));throw g.data=m.data,g}throw m},c});function vh(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function yh(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function iA(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function _h(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Zl=9e15,Ks=1e9,F0="0123456789abcdef",Wh="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Qh="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",R0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Zl,maxE:Zl,crypto:!1},n2,ja,xt=!0,Bd="[DecimalError] ",Us=Bd+"Invalid argument: ",r2=Bd+"Precision limit exceeded",i2=Bd+"crypto unavailable",a2="[object Decimal]",hr=Math.floor,Tn=Math.pow,aA=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,sA=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,oA=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,s2=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ki=1e7,mt=7,lA=9007199254740991,uA=Wh.length-1,j0=Qh.length-1,qe={toStringTag:a2};qe.absoluteValue=qe.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),ht(e)};qe.ceil=function(){return ht(new this.constructor(this),this.e+1,2)};qe.clampedTo=qe.clamp=function(e,t){var n,i=this,a=i.constructor;if(e=new a(e),t=new a(t),!e.s||!t.s)return new a(NaN);if(e.gt(t))throw Error(Us+t);return n=i.cmp(e),n<0?e:i.cmp(t)>0?t:new a(i)};qe.comparedTo=qe.cmp=function(e){var t,n,i,a,l=this,c=l.d,f=(e=new l.constructor(e)).d,d=l.s,h=e.s;if(!c||!f)return!d||!h?NaN:d!==h?d:c===f?0:!c^d<0?1:-1;if(!c[0]||!f[0])return c[0]?d:f[0]?-h:0;if(d!==h)return d;if(l.e!==e.e)return l.e>e.e^d<0?1:-1;for(i=c.length,a=f.length,t=0,n=i<a?i:a;t<n;++t)if(c[t]!==f[t])return c[t]>f[t]^d<0?1:-1;return i===a?0:i>a^d<0?1:-1};qe.cosine=qe.cos=function(){var e,t,n=this,i=n.constructor;return n.d?n.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+mt,i.rounding=1,n=cA(i,f2(i,n)),i.precision=e,i.rounding=t,ht(ja==2||ja==3?n.neg():n,e,t,!0)):new i(1):new i(NaN)};qe.cubeRoot=qe.cbrt=function(){var e,t,n,i,a,l,c,f,d,h,m=this,g=m.constructor;if(!m.isFinite()||m.isZero())return new g(m);for(xt=!1,l=m.s*Tn(m.s*m,1/3),!l||Math.abs(l)==1/0?(n=er(m.d),e=m.e,(l=(e-n.length+1)%3)&&(n+=l==1||l==-2?"0":"00"),l=Tn(n,1/3),e=hr((e+1)/3)-(e%3==(e<0?-1:2)),l==1/0?n="5e"+e:(n=l.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),i=new g(n),i.s=m.s):i=new g(l.toString()),c=(e=g.precision)+3;;)if(f=i,d=f.times(f).times(f),h=d.plus(m),i=Xt(h.plus(m).times(f),h.plus(d),c+2,1),er(f.d).slice(0,c)===(n=er(i.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!a&&n=="4999"){if(!a&&(ht(f,e+1,0),f.times(f).times(f).eq(m))){i=f;break}c+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(ht(i,e+1,1),t=!i.times(i).times(i).eq(m));break}return xt=!0,ht(i,e,g.rounding,t)};qe.decimalPlaces=qe.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-hr(this.e/mt))*mt,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};qe.dividedBy=qe.div=function(e){return Xt(this,new this.constructor(e))};qe.dividedToIntegerBy=qe.divToInt=function(e){var t=this,n=t.constructor;return ht(Xt(t,new n(e),0,1,1),n.precision,n.rounding)};qe.equals=qe.eq=function(e){return this.cmp(e)===0};qe.floor=function(){return ht(new this.constructor(this),this.e+1,3)};qe.greaterThan=qe.gt=function(e){return this.cmp(e)>0};qe.greaterThanOrEqualTo=qe.gte=function(e){var t=this.cmp(e);return t==1||t===0};qe.hyperbolicCosine=qe.cosh=function(){var e,t,n,i,a,l=this,c=l.constructor,f=new c(1);if(!l.isFinite())return new c(l.s?1/0:NaN);if(l.isZero())return f;n=c.precision,i=c.rounding,c.precision=n+Math.max(l.e,l.sd())+4,c.rounding=1,a=l.d.length,a<32?(e=Math.ceil(a/3),t=(1/Od(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),l=Ql(c,1,l.times(t),new c(1),!0);for(var d,h=e,m=new c(8);h--;)d=l.times(l),l=f.minus(d.times(m.minus(d.times(m))));return ht(l,c.precision=n,c.rounding=i,!0)};qe.hyperbolicSine=qe.sinh=function(){var e,t,n,i,a=this,l=a.constructor;if(!a.isFinite()||a.isZero())return new l(a);if(t=l.precision,n=l.rounding,l.precision=t+Math.max(a.e,a.sd())+4,l.rounding=1,i=a.d.length,i<3)a=Ql(l,2,a,a,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,a=a.times(1/Od(5,e)),a=Ql(l,2,a,a,!0);for(var c,f=new l(5),d=new l(16),h=new l(20);e--;)c=a.times(a),a=a.times(f.plus(c.times(d.times(c).plus(h))))}return l.precision=t,l.rounding=n,ht(a,t,n,!0)};qe.hyperbolicTangent=qe.tanh=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,Xt(n.sinh(),n.cosh(),i.precision=e,i.rounding=t)):new i(n.s)};qe.inverseCosine=qe.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,a=t.rounding;return n!==-1?n===0?e.isNeg()?Wi(t,i,a):new t(0):new t(NaN):e.isZero()?Wi(t,i+4,a).times(.5):(t.precision=i+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=i,t.rounding=a,e.times(2))};qe.inverseHyperbolicCosine=qe.acosh=function(){var e,t,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,xt=!1,n=n.times(n).minus(1).sqrt().plus(n),xt=!0,i.precision=e,i.rounding=t,n.ln()):new i(n)};qe.inverseHyperbolicSine=qe.asinh=function(){var e,t,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,xt=!1,n=n.times(n).plus(1).sqrt().plus(n),xt=!0,i.precision=e,i.rounding=t,n.ln())};qe.inverseHyperbolicTangent=qe.atanh=function(){var e,t,n,i,a=this,l=a.constructor;return a.isFinite()?a.e>=0?new l(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(e=l.precision,t=l.rounding,i=a.sd(),Math.max(i,e)<2*-a.e-1?ht(new l(a),e,t,!0):(l.precision=n=i-a.e,a=Xt(a.plus(1),new l(1).minus(a),n+e,1),l.precision=e+4,l.rounding=1,a=a.ln(),l.precision=e,l.rounding=t,a.times(.5))):new l(NaN)};qe.inverseSine=qe.asin=function(){var e,t,n,i,a=this,l=a.constructor;return a.isZero()?new l(a):(t=a.abs().cmp(1),n=l.precision,i=l.rounding,t!==-1?t===0?(e=Wi(l,n+4,i).times(.5),e.s=a.s,e):new l(NaN):(l.precision=n+6,l.rounding=1,a=a.div(new l(1).minus(a.times(a)).sqrt().plus(1)).atan(),l.precision=n,l.rounding=i,a.times(2)))};qe.inverseTangent=qe.atan=function(){var e,t,n,i,a,l,c,f,d,h=this,m=h.constructor,g=m.precision,_=m.rounding;if(h.isFinite()){if(h.isZero())return new m(h);if(h.abs().eq(1)&&g+4<=j0)return c=Wi(m,g+4,_).times(.25),c.s=h.s,c}else{if(!h.s)return new m(NaN);if(g+4<=j0)return c=Wi(m,g+4,_).times(.5),c.s=h.s,c}for(m.precision=f=g+10,m.rounding=1,n=Math.min(28,f/mt+2|0),e=n;e;--e)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(xt=!1,t=Math.ceil(f/mt),i=1,d=h.times(h),c=new m(h),a=h;e!==-1;)if(a=a.times(d),l=c.minus(a.div(i+=2)),a=a.times(d),c=l.plus(a.div(i+=2)),c.d[t]!==void 0)for(e=t;c.d[e]===l.d[e]&&e--;);return n&&(c=c.times(2<<n-1)),xt=!0,ht(c,m.precision=g,m.rounding=_,!0)};qe.isFinite=function(){return!!this.d};qe.isInteger=qe.isInt=function(){return!!this.d&&hr(this.e/mt)>this.d.length-2};qe.isNaN=function(){return!this.s};qe.isNegative=qe.isNeg=function(){return this.s<0};qe.isPositive=qe.isPos=function(){return this.s>0};qe.isZero=function(){return!!this.d&&this.d[0]===0};qe.lessThan=qe.lt=function(e){return this.cmp(e)<0};qe.lessThanOrEqualTo=qe.lte=function(e){return this.cmp(e)<1};qe.logarithm=qe.log=function(e){var t,n,i,a,l,c,f,d,h=this,m=h.constructor,g=m.precision,_=m.rounding,x=5;if(e==null)e=new m(10),t=!0;else{if(e=new m(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new m(NaN);t=e.eq(10)}if(n=h.d,h.s<0||!n||!n[0]||h.eq(1))return new m(n&&!n[0]?-1/0:h.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)l=!0;else{for(a=n[0];a%10===0;)a/=10;l=a!==1}if(xt=!1,f=g+x,c=js(h,f),i=t?Jh(m,f+10):js(e,f),d=Xt(c,i,f,1),Rc(d.d,a=g,_))do if(f+=10,c=js(h,f),i=t?Jh(m,f+10):js(e,f),d=Xt(c,i,f,1),!l){+er(d.d).slice(a+1,a+15)+1==1e14&&(d=ht(d,g+1,0));break}while(Rc(d.d,a+=10,_));return xt=!0,ht(d,g,_)};qe.minus=qe.sub=function(e){var t,n,i,a,l,c,f,d,h,m,g,_,x=this,D=x.constructor;if(e=new D(e),!x.d||!e.d)return!x.s||!e.s?e=new D(NaN):x.d?e.s=-e.s:e=new D(e.d||x.s!==e.s?x:NaN),e;if(x.s!=e.s)return e.s=-e.s,x.plus(e);if(h=x.d,_=e.d,f=D.precision,d=D.rounding,!h[0]||!_[0]){if(_[0])e.s=-e.s;else if(h[0])e=new D(x);else return new D(d===3?-0:0);return xt?ht(e,f,d):e}if(n=hr(e.e/mt),m=hr(x.e/mt),h=h.slice(),l=m-n,l){for(g=l<0,g?(t=h,l=-l,c=_.length):(t=_,n=m,c=h.length),i=Math.max(Math.ceil(f/mt),c)+2,l>i&&(l=i,t.length=1),t.reverse(),i=l;i--;)t.push(0);t.reverse()}else{for(i=h.length,c=_.length,g=i<c,g&&(c=i),i=0;i<c;i++)if(h[i]!=_[i]){g=h[i]<_[i];break}l=0}for(g&&(t=h,h=_,_=t,e.s=-e.s),c=h.length,i=_.length-c;i>0;--i)h[c++]=0;for(i=_.length;i>l;){if(h[--i]<_[i]){for(a=i;a&&h[--a]===0;)h[a]=ki-1;--h[a],h[i]+=ki}h[i]-=_[i]}for(;h[--c]===0;)h.pop();for(;h[0]===0;h.shift())--n;return h[0]?(e.d=h,e.e=Pd(h,n),xt?ht(e,f,d):e):new D(d===3?-0:0)};qe.modulo=qe.mod=function(e){var t,n=this,i=n.constructor;return e=new i(e),!n.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||n.d&&!n.d[0]?ht(new i(n),i.precision,i.rounding):(xt=!1,i.modulo==9?(t=Xt(n,e.abs(),0,3,1),t.s*=e.s):t=Xt(n,e,0,i.modulo,1),t=t.times(e),xt=!0,n.minus(t))};qe.naturalExponential=qe.exp=function(){return B0(this)};qe.naturalLogarithm=qe.ln=function(){return js(this)};qe.negated=qe.neg=function(){var e=new this.constructor(this);return e.s=-e.s,ht(e)};qe.plus=qe.add=function(e){var t,n,i,a,l,c,f,d,h,m,g=this,_=g.constructor;if(e=new _(e),!g.d||!e.d)return!g.s||!e.s?e=new _(NaN):g.d||(e=new _(e.d||g.s===e.s?g:NaN)),e;if(g.s!=e.s)return e.s=-e.s,g.minus(e);if(h=g.d,m=e.d,f=_.precision,d=_.rounding,!h[0]||!m[0])return m[0]||(e=new _(g)),xt?ht(e,f,d):e;if(l=hr(g.e/mt),i=hr(e.e/mt),h=h.slice(),a=l-i,a){for(a<0?(n=h,a=-a,c=m.length):(n=m,i=l,c=h.length),l=Math.ceil(f/mt),c=l>c?l+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=h.length,a=m.length,c-a<0&&(a=c,n=m,m=h,h=n),t=0;a;)t=(h[--a]=h[a]+m[a]+t)/ki|0,h[a]%=ki;for(t&&(h.unshift(t),++i),c=h.length;h[--c]==0;)h.pop();return e.d=h,e.e=Pd(h,i),xt?ht(e,f,d):e};qe.precision=qe.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Us+e);return n.d?(t=o2(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};qe.round=function(){var e=this,t=e.constructor;return ht(new t(e),e.e+1,t.rounding)};qe.sine=qe.sin=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+mt,i.rounding=1,n=hA(i,f2(i,n)),i.precision=e,i.rounding=t,ht(ja>2?n.neg():n,e,t,!0)):new i(NaN)};qe.squareRoot=qe.sqrt=function(){var e,t,n,i,a,l,c=this,f=c.d,d=c.e,h=c.s,m=c.constructor;if(h!==1||!f||!f[0])return new m(!h||h<0&&(!f||f[0])?NaN:f?c:1/0);for(xt=!1,h=Math.sqrt(+c),h==0||h==1/0?(t=er(f),(t.length+d)%2==0&&(t+="0"),h=Math.sqrt(t),d=hr((d+1)/2)-(d<0||d%2),h==1/0?t="5e"+d:(t=h.toExponential(),t=t.slice(0,t.indexOf("e")+1)+d),i=new m(t)):i=new m(h.toString()),n=(d=m.precision)+3;;)if(l=i,i=l.plus(Xt(c,l,n+2,1)).times(.5),er(l.d).slice(0,n)===(t=er(i.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!a&&t=="4999"){if(!a&&(ht(l,d+1,0),l.times(l).eq(c))){i=l;break}n+=4,a=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ht(i,d+1,1),e=!i.times(i).eq(c));break}return xt=!0,ht(i,d,m.rounding,e)};qe.tangent=qe.tan=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,n=n.sin(),n.s=1,n=Xt(n,new i(1).minus(n.times(n)).sqrt(),e+10,0),i.precision=e,i.rounding=t,ht(ja==2||ja==4?n.neg():n,e,t,!0)):new i(NaN)};qe.times=qe.mul=function(e){var t,n,i,a,l,c,f,d,h,m=this,g=m.constructor,_=m.d,x=(e=new g(e)).d;if(e.s*=m.s,!_||!_[0]||!x||!x[0])return new g(!e.s||_&&!_[0]&&!x||x&&!x[0]&&!_?NaN:!_||!x?e.s/0:e.s*0);for(n=hr(m.e/mt)+hr(e.e/mt),d=_.length,h=x.length,d<h&&(l=_,_=x,x=l,c=d,d=h,h=c),l=[],c=d+h,i=c;i--;)l.push(0);for(i=h;--i>=0;){for(t=0,a=d+i;a>i;)f=l[a]+x[i]*_[a-i-1]+t,l[a--]=f%ki|0,t=f/ki|0;l[a]=(l[a]+t)%ki|0}for(;!l[--c];)l.pop();return t?++n:l.shift(),e.d=l,e.e=Pd(l,n),xt?ht(e,g.precision,g.rounding):e};qe.toBinary=function(e,t){return zg(this,2,e,t)};qe.toDecimalPlaces=qe.toDP=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:(Mr(e,0,Ks),t===void 0?t=i.rounding:Mr(t,0,8),ht(n,e+n.e+1,t))};qe.toExponential=function(e,t){var n,i=this,a=i.constructor;return e===void 0?n=ea(i,!0):(Mr(e,0,Ks),t===void 0?t=a.rounding:Mr(t,0,8),i=ht(new a(i),e+1,t),n=ea(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};qe.toFixed=function(e,t){var n,i,a=this,l=a.constructor;return e===void 0?n=ea(a):(Mr(e,0,Ks),t===void 0?t=l.rounding:Mr(t,0,8),i=ht(new l(a),e+a.e+1,t),n=ea(i,!1,e+i.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};qe.toFraction=function(e){var t,n,i,a,l,c,f,d,h,m,g,_,x=this,D=x.d,y=x.constructor;if(!D)return new y(x);if(h=n=new y(1),i=d=new y(0),t=new y(i),l=t.e=o2(D)-x.e-1,c=l%mt,t.d[0]=Tn(10,c<0?mt+c:c),e==null)e=l>0?t:h;else{if(f=new y(e),!f.isInt()||f.lt(h))throw Error(Us+f);e=f.gt(t)?l>0?t:h:f}for(xt=!1,f=new y(er(D)),m=y.precision,y.precision=l=D.length*mt*2;g=Xt(f,t,0,1,1),a=n.plus(g.times(i)),a.cmp(e)!=1;)n=i,i=a,a=h,h=d.plus(g.times(a)),d=a,a=t,t=f.minus(g.times(a)),f=a;return a=Xt(e.minus(n),i,0,1,1),d=d.plus(a.times(h)),n=n.plus(a.times(i)),d.s=h.s=x.s,_=Xt(h,i,l,1).minus(x).abs().cmp(Xt(d,n,l,1).minus(x).abs())<1?[h,i]:[d,n],y.precision=m,xt=!0,_};qe.toHexadecimal=qe.toHex=function(e,t){return zg(this,16,e,t)};qe.toNearest=function(e,t){var n=this,i=n.constructor;if(n=new i(n),e==null){if(!n.d)return n;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:Mr(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(xt=!1,n=Xt(n,e,0,t,1).times(e),xt=!0,ht(n)):(e.s=n.s,n=e),n};qe.toNumber=function(){return+this};qe.toOctal=function(e,t){return zg(this,8,e,t)};qe.toPower=qe.pow=function(e){var t,n,i,a,l,c,f=this,d=f.constructor,h=+(e=new d(e));if(!f.d||!e.d||!f.d[0]||!e.d[0])return new d(Tn(+f,h));if(f=new d(f),f.eq(1))return f;if(i=d.precision,l=d.rounding,e.eq(1))return ht(f,i,l);if(t=hr(e.e/mt),t>=e.d.length-1&&(n=h<0?-h:h)<=lA)return a=l2(d,f,n,i),e.s<0?new d(1).div(a):ht(a,i,l);if(c=f.s,c<0){if(t<e.d.length-1)return new d(NaN);if((e.d[t]&1)==0&&(c=1),f.e==0&&f.d[0]==1&&f.d.length==1)return f.s=c,f}return n=Tn(+f,h),t=n==0||!isFinite(n)?hr(h*(Math.log("0."+er(f.d))/Math.LN10+f.e+1)):new d(n+"").e,t>d.maxE+1||t<d.minE-1?new d(t>0?c/0:0):(xt=!1,d.rounding=f.s=1,n=Math.min(12,(t+"").length),a=B0(e.times(js(f,i+n)),i),a.d&&(a=ht(a,i+5,1),Rc(a.d,i,l)&&(t=i+10,a=ht(B0(e.times(js(f,t+n)),t),t+5,1),+er(a.d).slice(i+1,i+15)+1==1e14&&(a=ht(a,i+1,0)))),a.s=c,xt=!0,d.rounding=l,ht(a,i,l))};qe.toPrecision=function(e,t){var n,i=this,a=i.constructor;return e===void 0?n=ea(i,i.e<=a.toExpNeg||i.e>=a.toExpPos):(Mr(e,1,Ks),t===void 0?t=a.rounding:Mr(t,0,8),i=ht(new a(i),e,t),n=ea(i,e<=i.e||i.e<=a.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+n:n};qe.toSignificantDigits=qe.toSD=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):(Mr(e,1,Ks),t===void 0?t=i.rounding:Mr(t,0,8)),ht(new i(n),e,t)};qe.toString=function(){var e=this,t=e.constructor,n=ea(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};qe.truncated=qe.trunc=function(){return ht(new this.constructor(this),this.e+1,1)};qe.valueOf=qe.toJSON=function(){var e=this,t=e.constructor,n=ea(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function er(e){var t,n,i,a=e.length-1,l="",c=e[0];if(a>0){for(l+=c,t=1;t<a;t++)i=e[t]+"",n=mt-i.length,n&&(l+=Ls(n)),l+=i;c=e[t],i=c+"",n=mt-i.length,n&&(l+=Ls(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}function Mr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Us+e)}function Rc(e,t,n,i){var a,l,c,f;for(l=e[0];l>=10;l/=10)--t;return--t<0?(t+=mt,a=0):(a=Math.ceil((t+1)/mt),t%=mt),l=Tn(10,mt-t),f=e[a]%l|0,i==null?t<3?(t==0?f=f/100|0:t==1&&(f=f/10|0),c=n<4&&f==99999||n>3&&f==49999||f==5e4||f==0):c=(n<4&&f+1==l||n>3&&f+1==l/2)&&(e[a+1]/l/100|0)==Tn(10,t-2)-1||(f==l/2||f==0)&&(e[a+1]/l/100|0)==0:t<4?(t==0?f=f/1e3|0:t==1?f=f/100|0:t==2&&(f=f/10|0),c=(i||n<4)&&f==9999||!i&&n>3&&f==4999):c=((i||n<4)&&f+1==l||!i&&n>3&&f+1==l/2)&&(e[a+1]/l/1e3|0)==Tn(10,t-3)-1,c}function jh(e,t,n){for(var i,a=[0],l,c=0,f=e.length;c<f;){for(l=a.length;l--;)a[l]*=t;for(a[0]+=F0.indexOf(e.charAt(c++)),i=0;i<a.length;i++)a[i]>n-1&&(a[i+1]===void 0&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}function cA(e,t){var n,i,a;if(t.isZero())return t;i=t.d.length,i<32?(n=Math.ceil(i/3),a=(1/Od(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),e.precision+=n,t=Ql(e,1,t.times(a),new e(1));for(var l=n;l--;){var c=t.times(t);t=c.times(c).minus(c).times(8).plus(1)}return e.precision-=n,t}var Xt=(function(){function e(i,a,l){var c,f=0,d=i.length;for(i=i.slice();d--;)c=i[d]*a+f,i[d]=c%l|0,f=c/l|0;return f&&i.unshift(f),i}function t(i,a,l,c){var f,d;if(l!=c)d=l>c?1:-1;else for(f=d=0;f<l;f++)if(i[f]!=a[f]){d=i[f]>a[f]?1:-1;break}return d}function n(i,a,l,c){for(var f=0;l--;)i[l]-=f,f=i[l]<a[l]?1:0,i[l]=f*c+i[l]-a[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,l,c,f,d){var h,m,g,_,x,D,y,S,w,A,N,z,k,M,B,P,R,H,U,I,X=i.constructor,j=i.s==a.s?1:-1,J=i.d,q=a.d;if(!J||!J[0]||!q||!q[0])return new X(!i.s||!a.s||(J?q&&J[0]==q[0]:!q)?NaN:J&&J[0]==0||!q?j*0:j/0);for(d?(x=1,m=i.e-a.e):(d=ki,x=mt,m=hr(i.e/x)-hr(a.e/x)),U=q.length,R=J.length,w=new X(j),A=w.d=[],g=0;q[g]==(J[g]||0);g++);if(q[g]>(J[g]||0)&&m--,l==null?(M=l=X.precision,c=X.rounding):f?M=l+(i.e-a.e)+1:M=l,M<0)A.push(1),D=!0;else{if(M=M/x+2|0,g=0,U==1){for(_=0,q=q[0],M++;(g<R||_)&&M--;g++)B=_*d+(J[g]||0),A[g]=B/q|0,_=B%q|0;D=_||g<R}else{for(_=d/(q[0]+1)|0,_>1&&(q=e(q,_,d),J=e(J,_,d),U=q.length,R=J.length),P=U,N=J.slice(0,U),z=N.length;z<U;)N[z++]=0;I=q.slice(),I.unshift(0),H=q[0],q[1]>=d/2&&++H;do _=0,h=t(q,N,U,z),h<0?(k=N[0],U!=z&&(k=k*d+(N[1]||0)),_=k/H|0,_>1?(_>=d&&(_=d-1),y=e(q,_,d),S=y.length,z=N.length,h=t(y,N,S,z),h==1&&(_--,n(y,U<S?I:q,S,d))):(_==0&&(h=_=1),y=q.slice()),S=y.length,S<z&&y.unshift(0),n(N,y,z,d),h==-1&&(z=N.length,h=t(q,N,U,z),h<1&&(_++,n(N,U<z?I:q,z,d))),z=N.length):h===0&&(_++,N=[0]),A[g++]=_,h&&N[0]?N[z++]=J[P]||0:(N=[J[P]],z=1);while((P++<R||N[0]!==void 0)&&M--);D=N[0]!==void 0}A[0]||A.shift()}if(x==1)w.e=m,n2=D;else{for(g=1,_=A[0];_>=10;_/=10)g++;w.e=g+m*x-1,ht(w,f?l+w.e+1:l,c,D)}return w}})();function ht(e,t,n,i){var a,l,c,f,d,h,m,g,_,x=e.constructor;e:if(t!=null){if(g=e.d,!g)return e;for(a=1,f=g[0];f>=10;f/=10)a++;if(l=t-a,l<0)l+=mt,c=t,m=g[_=0],d=m/Tn(10,a-c-1)%10|0;else if(_=Math.ceil((l+1)/mt),f=g.length,_>=f)if(i){for(;f++<=_;)g.push(0);m=d=0,a=1,l%=mt,c=l-mt+1}else break e;else{for(m=f=g[_],a=1;f>=10;f/=10)a++;l%=mt,c=l-mt+a,d=c<0?0:m/Tn(10,a-c-1)%10|0}if(i=i||t<0||g[_+1]!==void 0||(c<0?m:m%Tn(10,a-c-1)),h=n<4?(d||i)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||i||n==6&&(l>0?c>0?m/Tn(10,a-c):0:g[_-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,h?(t-=e.e+1,g[0]=Tn(10,(mt-t%mt)%mt),e.e=-t||0):g[0]=e.e=0,e;if(l==0?(g.length=_,f=1,_--):(g.length=_+1,f=Tn(10,mt-l),g[_]=c>0?(m/Tn(10,a-c)%Tn(10,c)|0)*f:0),h)for(;;)if(_==0){for(l=1,c=g[0];c>=10;c/=10)l++;for(c=g[0]+=f,f=1;c>=10;c/=10)f++;l!=f&&(e.e++,g[0]==ki&&(g[0]=1));break}else{if(g[_]+=f,g[_]!=ki)break;g[_--]=0,f=1}for(l=g.length;g[--l]===0;)g.pop()}return xt&&(e.e>x.maxE?(e.d=null,e.e=NaN):e.e<x.minE&&(e.e=0,e.d=[0])),e}function ea(e,t,n){if(!e.isFinite())return c2(e);var i,a=e.e,l=er(e.d),c=l.length;return t?(n&&(i=n-c)>0?l=l.charAt(0)+"."+l.slice(1)+Ls(i):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(e.e<0?"e":"e+")+e.e):a<0?(l="0."+Ls(-a-1)+l,n&&(i=n-c)>0&&(l+=Ls(i))):a>=c?(l+=Ls(a+1-c),n&&(i=n-a-1)>0&&(l=l+"."+Ls(i))):((i=a+1)<c&&(l=l.slice(0,i)+"."+l.slice(i)),n&&(i=n-c)>0&&(a+1===c&&(l+="."),l+=Ls(i))),l}function Pd(e,t){var n=e[0];for(t*=mt;n>=10;n/=10)t++;return t}function Jh(e,t,n){if(t>uA)throw xt=!0,n&&(e.precision=n),Error(r2);return ht(new e(Wh),t,1,!0)}function Wi(e,t,n){if(t>j0)throw Error(r2);return ht(new e(Qh),t,n,!0)}function o2(e){var t=e.length-1,n=t*mt+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Ls(e){for(var t="";e--;)t+="0";return t}function l2(e,t,n,i){var a,l=new e(1),c=Math.ceil(i/mt+4);for(xt=!1;;){if(n%2&&(l=l.times(t),C_(l.d,c)&&(a=!0)),n=hr(n/2),n===0){n=l.d.length-1,a&&l.d[n]===0&&++l.d[n];break}t=t.times(t),C_(t.d,c)}return xt=!0,l}function S_(e){return e.d[e.d.length-1]&1}function u2(e,t,n){for(var i,a,l=new e(t[0]),c=0;++c<t.length;){if(a=new e(t[c]),!a.s){l=a;break}i=l.cmp(a),(i===n||i===0&&l.s===n)&&(l=a)}return l}function B0(e,t){var n,i,a,l,c,f,d,h=0,m=0,g=0,_=e.constructor,x=_.rounding,D=_.precision;if(!e.d||!e.d[0]||e.e>17)return new _(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(xt=!1,d=D):d=t,f=new _(.03125);e.e>-2;)e=e.times(f),g+=5;for(i=Math.log(Tn(2,g))/Math.LN10*2+5|0,d+=i,n=l=c=new _(1),_.precision=d;;){if(l=ht(l.times(e),d,1),n=n.times(++m),f=c.plus(Xt(l,n,d,1)),er(f.d).slice(0,d)===er(c.d).slice(0,d)){for(a=g;a--;)c=ht(c.times(c),d,1);if(t==null)if(h<3&&Rc(c.d,d-i,x,h))_.precision=d+=10,n=l=f=new _(1),m=0,h++;else return ht(c,_.precision=D,x,xt=!0);else return _.precision=D,c}c=f}}function js(e,t){var n,i,a,l,c,f,d,h,m,g,_,x=1,D=10,y=e,S=y.d,w=y.constructor,A=w.rounding,N=w.precision;if(y.s<0||!S||!S[0]||!y.e&&S[0]==1&&S.length==1)return new w(S&&!S[0]?-1/0:y.s!=1?NaN:S?0:y);if(t==null?(xt=!1,m=N):m=t,w.precision=m+=D,n=er(S),i=n.charAt(0),Math.abs(l=y.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)y=y.times(e),n=er(y.d),i=n.charAt(0),x++;l=y.e,i>1?(y=new w("0."+n),l++):y=new w(i+"."+n.slice(1))}else return h=Jh(w,m+2,N).times(l+""),y=js(new w(i+"."+n.slice(1)),m-D).plus(h),w.precision=N,t==null?ht(y,N,A,xt=!0):y;for(g=y,d=c=y=Xt(y.minus(1),y.plus(1),m,1),_=ht(y.times(y),m,1),a=3;;){if(c=ht(c.times(_),m,1),h=d.plus(Xt(c,new w(a),m,1)),er(h.d).slice(0,m)===er(d.d).slice(0,m))if(d=d.times(2),l!==0&&(d=d.plus(Jh(w,m+2,N).times(l+""))),d=Xt(d,new w(x),m,1),t==null)if(Rc(d.d,m-D,A,f))w.precision=m+=D,h=c=y=Xt(g.minus(1),g.plus(1),m,1),_=ht(y.times(y),m,1),a=f=1;else return ht(d,w.precision=N,A,xt=!0);else return w.precision=N,d;d=h,a+=2}}function c2(e){return String(e.s*e.s/0)}function Bh(e,t){var n,i,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;i++);for(a=t.length;t.charCodeAt(a-1)===48;--a);if(t=t.slice(i,a),t){if(a-=i,e.e=n=n-i-1,e.d=[],i=(n+1)%mt,n<0&&(i+=mt),i<a){for(i&&e.d.push(+t.slice(0,i)),a-=mt;i<a;)e.d.push(+t.slice(i,i+=mt));t=t.slice(i),i=mt-t.length}else i-=a;for(;i--;)t+="0";e.d.push(+t),xt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function fA(e,t){var n,i,a,l,c,f,d,h,m;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),s2.test(t))return Bh(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(sA.test(t))n=16,t=t.toLowerCase();else if(aA.test(t))n=2;else if(oA.test(t))n=8;else throw Error(Us+t);for(l=t.search(/p/i),l>0?(d=+t.slice(l+1),t=t.substring(2,l)):t=t.slice(2),l=t.indexOf("."),c=l>=0,i=e.constructor,c&&(t=t.replace(".",""),f=t.length,l=f-l,a=l2(i,new i(n),l,l*2)),h=jh(t,n,ki),m=h.length-1,l=m;h[l]===0;--l)h.pop();return l<0?new i(e.s*0):(e.e=Pd(h,m),e.d=h,xt=!1,c&&(e=Xt(e,a,f*4)),d&&(e=e.times(Math.abs(d)<54?Tn(2,d):Jl.pow(2,d))),xt=!0,e)}function hA(e,t){var n,i=t.d.length;if(i<3)return t.isZero()?t:Ql(e,2,t,t);n=1.4*Math.sqrt(i),n=n>16?16:n|0,t=t.times(1/Od(5,n)),t=Ql(e,2,t,t);for(var a,l=new e(5),c=new e(16),f=new e(20);n--;)a=t.times(t),t=t.times(l.plus(a.times(c.times(a).minus(f))));return t}function Ql(e,t,n,i,a){var l,c,f,d,h=e.precision,m=Math.ceil(h/mt);for(xt=!1,d=n.times(n),f=new e(i);;){if(c=Xt(f.times(d),new e(t++*t++),h,1),f=a?i.plus(c):i.minus(c),i=Xt(c.times(d),new e(t++*t++),h,1),c=f.plus(i),c.d[m]!==void 0){for(l=m;c.d[l]===f.d[l]&&l--;);if(l==-1)break}l=f,f=i,i=c,c=l}return xt=!0,c.d.length=m+1,c}function Od(e,t){for(var n=e;--t;)n*=e;return n}function f2(e,t){var n,i=t.s<0,a=Wi(e,e.precision,1),l=a.times(.5);if(t=t.abs(),t.lte(l))return ja=i?4:1,t;if(n=t.divToInt(a),n.isZero())ja=i?3:2;else{if(t=t.minus(n.times(a)),t.lte(l))return ja=S_(n)?i?2:3:i?4:1,t;ja=S_(n)?i?1:4:i?3:2}return t.minus(a).abs()}function zg(e,t,n,i){var a,l,c,f,d,h,m,g,_,x=e.constructor,D=n!==void 0;if(D?(Mr(n,1,Ks),i===void 0?i=x.rounding:Mr(i,0,8)):(n=x.precision,i=x.rounding),!e.isFinite())m=c2(e);else{for(m=ea(e),c=m.indexOf("."),D?(a=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):a=t,c>=0&&(m=m.replace(".",""),_=new x(1),_.e=m.length-c,_.d=jh(ea(_),10,a),_.e=_.d.length),g=jh(m,10,a),l=d=g.length;g[--d]==0;)g.pop();if(!g[0])m=D?"0p+0":"0";else{if(c<0?l--:(e=new x(e),e.d=g,e.e=l,e=Xt(e,_,n,i,0,a),g=e.d,l=e.e,h=n2),c=g[n],f=a/2,h=h||g[n+1]!==void 0,h=i<4?(c!==void 0||h)&&(i===0||i===(e.s<0?3:2)):c>f||c===f&&(i===4||h||i===6&&g[n-1]&1||i===(e.s<0?8:7)),g.length=n,h)for(;++g[--n]>a-1;)g[n]=0,n||(++l,g.unshift(1));for(d=g.length;!g[d-1];--d);for(c=0,m="";c<d;c++)m+=F0.charAt(g[c]);if(D){if(d>1)if(t==16||t==8){for(c=t==16?4:3,--d;d%c;d++)m+="0";for(g=jh(m,a,t),d=g.length;!g[d-1];--d);for(c=1,m="1.";c<d;c++)m+=F0.charAt(g[c])}else m=m.charAt(0)+"."+m.slice(1);m=m+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)m="0"+m;m="0."+m}else if(++l>d)for(l-=d;l--;)m+="0";else l<d&&(m=m.slice(0,l)+"."+m.slice(l))}m=(t==16?"0x":t==2?"0b":t==8?"0o":"")+m}return e.s<0?"-"+m:m}function C_(e,t){if(e.length>t)return e.length=t,!0}function dA(e){return new this(e).abs()}function mA(e){return new this(e).acos()}function pA(e){return new this(e).acosh()}function gA(e,t){return new this(e).plus(t)}function vA(e){return new this(e).asin()}function yA(e){return new this(e).asinh()}function _A(e){return new this(e).atan()}function xA(e){return new this(e).atanh()}function bA(e,t){e=new this(e),t=new this(t);var n,i=this.precision,a=this.rounding,l=i+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Wi(this,l,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Wi(this,i,a):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Wi(this,l,1).times(.5),n.s=e.s):t.s<0?(this.precision=l,this.rounding=1,n=this.atan(Xt(e,t,l,1)),t=Wi(this,l,1),this.precision=i,this.rounding=a,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Xt(e,t,l,1)),n}function wA(e){return new this(e).cbrt()}function DA(e){return ht(e=new this(e),e.e+1,2)}function EA(e,t,n){return new this(e).clamp(t,n)}function SA(e){if(!e||typeof e!="object")throw Error(Bd+"Object expected");var t,n,i,a=e.defaults===!0,l=["precision",1,Ks,"rounding",0,8,"toExpNeg",-Zl,0,"toExpPos",0,Zl,"maxE",0,Zl,"minE",-Zl,0,"modulo",0,9];for(t=0;t<l.length;t+=3)if(n=l[t],a&&(this[n]=R0[n]),(i=e[n])!==void 0)if(hr(i)===i&&i>=l[t+1]&&i<=l[t+2])this[n]=i;else throw Error(Us+n+": "+i);if(n="crypto",a&&(this[n]=R0[n]),(i=e[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(i2);else this[n]=!1;else throw Error(Us+n+": "+i);return this}function CA(e){return new this(e).cos()}function AA(e){return new this(e).cosh()}function h2(e){var t,n,i;function a(l){var c,f,d,h=this;if(!(h instanceof a))return new a(l);if(h.constructor=a,A_(l)){h.s=l.s,xt?!l.d||l.e>a.maxE?(h.e=NaN,h.d=null):l.e<a.minE?(h.e=0,h.d=[0]):(h.e=l.e,h.d=l.d.slice()):(h.e=l.e,h.d=l.d?l.d.slice():l.d);return}if(d=typeof l,d==="number"){if(l===0){h.s=1/l<0?-1:1,h.e=0,h.d=[0];return}if(l<0?(l=-l,h.s=-1):h.s=1,l===~~l&&l<1e7){for(c=0,f=l;f>=10;f/=10)c++;xt?c>a.maxE?(h.e=NaN,h.d=null):c<a.minE?(h.e=0,h.d=[0]):(h.e=c,h.d=[l]):(h.e=c,h.d=[l]);return}if(l*0!==0){l||(h.s=NaN),h.e=NaN,h.d=null;return}return Bh(h,l.toString())}if(d==="string")return(f=l.charCodeAt(0))===45?(l=l.slice(1),h.s=-1):(f===43&&(l=l.slice(1)),h.s=1),s2.test(l)?Bh(h,l):fA(h,l);if(d==="bigint")return l<0?(l=-l,h.s=-1):h.s=1,Bh(h,l.toString());throw Error(Us+l)}if(a.prototype=qe,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=SA,a.clone=h2,a.isDecimal=A_,a.abs=dA,a.acos=mA,a.acosh=pA,a.add=gA,a.asin=vA,a.asinh=yA,a.atan=_A,a.atanh=xA,a.atan2=bA,a.cbrt=wA,a.ceil=DA,a.clamp=EA,a.cos=CA,a.cosh=AA,a.div=NA,a.exp=MA,a.floor=kA,a.hypot=TA,a.ln=zA,a.log=LA,a.log10=RA,a.log2=FA,a.max=jA,a.min=BA,a.mod=PA,a.mul=OA,a.pow=IA,a.random=HA,a.round=GA,a.sign=UA,a.sin=ZA,a.sinh=KA,a.sqrt=qA,a.sub=$A,a.sum=VA,a.tan=YA,a.tanh=XA,a.trunc=WA,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return a.config(e),a}function NA(e,t){return new this(e).div(t)}function MA(e){return new this(e).exp()}function kA(e){return ht(e=new this(e),e.e+1,3)}function TA(){var e,t,n=new this(0);for(xt=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return xt=!0,new this(1/0);n=t}return xt=!0,n.sqrt()}function A_(e){return e instanceof Jl||e&&e.toStringTag===a2||!1}function zA(e){return new this(e).ln()}function LA(e,t){return new this(e).log(t)}function FA(e){return new this(e).log(2)}function RA(e){return new this(e).log(10)}function jA(){return u2(this,arguments,-1)}function BA(){return u2(this,arguments,1)}function PA(e,t){return new this(e).mod(t)}function OA(e,t){return new this(e).mul(t)}function IA(e,t){return new this(e).pow(t)}function HA(e){var t,n,i,a,l=0,c=new this(1),f=[];if(e===void 0?e=this.precision:Mr(e,1,Ks),i=Math.ceil(e/mt),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));l<i;)a=t[l],a>=429e7?t[l]=crypto.getRandomValues(new Uint32Array(1))[0]:f[l++]=a%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);l<i;)a=t[l]+(t[l+1]<<8)+(t[l+2]<<16)+((t[l+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(t,l):(f.push(a%1e7),l+=4);l=i/4}else throw Error(i2);else for(;l<i;)f[l++]=Math.random()*1e7|0;for(i=f[--l],e%=mt,i&&e&&(a=Tn(10,mt-e),f[l]=(i/a|0)*a);f[l]===0;l--)f.pop();if(l<0)n=0,f=[0];else{for(n=-1;f[0]===0;n-=mt)f.shift();for(i=1,a=f[0];a>=10;a/=10)i++;i<mt&&(n-=mt-i)}return c.e=n,c.d=f,c}function GA(e){return ht(e=new this(e),e.e+1,this.rounding)}function UA(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function ZA(e){return new this(e).sin()}function KA(e){return new this(e).sinh()}function qA(e){return new this(e).sqrt()}function $A(e,t){return new this(e).sub(t)}function VA(){var e=0,t=arguments,n=new this(t[e]);for(xt=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return xt=!0,ht(n,this.precision,this.rounding)}function YA(e){return new this(e).tan()}function XA(e){return new this(e).tanh()}function WA(e){return ht(e=new this(e),e.e+1,1)}qe[Symbol.for("nodejs.util.inspect.custom")]=qe.toString;qe[Symbol.toStringTag]="Decimal";var Jl=qe.constructor=h2(R0);Wh=new Jl(Wh);Qh=new Jl(Qh);var QA="BigNumber",JA=["?on","config"],e5=tt(QA,JA,e=>{var{on:t,config:n}=e,i=Jl.clone({precision:n.precision,modulo:Jl.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(a){return new i(a.value)},t&&t("config",function(a,l){a.precision!==l.precision&&i.config({precision:a.precision})}),i},{isClass:!0});const lr=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},fi=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},t5=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s0=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},Ll=function(){throw SyntaxError("Invalid Param")};function o0(e,t){const n=Math.abs(e),i=Math.abs(t);return e===0?Math.log(i):t===0?Math.log(n):n<3e3&&i<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const n5={re:0,im:0},Ao=function(e,t){const n=n5;if(e==null)n.re=n.im=0;else if(t!==void 0)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return Be.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return Be.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else e.length===2?(n.re=e[0],n.im=e[1]):Ll();break;case"string":n.im=n.re=0;const i=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,l=0;i===null&&Ll();for(let c=0;c<i.length;c++){const f=i[c];f===" "||f==="	"||f===`
`||(f==="+"?a++:f==="-"?l++:f==="i"||f==="I"?(a+l===0&&Ll(),i[c+1]!==" "&&!isNaN(i[c+1])?(n.im+=parseFloat((l%2?"-":"")+i[c+1]),c++):n.im+=parseFloat((l%2?"-":"")+"1"),a=l=0):((a+l===0||isNaN(f))&&Ll(),i[c+1]==="i"||i[c+1]==="I"?(n.im+=parseFloat((l%2?"-":"")+f),c++):n.re+=parseFloat((l%2?"-":"")+f),a=l=0))}a+l>0&&Ll();break;case"number":n.im=0,n.re=e;break;default:Ll()}return isNaN(n.re)||isNaN(n.im),n};function Be(e,t){if(!(this instanceof Be))return new Be(e,t);const n=Ao(e,t);this.re=n.re,this.im=n.im}Be.prototype={re:0,im:0,sign:function(){const e=s0(this.re,this.im);return new Be(this.re/e,this.im/e)},add:function(e,t){const n=Ao(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return i||a?i&&a?Be.NAN:Be.INFINITY:new Be(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=Ao(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return i||a?i&&a?Be.NAN:Be.INFINITY:new Be(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=Ao(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),l=this.re===0&&this.im===0,c=n.re===0&&n.im===0;return i&&c||a&&l?Be.NAN:i||a?Be.INFINITY:n.im===0&&this.im===0?new Be(this.re*n.re,0):new Be(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=Ao(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),l=this.re===0&&this.im===0,c=n.re===0&&n.im===0;if(l&&c||i&&a)return Be.NAN;if(c||i)return Be.INFINITY;if(l||a)return Be.ZERO;if(n.im===0)return new Be(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const f=n.re/n.im,d=n.re*f+n.im;return new Be((this.re*f+this.im)/d,(this.im*f-this.re)/d)}else{const f=n.im/n.re,d=n.im*f+n.re;return new Be((this.re+this.im*f)/d,(this.im-this.re*f)/d)}},pow:function(e,t){const n=Ao(e,t),i=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return Be.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new Be(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new Be(Math.pow(this.im,n.re),0);case 1:return new Be(0,Math.pow(this.im,n.re));case 2:return new Be(-Math.pow(this.im,n.re),0);case 3:return new Be(0,-Math.pow(this.im,n.re))}}if(i&&n.re>0)return Be.ZERO;const l=Math.atan2(this.im,this.re),c=o0(this.re,this.im);let f=Math.exp(n.re*c-n.im*l),d=n.im*c+n.re*l;return new Be(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new Be(Math.sqrt(e),0):new Be(0,Math.sqrt(-e));const n=s0(e,t);let i=Math.sqrt(.5*(n+Math.abs(e))),a=Math.abs(t)/(2*i);return e>=0?new Be(i,t<0?-a:a):new Be(a,t<0?-i:i)},exp:function(){const e=Math.exp(this.re);return this.im===0?new Be(e,0):new Be(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new Be(Math.expm1(e)*Math.cos(t)+t5(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new Be(Math.log(e),0):new Be(o0(e,t),Math.atan2(t,e))},abs:function(){return s0(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new Be(Math.sin(e)*lr(t),Math.cos(e)*fi(t))},cos:function(){const e=this.re,t=this.im;return new Be(Math.cos(e)*lr(t),-Math.sin(e)*fi(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+lr(t);return new Be(Math.sin(e)/n,fi(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-lr(t);return new Be(-Math.sin(e)/n,fi(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*lr(2*t)+.5*Math.cos(2*e);return new Be(Math.cos(e)*lr(t)/n,Math.sin(e)*fi(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*lr(2*t)-.5*Math.cos(2*e);return new Be(Math.sin(e)*lr(t)/n,-Math.cos(e)*fi(t)/n)},asin:function(){const e=this.re,t=this.im,n=new Be(t*t-e*e+1,-2*e*t).sqrt(),i=new Be(n.re-t,n.im+e).log();return new Be(i.im,-i.re)},acos:function(){const e=this.re,t=this.im,n=new Be(t*t-e*e+1,-2*e*t).sqrt(),i=new Be(n.re-t,n.im+e).log();return new Be(Math.PI/2-i.im,i.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new Be(0,1/0);if(t===-1)return new Be(0,-1/0)}const n=e*e+(1-t)*(1-t),i=new Be((1-t*t-e*e)/n,-2*e/n).log();return new Be(-.5*i.im,.5*i.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new Be(Math.atan2(1,e),0);const n=e*e+t*t;return n!==0?new Be(e/n,-t/n).atan():new Be(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Be(0,1/0);const n=e*e+t*t;return n!==0?new Be(e/n,-t/n).acos():new Be(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Be(Math.PI/2,1/0);const n=e*e+t*t;return n!==0?new Be(e/n,-t/n).asin():new Be(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new Be(fi(e)*Math.cos(t),lr(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new Be(lr(e)*Math.cos(t),fi(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=lr(e)+Math.cos(t);return new Be(fi(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=lr(e)-Math.cos(t);return new Be(fi(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-lr(2*e);return new Be(-2*fi(e)*Math.cos(t)/n,2*lr(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+lr(2*e);return new Be(2*lr(e)*Math.cos(t)/n,-2*fi(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&t===0,i=1-e,a=1+e,l=i*i+t*t,c=l!==0?new Be((a*i-t*t)/l,(t*i+a*t)/l):new Be(e!==-1?e/0:0,t!==0?t/0:0),f=c.re;return c.re=o0(c.re,c.im)/2,c.im=Math.atan2(c.im,f)/2,n&&(c.im=-c.im),c},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Be(0,Math.PI/2);const n=e*e+t*t;return n!==0?new Be(e/n,-t/n).atanh():new Be(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new Be(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return n!==0?new Be(e/n,-t/n).asinh():new Be(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return Be.INFINITY;const n=e*e+t*t;return n!==0?new Be(e/n,-t/n).acosh():new Be(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return Be.INFINITY;if(this.isInfinite())return Be.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new Be(e/n,-t/n)},conjugate:function(){return new Be(this.re,-this.im)},neg:function(){return new Be(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new Be(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new Be(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new Be(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=Ao(e,t);return Math.abs(n.re-this.re)<=Be.EPSILON&&Math.abs(n.im-this.im)<=Be.EPSILON},clone:function(){return new Be(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<Be.EPSILON&&(e=0),Math.abs(t)<Be.EPSILON&&(t=0),t===0?n+e:(e!==0?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),t!==1&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Be.ZERO=new Be(0,0);Be.ONE=new Be(1,0);Be.I=new Be(0,1);Be.PI=new Be(Math.PI,0);Be.E=new Be(Math.E,0);Be.INFINITY=new Be(1/0,1/0);Be.NAN=new Be(NaN,NaN);Be.EPSILON=1e-15;var r5="Complex",i5=[],a5=tt(r5,i5,()=>(Object.defineProperty(Be,"name",{value:"Complex"}),Be.prototype.constructor=Be,Be.prototype.type="Complex",Be.prototype.isComplex=!0,Be.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Be.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Be.prototype.format=function(e){var t="",n=this.im,i=this.re,a=L0(this.re,e),l=L0(this.im,e),c=tn(e)?e:e?e.precision:null;if(c!==null){var f=Math.pow(10,-c);Math.abs(i/n)<f&&(i=0),Math.abs(n/i)<f&&(n=0)}return n===0?t=a:i===0?n===1?t="i":n===-1?t="-i":t=l+"i":n<0?n===-1?t=a+" - i":t=a+" - "+l.substring(1)+"i":n===1?t=a+" + i":t=a+" + "+l+"i",t},Be.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Be(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],i=arguments[1];if(tn(n)){if(Yb(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),tn(i))return new Be({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Be.prototype.valueOf=Be.prototype.toString,Be.fromJSON=function(e){return new Be(e)},Be.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Be),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const ct=BigInt(0),Et=BigInt(1),Un=BigInt(2),kc=BigInt(3),Kl=BigInt(5),Ar=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const s5=2e3,Je={s:Et,n:ct,d:Et};function Ta(e,t){try{e=BigInt(e)}catch{throw Ts()}return e*t}function Ci(e){return typeof e=="bigint"?e:Math.floor(e)}function ln(e,t){if(t===ct)throw Lg();const n=Object.create(hi.prototype);n.s=e<ct?-Et:Et,e=e<ct?-e:e;const i=Mo(e,t);return n.n=e/i,n.d=t/i,n}const o5=[Un*Un,Un,Un*Un,Un,Un*Un,Un*kc,Un,Un*kc];function Fl(e){const t=Object.create(null);if(e<=Et)return t[e]=Et,t;const n=i=>{t[i]=(t[i]||ct)+Et};for(;e%Un===ct;)n(Un),e/=Un;for(;e%kc===ct;)n(kc),e/=kc;for(;e%Kl===ct;)n(Kl),e/=Kl;for(let i=0,a=Un+Kl;a*a<=e;){for(;e%a===ct;)n(a),e/=a;a+=o5[i],i=i+1&7}return e>Et&&n(e),t}const Hn=function(e,t){let n=ct,i=Et,a=Et;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Ts();if(e%1!==0)throw N_();n=BigInt(e)}if(typeof t=="bigint")i=t;else{if(isNaN(t))throw Ts();if(t%1!==0)throw N_();i=BigInt(t)}a=n*i}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),i=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(i=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw Ts();a=n*i}else if(typeof e=="number"){if(isNaN(e))throw Ts();if(e<0&&(a=-Et,e=-e),e%1===0)n=BigInt(e);else{let l=1,c=0,f=1,d=1,h=1,m=1e7;for(e>=1&&(l=10**Math.floor(1+Math.log10(e)),e/=l);f<=m&&h<=m;){let g=(c+d)/(f+h);if(e===g){f+h<=m?(n=c+d,i=f+h):h>f?(n=d,i=h):(n=c,i=f);break}else e>g?(c+=d,f+=h):(d+=c,h+=f),f>m?(n=d,i=h):(n=c,i=f)}n=BigInt(n)*BigInt(l),i=BigInt(i)}}else if(typeof e=="string"){let l=0,c=ct,f=ct,d=ct,h=Et,m=Et,g=e.replace(/_/g,"").match(/\d+|./g);if(g===null)throw Ts();if(g[l]==="-"?(a=-Et,l++):g[l]==="+"&&l++,g.length===l+1?f=Ta(g[l++],a):g[l+1]==="."||g[l]==="."?(g[l]!=="."&&(c=Ta(g[l++],a)),l++,(l+1===g.length||g[l+1]==="("&&g[l+3]===")"||g[l+1]==="'"&&g[l+3]==="'")&&(f=Ta(g[l],a),h=Ar**BigInt(g[l].length),l++),(g[l]==="("&&g[l+2]===")"||g[l]==="'"&&g[l+2]==="'")&&(d=Ta(g[l+1],a),m=Ar**BigInt(g[l+1].length)-Et,l+=3)):g[l+1]==="/"||g[l+1]===":"?(f=Ta(g[l],a),h=Ta(g[l+2],Et),l+=3):g[l+3]==="/"&&g[l+1]===" "&&(c=Ta(g[l],a),f=Ta(g[l+2],a),h=Ta(g[l+4],Et),l+=5),g.length<=l)i=h*m,a=n=d+i*c+m*f;else throw Ts()}else if(typeof e=="bigint")n=e,a=e,i=Et;else throw Ts();if(i===ct)throw Lg();Je.s=a<ct?-Et:Et,Je.n=n<ct?-n:n,Je.d=i<ct?-i:i};function l5(e,t,n){let i=Et;for(;t>ct;e=e*e%n,t>>=Et)t&Et&&(i=i*e%n);return i}function u5(e,t){for(;t%Un===ct;t/=Un);for(;t%Kl===ct;t/=Kl);if(t===Et)return ct;let n=Ar%t,i=1;for(;n!==Et;i++)if(n=n*Ar%t,i>s5)return ct;return BigInt(i)}function c5(e,t,n){let i=Et,a=l5(Ar,n,t);for(let l=0;l<300;l++){if(i===a)return BigInt(l);i=i*Ar%t,a=a*Ar%t}return 0}function Mo(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function hi(e,t){if(Hn(e,t),this instanceof hi)e=Mo(Je.d,Je.n),this.s=Je.s,this.n=Je.n/e,this.d=Je.d/e;else return ln(Je.s*Je.n,Je.d)}const Lg=function(){return new Error("Division by Zero")},Ts=function(){return new Error("Invalid argument")},N_=function(){return new Error("Parameters must be integer")};hi.prototype={s:Et,n:ct,d:Et,abs:function(){return ln(this.n,this.d)},neg:function(){return ln(-this.s*this.n,this.d)},add:function(e,t){return Hn(e,t),ln(this.s*this.n*Je.d+Je.s*this.d*Je.n,this.d*Je.d)},sub:function(e,t){return Hn(e,t),ln(this.s*this.n*Je.d-Je.s*this.d*Je.n,this.d*Je.d)},mul:function(e,t){return Hn(e,t),ln(this.s*Je.s*this.n*Je.n,this.d*Je.d)},div:function(e,t){return Hn(e,t),ln(this.s*Je.s*this.n*Je.d,this.d*Je.n)},clone:function(){return ln(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return ln(this.s*this.n%this.d,Et);if(Hn(e,t),ct===Je.n*this.d)throw Lg();return ln(this.s*(Je.d*this.n)%(Je.n*this.d),Je.d*this.d)},gcd:function(e,t){return Hn(e,t),ln(Mo(Je.n,this.n)*Mo(Je.d,this.d),Je.d*this.d)},lcm:function(e,t){return Hn(e,t),Je.n===ct&&this.n===ct?ln(ct,Et):ln(Je.n*this.n,Mo(Je.n,this.n)*Mo(Je.d,this.d))},inverse:function(){return ln(this.s*this.d,this.n)},pow:function(e,t){if(Hn(e,t),Je.d===Et)return Je.s<ct?ln((this.s*this.d)**Je.n,this.n**Je.n):ln((this.s*this.n)**Je.n,this.d**Je.n);if(this.s<ct)return null;let n=Fl(this.n),i=Fl(this.d),a=Et,l=Et;for(let c in n)if(c!=="1"){if(c==="0"){a=ct;break}if(n[c]*=Je.n,n[c]%Je.d===ct)n[c]/=Je.d;else return null;a*=BigInt(c)**n[c]}for(let c in i)if(c!=="1"){if(i[c]*=Je.n,i[c]%Je.d===ct)i[c]/=Je.d;else return null;l*=BigInt(c)**i[c]}return Je.s<ct?ln(l,a):ln(a,l)},log:function(e,t){if(Hn(e,t),this.s<=ct||Je.s<=ct)return null;const n=Object.create(null),i=Fl(Je.n),a=Fl(Je.d),l=Fl(this.n),c=Fl(this.d);for(const h in a)i[h]=(i[h]||ct)-a[h];for(const h in c)l[h]=(l[h]||ct)-c[h];for(const h in i)h!=="1"&&(n[h]=!0);for(const h in l)h!=="1"&&(n[h]=!0);let f=null,d=null;for(const h in n){const m=i[h]||ct,g=l[h]||ct;if(m===ct){if(g!==ct)return null;continue}let _=g,x=m;const D=Mo(_,x);if(_/=D,x/=D,f===null&&d===null)f=_,d=x;else if(_*d!==f*x)return null}return f!==null&&d!==null?ln(f,d):null},equals:function(e,t){return Hn(e,t),this.s*this.n*Je.d===Je.s*Je.n*this.d},lt:function(e,t){return Hn(e,t),this.s*this.n*Je.d<Je.s*Je.n*this.d},lte:function(e,t){return Hn(e,t),this.s*this.n*Je.d<=Je.s*Je.n*this.d},gt:function(e,t){return Hn(e,t),this.s*this.n*Je.d>Je.s*Je.n*this.d},gte:function(e,t){return Hn(e,t),this.s*this.n*Je.d>=Je.s*Je.n*this.d},compare:function(e,t){Hn(e,t);let n=this.s*this.n*Je.d-Je.s*Je.n*this.d;return(ct<n)-(n<ct)},ceil:function(e){return e=Ar**BigInt(e||0),ln(Ci(this.s*e*this.n/this.d)+(e*this.n%this.d>ct&&this.s>=ct?Et:ct),e)},floor:function(e){return e=Ar**BigInt(e||0),ln(Ci(this.s*e*this.n/this.d)-(e*this.n%this.d>ct&&this.s<ct?Et:ct),e)},round:function(e){return e=Ar**BigInt(e||0),ln(Ci(this.s*e*this.n/this.d)+this.s*((this.s>=ct?Et:ct)+Un*(e*this.n%this.d)>this.d?Et:ct),e)},roundTo:function(e,t){Hn(e,t);const n=this.n*Je.d,i=this.d*Je.n,a=n%i;let l=Ci(n/i);return a+a>=i&&l++,ln(this.s*l*Je.n,Je.d)},divisible:function(e,t){return Hn(e,t),Je.n===ct?!1:this.n*Je.d%(Je.n*this.d)===ct},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e=15){let t=this.n,n=this.d,i=u5(t,n),a=c5(t,n,i),l=this.s<ct?"-":"";if(l+=Ci(t/n),t%=n,t*=Ar,t&&(l+="."),i){for(let c=a;c--;)l+=Ci(t/n),t%=n,t*=Ar;l+="(";for(let c=i;c--;)l+=Ci(t/n),t%=n,t*=Ar;l+=")"}else for(let c=e;t&&c--;)l+=Ci(t/n),t%=n,t*=Ar;return l},toFraction:function(e=!1){let t=this.n,n=this.d,i=this.s<ct?"-":"";if(n===Et)i+=t;else{const a=Ci(t/n);e&&a>ct&&(i+=a,i+=" ",t%=n),i+=t,i+="/",i+=n}return i},toLatex:function(e=!1){let t=this.n,n=this.d,i=this.s<ct?"-":"";if(n===Et)i+=t;else{const a=Ci(t/n);e&&a>ct&&(i+=a,t%=n),i+="\\frac{",i+=t,i+="}{",i+=n,i+="}"}return i},toContinued:function(){let e=this.n,t=this.d;const n=[];for(;t;){n.push(Ci(e/t));const i=e%t;e=t,t=i}return n},simplify:function(e=.001){const t=BigInt(Math.ceil(1/e)),n=this.abs(),i=n.toContinued();for(let a=1;a<i.length;a++){let l=ln(i[a-1],Et);for(let f=a-2;f>=0;f--)l=l.inverse().add(i[f]);let c=l.sub(n);if(c.n*t<c.d)return l.mul(this.s)}return this}};var f5="Fraction",h5=[],d5=tt(f5,h5,()=>(Object.defineProperty(hi,"name",{value:"Fraction"}),hi.prototype.constructor=hi,hi.prototype.type="Fraction",hi.prototype.isFraction=!0,hi.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},hi.fromJSON=function(e){return new hi(e)},hi),{isClass:!0}),m5="Matrix",p5=[],g5=tt(m5,p5,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,i){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,i){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function l0(e,t,n){var i=e.constructor,a=new i(2),l="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!xn(n))throw new Error("size must be an integer");if(e.greaterThan(a.pow(n-1).sub(1))||e.lessThan(a.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(a.pow(n))),l="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(l);case 8:return"".concat(e.toOctal()).concat(l);case 16:return"".concat(e.toHexadecimal()).concat(l);default:throw new Error("Base ".concat(t," not supported "))}}function v5(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:i,wordSize:a}=Jb(t);switch(n){case"fixed":return _5(e,i);case"exponential":return M_(e,i);case"engineering":return y5(e,i);case"bin":return l0(e,2,a);case"oct":return l0(e,8,a);case"hex":return l0(e,16,a);case"auto":{var l=k_(t?.lowerExp,-3),c=k_(t?.upperExp,5);if(e.isZero())return"0";var f,d=e.toSignificantDigits(i),h=d.e;return h>=l&&h<c?f=d.toFixed():f=M_(e,i),f.replace(/((\.\d*?)(0+))($|e)/,function(){var m=arguments[2],g=arguments[4];return m!=="."?m+g:g})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function y5(e,t){var n=e.e,i=n%3===0?n:n<0?n-3-n%3:n-n%3,a=e.mul(Math.pow(10,-i)),l=a.toPrecision(t);if(l.includes("e")){var c=e.constructor;l=new c(l).toFixed()}return l+"e"+(n>=0?"+":"")+i.toString()}function M_(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function _5(e,t){return e.toFixed(t)}function k_(e,t){return tn(e)?e:bn(e)?e.toNumber():t}function an(e,t){var n=x5(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function x5(e,t){if(typeof e=="number")return L0(e,t);if(bn(e))return v5(e,t);if(b5(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return d2(e,t);if($i(e))return T_(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(i=>T_(i)+": "+an(e[i],t));return"{"+n.join(", ")+"}"}return String(e)}function T_(e){for(var t=String(e),n="",i=0;i<t.length;){var a=t.charAt(i);n+=a in z_?z_[a]:a,i++}return'"'+n+'"'}var z_={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function d2(e,t){if(Array.isArray(e)){for(var n="[",i=e.length,a=0;a<i;a++)a!==0&&(n+=", "),n+=d2(e[a],t);return n+="]",n}else return an(e,t)}function b5(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function Ot(e,t,n){if(!(this instanceof Ot))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Ot.prototype=new RangeError;Ot.prototype.constructor=RangeError;Ot.prototype.name="DimensionError";Ot.prototype.isDimensionError=!0;function Io(e,t,n){if(!(this instanceof Io))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Io.prototype=new RangeError;Io.prototype.constructor=RangeError;Io.prototype.name="IndexError";Io.prototype.isIndexError=!0;function tr(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function m2(e,t,n){var i,a=e.length;if(a!==t[n])throw new Ot(a,t[n]);if(n<t.length-1){var l=n+1;for(i=0;i<a;i++){var c=e[i];if(!Array.isArray(c))throw new Ot(t.length-1,t.length,"<");m2(e[i],t,l)}}else for(i=0;i<a;i++)if(Array.isArray(e[i]))throw new Ot(t.length+1,t.length,">")}function L_(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new Ot(e.length,0)}else m2(e,t,0)}function pn(e,t){if(e!==void 0){if(!tn(e)||!xn(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Io(e,t)}}function P0(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(a){if(!tn(a)||!xn(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+an(t)+")")}),(tn(e)||bn(e))&&(e=[e]);var i=n!==void 0?n:0;return O0(e,t,0,i),e}function O0(e,t,n,i){var a,l,c=e.length,f=t[n],d=Math.min(c,f);if(e.length=f,n<t.length-1){var h=n+1;for(a=0;a<d;a++)l=e[a],Array.isArray(l)||(l=[l],e[a]=l),O0(l,t,h,i);for(a=d;a<f;a++)l=[],e[a]=l,O0(l,t,h,i)}else{for(a=0;a<d;a++)for(;Array.isArray(e[a]);)e[a]=e[a][0];for(a=d;a<f;a++)e[a]=i}}function p2(e,t){var n=I0(e,!0),i=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Ot(0,i,"!=");t=Fg(t,i);var a=g2(t);if(i!==a)throw new Ot(a,i,"!=");try{return w5(n,t)}catch(l){throw l instanceof Ot?new Ot(a,i,"!="):l}}function Fg(e,t){var n=g2(e),i=e.slice(),a=-1,l=e.indexOf(a),c=e.indexOf(a,l+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var f=l>=0,d=t%n===0;if(f)if(d)i[l]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return i}function g2(e){return e.reduce((t,n)=>t*n,1)}function w5(e,t){for(var n=e,i,a=t.length-1;a>0;a--){var l=t[a];i=[];for(var c=n.length/l,f=0;f<c;f++)i.push(n.slice(f*l,(f+1)*l));n=i}return n}function v2(e,t,n,i){var a=i||tr(e);if(n)for(var l=0;l<n;l++)e=[e],a.unshift(1);for(e=y2(e,t,0);a.length<t;)a.push(1);return e}function y2(e,t,n){var i,a;if(Array.isArray(e)){var l=n+1;for(i=0,a=e.length;i<a;i++)e[i]=y2(e[i],t,l)}else for(var c=n;c<t;c++)e=[e];return e}function I0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(e))return e;if(typeof t!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return t?a(e):i(e),n;function i(l){for(var c=0;c<l.length;c++){var f=l[c];Array.isArray(f)?i(f):n.push(f)}}function a(l){if(Array.isArray(l[0]))for(var c=0;c<l.length;c++)a(l[c]);else for(var f=0;f<l.length;f++)n.push(l[f])}}function Rg(e,t){for(var n,i=0,a=0;a<e.length;a++){var l=e[a],c=Array.isArray(l);if(a===0&&c&&(i=l.length),c&&l.length!==i)return;var f=c?Rg(l,t):t(l);if(n===void 0)n=f;else if(n!==f)return"mixed"}return n}function _2(e,t,n,i){if(i<n){if(e.length!==t.length)throw new Ot(e.length,t.length);for(var a=[],l=0;l<e.length;l++)a[l]=_2(e[l],t[l],n,i+1);return a}else return e.concat(t)}function x2(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,i){return _2(n,i,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function b2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.map(_=>_.length),a=Math.max(...i),l=new Array(a).fill(null),c=0;c<t.length;c++)for(var f=t[c],d=i[c],h=0;h<d;h++){var m=a-d+h;f[h]>l[m]&&(l[m]=f[h])}for(var g=0;g<t.length;g++)w2(t[g],l);return l}function w2(e,t){for(var n=t.length,i=e.length,a=0;a<i;a++){var l=n-i+a;if(e[a]<t[l]&&e[a]>1||e[a]>t[l])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(i," with size ").concat(e[a]," to size ").concat(t[l]))}}function H0(e,t){var n=tr(e);if(Gs(n,t))return e;w2(n,t);var i=b2(n,t),a=i.length,l=[...Array(a-n.length).fill(1),...n],c=E5(e);n.length<a&&(c=p2(c,l),n=tr(c));for(var f=0;f<a;f++)n[f]<i[f]&&(c=D5(c,i[f],f),n=tr(c));return c}function D5(e,t,n){return x2(...Array(t).fill(e),n)}function D2(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=tr(e);if(t.length!==n.length)throw new Ot(t.length,n.length);for(var i=0;i<t.length;i++)pn(t[i],n[i]);return t.reduce((a,l)=>a[l],e)}function F_(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.length===0)return[];if(n)return l(e);var i=[];return a(e,0);function a(c,f){if(Array.isArray(c)){for(var d=c.length,h=Array(d),m=0;m<d;m++)i[f]=m,h[m]=a(c[m],f+1);return h}else return t(c,i.slice(0,f),e)}function l(c){if(Array.isArray(c)){for(var f=c.length,d=Array(f),h=0;h<f;h++)d[h]=l(c[h]);return d}else return t(c)}}function E5(e){return $h([],e)}function ed(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Xh.isTypedFunction(e)){var a;if(i)a=1;else{var l=(t.isMatrix?t.size():tr(t)).map(()=>0),c=t.isMatrix?t.get(l):D2(t,l);a=A5(e,c,l,t)}var f;if(t.isMatrix&&t.dataType!=="mixed"&&t.dataType!==void 0){var d=S5(e,a);f=d!==void 0?d:e}else f=e;return a>=1&&a<=3?{isUnary:a===1,fn:function(){for(var m=arguments.length,g=new Array(m),_=0;_<m;_++)g[_]=arguments[_];return R_(f,g.slice(0,a),n,e.name)}}:{isUnary:!1,fn:function(){for(var m=arguments.length,g=new Array(m),_=0;_<m;_++)g[_]=arguments[_];return R_(f,g,n,e.name)}}}return i===void 0?{isUnary:C5(e),fn:e}:{isUnary:i,fn:e}}function S5(e,t){var n=[];if(Object.entries(e.signatures).forEach(i=>{var[a,l]=i;a.split(",").length===t&&n.push(l)}),n.length===1)return n[0]}function C5(e){if(e.length!==1)return!1;var t=e.toString();if(/arguments/.test(t))return!1;var n=t.match(/\(.*?\)/);return!/\.\.\./.test(n)}function A5(e,t,n,i){for(var a=[t,n,i],l=3;l>0;l--){var c=a.slice(0,l);if(Xh.resolve(e,c)!==null)return l}}function R_(e,t,n,i){try{return e(...t)}catch(a){N5(a,t,n,i)}}function N5(e,t,n,i){var a;if(e instanceof TypeError&&((a=e.data)===null||a===void 0?void 0:a.category)==="wrongType"){var l=[];throw l.push("value: ".concat(Ps(t[0]))),t.length>=2&&l.push("index: ".concat(Ps(t[1]))),t.length>=3&&l.push("array: ".concat(Ps(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(i,"(").concat(l.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(i,": ").concat(e.message))}var M5="DenseMatrix",k5=["Matrix"],T5=tt(M5,k5,e=>{var{Matrix:t}=e;function n(m,g){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!$i(g))throw new Error("Invalid datatype: "+g);if(nn(m))m.type==="DenseMatrix"?(this._data=$t(m._data),this._size=$t(m._size),this._datatype=g||m._datatype):(this._data=m.toArray(),this._size=m.size(),this._datatype=g||m._datatype);else if(m&&_n(m.data)&&_n(m.size))this._data=m.data,this._size=m.size,L_(this._data,this._size),this._datatype=g||m.datatype;else if(_n(m))this._data=h(m),this._size=tr(this._data),L_(this._data,this._size),this._datatype=g;else{if(m)throw new TypeError("Unsupported type of data ("+Ps(m)+")");this._data=[],this._size=[0],this._datatype=g}}n.prototype=new t,n.prototype.createDenseMatrix=function(m,g){return new n(m,g)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Rg(this._data,Ps)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(m,g){return new n(m,g)},n.prototype.subset=function(m,g,_){switch(arguments.length){case 1:return i(this,m);case 2:case 3:return l(this,m,g,_);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(m){return D2(this._data,m)},n.prototype.set=function(m,g,_){if(!_n(m))throw new TypeError("Array expected");if(m.length<this._size.length)throw new Ot(m.length,this._size.length,"<");var x,D,y,S=m.map(function(A){return A+1});d(this,S,_);var w=this._data;for(x=0,D=m.length-1;x<D;x++)y=m[x],pn(y,w.length),w=w[y];return y=m[m.length-1],pn(y,w.length),w[y]=g,this};function i(m,g){if(!kg(g))throw new TypeError("Invalid index");var _=g.isScalar();if(_)return m.get(g.min());var x=g.size();if(x.length!==m._size.length)throw new Ot(x.length,m._size.length);for(var D=g.min(),y=g.max(),S=0,w=m._size.length;S<w;S++)pn(D[S],m._size[S]),pn(y[S],m._size[S]);var A=new n([]),N=a(m._data,g);return A._size=N.size,A._datatype=m._datatype,A._data=N.data,A}function a(m,g){var _=g.size().length-1,x=Array(_);return{data:D(m),size:x};function D(y){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=g.dimension(S);return x[S]=w.size()[0],S<_?w.map(A=>(pn(A,y.length),D(y[A],S+1))).valueOf():w.map(A=>(pn(A,y.length),y[A])).valueOf()}}function l(m,g,_,x){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var D=g.size(),y=g.isScalar(),S;if(nn(_)?(S=_.size(),_=_.valueOf()):S=tr(_),y){if(S.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),_,x)}else{if(!Gs(S,D))try{S.length===0?_=H0([_],D):_=H0(_,D),S=tr(_)}catch{}if(D.length<m._size.length)throw new Ot(D.length,m._size.length,"<");if(S.length<D.length){for(var w=0,A=0;D[w]===1&&S[w]===1;)w++;for(;D[w]===1;)A++,w++;_=v2(_,D.length,A,S)}if(!Gs(D,S))throw new Ot(D,S,">");var N=g.max().map(function(z){return z+1});d(m,N,x),c(m._data,g,_)}return m}function c(m,g,_){var x=g.size().length-1;D(m,_);function D(y,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=g.dimension(w);w<x?A.forEach((N,z)=>{pn(N,y.length),D(y[N],S[z[0]],w+1)}):A.forEach((N,z)=>{pn(N,y.length),y[N]=S[z[0]]})}}n.prototype.resize=function(m,g,_){if(!Yh(m))throw new TypeError("Array or Matrix expected");var x=m.valueOf().map(y=>Array.isArray(y)&&y.length===1?y[0]:y),D=_?this.clone():this;return f(D,x,g)};function f(m,g,_){if(g.length===0){for(var x=m._data;_n(x);)x=x[0];return x}return m._size=g.slice(0),m._data=P0(m._data,m._size,_),m}n.prototype.reshape=function(m,g){var _=g?this.clone():this;_._data=p2(_._data,m);var x=_._size.reduce((D,y)=>D*y);return _._size=Fg(m,x),_};function d(m,g,_){for(var x=m._size.slice(0),D=!1;x.length<g.length;)x.push(0),D=!0;for(var y=0,S=g.length;y<S;y++)g[y]>x[y]&&(x[y]=g[y],D=!0);D&&f(m,x,_)}n.prototype.clone=function(){var m=new n({data:$t(this._data),size:$t(this._size),datatype:this._datatype});return m},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=this,x=_._size.length-1;if(x<0)return _.clone();var D=ed(m,_,"map",g),y=D.fn,S=_.create(void 0,_._datatype);if(S._size=_._size,g||D.isUnary)return S._data=M(_._data),S;if(x===0){for(var w=_.valueOf(),A=Array(w.length),N=0;N<w.length;N++)A[N]=y(w[N],[N],_);return S._data=A,S}var z=[];return S._data=k(_._data),S;function k(B){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=Array(B.length);if(P<x)for(var H=0;H<B.length;H++)z[P]=H,R[H]=k(B[H],P+1);else for(var U=0;U<B.length;U++)z[P]=U,R[U]=y(B[U],z.slice(),_);return R}function M(B){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=Array(B.length);if(P<x)for(var H=0;H<B.length;H++)R[H]=M(B[H],P+1);else for(var U=0;U<B.length;U++)R[U]=y(B[U]);return R}},n.prototype.forEach=function(m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=this,x=_._size.length-1;if(x<0)return;var D=ed(m,_,"map",g),y=D.fn;if(g||D.isUnary){N(_._data);return}if(x===0){for(var S=0;S<_._data.length;S++)y(_._data[S],[S],_);return}var w=[];A(_._data);function A(z){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(k<x)for(var M=0;M<z.length;M++)w[k]=M,A(z[M],k+1);else for(var B=0;B<z.length;B++)w[k]=B,y(z[B],w.slice(),_)}function N(z){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(k<x)for(var M=0;M<z.length;M++)N(z[M],k+1);else for(var B=0;B<z.length;B++)y(z[B])}},n.prototype[Symbol.iterator]=function*(){var m=this._size.length-1;if(!(m<0)){if(m===0){for(var g=0;g<this._data.length;g++)yield{value:this._data[g],index:[g]};return}var _=[],x=function*(y,S){if(S<m)for(var w=0;w<y.length;w++)_[S]=w,yield*x(y[w],S+1);else for(var A=0;A<y.length;A++)_[S]=A,yield{value:y[A],index:_.slice()}};yield*x(this._data,0)}},n.prototype.rows=function(){var m=[],g=this.size();if(g.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var _=this._data;for(var x of _)m.push(new n([x],this._datatype));return m},n.prototype.columns=function(){var m=this,g=[],_=this.size();if(_.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var x=this._data,D=function(w){var A=x.map(N=>[N[w]]);g.push(new n(A,m._datatype))},y=0;y<_[1];y++)D(y);return g},n.prototype.toArray=function(){return $t(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(m){return an(this._data,m)},n.prototype.toString=function(){return an(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(m){if(m){if(bn(m)&&(m=m.toNumber()),!tn(m)||!xn(m))throw new TypeError("The parameter k must be an integer number")}else m=0;for(var g=m>0?m:0,_=m<0?-m:0,x=this._size[0],D=this._size[1],y=Math.min(x-_,D-g),S=[],w=0;w<y;w++)S[w]=this._data[w+_][w+g];return new n({data:S,size:[y],datatype:this._datatype})},n.diagonal=function(m,g,_,x){if(!_n(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(B){if(bn(B)&&(B=B.toNumber()),!tn(B)||!xn(B)||B<1)throw new Error("Size values must be positive integers");return B}),_){if(bn(_)&&(_=_.toNumber()),!tn(_)||!xn(_))throw new TypeError("The parameter k must be an integer number")}else _=0;var D=_>0?_:0,y=_<0?-_:0,S=m[0],w=m[1],A=Math.min(S-y,w-D),N;if(_n(g)){if(g.length!==A)throw new Error("Invalid value array length");N=function(P){return g[P]}}else if(nn(g)){var z=g.size();if(z.length!==1||z[0]!==A)throw new Error("Invalid matrix length");N=function(P){return g.get([P])}}else N=function(){return g};x||(x=bn(N(0))?N(0).mul(0):0);var k=[];if(m.length>0){k=P0(k,m,x);for(var M=0;M<A;M++)k[M+y][M+D]=N(M)}return new n({data:k,size:[S,w]})},n.fromJSON=function(m){return new n(m)},n.prototype.swapRows=function(m,g){if(!tn(m)||!xn(m)||!tn(g)||!xn(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return pn(m,this._size[0]),pn(g,this._size[0]),n._swapRows(m,g,this._data),this},n._swapRows=function(m,g,_){var x=_[m];_[m]=_[g],_[g]=x};function h(m){return nn(m)?h(m.valueOf()):_n(m)?m.map(h):m}return n},{isClass:!0});function qs(e,t,n){if(!n)return nn(e)?e.map(a=>t(a),!1,!0):F_(e,t,!0);var i=a=>a===0?a:t(a);return nn(e)?e.map(a=>i(a),!1,!0):F_(e,i,!0)}var j_="isInteger",z5=["typed"],L5=tt(j_,z5,e=>{var{typed:t}=e;return t(j_,{number:xn,BigNumber:function(i){return i.isInt()},bigint:function(i){return!0},Fraction:function(i){return i.d===1n},"Array | Matrix":t.referToSelf(n=>i=>qs(i,n))})}),E2="number",jg="number, number";function S2(e){return Math.abs(e)}S2.signature=E2;function C2(e,t){return e+t}C2.signature=jg;function A2(e,t){return e-t}A2.signature=jg;function N2(e,t){return e*t}N2.signature=jg;function M2(e){return-e}M2.signature=E2;function Id(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),i))}var B_="isZero",F5=["typed","equalScalar"],R5=tt(B_,F5,e=>{var{typed:t,equalScalar:n}=e;return t(B_,{"number | BigNumber | Complex | Fraction":i=>n(i,0),bigint:i=>i===0n,Unit:t.referToSelf(i=>a=>t.find(i,a.valueType())(a.value)),"Array | Matrix":t.referToSelf(i=>a=>qs(a,i))})});function j5(e,t,n,i){return Fo(e.re,t.re,n,i)&&Fo(e.im,t.im,n,i)}var Hd=tt("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(i,a)=>{if(!i.equalBase(a))throw new Error("Cannot compare units with different base");return t.find(n,[i.valueType(),a.valueType()])(i.value,a.value)})}}),td="equalScalar",B5=["typed","config"],P5=tt(td,B5,e=>{var{typed:t,config:n}=e,i=Hd({typed:t});return t(td,{"boolean, boolean":function(l,c){return l===c},"number, number":function(l,c){return Fo(l,c,n.relTol,n.absTol)},"BigNumber, BigNumber":function(l,c){return l.eq(c)||Id(l,c,n.relTol,n.absTol)},"bigint, bigint":function(l,c){return l===c},"Fraction, Fraction":function(l,c){return l.equals(c)},"Complex, Complex":function(l,c){return j5(l,c,n.relTol,n.absTol)}},i)});tt(td,["typed","config"],e=>{var{typed:t,config:n}=e;return t(td,{"number, number":function(a,l){return Fo(a,l,n.relTol,n.absTol)}})});var O5="SparseMatrix",I5=["typed","equalScalar","Matrix"],H5=tt(O5,I5,e=>{var{typed:t,equalScalar:n,Matrix:i}=e;function a(y,S){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(S&&!$i(S))throw new Error("Invalid datatype: "+S);if(nn(y))l(this,y,S);else if(y&&_n(y.index)&&_n(y.ptr)&&_n(y.size))this._values=y.values,this._index=y.index,this._ptr=y.ptr,this._size=y.size,this._datatype=S||y.datatype;else if(_n(y))c(this,y,S);else{if(y)throw new TypeError("Unsupported type of data ("+Ps(y)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=S}}function l(y,S,w){S.type==="SparseMatrix"?(y._values=S._values?$t(S._values):void 0,y._index=$t(S._index),y._ptr=$t(S._ptr),y._size=$t(S._size),y._datatype=w||S._datatype):c(y,S.valueOf(),w||S._datatype)}function c(y,S,w){y._values=[],y._index=[],y._ptr=[],y._datatype=w;var A=S.length,N=0,z=n,k=0;if($i(w)&&(z=t.find(n,[w,w])||n,k=t.convert(0,w)),A>0){var M=0;do{y._ptr.push(y._index.length);for(var B=0;B<A;B++){var P=S[B];if(_n(P)){if(M===0&&N<P.length&&(N=P.length),M<P.length){var R=P[M];z(R,k)||(y._values.push(R),y._index.push(B))}}else M===0&&N<1&&(N=1),z(P,k)||(y._values.push(P),y._index.push(B))}M++}while(M<N)}y._ptr.push(y._index.length),y._size=[A,N]}a.prototype=new i,a.prototype.createSparseMatrix=function(y,S){return new a(y,S)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return Rg(this._values,Ps)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(y,S){return new a(y,S)},a.prototype.density=function(){var y=this._size[0],S=this._size[1];return y!==0&&S!==0?this._index.length/(y*S):0},a.prototype.subset=function(y,S,w){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return f(this,y);case 2:case 3:return d(this,y,S,w);default:throw new SyntaxError("Wrong number of arguments")}};function f(y,S){if(!kg(S))throw new TypeError("Invalid index");var w=S.isScalar();if(w)return y.get(S.min());var A=S.size();if(A.length!==y._size.length)throw new Ot(A.length,y._size.length);var N,z,k,M,B=S.min(),P=S.max();for(N=0,z=y._size.length;N<z;N++)pn(B[N],y._size[N]),pn(P[N],y._size[N]);var R=y._values,H=y._index,U=y._ptr,I=S.dimension(0),X=S.dimension(1),j=[],J=[];I.forEach(function(Q,Z){J[Q]=Z[0],j[Q]=!0});var q=R?[]:void 0,ne=[],V=[];return X.forEach(function(Q){for(V.push(ne.length),k=U[Q],M=U[Q+1];k<M;k++)N=H[k],j[N]===!0&&(ne.push(J[N]),q&&q.push(R[k]))}),V.push(ne.length),new a({values:q,index:ne,ptr:V,size:A,datatype:y._datatype})}function d(y,S,w,A){if(!S||S.isIndex!==!0)throw new TypeError("Invalid index");var N=S.size(),z=S.isScalar(),k;if(nn(w)?(k=w.size(),w=w.toArray()):k=tr(w),z){if(k.length!==0)throw new TypeError("Scalar expected");y.set(S.min(),w,A)}else{if(N.length!==1&&N.length!==2)throw new Ot(N.length,y._size.length,"<");if(k.length<N.length){for(var M=0,B=0;N[M]===1&&k[M]===1;)M++;for(;N[M]===1;)B++,M++;w=v2(w,N.length,B,k)}if(!Gs(N,k))throw new Ot(N,k,">");if(N.length===1){var P=S.dimension(0);P.forEach(function(U,I){pn(U),y.set([U,0],w[I[0]],A)})}else{var R=S.dimension(0),H=S.dimension(1);R.forEach(function(U,I){pn(U),H.forEach(function(X,j){pn(X),y.set([U,X],w[I[0]][j[0]],A)})})}}return y}a.prototype.get=function(y){if(!_n(y))throw new TypeError("Array expected");if(y.length!==this._size.length)throw new Ot(y.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var S=y[0],w=y[1];pn(S,this._size[0]),pn(w,this._size[1]);var A=h(S,this._ptr[w],this._ptr[w+1],this._index);return A<this._ptr[w+1]&&this._index[A]===S?this._values[A]:0},a.prototype.set=function(y,S,w){if(!_n(y))throw new TypeError("Array expected");if(y.length!==this._size.length)throw new Ot(y.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var A=y[0],N=y[1],z=this._size[0],k=this._size[1],M=n,B=0;$i(this._datatype)&&(M=t.find(n,[this._datatype,this._datatype])||n,B=t.convert(0,this._datatype)),(A>z-1||N>k-1)&&(_(this,Math.max(A+1,z),Math.max(N+1,k),w),z=this._size[0],k=this._size[1]),pn(A,z),pn(N,k);var P=h(A,this._ptr[N],this._ptr[N+1],this._index);return P<this._ptr[N+1]&&this._index[P]===A?M(S,B)?m(P,N,this._values,this._index,this._ptr):this._values[P]=S:M(S,B)||g(P,A,N,S,this._values,this._index,this._ptr),this};function h(y,S,w,A){if(w-S===0)return w;for(var N=S;N<w;N++)if(A[N]===y)return N;return S}function m(y,S,w,A,N){w.splice(y,1),A.splice(y,1);for(var z=S+1;z<N.length;z++)N[z]--}function g(y,S,w,A,N,z,k){N.splice(y,0,A),z.splice(y,0,S);for(var M=w+1;M<k.length;M++)k[M]++}a.prototype.resize=function(y,S,w){if(!Yh(y))throw new TypeError("Array or Matrix expected");var A=y.valueOf().map(z=>Array.isArray(z)&&z.length===1?z[0]:z);if(A.length!==2)throw new Error("Only two dimensions matrix are supported");A.forEach(function(z){if(!tn(z)||!xn(z)||z<0)throw new TypeError("Invalid size, must contain positive integers (size: "+an(A)+")")});var N=w?this.clone():this;return _(N,A[0],A[1],S)};function _(y,S,w,A){var N=A||0,z=n,k=0;$i(y._datatype)&&(z=t.find(n,[y._datatype,y._datatype])||n,k=t.convert(0,y._datatype),N=t.convert(N,y._datatype));var M=!z(N,k),B=y._size[0],P=y._size[1],R,H,U;if(w>P){for(H=P;H<w;H++)if(y._ptr[H]=y._values.length,M)for(R=0;R<B;R++)y._values.push(N),y._index.push(R);y._ptr[w]=y._values.length}else w<P&&(y._ptr.splice(w+1,P-w),y._values.splice(y._ptr[w],y._values.length),y._index.splice(y._ptr[w],y._index.length));if(P=w,S>B){if(M){var I=0;for(H=0;H<P;H++){y._ptr[H]=y._ptr[H]+I,U=y._ptr[H+1]+I;var X=0;for(R=B;R<S;R++,X++)y._values.splice(U+X,0,N),y._index.splice(U+X,0,R),I++}y._ptr[P]=y._values.length}}else if(S<B){var j=0;for(H=0;H<P;H++){y._ptr[H]=y._ptr[H]-j;var J=y._ptr[H],q=y._ptr[H+1]-j;for(U=J;U<q;U++)R=y._index[U],R>S-1&&(y._values.splice(U,1),y._index.splice(U,1),j++)}y._ptr[H]=y._values.length}return y._size[0]=S,y._size[1]=w,y}a.prototype.reshape=function(y,S){if(!_n(y))throw new TypeError("Array expected");if(y.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");y.forEach(function(Q){if(!tn(Q)||!xn(Q)||Q<=-2||Q===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+an(y)+")")});var w=this._size[0]*this._size[1];y=Fg(y,w);var A=y[0]*y[1];if(w!==A)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var N=S?this.clone():this;if(this._size[0]===y[0]&&this._size[1]===y[1])return N;for(var z=[],k=0;k<N._ptr.length;k++)for(var M=0;M<N._ptr[k+1]-N._ptr[k];M++)z.push(k);for(var B=N._values.slice(),P=N._index.slice(),R=0;R<N._index.length;R++){var H=P[R],U=z[R],I=H*N._size[1]+U;z[R]=I%y[1],P[R]=Math.floor(I/y[1])}N._values.length=0,N._index.length=0,N._ptr.length=y[1]+1,N._size=y.slice();for(var X=0;X<N._ptr.length;X++)N._ptr[X]=0;for(var j=0;j<B.length;j++){var J=P[j],q=z[j],ne=B[j],V=h(J,N._ptr[q],N._ptr[q+1],N._index);g(V,J,q,ne,N._values,N._index,N._ptr)}return N},a.prototype.clone=function(){var y=new a({values:this._values?$t(this._values):void 0,index:$t(this._index),ptr:$t(this._ptr),size:$t(this._size),datatype:this._datatype});return y},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(y,S){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var w=this,A=this._size[0],N=this._size[1],z=ed(y,w,"map"),k=function(B,P,R){return z.fn(B,[P,R],w)};return x(this,0,A-1,0,N-1,k,S)};function x(y,S,w,A,N,z,k){var M=[],B=[],P=[],R=n,H=0;$i(y._datatype)&&(R=t.find(n,[y._datatype,y._datatype])||n,H=t.convert(0,y._datatype));for(var U=function(se,oe,he){var ge=z(se,oe,he);R(ge,H)||(M.push(ge),B.push(oe))},I=A;I<=N;I++){P.push(M.length);var X=y._ptr[I],j=y._ptr[I+1];if(k)for(var J=X;J<j;J++){var q=y._index[J];q>=S&&q<=w&&U(y._values[J],q-S,I-A)}else{for(var ne={},V=X;V<j;V++){var Q=y._index[V];ne[Q]=y._values[V]}for(var Z=S;Z<=w;Z++){var $=Z in ne?ne[Z]:0;U($,Z-S,I-A)}}}return P.push(M.length),new a({values:M,index:B,ptr:P,size:[w-S+1,N-A+1]})}a.prototype.forEach=function(y,S){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var w=this,A=this._size[0],N=this._size[1],z=ed(y,w,"forEach"),k=0;k<N;k++){var M=this._ptr[k],B=this._ptr[k+1];if(S)for(var P=M;P<B;P++){var R=this._index[P];z.fn(this._values[P],[R,k],w)}else{for(var H={},U=M;U<B;U++){var I=this._index[U];H[I]=this._values[U]}for(var X=0;X<A;X++){var j=X in H?H[X]:0;z.fn(j,[X,k],w)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var y=this._size[1],S=0;S<y;S++)for(var w=this._ptr[S],A=this._ptr[S+1],N=w;N<A;N++){var z=this._index[N];yield{value:this._values[N],index:[z,S]}}},a.prototype.toArray=function(){return D(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return D(this._values,this._index,this._ptr,this._size,!1)};function D(y,S,w,A,N){var z=A[0],k=A[1],M=[],B,P;for(B=0;B<z;B++)for(M[B]=[],P=0;P<k;P++)M[B][P]=0;for(P=0;P<k;P++)for(var R=w[P],H=w[P+1],U=R;U<H;U++)B=S[U],M[B][P]=y?N?$t(y[U]):y[U]:1;return M}return a.prototype.format=function(y){for(var S=this._size[0],w=this._size[1],A=this.density(),N="Sparse Matrix ["+an(S,y)+" x "+an(w,y)+"] density: "+an(A,y)+`
`,z=0;z<w;z++)for(var k=this._ptr[z],M=this._ptr[z+1],B=k;B<M;B++){var P=this._index[B];N+=`
    (`+an(P,y)+", "+an(z,y)+") ==> "+(this._values?an(this._values[B],y):"X")}return N},a.prototype.toString=function(){return an(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(y){if(y){if(bn(y)&&(y=y.toNumber()),!tn(y)||!xn(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var S=y>0?y:0,w=y<0?-y:0,A=this._size[0],N=this._size[1],z=Math.min(A-w,N-S),k=[],M=[],B=[];B[0]=0;for(var P=S;P<N&&k.length<z;P++)for(var R=this._ptr[P],H=this._ptr[P+1],U=R;U<H;U++){var I=this._index[U];if(I===P-S+w){k.push(this._values[U]),M[k.length-1]=I-w;break}}return B.push(k.length),new a({values:k,index:M,ptr:B,size:[z,1]})},a.fromJSON=function(y){return new a(y)},a.diagonal=function(y,S,w,A,N){if(!_n(y))throw new TypeError("Array expected, size parameter");if(y.length!==2)throw new Error("Only two dimensions matrix are supported");if(y=y.map(function(Q){if(bn(Q)&&(Q=Q.toNumber()),!tn(Q)||!xn(Q)||Q<1)throw new Error("Size values must be positive integers");return Q}),w){if(bn(w)&&(w=w.toNumber()),!tn(w)||!xn(w))throw new TypeError("The parameter k must be an integer number")}else w=0;var z=n,k=0;$i(N)&&(z=t.find(n,[N,N])||n,k=t.convert(0,N));var M=w>0?w:0,B=w<0?-w:0,P=y[0],R=y[1],H=Math.min(P-B,R-M),U;if(_n(S)){if(S.length!==H)throw new Error("Invalid value array length");U=function(Z){return S[Z]}}else if(nn(S)){var I=S.size();if(I.length!==1||I[0]!==H)throw new Error("Invalid matrix length");U=function(Z){return S.get([Z])}}else U=function(){return S};for(var X=[],j=[],J=[],q=0;q<R;q++){J.push(X.length);var ne=q-M;if(ne>=0&&ne<H){var V=U(ne);z(V,k)||(j.push(ne+B),X.push(V))}}return J.push(X.length),new a({values:X,index:j,ptr:J,size:[P,R]})},a.prototype.swapRows=function(y,S){if(!tn(y)||!xn(y)||!tn(S)||!xn(S))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return pn(y,this._size[0]),pn(S,this._size[0]),a._swapRows(y,S,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(y,S,w,A,N){for(var z=A[y],k=A[y+1],M=z;M<k;M++)N(w[M],S[M])},a._swapRows=function(y,S,w,A,N,z){for(var k=0;k<w;k++){var M=z[k],B=z[k+1],P=h(y,M,B,N),R=h(S,M,B,N);if(P<B&&R<B&&N[P]===y&&N[R]===S){if(A){var H=A[P];A[P]=A[R],A[R]=H}continue}if(P<B&&N[P]===y&&(R>=B||N[R]!==S)){var U=A?A[P]:void 0;N.splice(R,0,S),A&&A.splice(R,0,U),N.splice(R<=P?P+1:P,1),A&&A.splice(R<=P?P+1:P,1);continue}if(R<B&&N[R]===S&&(P>=B||N[P]!==y)){var I=A?A[R]:void 0;N.splice(P,0,y),A&&A.splice(P,0,I),N.splice(P<=R?R+1:R,1),A&&A.splice(P<=R?R+1:R,1)}}},a},{isClass:!0}),G5="number",U5=["typed"];function Z5(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],i=t[2],a=t[3];return{input:e,radix:n,integerPart:i,fractionalPart:a}}else return null}function K5(e){for(var t=parseInt(e.integerPart,e.radix),n=0,i=0;i<e.fractionalPart.length;i++){var a=parseInt(e.fractionalPart[i],e.radix);n+=a/Math.pow(e.radix,i+1)}var l=t+n;if(isNaN(l))throw new SyntaxError('String "'+e.input+'" is not a valid number');return l}var q5=tt(G5,U5,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var l=Z5(a);if(l)return K5(l);var c=0,f=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);f&&(c=Number(f[2]),a=f[1]);var d=Number(a);if(isNaN(d))throw new SyntaxError('String "'+a+'" is not a valid number');if(f){if(d>2**c-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));d>=2**(c-1)&&(d=d-2**c)}return d},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:t.referToSelf(i=>a=>{var l=a.clone();return l.value=i(a.value),l}),null:function(a){return 0},"Unit, string | Unit":function(a,l){return a.toNumber(l)},"Array | Matrix":t.referToSelf(i=>a=>qs(a,i))});return n.fromJSON=function(i){return parseFloat(i.value)},n}),$5="bignumber",V5=["typed","BigNumber"],Y5=tt($5,V5,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(a){return new n(a+"")},string:function(a){var l=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(l){var c=l[2],f=n(l[1]),d=new n(2).pow(Number(c));if(f.gt(d.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var h=new n(2).pow(Number(c)-1);return f.gte(h)?f.sub(d):f}return new n(a)},BigNumber:function(a){return a},bigint:function(a){return new n(a.toString())},Unit:t.referToSelf(i=>a=>{var l=a.clone();return l.value=i(a.value),l}),Fraction:function(a){return new n(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new n(0)},"Array | Matrix":t.referToSelf(i=>a=>qs(a,i))})}),X5="fraction",W5=["typed","Fraction"],Q5=tt(X5,W5,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new n(a)},string:function(a){return new n(a)},"number, number":function(a,l){return new n(a,l)},"bigint, bigint":function(a,l){return new n(a,l)},null:function(a){return new n(0)},BigNumber:function(a){return new n(a.toString())},bigint:function(a){return new n(a.toString())},Fraction:function(a){return a},Unit:t.referToSelf(i=>a=>{var l=a.clone();return l.value=i(a.value),l}),Object:function(a){return new n(a)},"Array | Matrix":t.referToSelf(i=>a=>qs(a,i))})}),P_="matrix",J5=["typed","Matrix","DenseMatrix","SparseMatrix"],e8=tt(P_,J5,e=>{var{typed:t,Matrix:n,DenseMatrix:i,SparseMatrix:a}=e;return t(P_,{"":function(){return l([])},string:function(f){return l([],f)},"string, string":function(f,d){return l([],f,d)},Array:function(f){return l(f)},Matrix:function(f){return l(f,f.storage())},"Array | Matrix, string":l,"Array | Matrix, string, string":l});function l(c,f,d){if(f==="dense"||f==="default"||f===void 0)return new i(c,d);if(f==="sparse")return new a(c,d);throw new TypeError("Unknown matrix type "+JSON.stringify(f)+".")}}),O_="unaryMinus",t8=["typed"],n8=tt(O_,t8,e=>{var{typed:t}=e;return t(O_,{number:M2,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>i=>{var a=i.clone();return a.value=t.find(n,a.valueType())(i.value),a}),"Array | Matrix":t.referToSelf(n=>i=>qs(i,n,!0))})}),I_="abs",r8=["typed"],i8=tt(I_,r8,e=>{var{typed:t}=e;return t(I_,{number:S2,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>i=>qs(i,n,!0))})}),H_="addScalar",a8=["typed"],s8=tt(H_,a8,e=>{var{typed:t}=e;return t(H_,{"number, number":C2,"Complex, Complex":function(i,a){return i.add(a)},"BigNumber, BigNumber":function(i,a){return i.plus(a)},"bigint, bigint":function(i,a){return i+a},"Fraction, Fraction":function(i,a){return i.add(a)},"Unit, Unit":t.referToSelf(n=>(i,a)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(a))throw new Error("Units do not match");var l=i.clone();return l.value=t.find(n,[l.valueType(),a.valueType()])(l.value,a.value),l.fixPrefix=!1,l})})}),G_="subtractScalar",o8=["typed"],l8=tt(G_,o8,e=>{var{typed:t}=e;return t(G_,{"number, number":A2,"Complex, Complex":function(i,a){return i.sub(a)},"BigNumber, BigNumber":function(i,a){return i.minus(a)},"bigint, bigint":function(i,a){return i-a},"Fraction, Fraction":function(i,a){return i.sub(a)},"Unit, Unit":t.referToSelf(n=>(i,a)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(a))throw new Error("Units do not match");var l=i.clone();return l.value=t.find(n,[l.valueType(),a.valueType()])(l.value,a.value),l.fixPrefix=!1,l})})}),u8="matAlgo11xS0s",c8=["typed","equalScalar"],k2=tt(u8,c8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c,f){var d=a._values,h=a._index,m=a._ptr,g=a._size,_=a._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var x=g[0],D=g[1],y,S=n,w=0,A=c;typeof _=="string"&&(y=_,S=t.find(n,[y,y]),w=t.convert(0,y),l=t.convert(l,y),A=t.find(c,[y,y]));for(var N=[],z=[],k=[],M=0;M<D;M++){k[M]=z.length;for(var B=m[M],P=m[M+1],R=B;R<P;R++){var H=h[R],U=f?A(l,d[R]):A(d[R],l);S(U,w)||(z.push(H),N.push(U))}}return k[D]=z.length,a.createSparseMatrix({values:N,index:z,ptr:k,size:[x,D],datatype:y})}}),f8="matAlgo12xSfs",h8=["typed","DenseMatrix"],uu=tt(f8,h8,e=>{var{typed:t,DenseMatrix:n}=e;return function(a,l,c,f){var d=a._values,h=a._index,m=a._ptr,g=a._size,_=a._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var x=g[0],D=g[1],y,S=c;typeof _=="string"&&(y=_,l=t.convert(l,y),S=t.find(c,[y,y]));for(var w=[],A=[],N=[],z=0;z<D;z++){for(var k=z+1,M=m[z],B=m[z+1],P=M;P<B;P++){var R=h[P];A[R]=d[P],N[R]=k}for(var H=0;H<x;H++)z===0&&(w[H]=[]),N[H]===k?w[H][z]=f?S(l,A[H]):S(A[H],l):w[H][z]=f?S(l,0):S(0,l)}return new n({data:w,size:[x,D],datatype:y})}}),d8="matAlgo14xDs",m8=["typed"],T2=tt(d8,m8,e=>{var{typed:t}=e;return function(a,l,c,f){var d=a._data,h=a._size,m=a._datatype,g,_=c;typeof m=="string"&&(g=m,l=t.convert(l,g),_=t.find(c,[g,g]));var x=h.length>0?n(_,0,h,h[0],d,l,f):[];return a.createDenseMatrix({data:x,size:$t(h),datatype:g})};function n(i,a,l,c,f,d,h){var m=[];if(a===l.length-1)for(var g=0;g<c;g++)m[g]=h?i(d,f[g]):i(f[g],d);else for(var _=0;_<c;_++)m[_]=n(i,a+1,l,l[a+1],f[_],d,h);return m}}),p8="matAlgo02xDS0",g8=["typed","equalScalar"],v8=tt(p8,g8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c,f){var d=a._data,h=a._size,m=a._datatype||a.getDataType(),g=l._values,_=l._index,x=l._ptr,D=l._size,y=l._datatype||l._data===void 0?l._datatype:l.getDataType();if(h.length!==D.length)throw new Ot(h.length,D.length);if(h[0]!==D[0]||h[1]!==D[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+D+")");if(!g)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var S=h[0],w=h[1],A,N=n,z=0,k=c;typeof m=="string"&&m===y&&m!=="mixed"&&(A=m,N=t.find(n,[A,A]),z=t.convert(0,A),k=t.find(c,[A,A]));for(var M=[],B=[],P=[],R=0;R<w;R++){P[R]=B.length;for(var H=x[R],U=x[R+1],I=H;I<U;I++){var X=_[I],j=f?k(g[I],d[X][R]):k(d[X][R],g[I]);N(j,z)||(B.push(X),M.push(j))}}return P[w]=B.length,l.createSparseMatrix({values:M,index:B,ptr:P,size:[S,w],datatype:m===a._datatype&&y===l._datatype?A:void 0})}}),y8="matAlgo03xDSf",_8=["typed"],cu=tt(y8,_8,e=>{var{typed:t}=e;return function(i,a,l,c){var f=i._data,d=i._size,h=i._datatype||i.getDataType(),m=a._values,g=a._index,_=a._ptr,x=a._size,D=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(d.length!==x.length)throw new Ot(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");if(!m)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=d[0],S=d[1],w,A=0,N=l;typeof h=="string"&&h===D&&h!=="mixed"&&(w=h,A=t.convert(0,w),N=t.find(l,[w,w]));for(var z=[],k=0;k<y;k++)z[k]=[];for(var M=[],B=[],P=0;P<S;P++){for(var R=P+1,H=_[P],U=_[P+1],I=H;I<U;I++){var X=g[I];M[X]=c?N(m[I],f[X][P]):N(f[X][P],m[I]),B[X]=R}for(var j=0;j<y;j++)B[j]===R?z[j][P]=M[j]:z[j][P]=c?N(A,f[j][P]):N(f[j][P],A)}return i.createDenseMatrix({data:z,size:[y,S],datatype:h===i._datatype&&D===a._datatype?w:void 0})}}),x8="matAlgo05xSfSf",b8=["typed","equalScalar"],w8=tt(x8,b8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c){var f=a._values,d=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType(),_=l._values,x=l._index,D=l._ptr,y=l._size,S=l._datatype||l._data===void 0?l._datatype:l.getDataType();if(m.length!==y.length)throw new Ot(m.length,y.length);if(m[0]!==y[0]||m[1]!==y[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+y+")");var w=m[0],A=m[1],N,z=n,k=0,M=c;typeof g=="string"&&g===S&&g!=="mixed"&&(N=g,z=t.find(n,[N,N]),k=t.convert(0,N),M=t.find(c,[N,N]));var B=f&&_?[]:void 0,P=[],R=[],H=B?[]:void 0,U=B?[]:void 0,I=[],X=[],j,J,q,ne;for(J=0;J<A;J++){R[J]=P.length;var V=J+1;for(q=h[J],ne=h[J+1];q<ne;q++)j=d[q],P.push(j),I[j]=V,H&&(H[j]=f[q]);for(q=D[J],ne=D[J+1];q<ne;q++)j=x[q],I[j]!==V&&P.push(j),X[j]=V,U&&(U[j]=_[q]);if(B)for(q=R[J];q<P.length;){j=P[q];var Q=I[j],Z=X[j];if(Q===V||Z===V){var $=Q===V?H[j]:k,ee=Z===V?U[j]:k,se=M($,ee);z(se,k)?P.splice(q,1):(B.push(se),q++)}}}return R[A]=P.length,a.createSparseMatrix({values:B,index:P,ptr:R,size:[w,A],datatype:g===a._datatype&&S===l._datatype?N:void 0})}}),D8="matAlgo13xDD",E8=["typed"],S8=tt(D8,E8,e=>{var{typed:t}=e;return function(a,l,c){var f=a._data,d=a._size,h=a._datatype,m=l._data,g=l._size,_=l._datatype,x=[];if(d.length!==g.length)throw new Ot(d.length,g.length);for(var D=0;D<d.length;D++){if(d[D]!==g[D])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+g+")");x[D]=d[D]}var y,S=c;typeof h=="string"&&h===_&&(y=h,S=t.find(c,[y,y]));var w=x.length>0?n(S,0,x,x[0],f,m):[];return a.createDenseMatrix({data:w,size:x,datatype:y})};function n(i,a,l,c,f,d){var h=[];if(a===l.length-1)for(var m=0;m<c;m++)h[m]=i(f[m],d[m]);else for(var g=0;g<c;g++)h[g]=n(i,a+1,l,l[a+1],f[g],d[g]);return h}});function In(e,t){if(Gs(e.size(),t.size()))return[e,t];var n=b2(e.size(),t.size());return[e,t].map(i=>C8(i,n))}function C8(e,t){return Gs(e.size(),t)?e:e.create(H0(e.valueOf(),t),e.datatype())}var A8="matrixAlgorithmSuite",N8=["typed","matrix"],Ho=tt(A8,N8,e=>{var{typed:t,matrix:n}=e,i=S8({typed:t}),a=T2({typed:t});return function(c){var f=c.elop,d=c.SD||c.DS,h;f?(h={"DenseMatrix, DenseMatrix":(x,D)=>i(...In(x,D),f),"Array, Array":(x,D)=>i(...In(n(x),n(D)),f).valueOf(),"Array, DenseMatrix":(x,D)=>i(...In(n(x),D),f),"DenseMatrix, Array":(x,D)=>i(...In(x,n(D)),f)},c.SS&&(h["SparseMatrix, SparseMatrix"]=(x,D)=>c.SS(...In(x,D),f,!1)),c.DS&&(h["DenseMatrix, SparseMatrix"]=(x,D)=>c.DS(...In(x,D),f,!1),h["Array, SparseMatrix"]=(x,D)=>c.DS(...In(n(x),D),f,!1)),d&&(h["SparseMatrix, DenseMatrix"]=(x,D)=>d(...In(D,x),f,!0),h["SparseMatrix, Array"]=(x,D)=>d(...In(n(D),x),f,!0))):(h={"DenseMatrix, DenseMatrix":t.referToSelf(x=>(D,y)=>i(...In(D,y),x)),"Array, Array":t.referToSelf(x=>(D,y)=>i(...In(n(D),n(y)),x).valueOf()),"Array, DenseMatrix":t.referToSelf(x=>(D,y)=>i(...In(n(D),y),x)),"DenseMatrix, Array":t.referToSelf(x=>(D,y)=>i(...In(D,n(y)),x))},c.SS&&(h["SparseMatrix, SparseMatrix"]=t.referToSelf(x=>(D,y)=>c.SS(...In(D,y),x,!1))),c.DS&&(h["DenseMatrix, SparseMatrix"]=t.referToSelf(x=>(D,y)=>c.DS(...In(D,y),x,!1)),h["Array, SparseMatrix"]=t.referToSelf(x=>(D,y)=>c.DS(...In(n(D),y),x,!1))),d&&(h["SparseMatrix, DenseMatrix"]=t.referToSelf(x=>(D,y)=>d(...In(y,D),x,!0)),h["SparseMatrix, Array"]=t.referToSelf(x=>(D,y)=>d(...In(n(y),D),x,!0))));var m=c.scalar||"any",g=c.Ds||c.Ss;g&&(f?(h["DenseMatrix,"+m]=(x,D)=>a(x,D,f,!1),h[m+", DenseMatrix"]=(x,D)=>a(D,x,f,!0),h["Array,"+m]=(x,D)=>a(n(x),D,f,!1).valueOf(),h[m+", Array"]=(x,D)=>a(n(D),x,f,!0).valueOf()):(h["DenseMatrix,"+m]=t.referToSelf(x=>(D,y)=>a(D,y,x,!1)),h[m+", DenseMatrix"]=t.referToSelf(x=>(D,y)=>a(y,D,x,!0)),h["Array,"+m]=t.referToSelf(x=>(D,y)=>a(n(D),y,x,!1).valueOf()),h[m+", Array"]=t.referToSelf(x=>(D,y)=>a(n(y),D,x,!0).valueOf())));var _=c.sS!==void 0?c.sS:c.Ss;return f?(c.Ss&&(h["SparseMatrix,"+m]=(x,D)=>c.Ss(x,D,f,!1)),_&&(h[m+", SparseMatrix"]=(x,D)=>_(D,x,f,!0))):(c.Ss&&(h["SparseMatrix,"+m]=t.referToSelf(x=>(D,y)=>c.Ss(D,y,x,!1))),_&&(h[m+", SparseMatrix"]=t.referToSelf(x=>(D,y)=>_(y,D,x,!0)))),f&&f.signatures&&KC(h,f.signatures),h}}),M8="matAlgo01xDSid",k8=["typed"],z2=tt(M8,k8,e=>{var{typed:t}=e;return function(i,a,l,c){var f=i._data,d=i._size,h=i._datatype||i.getDataType(),m=a._values,g=a._index,_=a._ptr,x=a._size,D=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(d.length!==x.length)throw new Ot(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");if(!m)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=d[0],S=d[1],w=typeof h=="string"&&h!=="mixed"&&h===D?h:void 0,A=w?t.find(l,[w,w]):l,N,z,k=[];for(N=0;N<y;N++)k[N]=[];var M=[],B=[];for(z=0;z<S;z++){for(var P=z+1,R=_[z],H=_[z+1],U=R;U<H;U++)N=g[U],M[N]=c?A(m[U],f[N][z]):A(f[N][z],m[U]),B[N]=P;for(N=0;N<y;N++)B[N]===P?k[N][z]=M[N]:k[N][z]=f[N][z]}return i.createDenseMatrix({data:k,size:[y,S],datatype:h===i._datatype&&D===a._datatype?w:void 0})}}),T8="matAlgo04xSidSid",z8=["typed","equalScalar"],L8=tt(T8,z8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c){var f=a._values,d=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType(),_=l._values,x=l._index,D=l._ptr,y=l._size,S=l._datatype||l._data===void 0?l._datatype:l.getDataType();if(m.length!==y.length)throw new Ot(m.length,y.length);if(m[0]!==y[0]||m[1]!==y[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+y+")");var w=m[0],A=m[1],N,z=n,k=0,M=c;typeof g=="string"&&g===S&&g!=="mixed"&&(N=g,z=t.find(n,[N,N]),k=t.convert(0,N),M=t.find(c,[N,N]));var B=f&&_?[]:void 0,P=[],R=[],H=f&&_?[]:void 0,U=f&&_?[]:void 0,I=[],X=[],j,J,q,ne,V;for(J=0;J<A;J++){R[J]=P.length;var Q=J+1;for(ne=h[J],V=h[J+1],q=ne;q<V;q++)j=d[q],P.push(j),I[j]=Q,H&&(H[j]=f[q]);for(ne=D[J],V=D[J+1],q=ne;q<V;q++)if(j=x[q],I[j]===Q){if(H){var Z=M(H[j],_[q]);z(Z,k)?I[j]=null:H[j]=Z}}else P.push(j),X[j]=Q,U&&(U[j]=_[q]);if(H&&U)for(q=R[J];q<P.length;)j=P[q],I[j]===Q?(B[q]=H[j],q++):X[j]===Q?(B[q]=U[j],q++):P.splice(q,1)}return R[A]=P.length,a.createSparseMatrix({values:B,index:P,ptr:R,size:[w,A],datatype:g===a._datatype&&S===l._datatype?N:void 0})}}),F8="matAlgo10xSids",R8=["typed","DenseMatrix"],L2=tt(F8,R8,e=>{var{typed:t,DenseMatrix:n}=e;return function(a,l,c,f){var d=a._values,h=a._index,m=a._ptr,g=a._size,_=a._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var x=g[0],D=g[1],y,S=c;typeof _=="string"&&(y=_,l=t.convert(l,y),S=t.find(c,[y,y]));for(var w=[],A=[],N=[],z=0;z<D;z++){for(var k=z+1,M=m[z],B=m[z+1],P=M;P<B;P++){var R=h[P];A[R]=d[P],N[R]=k}for(var H=0;H<x;H++)z===0&&(w[H]=[]),N[H]===k?w[H][z]=f?S(l,A[H]):S(A[H],l):w[H][z]=l}return new n({data:w,size:[x,D],datatype:y})}}),j8="multiplyScalar",B8=["typed"],P8=tt(j8,B8,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":N2,"Complex, Complex":function(i,a){return i.mul(a)},"BigNumber, BigNumber":function(i,a){return i.times(a)},"bigint, bigint":function(i,a){return i*a},"Fraction, Fraction":function(i,a){return i.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(n,i)=>i.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,i)=>n.multiply(i)})}),U_="multiply",O8=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],I8=tt(U_,O8,e=>{var{typed:t,matrix:n,addScalar:i,multiplyScalar:a,equalScalar:l,dot:c}=e,f=k2({typed:t,equalScalar:l}),d=T2({typed:t});function h(k,M){switch(k.length){case 1:switch(M.length){case 1:if(k[0]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(k[0]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+k[0]+") must match Matrix rows ("+M[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+M.length+" dimensions)")}break;case 2:switch(M.length){case 1:if(k[1]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+k[1]+") must match Vector length ("+M[0]+")");break;case 2:if(k[1]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+k[1]+") must match Matrix B rows ("+M[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+M.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+k.length+" dimensions)")}}function m(k,M,B){if(B===0)throw new Error("Cannot multiply two empty vectors");return c(k,M)}function g(k,M){if(M.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return _(k,M)}function _(k,M){var B=k._data,P=k._size,R=k._datatype||k.getDataType(),H=M._data,U=M._size,I=M._datatype||M.getDataType(),X=P[0],j=U[1],J,q=i,ne=a;R&&I&&R===I&&typeof R=="string"&&R!=="mixed"&&(J=R,q=t.find(i,[J,J]),ne=t.find(a,[J,J]));for(var V=[],Q=0;Q<j;Q++){for(var Z=ne(B[0],H[0][Q]),$=1;$<X;$++)Z=q(Z,ne(B[$],H[$][Q]));V[Q]=Z}return k.createDenseMatrix({data:V,size:[j],datatype:R===k._datatype&&I===M._datatype?J:void 0})}var x=t("_multiplyMatrixVector",{"DenseMatrix, any":y,"SparseMatrix, any":A}),D=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":S,"DenseMatrix, SparseMatrix":w,"SparseMatrix, DenseMatrix":N,"SparseMatrix, SparseMatrix":z});function y(k,M){var B=k._data,P=k._size,R=k._datatype||k.getDataType(),H=M._data,U=M._datatype||M.getDataType(),I=P[0],X=P[1],j,J=i,q=a;R&&U&&R===U&&typeof R=="string"&&R!=="mixed"&&(j=R,J=t.find(i,[j,j]),q=t.find(a,[j,j]));for(var ne=[],V=0;V<I;V++){for(var Q=B[V],Z=q(Q[0],H[0]),$=1;$<X;$++)Z=J(Z,q(Q[$],H[$]));ne[V]=Z}return k.createDenseMatrix({data:ne,size:[I],datatype:R===k._datatype&&U===M._datatype?j:void 0})}function S(k,M){var B=k._data,P=k._size,R=k._datatype||k.getDataType(),H=M._data,U=M._size,I=M._datatype||M.getDataType(),X=P[0],j=P[1],J=U[1],q,ne=i,V=a;R&&I&&R===I&&typeof R=="string"&&R!=="mixed"&&R!=="mixed"&&(q=R,ne=t.find(i,[q,q]),V=t.find(a,[q,q]));for(var Q=[],Z=0;Z<X;Z++){var $=B[Z];Q[Z]=[];for(var ee=0;ee<J;ee++){for(var se=V($[0],H[0][ee]),oe=1;oe<j;oe++)se=ne(se,V($[oe],H[oe][ee]));Q[Z][ee]=se}}return k.createDenseMatrix({data:Q,size:[X,J],datatype:R===k._datatype&&I===M._datatype?q:void 0})}function w(k,M){var B=k._data,P=k._size,R=k._datatype||k.getDataType(),H=M._values,U=M._index,I=M._ptr,X=M._size,j=M._datatype||M._data===void 0?M._datatype:M.getDataType();if(!H)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var J=P[0],q=X[1],ne,V=i,Q=a,Z=l,$=0;R&&j&&R===j&&typeof R=="string"&&R!=="mixed"&&(ne=R,V=t.find(i,[ne,ne]),Q=t.find(a,[ne,ne]),Z=t.find(l,[ne,ne]),$=t.convert(0,ne));for(var ee=[],se=[],oe=[],he=M.createSparseMatrix({values:ee,index:se,ptr:oe,size:[J,q],datatype:R===k._datatype&&j===M._datatype?ne:void 0}),ge=0;ge<q;ge++){oe[ge]=se.length;var Re=I[ge],Le=I[ge+1];if(Le>Re)for(var Ge=0,Ke=0;Ke<J;Ke++){for(var Qe=Ke+1,$e=void 0,Ve=Re;Ve<Le;Ve++){var G=U[Ve];Ge!==Qe?($e=Q(B[Ke][G],H[Ve]),Ge=Qe):$e=V($e,Q(B[Ke][G],H[Ve]))}Ge===Qe&&!Z($e,$)&&(se.push(Ke),ee.push($e))}}return oe[q]=se.length,he}function A(k,M){var B=k._values,P=k._index,R=k._ptr,H=k._datatype||k._data===void 0?k._datatype:k.getDataType();if(!B)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var U=M._data,I=M._datatype||M.getDataType(),X=k._size[0],j=M._size[0],J=[],q=[],ne=[],V,Q=i,Z=a,$=l,ee=0;H&&I&&H===I&&typeof H=="string"&&H!=="mixed"&&(V=H,Q=t.find(i,[V,V]),Z=t.find(a,[V,V]),$=t.find(l,[V,V]),ee=t.convert(0,V));var se=[],oe=[];ne[0]=0;for(var he=0;he<j;he++){var ge=U[he];if(!$(ge,ee))for(var Re=R[he],Le=R[he+1],Ge=Re;Ge<Le;Ge++){var Ke=P[Ge];oe[Ke]?se[Ke]=Q(se[Ke],Z(ge,B[Ge])):(oe[Ke]=!0,q.push(Ke),se[Ke]=Z(ge,B[Ge]))}}for(var Qe=q.length,$e=0;$e<Qe;$e++){var Ve=q[$e];J[$e]=se[Ve]}return ne[1]=q.length,k.createSparseMatrix({values:J,index:q,ptr:ne,size:[X,1],datatype:H===k._datatype&&I===M._datatype?V:void 0})}function N(k,M){var B=k._values,P=k._index,R=k._ptr,H=k._datatype||k._data===void 0?k._datatype:k.getDataType();if(!B)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var U=M._data,I=M._datatype||M.getDataType(),X=k._size[0],j=M._size[0],J=M._size[1],q,ne=i,V=a,Q=l,Z=0;H&&I&&H===I&&typeof H=="string"&&H!=="mixed"&&(q=H,ne=t.find(i,[q,q]),V=t.find(a,[q,q]),Q=t.find(l,[q,q]),Z=t.convert(0,q));for(var $=[],ee=[],se=[],oe=k.createSparseMatrix({values:$,index:ee,ptr:se,size:[X,J],datatype:H===k._datatype&&I===M._datatype?q:void 0}),he=[],ge=[],Re=0;Re<J;Re++){se[Re]=ee.length;for(var Le=Re+1,Ge=0;Ge<j;Ge++){var Ke=U[Ge][Re];if(!Q(Ke,Z))for(var Qe=R[Ge],$e=R[Ge+1],Ve=Qe;Ve<$e;Ve++){var G=P[Ve];ge[G]!==Le?(ge[G]=Le,ee.push(G),he[G]=V(Ke,B[Ve])):he[G]=ne(he[G],V(Ke,B[Ve]))}}for(var ke=se[Re],Se=ee.length,ae=ke;ae<Se;ae++){var ie=ee[ae];$[ae]=he[ie]}}return se[J]=ee.length,oe}function z(k,M){var B=k._values,P=k._index,R=k._ptr,H=k._datatype||k._data===void 0?k._datatype:k.getDataType(),U=M._values,I=M._index,X=M._ptr,j=M._datatype||M._data===void 0?M._datatype:M.getDataType(),J=k._size[0],q=M._size[1],ne=B&&U,V,Q=i,Z=a;H&&j&&H===j&&typeof H=="string"&&H!=="mixed"&&(V=H,Q=t.find(i,[V,V]),Z=t.find(a,[V,V]));for(var $=ne?[]:void 0,ee=[],se=[],oe=k.createSparseMatrix({values:$,index:ee,ptr:se,size:[J,q],datatype:H===k._datatype&&j===M._datatype?V:void 0}),he=ne?[]:void 0,ge=[],Re,Le,Ge,Ke,Qe,$e,Ve,G,ke=0;ke<q;ke++){se[ke]=ee.length;var Se=ke+1;for(Qe=X[ke],$e=X[ke+1],Ke=Qe;Ke<$e;Ke++)if(G=I[Ke],ne)for(Le=R[G],Ge=R[G+1],Re=Le;Re<Ge;Re++)Ve=P[Re],ge[Ve]!==Se?(ge[Ve]=Se,ee.push(Ve),he[Ve]=Z(U[Ke],B[Re])):he[Ve]=Q(he[Ve],Z(U[Ke],B[Re]));else for(Le=R[G],Ge=R[G+1],Re=Le;Re<Ge;Re++)Ve=P[Re],ge[Ve]!==Se&&(ge[Ve]=Se,ee.push(Ve));if(ne)for(var ae=se[ke],ie=ee.length,de=ae;de<ie;de++){var Fe=ee[de];$[de]=he[Fe]}}return se[q]=ee.length,oe}return t(U_,a,{"Array, Array":t.referTo("Matrix, Matrix",k=>(M,B)=>{h(tr(M),tr(B));var P=k(n(M),n(B));return nn(P)?P.valueOf():P}),"Matrix, Matrix":function(M,B){var P=M.size(),R=B.size();return h(P,R),P.length===1?R.length===1?m(M,B,P[0]):g(M,B):R.length===1?x(M,B):D(M,B)},"Matrix, Array":t.referTo("Matrix,Matrix",k=>(M,B)=>k(M,n(B))),"Array, Matrix":t.referToSelf(k=>(M,B)=>k(n(M,B.storage()),B)),"SparseMatrix, any":function(M,B){return f(M,B,a,!1)},"DenseMatrix, any":function(M,B){return d(M,B,a,!1)},"any, SparseMatrix":function(M,B){return f(B,M,a,!0)},"any, DenseMatrix":function(M,B){return d(B,M,a,!0)},"Array, any":function(M,B){return d(n(M),B,a,!1).valueOf()},"any, Array":function(M,B){return d(n(B),M,a,!0).valueOf()},"any, any":a,"any, any, ...any":t.referToSelf(k=>(M,B,P)=>{for(var R=k(M,B),H=0;H<P.length;H++)R=k(R,P[H]);return R})})}),Z_="subtract",H8=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],G8=tt(Z_,H8,e=>{var{typed:t,matrix:n,equalScalar:i,subtractScalar:a,unaryMinus:l,DenseMatrix:c,concat:f}=e,d=z2({typed:t}),h=cu({typed:t}),m=w8({typed:t,equalScalar:i}),g=L2({typed:t,DenseMatrix:c}),_=uu({typed:t,DenseMatrix:c}),x=Ho({typed:t,matrix:n,concat:f});return t(Z_,{"any, any":a},x({elop:a,SS:m,DS:d,SD:h,Ss:_,sS:g}))}),U8="matAlgo07xSSf",Z8=["typed","SparseMatrix"],Kc=tt(U8,Z8,e=>{var{typed:t,SparseMatrix:n}=e;return function(l,c,f){var d=l._size,h=l._datatype||l._data===void 0?l._datatype:l.getDataType(),m=c._size,g=c._datatype||c._data===void 0?c._datatype:c.getDataType();if(d.length!==m.length)throw new Ot(d.length,m.length);if(d[0]!==m[0]||d[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+m+")");var _=d[0],x=d[1],D,y=0,S=f;typeof h=="string"&&h===g&&h!=="mixed"&&(D=h,y=t.convert(0,D),S=t.find(f,[D,D]));for(var w=[],A=[],N=new Array(x+1).fill(0),z=[],k=[],M=[],B=[],P=0;P<x;P++){var R=P+1,H=0;i(l,P,M,z,R),i(c,P,B,k,R);for(var U=0;U<_;U++){var I=M[U]===R?z[U]:y,X=B[U]===R?k[U]:y,j=S(I,X);j!==0&&j!==!1&&(A.push(U),w.push(j),H++)}N[P+1]=N[P]+H}return new n({values:w,index:A,ptr:N,size:[_,x],datatype:h===l._datatype&&g===c._datatype?D:void 0})};function i(a,l,c,f,d){for(var h=a._values,m=a._index,g=a._ptr,_=g[l],x=g[l+1];_<x;_++){var D=m[_];c[D]=d,f[D]=h[_]}}}),K_="conj",K8=["typed"],q8=tt(K_,K8,e=>{var{typed:t}=e;return t(K_,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),Unit:t.referToSelf(n=>i=>new i.constructor(n(i.toNumeric()),i.formatUnits())),"Array | Matrix":t.referToSelf(n=>i=>qs(i,n))})}),q_="concat",$8=["typed","matrix","isInteger"],V8=tt(q_,$8,e=>{var{typed:t,matrix:n,isInteger:i}=e;return t(q_,{"...Array | Matrix | number | BigNumber":function(l){var c,f=l.length,d=-1,h,m=!1,g=[];for(c=0;c<f;c++){var _=l[c];if(nn(_)&&(m=!0),tn(_)||bn(_)){if(c!==f-1)throw new Error("Dimension must be specified as last argument");if(h=d,d=_.valueOf(),!i(d))throw new TypeError("Integer number expected for dimension");if(d<0||c>0&&d>h)throw new Io(d,h+1)}else{var x=$t(_).valueOf(),D=tr(x);if(g[c]=x,h=d,d=D.length-1,c>0&&d!==h)throw new Ot(h+1,d+1)}}if(g.length===0)throw new SyntaxError("At least one matrix expected");for(var y=g.shift();g.length;)y=x2(y,g.shift(),d);return m?n(y):y},"...string":function(l){return l.join("")}})}),$_="flatten",Y8=["typed"],X8=tt($_,Y8,e=>{var{typed:t}=e;return t($_,{Array:function(i){return I0(i)},Matrix:function(i){return i.create(I0(i.valueOf(),!0),i.datatype())}})}),V_="identity",W8=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Q8=tt(V_,W8,e=>{var{typed:t,config:n,matrix:i,BigNumber:a,DenseMatrix:l,SparseMatrix:c}=e;return t(V_,{"":function(){return n.matrix==="Matrix"?i([]):[]},string:function(m){return i(m)},"number | BigNumber":function(m){return d(m,m,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(m,g){return d(m,m,g)},"number | BigNumber, number | BigNumber":function(m,g){return d(m,g,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(m,g,_){return d(m,g,_)},Array:function(m){return f(m)},"Array, string":function(m,g){return f(m,g)},Matrix:function(m){return f(m.valueOf(),m.storage())},"Matrix, string":function(m,g){return f(m.valueOf(),g)}});function f(h,m){switch(h.length){case 0:return m?i(m):[];case 1:return d(h[0],h[0],m);case 2:return d(h[0],h[1],m);default:throw new Error("Vector containing two values expected")}}function d(h,m,g){var _=bn(h)||bn(m)?a:null;if(bn(h)&&(h=h.toNumber()),bn(m)&&(m=m.toNumber()),!xn(h)||h<1)throw new Error("Parameters in function identity must be positive integers");if(!xn(m)||m<1)throw new Error("Parameters in function identity must be positive integers");var x=_?new a(1):1,D=_?new _(0):0,y=[h,m];if(g){if(g==="sparse")return c.diagonal(y,x,0,D);if(g==="dense")return l.diagonal(y,x,0,D);throw new TypeError('Unknown matrix type "'.concat(g,'"'))}for(var S=P0([],y,D),w=h<m?h:m,A=0;A<w;A++)S[A][A]=x;return S}});function J8(){throw new Error('No "bignumber" implementation available')}function e4(){throw new Error('No "fraction" implementation available')}function t4(){throw new Error('No "matrix" implementation available')}var Y_="size",n4=["typed","config","?matrix"],r4=tt(Y_,n4,e=>{var{typed:t,config:n,matrix:i}=e;return t(Y_,{Matrix:function(l){return l.create(l.size(),"number")},Array:tr,string:function(l){return n.matrix==="Array"?[l.length]:i([l.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(l){return n.matrix==="Array"?[]:i?i([],"dense","number"):t4()}})}),X_="transpose",i4=["typed","matrix"],a4=tt(X_,i4,e=>{var{typed:t,matrix:n}=e;return t(X_,{Array:c=>i(n(c)).valueOf(),Matrix:i,any:$t});function i(c){var f=c.size(),d;switch(f.length){case 1:d=c.clone();break;case 2:{var h=f[0],m=f[1];if(m===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+an(f)+")");switch(c.storage()){case"dense":d=a(c,h,m);break;case"sparse":d=l(c,h,m);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+an(f)+")")}return d}function a(c,f,d){for(var h=c._data,m=[],g,_=0;_<d;_++){g=m[_]=[];for(var x=0;x<f;x++)g[x]=$t(h[x][_])}return c.createDenseMatrix({data:m,size:[d,f],datatype:c._datatype})}function l(c,f,d){for(var h=c._values,m=c._index,g=c._ptr,_=h?[]:void 0,x=[],D=[],y=[],S=0;S<f;S++)y[S]=0;var w,A,N;for(w=0,A=m.length;w<A;w++)y[m[w]]++;for(var z=0,k=0;k<f;k++)D.push(z),z+=y[k],y[k]=D[k];for(D.push(z),N=0;N<d;N++)for(var M=g[N],B=g[N+1],P=M;P<B;P++){var R=y[m[P]]++;x[R]=N,h&&(_[R]=$t(h[P]))}return c.createSparseMatrix({values:_,index:x,ptr:D,size:[d,f],datatype:c._datatype})}}),W_="ctranspose",s4=["typed","transpose","conj"],o4=tt(W_,s4,e=>{var{typed:t,transpose:n,conj:i}=e;return t(W_,{any:function(l){return i(n(l))}})}),l4="numeric",u4=["number","?bignumber","?fraction"],c4=tt(l4,u4,e=>{var{number:t,bignumber:n,fraction:i}=e,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},l={number:c=>t(c),BigNumber:n?c=>n(c):J8,bigint:c=>BigInt(c),Fraction:i?c=>i(c):e4};return function(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",h=arguments.length>2?arguments[2]:void 0;if(h!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var m=Ps(f);if(!(m in a))throw new TypeError("Cannot convert "+f+' of type "'+m+'"; valid input types are '+Object.keys(a).join(", "));if(!(d in l))throw new TypeError("Cannot convert "+f+' to type "'+d+'"; valid output types are '+Object.keys(l).join(", "));return d===m?f:l[d](f)}}),Q_="divideScalar",f4=["typed","numeric"],h4=tt(Q_,f4,e=>{var{typed:t,numeric:n}=e;return t(Q_,{"number, number":function(a,l){return a/l},"Complex, Complex":function(a,l){return a.div(l)},"BigNumber, BigNumber":function(a,l){return a.div(l)},"bigint, bigint":function(a,l){return a/l},"Fraction, Fraction":function(a,l){return a.div(l)},"Unit, number | Complex | Fraction | BigNumber | Unit":(i,a)=>i.divide(a),"number | Fraction | Complex | BigNumber, Unit":(i,a)=>a.divideInto(i)})}),J_="dotDivide",d4=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],m4=tt(J_,d4,e=>{var{typed:t,matrix:n,equalScalar:i,divideScalar:a,DenseMatrix:l,concat:c,SparseMatrix:f}=e,d=v8({typed:t,equalScalar:i}),h=cu({typed:t}),m=Kc({typed:t,SparseMatrix:f}),g=k2({typed:t,equalScalar:i}),_=uu({typed:t,DenseMatrix:l}),x=Ho({typed:t,matrix:n,concat:c});return t(J_,x({elop:a,SS:m,DS:h,SD:d,Ss:g,sS:_}))});function Bg(e){var{DenseMatrix:t}=e;return function(i,a,l){var c=i.size();if(c.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+an(c)+")");var f=c[0],d=c[1];if(f!==d)throw new RangeError("Matrix must be square (size: "+an(c)+")");var h=[];if(nn(a)){var m=a.size(),g=a._data;if(m.length===1){if(m[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<f;_++)h[_]=[g[_]];return new t({data:h,size:[f,1],datatype:a._datatype})}if(m.length===2){if(m[0]!==f||m[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Xb(a)){if(l){h=[];for(var x=0;x<f;x++)h[x]=[g[x][0]];return new t({data:h,size:[f,1],datatype:a._datatype})}return a}if(Wb(a)){for(var D=0;D<f;D++)h[D]=[0];for(var y=a._values,S=a._index,w=a._ptr,A=w[1],N=w[0];N<A;N++){var z=S[N];h[z][0]=y[N]}return new t({data:h,size:[f,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(_n(a)){var k=tr(a);if(k.length===1){if(k[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var M=0;M<f;M++)h[M]=[a[M]];return new t({data:h,size:[f,1]})}if(k.length===2){if(k[0]!==f||k[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var B=0;B<f;B++)h[B]=[a[B][0]];return new t({data:h,size:[f,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var ex="lsolve",p4=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],g4=tt(ex,p4,e=>{var{typed:t,matrix:n,divideScalar:i,multiplyScalar:a,subtractScalar:l,equalScalar:c,DenseMatrix:f}=e,d=Bg({DenseMatrix:f});return t(ex,{"SparseMatrix, Array | Matrix":function(_,x){return m(_,x)},"DenseMatrix, Array | Matrix":function(_,x){return h(_,x)},"Array, Array | Matrix":function(_,x){var D=n(_),y=h(D,x);return y.valueOf()}});function h(g,_){_=d(g,_,!0);for(var x=_._data,D=g._size[0],y=g._size[1],S=[],w=g._data,A=0;A<y;A++){var N=x[A][0]||0,z=void 0;if(c(N,0))z=0;else{var k=w[A][A];if(c(k,0))throw new Error("Linear system cannot be solved since matrix is singular");z=i(N,k);for(var M=A+1;M<D;M++)x[M]=[l(x[M][0]||0,a(z,w[M][A]))]}S[A]=[z]}return new f({data:S,size:[D,1]})}function m(g,_){_=d(g,_,!0);for(var x=_._data,D=g._size[0],y=g._size[1],S=g._values,w=g._index,A=g._ptr,N=[],z=0;z<y;z++){var k=x[z][0]||0;if(c(k,0))N[z]=[0];else{for(var M=0,B=[],P=[],R=A[z],H=A[z+1],U=R;U<H;U++){var I=w[U];I===z?M=S[U]:I>z&&(B.push(S[U]),P.push(I))}if(c(M,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var X=i(k,M),j=0,J=P.length;j<J;j++){var q=P[j];x[q]=[l(x[q][0]||0,a(X,B[j]))]}N[z]=[X]}}return new f({data:N,size:[D,1]})}}),tx="usolve",v4=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],y4=tt(tx,v4,e=>{var{typed:t,matrix:n,divideScalar:i,multiplyScalar:a,subtractScalar:l,equalScalar:c,DenseMatrix:f}=e,d=Bg({DenseMatrix:f});return t(tx,{"SparseMatrix, Array | Matrix":function(_,x){return m(_,x)},"DenseMatrix, Array | Matrix":function(_,x){return h(_,x)},"Array, Array | Matrix":function(_,x){var D=n(_),y=h(D,x);return y.valueOf()}});function h(g,_){_=d(g,_,!0);for(var x=_._data,D=g._size[0],y=g._size[1],S=[],w=g._data,A=y-1;A>=0;A--){var N=x[A][0]||0,z=void 0;if(c(N,0))z=0;else{var k=w[A][A];if(c(k,0))throw new Error("Linear system cannot be solved since matrix is singular");z=i(N,k);for(var M=A-1;M>=0;M--)x[M]=[l(x[M][0]||0,a(z,w[M][A]))]}S[A]=[z]}return new f({data:S,size:[D,1]})}function m(g,_){_=d(g,_,!0);for(var x=_._data,D=g._size[0],y=g._size[1],S=g._values,w=g._index,A=g._ptr,N=[],z=y-1;z>=0;z--){var k=x[z][0]||0;if(c(k,0))N[z]=[0];else{for(var M=0,B=[],P=[],R=A[z],H=A[z+1],U=H-1;U>=R;U--){var I=w[U];I===z?M=S[U]:I<z&&(B.push(S[U]),P.push(I))}if(c(M,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var X=i(k,M),j=0,J=P.length;j<J;j++){var q=P[j];x[q]=[l(x[q][0],a(X,B[j]))]}N[z]=[X]}}return new f({data:N,size:[D,1]})}}),nd="equal",_4=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],x4=tt(nd,_4,e=>{var{typed:t,matrix:n,equalScalar:i,DenseMatrix:a,concat:l,SparseMatrix:c}=e,f=cu({typed:t}),d=Kc({typed:t,SparseMatrix:c}),h=uu({typed:t,DenseMatrix:a}),m=Ho({typed:t,matrix:n,concat:l});return t(nd,b4({typed:t,equalScalar:i}),m({elop:i,SS:d,DS:f,Ss:h}))}),b4=tt(nd,["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return t(nd,{"any, any":function(a,l){return a===null?l===null:l===null?a===null:a===void 0?l===void 0:l===void 0?a===void 0:n(a,l)}})}),rd="smaller",w4=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],D4=tt(rd,w4,e=>{var{typed:t,config:n,bignumber:i,matrix:a,DenseMatrix:l,concat:c,SparseMatrix:f}=e,d=cu({typed:t}),h=Kc({typed:t,SparseMatrix:f}),m=uu({typed:t,DenseMatrix:l}),g=Ho({typed:t,matrix:a,concat:c}),_=Hd({typed:t});function x(D,y){return D.lt(y)&&!Id(D,y,n.relTol,n.absTol)}return t(rd,E4({typed:t,config:n}),{"boolean, boolean":(D,y)=>D<y,"BigNumber, BigNumber":x,"bigint, bigint":(D,y)=>D<y,"Fraction, Fraction":(D,y)=>D.compare(y)===-1,"Fraction, BigNumber":function(y,S){return x(i(y),S)},"BigNumber, Fraction":function(y,S){return x(y,i(S))},"Complex, Complex":function(y,S){throw new TypeError("No ordering relation is defined for complex numbers")}},_,g({SS:h,DS:d,Ss:m}))}),E4=tt(rd,["typed","config"],e=>{var{typed:t,config:n}=e;return t(rd,{"number, number":function(a,l){return a<l&&!Fo(a,l,n.relTol,n.absTol)}})}),id="larger",S4=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],C4=tt(id,S4,e=>{var{typed:t,config:n,bignumber:i,matrix:a,DenseMatrix:l,concat:c,SparseMatrix:f}=e,d=cu({typed:t}),h=Kc({typed:t,SparseMatrix:f}),m=uu({typed:t,DenseMatrix:l}),g=Ho({typed:t,matrix:a,concat:c}),_=Hd({typed:t});function x(D,y){return D.gt(y)&&!Id(D,y,n.relTol,n.absTol)}return t(id,A4({typed:t,config:n}),{"boolean, boolean":(D,y)=>D>y,"BigNumber, BigNumber":x,"bigint, bigint":(D,y)=>D>y,"Fraction, Fraction":(D,y)=>D.compare(y)===1,"Fraction, BigNumber":function(y,S){return x(i(y),S)},"BigNumber, Fraction":function(y,S){return x(y,i(S))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},_,g({SS:h,DS:d,Ss:m}))}),A4=tt(id,["typed","config"],e=>{var{typed:t,config:n}=e;return t(id,{"number, number":function(a,l){return a>l&&!Fo(a,l,n.relTol,n.absTol)}})}),ad="largerEq",N4=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],M4=tt(ad,N4,e=>{var{typed:t,config:n,matrix:i,DenseMatrix:a,concat:l,SparseMatrix:c}=e,f=cu({typed:t}),d=Kc({typed:t,SparseMatrix:c}),h=uu({typed:t,DenseMatrix:a}),m=Ho({typed:t,matrix:i,concat:l}),g=Hd({typed:t});return t(ad,k4({typed:t,config:n}),{"boolean, boolean":(_,x)=>_>=x,"BigNumber, BigNumber":function(x,D){return x.gte(D)||Id(x,D,n.relTol,n.absTol)},"bigint, bigint":function(x,D){return x>=D},"Fraction, Fraction":(_,x)=>_.compare(x)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},g,m({SS:d,DS:f,Ss:h}))}),k4=tt(ad,["typed","config"],e=>{var{typed:t,config:n}=e;return t(ad,{"number, number":function(a,l){return a>=l||Fo(a,l,n.relTol,n.absTol)}})}),nx="deepEqual",T4=["typed","equal"],z4=tt(nx,T4,e=>{var{typed:t,equal:n}=e;return t(nx,{"any, any":function(l,c){return i(l.valueOf(),c.valueOf())}});function i(a,l){if(Array.isArray(a))if(Array.isArray(l)){var c=a.length;if(c!==l.length)return!1;for(var f=0;f<c;f++)if(!i(a[f],l[f]))return!1;return!0}else return!1;else return Array.isArray(l)?!1:n(a,l)}}),L4="FibonacciHeap",F4=["smaller","larger"],R4=tt(L4,F4,e=>{var{smaller:t,larger:n}=e,i=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(m,g){var _={key:m,value:g,degree:0};if(this._minimum){var x=this._minimum;_.left=x,_.right=x.right,x.right=_,_.right.left=_,t(m,x.key)&&(this._minimum=_)}else _.left=_,_.right=_,this._minimum=_;return this._size++,_},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var m=this._minimum;if(m===null)return m;for(var g=this._minimum,_=m.degree,x=m.child;_>0;){var D=x.right;x.left.right=x.right,x.right.left=x.left,x.left=g,x.right=g.right,g.right=x,x.right.left=x,x.parent=null,x=D,_--}return m.left.right=m.right,m.right.left=m.left,m===m.right?g=null:(g=m.right,g=h(g,this._size)),this._size--,this._minimum=g,m},a.prototype.remove=function(m){this._minimum=l(this._minimum,m,-1),this.extractMinimum()};function l(m,g,_){g.key=_;var x=g.parent;return x&&t(g.key,x.key)&&(c(m,g,x),f(m,x)),t(g.key,m.key)&&(m=g),m}function c(m,g,_){g.left.right=g.right,g.right.left=g.left,_.degree--,_.child===g&&(_.child=g.right),_.degree===0&&(_.child=null),g.left=m,g.right=m.right,m.right=g,g.right.left=g,g.parent=null,g.mark=!1}function f(m,g){var _=g.parent;_&&(g.mark?(c(m,g,_),f(_)):g.mark=!0)}var d=function(g,_){g.left.right=g.right,g.right.left=g.left,g.parent=_,_.child?(g.left=_.child,g.right=_.child.right,_.child.right=g,g.right.left=g):(_.child=g,g.right=g,g.left=g),_.degree++,g.mark=!1};function h(m,g){var _=Math.floor(Math.log(g)*i)+1,x=new Array(_),D=0,y=m;if(y)for(D++,y=y.right;y!==m;)D++,y=y.right;for(var S;D>0;){for(var w=y.degree,A=y.right;S=x[w],!!S;){if(n(y.key,S.key)){var N=S;S=y,y=N}d(S,y),x[w]=null,w++}x[w]=y,y=A,D--}m=null;for(var z=0;z<_;z++)S=x[z],S&&(m?(S.left.right=S.right,S.right.left=S.left,S.left=m,S.right=m.right,m.right=S,S.right.left=S,t(S.key,m.key)&&(m=S)):m=S);return m}return a},{isClass:!0}),j4="Spa",B4=["addScalar","equalScalar","FibonacciHeap"],P4=tt(j4,B4,e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:i}=e;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(l,c){if(this._values[l])this._values[l].value=c;else{var f=this._heap.insert(l,c);this._values[l]=f}},a.prototype.get=function(l){var c=this._values[l];return c?c.value:0},a.prototype.accumulate=function(l,c){var f=this._values[l];f?f.value=t(f.value,c):(f=this._heap.insert(l,c),this._values[l]=f)},a.prototype.forEach=function(l,c,f){var d=this._heap,h=this._values,m=[],g=d.extractMinimum();for(g&&m.push(g);g&&g.key<=c;)g.key>=l&&(n(g.value,0)||f(g.key,g.value,this)),g=d.extractMinimum(),g&&m.push(g);for(var _=0;_<m.length;_++){var x=m[_];g=d.insert(x.key,x.value),h[g.key]=g}},a.prototype.swap=function(l,c){var f=this._values[l],d=this._values[c];if(!f&&d)f=this._heap.insert(l,d.value),this._heap.remove(d),this._values[l]=f,this._values[c]=void 0;else if(f&&!d)d=this._heap.insert(c,f.value),this._heap.remove(f),this._values[c]=d,this._values[l]=void 0;else if(f&&d){var h=f.value;f.value=d.value,d.value=h}},a},{isClass:!0}),rx="add",O4=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],I4=tt(rx,O4,e=>{var{typed:t,matrix:n,addScalar:i,equalScalar:a,DenseMatrix:l,SparseMatrix:c,concat:f}=e,d=z2({typed:t}),h=L8({typed:t,equalScalar:a}),m=L2({typed:t,DenseMatrix:l}),g=Ho({typed:t,matrix:n,concat:f});return t(rx,{"any, any":i,"any, any, ...any":t.referToSelf(_=>(x,D,y)=>{for(var S=_(x,D),w=0;w<y.length;w++)S=_(S,y[w]);return S})},g({elop:i,DS:d,SS:h,Ss:m}))}),ix="dot",H4=["typed","addScalar","multiplyScalar","conj","size"],G4=tt(ix,H4,e=>{var{typed:t,addScalar:n,multiplyScalar:i,conj:a,size:l}=e;return t(ix,{"Array | DenseMatrix, Array | DenseMatrix":f,"SparseMatrix, SparseMatrix":d});function c(m,g){var _=h(m),x=h(g),D,y;if(_.length===1)D=_[0];else if(_.length===2&&_[1]===1)D=_[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+_.join(", ")+")");if(x.length===1)y=x[0];else if(x.length===2&&x[1]===1)y=x[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+x.join(", ")+")");if(D!==y)throw new RangeError("Vectors must have equal length ("+D+" != "+y+")");if(D===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return D}function f(m,g){var _=c(m,g),x=nn(m)?m._data:m,D=nn(m)?m._datatype||m.getDataType():void 0,y=nn(g)?g._data:g,S=nn(g)?g._datatype||g.getDataType():void 0,w=h(m).length===2,A=h(g).length===2,N=n,z=i;if(D&&S&&D===S&&typeof D=="string"&&D!=="mixed"){var k=D;N=t.find(n,[k,k]),z=t.find(i,[k,k])}if(!w&&!A){for(var M=z(a(x[0]),y[0]),B=1;B<_;B++)M=N(M,z(a(x[B]),y[B]));return M}if(!w&&A){for(var P=z(a(x[0]),y[0][0]),R=1;R<_;R++)P=N(P,z(a(x[R]),y[R][0]));return P}if(w&&!A){for(var H=z(a(x[0][0]),y[0]),U=1;U<_;U++)H=N(H,z(a(x[U][0]),y[U]));return H}if(w&&A){for(var I=z(a(x[0][0]),y[0][0]),X=1;X<_;X++)I=N(I,z(a(x[X][0]),y[X][0]));return I}}function d(m,g){c(m,g);for(var _=m._index,x=m._values,D=g._index,y=g._values,S=0,w=n,A=i,N=0,z=0;N<_.length&&z<D.length;){var k=_[N],M=D[z];if(k<M){N++;continue}if(k>M){z++;continue}k===M&&(S=w(S,A(x[N],y[z])),N++,z++)}return S}function h(m){return nn(m)?m.size():l(m)}}),ax="lup",U4=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Z4=tt(ax,U4,e=>{var{typed:t,matrix:n,abs:i,addScalar:a,divideScalar:l,multiplyScalar:c,subtractScalar:f,larger:d,equalScalar:h,unaryMinus:m,DenseMatrix:g,SparseMatrix:_,Spa:x}=e;return t(ax,{DenseMatrix:function(w){return D(w)},SparseMatrix:function(w){return y(w)},Array:function(w){var A=n(w),N=D(A);return{L:N.L.valueOf(),U:N.U.valueOf(),p:N.p}}});function D(S){var w=S._size[0],A=S._size[1],N=Math.min(w,A),z=$t(S._data),k=[],M=[w,N],B=[],P=[N,A],R,H,U,I=[];for(R=0;R<w;R++)I[R]=R;for(H=0;H<A;H++){if(H>0)for(R=0;R<w;R++){var X=Math.min(R,H),j=0;for(U=0;U<X;U++)j=a(j,c(z[R][U],z[U][H]));z[R][H]=f(z[R][H],j)}var J=H,q=0,ne=0;for(R=H;R<w;R++){var V=z[R][H],Q=i(V);d(Q,q)&&(J=R,q=Q,ne=V)}if(H!==J&&(I[H]=[I[J],I[J]=I[H]][0],g._swapRows(H,J,z)),H<w)for(R=H+1;R<w;R++){var Z=z[R][H];h(Z,0)||(z[R][H]=l(z[R][H],ne))}}for(H=0;H<A;H++)for(R=0;R<w;R++){if(H===0&&(R<A&&(B[R]=[]),k[R]=[]),R<H){R<A&&(B[R][H]=z[R][H]),H<w&&(k[R][H]=0);continue}if(R===H){R<A&&(B[R][H]=z[R][H]),H<w&&(k[R][H]=1);continue}R<A&&(B[R][H]=0),H<w&&(k[R][H]=z[R][H])}var $=new g({data:k,size:M}),ee=new g({data:B,size:P}),se=[];for(R=0,N=I.length;R<N;R++)se[I[R]]=R;return{L:$,U:ee,p:se,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function y(S){var w=S._size[0],A=S._size[1],N=Math.min(w,A),z=S._values,k=S._index,M=S._ptr,B=[],P=[],R=[],H=[w,N],U=[],I=[],X=[],j=[N,A],J,q,ne,V=[],Q=[];for(J=0;J<w;J++)V[J]=J,Q[J]=J;var Z=function(se,oe){var he=Q[se],ge=Q[oe];V[he]=oe,V[ge]=se,Q[se]=ge,Q[oe]=he},$=function(){var se=new x;q<w&&(R.push(B.length),B.push(1),P.push(q)),X.push(U.length);var oe=M[q],he=M[q+1];for(ne=oe;ne<he;ne++)J=k[ne],se.set(V[J],z[ne]);q>0&&se.forEach(0,q-1,function(Ge,Ke){_._forEachRow(Ge,B,P,R,function(Qe,$e){Qe>Ge&&se.accumulate(Qe,m(c($e,Ke)))})});var ge=q,Re=se.get(q),Le=i(Re);se.forEach(q+1,w-1,function(Ge,Ke){var Qe=i(Ke);d(Qe,Le)&&(ge=Ge,Le=Qe,Re=Ke)}),q!==ge&&(_._swapRows(q,ge,H[1],B,P,R),_._swapRows(q,ge,j[1],U,I,X),se.swap(q,ge),Z(q,ge)),se.forEach(0,w-1,function(Ge,Ke){Ge<=q?(U.push(Ke),I.push(Ge)):(Ke=l(Ke,Re),h(Ke,0)||(B.push(Ke),P.push(Ge)))})};for(q=0;q<A;q++)$();return X.push(U.length),R.push(B.length),{L:new _({values:B,index:P,ptr:R,size:H}),U:new _({values:U,index:I,ptr:X,size:j}),p:V,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});function K4(e,t,n,i){e._values;for(var a=e._index,l=e._ptr,c=e._size,f=e._datatype,d=c[0],h=c[1],m=null,g=[],_=[],x=0,D=0;D<h;D++){_[D]=x;for(var y=n?n[D]:D,S=l[y],w=l[y+1],A=S;A<w;A++){var N=a[A];g[x]=N,x++}}return _[h]=x,e.createSparseMatrix({values:m,index:g,ptr:_,size:[d,h],datatype:f})}function F2(e,t,n,i,a,l,c){var f=0;for(n[c]=e;f>=0;){var d=n[c+f],h=n[i+d];h===-1?(f--,l[t++]=d):(n[i+d]=n[a+h],++f,n[c+f]=h)}return t}function q4(e,t){if(!e)return null;var n=0,i,a=[],l=[],c=0,f=t,d=2*t;for(i=0;i<t;i++)l[c+i]=-1;for(i=t-1;i>=0;i--)e[i]!==-1&&(l[f+i]=l[c+e[i]],l[c+e[i]]=i);for(i=0;i<t;i++)e[i]===-1&&(n=F2(i,n,l,c,f,a,d));return a}function $4(e,t){if(!e)return null;var n=e._index,i=e._ptr,a=e._size,l=a[0],c=a[1],f=[],d=[],h=0,m=c,g,_;for(g=0;g<l;g++)d[m+g]=-1;for(var x=0;x<c;x++){f[x]=-1,d[h+x]=-1;for(var D=i[x],y=i[x+1],S=D;S<y;S++){var w=n[S];for(g=d[m+w];g!==-1&&g<x;g=_)_=d[h+g],d[h+g]=x,_===-1&&(f[g]=x);d[m+w]=x}}return f}function V4(e,t,n){for(var i=e._values,a=e._index,l=e._ptr,c=e._size,f=c[1],d=0,h=0;h<f;h++){var m=l[h];for(l[h]=d;m<l[h+1];m++)t(a[m],h,i?i[m]:1,n)&&(a[d]=a[m],i&&(i[d]=i[m]),d++)}return l[f]=d,a.splice(d,a.length-d),i&&i.splice(d,i.length-d),d}function Fs(e){return-e-2}var Y4="csAmd",X4=["add","multiply","transpose"],W4=tt(Y4,X4,e=>{var{add:t,multiply:n,transpose:i}=e;return function(m,g){if(!g||m<=0||m>3)return null;var _=g._size,x=_[0],D=_[1],y=0,S=Math.max(16,10*Math.sqrt(D));S=Math.min(D-2,S);var w=a(m,g,x,D,S);V4(w,d,null);for(var A=w._index,N=w._ptr,z=N[D],k=[],M=[],B=0,P=D+1,R=2*(D+1),H=3*(D+1),U=4*(D+1),I=5*(D+1),X=6*(D+1),j=7*(D+1),J=k,q=l(D,N,M,B,H,J,R,j,P,X,U,I),ne=c(D,N,M,I,U,X,S,P,H,J,R),V=0,Q,Z,$,ee,se,oe,he,ge,Re,Le,Ge,Ke,Qe,$e,Ve,G;ne<D;){for($=-1;V<D&&($=M[H+V])===-1;V++);M[R+$]!==-1&&(J[M[R+$]]=-1),M[H+V]=M[R+$];var ke=M[U+$],Se=M[P+$];ne+=Se;var ae=0;M[P+$]=-Se;var ie=N[$],de=ke===0?ie:z,Fe=de;for(ee=1;ee<=ke+1;ee++){for(ee>ke?(oe=$,he=ie,ge=M[B+$]-ke):(oe=A[ie++],he=N[oe],ge=M[B+oe]),se=1;se<=ge;se++)Q=A[he++],!((Re=M[P+Q])<=0)&&(ae+=Re,M[P+Q]=-Re,A[Fe++]=Q,M[R+Q]!==-1&&(J[M[R+Q]]=J[Q]),J[Q]!==-1?M[R+J[Q]]=M[R+Q]:M[H+M[I+Q]]=M[R+Q]);oe!==$&&(N[oe]=Fs($),M[X+oe]=0)}for(ke!==0&&(z=Fe),M[I+$]=ae,N[$]=de,M[B+$]=Fe-de,M[U+$]=-2,q=f(q,y,M,X,D),Le=de;Le<Fe;Le++)if(Q=A[Le],!((Ge=M[U+Q])<=0)){Re=-M[P+Q];var Oe=q-Re;for(ie=N[Q],Ke=N[Q]+Ge-1;ie<=Ke;ie++)oe=A[ie],M[X+oe]>=q?M[X+oe]-=Re:M[X+oe]!==0&&(M[X+oe]=M[I+oe]+Oe)}for(Le=de;Le<Fe;Le++){for(Q=A[Le],Ke=N[Q],Qe=Ke+M[U+Q]-1,$e=Ke,Ve=0,G=0,ie=Ke;ie<=Qe;ie++)if(oe=A[ie],M[X+oe]!==0){var xe=M[X+oe]-q;xe>0?(G+=xe,A[$e++]=oe,Ve+=oe):(N[oe]=Fs($),M[X+oe]=0)}M[U+Q]=$e-Ke+1;var te=$e,le=Ke+M[B+Q];for(ie=Qe+1;ie<le;ie++){Z=A[ie];var ue=M[P+Z];ue<=0||(G+=ue,A[$e++]=Z,Ve+=Z)}G===0?(N[Q]=Fs($),Re=-M[P+Q],ae-=Re,Se+=Re,ne+=Re,M[P+Q]=0,M[U+Q]=-1):(M[I+Q]=Math.min(M[I+Q],G),A[$e]=A[te],A[te]=A[Ke],A[Ke]=$,M[B+Q]=$e-Ke+1,Ve=(Ve<0?-Ve:Ve)%D,M[R+Q]=M[j+Ve],M[j+Ve]=Q,J[Q]=Ve)}for(M[I+$]=ae,y=Math.max(y,ae),q=f(q+y,y,M,X,D),Le=de;Le<Fe;Le++)if(Q=A[Le],!(M[P+Q]>=0))for(Ve=J[Q],Q=M[j+Ve],M[j+Ve]=-1;Q!==-1&&M[R+Q]!==-1;Q=M[R+Q],q++){for(ge=M[B+Q],Ge=M[U+Q],ie=N[Q]+1;ie<=N[Q]+ge-1;ie++)M[X+A[ie]]=q;var ve=Q;for(Z=M[R+Q];Z!==-1;){var Ne=M[B+Z]===ge&&M[U+Z]===Ge;for(ie=N[Z]+1;Ne&&ie<=N[Z]+ge-1;ie++)M[X+A[ie]]!==q&&(Ne=0);Ne?(N[Z]=Fs(Q),M[P+Q]+=M[P+Z],M[P+Z]=0,M[U+Z]=-1,Z=M[R+Z],M[R+ve]=Z):(ve=Z,Z=M[R+Z])}}for(ie=de,Le=de;Le<Fe;Le++)Q=A[Le],!((Re=-M[P+Q])<=0)&&(M[P+Q]=Re,G=M[I+Q]+ae-Re,G=Math.min(G,D-ne-Re),M[H+G]!==-1&&(J[M[H+G]]=Q),M[R+Q]=M[H+G],J[Q]=-1,M[H+G]=Q,V=Math.min(V,G),M[I+Q]=G,A[ie++]=Q);M[P+$]=Se,(M[B+$]=ie-de)===0&&(N[$]=-1,M[X+$]=0),ke!==0&&(z=ie)}for(Q=0;Q<D;Q++)N[Q]=Fs(N[Q]);for(Z=0;Z<=D;Z++)M[H+Z]=-1;for(Z=D;Z>=0;Z--)M[P+Z]>0||(M[R+Z]=M[H+N[Z]],M[H+N[Z]]=Z);for(oe=D;oe>=0;oe--)M[P+oe]<=0||N[oe]!==-1&&(M[R+oe]=M[H+N[oe]],M[H+N[oe]]=oe);for($=0,Q=0;Q<=D;Q++)N[Q]===-1&&($=F2(Q,$,M,H,R,k,X));return k.splice(k.length-1,1),k};function a(h,m,g,_,x){var D=i(m);if(h===1&&_===g)return t(m,D);if(h===2){for(var y=D._index,S=D._ptr,w=0,A=0;A<g;A++){var N=S[A];if(S[A]=w,!(S[A+1]-N>x))for(var z=S[A+1];N<z;N++)y[w++]=y[N]}return S[g]=w,m=i(D),n(D,m)}return n(D,m)}function l(h,m,g,_,x,D,y,S,w,A,N,z){for(var k=0;k<h;k++)g[_+k]=m[k+1]-m[k];g[_+h]=0;for(var M=0;M<=h;M++)g[x+M]=-1,D[M]=-1,g[y+M]=-1,g[S+M]=-1,g[w+M]=1,g[A+M]=1,g[N+M]=0,g[z+M]=g[_+M];var B=f(0,0,g,A,h);return g[N+h]=-2,m[h]=-1,g[A+h]=0,B}function c(h,m,g,_,x,D,y,S,w,A,N){for(var z=0,k=0;k<h;k++){var M=g[_+k];if(M===0)g[x+k]=-2,z++,m[k]=-1,g[D+k]=0;else if(M>y)g[S+k]=0,g[x+k]=-1,z++,m[k]=Fs(h),g[S+h]++;else{var B=g[w+M];B!==-1&&(A[B]=k),g[N+k]=g[w+M],g[w+M]=k}}return z}function f(h,m,g,_,x){if(h<2||h+m<0){for(var D=0;D<x;D++)g[_+D]!==0&&(g[_+D]=1);h=2}return h}function d(h,m){return h!==m}});function Q4(e,t,n,i,a,l,c){var f,d,h=0,m;if(e<=t||n[i+t]<=n[a+e])return-1;n[a+e]=n[i+t];var g=n[l+e];if(n[l+e]=t,g===-1)h=1,m=e;else{for(h=2,m=g;m!==n[c+m];m=n[c+m]);for(f=g;f!==m;f=d)d=n[c+f],n[c+f]=m}return{jleaf:h,q:m}}var J4="csCounts",eN=["transpose"],tN=tt(J4,eN,e=>{var{transpose:t}=e;return function(n,i,a,l){if(!n||!i||!a)return null;var c=n._size,f=c[0],d=c[1],h,m,g,_,x,D,y,S=4*d+(l?d+f+1:0),w=[],A=0,N=d,z=2*d,k=3*d,M=4*d,B=5*d+1;for(g=0;g<S;g++)w[g]=-1;var P=[],R=t(n),H=R._index,U=R._ptr;for(g=0;g<d;g++)for(m=a[g],P[m]=w[k+m]===-1?1:0;m!==-1&&w[k+m]===-1;m=i[m])w[k+m]=g;if(l){for(g=0;g<d;g++)w[a[g]]=g;for(h=0;h<f;h++){for(g=d,D=U[h],y=U[h+1],x=D;x<y;x++)g=Math.min(g,w[H[x]]);w[B+h]=w[M+g],w[M+g]=h}}for(h=0;h<d;h++)w[A+h]=h;for(g=0;g<d;g++){for(m=a[g],i[m]!==-1&&P[i[m]]--,_=l?w[M+g]:m;_!==-1;_=l?w[B+_]:-1)for(x=U[_];x<U[_+1];x++){h=H[x];var I=Q4(h,m,w,k,N,z,A);I.jleaf>=1&&P[m]++,I.jleaf===2&&P[I.q]--}i[m]!==-1&&(w[A+m]=i[m])}for(m=0;m<d;m++)i[m]!==-1&&(P[i[m]]+=P[m]);return P}}),nN="csSqr",rN=["add","multiply","transpose"],iN=tt(nN,rN,e=>{var{add:t,multiply:n,transpose:i}=e,a=W4({add:t,multiply:n,transpose:i}),l=tN({transpose:i});return function(d,h,m){var g=h._ptr,_=h._size,x=_[1],D,y={};if(y.q=a(d,h),d&&!y.q)return null;if(m){var S=d?K4(h,null,y.q):h;y.parent=$4(S);var w=q4(y.parent,x);if(y.cp=l(S,y.parent,w,1),S&&y.parent&&y.cp&&c(S,y))for(y.unz=0,D=0;D<x;D++)y.unz+=y.cp[D]}else y.unz=4*g[x]+x,y.lnz=y.unz;return y};function c(f,d){var h=f._ptr,m=f._index,g=f._size,_=g[0],x=g[1];d.pinv=[],d.leftmost=[];var D=d.parent,y=d.pinv,S=d.leftmost,w=[],A=0,N=_,z=_+x,k=_+2*x,M,B,P,R,H;for(B=0;B<x;B++)w[N+B]=-1,w[z+B]=-1,w[k+B]=0;for(M=0;M<_;M++)S[M]=-1;for(B=x-1;B>=0;B--)for(R=h[B],H=h[B+1],P=R;P<H;P++)S[m[P]]=B;for(M=_-1;M>=0;M--)y[M]=-1,B=S[M],B!==-1&&(w[k+B]++===0&&(w[z+B]=M),w[A+M]=w[N+B],w[N+B]=M);for(d.lnz=0,d.m2=_,B=0;B<x;B++)if(M=w[N+B],d.lnz++,M<0&&(M=d.m2++),y[M]=B,!(--k[B]<=0)){d.lnz+=w[k+B];var U=D[B];U!==-1&&(w[k+U]===0&&(w[z+U]=w[z+B]),w[A+w[z+B]]=w[N+U],w[N+U]=w[A+M],w[k+U]+=w[k+B])}for(M=0;M<_;M++)y[M]<0&&(y[M]=B++);return!0}});function G0(e,t){return e[t]<0}function R2(e,t){e[t]=Fs(e[t])}function sx(e){return e<0?Fs(e):e}function aN(e,t,n,i,a){var l=t._index,c=t._ptr,f=t._size,d=f[1],h,m,g,_=0;for(i[0]=e;_>=0;){e=i[_];var x=a?a[e]:e;G0(c,e)||(R2(c,e),i[d+_]=x<0?0:sx(c[x]));var D=1;for(m=i[d+_],g=x<0?0:sx(c[x+1]);m<g;m++)if(h=l[m],!G0(c,h)){i[d+_]=m,i[++_]=h,D=0;break}D&&(_--,i[--n]=e)}return n}function sN(e,t,n,i,a){var l=e._ptr,c=e._size,f=t._index,d=t._ptr,h=c[1],m,g,_,x=h;for(g=d[n],_=d[n+1],m=g;m<_;m++){var D=f[m];G0(l,D)||(x=aN(D,e,x,i,a))}for(m=x;m<h;m++)R2(l,i[m]);return x}var oN="csSpsolve",lN=["divideScalar","multiply","subtract"],uN=tt(oN,lN,e=>{var{divideScalar:t,multiply:n,subtract:i}=e;return function(l,c,f,d,h,m,g){var _=l._values,x=l._index,D=l._ptr,y=l._size,S=y[1],w=c._values,A=c._index,N=c._ptr,z,k,M,B,P=sN(l,c,f,d,m);for(z=P;z<S;z++)h[d[z]]=0;for(k=N[f],M=N[f+1],z=k;z<M;z++)h[A[z]]=w[z];for(var R=P;R<S;R++){var H=d[R],U=m?m[H]:H;if(!(U<0))for(k=D[U],M=D[U+1],h[H]=t(h[H],_[g?k:M-1]),z=g?k+1:k,B=g?M:M-1;z<B;z++){var I=x[z];h[I]=i(h[I],n(_[z],h[H]))}}return P}}),cN="csLu",fN=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],hN=tt(cN,fN,e=>{var{abs:t,divideScalar:n,multiply:i,subtract:a,larger:l,largerEq:c,SparseMatrix:f}=e,d=uN({divideScalar:n,multiply:i,subtract:a});return function(m,g,_){if(!m)return null;var x=m._size,D=x[1],y,S=100,w=100;g&&(y=g.q,S=g.lnz||S,w=g.unz||w);var A=[],N=[],z=[],k=new f({values:A,index:N,ptr:z,size:[D,D]}),M=[],B=[],P=[],R=new f({values:M,index:B,ptr:P,size:[D,D]}),H=[],U,I,X=[],j=[];for(U=0;U<D;U++)X[U]=0,H[U]=-1,z[U+1]=0;S=0,w=0;for(var J=0;J<D;J++){z[J]=S,P[J]=w;var q=y?y[J]:J,ne=d(k,m,q,j,X,H,1),V=-1,Q=-1;for(I=ne;I<D;I++)if(U=j[I],H[U]<0){var Z=t(X[U]);l(Z,Q)&&(Q=Z,V=U)}else B[w]=H[U],M[w++]=X[U];if(V===-1||Q<=0)return null;H[q]<0&&c(t(X[q]),i(Q,_))&&(V=q);var $=X[V];for(B[w]=J,M[w++]=$,H[V]=J,N[S]=V,A[S++]=1,I=ne;I<D;I++)U=j[I],H[U]<0&&(N[S]=U,A[S++]=n(X[U],$)),X[U]=0}for(z[D]=S,P[D]=w,I=0;I<S;I++)N[I]=H[N[I]];return A.splice(S,A.length-S),N.splice(S,N.length-S),M.splice(w,M.length-w),B.splice(w,B.length-w),{L:k,U:R,pinv:H}}}),ox="slu",dN=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],mN=tt(ox,dN,e=>{var{typed:t,abs:n,add:i,multiply:a,transpose:l,divideScalar:c,subtract:f,larger:d,largerEq:h,SparseMatrix:m}=e,g=iN({add:i,multiply:a,transpose:l}),_=hN({abs:n,divideScalar:c,multiply:a,subtract:f,larger:d,largerEq:h,SparseMatrix:m});return t(ox,{"SparseMatrix, number, number":function(D,y,S){if(!xn(y)||y<0||y>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(S<0||S>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var w=g(y,D,!1),A=_(D,w,S);return{L:A.L,U:A.U,p:A.pinv,q:w.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function lx(e,t){var n,i=t.length,a=[];if(e)for(n=0;n<i;n++)a[e[n]]=t[n];else for(n=0;n<i;n++)a[n]=t[n];return a}var ux="lusolve",pN=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],gN=tt(ux,pN,e=>{var{typed:t,matrix:n,lup:i,slu:a,usolve:l,lsolve:c,DenseMatrix:f}=e,d=Bg({DenseMatrix:f});return t(ux,{"Array, Array | Matrix":function(_,x){_=n(_);var D=i(_),y=m(D.L,D.U,D.p,null,x);return y.valueOf()},"DenseMatrix, Array | Matrix":function(_,x){var D=i(_);return m(D.L,D.U,D.p,null,x)},"SparseMatrix, Array | Matrix":function(_,x){var D=i(_);return m(D.L,D.U,D.p,null,x)},"SparseMatrix, Array | Matrix, number, number":function(_,x,D,y){var S=a(_,D,y);return m(S.L,S.U,S.p,S.q,x)},"Object, Array | Matrix":function(_,x){return m(_.L,_.U,_.p,_.q,x)}});function h(g){if(nn(g))return g;if(_n(g))return n(g);throw new TypeError("Invalid Matrix LU decomposition")}function m(g,_,x,D,y){g=h(g),_=h(_),x&&(y=d(g,y,!0),y._data=lx(x,y._data));var S=c(g,y),w=l(_,S);return D&&(w._data=lx(D,w._data)),w}}),cx="det",vN=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],yN=tt(cx,vN,e=>{var{typed:t,matrix:n,subtractScalar:i,multiply:a,divideScalar:l,isZero:c,unaryMinus:f}=e;return t(cx,{any:function(m){return $t(m)},"Array | Matrix":function(m){var g;switch(nn(m)?g=m.size():Array.isArray(m)?(m=n(m),g=m.size()):g=[],g.length){case 0:return $t(m);case 1:if(g[0]===1)return $t(m.valueOf()[0]);if(g[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+an(g)+")");case 2:{var _=g[0],x=g[1];if(_===x)return d(m.clone().valueOf(),_);if(x===0)return 1;throw new RangeError("Matrix must be square (size: "+an(g)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+an(g)+")")}}});function d(h,m,g){if(m===1)return $t(h[0][0]);if(m===2)return i(a(h[0][0],h[1][1]),a(h[1][0],h[0][1]));for(var _=!1,x=new Array(m).fill(0).map((B,P)=>P),D=0;D<m;D++){var y=x[D];if(c(h[y][D])){var S=void 0;for(S=D+1;S<m;S++)if(!c(h[x[S]][D])){y=x[S],x[S]=x[D],x[D]=y,_=!_;break}if(S===m)return h[y][D]}for(var w=h[y][D],A=D===0?1:h[x[D-1]][D-1],N=D+1;N<m;N++)for(var z=x[N],k=D+1;k<m;k++)h[z][k]=l(i(a(h[z][k],w),a(h[z][D],h[y][k])),A)}var M=h[x[m-1]][m-1];return _?f(M):M}}),fx="inv",_N=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],xN=tt(fx,_N,e=>{var{typed:t,matrix:n,divideScalar:i,addScalar:a,multiply:l,unaryMinus:c,det:f,identity:d,abs:h}=e;return t(fx,{"Array | Matrix":function(_){var x=nn(_)?_.size():tr(_);switch(x.length){case 1:if(x[0]===1)return nn(_)?n([i(1,_.valueOf()[0])]):[i(1,_[0])];throw new RangeError("Matrix must be square (size: "+an(x)+")");case 2:{var D=x[0],y=x[1];if(D===y)return nn(_)?n(m(_.valueOf(),D,y),_.storage()):m(_,D,y);throw new RangeError("Matrix must be square (size: "+an(x)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+an(x)+")")}},any:function(_){return i(1,_)}});function m(g,_,x){var D,y,S,w,A;if(_===1){if(w=g[0][0],w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,w)]]}else if(_===2){var N=f(g);if(N===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(g[1][1],N),i(c(g[0][1]),N)],[i(c(g[1][0]),N),i(g[0][0],N)]]}else{var z=g.concat();for(D=0;D<_;D++)z[D]=z[D].concat();for(var k=d(_).valueOf(),M=0;M<x;M++){var B=h(z[M][M]),P=M;for(D=M+1;D<_;)h(z[D][M])>B&&(B=h(z[D][M]),P=D),D++;if(B===0)throw Error("Cannot calculate inverse, determinant is zero");D=P,D!==M&&(A=z[M],z[M]=z[D],z[D]=A,A=k[M],k[M]=k[D],k[D]=A);var R=z[M],H=k[M];for(D=0;D<_;D++){var U=z[D],I=k[D];if(D!==M){if(U[M]!==0){for(S=i(c(U[M]),R[M]),y=M;y<x;y++)U[y]=a(U[y],l(S,R[y]));for(y=0;y<x;y++)I[y]=a(I[y],l(S,H[y]))}}else{for(S=R[M],y=M;y<x;y++)U[y]=i(U[y],S);for(y=0;y<x;y++)I[y]=i(I[y],S)}}}return k}}}),hx="pinv",bN=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],wN=tt(hx,bN,e=>{var{typed:t,matrix:n,inv:i,deepEqual:a,equal:l,dotDivide:c,dot:f,ctranspose:d,divideScalar:h,multiply:m,add:g,Complex:_}=e;return t(hx,{"Array | Matrix":function(N){var z=nn(N)?N.size():tr(N);switch(z.length){case 1:return w(N)?d(N):z[0]===1?i(N):c(d(N),f(N,N));case 2:{if(w(N))return d(N);var k=z[0],M=z[1];if(k===M)try{return i(N)}catch(B){if(!(B instanceof Error&&B.message.match(/Cannot calculate inverse, determinant is zero/)))throw B}return nn(N)?n(x(N.valueOf(),k,M),N.storage()):x(N,k,M)}default:throw new RangeError("Matrix must be two dimensional (size: "+an(z)+")")}},any:function(N){return l(N,0)?$t(N):h(1,N)}});function x(A,N,z){var{C:k,F:M}=y(A,N,z),B=m(i(m(d(k),k)),d(k)),P=m(d(M),i(m(M,d(M))));return m(P,B)}function D(A,N,z){for(var k=$t(A),M=0,B=0;B<N;B++){if(z<=M)return k;for(var P=B;S(k[P][M]);)if(P++,N===P&&(P=B,M++,z===M))return k;[k[P],k[B]]=[k[B],k[P]];for(var R=k[B][M],H=0;H<z;H++)k[B][H]=c(k[B][H],R);for(var U=0;U<N;U++)if(U!==B){R=k[U][M];for(var I=0;I<z;I++)k[U][I]=g(k[U][I],m(-1,m(R,k[B][I])))}M++}return k}function y(A,N,z){var k=D(A,N,z),M=A.map((P,R)=>P.filter((H,U)=>U<N&&!S(f(k[U],k[U])))),B=k.filter((P,R)=>!S(f(k[R],k[R])));return{C:M,F:B}}function S(A){return l(g(A,_(1,1)),g(0,_(1,1)))}function w(A){return a(g(A,_(1,1)),g(m(A,0),_(1,1)))}}),Pg=e5({config:Zs}),j2=a5({}),B2=d5({}),Og=g5({}),Tr=T5({Matrix:Og}),At=rA({BigNumber:Pg,Complex:j2,DenseMatrix:Tr,Fraction:B2}),Ig=i8({typed:At}),fu=s8({typed:At}),P2=q8({typed:At}),Ti=P5({config:Zs,typed:At}),dx=X8({typed:At}),DN=L5({typed:At}),EN=R5({equalScalar:Ti,typed:At}),qc=P8({typed:At}),SN=q5({typed:At}),na=H5({Matrix:Og,equalScalar:Ti,typed:At}),$c=l8({typed:At}),Hg=Y5({BigNumber:Pg,typed:At}),wn=e8({DenseMatrix:Tr,Matrix:Og,SparseMatrix:na,typed:At}),sd=a4({matrix:wn,typed:At}),Go=V8({isInteger:DN,matrix:wn,typed:At}),CN=o4({conj:P2,transpose:sd,typed:At}),O2=x4({DenseMatrix:Tr,SparseMatrix:na,concat:Go,equalScalar:Ti,matrix:wn,typed:At}),AN=Q5({Fraction:B2,typed:At}),NN=Q8({BigNumber:Pg,DenseMatrix:Tr,SparseMatrix:na,config:Zs,matrix:wn,typed:At}),MN=M4({DenseMatrix:Tr,SparseMatrix:na,concat:Go,config:Zs,matrix:wn,typed:At}),kN=c4({bignumber:Hg,fraction:AN,number:SN}),TN=r4({matrix:wn,config:Zs,typed:At}),zN=D4({DenseMatrix:Tr,SparseMatrix:na,bignumber:Hg,concat:Go,config:Zs,matrix:wn,typed:At}),Gd=n8({typed:At}),I2=I4({DenseMatrix:Tr,SparseMatrix:na,addScalar:fu,concat:Go,equalScalar:Ti,matrix:wn,typed:At}),LN=z4({equal:O2,typed:At}),$s=h4({numeric:kN,typed:At}),FN=m4({DenseMatrix:Tr,SparseMatrix:na,concat:Go,divideScalar:$s,equalScalar:Ti,matrix:wn,typed:At}),Gg=C4({DenseMatrix:Tr,SparseMatrix:na,bignumber:Hg,concat:Go,config:Zs,matrix:wn,typed:At}),RN=g4({DenseMatrix:Tr,divideScalar:$s,equalScalar:Ti,matrix:wn,multiplyScalar:qc,subtractScalar:$c,typed:At}),jN=G8({DenseMatrix:Tr,concat:Go,equalScalar:Ti,matrix:wn,subtractScalar:$c,typed:At,unaryMinus:Gd}),BN=y4({DenseMatrix:Tr,divideScalar:$s,equalScalar:Ti,matrix:wn,multiplyScalar:qc,subtractScalar:$c,typed:At}),H2=G4({addScalar:fu,conj:P2,multiplyScalar:qc,size:TN,typed:At}),PN=R4({larger:Gg,smaller:zN}),To=I8({addScalar:fu,dot:H2,equalScalar:Ti,matrix:wn,multiplyScalar:qc,typed:At}),ON=mN({SparseMatrix:na,abs:Ig,add:I2,divideScalar:$s,larger:Gg,largerEq:MN,multiply:To,subtract:jN,transpose:sd,typed:At}),IN=yN({divideScalar:$s,isZero:EN,matrix:wn,multiply:To,subtractScalar:$c,typed:At,unaryMinus:Gd}),HN=xN({abs:Ig,addScalar:fu,det:IN,divideScalar:$s,identity:NN,matrix:wn,multiply:To,typed:At,unaryMinus:Gd}),GN=wN({Complex:j2,add:I2,ctranspose:CN,deepEqual:LN,divideScalar:$s,dot:H2,dotDivide:FN,equal:O2,inv:HN,matrix:wn,multiply:To,typed:At}),UN=P4({FibonacciHeap:PN,addScalar:fu,equalScalar:Ti}),ZN=Z4({DenseMatrix:Tr,Spa:UN,SparseMatrix:na,abs:Ig,addScalar:fu,divideScalar:$s,equalScalar:Ti,larger:Gg,matrix:wn,multiplyScalar:qc,subtractScalar:$c,typed:At,unaryMinus:Gd}),KN=gN({DenseMatrix:Tr,lsolve:RN,lup:ZN,matrix:wn,slu:ON,typed:At,usolve:BN});class U0{a;b;c;d;constructor(t){let n;if(console.log("params",t),Array.isArray(t)?n=t:n=[{gkRechts:t.GKR_A,gkHoch:t.GKH_A,pixelX:t.PX_A,pixelY:t.PY_A},{gkRechts:t.GKR_B,gkHoch:t.GKH_B,pixelX:t.PX_B,pixelY:t.PY_B}],n.length<2)throw new Error("At least 2 reference points are required for Helmert transformation");this.computeLeastSquares(n)}computeLeastSquares(t){const n=[],i=[];for(const d of t)n.push([d.gkRechts,d.gkHoch,1,0]),i.push(d.pixelX),n.push([d.gkHoch,-d.gkRechts,0,1]),i.push(d.pixelY);const a=wn(n),l=wn(i),c=To(sd(a),a),f=To(sd(a),l);try{const d=KN(c,f),h=dx(d).toArray();this.a=h[0],this.b=h[1],this.c=h[2],this.d=h[3]}catch(d){console.warn("Standard solver failed, using pseudoinverse:",d);const h=GN(c),m=To(h,f),g=dx(m).toArray();this.a=g[0],this.b=g[1],this.c=g[2],this.d=g[3]}}gkToPixel(t,n){const i=this.a*t+this.b*n+this.c,a=-this.b*t+this.a*n+this.d;return[i,a]}pixelToGK(t,n){const i=t-this.c,a=n-this.d,l=this.a*this.a+this.b*this.b,c=(this.a*i-this.b*a)/l,f=(this.b*i+this.a*a)/l;return[c,f]}getParameters(){const t=Math.sqrt(this.a*this.a+this.b*this.b),n=Math.atan2(-this.b,this.a);return{a:this.a,b:this.b,c:this.c,d:this.d,scale:t,rotation:n*180/Math.PI}}}function qN(e,t,n,i,a,l,c,f){const d=f/e,h=t.Rechts+d*(n.Rechts-t.Rechts),m=t.Hoch+d*(n.Hoch-t.Hoch),g=f,_=e,x=i*g*(_-g)+a*g+l;return{GK:{Rechts:h,Hoch:m},z:x}}function $N(e){const t=e.UsedMasten;for(let n=0;n<t.length-1;n++){const i=t[n],a=t[n+1];for(const l of i.UsedEbenen){for(const c of l.UsedLeitungenLinks)mx(c,a);for(const c of l.UsedLeitungenRechts)mx(c,a)}}}function mx(e,t){if(e.NextMastEbene===0||e.NextMastLeiter===0)return;const n=VN(t,e.NextMastEbene,e.NextMastLeiter);if(!n)return;console.log("Computing parabola parameters from Durchgangspunkt",e.Durchgangspunkt),console.log("Next Durchgangspunkt",n.Durchgangspunkt);const i=e.Durchgangspunkt.GK.Rechts,a=e.Durchgangspunkt.GK.Hoch,l=e.Durchgangspunkt.z,c=n.Durchgangspunkt.GK.Rechts,f=n.Durchgangspunkt.GK.Hoch,d=n.Durchgangspunkt.z,h=(c-i)*(c-i)+(f-a)*(f-a);if(h===0)return;const m=Math.sqrt(h),g=e.Durchhang;e.ParabelA=4*g/h,e.ParabelB=(d-l-4*g)/m,e.ParabelC=l,e.BetrU=m,e.AmSeg=Math.floor(m/5),e.AmSeg<1&&(e.AmSeg=1),e.SegLenU=m/e.AmSeg,e.SegmentPunkte=[],e.Mittelpkt=qN(m,e.Durchgangspunkt.GK,n.Durchgangspunkt.GK,e.ParabelA,e.ParabelB,e.ParabelC,g,m/2)}function VN(e,t,n){const i=e.UsedEbenen.find(a=>a.NummerEbene===t);if(!i)return null;if(n<0){const a=-n-1;if(a>=0&&a<i.UsedLeitungenLinks.length)return i.UsedLeitungenLinks[a]}else if(n>0){const a=n-1;if(a>=0&&a<i.UsedLeitungenRechts.length)return i.UsedLeitungenRechts[a]}return null}function xh(e){for(const t of e)$N(t)}function px(e,t,n,i,a,l,c){return{id:Lc(e,t,n,i),poleId:e,levelNumber:t,side:n,connectionNumber:i,horizontalDistance2Pole:a,isolatorLength:l,einbauart:c}}const u0=()=>{const e=new Map;return e.set("L_80dB",{Name:"L_80dB",SchallLW:80}),e},Yt=RS((e,t)=>({projectName:"Neues Projekt",projectImage:null,imageWidth:893,imageHeight:639,referencePoints:[],originalData:null,hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,leiterTypes:u0(),trassenNew:new Map,poles:new Map,connectionLines:new Map,poleTemplates:new Map,dgmDreiecke:[],dgmKanten:[],immissionGrid:[],immissionGridDetailed:[],contourDisplayMode:"total",immissionGridSettings:{gridSizeX:10,gridSizeY:10,heightOffset:1.5,legendMode:"auto",legendMinValue:0,legendIntervalSize:10,legendIntervalCount:5,opacity:.6},showImmissionGrid:!1,showGridPoints:!1,isCalculatingGrid:!1,gridCalculationProgress:null,showImmissionPoints:!0,showESQPoints:!0,showHoehenpunkte:!0,showPoles:!0,showReferencePoints:!0,cachedImmissionValues:new Map,isComputationEnabled:!1,isImmissionPointsComputed:!1,isGridComputed:!1,calculator:null,dtmProcessor:null,colorPalettes:{dgm:"YlOrBr",immissionGrid:"RdYlGn"},mitFrequenz:!1,kt:0,computationErrors:[],editMode:"view",selectedElementType:"hoehenpunkt",selectedElementId:null,isEditFormOpen:!1,mastLayoutTemplates:new Map,selectedMarkerType:null,focusedMarkerId:null,markerHighlightColors:new Map([["hoehenpunkt",{normal:"#44ff44",highlighted:"#00ff00",focused:"#00ff00"}],["immissionpoint",{normal:"#ff4444",highlighted:"#ff0000",focused:"#ff0000"}],["esq",{normal:"#4444ff",highlighted:"#0000ff",focused:"#0000ff"}],["pole",{normal:"#8B4513",highlighted:"#D2691E",focused:"#D2691E"}]]),loadProjectData:n=>{const i=new Map,a=new Map,l=new Map,c=new Map;let f=new Map;const d=[],h=new Map,m=new Map,g=new Map,_=new Map;if(console.log("loadProjectData - Checking for reference points:",{hasReferencePoints:!!n.ReferencePoints,hasGKR_A:n.GKR_A!==void 0,hasGKH_A:n.GKH_A!==void 0,hasPX_A:n.PX_A!==void 0,hasPY_A:n.PY_A!==void 0,GKR_A:n.GKR_A,GKH_A:n.GKH_A,PX_A:n.PX_A,PY_A:n.PY_A}),n.ReferencePoints&&Array.isArray(n.ReferencePoints))console.log("Loading from ReferencePoints array:",n.ReferencePoints),n.ReferencePoints.forEach(A=>{d.push({id:Gn(),pixelX:A.pixelX,pixelY:A.pixelY,gkRechts:A.gkRechts,gkHoch:A.gkHoch,label:A.label||String.fromCharCode(65+d.length)})});else{const A=["A","B"];for(const N of A){const z=`GKR_${N}`,k=`GKH_${N}`,M=`PX_${N}`,B=`PY_${N}`;n[z]!==void 0&&n[k]!==void 0&&n[M]!==void 0&&n[B]!==void 0&&(console.log(`Loading reference point ${N} from legacy format`),d.push({id:Gn(),pixelX:n[M],pixelY:n[B],gkRechts:n[z],gkHoch:n[k],label:N}))}}console.log("Final reference points loaded:",d);let x=893,D=639;console.log("Found image width and height: ",n.IM_X_max,n.IM_Y_max),n.IM_X_max&&n.IM_X_max>0&&(x=n.IM_X_max),n.IM_Y_max&&n.IM_Y_max>0&&(D=n.IM_Y_max);let y=null;n.ImageData&&(y=n.ImageData),n.Hoehenpunkte?.forEach(A=>{const N=Gn();i.set(N,{id:N,GK_Vektor:A.GK_Vektor})}),n.ESQSources?.forEach(A=>{const N=Gn();a.set(N,{id:N,Bezeichnung:A.Bezeichnung,Position:A.Position,Hoehe:A.Hoehe,Raumwinkelmass:A.Raumwinkelmass,Beurteilungszeitraum:A.Beurteilungszeitraum,Schallleistungspegel:A.Schallleistungspegel,L:A.L,S:A.S,Z_Impulshaltigkeit:A.Z_Impulshaltigkeit,Z_Tonhaltigkeit:A.Z_Tonhaltigkeit,Z_Cmet:A.Z_Cmet,Ruhezeitzuschlag:A.Ruhezeitzuschlag,Einwirkzeit:A.Einwirkzeit,Zeiteinheit:A.Zeiteinheit})}),n.ImmissionPoints?.forEach(A=>{const N=Gn();l.set(N,{id:N,Name:A.Name,Position:A.Position,HeightOffset:A.HeightOffset,G_Bodenfaktor:A.G_Bodenfaktor})}),f=u0(),n.LeiterTypes?.forEach(A=>{const N=A.Name.trim();f.set(N,{Name:N,SchallLW:A.SchallLW})}),n.Trassen?.forEach(A=>{const N=Gn(),z=`template_${N}`,k=VS(A,z,N);if(h.set(N,k.trasse),k.poles.forEach(B=>{m.set(B.id,B)}),k.connectionLines.forEach(B=>{g.set(B.id,B)}),!_.has(z)&&A.UsedMasten.length>0){const B=A.UsedMasten[0],P={id:z,name:`Template for ${A.Name}`,description:`Auto-generated from ${A.Name}`,levels:B.UsedEbenen.map(R=>({levelNumber:R.NummerEbene,defaultHeight:R.AbstandNullpunkt,leftConnections:R.UsedLeitungenLinks.length,rightConnections:R.UsedLeitungenRechts.length}))};_.set(z,P)}let M;if(A.UsedMasten&&A.UsedMasten.length>0){const B=A.UsedMasten[0];if(B.UsedEbenen&&B.UsedEbenen.length>0){const P=B.UsedEbenen.map((H,U)=>({nummerEbene:U+1,anzahlLeitungenLinks:H.UsedLeitungenLinks?.length||0,anzahlLeitungenRechts:H.UsedLeitungenRechts?.length||0}));M=z;const R={id:M,name:`Template für ${A.Name}`,description:`Auto-generiert aus ${A.Name} Konfiguration`,anzahlEbenen:B.UsedEbenen.length,ebenenConfig:P};c.set(M,R)}}A.UsedMasten?.forEach(()=>{Gn()})}),n.Trassen&&n.Trassen.length>0&&(console.log("Calculating parabola parameters for loaded trassen..."),xh(n.Trassen));const S=new yc(n.DGMDreiecke||[],n.Hoehenpunkte||[]);S.setDGMKante(n.DGMKanten||[]);const w=new Cn(n,S);e({originalData:n,hoehenpunkte:i,esqSources:a,immissionPoints:l,leiterTypes:f,trassenNew:h,poles:m,connectionLines:g,poleTemplates:_,mastLayoutTemplates:c,mitFrequenz:n.mitFrequenz||!1,kt:n.Kt!==void 0?n.Kt:0,calculator:w,dtmProcessor:S,referencePoints:d,imageWidth:x,imageHeight:D,projectImage:y,projectName:n.Name||"Imported Project",cachedImmissionValues:new Map,isImmissionPointsComputed:!1,isGridComputed:!1,immissionGrid:[],immissionGridDetailed:[],showImmissionGrid:!1,showGridPoints:!1}),t().recomputeTriangulation(),console.log("Loading finished with image width and height: ",x,D)},setEditMode:n=>e({editMode:n}),setSelectedElementType:n=>e({selectedElementType:n}),selectElement:n=>e({selectedElementId:n}),setEditFormOpen:n=>e({isEditFormOpen:n}),setSelectedMarkerType:n=>e({selectedMarkerType:n,focusedMarkerId:null}),setFocusedMarkerId:n=>e({focusedMarkerId:n}),clearMarkerSelection:()=>e({selectedMarkerType:null,focusedMarkerId:null}),getMarkersByType:n=>{const i=t(),a=[];switch(n){case"hoehenpunkt":i.hoehenpunkte.forEach((l,c)=>{a.push({id:c,position:[l.GK_Vektor.GK.Rechts,l.GK_Vektor.GK.Hoch]})});break;case"immissionpoint":i.immissionPoints.forEach((l,c)=>{a.push({id:c,position:[l.Position.GK.Rechts,l.Position.GK.Hoch]})});break;case"esq":i.esqSources.forEach((l,c)=>{a.push({id:c,position:[l.Position.GK.Rechts,l.Position.GK.Hoch]})});break;case"pole":i.poles.forEach((l,c)=>{l.position&&a.push({id:c,position:[l.position.GK.Rechts,l.position.GK.Hoch]})});break}return a},focusToNextMarker:()=>{const n=t();if(!n.selectedMarkerType)return;const i=n.getMarkersByType(n.selectedMarkerType);if(i.length===0)return;const l=((n.focusedMarkerId?i.findIndex(c=>c.id===n.focusedMarkerId):-1)+1)%i.length;e({focusedMarkerId:i[l].id})},focusToPreviousMarker:()=>{const n=t();if(!n.selectedMarkerType)return;const i=n.getMarkersByType(n.selectedMarkerType);if(i.length===0)return;const l=((n.focusedMarkerId?i.findIndex(c=>c.id===n.focusedMarkerId):0)-1+i.length)%i.length;e({focusedMarkerId:i[l].id})},createNewProject:n=>{e({projectName:n,projectImage:null,imageWidth:893,imageHeight:639,referencePoints:[],originalData:null,hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,leiterTypes:u0(),trassenNew:new Map,poles:new Map,connectionLines:new Map,poleTemplates:new Map,dgmDreiecke:[],dgmKanten:[],immissionGrid:[],immissionGridDetailed:[],calculator:null,dtmProcessor:null,cachedImmissionValues:new Map,isImmissionPointsComputed:!1,isGridComputed:!1,showImmissionGrid:!1,showGridPoints:!1})},setProjectImage:(n,i,a)=>{console.log("setProjectImage called with:",{imageUrl:n.substring(0,50)+"...",width:i,height:a,stack:new Error().stack?.split(`
`).slice(1,4).join(`
`)}),e({projectImage:n,imageWidth:i,imageHeight:a})},addReferencePoint:n=>{e(i=>({referencePoints:[...i.referencePoints,n]}))},updateReferencePoint:(n,i)=>{e(a=>({referencePoints:a.referencePoints.map(l=>l.id===n?{...l,...i}:l)}))},deleteReferencePoint:n=>{e(i=>{const a=i.referencePoints.filter(l=>l.id!==n);return a.length<2?(console.log("Less than 2 reference points remaining, clearing transformed elements"),{referencePoints:a,hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,trassenNew:new Map,poles:new Map,connections:new Map,connectionLines:new Map}):{referencePoints:a}})},setProjectName:n=>{e({projectName:n})},addHoehenpunkt:n=>{if(!t().hasValidTransformation())return console.warn("Cannot add Hoehenpunkt: No valid transformation available (need at least 2 reference points)"),"";const a=Gn(),l={id:a,GK_Vektor:n};return e(c=>{const f=new Map(c.hoehenpunkte);return f.set(a,l),{hoehenpunkte:f}}),t().recomputeTriangulation(),t().clearImmissionCache(),t().clearImmissionGrid(),a},updateHoehenpunkt:(n,i)=>{e(a=>{const l=new Map(a.hoehenpunkte),c=l.get(n);return c&&(l.set(n,{...c,...i}),console.log("Updated Hoehenpunkt:",n,"New data:",{...c,...i})),{hoehenpunkte:l}}),console.log("Triggering recomputeTriangulation after Hoehenpunkt update"),t().recomputeTriangulation(),t().clearImmissionCache(),t().clearImmissionGrid()},deleteHoehenpunkt:n=>{e(i=>{const a=new Map(i.hoehenpunkte);return a.delete(n),{hoehenpunkte:a}}),t().recomputeTriangulation(),t().clearImmissionCache(),t().clearImmissionGrid()},addESQ:n=>{if(!t().hasValidTransformation())return console.warn("Cannot add ESQ: No valid transformation available (need at least 2 reference points)"),"";const a=Gn(),l={id:a,Bezeichnung:"Neue ESQ",Position:n,Hoehe:0,Raumwinkelmass:0,Beurteilungszeitraum:0,Schallleistungspegel:!0,L:85,S:0,Z_Impulshaltigkeit:0,Z_Tonhaltigkeit:0,Z_Cmet:0,Ruhezeitzuschlag:!1,Einwirkzeit:16,Zeiteinheit:2};return e(c=>{const f=new Map(c.esqSources);return f.set(a,l),{esqSources:f}}),t().clearImmissionCache(),t().clearImmissionGrid(),a},updateESQ:(n,i)=>{e(a=>{const l=new Map(a.esqSources),c=l.get(n);return c&&l.set(n,{...c,...i}),{esqSources:l}}),t().clearImmissionCache(),t().clearImmissionGrid()},deleteESQ:n=>{e(i=>{const a=new Map(i.esqSources);return a.delete(n),{esqSources:a}}),t().clearImmissionCache(),t().clearImmissionGrid()},addImmissionPoint:n=>{if(!t().hasValidTransformation())return console.warn("Cannot add ImmissionPoint: No valid transformation available (need at least 2 reference points)"),"";const a=Gn(),l={id:a,Name:"Neuer Immissionspunkt",Position:n,HeightOffset:0,G_Bodenfaktor:1};return e(c=>{const f=new Map(c.immissionPoints);return f.set(a,l),{immissionPoints:f,isImmissionPointsComputed:!1}}),a},updateImmissionPoint:(n,i)=>{e(a=>{const l=new Map(a.immissionPoints),c=l.get(n);return c&&l.set(n,{...c,...i}),{immissionPoints:l,isImmissionPointsComputed:!1}})},deleteImmissionPoint:n=>{e(i=>{const a=new Map(i.immissionPoints);return a.delete(n),{immissionPoints:a}})},addPole:(n,i)=>{console.log("addMast called with trasseId:",n,"position:",i);const a=t();if(!a.hasValidTransformation())return console.warn("Cannot add Mast: No valid transformation available (need at least 2 reference points)"),"";const l=a.trassenNew.get(n);if(console.log("trasseNew found:",l),console.log("All trassenNew IDs:",Array.from(a.trassenNew.keys())),l){console.log("Using new structure for trasseId:",n);const c=l.templateId,f=a.mastLayoutTemplates.get(c);console.log("Template ID:",c,"MastLayoutTemplate found:",f);let d;f?d={id:c,name:f.name,description:f.description,levels:f.ebenenConfig.map(_=>({levelNumber:_.nummerEbene,defaultHeight:50-(_.nummerEbene-1)*10,leftConnections:_.anzahlLeitungenLinks,rightConnections:_.anzahlLeitungenRechts}))}:(console.warn("No MastLayoutTemplate found for ID:",c,"Creating default"),d={id:c,name:"Default Template",description:"Auto-generated template",levels:[{levelNumber:1,defaultHeight:50,leftConnections:3,rightConnections:3}]});const h=l.poleIds.length,m=`pole_${n}_${h+1}`,g={id:m,trasseId:n,name:`Mast ${h+1}`,position:i,poleHeight:60,nullpunktHeight:i.z,orientation:{x:0,y:1,Length:1},gkOrientation:{Rechts:0,Hoch:1},levels:[]};for(const _ of d.levels){const x={levelNumber:_.levelNumber,levelHeight:_.defaultHeight,leftConnections:[],rightConnections:[]};for(let D=0;D<_.leftConnections;D++){const y=px(g.id,_.levelNumber,"left",D+1,5+D*2,2.5,0);x.leftConnections.push(y)}for(let D=0;D<_.rightConnections;D++){const y=px(g.id,_.levelNumber,"right",D+1,5+D*2,2.5,0);x.rightConnections.push(y)}g.levels.push(x)}if(l.poleIds.length>0){const _=l.poleIds[l.poleIds.length-1],x=a.poles.get(_);if(x){for(const D of x.levels){const y=g.levels.find(S=>S.levelNumber===D.levelNumber);if(y){const S=Math.min(D.leftConnections.length,y.leftConnections.length);for(let A=0;A<S;A++){const N=D.leftConnections[A],z=y.leftConnections[A];N.connected2Connection=z.id;const k={id:`line_${_}_${m}_L${D.levelNumber}_L${A+1}`,trasseId:n,fromConnectionId:N.id,toConnectionId:z.id,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};e(M=>{const B=new Map(M.connectionLines);return B.set(k.id,k),{connectionLines:B}})}const w=Math.min(D.rightConnections.length,y.rightConnections.length);for(let A=0;A<w;A++){const N=D.rightConnections[A],z=y.rightConnections[A];N.connected2Connection=z.id;const k={id:`line_${_}_${m}_L${D.levelNumber}_R${A+1}`,trasseId:n,fromConnectionId:N.id,toConnectionId:z.id,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};e(M=>{const B=new Map(M.connectionLines);return B.set(k.id,k),{connectionLines:B}})}}}e(D=>{const y=new Map(D.poles);return y.set(_,x),{poles:y}})}}return e(_=>{const x=new Map(_.poles);x.set(g.id,g);const D=new Map(_.trassenNew),y=D.get(n);return y&&(y.poleIds.push(g.id),D.set(n,y)),{poles:x,trassenNew:D}}),g.id}else return""},exportProjectData:()=>{const n=t(),i=Array.from(n.hoehenpunkte.values()).map((d,h)=>({LfdNummer:h+1,GK_Vektor:d.GK_Vektor})),a=Array.from(n.esqSources.values()).map(d=>({...d,OriginalData:{}})),l=Array.from(n.immissionPoints.values()).map(d=>({Name:d.Name,Position:d.Position,HeightOffset:d.HeightOffset,G_Bodenfaktor:d.G_Bodenfaktor,OriginalData:{}})),c=[];n.trassenNew.forEach(d=>{const h=new Map,m=[];d.poleIds.forEach(_=>{const x=n.poles.get(_);x&&h.set(_,x)}),n.connectionLines.forEach(_=>{_.trasseId===d.id&&m.push(_)}),console.log("using trasseNew",d,"poles",h,"connectionLines",m,Array.from(n.leiterTypes.values()));const g=z0(d,h,m,Array.from(n.leiterTypes.values()));c.push(g)});const f={...n.originalData,Hoehenpunkte:i,ESQSources:a,ImmissionPoints:l,Trassen:c,LeiterTypes:Array.from(n.leiterTypes.values()),DGMDreiecke:n.dgmDreiecke,DGMKanten:n.dgmKanten,Name:n.projectName,IM_X_max:n.imageWidth,IM_Y_max:n.imageHeight,mitFrequenz:n.mitFrequenz,AgrKorrektur:n.originalData?.AgrKorrektur||!1,Kt:n.kt};if(n.projectImage&&(f.ImageData=n.projectImage),n.referencePoints.length>0){const d=["A","B"];n.referencePoints.forEach((h,m)=>{if(m<d.length){const g=d[m];f[`GKR_${g}`]=h.gkRechts,f[`GKH_${g}`]=h.gkHoch,f[`PX_${g}`]=h.pixelX,f[`PY_${g}`]=h.pixelY}}),f.ReferencePoints=n.referencePoints.map(h=>({pixelX:h.pixelX,pixelY:h.pixelY,gkRechts:h.gkRechts,gkHoch:h.gkHoch,label:h.label,id:h.id,name:h.label}))}return console.log("exportData",f),f},clearAll:()=>{e({hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,dgmDreiecke:[],dgmKanten:[],selectedElementId:null})},calculateImmissionValue:n=>{const i=t(),{originalData:a,immissionPoints:l}=i;if(!a)return 0;const c=l.get(n);if(!c)return 0;const f=t().exportProjectData();f.Trassen&&f.Trassen.length>0&&xh(f.Trassen);const d=new Cn(f,i.dtmProcessor),h=f.ImmissionPoints.findIndex(m=>m.Name===c.Name);if(h===-1)return console.warn(`Immission point ${c.Name} not found in current data`),0;try{console.log(`DTM processor available: ${i.dtmProcessor!==null}`),i.dtmProcessor&&console.log(`DTM has ${i.dtmProcessor.DGMKante?.length||0} edges`),console.log("Computing immission value for",c);const m=d.calculateLatLTForImmissionPoint(h);return console.log(`Calculated value for ${c.Name}: ${m} dB`),m}catch(m){return console.error("Error calculating immission value:",m),0}},getCachedImmissionValue:n=>t().cachedImmissionValues.get(n)||0,computeImmissionPointsFromGUI:n=>{const i=t(),a=[];n&&n.length>0?(console.log("Calculating parabola parameters for conductors..."),xh(n)):console.log("No trassen to calculate parabola parameters for");const l=Array.from(i.esqSources.values()).map(D=>({Bezeichnung:D.Bezeichnung,Position:D.Position,Hoehe:D.Hoehe,Raumwinkelmass:D.Raumwinkelmass,Beurteilungszeitraum:D.Beurteilungszeitraum,Schallleistungspegel:D.Schallleistungspegel,L:D.L,S:D.S,Z_Impulshaltigkeit:D.Z_Impulshaltigkeit,Z_Tonhaltigkeit:D.Z_Tonhaltigkeit,Z_Cmet:D.Z_Cmet,Ruhezeitzuschlag:D.Ruhezeitzuschlag,Einwirkzeit:D.Einwirkzeit,Zeiteinheit:D.Zeiteinheit,OriginalData:{}})),c=Array.from(i.immissionPoints.values()).map(D=>({Name:D.Name,Position:D.Position,HeightOffset:D.HeightOffset,G_Bodenfaktor:D.G_Bodenfaktor}));console.log("state.originalData",i.originalData);let f=i.dtmProcessor,d=i.dgmDreiecke||[],h=i.dgmKanten||[],m=[];if(f)console.log("Using existing DTM processor from store"),m=Array.from(i.hoehenpunkte.values()).map((y,S)=>({LfdNummer:S+1,GK_Vektor:y.GK_Vektor}));else{console.log("No DTM processor in store, creating one...");const D=Array.from(i.hoehenpunkte.values());if(D.length>=3){console.log("Creating terrain model from GUI Hoehenpunkte...");const{dreiecke:y,kanten:S}=x_(D);d=y,h=S,m=D.map((w,A)=>({LfdNummer:A+1,GK_Vektor:w.GK_Vektor})),f=new yc(d,m),h&&f.setDGMKante(h),e({dtmProcessor:f,dgmDreiecke:d,dgmKanten:h})}else i.originalData?.DGMDreiecke&&i.originalData?.Hoehenpunkte?(console.log("Using terrain model from original data..."),d=i.originalData.DGMDreiecke,h=i.originalData.DGMKanten||[],m=i.originalData.Hoehenpunkte,f=new yc(d,m),h&&f.setDGMKante(h),e({dtmProcessor:f})):(console.warn("No terrain data available, creating minimal DTM processor"),f=new yc([],[]),e({dtmProcessor:f}))}const g={...i.originalData,Trassen:n,Hoehenpunkte:m,DGMDreiecke:d,DGMKanten:h,ImmissionPoints:c,LeiterTypes:Array.from(i.leiterTypes.values()),ESQSources:l,AgrKorrektur:i.originalData?.AgrKorrektur||!1,mitFrequenz:i.mitFrequenz};let _=null;if(f)_=new Cn(g,f),e({calculator:_});else{const D="Failed to create DTM processor, cannot create calculator";console.error(D),a.push(D)}console.log("Running with calculator",_);const x=new Map;if(console.log("Computing immission values from GUI data..."),console.log("Using trassen:",n),console.log("Using immission points:",c),_)for(const[D,y]of i.immissionPoints){const S=c.findIndex(w=>w.Name===y.Name&&w.Position.GK.Rechts===y.Position.GK.Rechts&&w.Position.GK.Hoch===y.Position.GK.Hoch);if(S>=0)try{const w=_.calculateLatLTForImmissionPoint(S);x.set(D,w),console.log(`Calculated value for ${y.Name} (index ${S}): ${w} dB`)}catch(w){const A=`Error calculating immission for point "${y.Name}": ${w instanceof Error?w.message:String(w)}`;console.error(A),a.push(A),x.set(D,0)}else{const w=`Could not find immission point "${y.Name}" in data array`;console.warn(w),a.push(w),x.set(D,0)}}else{const D="Calculator not available - cannot compute immission values";console.error(D),a.push(D);for(const[y]of i.immissionPoints)x.set(y,0)}e({cachedImmissionValues:x,isImmissionPointsComputed:!0,computationErrors:a}),console.log(`Computed and cached ${x.size} immission point values from GUI data`),a.length>0&&console.error(`Computation completed with ${a.length} error(s)`)},clearImmissionCache:()=>{e({cachedImmissionValues:new Map,isImmissionPointsComputed:!1,isGridComputed:!1}),console.log("Immission cache cleared")},clearComputationErrors:()=>{e({computationErrors:[]})},generateImmissionGrid:async(n,i,a)=>{const l=t(),{gridSizeX:c,gridSizeY:f,heightOffset:d}=l.immissionGridSettings,h=[];if(!a){console.warn("No Helmert transform available for grid generation");return}e({isCalculatingGrid:!0,immissionGrid:[],immissionGridDetailed:[],gridCalculationProgress:null,computationErrors:[]});try{const m=[],g=[],_=t().exportProjectData();xh(_.Trassen);const x=[];for(let S=0;S<f;S++)for(let w=0;w<c;w++){const A=w/(c-1)*n,N=S/(f-1)*i,[z,k]=a.pixelToGK(A,N);let M=50;if(l.dtmProcessor)try{const P={Rechts:z,Hoch:k};M=l.dtmProcessor.berechneHoeheDGM(P)}catch(P){console.warn(`Could not get DTM height at (${z}, ${k}):`,P)}const B={GK:{Rechts:z,Hoch:k},z:M+d};x.push({gk:B,index:x.length}),m.push({x:A,y:N,value:0}),g.push({x:A,y:N,total:0,esq:0,trassen:0})}const D={..._,mitFrequenz:l.mitFrequenz,ImmissionPoints:x.map((S,w)=>({Name:`Grid_${w}`,Position:S.gk,HeightOffset:d,G_Bodenfaktor:1,OriginalData:{}}))},y=new Cn(D,l.dtmProcessor);console.log(`Calculating immission values for ${x.length} grid points...`),console.log("mitFrequenz",l.mitFrequenz),e({gridCalculationProgress:{current:0,total:x.length}});for(let S=0;S<x.length;S++){try{const w=y.calculateLatLTForImmissionPointDetailed(S);m[S].value=w.total,g[S].total=w.total,g[S].esq=w.esq,g[S].trassen=w.trassen}catch(w){const A=`Error calculating grid point ${S}: ${w instanceof Error?w.message:String(w)}`;console.error(A),h.push(A),m[S].value=0,g[S].total=0,g[S].esq=0,g[S].trassen=0}e({gridCalculationProgress:{current:S+1,total:x.length}}),S%5===0&&await new Promise(w=>setTimeout(w,0)),S%10===0&&console.log(`Progress: ${S+1}/${x.length}`)}if(console.log("Grid calculation complete"),h.length>0){console.error(`Grid calculation completed with ${h.length} error(s)`);const S=Array.from(new Set(h)).slice(0,10);h.length>10&&S.push(`...and ${h.length-10} more errors`),e({computationErrors:S})}e({immissionGrid:m,immissionGridDetailed:g,isCalculatingGrid:!1,gridCalculationProgress:null})}catch(m){console.error("Error generating immission grid:",m);const g=`Failed to generate immission grid: ${m instanceof Error?m.message:String(m)}`;e({isCalculatingGrid:!1,gridCalculationProgress:null,computationErrors:[g]})}},clearImmissionGrid:()=>{e({immissionGrid:[],immissionGridDetailed:[],showImmissionGrid:!1,showGridPoints:!1})},setShowImmissionGrid:n=>{e({showImmissionGrid:n})},setShowGridPoints:n=>{e({showGridPoints:n})},setShowImmissionPoints:n=>{e({showImmissionPoints:n})},setShowESQPoints:n=>{e({showESQPoints:n})},setShowHoehenpunkte:n=>{e({showHoehenpunkte:n})},setShowPoles:n=>{e({showPoles:n})},setShowReferencePoints:n=>{e({showReferencePoints:n})},setContourDisplayMode:n=>{e({contourDisplayMode:n})},updateImmissionGridSettings:n=>{e(l=>({immissionGridSettings:{...l.immissionGridSettings,...n}})),["gridSizeX","gridSizeY","heightOffset"].some(l=>l in n)&&(console.log("Clearing immission grid due to computation-affecting setting change"),t().clearImmissionGrid())},getInterpolatedGridValue:(n,i,a,l)=>{const c=t(),{immissionGrid:f,immissionGridSettings:d}=c;if(!f||f.length===0)return null;const{gridSizeX:h,gridSizeY:m}=d,g=n/a*(h-1),_=i/l*(m-1),x=Math.floor(g),D=Math.floor(_),y=Math.min(x+1,h-1),S=Math.min(D+1,m-1),w=g-x,A=_-D,N=(U,I)=>{const X=I*h+U;return X>=0&&X<f.length?f[X].value:0},z=N(x,D),k=N(y,D),M=N(x,S),B=N(y,S),P=z*(1-w)+k*w,R=M*(1-w)+B*w;return P*(1-A)+R*A},getInterpolatedDetailedGridValue:(n,i,a,l,c)=>{const f=t(),{immissionGridDetailed:d,immissionGridSettings:h}=f;if(!d||d.length===0)return null;const{gridSizeX:m,gridSizeY:g}=h,_=n/a*(m-1),x=i/l*(g-1),D=Math.floor(_),y=Math.floor(x),S=Math.min(D+1,m-1),w=Math.min(y+1,g-1),A=_-D,N=x-y,z=X=>{switch(c){case"esq":return X.esq||0;case"trassen":return X.trassen||0;case"total":default:return X.total||0}},k=(X,j)=>{const J=j*m+X;return J>=0&&J<d.length?z(d[J]):0},M=k(D,y),B=k(S,y),P=k(D,w),R=k(S,w),H=M*(1-A)+B*A,U=P*(1-A)+R*A;return H*(1-N)+U*N},hasValidTransformation:()=>t().referencePoints.length>=2,recomputeTriangulation:()=>{const n=t(),i=Array.from(n.hoehenpunkte.values());if(console.log("recomputeTriangulation called with",i.length,"Hoehenpunkte"),i.length>=3){const{dreiecke:a,kanten:l}=x_(i);console.log("Computed triangulation:",a.length,"triangles,",l.length,"edges");const c=i.map((d,h)=>({LfdNummer:h+1,GK_Vektor:d.GK_Vektor})),f=new yc(a,c);if(f.setDGMKante(l),console.log("Created new DTMProcessor"),e({dgmDreiecke:a,dgmKanten:l,dtmProcessor:f}),n.originalData){const d={...n.originalData,DGMDreiecke:a,DGMKanten:l,Hoehenpunkte:c,ImmissionPoints:Array.from(n.immissionPoints.values()),ESQSources:Array.from(n.esqSources.values()),LeiterTypes:Array.from(n.leiterTypes.values())},h=new Cn(d,f);e({calculator:h}),console.log("Updated calculator with new terrain data"),n.isImmissionPointsComputed&&(console.log("Clearing immission cache due to terrain change"),n.cachedImmissionValues.clear(),e({cachedImmissionValues:new Map,isImmissionPointsComputed:!1}))}}else console.log("Not enough Hoehenpunkte for triangulation (need at least 3)"),e({dgmDreiecke:[],dgmKanten:[],dtmProcessor:null})},addMastLayoutTemplate:n=>{const i=n.id||Gn(),a={...n,id:i};return e(l=>{const c=new Map(l.mastLayoutTemplates);return c.set(i,a),{mastLayoutTemplates:c}}),i},updateMastLayoutTemplate:(n,i)=>{e(a=>{const l=new Map(a.mastLayoutTemplates);return l.set(n,{...i,id:n}),{mastLayoutTemplates:l}})},loadStandardTemplates:()=>{const n=new Map;Kb.forEach(i=>{const a=M0(i);a.id=Gn(),n.set(a.id,a)}),e({mastLayoutTemplates:n})},addTrasseNew:(n,i)=>{console.log("addTrasseNew called with name:",n,"templateId:",i);const a=Gn(),l={id:a,name:n,templateId:i,poleIds:[]};return console.log("addTrasseNew - created trasse:",l),e(c=>{const f=new Map(c.trassenNew);return f.set(a,l),console.log("addTrasseNew - newTrassen map size after add:",f.size),console.log("addTrasseNew - newTrassen entries:",Array.from(f.entries())),{trassenNew:f}}),t().clearImmissionCache(),t().clearImmissionGrid(),console.log("addTrasseNew - returning id:",a),a},updateTrasseNew:(n,i)=>{e(a=>{const l=new Map(a.trassenNew),c=l.get(n);return c&&l.set(n,{...c,...i}),{trassenNew:l}})},deleteTrasseNew:n=>{e(i=>{const a=new Map(i.trassenNew),l=a.get(n);if(l){const c=new Map(i.poles),f=new Map(i.connectionLines);return l.poleIds.forEach(d=>{c.delete(d)}),Array.from(f.entries()).forEach(([d,h])=>{h.trasseId===n&&f.delete(d)}),a.delete(n),{trassenNew:a,poles:c,connectionLines:f}}return{}})},updatePole:(n,i)=>{e(a=>{const l=new Map(a.poles),c=l.get(n);return c&&l.set(n,{...c,...i}),{poles:l}}),t().clearImmissionCache(),t().clearImmissionGrid()},deletePole:n=>{e(i=>{const a=new Map(i.poles),l=a.get(n);if(l){const c=new Map(i.trassenNew),f=c.get(l.trasseId);f&&(f.poleIds=f.poleIds.filter(h=>h!==n),c.set(l.trasseId,f));const d=new Map(i.connectionLines);return Array.from(d.entries()).forEach(([h,m])=>{const g=m.fromConnectionId,_=m.toConnectionId;(g.startsWith(n+"_")||_.startsWith(n+"_"))&&d.delete(h)}),a.delete(n),{poles:a,trassenNew:c,connectionLines:d}}return{}}),t().clearImmissionCache(),t().clearImmissionGrid()},addConnectionLine:n=>{const i=n.id||Gn(),a={...n,id:i};return e(l=>{const c=new Map(l.connectionLines);return c.set(i,a),{connectionLines:c}}),i},updateConnectionLine:(n,i)=>{e(a=>{const l=new Map(a.connectionLines),c=l.get(n);return c&&l.set(n,{...c,...i}),{connectionLines:l}})},deleteConnectionLine:n=>{e(i=>{const a=new Map(i.connectionLines);return a.delete(n),{connectionLines:a}})},convertNewFormatToComputation:n=>{const i=t(),a=i.trassenNew.get(n);if(!a)return null;const l=new Map;a.poleIds.forEach(h=>{const m=i.poles.get(h);m&&l.set(h,m)});const c=Array.from(i.connectionLines.values()).filter(h=>h.trasseId===n),f=Array.from(i.leiterTypes.values());return z0(a,l,c,f)},addCornerHoehenpunkte:()=>{const n=t(),{imageWidth:i,imageHeight:a,referencePoints:l}=n;if(l.length<2){console.log("Not enough reference points to create corner Hoehenpunkte");return}const c=l.filter(f=>!isNaN(f.pixelX)&&!isNaN(f.pixelY)&&!isNaN(f.gkRechts)&&!isNaN(f.gkHoch)&&f.pixelX>=0&&f.pixelY>=0);if(c.length<2){console.log("Not enough valid reference points for transformation");return}try{const f=c.map(_=>({gkRechts:_.gkRechts,gkHoch:_.gkHoch,pixelX:_.pixelX,pixelY:a-_.pixelY})),d=new U0(f),h=[{x:0,y:0,label:"SW"},{x:i,y:0,label:"SE"},{x:i,y:a,label:"NE"},{x:0,y:a,label:"NW"}],m=new Map(n.hoehenpunkte);let g=0;return h.forEach(_=>{const[x,D]=d.pixelToGK(_.x,_.y);if(isNaN(x)||isNaN(D)){console.error(`Failed to transform corner ${_.label}: got NaN values`);return}const y=1;if(!Array.from(m.values()).some(w=>{const A=Math.abs(w.GK_Vektor.GK.Rechts-x),N=Math.abs(w.GK_Vektor.GK.Hoch-D);return A<y&&N<y})){const w=Gn(),A={id:w,GK_Vektor:{GK:{Rechts:x,Hoch:D},z:50}};m.set(w,A),g++,console.log(`Added corner Hoehenpunkt at ${_.label}: (${x.toFixed(2)}, ${D.toFixed(2)})`)}}),g>0?(e({hoehenpunkte:m}),t().recomputeTriangulation(),g):0}catch(f){console.error("Error creating corner Hoehenpunkte:",f);return}},resetAllHeightsToTerrain:()=>{const n=t();if(!n.dtmProcessor){console.warn("No DTM processor available for terrain height calculation");return}let i=0;const a=new Map(n.poles);for(const[f,d]of a)try{const h=n.dtmProcessor.berechneHoeheDGM(d.position.GK);isNaN(h)||(a.set(f,{...d,nullpunktHeight:h}),i++)}catch(h){console.error(`Error calculating terrain height for pole ${f}:`,h)}const l=new Map(n.esqSources);for(const[f,d]of l)try{const h=n.dtmProcessor.berechneHoeheDGM(d.Position.GK);isNaN(h)||(l.set(f,{...d,Position:{...d.Position,z:h}}),i++)}catch(h){console.error(`Error calculating terrain height for ESQ ${f}:`,h)}const c=new Map(n.immissionPoints);for(const[f,d]of c)try{const h=n.dtmProcessor.berechneHoeheDGM(d.Position.GK);isNaN(h)||(c.set(f,{...d,Position:{...d.Position,z:h}}),i++)}catch(h){console.error(`Error calculating terrain height for immission point ${f}:`,h)}e({poles:a,esqSources:l,immissionPoints:c,isImmissionPointsComputed:!1}),t().clearImmissionCache(),t().clearImmissionGrid(),console.log(`Updated heights for ${i} entities to match terrain`)},addLeiterType:n=>{e(i=>{const a=new Map(i.leiterTypes);return a.set(n.Name,n),{leiterTypes:a}})},updateLeiterType:(n,i)=>{e(a=>{const l=new Map(a.leiterTypes);return n!==i.Name&&l.delete(n),l.set(i.Name,i),{leiterTypes:l}})},deleteLeiterType:n=>{e(i=>{const a=new Map(i.leiterTypes);return a.delete(n),{leiterTypes:a}})},setColorPalette:(n,i)=>{e(a=>({colorPalettes:{...a.colorPalettes,[n]:i}}))},setMitFrequenz:n=>{e({mitFrequenz:n}),t().clearImmissionCache()},setKt:n=>{e({kt:n}),t().clearImmissionCache(),t().clearImmissionGrid()},deleteMastLayoutTemplate:n=>{e(i=>{const a=new Map(i.mastLayoutTemplates);return a.delete(n),{mastLayoutTemplates:a}})}}));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),gx=e=>{const t=XN(e);return t.charAt(0).toUpperCase()+t.slice(1)},G2=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),WN=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=W.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...f},d)=>W.createElement("svg",{ref:d,...QN,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:G2("lucide",a),...!l&&!WN(f)&&{"aria-hidden":"true"},...f},[...c.map(([h,m])=>W.createElement(h,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(e,t)=>{const n=W.forwardRef(({className:i,...a},l)=>W.createElement(JN,{ref:l,iconNode:t,className:G2(`lucide-${YN(gx(e))}`,`lucide-${e}`,i),...a}));return n.displayName=gx(e),n};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],tM=wt("anchor",eM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],rM=wt("archive",nM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],aM=wt("bug",iM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],od=wt("check",sM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],No=wt("chevron-down",oM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],uM=wt("chevron-up",lM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],U2=wt("circle-alert",cM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hM=wt("circle-question-mark",fM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],vx=wt("cpu",dM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pM=wt("eye-off",mM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vM=wt("eye",gM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Z0=wt("file-text",yM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],xM=wt("folder-open",_M);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ug=wt("grid-3x3",bM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],DM=wt("house",wM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yx=wt("image",EM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],c0=wt("info",SM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],_x=wt("layers",CM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],NM=wt("loader-circle",AM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ud=wt("map-pin",MM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Ph=wt("map",kM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],Z2=wt("mountain",TM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],LM=wt("mouse-pointer",zM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],RM=wt("move",FM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],BM=wt("palette",jM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],OM=wt("panels-top-left",PM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],HM=wt("play",IM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zd=wt("plus",GM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],K0=wt("printer",UM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],K2=wt("radio",ZM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],qM=wt("rotate-ccw",KM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],VM=wt("rotate-cw",$M);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Zg=wt("route",YM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Kd=wt("save",XM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xx=wt("settings",WM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],q0=wt("square-pen",QM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],bx=wt("target",JM);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jc=wt("trash-2",e6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],n6=wt("triangle-alert",t6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],i6=wt("upload",r6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Os=wt("x",a6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],eu=wt("zap",s6);function q2(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=q2(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function $2(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=q2(e))&&(i&&(i+=" "),i+=t);return i}const Kg="-",o6=e=>{const t=u6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:c=>{const f=c.split(Kg);return f[0]===""&&f.length!==1&&f.shift(),V2(f,t)||l6(c)},getConflictingClassGroupIds:(c,f)=>{const d=n[c]||[];return f&&i[c]?[...d,...i[c]]:d}}},V2=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],i=t.nextPart.get(n),a=i?V2(e.slice(1),i):void 0;if(a)return a;if(t.validators.length===0)return;const l=e.join(Kg);return t.validators.find(({validator:c})=>c(l))?.classGroupId},wx=/^\[(.+)\]$/,l6=e=>{if(wx.test(e)){const t=wx.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},u6=e=>{const{theme:t,classGroups:n}=e,i={nextPart:new Map,validators:[]};for(const a in n)$0(n[a],i,a,t);return i},$0=(e,t,n,i)=>{e.forEach(a=>{if(typeof a=="string"){const l=a===""?t:Dx(t,a);l.classGroupId=n;return}if(typeof a=="function"){if(c6(a)){$0(a(i),t,n,i);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([l,c])=>{$0(c,Dx(t,l),n,i)})})},Dx=(e,t)=>{let n=e;return t.split(Kg).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},c6=e=>e.isThemeGetter,f6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,i=new Map;const a=(l,c)=>{n.set(l,c),t++,t>e&&(t=0,i=n,n=new Map)};return{get(l){let c=n.get(l);if(c!==void 0)return c;if((c=i.get(l))!==void 0)return a(l,c),c},set(l,c){n.has(l)?n.set(l,c):a(l,c)}}},V0="!",Y0=":",h6=Y0.length,d6=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=a=>{const l=[];let c=0,f=0,d=0,h;for(let D=0;D<a.length;D++){let y=a[D];if(c===0&&f===0){if(y===Y0){l.push(a.slice(d,D)),d=D+h6;continue}if(y==="/"){h=D;continue}}y==="["?c++:y==="]"?c--:y==="("?f++:y===")"&&f--}const m=l.length===0?a:a.substring(d),g=m6(m),_=g!==m,x=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:_,baseClassName:g,maybePostfixModifierPosition:x}};if(t){const a=t+Y0,l=i;i=c=>c.startsWith(a)?l(c.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const a=i;i=l=>n({className:l,parseClassName:a})}return i},m6=e=>e.endsWith(V0)?e.substring(0,e.length-1):e.startsWith(V0)?e.substring(1):e,p6=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let l=[];return i.forEach(c=>{c[0]==="["||t[c]?(a.push(...l.sort(),c),l=[]):l.push(c)}),a.push(...l.sort()),a}},g6=e=>({cache:f6(e.cacheSize),parseClassName:d6(e),sortModifiers:p6(e),...o6(e)}),v6=/\s+/,y6=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:l}=t,c=[],f=e.trim().split(v6);let d="";for(let h=f.length-1;h>=0;h-=1){const m=f[h],{isExternal:g,modifiers:_,hasImportantModifier:x,baseClassName:D,maybePostfixModifierPosition:y}=n(m);if(g){d=m+(d.length>0?" "+d:d);continue}let S=!!y,w=i(S?D.substring(0,y):D);if(!w){if(!S){d=m+(d.length>0?" "+d:d);continue}if(w=i(D),!w){d=m+(d.length>0?" "+d:d);continue}S=!1}const A=l(_).join(":"),N=x?A+V0:A,z=N+w;if(c.includes(z))continue;c.push(z);const k=a(w,S);for(let M=0;M<k.length;++M){const B=k[M];c.push(N+B)}d=m+(d.length>0?" "+d:d)}return d};function _6(){let e=0,t,n,i="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Y2(t))&&(i&&(i+=" "),i+=n);return i}const Y2=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=Y2(e[i]))&&(n&&(n+=" "),n+=t);return n};function x6(e,...t){let n,i,a,l=c;function c(d){const h=t.reduce((m,g)=>g(m),e());return n=g6(h),i=n.cache.get,a=n.cache.set,l=f,f(d)}function f(d){const h=i(d);if(h)return h;const m=y6(d,n);return a(d,m),m}return function(){return l(_6.apply(null,arguments))}}const kn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},X2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,W2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,b6=/^\d+\/\d+$/,w6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,D6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,S6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,C6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rl=e=>b6.test(e),Ct=e=>!!e&&!Number.isNaN(Number(e)),ks=e=>!!e&&Number.isInteger(Number(e)),f0=e=>e.endsWith("%")&&Ct(e.slice(0,-1)),za=e=>w6.test(e),A6=()=>!0,N6=e=>D6.test(e)&&!E6.test(e),Q2=()=>!1,M6=e=>S6.test(e),k6=e=>C6.test(e),T6=e=>!it(e)&&!at(e),z6=e=>hu(e,tw,Q2),it=e=>X2.test(e),So=e=>hu(e,nw,N6),h0=e=>hu(e,B6,Ct),Ex=e=>hu(e,J2,Q2),L6=e=>hu(e,ew,k6),bh=e=>hu(e,rw,M6),at=e=>W2.test(e),_c=e=>du(e,nw),F6=e=>du(e,P6),Sx=e=>du(e,J2),R6=e=>du(e,tw),j6=e=>du(e,ew),wh=e=>du(e,rw,!0),hu=(e,t,n)=>{const i=X2.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},du=(e,t,n=!1)=>{const i=W2.exec(e);return i?i[1]?t(i[1]):n:!1},J2=e=>e==="position"||e==="percentage",ew=e=>e==="image"||e==="url",tw=e=>e==="length"||e==="size"||e==="bg-size",nw=e=>e==="length",B6=e=>e==="number",P6=e=>e==="family-name",rw=e=>e==="shadow",O6=()=>{const e=kn("color"),t=kn("font"),n=kn("text"),i=kn("font-weight"),a=kn("tracking"),l=kn("leading"),c=kn("breakpoint"),f=kn("container"),d=kn("spacing"),h=kn("radius"),m=kn("shadow"),g=kn("inset-shadow"),_=kn("text-shadow"),x=kn("drop-shadow"),D=kn("blur"),y=kn("perspective"),S=kn("aspect"),w=kn("ease"),A=kn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...z(),at,it],M=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],P=()=>[at,it,d],R=()=>[Rl,"full","auto",...P()],H=()=>[ks,"none","subgrid",at,it],U=()=>["auto",{span:["full",ks,at,it]},ks,at,it],I=()=>[ks,"auto",at,it],X=()=>["auto","min","max","fr",at,it],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...P()],ne=()=>[Rl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],V=()=>[e,at,it],Q=()=>[...z(),Sx,Ex,{position:[at,it]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",R6,z6,{size:[at,it]}],ee=()=>[f0,_c,So],se=()=>["","none","full",h,at,it],oe=()=>["",Ct,_c,So],he=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Re=()=>[Ct,f0,Sx,Ex],Le=()=>["","none",D,at,it],Ge=()=>["none",Ct,at,it],Ke=()=>["none",Ct,at,it],Qe=()=>[Ct,at,it],$e=()=>[Rl,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[za],breakpoint:[za],color:[A6],container:[za],"drop-shadow":[za],ease:["in","out","in-out"],font:[T6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[za],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[za],shadow:[za],spacing:["px",Ct],text:[za],"text-shadow":[za],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Rl,it,at,S]}],container:["container"],columns:[{columns:[Ct,it,at,f]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[ks,"auto",at,it]}],basis:[{basis:[Rl,"full","auto",f,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ct,Rl,"auto","initial","none",it]}],grow:[{grow:["",Ct,at,it]}],shrink:[{shrink:["",Ct,at,it]}],order:[{order:[ks,"first","last","none",at,it]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":X()}],"auto-rows":[{"auto-rows":X()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[f,"screen",...ne()]}],"min-w":[{"min-w":[f,"screen","none",...ne()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[c]},...ne()]}],h:[{h:["screen","lh",...ne()]}],"min-h":[{"min-h":["screen","lh","none",...ne()]}],"max-h":[{"max-h":["screen","lh",...ne()]}],"font-size":[{text:["base",n,_c,So]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,at,h0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",f0,it]}],"font-family":[{font:[F6,it,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,at,it]}],"line-clamp":[{"line-clamp":[Ct,"none",at,h0]}],leading:[{leading:[l,...P()]}],"list-image":[{"list-image":["none",at,it]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",at,it]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ct,"from-font","auto",at,So]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[Ct,"auto",at,it]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",at,it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",at,it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ks,at,it],radial:["",at,it],conic:[ks,at,it]},j6,L6]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ct,at,it]}],"outline-w":[{outline:["",Ct,_c,So]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",m,wh,bh]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",g,wh,bh]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[Ct,So]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",_,wh,bh]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[Ct,at,it]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ct]}],"mask-image-linear-from-pos":[{"mask-linear-from":Re()}],"mask-image-linear-to-pos":[{"mask-linear-to":Re()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":Re()}],"mask-image-t-to-pos":[{"mask-t-to":Re()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":Re()}],"mask-image-r-to-pos":[{"mask-r-to":Re()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":Re()}],"mask-image-b-to-pos":[{"mask-b-to":Re()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":Re()}],"mask-image-l-to-pos":[{"mask-l-to":Re()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":Re()}],"mask-image-x-to-pos":[{"mask-x-to":Re()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":Re()}],"mask-image-y-to-pos":[{"mask-y-to":Re()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[at,it]}],"mask-image-radial-from-pos":[{"mask-radial-from":Re()}],"mask-image-radial-to-pos":[{"mask-radial-to":Re()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[Ct]}],"mask-image-conic-from-pos":[{"mask-conic-from":Re()}],"mask-image-conic-to-pos":[{"mask-conic-to":Re()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",at,it]}],filter:[{filter:["","none",at,it]}],blur:[{blur:Le()}],brightness:[{brightness:[Ct,at,it]}],contrast:[{contrast:[Ct,at,it]}],"drop-shadow":[{"drop-shadow":["","none",x,wh,bh]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",Ct,at,it]}],"hue-rotate":[{"hue-rotate":[Ct,at,it]}],invert:[{invert:["",Ct,at,it]}],saturate:[{saturate:[Ct,at,it]}],sepia:[{sepia:["",Ct,at,it]}],"backdrop-filter":[{"backdrop-filter":["","none",at,it]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Ct,at,it]}],"backdrop-contrast":[{"backdrop-contrast":[Ct,at,it]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ct,at,it]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ct,at,it]}],"backdrop-invert":[{"backdrop-invert":["",Ct,at,it]}],"backdrop-opacity":[{"backdrop-opacity":[Ct,at,it]}],"backdrop-saturate":[{"backdrop-saturate":[Ct,at,it]}],"backdrop-sepia":[{"backdrop-sepia":["",Ct,at,it]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",at,it]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ct,"initial",at,it]}],ease:[{ease:["linear","initial",w,at,it]}],delay:[{delay:[Ct,at,it]}],animate:[{animate:["none",A,at,it]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,at,it]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:Ke()}],"scale-x":[{"scale-x":Ke()}],"scale-y":[{"scale-y":Ke()}],"scale-z":[{"scale-z":Ke()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[at,it,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",at,it]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",at,it]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[Ct,_c,So,h0]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},I6=x6(O6);function gn(...e){return I6($2(e))}const H6=({title:e,children:t,defaultPosition:n={x:10,y:10},defaultMinimized:i=!1,className:a})=>{const[l,c]=W.useState(n),[f,d]=W.useState(!1),[h,m]=W.useState(i),[g,_]=W.useState({x:0,y:0}),x=W.useRef(null),D=w=>{w.target.closest(".drag-handle")&&(d(!0),_({x:w.clientX-l.x,y:w.clientY-l.y}),w.preventDefault())},y=w=>{f&&c({x:w.clientX-g.x,y:w.clientY-g.y})},S=()=>{d(!1)};return W.useEffect(()=>{if(f)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",S)}},[f,g]),b.jsxs("div",{ref:x,className:gn("absolute bg-white/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200 z-[1000]",f&&"cursor-move select-none",a),style:{left:`${l.x}px`,top:`${l.y}px`,minWidth:"250px"},onMouseDown:D,children:[b.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200 bg-gray-50 rounded-t-lg",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{className:"drag-handle p-1 hover:bg-gray-200 rounded cursor-move",title:"Verschieben",children:b.jsx(RM,{className:"h-4 w-4 text-gray-600"})}),b.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:e})]}),b.jsx("button",{onClick:()=>m(!h),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:h?"Maximieren":"Minimieren",children:h?b.jsx(No,{className:"h-4 w-4 text-gray-600"}):b.jsx(uM,{className:"h-4 w-4 text-gray-600"})})]}),!h&&b.jsx("div",{className:"p-4",children:t})]})},Cx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ax=$2,G6=(e,t)=>n=>{var i;if(t?.variants==null)return Ax(e,n?.class,n?.className);const{variants:a,defaultVariants:l}=t,c=Object.keys(a).map(h=>{const m=n?.[h],g=l?.[h];if(m===null)return null;const _=Cx(m)||Cx(g);return a[h][_]}),f=n&&Object.entries(n).reduce((h,m)=>{let[g,_]=m;return _===void 0||(h[g]=_),h},{}),d=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((h,m)=>{let{class:g,className:_,...x}=m;return Object.entries(x).every(D=>{let[y,S]=D;return Array.isArray(S)?S.includes({...l,...f}[y]):{...l,...f}[y]===S})?[...h,g,_]:h},[]);return Ax(e,c,d,n?.class,n?.className)},qg=G6("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),st=W.forwardRef(({className:e,variant:t,size:n,...i},a)=>b.jsx("button",{className:gn(qg({variant:t,size:n,className:e})),ref:a,...i}));st.displayName="Button";const Lt=W.forwardRef(({className:e,type:t,...n},i)=>b.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:i,...n}));Lt.displayName="Input";const ot=W.forwardRef(({className:e,...t},n)=>b.jsx("label",{ref:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e}`,...t}));ot.displayName="Label";const Tc={isCapturing:!1,onMapClick:()=>{}},Nx=e=>{Tc.isCapturing=e},U6=e=>{Tc.onMapClick=e},Z6=({imageHeight:e})=>(Mg({click:t=>{if(Tc.isCapturing){const{lat:n,lng:i}=t.latlng,a=Math.round(i),l=Math.round(e-n);Tc.onMapClick(a,l),Tc.isCapturing=!1}}}),null),K6=()=>{const{referencePoints:e,projectImage:t,addReferencePoint:n,updateReferencePoint:i,deleteReferencePoint:a}=Yt(),[l,c]=W.useState(!1),[f,d]=W.useState(null),[h,m]=W.useState({rechts:"",hoch:""}),[g,_]=W.useState(null),[x,D]=W.useState({rechts:"",hoch:""}),y=()=>{c(!0),d(null),m({rechts:"",hoch:""}),Nx(!0),U6((P,R)=>{d({x:P,y:R}),c(!1)})},S=()=>{c(!1),d(null),m({rechts:"",hoch:""}),Nx(!1)},w=()=>{if(!f||!h.rechts||!h.hoch)return;const P=parseFloat(h.rechts),R=parseFloat(h.hoch);if(isNaN(P)||isNaN(R)){alert("Bitte gültige Koordinaten eingeben.");return}const H={id:Gn(),pixelX:f.x,pixelY:f.y,gkRechts:P,gkHoch:R,label:String.fromCharCode(65+e.length)};n(H),d(null),m({rechts:"",hoch:""})},A=P=>{_(P.id),D({rechts:P.gkRechts.toString(),hoch:P.gkHoch.toString()})},N=()=>{if(!g)return;const P=parseFloat(x.rechts),R=parseFloat(x.hoch);if(isNaN(P)||isNaN(R)){alert("Bitte gültige Koordinaten eingeben.");return}i(g,{gkRechts:P,gkHoch:R}),_(null),D({rechts:"",hoch:""})},z=()=>{_(null),D({rechts:"",hoch:""})},k=P=>{confirm("Referenzpunkt wirklich löschen?")&&a(P)},M=()=>{e.forEach(H=>{a(H.id)});const P={id:Gn(),pixelX:2126,pixelY:1594,gkRechts:3525941,gkHoch:5385710,label:"A"};n(P);const R={id:Gn(),pixelX:1514,pixelY:1150,gkRechts:3525836,gkHoch:5385784,label:"B"};n(R),console.log("Debug reference points set:",[P,R])},B=e.length>=2;return b.jsx(H6,{title:"Referenzpunkt-Kalibrierung",defaultPosition:{x:window.innerWidth-360,y:300},className:"w-80",children:b.jsxs("div",{className:"space-y-4",children:[!t&&b.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:b.jsxs("p",{className:"text-xs text-yellow-800",children:[b.jsx("span",{className:"font-semibold",children:"Hinweis:"}),b.jsx("br",{}),"Bitte laden Sie zuerst ein Lageplan-Bild hoch."]})}),t&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:`p-2 rounded text-xs ${B?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[e.length===0&&"Setzen Sie mindestens 2 Referenzpunkte",e.length===1&&"1 Referenzpunkt gesetzt (min. 2 benötigt)",e.length>=2&&`${e.length} Referenzpunkte gesetzt ✓`]}),e.length>0&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{className:"text-xs font-semibold",children:"Gesetzte Punkte:"}),e.map(P=>b.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200",children:[b.jsxs("div",{className:"flex items-center justify-between mb-1",children:[b.jsxs("span",{className:"font-semibold text-sm",children:[b.jsx(Ud,{className:"h-3 w-3 inline mr-1"}),"Punkt ",P.label]}),b.jsx("div",{className:"flex gap-1",children:g!==P.id&&b.jsxs(b.Fragment,{children:[b.jsx(st,{size:"sm",variant:"ghost",className:"h-6 px-2",onClick:()=>A(P),children:"Bearbeiten"}),b.jsx(st,{size:"sm",variant:"ghost",className:"h-6 px-2 text-red-600 hover:text-red-700",onClick:()=>k(P.id),children:b.jsx(jc,{className:"h-3 w-3"})})]})})]}),g===P.id?b.jsxs("div",{className:"space-y-2 mt-2",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs",children:"GK Rechts:"}),b.jsx(Lt,{type:"number",value:x.rechts,onChange:R=>D({...x,rechts:R.target.value}),className:"h-7 text-xs"})]}),b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs",children:"GK Hoch:"}),b.jsx(Lt,{type:"number",value:x.hoch,onChange:R=>D({...x,hoch:R.target.value}),className:"h-7 text-xs"})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(st,{size:"sm",variant:"default",className:"h-7 text-xs flex-1",onClick:N,children:[b.jsx(od,{className:"h-3 w-3 mr-1"}),"Speichern"]}),b.jsxs(st,{size:"sm",variant:"outline",className:"h-7 text-xs flex-1",onClick:z,children:[b.jsx(Os,{className:"h-3 w-3 mr-1"}),"Abbrechen"]})]})]}):b.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[b.jsxs("div",{children:["Pixel: (",P.pixelX,", ",P.pixelY,")"]}),b.jsxs("div",{children:["GK: (",P.gkRechts.toFixed(2),", ",P.gkHoch.toFixed(2),")"]})]})]},P.id))]}),!l&&!f&&b.jsxs(st,{variant:"default",size:"sm",onClick:y,className:"w-full",disabled:e.length>=4,children:[b.jsx(Zd,{className:"h-4 w-4 mr-2"}),"Neuen Referenzpunkt hinzufügen"]}),l&&b.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[b.jsxs("p",{className:"text-xs text-blue-800 mb-2",children:[b.jsx(LM,{className:"h-3 w-3 inline mr-1"}),b.jsx("span",{className:"font-semibold",children:"Klicken Sie auf die Karte"}),b.jsx("br",{}),"um die Position des Referenzpunkts zu markieren."]}),b.jsxs(st,{size:"sm",variant:"outline",onClick:S,className:"w-full h-7 text-xs",children:[b.jsx(Os,{className:"h-3 w-3 mr-1"}),"Abbrechen"]})]}),f&&b.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 rounded border border-gray-200",children:[b.jsxs("div",{className:"text-xs",children:[b.jsx("strong",{children:"Pixel-Position:"})," (",f.x,", ",f.y,")"]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs",children:"GK Rechts-Wert:"}),b.jsx(Lt,{type:"number",step:"0.01",value:h.rechts,onChange:P=>m({...h,rechts:P.target.value}),placeholder:"z.B. 3522278.47",className:"h-8 text-xs mt-1"})]}),b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs",children:"GK Hoch-Wert:"}),b.jsx(Lt,{type:"number",step:"0.01",value:h.hoch,onChange:P=>m({...h,hoch:P.target.value}),placeholder:"z.B. 5387345.79",className:"h-8 text-xs mt-1"})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(st,{size:"sm",variant:"default",onClick:w,disabled:!h.rechts||!h.hoch,className:"flex-1 h-8 text-xs",children:[b.jsx(od,{className:"h-3 w-3 mr-1"}),"Punkt hinzufügen"]}),b.jsxs(st,{size:"sm",variant:"outline",onClick:S,className:"flex-1 h-8 text-xs",children:[b.jsx(Os,{className:"h-3 w-3 mr-1"}),"Abbrechen"]})]})]}),b.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[b.jsxs(st,{size:"sm",variant:"outline",onClick:M,className:"w-full h-8 text-xs border-orange-300 text-orange-600 hover:bg-orange-50",children:[b.jsx(aM,{className:"h-3 w-3 mr-1"}),"Debug: Test-Referenzpunkte setzen"]}),b.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-y-0.5",children:[b.jsx("div",{children:"Punkt A: Pixel(2126, 1594) → GK(3525941, 5385710)"}),b.jsx("div",{children:"Punkt B: Pixel(1514, 1150) → GK(3525836, 5385784)"})]})]})]})]})})};function Oh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function q6(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iw(e){let t,n,i;e.length!==2?(t=Oh,n=(f,d)=>Oh(e(f),d),i=(f,d)=>e(f)-d):(t=e===Oh||e===q6?e:$6,n=e,i=e);function a(f,d,h=0,m=f.length){if(h<m){if(t(d,d)!==0)return m;do{const g=h+m>>>1;n(f[g],d)<0?h=g+1:m=g}while(h<m)}return h}function l(f,d,h=0,m=f.length){if(h<m){if(t(d,d)!==0)return m;do{const g=h+m>>>1;n(f[g],d)<=0?h=g+1:m=g}while(h<m)}return h}function c(f,d,h=0,m=f.length){const g=a(f,d,h,m-1);return g>h&&i(f[g-1],d)>-i(f[g],d)?g-1:g}return{left:a,center:c,right:l}}function $6(){return 0}function V6(e){return e===null?NaN:+e}const Y6=iw(Oh),X6=Y6.right;iw(V6).center;function W6(e,t){let n=0;for(let i of e)i!=null&&(i=+i)>=i&&++n;return n}function Q6(e,t){let n,i;if(t===void 0)for(const a of e)a!=null&&(n===void 0?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)));else{let a=-1;for(let l of e)(l=t(l,++a,e))!=null&&(n===void 0?l>=l&&(n=i=l):(n>l&&(n=l),i<l&&(i=l)))}return[n,i]}class tu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let a=0;a<this._n&&a<32;a++){const l=n[a],c=t+l,f=Math.abs(t)<Math.abs(l)?t-(c-l):l-(c-t);f&&(n[i++]=f),t=c}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,a,l,c=0;if(n>0){for(c=t[--n];n>0&&(i=c,a=t[--n],c=i+a,l=a-(c-i),!l););n>0&&(l<0&&t[n-1]<0||l>0&&t[n-1]>0)&&(a=l*2,i=c+a,a==i-c&&(c=i))}return c}}const J6=Math.sqrt(50),ek=Math.sqrt(10),tk=Math.sqrt(2);function ld(e,t,n){const i=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),l=i/Math.pow(10,a),c=l>=J6?10:l>=ek?5:l>=tk?2:1;let f,d,h;return a<0?(h=Math.pow(10,-a)/c,f=Math.round(e*h),d=Math.round(t*h),f/h<e&&++f,d/h>t&&--d,h=-h):(h=Math.pow(10,a)*c,f=Math.round(e/h),d=Math.round(t/h),f*h<e&&++f,d*h>t&&--d),d<f&&.5<=n&&n<2?ld(e,t,n*2):[f,d,h]}function aw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[a,l,c]=i?ld(t,e,n):ld(e,t,n);if(!(l>=a))return[];const f=l-a+1,d=new Array(f);if(i)if(c<0)for(let h=0;h<f;++h)d[h]=(l-h)/-c;else for(let h=0;h<f;++h)d[h]=(l-h)*c;else if(c<0)for(let h=0;h<f;++h)d[h]=(a+h)/-c;else for(let h=0;h<f;++h)d[h]=(a+h)*c;return d}function ud(e,t,n){return t=+t,e=+e,n=+n,ld(e,t,n)[2]}function nk(e,t,n){t=+t,e=+e,n=+n;const i=t<e,a=i?ud(t,e,n):ud(e,t,n);return(i?-1:1)*(a<0?1/-a:a)}function rk(e,t,n){let i;for(;;){const a=ud(e,t,n);if(a===i||a===0||!isFinite(a))return[e,t];a>0?(e=Math.floor(e/a)*a,t=Math.ceil(t/a)*a):a<0&&(e=Math.ceil(e*a)/a,t=Math.floor(t*a)/a),i=a}}function ik(e){return Math.max(1,Math.ceil(Math.log(W6(e))/Math.LN2)+1)}var ak=Array.prototype,sk=ak.slice;function ok(e,t){return e-t}function lk(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}const Mx=e=>()=>e;function uk(e,t){for(var n=-1,i=t.length,a;++n<i;)if(a=ck(e,t[n]))return a;return 0}function ck(e,t){for(var n=t[0],i=t[1],a=-1,l=0,c=e.length,f=c-1;l<c;f=l++){var d=e[l],h=d[0],m=d[1],g=e[f],_=g[0],x=g[1];if(fk(d,g,t))return 0;m>i!=x>i&&n<(_-h)*(i-m)/(x-m)+h&&(a=-a)}return a}function fk(e,t,n){var i;return hk(e,t,n)&&dk(e[i=+(e[0]===t[0])],n[i],t[i])}function hk(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function dk(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function mk(){}var La=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function sw(){var e=1,t=1,n=ik,i=d;function a(h){var m=n(h);if(Array.isArray(m))m=m.slice().sort(ok);else{const g=Q6(h,pk);for(m=aw(...rk(g[0],g[1],m),m);m[m.length-1]>=g[1];)m.pop();for(;m[1]<g[0];)m.shift()}return m.map(g=>l(h,g))}function l(h,m){const g=m==null?NaN:+m;if(isNaN(g))throw new Error(`invalid value: ${m}`);var _=[],x=[];return c(h,g,function(D){i(D,h,g),lk(D)>0?_.push([D]):x.push(D)}),x.forEach(function(D){for(var y=0,S=_.length,w;y<S;++y)if(uk((w=_[y])[0],D)!==-1){w.push(D);return}}),{type:"MultiPolygon",value:m,coordinates:_}}function c(h,m,g){var _=new Array,x=new Array,D,y,S,w,A,N;for(D=y=-1,w=Co(h[0],m),La[w<<1].forEach(z);++D<e-1;)S=w,w=Co(h[D+1],m),La[S|w<<1].forEach(z);for(La[w<<0].forEach(z);++y<t-1;){for(D=-1,w=Co(h[y*e+e],m),A=Co(h[y*e],m),La[w<<1|A<<2].forEach(z);++D<e-1;)S=w,w=Co(h[y*e+e+D+1],m),N=A,A=Co(h[y*e+D+1],m),La[S|w<<1|A<<2|N<<3].forEach(z);La[w|A<<3].forEach(z)}for(D=-1,A=h[y*e]>=m,La[A<<2].forEach(z);++D<e-1;)N=A,A=Co(h[y*e+D+1],m),La[A<<2|N<<3].forEach(z);La[A<<3].forEach(z);function z(k){var M=[k[0][0]+D,k[0][1]+y],B=[k[1][0]+D,k[1][1]+y],P=f(M),R=f(B),H,U;(H=x[P])?(U=_[R])?(delete x[H.end],delete _[U.start],H===U?(H.ring.push(B),g(H.ring)):_[H.start]=x[U.end]={start:H.start,end:U.end,ring:H.ring.concat(U.ring)}):(delete x[H.end],H.ring.push(B),x[H.end=R]=H):(H=_[R])?(U=x[P])?(delete _[H.start],delete x[U.end],H===U?(H.ring.push(B),g(H.ring)):_[U.start]=x[H.end]={start:U.start,end:H.end,ring:U.ring.concat(H.ring)}):(delete _[H.start],H.ring.unshift(M),_[H.start=P]=H):_[P]=x[R]={start:P,end:R,ring:[M,B]}}}function f(h){return h[0]*2+h[1]*(e+1)*4}function d(h,m,g){h.forEach(function(_){var x=_[0],D=_[1],y=x|0,S=D|0,w=d0(m[S*e+y]);x>0&&x<e&&y===x&&(_[0]=kx(x,d0(m[S*e+y-1]),w,g)),D>0&&D<t&&S===D&&(_[1]=kx(D,d0(m[(S-1)*e+y]),w,g))})}return a.contour=l,a.size=function(h){if(!arguments.length)return[e,t];var m=Math.floor(h[0]),g=Math.floor(h[1]);if(!(m>=0&&g>=0))throw new Error("invalid size");return e=m,t=g,a},a.thresholds=function(h){return arguments.length?(n=typeof h=="function"?h:Array.isArray(h)?Mx(sk.call(h)):Mx(h),a):n},a.smooth=function(h){return arguments.length?(i=h?d:mk,a):i===d},a}function pk(e){return isFinite(e)?e:NaN}function Co(e,t){return e==null?!1:+e>=t}function d0(e){return e==null||isNaN(e=+e)?-1/0:e}function kx(e,t,n,i){const a=i-t,l=n-t,c=isFinite(a)||isFinite(l)?a/l:Math.sign(a)/Math.sign(l);return isNaN(c)?e:e+c-.5}function gk(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function vk(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}function qd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $g(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function mu(){}var Ro=.7,nu=1/Ro,Vl="\\s*([+-]?\\d+)\\s*",Bc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yk=/^#([0-9a-f]{3,8})$/,_k=new RegExp(`^rgb\\(${Vl},${Vl},${Vl}\\)$`),xk=new RegExp(`^rgb\\(${Ji},${Ji},${Ji}\\)$`),bk=new RegExp(`^rgba\\(${Vl},${Vl},${Vl},${Bc}\\)$`),wk=new RegExp(`^rgba\\(${Ji},${Ji},${Ji},${Bc}\\)$`),Dk=new RegExp(`^hsl\\(${Bc},${Ji},${Ji}\\)$`),Ek=new RegExp(`^hsla\\(${Bc},${Ji},${Ji},${Bc}\\)$`),Tx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qd(mu,jo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zx,formatHex:zx,formatHex8:Sk,formatHsl:Ck,formatRgb:Lx,toString:Lx});function zx(){return this.rgb().formatHex()}function Sk(){return this.rgb().formatHex8()}function Ck(){return lw(this).formatHsl()}function Lx(){return this.rgb().formatRgb()}function jo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yk.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Fx(t):n===3?new cr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_k.exec(e))?new cr(t[1],t[2],t[3],1):(t=xk.exec(e))?new cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bk.exec(e))?Dh(t[1],t[2],t[3],t[4]):(t=wk.exec(e))?Dh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dk.exec(e))?Bx(t[1],t[2]/100,t[3]/100,1):(t=Ek.exec(e))?Bx(t[1],t[2]/100,t[3]/100,t[4]):Tx.hasOwnProperty(e)?Fx(Tx[e]):e==="transparent"?new cr(NaN,NaN,NaN,0):null}function Fx(e){return new cr(e>>16&255,e>>8&255,e&255,1)}function Dh(e,t,n,i){return i<=0&&(e=t=n=NaN),new cr(e,t,n,i)}function ow(e){return e instanceof mu||(e=jo(e)),e?(e=e.rgb(),new cr(e.r,e.g,e.b,e.opacity)):new cr}function Pc(e,t,n,i){return arguments.length===1?ow(e):new cr(e,t,n,i??1)}function cr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}qd(cr,Pc,$g(mu,{brighter(e){return e=e==null?nu:Math.pow(nu,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ro:Math.pow(Ro,e),new cr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cr(zo(this.r),zo(this.g),zo(this.b),cd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rx,formatHex:Rx,formatHex8:Ak,formatRgb:jx,toString:jx}));function Rx(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}`}function Ak(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}${ko((isNaN(this.opacity)?1:this.opacity)*255)}`}function jx(){const e=cd(this.opacity);return`${e===1?"rgb(":"rgba("}${zo(this.r)}, ${zo(this.g)}, ${zo(this.b)}${e===1?")":`, ${e})`}`}function cd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ko(e){return e=zo(e),(e<16?"0":"")+e.toString(16)}function Bx(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ni(e,t,n,i)}function lw(e){if(e instanceof Ni)return new Ni(e.h,e.s,e.l,e.opacity);if(e instanceof mu||(e=jo(e)),!e)return new Ni;if(e instanceof Ni)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),l=Math.max(t,n,i),c=NaN,f=l-a,d=(l+a)/2;return f?(t===l?c=(n-i)/f+(n<i)*6:n===l?c=(i-t)/f+2:c=(t-n)/f+4,f/=d<.5?l+a:2-l-a,c*=60):f=d>0&&d<1?0:c,new Ni(c,f,d,e.opacity)}function Nk(e,t,n,i){return arguments.length===1?lw(e):new Ni(e,t,n,i??1)}function Ni(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}qd(Ni,Nk,$g(mu,{brighter(e){return e=e==null?nu:Math.pow(nu,e),new Ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ro:Math.pow(Ro,e),new Ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new cr(m0(e>=240?e-240:e+120,a,i),m0(e,a,i),m0(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Ni(Px(this.h),Eh(this.s),Eh(this.l),cd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cd(this.opacity);return`${e===1?"hsl(":"hsla("}${Px(this.h)}, ${Eh(this.s)*100}%, ${Eh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Px(e){return e=(e||0)%360,e<0?e+360:e}function Eh(e){return Math.max(0,Math.min(1,e||0))}function m0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Mk=Math.PI/180,kk=180/Math.PI;var uw=-.14861,Vg=1.78277,Yg=-.29227,$d=-.90649,Oc=1.97294,Ox=Oc*$d,Ix=Oc*Vg,Hx=Vg*Yg-$d*uw;function Tk(e){if(e instanceof Lo)return new Lo(e.h,e.s,e.l,e.opacity);e instanceof cr||(e=ow(e));var t=e.r/255,n=e.g/255,i=e.b/255,a=(Hx*i+Ox*t-Ix*n)/(Hx+Ox-Ix),l=i-a,c=(Oc*(n-a)-Yg*l)/$d,f=Math.sqrt(c*c+l*l)/(Oc*a*(1-a)),d=f?Math.atan2(c,l)*kk-120:NaN;return new Lo(d<0?d+360:d,f,a,e.opacity)}function ta(e,t,n,i){return arguments.length===1?Tk(e):new Lo(e,t,n,i??1)}function Lo(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}qd(Lo,ta,$g(mu,{brighter(e){return e=e==null?nu:Math.pow(nu,e),new Lo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ro:Math.pow(Ro,e),new Lo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Mk,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),a=Math.sin(e);return new cr(255*(t+n*(uw*i+Vg*a)),255*(t+n*(Yg*i+$d*a)),255*(t+n*(Oc*i)),this.opacity)}}));function zk(e,t,n,i,a){var l=e*e,c=l*e;return((1-3*e+3*l-c)*t+(4-6*l+3*c)*n+(1+3*e+3*l-3*c)*i+c*a)/6}function Lk(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],l=e[i+1],c=i>0?e[i-1]:2*a-l,f=i<t-1?e[i+2]:2*l-a;return zk((n-i/t)*t,c,a,l,f)}}const Vd=e=>()=>e;function cw(e,t){return function(n){return e+n*t}}function Fk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Rk(e,t){var n=t-e;return n?cw(e,n>180||n<-180?n-360*Math.round(n/360):n):Vd(isNaN(e)?t:e)}function jk(e){return(e=+e)==1?Yl:function(t,n){return n-t?Fk(t,n,e):Vd(isNaN(t)?n:t)}}function Yl(e,t){var n=t-e;return n?cw(e,n):Vd(isNaN(e)?t:e)}const fd=(function e(t){var n=jk(t);function i(a,l){var c=n((a=Pc(a)).r,(l=Pc(l)).r),f=n(a.g,l.g),d=n(a.b,l.b),h=Yl(a.opacity,l.opacity);return function(m){return a.r=c(m),a.g=f(m),a.b=d(m),a.opacity=h(m),a+""}}return i.gamma=e,i})(1);function Bk(e){return function(t){var n=t.length,i=new Array(n),a=new Array(n),l=new Array(n),c,f;for(c=0;c<n;++c)f=Pc(t[c]),i[c]=f.r||0,a[c]=f.g||0,l[c]=f.b||0;return i=e(i),a=e(a),l=e(l),f.opacity=1,function(d){return f.r=i(d),f.g=a(d),f.b=l(d),f+""}}}var Pk=Bk(Lk);function Ok(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(l){for(a=0;a<n;++a)i[a]=e[a]*(1-l)+t[a]*l;return i}}function Ik(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Hk(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),l=new Array(n),c;for(c=0;c<i;++c)a[c]=Yd(e[c],t[c]);for(;c<n;++c)l[c]=t[c];return function(f){for(c=0;c<i;++c)l[c]=a[c](f);return l}}function Gk(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Ai(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Uk(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Yd(e[a],t[a]):i[a]=t[a];return function(l){for(a in n)i[a]=n[a](l);return i}}var X0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p0=new RegExp(X0.source,"g");function Zk(e){return function(){return e}}function Kk(e){return function(t){return e(t)+""}}function fw(e,t){var n=X0.lastIndex=p0.lastIndex=0,i,a,l,c=-1,f=[],d=[];for(e=e+"",t=t+"";(i=X0.exec(e))&&(a=p0.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),f[c]?f[c]+=l:f[++c]=l),(i=i[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,d.push({i:c,x:Ai(i,a)})),n=p0.lastIndex;return n<t.length&&(l=t.slice(n),f[c]?f[c]+=l:f[++c]=l),f.length<2?d[0]?Kk(d[0].x):Zk(t):(t=d.length,function(h){for(var m=0,g;m<t;++m)f[(g=d[m]).i]=g.x(h);return f.join("")})}function Yd(e,t){var n=typeof t,i;return t==null||n==="boolean"?Vd(t):(n==="number"?Ai:n==="string"?(i=jo(t))?(t=i,fd):fw:t instanceof jo?fd:t instanceof Date?Gk:Ik(t)?Ok:Array.isArray(t)?Hk:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Uk:Ai)(e,t)}function hw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Gx=180/Math.PI,W0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dw(e,t,n,i,a,l){var c,f,d;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,d/=f),e*i<t*n&&(e=-e,t=-t,d=-d,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*Gx,skewX:Math.atan(d)*Gx,scaleX:c,scaleY:f}}var Sh;function qk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?W0:dw(t.a,t.b,t.c,t.d,t.e,t.f)}function $k(e){return e==null||(Sh||(Sh=document.createElementNS("http://www.w3.org/2000/svg","g")),Sh.setAttribute("transform",e),!(e=Sh.transform.baseVal.consolidate()))?W0:(e=e.matrix,dw(e.a,e.b,e.c,e.d,e.e,e.f))}function mw(e,t,n,i){function a(h){return h.length?h.pop()+" ":""}function l(h,m,g,_,x,D){if(h!==g||m!==_){var y=x.push("translate(",null,t,null,n);D.push({i:y-4,x:Ai(h,g)},{i:y-2,x:Ai(m,_)})}else(g||_)&&x.push("translate("+g+t+_+n)}function c(h,m,g,_){h!==m?(h-m>180?m+=360:m-h>180&&(h+=360),_.push({i:g.push(a(g)+"rotate(",null,i)-2,x:Ai(h,m)})):m&&g.push(a(g)+"rotate("+m+i)}function f(h,m,g,_){h!==m?_.push({i:g.push(a(g)+"skewX(",null,i)-2,x:Ai(h,m)}):m&&g.push(a(g)+"skewX("+m+i)}function d(h,m,g,_,x,D){if(h!==g||m!==_){var y=x.push(a(x)+"scale(",null,",",null,")");D.push({i:y-4,x:Ai(h,g)},{i:y-2,x:Ai(m,_)})}else(g!==1||_!==1)&&x.push(a(x)+"scale("+g+","+_+")")}return function(h,m){var g=[],_=[];return h=e(h),m=e(m),l(h.translateX,h.translateY,m.translateX,m.translateY,g,_),c(h.rotate,m.rotate,g,_),f(h.skewX,m.skewX,g,_),d(h.scaleX,h.scaleY,m.scaleX,m.scaleY,g,_),h=m=null,function(x){for(var D=-1,y=_.length,S;++D<y;)g[(S=_[D]).i]=S.x(x);return g.join("")}}}var Vk=mw(qk,"px, ","px)","deg)"),Yk=mw($k,", ",")",")");function pw(e){return(function t(n){n=+n;function i(a,l){var c=e((a=ta(a)).h,(l=ta(l)).h),f=Yl(a.s,l.s),d=Yl(a.l,l.l),h=Yl(a.opacity,l.opacity);return function(m){return a.h=c(m),a.s=f(m),a.l=d(Math.pow(m,n)),a.opacity=h(m),a+""}}return i.gamma=t,i})(1)}pw(Rk);var Xg=pw(Yl);function Xk(e){return function(){return e}}function Wk(e){return+e}var Ux=[0,1];function Bs(e){return e}function Q0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xk(isNaN(t)?NaN:.5)}function Qk(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Jk(e,t,n){var i=e[0],a=e[1],l=t[0],c=t[1];return a<i?(i=Q0(a,i),l=n(c,l)):(i=Q0(i,a),l=n(l,c)),function(f){return l(i(f))}}function eT(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),l=new Array(i),c=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<i;)a[c]=Q0(e[c],e[c+1]),l[c]=n(t[c],t[c+1]);return function(f){var d=X6(e,f,1,i)-1;return l[d](a[d](f))}}function tT(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function nT(){var e=Ux,t=Ux,n=Yd,i,a,l,c=Bs,f,d,h;function m(){var _=Math.min(e.length,t.length);return c!==Bs&&(c=Qk(e[0],e[_-1])),f=_>2?eT:Jk,d=h=null,g}function g(_){return _==null||isNaN(_=+_)?l:(d||(d=f(e.map(i),t,n)))(i(c(_)))}return g.invert=function(_){return c(a((h||(h=f(t,e.map(i),Ai)))(_)))},g.domain=function(_){return arguments.length?(e=Array.from(_,Wk),m()):e.slice()},g.range=function(_){return arguments.length?(t=Array.from(_),m()):t.slice()},g.rangeRound=function(_){return t=Array.from(_),n=hw,m()},g.clamp=function(_){return arguments.length?(c=_?!0:Bs,m()):c!==Bs},g.interpolate=function(_){return arguments.length?(n=_,m()):n},g.unknown=function(_){return arguments.length?(l=_,g):l},function(_,x){return i=_,a=x,m()}}function rT(){return nT()(Bs,Bs)}function iT(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ru(e){return e=hd(Math.abs(e)),e?e[1]:NaN}function aT(e,t){return function(n,i){for(var a=n.length,l=[],c=0,f=e[0],d=0;a>0&&f>0&&(d+f+1>i&&(f=Math.max(1,i-d)),l.push(n.substring(a-=f,a+f)),!((d+=f+1)>i));)f=e[c=(c+1)%e.length];return l.reverse().join(t)}}function sT(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var oT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dd(e){if(!(t=oT.exec(e)))throw new Error("invalid format: "+e);var t;return new Wg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dd.prototype=Wg.prototype;function Wg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Wg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lT(e){e:for(var t=e.length,n=1,i=-1,a;n<t;++n)switch(e[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var gw;function uT(e,t){var n=hd(e,t);if(!n)return e+"";var i=n[0],a=n[1],l=a-(gw=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=i.length;return l===c?i:l>c?i+new Array(l-c+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+hd(e,Math.max(0,t+l-1))[0]}function Zx(e,t){var n=hd(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const Kx={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:iT,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Zx(e*100,t),r:Zx,s:uT,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qx(e){return e}var $x=Array.prototype.map,Vx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function cT(e){var t=e.grouping===void 0||e.thousands===void 0?qx:aT($x.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?qx:sT($x.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(g){g=dd(g);var _=g.fill,x=g.align,D=g.sign,y=g.symbol,S=g.zero,w=g.width,A=g.comma,N=g.precision,z=g.trim,k=g.type;k==="n"?(A=!0,k="g"):Kx[k]||(N===void 0&&(N=12),z=!0,k="g"),(S||_==="0"&&x==="=")&&(S=!0,_="0",x="=");var M=y==="$"?n:y==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",B=y==="$"?i:/[%p]/.test(k)?c:"",P=Kx[k],R=/[defgprs%]/.test(k);N=N===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function H(U){var I=M,X=B,j,J,q;if(k==="c")X=P(U)+X,U="";else{U=+U;var ne=U<0||1/U<0;if(U=isNaN(U)?d:P(Math.abs(U),N),z&&(U=lT(U)),ne&&+U==0&&D!=="+"&&(ne=!1),I=(ne?D==="("?D:f:D==="-"||D==="("?"":D)+I,X=(k==="s"?Vx[8+gw/3]:"")+X+(ne&&D==="("?")":""),R){for(j=-1,J=U.length;++j<J;)if(q=U.charCodeAt(j),48>q||q>57){X=(q===46?a+U.slice(j+1):U.slice(j))+X,U=U.slice(0,j);break}}}A&&!S&&(U=t(U,1/0));var V=I.length+U.length+X.length,Q=V<w?new Array(w-V+1).join(_):"";switch(A&&S&&(U=t(Q+U,Q.length?w-X.length:1/0),Q=""),x){case"<":U=I+U+X+Q;break;case"=":U=I+Q+U+X;break;case"^":U=Q.slice(0,V=Q.length>>1)+I+U+X+Q.slice(V);break;default:U=Q+I+U+X;break}return l(U)}return H.toString=function(){return g+""},H}function m(g,_){var x=h((g=dd(g),g.type="f",g)),D=Math.max(-8,Math.min(8,Math.floor(ru(_)/3)))*3,y=Math.pow(10,-D),S=Vx[8+D/3];return function(w){return x(y*w)+S}}return{format:h,formatPrefix:m}}var Ch,vw,yw;fT({thousands:",",grouping:[3],currency:["$",""]});function fT(e){return Ch=cT(e),vw=Ch.format,yw=Ch.formatPrefix,Ch}function hT(e){return Math.max(0,-ru(Math.abs(e)))}function dT(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ru(t)/3)))*3-ru(Math.abs(e)))}function mT(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ru(t)-ru(e))+1}function pT(e,t,n,i){var a=nk(e,t,n),l;switch(i=dd(i??",f"),i.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(l=dT(a,c))&&(i.precision=l),yw(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=mT(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=hT(a))&&(i.precision=l-(i.type==="%")*2);break}}return vw(i)}function _w(e){var t=e.domain;return e.ticks=function(n){var i=t();return aw(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var a=t();return pT(a[0],a[a.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),a=0,l=i.length-1,c=i[a],f=i[l],d,h,m=10;for(f<c&&(h=c,c=f,f=h,h=a,a=l,l=h);m-- >0;){if(h=ud(c,f,n),h===d)return i[a]=c,i[l]=f,t(i);if(h>0)c=Math.floor(c/h)*h,f=Math.ceil(f/h)*h;else if(h<0)c=Math.ceil(c*h)/h,f=Math.floor(f*h)/h;else break;d=h}return e},e}function J0(){var e=rT();return e.copy=function(){return tT(e,J0())},gk.apply(e,arguments),_w(e)}function gT(){var e=0,t=1,n,i,a,l,c=Bs,f=!1,d;function h(g){return g==null||isNaN(g=+g)?d:c(a===0?.5:(g=(l(g)-n)*a,f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,n=l(e=+e),i=l(t=+t),a=n===i?0:1/(i-n),h):[e,t]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(_){var x,D;return arguments.length?([x,D]=_,c=g(x,D),h):[c(0),c(1)]}}return h.range=m(Yd),h.rangeRound=m(hw),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return l=g,n=g(e),i=g(t),a=n===i?0:1/(i-n),h}}function vT(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Xd(){var e=_w(gT()(Bs));return e.copy=function(){return vT(e,Xd())},vk.apply(e,arguments)}var yT=Math.PI,_T=yT*2,xT=Math.abs,Qg=Math.sqrt;function Mi(){}function md(e,t){e&&Xx.hasOwnProperty(e.type)&&Xx[e.type](e,t)}var Yx={Feature:function(e,t){md(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,a=n.length;++i<a;)md(n[i].geometry,t)}},Xx={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){eg(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)eg(n[i],t,0)},Polygon:function(e,t){Wx(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)Wx(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,a=n.length;++i<a;)md(n[i],t)}};function eg(e,t,n){var i=-1,a=e.length-n,l;for(t.lineStart();++i<a;)l=e[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function Wx(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)eg(e[n],t,1);t.polygonEnd()}function xc(e,t){e&&Yx.hasOwnProperty(e.type)?Yx[e.type](e,t):md(e,t)}const bT=e=>e;var g0=new tu,tg=new tu,xw,bw,ng,rg,Ra={point:Mi,lineStart:Mi,lineEnd:Mi,polygonStart:function(){Ra.lineStart=wT,Ra.lineEnd=ET},polygonEnd:function(){Ra.lineStart=Ra.lineEnd=Ra.point=Mi,g0.add(xT(tg)),tg=new tu},result:function(){var e=g0/2;return g0=new tu,e}};function wT(){Ra.point=DT}function DT(e,t){Ra.point=ww,xw=ng=e,bw=rg=t}function ww(e,t){tg.add(rg*e-ng*t),ng=e,rg=t}function ET(){ww(xw,bw)}var iu=1/0,pd=iu,Ic=-iu,gd=Ic,Qx={point:ST,lineStart:Mi,lineEnd:Mi,polygonStart:Mi,polygonEnd:Mi,result:function(){var e=[[iu,pd],[Ic,gd]];return Ic=gd=-(pd=iu=1/0),e}};function ST(e,t){e<iu&&(iu=e),e>Ic&&(Ic=e),t<pd&&(pd=t),t>gd&&(gd=t)}var ig=0,ag=0,Dc=0,vd=0,yd=0,ql=0,sg=0,og=0,Ec=0,Dw,Ew,Vi,Yi,di={point:Bo,lineStart:Jx,lineEnd:eb,polygonStart:function(){di.lineStart=NT,di.lineEnd=MT},polygonEnd:function(){di.point=Bo,di.lineStart=Jx,di.lineEnd=eb},result:function(){var e=Ec?[sg/Ec,og/Ec]:ql?[vd/ql,yd/ql]:Dc?[ig/Dc,ag/Dc]:[NaN,NaN];return ig=ag=Dc=vd=yd=ql=sg=og=Ec=0,e}};function Bo(e,t){ig+=e,ag+=t,++Dc}function Jx(){di.point=CT}function CT(e,t){di.point=AT,Bo(Vi=e,Yi=t)}function AT(e,t){var n=e-Vi,i=t-Yi,a=Qg(n*n+i*i);vd+=a*(Vi+e)/2,yd+=a*(Yi+t)/2,ql+=a,Bo(Vi=e,Yi=t)}function eb(){di.point=Bo}function NT(){di.point=kT}function MT(){Sw(Dw,Ew)}function kT(e,t){di.point=Sw,Bo(Dw=Vi=e,Ew=Yi=t)}function Sw(e,t){var n=e-Vi,i=t-Yi,a=Qg(n*n+i*i);vd+=a*(Vi+e)/2,yd+=a*(Yi+t)/2,ql+=a,a=Yi*e-Vi*t,sg+=a*(Vi+e),og+=a*(Yi+t),Ec+=a*3,Bo(Vi=e,Yi=t)}function Cw(e){this._context=e}Cw.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,_T);break}}},result:Mi};var lg=new tu,v0,Aw,Nw,Sc,Cc,Hc={point:Mi,lineStart:function(){Hc.point=TT},lineEnd:function(){v0&&Mw(Aw,Nw),Hc.point=Mi},polygonStart:function(){v0=!0},polygonEnd:function(){v0=null},result:function(){var e=+lg;return lg=new tu,e}};function TT(e,t){Hc.point=Mw,Aw=Sc=e,Nw=Cc=t}function Mw(e,t){Sc-=e,Cc-=t,lg.add(Qg(Sc*Sc+Cc*Cc)),Sc=e,Cc=t}let tb,_d,nb,rb;class ib{constructor(t){this._append=t==null?kw:zT(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==nb||this._append!==_d){const i=this._radius,a=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,nb=i,_d=this._append,rb=this._,this._=a}this._+=rb;break}}}result(){const t=this._;return this._="",t.length?t:null}}function kw(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function zT(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return kw;if(t!==tb){const n=10**t;tb=t,_d=function(a){let l=1;this._+=a[0];for(const c=a.length;l<c;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}return _d}function Tw(e,t){let n=3,i=4.5,a,l;function c(f){return f&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),xc(f,a(l))),l.result()}return c.area=function(f){return xc(f,a(Ra)),Ra.result()},c.measure=function(f){return xc(f,a(Hc)),Hc.result()},c.bounds=function(f){return xc(f,a(Qx)),Qx.result()},c.centroid=function(f){return xc(f,a(di)),di.result()},c.projection=function(f){return arguments.length?(a=f==null?(e=null,bT):(e=f).stream,c):e},c.context=function(f){return arguments.length?(l=f==null?(t=null,new ib(n)):new Cw(t=f),typeof i!="function"&&l.pointRadius(i),c):t},c.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(l.pointRadius(+f),+f),c):i},c.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const d=Math.floor(f);if(!(d>=0))throw new RangeError(`invalid digits: ${f}`);n=d}return t===null&&(l=new ib(n)),c},c.projection(e).digits(n).context(t)}function zw(e){return{stream:LT(e)}}function LT(e){return function(t){var n=new ug;for(var i in e)n[i]=e[i];return n.stream=t,n}}function ug(){}ug.prototype={constructor:ug,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function FT(e){return e}var RT=2,ab=1e-6;function jT(e){return"translate(0,"+e+")"}function BT(e){return t=>+e(t)}function PT(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function OT(){return!this.__axis}function IT(e,t){var n=[],i=null,a=null,l=6,c=6,f=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,h=1,m="x",g=jT;function _(x){var D=i??(t.ticks?t.ticks.apply(t,n):t.domain()),y=a??(t.tickFormat?t.tickFormat.apply(t,n):FT),S=Math.max(l,0)+f,w=t.range(),A=+w[0]+d,N=+w[w.length-1]+d,z=(t.bandwidth?PT:BT)(t.copy(),d),k=x.selection?x.selection():x,M=k.selectAll(".domain").data([null]),B=k.selectAll(".tick").data(D,t).order(),P=B.exit(),R=B.enter().append("g").attr("class","tick"),H=B.select("line"),U=B.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(R),H=H.merge(R.append("line").attr("stroke","currentColor").attr(m+"2",h*l)),U=U.merge(R.append("text").attr("fill","currentColor").attr(m,h*S).attr("dy","0.32em")),x!==k&&(M=M.transition(x),B=B.transition(x),H=H.transition(x),U=U.transition(x),P=P.transition(x).attr("opacity",ab).attr("transform",function(I){return isFinite(I=z(I))?g(I+d):this.getAttribute("transform")}),R.attr("opacity",ab).attr("transform",function(I){var X=this.parentNode.__axis;return g((X&&isFinite(X=X(I))?X:z(I))+d)})),P.remove(),M.attr("d",c?"M"+h*c+","+A+"H"+d+"V"+N+"H"+h*c:"M"+d+","+A+"V"+N),B.attr("opacity",1).attr("transform",function(I){return g(z(I)+d)}),H.attr(m+"2",h*l),U.attr(m,h*S).text(y),k.filter(OT).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","start"),k.each(function(){this.__axis=z})}return _.scale=function(x){return arguments.length?(t=x,_):t},_.ticks=function(){return n=Array.from(arguments),_},_.tickArguments=function(x){return arguments.length?(n=x==null?[]:Array.from(x),_):n.slice()},_.tickValues=function(x){return arguments.length?(i=x==null?null:Array.from(x),_):i&&i.slice()},_.tickFormat=function(x){return arguments.length?(a=x,_):a},_.tickSize=function(x){return arguments.length?(l=c=+x,_):l},_.tickSizeInner=function(x){return arguments.length?(l=+x,_):l},_.tickSizeOuter=function(x){return arguments.length?(c=+x,_):c},_.tickPadding=function(x){return arguments.length?(f=+x,_):f},_.offset=function(x){return arguments.length?(d=+x,_):d},_}function sb(e){return IT(RT,e)}var HT={value:()=>{}};function Lw(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ih(n)}function Ih(e){this._=e}function GT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ih.prototype=Lw.prototype={constructor:Ih,on:function(e,t){var n=this._,i=GT(e+"",n),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(e=i[l]).type)&&(a=UT(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=i[l]).type)n[a]=ob(n[a],e.name,t);else if(t==null)for(a in n)n[a]=ob(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ih(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],i=0,a=l.length;i<a;++i)l[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,l=i.length;a<l;++a)i[a].value.apply(t,n)}};function UT(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function ob(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=HT,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var cg="http://www.w3.org/1999/xhtml";const lb={svg:"http://www.w3.org/2000/svg",xhtml:cg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),lb.hasOwnProperty(t)?{space:lb[t],local:e}:e}function ZT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cg&&t.documentElement.namespaceURI===cg?t.createElement(e):t.createElementNS(n,e)}}function KT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fw(e){var t=Wd(e);return(t.local?KT:ZT)(t)}function qT(){}function Jg(e){return e==null?qT:function(){return this.querySelector(e)}}function $T(e){typeof e!="function"&&(e=Jg(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,f=i[a]=new Array(c),d,h,m=0;m<c;++m)(d=l[m])&&(h=e.call(d,d.__data__,m,l))&&("__data__"in d&&(h.__data__=d.__data__),f[m]=h);return new $r(i,this._parents)}function VT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function YT(){return[]}function Rw(e){return e==null?YT:function(){return this.querySelectorAll(e)}}function XT(e){return function(){return VT(e.apply(this,arguments))}}function WT(e){typeof e=="function"?e=XT(e):e=Rw(e);for(var t=this._groups,n=t.length,i=[],a=[],l=0;l<n;++l)for(var c=t[l],f=c.length,d,h=0;h<f;++h)(d=c[h])&&(i.push(e.call(d,d.__data__,h,c)),a.push(d));return new $r(i,a)}function jw(e){return function(){return this.matches(e)}}function Bw(e){return function(t){return t.matches(e)}}var QT=Array.prototype.find;function JT(e){return function(){return QT.call(this.children,e)}}function ez(){return this.firstElementChild}function tz(e){return this.select(e==null?ez:JT(typeof e=="function"?e:Bw(e)))}var nz=Array.prototype.filter;function rz(){return Array.from(this.children)}function iz(e){return function(){return nz.call(this.children,e)}}function az(e){return this.selectAll(e==null?rz:iz(typeof e=="function"?e:Bw(e)))}function sz(e){typeof e!="function"&&(e=jw(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,f=i[a]=[],d,h=0;h<c;++h)(d=l[h])&&e.call(d,d.__data__,h,l)&&f.push(d);return new $r(i,this._parents)}function Pw(e){return new Array(e.length)}function oz(){return new $r(this._enter||this._groups.map(Pw),this._parents)}function xd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xd.prototype={constructor:xd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function lz(e){return function(){return e}}function uz(e,t,n,i,a,l){for(var c=0,f,d=t.length,h=l.length;c<h;++c)(f=t[c])?(f.__data__=l[c],i[c]=f):n[c]=new xd(e,l[c]);for(;c<d;++c)(f=t[c])&&(a[c]=f)}function cz(e,t,n,i,a,l,c){var f,d,h=new Map,m=t.length,g=l.length,_=new Array(m),x;for(f=0;f<m;++f)(d=t[f])&&(_[f]=x=c.call(d,d.__data__,f,t)+"",h.has(x)?a[f]=d:h.set(x,d));for(f=0;f<g;++f)x=c.call(e,l[f],f,l)+"",(d=h.get(x))?(i[f]=d,d.__data__=l[f],h.delete(x)):n[f]=new xd(e,l[f]);for(f=0;f<m;++f)(d=t[f])&&h.get(_[f])===d&&(a[f]=d)}function fz(e){return e.__data__}function hz(e,t){if(!arguments.length)return Array.from(this,fz);var n=t?cz:uz,i=this._parents,a=this._groups;typeof e!="function"&&(e=lz(e));for(var l=a.length,c=new Array(l),f=new Array(l),d=new Array(l),h=0;h<l;++h){var m=i[h],g=a[h],_=g.length,x=dz(e.call(m,m&&m.__data__,h,i)),D=x.length,y=f[h]=new Array(D),S=c[h]=new Array(D),w=d[h]=new Array(_);n(m,g,y,S,w,x,t);for(var A=0,N=0,z,k;A<D;++A)if(z=y[A]){for(A>=N&&(N=A+1);!(k=S[N])&&++N<D;);z._next=k||null}}return c=new $r(c,i),c._enter=f,c._exit=d,c}function dz(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mz(){return new $r(this._exit||this._groups.map(Pw),this._parents)}function pz(e,t,n){var i=this.enter(),a=this,l=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function gz(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,l=i.length,c=Math.min(a,l),f=new Array(a),d=0;d<c;++d)for(var h=n[d],m=i[d],g=h.length,_=f[d]=new Array(g),x,D=0;D<g;++D)(x=h[D]||m[D])&&(_[D]=x);for(;d<a;++d)f[d]=n[d];return new $r(f,this._parents)}function vz(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function yz(e){e||(e=_z);function t(g,_){return g&&_?e(g.__data__,_.__data__):!g-!_}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var c=n[l],f=c.length,d=a[l]=new Array(f),h,m=0;m<f;++m)(h=c[m])&&(d[m]=h);d.sort(t)}return new $r(a,this._parents).order()}function _z(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xz(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function bz(){return Array.from(this)}function wz(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function Dz(){let e=0;for(const t of this)++e;return e}function Ez(){return!this.node()}function Sz(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],l=0,c=a.length,f;l<c;++l)(f=a[l])&&e.call(f,f.__data__,l,a);return this}function Cz(e){return function(){this.removeAttribute(e)}}function Az(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nz(e,t){return function(){this.setAttribute(e,t)}}function Mz(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function kz(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Tz(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zz(e,t){var n=Wd(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Az:Cz:typeof t=="function"?n.local?Tz:kz:n.local?Mz:Nz)(n,t))}function Ow(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lz(e){return function(){this.style.removeProperty(e)}}function Fz(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Rz(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function jz(e,t,n){return arguments.length>1?this.each((t==null?Lz:typeof t=="function"?Rz:Fz)(e,t,n??"")):au(this.node(),e)}function au(e,t){return e.style.getPropertyValue(t)||Ow(e).getComputedStyle(e,null).getPropertyValue(t)}function Bz(e){return function(){delete this[e]}}function Pz(e,t){return function(){this[e]=t}}function Oz(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Iz(e,t){return arguments.length>1?this.each((t==null?Bz:typeof t=="function"?Oz:Pz)(e,t)):this.node()[e]}function Iw(e){return e.trim().split(/^|\s+/)}function ev(e){return e.classList||new Hw(e)}function Hw(e){this._node=e,this._names=Iw(e.getAttribute("class")||"")}Hw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Gw(e,t){for(var n=ev(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function Uw(e,t){for(var n=ev(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function Hz(e){return function(){Gw(this,e)}}function Gz(e){return function(){Uw(this,e)}}function Uz(e,t){return function(){(t.apply(this,arguments)?Gw:Uw)(this,e)}}function Zz(e,t){var n=Iw(e+"");if(arguments.length<2){for(var i=ev(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Uz:t?Hz:Gz)(n,t))}function Kz(){this.textContent=""}function qz(e){return function(){this.textContent=e}}function $z(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Vz(e){return arguments.length?this.each(e==null?Kz:(typeof e=="function"?$z:qz)(e)):this.node().textContent}function Yz(){this.innerHTML=""}function Xz(e){return function(){this.innerHTML=e}}function Wz(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qz(e){return arguments.length?this.each(e==null?Yz:(typeof e=="function"?Wz:Xz)(e)):this.node().innerHTML}function Jz(){this.nextSibling&&this.parentNode.appendChild(this)}function e9(){return this.each(Jz)}function t9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n9(){return this.each(t9)}function r9(e){var t=typeof e=="function"?e:Fw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function i9(){return null}function a9(e,t){var n=typeof e=="function"?e:Fw(e),i=t==null?i9:typeof t=="function"?t:Jg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function s9(){var e=this.parentNode;e&&e.removeChild(this)}function o9(){return this.each(s9)}function l9(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function u9(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function c9(e){return this.select(e?u9:l9)}function f9(e){return arguments.length?this.property("__data__",e):this.node().__data__}function h9(e){return function(t){e.call(this,t,this.__data__)}}function d9(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function m9(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function p9(e,t,n){return function(){var i=this.__on,a,l=h9(t);if(i){for(var c=0,f=i.length;c<f;++c)if((a=i[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},i?i.push(a):this.__on=[a]}}function g9(e,t,n){var i=d9(e+""),a,l=i.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var d=0,h=f.length,m;d<h;++d)for(a=0,m=f[d];a<l;++a)if((c=i[a]).type===m.type&&c.name===m.name)return m.value}return}for(f=t?p9:m9,a=0;a<l;++a)this.each(f(i[a],t,n));return this}function Zw(e,t,n){var i=Ow(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function v9(e,t){return function(){return Zw(this,e,t)}}function y9(e,t){return function(){return Zw(this,e,t.apply(this,arguments))}}function _9(e,t){return this.each((typeof t=="function"?y9:v9)(e,t))}function*x9(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var Kw=[null];function $r(e,t){this._groups=e,this._parents=t}function Vc(){return new $r([[document.documentElement]],Kw)}function b9(){return this}$r.prototype=Vc.prototype={constructor:$r,select:$T,selectAll:WT,selectChild:tz,selectChildren:az,filter:sz,data:hz,enter:oz,exit:mz,join:pz,merge:gz,selection:b9,order:vz,sort:yz,call:xz,nodes:bz,node:wz,size:Dz,empty:Ez,each:Sz,attr:zz,style:jz,property:Iz,classed:Zz,text:Vz,html:Qz,raise:e9,lower:n9,append:r9,insert:a9,remove:o9,clone:c9,datum:f9,on:g9,dispatch:_9,[Symbol.iterator]:x9};function w9(e){return typeof e=="string"?new $r([[document.querySelector(e)]],[document.documentElement]):new $r([[e]],Kw)}var su=0,Ac=0,bc=0,qw=1e3,bd,Nc,wd=0,Po=0,Qd=0,Gc=typeof performance=="object"&&performance.now?performance:Date,$w=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tv(){return Po||($w(D9),Po=Gc.now()+Qd)}function D9(){Po=0}function Dd(){this._call=this._time=this._next=null}Dd.prototype=Vw.prototype={constructor:Dd,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?tv():+n)+(t==null?0:+t),!this._next&&Nc!==this&&(Nc?Nc._next=this:bd=this,Nc=this),this._call=e,this._time=n,fg()},stop:function(){this._call&&(this._call=null,this._time=1/0,fg())}};function Vw(e,t,n){var i=new Dd;return i.restart(e,t,n),i}function E9(){tv(),++su;for(var e=bd,t;e;)(t=Po-e._time)>=0&&e._call.call(void 0,t),e=e._next;--su}function ub(){Po=(wd=Gc.now())+Qd,su=Ac=0;try{E9()}finally{su=0,C9(),Po=0}}function S9(){var e=Gc.now(),t=e-wd;t>qw&&(Qd-=t,wd=e)}function C9(){for(var e,t=bd,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:bd=n);Nc=e,fg(i)}function fg(e){if(!su){Ac&&(Ac=clearTimeout(Ac));var t=e-Po;t>24?(e<1/0&&(Ac=setTimeout(ub,e-Gc.now()-Qd)),bc&&(bc=clearInterval(bc))):(bc||(wd=Gc.now(),bc=setInterval(S9,qw)),su=1,$w(ub))}}function cb(e,t,n){var i=new Dd;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var A9=Lw("start","end","cancel","interrupt"),N9=[],Yw=0,fb=1,hg=2,Hh=3,hb=4,dg=5,Gh=6;function Jd(e,t,n,i,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;M9(e,n,{name:t,index:i,group:a,on:A9,tween:N9,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Yw})}function nv(e,t){var n=zi(e,t);if(n.state>Yw)throw new Error("too late; already scheduled");return n}function ra(e,t){var n=zi(e,t);if(n.state>Hh)throw new Error("too late; already running");return n}function zi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function M9(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=Vw(l,0,n.time);function l(h){n.state=fb,n.timer.restart(c,n.delay,n.time),n.delay<=h&&c(h-n.delay)}function c(h){var m,g,_,x;if(n.state!==fb)return d();for(m in i)if(x=i[m],x.name===n.name){if(x.state===Hh)return cb(c);x.state===hb?(x.state=Gh,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete i[m]):+m<t&&(x.state=Gh,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete i[m])}if(cb(function(){n.state===Hh&&(n.state=hb,n.timer.restart(f,n.delay,n.time),f(h))}),n.state=hg,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hg){for(n.state=Hh,a=new Array(_=n.tween.length),m=0,g=-1;m<_;++m)(x=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++g]=x);a.length=g+1}}function f(h){for(var m=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(d),n.state=dg,1),g=-1,_=a.length;++g<_;)a[g].call(e,m);n.state===dg&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Gh,n.timer.stop(),delete i[t];for(var h in i)return;delete e.__transition}}function k9(e,t){var n=e.__transition,i,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){l=!1;continue}a=i.state>hg&&i.state<dg,i.state=Gh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}l&&delete e.__transition}}function T9(e){return this.each(function(){k9(this,e)})}function z9(e,t){var n,i;return function(){var a=ra(this,e),l=a.tween;if(l!==n){i=n=l;for(var c=0,f=i.length;c<f;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function L9(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=ra(this,e),c=l.tween;if(c!==i){a=(i=c).slice();for(var f={name:t,value:n},d=0,h=a.length;d<h;++d)if(a[d].name===t){a[d]=f;break}d===h&&a.push(f)}l.tween=a}}function F9(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=zi(this.node(),n).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===e)return c.value;return null}return this.each((t==null?z9:L9)(n,e,t))}function rv(e,t,n){var i=e._id;return e.each(function(){var a=ra(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return zi(a,i).value[t]}}function Xw(e,t){var n;return(typeof t=="number"?Ai:t instanceof jo?fd:(n=jo(t))?(t=n,fd):fw)(e,t)}function R9(e){return function(){this.removeAttribute(e)}}function j9(e){return function(){this.removeAttributeNS(e.space,e.local)}}function B9(e,t,n){var i,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===i?l:l=t(i=c,n)}}function P9(e,t,n){var i,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===i?l:l=t(i=c,n)}}function O9(e,t,n){var i,a,l;return function(){var c,f=n(this),d;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),d=f+"",c===d?null:c===i&&d===a?l:(a=d,l=t(i=c,f)))}}function I9(e,t,n){var i,a,l;return function(){var c,f=n(this),d;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),d=f+"",c===d?null:c===i&&d===a?l:(a=d,l=t(i=c,f)))}}function H9(e,t){var n=Wd(e),i=n==="transform"?Yk:Xw;return this.attrTween(e,typeof t=="function"?(n.local?I9:O9)(n,i,rv(this,"attr."+e,t)):t==null?(n.local?j9:R9)(n):(n.local?P9:B9)(n,i,t))}function G9(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function U9(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Z9(e,t){var n,i;function a(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&U9(e,l)),n}return a._value=t,a}function K9(e,t){var n,i;function a(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&G9(e,l)),n}return a._value=t,a}function q9(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Wd(e);return this.tween(n,(i.local?Z9:K9)(i,t))}function $9(e,t){return function(){nv(this,e).delay=+t.apply(this,arguments)}}function V9(e,t){return t=+t,function(){nv(this,e).delay=t}}function Y9(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$9:V9)(t,e)):zi(this.node(),t).delay}function X9(e,t){return function(){ra(this,e).duration=+t.apply(this,arguments)}}function W9(e,t){return t=+t,function(){ra(this,e).duration=t}}function Q9(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?X9:W9)(t,e)):zi(this.node(),t).duration}function J9(e,t){if(typeof t!="function")throw new Error;return function(){ra(this,e).ease=t}}function eL(e){var t=this._id;return arguments.length?this.each(J9(t,e)):zi(this.node(),t).ease}function tL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ra(this,e).ease=n}}function nL(e){if(typeof e!="function")throw new Error;return this.each(tL(this._id,e))}function rL(e){typeof e!="function"&&(e=jw(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,f=i[a]=[],d,h=0;h<c;++h)(d=l[h])&&e.call(d,d.__data__,h,l)&&f.push(d);return new Pa(i,this._parents,this._name,this._id)}function iL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,l=Math.min(i,a),c=new Array(i),f=0;f<l;++f)for(var d=t[f],h=n[f],m=d.length,g=c[f]=new Array(m),_,x=0;x<m;++x)(_=d[x]||h[x])&&(g[x]=_);for(;f<i;++f)c[f]=t[f];return new Pa(c,this._parents,this._name,this._id)}function aL(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sL(e,t,n){var i,a,l=aL(t)?nv:ra;return function(){var c=l(this,e),f=c.on;f!==i&&(a=(i=f).copy()).on(t,n),c.on=a}}function oL(e,t){var n=this._id;return arguments.length<2?zi(this.node(),n).on.on(e):this.each(sL(n,e,t))}function lL(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uL(){return this.on("end.remove",lL(this._id))}function cL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Jg(e));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var f=i[c],d=f.length,h=l[c]=new Array(d),m,g,_=0;_<d;++_)(m=f[_])&&(g=e.call(m,m.__data__,_,f))&&("__data__"in m&&(g.__data__=m.__data__),h[_]=g,Jd(h[_],t,n,_,h,zi(m,n)));return new Pa(l,this._parents,t,n)}function fL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rw(e));for(var i=this._groups,a=i.length,l=[],c=[],f=0;f<a;++f)for(var d=i[f],h=d.length,m,g=0;g<h;++g)if(m=d[g]){for(var _=e.call(m,m.__data__,g,d),x,D=zi(m,n),y=0,S=_.length;y<S;++y)(x=_[y])&&Jd(x,t,n,y,_,D);l.push(_),c.push(m)}return new Pa(l,c,t,n)}var hL=Vc.prototype.constructor;function dL(){return new hL(this._groups,this._parents)}function mL(e,t){var n,i,a;return function(){var l=au(this,e),c=(this.style.removeProperty(e),au(this,e));return l===c?null:l===n&&c===i?a:a=t(n=l,i=c)}}function Ww(e){return function(){this.style.removeProperty(e)}}function pL(e,t,n){var i,a=n+"",l;return function(){var c=au(this,e);return c===a?null:c===i?l:l=t(i=c,n)}}function gL(e,t,n){var i,a,l;return function(){var c=au(this,e),f=n(this),d=f+"";return f==null&&(d=f=(this.style.removeProperty(e),au(this,e))),c===d?null:c===i&&d===a?l:(a=d,l=t(i=c,f))}}function vL(e,t){var n,i,a,l="style."+t,c="end."+l,f;return function(){var d=ra(this,e),h=d.on,m=d.value[l]==null?f||(f=Ww(t)):void 0;(h!==n||a!==m)&&(i=(n=h).copy()).on(c,a=m),d.on=i}}function yL(e,t,n){var i=(e+="")=="transform"?Vk:Xw;return t==null?this.styleTween(e,mL(e,i)).on("end.style."+e,Ww(e)):typeof t=="function"?this.styleTween(e,gL(e,i,rv(this,"style."+e,t))).each(vL(this._id,e)):this.styleTween(e,pL(e,i,t),n).on("end.style."+e,null)}function _L(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function xL(e,t,n){var i,a;function l(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&_L(e,c,n)),i}return l._value=t,l}function bL(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,xL(e,t,n??""))}function wL(e){return function(){this.textContent=e}}function DL(e){return function(){var t=e(this);this.textContent=t??""}}function EL(e){return this.tween("text",typeof e=="function"?DL(rv(this,"text",e)):wL(e==null?"":e+""))}function SL(e){return function(t){this.textContent=e.call(this,t)}}function CL(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&SL(a)),t}return i._value=e,i}function AL(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,CL(e))}function NL(){for(var e=this._name,t=this._id,n=Qw(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],f=c.length,d,h=0;h<f;++h)if(d=c[h]){var m=zi(d,t);Jd(d,e,n,h,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Pa(i,this._parents,e,n)}function ML(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(l,c){var f={value:c},d={value:function(){--a===0&&l()}};n.each(function(){var h=ra(this,i),m=h.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(d)),h.on=t}),a===0&&l()})}var kL=0;function Pa(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Qw(){return++kL}var Fa=Vc.prototype;Pa.prototype={constructor:Pa,select:cL,selectAll:fL,selectChild:Fa.selectChild,selectChildren:Fa.selectChildren,filter:rL,merge:iL,selection:dL,transition:NL,call:Fa.call,nodes:Fa.nodes,node:Fa.node,size:Fa.size,empty:Fa.empty,each:Fa.each,on:oL,attr:H9,attrTween:q9,style:yL,styleTween:bL,text:EL,textTween:AL,remove:uL,tween:F9,delay:Y9,duration:Q9,ease:eL,easeVarying:nL,end:ML,[Symbol.iterator]:Fa[Symbol.iterator]};function TL(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zL={time:null,delay:0,duration:250,ease:TL};function LL(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function FL(e){var t,n;e instanceof Pa?(t=e._id,e=e._name):(t=Qw(),(n=zL).time=tv(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],f=c.length,d,h=0;h<f;++h)(d=c[h])&&Jd(d,e,t,h,c,n||LL(d,t));return new Pa(i,this._parents,e,t)}Vc.prototype.interrupt=T9;Vc.prototype.transition=FL;function ia(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const pu=e=>Pk(e[e.length-1]);var RL=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ia);const mg=pu(RL);var jL=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ia);const Jw=pu(jL);var BL=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ia);const PL=pu(BL);var OL=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ia);const IL=pu(OL);var HL=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ia);const GL=pu(HL);var UL=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ia);const ZL=pu(UL),KL=Xg(ta(300,.5,0),ta(-240,.5,1));var qL=Xg(ta(-100,.75,.35),ta(80,1.5,.8)),$L=Xg(ta(260,.75,.35),ta(80,1.5,.8)),Ah=ta();function VL(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ah.h=360*e-100,Ah.s=1.5-1.5*t,Ah.l=.8-.9*t,Ah+""}var Nh=Pc(),YL=Math.PI/3,XL=Math.PI*2/3;function WL(e){var t;return e=(.5-e)*Math.PI,Nh.r=255*(t=Math.sin(e))*t,Nh.g=255*(t=Math.sin(e+YL))*t,Nh.b=255*(t=Math.sin(e+XL))*t,Nh+""}function em(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const pg=em(ia("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var QL=em(ia("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),gg=em(ia("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),vg=em(ia("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Mc(e,t,n){this.k=e,this.x=t,this.y=n}Mc.prototype={constructor:Mc,scale:function(e){return e===1?this:new Mc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Mc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Mc.prototype;const eD=({minValue:e,maxValue:t,colorScheme:n,title:i,unit:a="",width:l=100,height:c=200,position:f="bottomleft",customIntervals:d,intervalLabels:h})=>{const m=W.useRef(null);return W.useEffect(()=>{if(!m.current)return;const g=w9(m.current);g.selectAll("*").remove();const _={top:30,right:60,bottom:30,left:15},x=l-_.left-_.right,D=c-_.top-_.bottom,y=g.append("g").attr("transform",`translate(${_.left},${_.top})`);y.append("text").attr("x",x/2).attr("y",-10).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").text(i);const S=Xd(n).domain([e,t]);if(d&&d.length>0){const w=D/d.length;d.forEach((A,N)=>{const z=N*w;y.append("rect").attr("x",0).attr("y",z).attr("width",x).attr("height",w).style("fill",S(A)).style("stroke","#ccc").style("stroke-width",.5)}),y.append("rect").attr("x",0).attr("y",0).attr("width",x).attr("height",D).style("fill","none").style("stroke","#ccc").style("stroke-width",1)}else{const w=`legend-gradient-${Date.now()}`,N=g.append("defs").append("linearGradient").attr("id",w).attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%"),z=20;for(let k=0;k<=z;k++){const M=k/z,B=e+M*(t-e);N.append("stop").attr("offset",`${M*100}%`).attr("stop-color",S(B))}y.append("rect").attr("x",0).attr("y",0).attr("width",x).attr("height",D).style("fill",`url(#${w})`).style("stroke","#ccc").style("stroke-width",1)}if(d&&h){const w=D/d.length,A=[];for(let z=0;z<=d.length;z++)A.push(z*w);const N=sb(J0().domain([0,1]).range([D,0])).tickValues(A.map(z=>1-z/D)).tickFormat((z,k)=>k<h.length?h[k]:"");y.append("g").attr("transform",`translate(${x}, 0)`).call(N).style("font-size","10px")}else{const w=J0().domain([e,t]).range([D,0]),A=sb(w).ticks(5).tickFormat(N=>{const z=Number(N);return a?`${z.toFixed(1)}${a}`:z.toFixed(1)});y.append("g").attr("transform",`translate(${x}, 0)`).call(A).style("font-size","10px")}},[e,t,n,i,a,l,c,d,h]),b.jsx("div",{className:`leaflet-control leaflet-control-legend-d3 legend-d3-${f}`,style:{position:"absolute",[f.includes("bottom")?"bottom":"top"]:"10px",[f.includes("left")?"left":"right"]:"10px",backgroundColor:"white",padding:"5px",borderRadius:"5px",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",zIndex:1e3,pointerEvents:"none"},children:b.jsx("svg",{ref:m,width:l,height:c,style:{display:"block"}})})};function An(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function db(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tD(...e){return t=>{let n=!1;const i=e.map(a=>{const l=db(a,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<i.length;a++){const l=i[a];typeof l=="function"?l():db(e[a],null)}}}}function kr(...e){return W.useCallback(tD(...e),e)}function JL(e,t){const n=W.createContext(t),i=l=>{const{children:c,...f}=l,d=W.useMemo(()=>f,Object.values(f));return b.jsx(n.Provider,{value:d,children:c})};i.displayName=e+"Provider";function a(l){const c=W.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[i,a]}function gu(e,t=[]){let n=[];function i(l,c){const f=W.createContext(c),d=n.length;n=[...n,c];const h=g=>{const{scope:_,children:x,...D}=g,y=_?.[e]?.[d]||f,S=W.useMemo(()=>D,Object.values(D));return b.jsx(y.Provider,{value:S,children:x})};h.displayName=l+"Provider";function m(g,_){const x=_?.[e]?.[d]||f,D=W.useContext(x);if(D)return D;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[h,m]}const a=()=>{const l=n.map(c=>W.createContext(c));return function(f){const d=f?.[e]||l;return W.useMemo(()=>({[`__scope${e}`]:{...f,[e]:d}}),[f,d])}};return a.scopeName=e,[i,e7(a,...t)]}function e7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const c=i.reduce((f,{useScope:d,scopeName:h})=>{const g=d(l)[`__scope${h}`];return{...f,...g}},{});return W.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}var ou=globalThis?.document?W.useLayoutEffect:()=>{},t7=Bb[" useId ".trim().toString()]||(()=>{}),n7=0;function zc(e){const[t,n]=W.useState(t7());return ou(()=>{n(i=>i??String(n7++))},[e]),e||(t?`radix-${t}`:"")}var r7=Bb[" useInsertionEffect ".trim().toString()]||ou;function tm({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[a,l,c]=i7({defaultProp:t,onChange:n}),f=e!==void 0,d=f?e:a;{const m=W.useRef(e!==void 0);W.useEffect(()=>{const g=m.current;g!==f&&console.warn(`${i} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=f},[f,i])}const h=W.useCallback(m=>{if(f){const g=a7(m)?m(e):m;g!==e&&c.current?.(g)}else l(m)},[f,e,l,c]);return[d,h]}function i7({defaultProp:e,onChange:t}){const[n,i]=W.useState(e),a=W.useRef(n),l=W.useRef(t);return r7(()=>{l.current=t},[t]),W.useEffect(()=>{a.current!==n&&(l.current?.(n),a.current=n)},[n,a]),[n,i,l]}function a7(e){return typeof e=="function"}function Ed(e){const t=s7(e),n=W.forwardRef((i,a)=>{const{children:l,...c}=i,f=W.Children.toArray(l),d=f.find(l7);if(d){const h=d.props.children,m=f.map(g=>g===d?W.Children.count(h)>1?W.Children.only(null):W.isValidElement(h)?h.props.children:null:g);return b.jsx(t,{...c,ref:a,children:W.isValidElement(h)?W.cloneElement(h,void 0,m):null})}return b.jsx(t,{...c,ref:a,children:l})});return n.displayName=`${e}.Slot`,n}function s7(e){const t=W.forwardRef((n,i)=>{const{children:a,...l}=n;if(W.isValidElement(a)){const c=c7(a),f=u7(l,a.props);return a.type!==W.Fragment&&(f.ref=i?tD(i,c):c),W.cloneElement(a,f)}return W.Children.count(a)>1?W.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nD=Symbol("radix.slottable");function o7(e){const t=({children:n})=>b.jsx(b.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=nD,t}function l7(e){return W.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nD}function u7(e,t){const n={...t};for(const i in t){const a=e[i],l=t[i];/^on[A-Z]/.test(i)?a&&l?n[i]=(...f)=>{const d=l(...f);return a(...f),d}:a&&(n[i]=a):i==="style"?n[i]={...a,...l}:i==="className"&&(n[i]=[a,l].filter(Boolean).join(" "))}return{...e,...n}}function c7(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var f7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zn=f7.reduce((e,t)=>{const n=Ed(`Primitive.${t}`),i=W.forwardRef((a,l)=>{const{asChild:c,...f}=a,d=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(d,{...f,ref:l})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function h7(e,t){e&&Eg.flushSync(()=>e.dispatchEvent(t))}function lu(e){const t=W.useRef(e);return W.useEffect(()=>{t.current=e}),W.useMemo(()=>(...n)=>t.current?.(...n),[])}function d7(e,t=globalThis?.document){const n=lu(e);W.useEffect(()=>{const i=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var m7="DismissableLayer",yg="dismissableLayer.update",p7="dismissableLayer.pointerDownOutside",g7="dismissableLayer.focusOutside",mb,rD=W.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),iD=W.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:c,onDismiss:f,...d}=e,h=W.useContext(rD),[m,g]=W.useState(null),_=m?.ownerDocument??globalThis?.document,[,x]=W.useState({}),D=kr(t,B=>g(B)),y=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(S),A=m?y.indexOf(m):-1,N=h.layersWithOutsidePointerEventsDisabled.size>0,z=A>=w,k=_7(B=>{const P=B.target,R=[...h.branches].some(H=>H.contains(P));!z||R||(a?.(B),c?.(B),B.defaultPrevented||f?.())},_),M=x7(B=>{const P=B.target;[...h.branches].some(H=>H.contains(P))||(l?.(B),c?.(B),B.defaultPrevented||f?.())},_);return d7(B=>{A===h.layers.size-1&&(i?.(B),!B.defaultPrevented&&f&&(B.preventDefault(),f()))},_),W.useEffect(()=>{if(m)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(mb=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),pb(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=mb)}},[m,_,n,h]),W.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),pb())},[m,h]),W.useEffect(()=>{const B=()=>x({});return document.addEventListener(yg,B),()=>document.removeEventListener(yg,B)},[]),b.jsx(Zn.div,{...d,ref:D,style:{pointerEvents:N?z?"auto":"none":void 0,...e.style},onFocusCapture:An(e.onFocusCapture,M.onFocusCapture),onBlurCapture:An(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:An(e.onPointerDownCapture,k.onPointerDownCapture)})});iD.displayName=m7;var v7="DismissableLayerBranch",y7=W.forwardRef((e,t)=>{const n=W.useContext(rD),i=W.useRef(null),a=kr(t,i);return W.useEffect(()=>{const l=i.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),b.jsx(Zn.div,{...e,ref:a})});y7.displayName=v7;function _7(e,t=globalThis?.document){const n=lu(e),i=W.useRef(!1),a=W.useRef(()=>{});return W.useEffect(()=>{const l=f=>{if(f.target&&!i.current){let d=function(){aD(p7,n,h,{discrete:!0})};const h={originalEvent:f};f.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);i.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",l),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function x7(e,t=globalThis?.document){const n=lu(e),i=W.useRef(!1);return W.useEffect(()=>{const a=l=>{l.target&&!i.current&&aD(g7,n,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function pb(){const e=new CustomEvent(yg);document.dispatchEvent(e)}function aD(e,t,n,{discrete:i}){const a=n.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),i?h7(a,l):a.dispatchEvent(l)}var y0="focusScope.autoFocusOnMount",_0="focusScope.autoFocusOnUnmount",gb={bubbles:!1,cancelable:!0},b7="FocusScope",sD=W.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...c}=e,[f,d]=W.useState(null),h=lu(a),m=lu(l),g=W.useRef(null),_=kr(t,y=>d(y)),x=W.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;W.useEffect(()=>{if(i){let y=function(N){if(x.paused||!f)return;const z=N.target;f.contains(z)?g.current=z:zs(g.current,{select:!0})},S=function(N){if(x.paused||!f)return;const z=N.relatedTarget;z!==null&&(f.contains(z)||zs(g.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&zs(f)};document.addEventListener("focusin",y),document.addEventListener("focusout",S);const A=new MutationObserver(w);return f&&A.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",S),A.disconnect()}}},[i,f,x.paused]),W.useEffect(()=>{if(f){yb.add(x);const y=document.activeElement;if(!f.contains(y)){const w=new CustomEvent(y0,gb);f.addEventListener(y0,h),f.dispatchEvent(w),w.defaultPrevented||(w7(A7(oD(f)),{select:!0}),document.activeElement===y&&zs(f))}return()=>{f.removeEventListener(y0,h),setTimeout(()=>{const w=new CustomEvent(_0,gb);f.addEventListener(_0,m),f.dispatchEvent(w),w.defaultPrevented||zs(y??document.body,{select:!0}),f.removeEventListener(_0,m),yb.remove(x)},0)}}},[f,h,m,x]);const D=W.useCallback(y=>{if(!n&&!i||x.paused)return;const S=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(S&&w){const A=y.currentTarget,[N,z]=D7(A);N&&z?!y.shiftKey&&w===z?(y.preventDefault(),n&&zs(N,{select:!0})):y.shiftKey&&w===N&&(y.preventDefault(),n&&zs(z,{select:!0})):w===A&&y.preventDefault()}},[n,i,x.paused]);return b.jsx(Zn.div,{tabIndex:-1,...c,ref:_,onKeyDown:D})});sD.displayName=b7;function w7(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(zs(i,{select:t}),document.activeElement!==n)return}function D7(e){const t=oD(e),n=vb(t,e),i=vb(t.reverse(),e);return[n,i]}function oD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vb(e,t){for(const n of e)if(!E7(n,{upTo:t}))return n}function E7(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function S7(e){return e instanceof HTMLInputElement&&"select"in e}function zs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&S7(e)&&t&&e.select()}}var yb=C7();function C7(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=_b(e,t),e.unshift(t)},remove(t){e=_b(e,t),e[0]?.resume()}}}function _b(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function A7(e){return e.filter(t=>t.tagName!=="A")}var N7="Portal",lD=W.forwardRef((e,t)=>{const{container:n,...i}=e,[a,l]=W.useState(!1);ou(()=>l(!0),[]);const c=n||a&&globalThis?.document?.body;return c?Td.createPortal(b.jsx(Zn.div,{...i,ref:t}),c):null});lD.displayName=N7;function M7(e,t){return W.useReducer((n,i)=>t[n][i]??n,e)}var vu=e=>{const{present:t,children:n}=e,i=k7(t),a=typeof n=="function"?n({present:i.isPresent}):W.Children.only(n),l=kr(i.ref,T7(a));return typeof n=="function"||i.isPresent?W.cloneElement(a,{ref:l}):null};vu.displayName="Presence";function k7(e){const[t,n]=W.useState(),i=W.useRef(null),a=W.useRef(e),l=W.useRef("none"),c=e?"mounted":"unmounted",[f,d]=M7(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.useEffect(()=>{const h=Mh(i.current);l.current=f==="mounted"?h:"none"},[f]),ou(()=>{const h=i.current,m=a.current;if(m!==e){const _=l.current,x=Mh(h);e?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&_!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),ou(()=>{if(t){let h;const m=t.ownerDocument.defaultView??window,g=x=>{const y=Mh(i.current).includes(CSS.escape(x.animationName));if(x.target===t&&y&&(d("ANIMATION_END"),!a.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",h=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},_=x=>{x.target===t&&(l.current=Mh(i.current))};return t.addEventListener("animationstart",_),t.addEventListener("animationcancel",g),t.addEventListener("animationend",g),()=>{m.clearTimeout(h),t.removeEventListener("animationstart",_),t.removeEventListener("animationcancel",g),t.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:W.useCallback(h=>{i.current=h?getComputedStyle(h):null,n(h)},[])}}function Mh(e){return e?.animationName||"none"}function T7(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var x0=0;function z7(){W.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xb()),document.body.insertAdjacentElement("beforeend",e[1]??xb()),x0++,()=>{x0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),x0--}},[])}function xb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Xi=function(){return Xi=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Xi.apply(this,arguments)};function uD(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function L7(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,l;i<a;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return e.concat(l||Array.prototype.slice.call(t))}var Uh="right-scroll-bar-position",Zh="width-before-scroll-bar",F7="with-scroll-bars-hidden",R7="--removed-body-scroll-bar-size";function b0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function j7(e,t){var n=W.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var a=n.value;a!==i&&(n.value=i,n.callback(i,a))}}}})[0];return n.callback=t,n.facade}var B7=typeof window<"u"?W.useLayoutEffect:W.useEffect,bb=new WeakMap;function P7(e,t){var n=j7(null,function(i){return e.forEach(function(a){return b0(a,i)})});return B7(function(){var i=bb.get(n);if(i){var a=new Set(i),l=new Set(e),c=n.current;a.forEach(function(f){l.has(f)||b0(f,null)}),l.forEach(function(f){a.has(f)||b0(f,c)})}bb.set(n,e)},[e]),n}function O7(e){return e}function I7(e,t){t===void 0&&(t=O7);var n=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(l){var c=t(l,i);return n.push(c),function(){n=n.filter(function(f){return f!==c})}},assignSyncMedium:function(l){for(i=!0;n.length;){var c=n;n=[],c.forEach(l)}n={push:function(f){return l(f)},filter:function(){return n}}},assignMedium:function(l){i=!0;var c=[];if(n.length){var f=n;n=[],f.forEach(l),c=n}var d=function(){var m=c;c=[],m.forEach(l)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(m){c.push(m),h()},filter:function(m){return c=c.filter(m),n}}}};return a}function H7(e){e===void 0&&(e={});var t=I7(null);return t.options=Xi({async:!0,ssr:!1},e),t}var cD=function(e){var t=e.sideCar,n=uD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return W.createElement(i,Xi({},n))};cD.isSideCarExport=!0;function G7(e,t){return e.useMedium(t),cD}var fD=H7(),w0=function(){},nm=W.forwardRef(function(e,t){var n=W.useRef(null),i=W.useState({onScrollCapture:w0,onWheelCapture:w0,onTouchMoveCapture:w0}),a=i[0],l=i[1],c=e.forwardProps,f=e.children,d=e.className,h=e.removeScrollBar,m=e.enabled,g=e.shards,_=e.sideCar,x=e.noRelative,D=e.noIsolation,y=e.inert,S=e.allowPinchZoom,w=e.as,A=w===void 0?"div":w,N=e.gapMode,z=uD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=_,M=P7([n,t]),B=Xi(Xi({},z),a);return W.createElement(W.Fragment,null,m&&W.createElement(k,{sideCar:fD,removeScrollBar:h,shards:g,noRelative:x,noIsolation:D,inert:y,setCallbacks:l,allowPinchZoom:!!S,lockRef:n,gapMode:N}),c?W.cloneElement(W.Children.only(f),Xi(Xi({},B),{ref:M})):W.createElement(A,Xi({},B,{className:d,ref:M}),f))});nm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nm.classNames={fullWidth:Zh,zeroRight:Uh};var U7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Z7(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=U7();return t&&e.setAttribute("nonce",t),e}function K7(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function q7(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var $7=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Z7())&&(K7(t,n),q7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},V7=function(){var e=$7();return function(t,n){W.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},hD=function(){var e=V7(),t=function(n){var i=n.styles,a=n.dynamic;return e(i,a),null};return t},Y7={left:0,top:0,right:0,gap:0},D0=function(e){return parseInt(e||"",10)||0},X7=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[D0(n),D0(i),D0(a)]},W7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Y7;var t=X7(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},Q7=hD(),Xl="data-scroll-locked",J7=function(e,t,n,i){var a=e.left,l=e.top,c=e.right,f=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(F7,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(f,"px ").concat(i,`;
  }
  body[`).concat(Xl,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(f,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uh,` {
    right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(Zh,` {
    margin-right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(Uh," .").concat(Uh,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Zh," .").concat(Zh,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Xl,`] {
    `).concat(R7,": ").concat(f,`px;
  }
`)},wb=function(){var e=parseInt(document.body.getAttribute(Xl)||"0",10);return isFinite(e)?e:0},eF=function(){W.useEffect(function(){return document.body.setAttribute(Xl,(wb()+1).toString()),function(){var e=wb()-1;e<=0?document.body.removeAttribute(Xl):document.body.setAttribute(Xl,e.toString())}},[])},tF=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,a=i===void 0?"margin":i;eF();var l=W.useMemo(function(){return W7(a)},[a]);return W.createElement(Q7,{styles:J7(l,!t,a,n?"":"!important")})},_g=!1;if(typeof window<"u")try{var kh=Object.defineProperty({},"passive",{get:function(){return _g=!0,!0}});window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch{_g=!1}var jl=_g?{passive:!1}:!1,nF=function(e){return e.tagName==="TEXTAREA"},dD=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!nF(e)&&n[t]==="visible")},rF=function(e){return dD(e,"overflowY")},iF=function(e){return dD(e,"overflowX")},Db=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=mD(e,i);if(a){var l=pD(e,i),c=l[1],f=l[2];if(c>f)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},aF=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},sF=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},mD=function(e,t){return e==="v"?rF(t):iF(t)},pD=function(e,t){return e==="v"?aF(t):sF(t)},oF=function(e,t){return e==="h"&&t==="rtl"?-1:1},lF=function(e,t,n,i,a){var l=oF(e,window.getComputedStyle(t).direction),c=l*i,f=n.target,d=t.contains(f),h=!1,m=c>0,g=0,_=0;do{if(!f)break;var x=pD(e,f),D=x[0],y=x[1],S=x[2],w=y-S-l*D;(D||w)&&mD(e,f)&&(g+=w,_+=D);var A=f.parentNode;f=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!d&&f!==document.body||d&&(t.contains(f)||t===f));return(m&&Math.abs(g)<1||!m&&Math.abs(_)<1)&&(h=!0),h},Th=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Eb=function(e){return[e.deltaX,e.deltaY]},Sb=function(e){return e&&"current"in e?e.current:e},uF=function(e,t){return e[0]===t[0]&&e[1]===t[1]},cF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},fF=0,Bl=[];function hF(e){var t=W.useRef([]),n=W.useRef([0,0]),i=W.useRef(),a=W.useState(fF++)[0],l=W.useState(hD)[0],c=W.useRef(e);W.useEffect(function(){c.current=e},[e]),W.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=L7([e.lockRef.current],(e.shards||[]).map(Sb),!0).filter(Boolean);return y.forEach(function(S){return S.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var f=W.useCallback(function(y,S){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!c.current.allowPinchZoom;var w=Th(y),A=n.current,N="deltaX"in y?y.deltaX:A[0]-w[0],z="deltaY"in y?y.deltaY:A[1]-w[1],k,M=y.target,B=Math.abs(N)>Math.abs(z)?"h":"v";if("touches"in y&&B==="h"&&M.type==="range")return!1;var P=Db(B,M);if(!P)return!0;if(P?k=B:(k=B==="v"?"h":"v",P=Db(B,M)),!P)return!1;if(!i.current&&"changedTouches"in y&&(N||z)&&(i.current=k),!k)return!0;var R=i.current||k;return lF(R,S,y,R==="h"?N:z)},[]),d=W.useCallback(function(y){var S=y;if(!(!Bl.length||Bl[Bl.length-1]!==l)){var w="deltaY"in S?Eb(S):Th(S),A=t.current.filter(function(k){return k.name===S.type&&(k.target===S.target||S.target===k.shadowParent)&&uF(k.delta,w)})[0];if(A&&A.should){S.cancelable&&S.preventDefault();return}if(!A){var N=(c.current.shards||[]).map(Sb).filter(Boolean).filter(function(k){return k.contains(S.target)}),z=N.length>0?f(S,N[0]):!c.current.noIsolation;z&&S.cancelable&&S.preventDefault()}}},[]),h=W.useCallback(function(y,S,w,A){var N={name:y,delta:S,target:w,should:A,shadowParent:dF(w)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(z){return z!==N})},1)},[]),m=W.useCallback(function(y){n.current=Th(y),i.current=void 0},[]),g=W.useCallback(function(y){h(y.type,Eb(y),y.target,f(y,e.lockRef.current))},[]),_=W.useCallback(function(y){h(y.type,Th(y),y.target,f(y,e.lockRef.current))},[]);W.useEffect(function(){return Bl.push(l),e.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:_}),document.addEventListener("wheel",d,jl),document.addEventListener("touchmove",d,jl),document.addEventListener("touchstart",m,jl),function(){Bl=Bl.filter(function(y){return y!==l}),document.removeEventListener("wheel",d,jl),document.removeEventListener("touchmove",d,jl),document.removeEventListener("touchstart",m,jl)}},[]);var x=e.removeScrollBar,D=e.inert;return W.createElement(W.Fragment,null,D?W.createElement(l,{styles:cF(a)}):null,x?W.createElement(tF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function dF(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const mF=G7(fD,hF);var gD=W.forwardRef(function(e,t){return W.createElement(nm,Xi({},e,{ref:t,sideCar:mF}))});gD.classNames=nm.classNames;var pF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Pl=new WeakMap,zh=new WeakMap,Lh={},E0=0,vD=function(e){return e&&(e.host||vD(e.parentNode))},gF=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=vD(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},vF=function(e,t,n,i){var a=gF(t,Array.isArray(e)?e:[e]);Lh[n]||(Lh[n]=new WeakMap);var l=Lh[n],c=[],f=new Set,d=new Set(a),h=function(g){!g||f.has(g)||(f.add(g),h(g.parentNode))};a.forEach(h);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(_){if(f.has(_))m(_);else try{var x=_.getAttribute(i),D=x!==null&&x!=="false",y=(Pl.get(_)||0)+1,S=(l.get(_)||0)+1;Pl.set(_,y),l.set(_,S),c.push(_),y===1&&D&&zh.set(_,!0),S===1&&_.setAttribute(n,"true"),D||_.setAttribute(i,"true")}catch(w){console.error("aria-hidden: cannot operate on ",_,w)}})};return m(t),f.clear(),E0++,function(){c.forEach(function(g){var _=Pl.get(g)-1,x=l.get(g)-1;Pl.set(g,_),l.set(g,x),_||(zh.has(g)||g.removeAttribute(i),zh.delete(g)),x||g.removeAttribute(n)}),E0--,E0||(Pl=new WeakMap,Pl=new WeakMap,zh=new WeakMap,Lh={})}},yF=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),a=pF(e);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),vF(i,a,n,"aria-hidden")):function(){return null}},rm="Dialog",[yD,_D]=gu(rm),[_F,Li]=yD(rm),xD=e=>{const{__scopeDialog:t,children:n,open:i,defaultOpen:a,onOpenChange:l,modal:c=!0}=e,f=W.useRef(null),d=W.useRef(null),[h,m]=tm({prop:i,defaultProp:a??!1,onChange:l,caller:rm});return b.jsx(_F,{scope:t,triggerRef:f,contentRef:d,contentId:zc(),titleId:zc(),descriptionId:zc(),open:h,onOpenChange:m,onOpenToggle:W.useCallback(()=>m(g=>!g),[m]),modal:c,children:n})};xD.displayName=rm;var bD="DialogTrigger",wD=W.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Li(bD,n),l=kr(t,a.triggerRef);return b.jsx(Zn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":sv(a.open),...i,ref:l,onClick:An(e.onClick,a.onOpenToggle)})});wD.displayName=bD;var iv="DialogPortal",[xF,DD]=yD(iv,{forceMount:void 0}),ED=e=>{const{__scopeDialog:t,forceMount:n,children:i,container:a}=e,l=Li(iv,t);return b.jsx(xF,{scope:t,forceMount:n,children:W.Children.map(i,c=>b.jsx(vu,{present:n||l.open,children:b.jsx(lD,{asChild:!0,container:a,children:c})}))})};ED.displayName=iv;var Sd="DialogOverlay",SD=W.forwardRef((e,t)=>{const n=DD(Sd,e.__scopeDialog),{forceMount:i=n.forceMount,...a}=e,l=Li(Sd,e.__scopeDialog);return l.modal?b.jsx(vu,{present:i||l.open,children:b.jsx(wF,{...a,ref:t})}):null});SD.displayName=Sd;var bF=Ed("DialogOverlay.RemoveScroll"),wF=W.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Li(Sd,n);return b.jsx(gD,{as:bF,allowPinchZoom:!0,shards:[a.contentRef],children:b.jsx(Zn.div,{"data-state":sv(a.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),Oo="DialogContent",CD=W.forwardRef((e,t)=>{const n=DD(Oo,e.__scopeDialog),{forceMount:i=n.forceMount,...a}=e,l=Li(Oo,e.__scopeDialog);return b.jsx(vu,{present:i||l.open,children:l.modal?b.jsx(DF,{...a,ref:t}):b.jsx(EF,{...a,ref:t})})});CD.displayName=Oo;var DF=W.forwardRef((e,t)=>{const n=Li(Oo,e.__scopeDialog),i=W.useRef(null),a=kr(t,n.contentRef,i);return W.useEffect(()=>{const l=i.current;if(l)return yF(l)},[]),b.jsx(AD,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:An(e.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:An(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,f=c.button===0&&c.ctrlKey===!0;(c.button===2||f)&&l.preventDefault()}),onFocusOutside:An(e.onFocusOutside,l=>l.preventDefault())})}),EF=W.forwardRef((e,t)=>{const n=Li(Oo,e.__scopeDialog),i=W.useRef(!1),a=W.useRef(!1);return b.jsx(AD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(i.current||n.triggerRef.current?.focus(),l.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=l.target;n.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),AD=W.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,...c}=e,f=Li(Oo,n),d=W.useRef(null),h=kr(t,d);return z7(),b.jsxs(b.Fragment,{children:[b.jsx(sD,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:l,children:b.jsx(iD,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":sv(f.open),...c,ref:h,onDismiss:()=>f.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(CF,{titleId:f.titleId}),b.jsx(NF,{contentRef:d,descriptionId:f.descriptionId})]})]})}),av="DialogTitle",ND=W.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Li(av,n);return b.jsx(Zn.h2,{id:a.titleId,...i,ref:t})});ND.displayName=av;var MD="DialogDescription",kD=W.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Li(MD,n);return b.jsx(Zn.p,{id:a.descriptionId,...i,ref:t})});kD.displayName=MD;var TD="DialogClose",zD=W.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Li(TD,n);return b.jsx(Zn.button,{type:"button",...i,ref:t,onClick:An(e.onClick,()=>a.onOpenChange(!1))})});zD.displayName=TD;function sv(e){return e?"open":"closed"}var LD="DialogTitleWarning",[SF,FD]=JL(LD,{contentName:Oo,titleName:av,docsSlug:"dialog"}),CF=({titleId:e})=>{const t=FD(LD),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return W.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},AF="DialogDescriptionWarning",NF=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${FD(AF).contentName}}.`;return W.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},RD=xD,MF=wD,jD=ED,BD=SD,PD=CD,OD=ND,ID=kD,ov=zD;function Vr({...e}){return b.jsx(RD,{"data-slot":"dialog",...e})}function kF({...e}){return b.jsx(jD,{"data-slot":"dialog-portal",...e})}function TF({className:e,...t}){return b.jsx(BD,{"data-slot":"dialog-overlay",className:gn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[9999] bg-black/80",e),...t})}function Yr({className:e,children:t,showCloseButton:n=!0,...i}){return b.jsxs(kF,{"data-slot":"dialog-portal",children:[b.jsx(TF,{}),b.jsxs(PD,{"data-slot":"dialog-content",className:gn("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[10000] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...i,children:[t,n&&b.jsxs(ov,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[b.jsx(Os,{}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Xr({className:e,...t}){return b.jsx("div",{"data-slot":"dialog-header",className:gn("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Yc({className:e,...t}){return b.jsx("div",{"data-slot":"dialog-footer",className:gn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Wr({className:e,...t}){return b.jsx(OD,{"data-slot":"dialog-title",className:gn("text-lg leading-none font-semibold",e),...t})}function zF({className:e,...t}){return b.jsx(ID,{"data-slot":"dialog-description",className:gn("text-muted-foreground text-sm",e),...t})}function LF(e){const t=W.useRef({value:e,previous:e});return W.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function FF(e){const[t,n]=W.useState(void 0);return ou(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let c,f;if("borderBoxSize"in l){const d=l.borderBoxSize,h=Array.isArray(d)?d[0]:d;c=h.inlineSize,f=h.blockSize}else c=e.offsetWidth,f=e.offsetHeight;n({width:c,height:f})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var im="Checkbox",[RF,tB]=gu(im),[jF,lv]=RF(im);function BF(e){const{__scopeCheckbox:t,checked:n,children:i,defaultChecked:a,disabled:l,form:c,name:f,onCheckedChange:d,required:h,value:m="on",internal_do_not_use_render:g}=e,[_,x]=tm({prop:n,defaultProp:a??!1,onChange:d,caller:im}),[D,y]=W.useState(null),[S,w]=W.useState(null),A=W.useRef(!1),N=D?!!c||!!D.closest("form"):!0,z={checked:_,disabled:l,setChecked:x,control:D,setControl:y,name:f,form:c,value:m,hasConsumerStoppedPropagationRef:A,required:h,defaultChecked:Is(a)?!1:a,isFormControl:N,bubbleInput:S,setBubbleInput:w};return b.jsx(jF,{scope:t,...z,children:PF(g)?g(z):i})}var HD="CheckboxTrigger",GD=W.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...i},a)=>{const{control:l,value:c,disabled:f,checked:d,required:h,setControl:m,setChecked:g,hasConsumerStoppedPropagationRef:_,isFormControl:x,bubbleInput:D}=lv(HD,e),y=kr(a,m),S=W.useRef(d);return W.useEffect(()=>{const w=l?.form;if(w){const A=()=>g(S.current);return w.addEventListener("reset",A),()=>w.removeEventListener("reset",A)}},[l,g]),b.jsx(Zn.button,{type:"button",role:"checkbox","aria-checked":Is(d)?"mixed":d,"aria-required":h,"data-state":$D(d),"data-disabled":f?"":void 0,disabled:f,value:c,...i,ref:y,onKeyDown:An(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:An(n,w=>{g(A=>Is(A)?!0:!A),D&&x&&(_.current=w.isPropagationStopped(),_.current||w.stopPropagation())})})});GD.displayName=HD;var uv=W.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:i,checked:a,defaultChecked:l,required:c,disabled:f,value:d,onCheckedChange:h,form:m,...g}=e;return b.jsx(BF,{__scopeCheckbox:n,checked:a,defaultChecked:l,disabled:f,required:c,onCheckedChange:h,name:i,form:m,value:d,internal_do_not_use_render:({isFormControl:_})=>b.jsxs(b.Fragment,{children:[b.jsx(GD,{...g,ref:t,__scopeCheckbox:n}),_&&b.jsx(qD,{__scopeCheckbox:n})]})})});uv.displayName=im;var UD="CheckboxIndicator",ZD=W.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:i,...a}=e,l=lv(UD,n);return b.jsx(vu,{present:i||Is(l.checked)||l.checked===!0,children:b.jsx(Zn.span,{"data-state":$D(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});ZD.displayName=UD;var KD="CheckboxBubbleInput",qD=W.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:i,hasConsumerStoppedPropagationRef:a,checked:l,defaultChecked:c,required:f,disabled:d,name:h,value:m,form:g,bubbleInput:_,setBubbleInput:x}=lv(KD,e),D=kr(n,x),y=LF(l),S=FF(i);W.useEffect(()=>{const A=_;if(!A)return;const N=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(N,"checked").set,M=!a.current;if(y!==l&&k){const B=new Event("click",{bubbles:M});A.indeterminate=Is(l),k.call(A,Is(l)?!1:l),A.dispatchEvent(B)}},[_,y,l,a]);const w=W.useRef(Is(l)?!1:l);return b.jsx(Zn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??w.current,required:f,disabled:d,name:h,value:m,form:g,...t,tabIndex:-1,ref:D,style:{...t.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});qD.displayName=KD;function PF(e){return typeof e=="function"}function Is(e){return e==="indeterminate"}function $D(e){return Is(e)?"indeterminate":e?"checked":"unchecked"}const ur=W.forwardRef(({className:e,...t},n)=>b.jsx(uv,{ref:n,className:gn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:b.jsx(ZD,{className:gn("flex items-center justify-center text-current"),children:b.jsx(od,{className:"h-4 w-4"})})}));ur.displayName=uv.displayName;const VD=[{name:"YlOrBr",label:"Gelb-Orange-Braun",interpolator:Jw},{name:"Viridis",label:"Viridis",interpolator:pg},{name:"Plasma",label:"Plasma",interpolator:vg},{name:"Inferno",label:"Inferno",interpolator:gg},{name:"Magma",label:"Magma",interpolator:QL},{name:"Warm",label:"Warm",interpolator:qL},{name:"Cool",label:"Cool",interpolator:$L},{name:"Cubehelix",label:"Cubehelix",interpolator:KL},{name:"Blues",label:"Blau",interpolator:PL},{name:"Greens",label:"Grün",interpolator:IL},{name:"Oranges",label:"Orange",interpolator:ZL},{name:"Purples",label:"Lila",interpolator:GL}],YD=[{name:"RdYlGn",label:"Rot-Gelb-Grün (umgekehrt)",interpolator:e=>mg(1-e)},{name:"RdYlGnNormal",label:"Rot-Gelb-Grün",interpolator:mg},{name:"Viridis",label:"Viridis",interpolator:pg},{name:"ViridisReverse",label:"Viridis (umgekehrt)",interpolator:e=>pg(1-e)},{name:"Plasma",label:"Plasma",interpolator:vg},{name:"PlasmaReverse",label:"Plasma (umgekehrt)",interpolator:e=>vg(1-e)},{name:"Inferno",label:"Inferno",interpolator:gg},{name:"InfernoReverse",label:"Inferno (umgekehrt)",interpolator:e=>gg(1-e)},{name:"Rainbow",label:"Regenbogen",interpolator:VL},{name:"Sinebow",label:"Sinebow",interpolator:WL}],Cb=({scheme:e,width:t=200,height:n=20})=>{const a=`gradient-${e.name}-${Date.now()}`;return b.jsxs("svg",{width:t,height:n,style:{border:"1px solid #ccc",borderRadius:"2px"},children:[b.jsx("defs",{children:b.jsx("linearGradient",{id:a,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:Array.from({length:50},(l,c)=>{const f=c/49;return b.jsx("stop",{offset:`${f*100}%`,stopColor:e.interpolator(f)},c)})})}),b.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:`url(#${a})`})]})},OF=({isOpen:e,onClose:t})=>{const{colorPalettes:n,setColorPalette:i,immissionGridSettings:a,updateImmissionGridSettings:l}=Yt(),[c,f]=W.useState(n.dgm),[d,h]=W.useState(n.immissionGrid),[m,g]=W.useState(a.legendMode),[_,x]=W.useState(a.legendMinValue),[D,y]=W.useState(a.legendIntervalSize),[S,w]=W.useState(a.legendIntervalCount),[A,N]=W.useState(a.opacity),z=()=>{i("dgm",c),i("immissionGrid",d),l({legendMode:m,legendMinValue:_,legendIntervalSize:D,legendIntervalCount:S,opacity:A}),t()},k=()=>{f(n.dgm),h(n.immissionGrid),g(a.legendMode),x(a.legendMinValue),y(a.legendIntervalSize),w(a.legendIntervalCount),N(a.opacity),t()};return b.jsx(Vr,{open:e,onOpenChange:k,children:b.jsxs(Yr,{className:"sm:max-w-3xl max-h-[80vh] overflow-y-auto",children:[b.jsx(Xr,{children:b.jsx(Wr,{children:"Farbpaletten Einstellungen"})}),b.jsxs("div",{className:"mt-4 space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Digitales Geländemodell (DGM)"}),b.jsx("div",{className:"grid grid-cols-1 gap-2",children:VD.map(M=>b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("input",{type:"radio",id:`dgm-${M.name}`,name:"dgm-palette",value:M.name,checked:c===M.name,onChange:B=>f(B.target.value),className:"w-4 h-4"}),b.jsxs(ot,{htmlFor:`dgm-${M.name}`,className:"flex items-center gap-3 cursor-pointer flex-1",children:[b.jsx("span",{className:"min-w-[150px]",children:M.label}),b.jsx(Cb,{scheme:M})]})]},M.name))})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Immissionsgitter"}),b.jsx("div",{className:"grid grid-cols-1 gap-2",children:YD.map(M=>b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("input",{type:"radio",id:`immission-${M.name}`,name:"immission-palette",value:M.name,checked:d===M.name,onChange:B=>h(B.target.value),className:"w-4 h-4"}),b.jsxs(ot,{htmlFor:`immission-${M.name}`,className:"flex items-center gap-3 cursor-pointer flex-1",children:[b.jsx("span",{className:"min-w-[150px]",children:M.label}),b.jsx(Cb,{scheme:M})]})]},M.name))})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Immissionsgitter Legende & Darstellung"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ot,{htmlFor:"opacity",className:"min-w-[120px]",children:"Transparenz:"}),b.jsx(Lt,{id:"opacity",type:"number",min:"0",max:"1",step:"0.1",value:A,onChange:M=>N(Number(M.target.value)),className:"w-24"}),b.jsx("span",{className:"text-sm text-gray-600",children:"(0 = transparent, 1 = opak)"})]}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(ur,{id:"auto-legend",checked:m==="auto",onCheckedChange:M=>g(M?"auto":"custom")}),b.jsx(ot,{htmlFor:"auto-legend",children:"Automatische Legende"})]}),m==="custom"&&b.jsxs("div",{className:"space-y-3 ml-6",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ot,{htmlFor:"min-value",className:"min-w-[120px]",children:"Min Wert:"}),b.jsx(Lt,{id:"min-value",type:"number",value:_,onChange:M=>x(Number(M.target.value)),className:"w-24"}),b.jsx("span",{className:"text-sm text-gray-600",children:"dB(A)"})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ot,{htmlFor:"interval-size",className:"min-w-[120px]",children:"Intervallgröße:"}),b.jsx(Lt,{id:"interval-size",type:"number",value:D,onChange:M=>y(Number(M.target.value)),className:"w-24"}),b.jsx("span",{className:"text-sm text-gray-600",children:"dB(A)"})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ot,{htmlFor:"interval-count",className:"min-w-[120px]",children:"Anzahl Intervalle:"}),b.jsx(Lt,{id:"interval-count",type:"number",value:S,onChange:M=>w(Number(M.target.value)),className:"w-24"})]}),b.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Bereich: ",_," - ",_+D*S," dB(A)"]})]})]})]})]}),b.jsxs(Yc,{className:"mt-6",children:[b.jsx(st,{variant:"outline",onClick:k,children:"Abbrechen"}),b.jsx(st,{onClick:z,children:"Anwenden"})]})]})})},XD=(e,t)=>{const i=(e==="dgm"?VD:YD).find(a=>a.name===t);return i?i.interpolator:e==="dgm"?Jw:a=>mg(1-a)};function IF(e,t,n,i){const[a,l]=i.pixelToGK(e,t);for(const c of n){const f=c.A?.HP?.GK_Vektor,d=c.B?.HP?.GK_Vektor,h=c.C?.HP?.GK_Vektor;if(!f||!d||!h)continue;const m=f.GK.Rechts,g=f.GK.Hoch,_=d.GK.Rechts,x=d.GK.Hoch,D=h.GK.Rechts,y=h.GK.Hoch,S=D-m,w=y-g,A=_-m,N=x-g,z=a-m,k=l-g,M=S*S+w*w,B=S*A+w*N,P=S*z+w*k,R=A*A+N*N,H=A*z+N*k,U=1/(M*R-B*B),I=(R*P-B*H)*U,X=(M*H-B*P)*U;if(I>=0&&X>=0&&I+X<=1)return(1-I-X)*f.z+I*h.z+X*d.z}return null}const HF=({width:e,height:t,dgmDreiecke:n,transform:i,gridSize:a=25,thresholds:l=15,opacity:c=.5})=>{const f=Fd(),d=W.useRef(null),h=W.useRef(null),m=W.useRef(null),{colorPalettes:g}=Yt(),_=XD("dgm",g.dgm),{contourSVG:x,minHeight:D,maxHeight:y}=W.useMemo(()=>{if(!n||n.length===0||!i)return console.log("No DTM data or transform available"),{contourSVG:null,minHeight:0,maxHeight:0};console.log(`Generating contour grid: ${e}x${t}, gridSize: ${a}`);const S=Math.ceil(e/a),w=Math.ceil(t/a),A=new Array(S*w);let N=0,z=1/0,k=-1/0;for(let j=0;j<w;j++)for(let J=0;J<S;J++){const q=J*a,ne=j*a,V=t-ne,Q=IF(q,V,n,i),Z=j*S+J;Q!==null?(A[Z]=Q,N++,z=Math.min(z,Q),k=Math.max(k,Q)):A[Z]=NaN}if(console.log(`Extracted heights at ${N} grid points`),console.log(`Height range: ${z.toFixed(2)} to ${k.toFixed(2)}`),N===0)return console.warn("No valid height points found in DTM"),{contourSVG:null,minHeight:0,maxHeight:0};const M=sw().size([S,w]).thresholds(l).smooth(!0),B=A.map(j=>isNaN(j)?z-1:j),P=M(B),R=Xd(_).domain([z,k]),H=zw({point:function(j,J){this.stream.point(j*a,J*a)}}),U=Tw().projection(H),I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.setAttribute("xmlns","http://www.w3.org/2000/svg"),I.setAttribute("viewBox",`0 0 ${e} ${t}`),I.style.width="100%",I.style.height="100%";const X=document.createElementNS("http://www.w3.org/2000/svg","g");return X.setAttribute("opacity",c.toString()),P.forEach(j=>{const J=document.createElementNS("http://www.w3.org/2000/svg","path"),q=U(j);q&&(J.setAttribute("d",q),J.setAttribute("fill",R(j.value)),J.setAttribute("fill-opacity","0.4"),J.setAttribute("stroke",R(j.value)),J.setAttribute("stroke-width","1"),J.setAttribute("stroke-opacity","0.8")),X.appendChild(J)}),I.appendChild(X),console.log(`Generated ${P.length} contour lines`),{contourSVG:I,minHeight:z,maxHeight:k}},[e,t,n,i,a,l,c,_]);return W.useEffect(()=>{if(!x||!f)return;d.current&&f.removeLayer(d.current);const S=[[0,0],[t,e]],w=fr.svgOverlay(x.cloneNode(!0),S,{interactive:!1,zIndex:400});return w.addTo(f),d.current=w,()=>{d.current&&(f.removeLayer(d.current),d.current=null)}},[x,f,t,e]),W.useEffect(()=>{if(console.log("ContourOverlay Legend effect:",{hasMap:!!f,minHeight:D.toFixed(2),maxHeight:y.toFixed(2),hasContourSVG:!!x,isValidRange:D!==y&&!isNaN(D)&&!isNaN(y)}),!f||!x||D===y||isNaN(D)||isNaN(y)){if(m.current){const S=m.current;m.current=null,setTimeout(()=>S.unmount(),0)}h.current&&(h.current.remove(),h.current=null);return}if(console.log("Creating ContourOverlay legend with height range:",D.toFixed(2),"to",y.toFixed(2),"m"),!h.current){const S=document.createElement("div");S.className="contour-legend-container",S.style.position="absolute",S.style.bottom="10px",S.style.left="10px",S.style.zIndex="1000",S.style.pointerEvents="none",f.getContainer().appendChild(S),h.current=S,m.current=Dg.createRoot(S)}return m.current&&(console.log("Rendering ContourOverlay D3Legend component"),m.current.render(b.jsx(eD,{minValue:D,maxValue:y,colorScheme:_,title:"Höhe",unit:" m",position:"bottomleft",width:120,height:220}))),()=>{if(console.log("Cleaning up ContourOverlay legend"),m.current){const S=m.current;m.current=null,setTimeout(()=>S.unmount(),0)}h.current&&(h.current.remove(),h.current=null)}},[f,D,y,_,x]),null},GF=({width:e,height:t,transform:n,gridValues:i,gridValuesDetailed:a,displayMode:l="total",opacity:c=.6,thresholds:f=[5]})=>{const d=Fd(),h=W.useRef(null),m=W.useRef(null),g=W.useRef(null),{colorPalettes:_,immissionGridSettings:x}=Yt(),D=XD("immission",_.immissionGrid),{contourSVG:y,minValue:S,maxValue:w,legendMin:A,legendMax:N}=W.useMemo(()=>{const z=l!=="total"&&a&&a.length>0,k=z?a:i;if(!k||k.length===0||!n)return console.log("No grid values or transform available"),{contourSVG:null,minValue:0,maxValue:0,legendMin:0,legendMax:0};console.log(`Generating immission grid contours (${l} mode): ${e}x${t}, ${k.length} points`);const M=$e=>{if(z)switch(l){case"esq":return $e.esq||0;case"trassen":return $e.trassen||0;default:return $e.total||0}return $e.value||0},B=k.map($e=>$e.x),P=k.map($e=>$e.y),R=[...new Set(B)].sort(($e,Ve)=>$e-Ve),H=[...new Set(P)].sort(($e,Ve)=>$e-Ve),U=R.length,I=H.length;console.log(`Grid dimensions: ${U}x${I}`);const X=k.map($e=>M($e)).filter($e=>!isNaN($e)),j=Math.min(...X),J=Math.max(...X);let q=j,ne=J,V=f;if(x.legendMode==="custom"){q=x.legendMinValue,ne=q+x.legendIntervalSize*x.legendIntervalCount;const $e=[];for(let Ve=0;Ve<=x.legendIntervalCount;Ve++)$e.push(q+Ve*x.legendIntervalSize);V=$e}console.log(`Immission value range: ${j.toFixed(2)} to ${J.toFixed(2)} dB(A)`),console.log(`Legend range: ${q.toFixed(2)} to ${ne.toFixed(2)} dB(A)`);const Q=k.map($e=>[$e.x,t-$e.y]),Z=Rs.from(Q),$=Math.ceil(e/10),ee=Math.ceil(t/10),se=new Array($*ee);for(let $e=0;$e<ee;$e++)for(let Ve=0;Ve<$;Ve++){const G=Ve/($-1)*e,ke=$e/(ee-1)*t;let Se=NaN;for(let ie=0;ie<Z.triangles.length;ie+=3){const de=Z.triangles[ie],Fe=Z.triangles[ie+1],Oe=Z.triangles[ie+2],xe=k[de],te=k[Fe],le=k[Oe],ue=t-xe.y,ve=t-te.y,Ne=t-le.y,Ce=le.x-xe.x,Ie=Ne-ue,ye=te.x-xe.x,we=ve-ue,me=G-xe.x,De=ke-ue,je=Ce*Ce+Ie*Ie,Xe=Ce*ye+Ie*we,Ye=Ce*me+Ie*De,We=ye*ye+we*we,gt=ye*me+we*De,zt=1/(je*We-Xe*Xe),Ut=(We*Ye-Xe*gt)*zt,It=(je*gt-Xe*Ye)*zt;if(Ut>=0&&It>=0&&Ut+It<=1){Se=(1-Ut-It)*M(xe)+Ut*M(le)+It*M(te);break}}const ae=$e*$+Ve;se[ae]=Se}const oe=se.map($e=>isNaN($e)?j-1:$e),ge=sw().size([$,ee]).thresholds(V).smooth(!0)(oe),Re=Xd(D).domain([q,ne]),Le=zw({point:function($e,Ve){this.stream.point($e*(e/($-1)),Ve*(t/(ee-1)))}}),Ge=Tw().projection(Le),Ke=document.createElementNS("http://www.w3.org/2000/svg","svg");Ke.setAttribute("xmlns","http://www.w3.org/2000/svg"),Ke.setAttribute("viewBox",`0 0 ${e} ${t}`),Ke.style.width="100%",Ke.style.height="100%";const Qe=document.createElementNS("http://www.w3.org/2000/svg","g");return Qe.setAttribute("opacity",c.toString()),ge.forEach($e=>{const Ve=document.createElementNS("http://www.w3.org/2000/svg","path"),G=Ge($e);G&&(Ve.setAttribute("d",G),Ve.setAttribute("fill",Re($e.value)),Ve.setAttribute("fill-opacity","0.5"),Ve.setAttribute("stroke",Re($e.value)),Ve.setAttribute("stroke-width","0.5"),Ve.setAttribute("stroke-opacity","0.8")),Qe.appendChild(Ve)}),Ke.appendChild(Qe),console.log(`Generated ${ge.length} immission contour lines`),{contourSVG:Ke,minValue:j,maxValue:J,legendMin:q,legendMax:ne}},[e,t,i,a,l,n,c,D,f,x]);return W.useEffect(()=>{if(!y||!d)return;h.current&&d.removeLayer(h.current);const z=[[0,0],[t,e]],k=fr.svgOverlay(y.cloneNode(!0),z,{interactive:!1,zIndex:450});return k.addTo(d),h.current=k,()=>{h.current&&(d.removeLayer(h.current),h.current=null)}},[y,d,t,e]),W.useEffect(()=>{if(console.log("ImmissionGrid Legend effect:",{hasMap:!!d,minValue:S.toFixed(2),maxValue:w.toFixed(2),hasContourSVG:!!y,isValidRange:S!==w&&!isNaN(S)&&!isNaN(w),legendMode:x.legendMode}),!d||!y){if(g.current){const M=g.current;g.current=null,setTimeout(()=>M.unmount(),0)}m.current&&(m.current.remove(),m.current=null);return}let z,k;if(x.legendMode==="custom"){z=[],k=[];for(let M=x.legendIntervalCount-1;M>=0;M--){const P=A+M*x.legendIntervalSize+x.legendIntervalSize/2;z.push(P)}for(let M=x.legendIntervalCount;M>=0;M--){const B=A+M*x.legendIntervalSize;k.push(`${B.toFixed(0)} dB(A)`)}}if(x.legendMode==="auto"&&(A===N||isNaN(A)||isNaN(N))){if(g.current){const M=g.current;g.current=null,setTimeout(()=>M.unmount(),0)}m.current&&(m.current.remove(),m.current=null);return}if(console.log("Creating ImmissionGrid legend with range:",A.toFixed(2),"to",N.toFixed(2),"dB(A)"),!m.current){const M=document.createElement("div");M.className="immission-legend-container",M.style.position="absolute",M.style.bottom="10px",M.style.right="10px",M.style.zIndex="1000",M.style.pointerEvents="none",d.getContainer().appendChild(M),m.current=M,g.current=Dg.createRoot(M)}if(g.current){console.log("Rendering ImmissionGrid D3Legend component");let M="Immission";switch(l){case"esq":M="ESQ Sources";break;case"trassen":M="Transmission Lines";break;case"total":default:M="Total Immission";break}g.current.render(b.jsx(eD,{minValue:A,maxValue:N,colorScheme:D,title:M,unit:" dB(A)",position:"bottomright",width:150,height:220,customIntervals:z,intervalLabels:k}))}return()=>{if(console.log("Cleaning up ImmissionGrid legend"),g.current){const M=g.current;g.current=null,setTimeout(()=>M.unmount(),0)}m.current&&(m.current.remove(),m.current=null)}},[d,A,N,D,y,x,l]),null};var WD="AlertDialog",[UF,nB]=gu(WD,[_D]),Oa=_D(),QD=e=>{const{__scopeAlertDialog:t,...n}=e,i=Oa(t);return b.jsx(RD,{...i,...n,modal:!0})};QD.displayName=WD;var ZF="AlertDialogTrigger",KF=W.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(MF,{...a,...i,ref:t})});KF.displayName=ZF;var qF="AlertDialogPortal",JD=e=>{const{__scopeAlertDialog:t,...n}=e,i=Oa(t);return b.jsx(jD,{...i,...n})};JD.displayName=qF;var $F="AlertDialogOverlay",eE=W.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(BD,{...a,...i,ref:t})});eE.displayName=$F;var Wl="AlertDialogContent",[VF,YF]=UF(Wl),XF=o7("AlertDialogContent"),tE=W.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:i,...a}=e,l=Oa(n),c=W.useRef(null),f=kr(t,c),d=W.useRef(null);return b.jsx(SF,{contentName:Wl,titleName:nE,docsSlug:"alert-dialog",children:b.jsx(VF,{scope:n,cancelRef:d,children:b.jsxs(PD,{role:"alertdialog",...l,...a,ref:f,onOpenAutoFocus:An(a.onOpenAutoFocus,h=>{h.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[b.jsx(XF,{children:i}),b.jsx(QF,{contentRef:c})]})})})});tE.displayName=Wl;var nE="AlertDialogTitle",rE=W.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(OD,{...a,...i,ref:t})});rE.displayName=nE;var iE="AlertDialogDescription",aE=W.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(ID,{...a,...i,ref:t})});aE.displayName=iE;var WF="AlertDialogAction",sE=W.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(ov,{...a,...i,ref:t})});sE.displayName=WF;var oE="AlertDialogCancel",lE=W.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,{cancelRef:a}=YF(oE,n),l=Oa(n),c=kr(t,a);return b.jsx(ov,{...l,...i,ref:c})});lE.displayName=oE;var QF=({contentRef:e})=>{const t=`\`${Wl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Wl}\` by passing a \`${iE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Wl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return W.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},JF=QD,eR=JD,tR=eE,nR=tE,rR=sE,iR=lE,aR=rE,sR=aE;function uE({...e}){return b.jsx(JF,{"data-slot":"alert-dialog",...e})}function oR({...e}){return b.jsx(eR,{"data-slot":"alert-dialog-portal",...e})}function lR({className:e,...t}){return b.jsx(tR,{"data-slot":"alert-dialog-overlay",className:gn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[9999] bg-black/80",e),...t})}function cE({className:e,...t}){return b.jsxs(oR,{children:[b.jsx(lR,{}),b.jsx(nR,{"data-slot":"alert-dialog-content",className:gn("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[10000] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function fE({className:e,...t}){return b.jsx("div",{"data-slot":"alert-dialog-header",className:gn("flex flex-col gap-2 text-center sm:text-left",e),...t})}function hE({className:e,...t}){return b.jsx("div",{"data-slot":"alert-dialog-footer",className:gn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function dE({className:e,...t}){return b.jsx(aR,{"data-slot":"alert-dialog-title",className:gn("text-lg font-semibold",e),...t})}function mE({className:e,...t}){return b.jsx(sR,{"data-slot":"alert-dialog-description",className:gn("text-muted-foreground text-sm",e),...t})}function pE({className:e,...t}){return b.jsx(rR,{className:gn(qg(),e),...t})}function uR({className:e,...t}){return b.jsx(iR,{className:gn(qg({variant:"outline"}),e),...t})}const gE=W.createContext(void 0),cR=({children:e})=>{const[t,n]=W.useState({isOpen:!1,message:"",resolve:()=>{}}),[i,a]=W.useState({isOpen:!1,message:"",defaultValue:"",resolve:()=>{}}),[l,c]=W.useState(""),f=W.useCallback(g=>new Promise(_=>{n({isOpen:!0,message:g,resolve:_})}),[]),d=W.useCallback((g,_="")=>new Promise(x=>{c(_),a({isOpen:!0,message:g,defaultValue:_,resolve:x})}),[]),h=W.useCallback(g=>{t.resolve(g),n({isOpen:!1,message:"",resolve:()=>{}})},[t]),m=W.useCallback(g=>{i.resolve(g),a({isOpen:!1,message:"",defaultValue:"",resolve:()=>{}}),c("")},[i]);return b.jsxs(gE.Provider,{value:{confirm:f,prompt:d},children:[e,b.jsx(uE,{open:t.isOpen,onOpenChange:g=>!g&&h(!1),children:b.jsxs(cE,{children:[b.jsxs(fE,{children:[b.jsx(dE,{children:"Bestätigung"}),b.jsx(mE,{children:t.message})]}),b.jsxs(hE,{children:[b.jsx(uR,{onClick:()=>h(!1),children:"Abbrechen"}),b.jsx(pE,{onClick:()=>h(!0),children:"Bestätigen"})]})]})}),b.jsx(Vr,{open:i.isOpen,onOpenChange:g=>!g&&m(null),children:b.jsxs(Yr,{children:[b.jsxs(Xr,{children:[b.jsx(Wr,{children:"Eingabe erforderlich"}),b.jsx(zF,{children:i.message})]}),b.jsx("div",{className:"grid gap-4 py-4",children:b.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[b.jsx(ot,{htmlFor:"prompt-input",className:"text-right",children:"Wert:"}),b.jsx(Lt,{id:"prompt-input",value:l,onChange:g=>c(g.target.value),className:"col-span-3",onKeyDown:g=>{g.key==="Enter"&&m(l)},autoFocus:!0})]})}),b.jsxs(Yc,{children:[b.jsx(st,{variant:"outline",onClick:()=>m(null),children:"Abbrechen"}),b.jsx(st,{onClick:()=>m(l),children:"OK"})]})]})})]})},am=()=>{const e=W.useContext(gE);if(!e)throw new Error("useDialog must be used within a DialogProvider");return e},fR=({transform:e})=>{const[t,n]=W.useState(!1),[i,a]=W.useState({x:0,y:0}),[l,c]=W.useState(null),{addHoehenpunkt:f,addESQ:d,addImmissionPoint:h,trassenNew:m,dtmProcessor:g,addPole:_}=Yt(),x=W.useCallback((N,z)=>{if(!e)return null;const[k,M]=e.pixelToGK(z,N);let B=50;if(g)try{const P={Rechts:k,Hoch:M};B=g.berechneHoeheDGM(P)}catch(P){console.error("Error calculating terrain height:",P)}return{GK:{Rechts:k,Hoch:M},z:B}},[e,g]),D=W.useCallback(()=>{if(!l||!e)return;const N=x(l.lat,l.lng);N&&f(N),n(!1)},[l,e,x,f]),y=W.useCallback(()=>{if(!l||!e)return;const N=x(l.lat,l.lng);N&&d(N),n(!1)},[l,e,x,d]),S=W.useCallback(()=>{if(!l||!e)return;const N=x(l.lat,l.lng);N&&h(N),n(!1)},[l,e,x,h]),w=W.useCallback(async N=>{if(!l||!e)return;const z=x(l.lat,l.lng);if(!z)return;let k=N;if(!k){if(m.size===0)return;m.size===1&&(k=Array.from(m.keys())[0])}k&&_(k,z),n(!1)},[l,e,x,m,_]);if(Mg({contextmenu:N=>{fr.DomEvent.preventDefault(N.originalEvent),fr.DomEvent.stopPropagation(N.originalEvent);const{lat:z,lng:k}=N.latlng,M=N.originalEvent.pageX||N.originalEvent.clientX,B=N.originalEvent.pageY||N.originalEvent.clientY;c({lat:z,lng:k}),a({x:M,y:B}),n(!0)},click:()=>{n(!1)},dragstart:()=>{n(!1)}}),!t)return null;const A=Array.from(m.entries()).map(([N,z])=>({id:N,name:z.name,mastCount:z.poleIds.length}));return Td.createPortal(b.jsxs("div",{style:{position:"fixed",left:i.x,top:i.y,zIndex:1e4,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"4px 0",minWidth:"200px"},children:[b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:D,children:"📍 Höhenpunkt hinzufügen"}),b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:S,children:"📡 Immissionspunkt hinzufügen"}),b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:y,children:"⚡ ESQ hinzufügen"}),b.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"4px 0"}}),A.length===0?b.jsx("div",{style:{padding:"8px 12px",fontSize:"14px",color:"#999",fontStyle:"italic"},children:"Keine Trassen vorhanden"}):A.length===1?b.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:()=>w(A[0].id),children:["🏗️ Mast hinzufügen (",A[0].name,")"]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{padding:"8px 12px",fontSize:"14px",color:"#666"},children:"Mast hinzufügen zu:"}),A.map(N=>b.jsxs("div",{style:{padding:"8px 12px 8px 24px",cursor:"pointer",fontSize:"14px"},onMouseEnter:z=>z.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:z=>z.currentTarget.style.backgroundColor="transparent",onClick:()=>w(N.id),children:[N.name," (",N.mastCount," Masten)"]},N.id))]})]}),document.body)},Fh=({id:e,type:t,position:n,icon:i,popupContent:a,onDelete:l,onEdit:c})=>{const[f,d]=W.useState(!1),[h,m]=W.useState({x:0,y:0}),{selectElement:g,setEditFormOpen:_,setSelectedElementType:x}=Yt(),D=W.useCallback(A=>{fr.DomEvent.preventDefault(A.originalEvent),fr.DomEvent.stopPropagation(A.originalEvent);const N=A.originalEvent.pageX||A.originalEvent.clientX,z=A.originalEvent.pageY||A.originalEvent.clientY;m({x:N,y:z}),d(!0)},[]),y=W.useCallback(()=>{c?c():(g(e),x(t==="immissionpoint"?"immissionpoint":t),_(!0)),d(!1)},[e,t,c,g,x,_]),S=W.useCallback(()=>{l(),d(!1)},[l]);W.useEffect(()=>{if(!f)return;const A=z=>{z.key==="Escape"&&d(!1)},N=()=>{d(!1)};return document.addEventListener("keydown",A),document.addEventListener("click",N),()=>{document.removeEventListener("keydown",A),document.removeEventListener("click",N)}},[f]);const w=()=>{switch(t){case"hoehenpunkt":return"Höhenpunkt";case"esq":return"ESQ";case"immissionpoint":return"Immissionspunkt";case"pole":return"Mast";default:return"Element"}};return b.jsxs(b.Fragment,{children:[b.jsx(N0,{position:n,icon:i,eventHandlers:{contextmenu:D,click:A=>{fr.DomEvent.stopPropagation(A)}},children:b.jsx(Gl,{children:a})}),f&&Td.createPortal(b.jsxs("div",{style:{position:"fixed",left:h.x,top:h.y,zIndex:1e4,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"4px 0",minWidth:"150px"},onClick:A=>A.stopPropagation(),children:[b.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:A=>A.currentTarget.style.backgroundColor="transparent",onClick:y,children:["✏️ ",w()," bearbeiten"]}),b.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"4px 0"}}),b.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px",color:"#dc2626"},onMouseEnter:A=>{A.currentTarget.style.backgroundColor="#fee2e2"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="transparent"},onClick:S,children:["🗑️ ",w()," löschen"]})]}),document.body)]})},hR=({mastId:e,nextMastId:t,isOpen:n,onClose:i})=>{const{poles:a,trassenNew:l,connectionLines:c,updatePole:f,updateConnectionLine:d,leiterTypes:h}=Yt(),m=a.get(e),g=m,_=m||g,x=!!m,D=a.get(t),S=D||D,A=m?l.get(m.trasseId):void 0,[N,z]=W.useState({ebenen:[]});if(W.useEffect(()=>{if(!_)return;let P=[];x&&m&&(P=m.levels.map(R=>{const H=R.leftConnections.map(I=>Array.from(c.values()).find(X=>X.fromConnectionId===I.id)),U=R.rightConnections.map(I=>Array.from(c.values()).find(X=>X.fromConnectionId===I.id));return{leitungenLinks:R.leftConnections.map((I,X)=>{const j=H[X];return{durchhang:j?.maxSag||5,isolatorlaenge:I.isolatorLength||2.5,schallLw:j?.connectionLineType||"",schallLwDB:j?.soundPowerLevel||55}}),leitungenRechts:R.rightConnections.map((I,X)=>{const j=U[X];return{durchhang:j?.maxSag||5,isolatorlaenge:I.isolatorLength||2.5,schallLw:j?.connectionLineType||"",schallLwDB:j?.soundPowerLevel||55}})}})),z({ebenen:P})},[_,x,m,g,c]),!_||!S||!A)return null;const k=()=>{x&&m&&N.ebenen.forEach((P,R)=>{const H=m.levels[R];H&&(P.leitungenLinks.forEach((U,I)=>{const X=H.leftConnections[I];if(!X)return;const j=Array.from(c.values()).find(V=>V.fromConnectionId===X.id);j&&d(j.id,{maxSag:U.durchhang,connectionLineType:U.schallLw,soundPowerLevel:U.schallLwDB});const J={...X,isolatorLength:U.isolatorlaenge},q={...H,leftConnections:H.leftConnections.map((V,Q)=>Q===I?J:V)},ne={...m,levels:m.levels.map((V,Q)=>Q===R?q:V)};f(e,ne)}),P.leitungenRechts.forEach((U,I)=>{const X=H.rightConnections[I];if(!X)return;const j=Array.from(c.values()).find(V=>V.fromConnectionId===X.id);j&&d(j.id,{maxSag:U.durchhang,connectionLineType:U.schallLw,soundPowerLevel:U.schallLwDB});const J={...X,isolatorLength:U.isolatorlaenge},q={...H,rightConnections:H.rightConnections.map((V,Q)=>Q===I?J:V)},ne={...m,levels:m.levels.map((V,Q)=>Q===R?q:V)};f(e,ne)}))}),i()},M=(P,R,H,U,I)=>{const X=[...N.ebenen];R==="left"?X[P].leitungenLinks[H][U]=I:X[P].leitungenRechts[H][U]=I,z({...N,ebenen:X})},B=()=>b.jsxs("svg",{width:600,height:450,className:"border rounded bg-gray-50",children:[b.jsx("line",{x1:0,y1:420,x2:600,y2:420,stroke:"#8B4513",strokeWidth:3}),Array.from({length:20},(j,J)=>b.jsx("line",{x1:J*25,y1:420,x2:J*25+10,y2:430,stroke:"#8B4513",strokeWidth:1,opacity:.5},`ground-${J}`)),b.jsx("line",{x1:40,y1:420,x2:40,y2:30,stroke:"#333",strokeWidth:6}),b.jsx("line",{x1:560,y1:420,x2:560,y2:30,stroke:"#333",strokeWidth:6}),N.ebenen.map((j,J)=>{const ne=30+390/(N.ebenen.length+1)*(J+1);return j?b.jsxs("g",{children:[b.jsx("line",{x1:10,y1:ne,x2:70,y2:ne,stroke:"#666",strokeWidth:3}),b.jsx("line",{x1:530,y1:ne,x2:590,y2:ne,stroke:"#666",strokeWidth:3}),j.leitungenLinks.map((V,Q)=>{const Z=15+Q*10,$=40-Z,ee=560-Z,se=($+ee)/2,oe=ne+V.durchhang*3;return b.jsx("g",{children:b.jsx("path",{d:`M ${$} ${ne} Q ${se} ${oe} ${ee} ${ne}`,fill:"none",stroke:"#FF0000",strokeWidth:2})},`left-${Q}`)}),j.leitungenRechts.map((V,Q)=>{const Z=15+Q*10,$=40+Z,ee=560+Z,se=($+ee)/2,oe=ne+V.durchhang*3;return b.jsx("g",{children:b.jsx("path",{d:`M ${$} ${ne} Q ${se} ${oe} ${ee} ${ne}`,fill:"none",stroke:"#0000FF",strokeWidth:2})},`right-${Q}`)}),b.jsxs("text",{x:10,y:ne+4,fontSize:12,fill:"#333",fontWeight:"bold",children:["E",J+1]})]},J):null}),b.jsx("text",{x:40,y:20,fontSize:11,textAnchor:"middle",fill:"#333",children:_&&_?.name||"Mast 1"}),b.jsx("text",{x:560,y:20,fontSize:11,textAnchor:"middle",fill:"#333",children:S&&S?.name||"Mast 2"}),b.jsxs("g",{transform:"translate(10, 430)",children:[b.jsx("circle",{cx:0,cy:0,r:3,fill:"#FF0000"}),b.jsx("text",{x:8,y:3,fontSize:10,fill:"#666",children:"Links"}),b.jsx("circle",{cx:50,cy:0,r:3,fill:"#0000FF"}),b.jsx("text",{x:58,y:3,fontSize:10,fill:"#666",children:"Rechts"})]})]});return b.jsx(Vr,{open:n,onOpenChange:i,children:b.jsxs(Yr,{className:"!max-w-[90vw] !w-[90vw] !max-h-[90vh] overflow-y-auto",style:{width:"90vw",maxWidth:"90vw",height:"85vh"},children:[b.jsx(Xr,{children:b.jsxs(Wr,{children:[b.jsx(eu,{className:"h-5 w-5 inline-block mr-2"}),"Leitungen bearbeiten: ",m?.name||""," → ",S?.name||""]})}),b.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsx("div",{className:"text-sm text-gray-600",children:"Konfigurieren Sie Durchhang und Isolatorlänge für alle Leitungen"}),N.ebenen.map((P,R)=>b.jsxs("div",{className:"border rounded p-3 space-y-3",children:[b.jsxs("div",{className:"font-medium text-sm",children:["Ebene ",R+1]}),b.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[P.leitungenLinks.length>0&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{className:"text-xs font-medium",children:"Leiter Links"}),P.leitungenLinks.map((H,U)=>b.jsxs("div",{className:"space-y-1 p-2 bg-gray-50 rounded",children:[b.jsxs("div",{className:"text-xs font-medium",children:["L",U+1]}),b.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"Durchhang (m)"}),b.jsx(Lt,{type:"number",step:"0.1",value:H.durchhang,onChange:I=>M(R,"left",U,"durchhang",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]}),b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"Isolator (m)"}),b.jsx(Lt,{type:"number",step:"0.1",value:H.isolatorlaenge,onChange:I=>M(R,"left",U,"isolatorlaenge",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]}),b.jsxs("div",{className:"mt-2",children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"Leitertyp (Schall)"}),b.jsxs("select",{value:H.schallLw,onChange:I=>{const X=I.target.value;if(M(R,"left",U,"schallLw",X),X&&h.has(X)){const j=h.get(X);j&&M(R,"left",U,"schallLwDB",j.SchallLW)}},className:"w-full h-7 text-xs rounded-md border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Kein Typ (Standard)"}),Array.from(h.entries()).map(([I,X])=>b.jsxs("option",{value:I,children:[X.Name," (",X.SchallLW," dB)"]},I))]}),!H.schallLw&&b.jsxs("div",{className:"mt-1",children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"SchallLW (dB)"}),b.jsx(Lt,{type:"number",step:"0.1",value:H.schallLwDB,onChange:I=>M(R,"left",U,"schallLwDB",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]})]},U))]}),P.leitungenRechts.length>0&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{className:"text-xs font-medium",children:"Leiter Rechts"}),P.leitungenRechts.map((H,U)=>b.jsxs("div",{className:"space-y-1 p-2 bg-gray-50 rounded",children:[b.jsxs("div",{className:"text-xs font-medium",children:["R",U+1]}),b.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"Durchhang (m)"}),b.jsx(Lt,{type:"number",step:"0.1",value:H.durchhang,onChange:I=>M(R,"right",U,"durchhang",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]}),b.jsxs("div",{children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"Isolator (m)"}),b.jsx(Lt,{type:"number",step:"0.1",value:H.isolatorlaenge,onChange:I=>M(R,"right",U,"isolatorlaenge",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]}),b.jsxs("div",{className:"mt-2",children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"Leitertyp (Schall)"}),b.jsxs("select",{value:H.schallLw,onChange:I=>{const X=I.target.value;if(M(R,"right",U,"schallLw",X),X&&h.has(X)){const j=h.get(X);j&&M(R,"right",U,"schallLwDB",j.SchallLW)}},className:"w-full h-7 text-xs rounded-md border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Kein Typ (Standard)"}),Array.from(h.entries()).map(([I,X])=>b.jsxs("option",{value:I,children:[X.Name," (",X.SchallLW," dB)"]},I))]}),!H.schallLw&&b.jsxs("div",{className:"mt-1",children:[b.jsx(ot,{className:"text-xs text-gray-600",children:"SchallLW (dB)"}),b.jsx(Lt,{type:"number",step:"0.1",value:H.schallLwDB,onChange:I=>M(R,"right",U,"schallLwDB",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]})]},U))]})]})]},R))]}),b.jsxs("div",{className:"flex-1 space-y-2",children:[b.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Visualisierung"}),b.jsx("div",{className:"overflow-auto p-2",children:b.jsx("div",{className:"inline-block min-w-fit",children:B()})})]})]}),b.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[b.jsxs(st,{variant:"outline",onClick:i,children:[b.jsx(Os,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),b.jsxs(st,{onClick:k,children:[b.jsx(Kd,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})},dR=({mastId:e,nextMastId:t,mastName:n,nextMastName:i,trasseName:a,mastIndex:l,positions:c})=>{const[f,d]=W.useState(!1),[h,m]=W.useState({x:0,y:0}),[g,_]=W.useState(!1),x=W.useCallback(S=>{fr.DomEvent.preventDefault(S.originalEvent),fr.DomEvent.stopPropagation(S.originalEvent);const w=S.originalEvent.pageX||S.originalEvent.clientX,A=S.originalEvent.pageY||S.originalEvent.clientY;m({x:w,y:A}),d(!0)},[]),D=W.useCallback(()=>{_(!0),d(!1)},[]);W.useEffect(()=>{if(!f)return;const S=A=>{A.key==="Escape"&&d(!1)},w=()=>{d(!1)};return document.addEventListener("keydown",S),document.addEventListener("click",w),()=>{document.removeEventListener("keydown",S),document.removeEventListener("click",w)}},[f]);const y=`${a}: Mast ${l+1} → Mast ${l+2}`;return b.jsxs(b.Fragment,{children:[b.jsx(Zb,{positions:c,pathOptions:{color:"#000000",weight:3,opacity:.7},eventHandlers:{contextmenu:x,click:S=>{fr.DomEvent.stopPropagation(S)}},children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsxs("strong",{children:["Leitung ",a]}),b.jsx("br",{}),n," → ",i,b.jsx("br",{}),"Mast #",l+1," zu Mast #",l+2]})})}),f&&Td.createPortal(b.jsxs("div",{style:{position:"fixed",left:h.x,top:h.y,zIndex:1e4,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"4px 0",minWidth:"180px"},onClick:S=>S.stopPropagation(),children:[b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:S=>S.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:S=>S.currentTarget.style.backgroundColor="transparent",onClick:D,children:"⚡ Leitungen bearbeiten"}),b.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"4px 0"}}),b.jsx("div",{style:{padding:"8px 12px",fontSize:"12px",color:"#666",backgroundColor:"#f8f8f8"},children:y})]}),document.body),g&&b.jsx(hR,{mastId:e,nextMastId:t,isOpen:g,onClose:()=>_(!1)})]})},vE=W.forwardRef(({className:e,...t},n)=>b.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:n,...t}));vE.displayName="Textarea";function mR(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(a),t&&(i.href=t),a.href=e,a.href}const pR=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Hs(e){const t=[];for(let n=0,i=e.length;n<i;n++)t.push(e[n]);return t}let Ol=null;function yE(e={}){return Ol||(e.includeStyleProperties?(Ol=e.includeStyleProperties,Ol):(Ol=Hs(window.getComputedStyle(document.documentElement)),Ol))}function Cd(e,t){const i=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return i?parseFloat(i.replace("px","")):0}function gR(e){const t=Cd(e,"border-left-width"),n=Cd(e,"border-right-width");return e.clientWidth+t+n}function vR(e){const t=Cd(e,"border-top-width"),n=Cd(e,"border-bottom-width");return e.clientHeight+t+n}function _E(e,t={}){const n=t.width||gR(e),i=t.height||vR(e);return{width:n,height:i}}function yR(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const qr=16384;function _R(e){(e.width>qr||e.height>qr)&&(e.width>qr&&e.height>qr?e.width>e.height?(e.height*=qr/e.width,e.width=qr):(e.width*=qr/e.height,e.height=qr):e.width>qr?(e.height*=qr/e.width,e.width=qr):(e.width*=qr/e.height,e.height=qr))}function Ad(e){return new Promise((t,n)=>{const i=new Image;i.onload=()=>{i.decode().then(()=>{requestAnimationFrame(()=>t(i))})},i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=e})}async function xR(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function bR(e,t,n){const i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${n}`),a.setAttribute("viewBox",`0 0 ${t} ${n}`),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("externalResourcesRequired","true"),a.appendChild(l),l.appendChild(e),xR(a)}const Nr=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Nr(n,t)};function wR(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function DR(e,t){return yE(t).map(n=>{const i=e.getPropertyValue(n),a=e.getPropertyPriority(n);return`${n}: ${i}${a?" !important":""};`}).join(" ")}function ER(e,t,n,i){const a=`.${e}:${t}`,l=n.cssText?wR(n):DR(n,i);return document.createTextNode(`${a}{${l}}`)}function Ab(e,t,n,i){const a=window.getComputedStyle(e,n),l=a.getPropertyValue("content");if(l===""||l==="none")return;const c=pR();try{t.className=`${t.className} ${c}`}catch{return}const f=document.createElement("style");f.appendChild(ER(c,n,a,i)),t.appendChild(f)}function SR(e,t,n){Ab(e,t,":before",n),Ab(e,t,":after",n)}const Nb="application/font-woff",Mb="image/jpeg",CR={woff:Nb,woff2:Nb,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Mb,jpeg:Mb,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function AR(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function cv(e){const t=AR(e).toLowerCase();return CR[t]||""}function NR(e){return e.split(/,/)[1]}function xg(e){return e.search(/^(data:)/)!==-1}function MR(e,t){return`data:${t};base64,${e}`}async function xE(e,t,n){const i=await fetch(e,t);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const a=await i.blob();return new Promise((l,c)=>{const f=new FileReader;f.onerror=c,f.onloadend=()=>{try{l(n({res:i,result:f.result}))}catch(d){c(d)}},f.readAsDataURL(a)})}const S0={};function kR(e,t,n){let i=e.replace(/\?.*/,"");return n&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),t?`[${t}]${i}`:i}async function fv(e,t,n){const i=kR(e,t,n.includeQueryParams);if(S0[i]!=null)return S0[i];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const l=await xE(e,n.fetchRequestInit,({res:c,result:f})=>(t||(t=c.headers.get("Content-Type")||""),NR(f)));a=MR(l,t)}catch(l){a=n.imagePlaceholder||"";let c=`Failed to fetch resource: ${e}`;l&&(c=typeof l=="string"?l:l.message),c&&console.warn(c)}return S0[i]=a,a}async function TR(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Ad(t)}async function zR(e,t){if(e.currentSrc){const l=document.createElement("canvas"),c=l.getContext("2d");l.width=e.clientWidth,l.height=e.clientHeight,c?.drawImage(e,0,0,l.width,l.height);const f=l.toDataURL();return Ad(f)}const n=e.poster,i=cv(n),a=await fv(n,i,t);return Ad(a)}async function LR(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await sm(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function FR(e,t){return Nr(e,HTMLCanvasElement)?TR(e):Nr(e,HTMLVideoElement)?zR(e,t):Nr(e,HTMLIFrameElement)?LR(e,t):e.cloneNode(bE(e))}const RR=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",bE=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function jR(e,t,n){var i,a;if(bE(t))return t;let l=[];return RR(e)&&e.assignedNodes?l=Hs(e.assignedNodes()):Nr(e,HTMLIFrameElement)&&(!((i=e.contentDocument)===null||i===void 0)&&i.body)?l=Hs(e.contentDocument.body.childNodes):l=Hs(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),l.length===0||Nr(e,HTMLVideoElement)||await l.reduce((c,f)=>c.then(()=>sm(f,n)).then(d=>{d&&t.appendChild(d)}),Promise.resolve()),t}function BR(e,t,n){const i=t.style;if(!i)return;const a=window.getComputedStyle(e);a.cssText?(i.cssText=a.cssText,i.transformOrigin=a.transformOrigin):yE(n).forEach(l=>{let c=a.getPropertyValue(l);l==="font-size"&&c.endsWith("px")&&(c=`${Math.floor(parseFloat(c.substring(0,c.length-2)))-.1}px`),Nr(e,HTMLIFrameElement)&&l==="display"&&c==="inline"&&(c="block"),l==="d"&&t.getAttribute("d")&&(c=`path(${t.getAttribute("d")})`),i.setProperty(l,c,a.getPropertyPriority(l))})}function PR(e,t){Nr(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Nr(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function OR(e,t){if(Nr(e,HTMLSelectElement)){const n=t,i=Array.from(n.children).find(a=>e.value===a.getAttribute("value"));i&&i.setAttribute("selected","")}}function IR(e,t,n){return Nr(t,Element)&&(BR(e,t,n),SR(e,t,n),PR(e,t),OR(e,t)),t}async function HR(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const i={};for(let l=0;l<n.length;l++){const f=n[l].getAttribute("xlink:href");if(f){const d=e.querySelector(f),h=document.querySelector(f);!d&&h&&!i[f]&&(i[f]=await sm(h,t,!0))}}const a=Object.values(i);if(a.length){const l="http://www.w3.org/1999/xhtml",c=document.createElementNS(l,"svg");c.setAttribute("xmlns",l),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const f=document.createElementNS(l,"defs");c.appendChild(f);for(let d=0;d<a.length;d++)f.appendChild(a[d]);e.appendChild(c)}return e}async function sm(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(i=>FR(i,t)).then(i=>jR(e,i,t)).then(i=>IR(e,i,t)).then(i=>HR(i,t))}const wE=/url\((['"]?)([^'"]+?)\1\)/g,GR=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,UR=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ZR(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function KR(e){const t=[];return e.replace(wE,(n,i,a)=>(t.push(a),n)),t.filter(n=>!xg(n))}async function qR(e,t,n,i,a){try{const l=n?mR(t,n):t,c=cv(t);let f;return a||(f=await fv(l,c,i)),e.replace(ZR(t),`$1${f}$3`)}catch{}return e}function $R(e,{preferredFontFormat:t}){return t?e.replace(UR,n=>{for(;;){const[i,,a]=GR.exec(n)||[];if(!a)return"";if(a===t)return`src: ${i};`}}):e}function DE(e){return e.search(wE)!==-1}async function EE(e,t,n){if(!DE(e))return e;const i=$R(e,n);return KR(i).reduce((l,c)=>l.then(f=>qR(f,c,t,n)),Promise.resolve(i))}async function Il(e,t,n){var i;const a=(i=t.style)===null||i===void 0?void 0:i.getPropertyValue(e);if(a){const l=await EE(a,null,n);return t.style.setProperty(e,l,t.style.getPropertyPriority(e)),!0}return!1}async function VR(e,t){await Il("background",e,t)||await Il("background-image",e,t),await Il("mask",e,t)||await Il("-webkit-mask",e,t)||await Il("mask-image",e,t)||await Il("-webkit-mask-image",e,t)}async function YR(e,t){const n=Nr(e,HTMLImageElement);if(!(n&&!xg(e.src))&&!(Nr(e,SVGImageElement)&&!xg(e.href.baseVal)))return;const i=n?e.src:e.href.baseVal,a=await fv(i,cv(i),t);await new Promise((l,c)=>{e.onload=l,e.onerror=t.onImageErrorHandler?(...d)=>{try{l(t.onImageErrorHandler(...d))}catch(h){c(h)}}:c;const f=e;f.decode&&(f.decode=l),f.loading==="lazy"&&(f.loading="eager"),n?(e.srcset="",e.src=a):e.href.baseVal=a})}async function XR(e,t){const i=Hs(e.childNodes).map(a=>SE(a,t));await Promise.all(i).then(()=>e)}async function SE(e,t){Nr(e,Element)&&(await VR(e,t),await YR(e,t),await XR(e,t))}function WR(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const i=t.style;return i!=null&&Object.keys(i).forEach(a=>{n[a]=i[a]}),e}const kb={};async function Tb(e){let t=kb[e];if(t!=null)return t;const i=await(await fetch(e)).text();return t={url:e,cssText:i},kb[e]=t,t}async function zb(e,t){let n=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,l=(n.match(/url\([^)]+\)/g)||[]).map(async c=>{let f=c.replace(i,"$1");return f.startsWith("https://")||(f=new URL(f,e.url).href),xE(f,t.fetchRequestInit,({result:d})=>(n=n.replace(c,`url(${d})`),[c,d]))});return Promise.all(l).then(()=>n)}function Lb(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let i=e.replace(n,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=a.exec(i);if(d===null)break;t.push(d[0])}i=i.replace(a,"");const l=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,c="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",f=new RegExp(c,"gi");for(;;){let d=l.exec(i);if(d===null){if(d=f.exec(i),d===null)break;l.lastIndex=f.lastIndex}else f.lastIndex=l.lastIndex;t.push(d[0])}return t}async function QR(e,t){const n=[],i=[];return e.forEach(a=>{if("cssRules"in a)try{Hs(a.cssRules||[]).forEach((l,c)=>{if(l.type===CSSRule.IMPORT_RULE){let f=c+1;const d=l.href,h=Tb(d).then(m=>zb(m,t)).then(m=>Lb(m).forEach(g=>{try{a.insertRule(g,g.startsWith("@import")?f+=1:a.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:g,error:_})}})).catch(m=>{console.error("Error loading remote css",m.toString())});i.push(h)}})}catch(l){const c=e.find(f=>f.href==null)||document.styleSheets[0];a.href!=null&&i.push(Tb(a.href).then(f=>zb(f,t)).then(f=>Lb(f).forEach(d=>{c.insertRule(d,c.cssRules.length)})).catch(f=>{console.error("Error loading remote stylesheet",f)})),console.error("Error inlining remote css file",l)}}),Promise.all(i).then(()=>(e.forEach(a=>{if("cssRules"in a)try{Hs(a.cssRules||[]).forEach(l=>{n.push(l)})}catch(l){console.error(`Error while reading CSS rules from ${a.href}`,l)}}),n))}function JR(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>DE(t.style.getPropertyValue("src")))}async function ej(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Hs(e.ownerDocument.styleSheets),i=await QR(n,t);return JR(i)}function CE(e){return e.trim().replace(/["']/g,"")}function tj(e){const t=new Set;function n(i){(i.style.fontFamily||getComputedStyle(i).fontFamily).split(",").forEach(l=>{t.add(CE(l))}),Array.from(i.children).forEach(l=>{l instanceof HTMLElement&&n(l)})}return n(e),t}async function nj(e,t){const n=await ej(e,t),i=tj(e);return(await Promise.all(n.filter(l=>i.has(CE(l.style.fontFamily))).map(l=>{const c=l.parentStyleSheet?l.parentStyleSheet.href:null;return EE(l.cssText,c,t)}))).join(`
`)}async function rj(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await nj(e,t);if(n){const i=document.createElement("style"),a=document.createTextNode(n);i.appendChild(a),e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}}async function ij(e,t={}){const{width:n,height:i}=_E(e,t),a=await sm(e,t,!0);return await rj(a,t),await SE(a,t),WR(a,t),await bR(a,n,i)}async function aj(e,t={}){const{width:n,height:i}=_E(e,t),a=await ij(e,t),l=await Ad(a),c=document.createElement("canvas"),f=c.getContext("2d"),d=t.pixelRatio||yR(),h=t.canvasWidth||n,m=t.canvasHeight||i;return c.width=h*d,c.height=m*d,t.skipAutoScale||_R(c),c.style.width=`${h}`,c.style.height=`${m}`,t.backgroundColor&&(f.fillStyle=t.backgroundColor,f.fillRect(0,0,c.width,c.height)),f.drawImage(l,0,0,c.width,c.height),c}async function sj(e,t={}){return(await aj(e,t)).toDataURL()}const oj=({isOpen:e,onClose:t,contourInfo:n})=>{const[i,a]=W.useState("Lageplan Karte"),[l,c]=W.useState(""),[f,d]=W.useState("landscape"),[h,m]=W.useState(!1),g=()=>{if(!n||!n.showImmissionGrid)return"";if(!n.hasDetailedData)return"Immissions-Konturplot: Gesamt";switch(n.displayMode){case"esq":return"Immissions-Konturplot: ESQ-Quellen";case"trassen":return"Immissions-Konturplot: Übertragungsleitungen";case"total":default:return"Immissions-Konturplot: Gesamt (ESQ + Übertragungsleitungen)"}},_=async()=>{m(!0);try{const x=document.getElementById("map-container"),D=document.querySelector(".leaflet-container");if(!D||!x){alert("Karte konnte nicht gefunden werden.");return}const y=D.querySelector(".leaflet-control-container");y&&(y.style.display="none");const S=await sj(x,{quality:1,backgroundColor:"#ffffff",width:x.offsetWidth,height:x.offsetHeight,filter:A=>A.classList&&(A.classList.contains("print-hide")||A.classList.contains("leaflet-control-zoom")||A.classList.contains("leaflet-control-attribution"))?!1:(A.classList&&(A.classList.contains("contour-legend-container")||A.classList.contains("immission-legend-container")||A.classList.contains("leaflet-control-legend-d3")),!0)});y&&(y.style.display="");const w=window.open("","_blank");if(!w){alert("Bitte erlauben Sie Pop-ups für diese Website, um zu drucken.");return}w.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${i}</title>
          <style>
            @page {
              size: ${f};
              margin: 1cm;
            }
            body {
              margin: 0;
              padding: 0;
              font-family: Arial, sans-serif;
            }
            .print-header {
              text-align: center;
              font-size: 24px;
              font-weight: bold;
              padding: 20px;
              margin-bottom: 20px;
              border-bottom: 2px solid #333;
            }
            .contour-info {
              text-align: center;
              font-size: 14px;
              font-style: italic;
              color: #666;
              margin-bottom: 15px;
              padding: 8px;
              background-color: #f8f9fa;
              border-radius: 4px;
            }
            .additional-text {
              font-size: 14px;
              line-height: 1.5;
              margin: 20px 0;
              padding: 12px;
              background-color: #f9f9f9;
              border-left: 4px solid #007bff;
              white-space: pre-wrap;
            }
            .map-image {
              width: 100%;
              height: auto;
              max-height: 80vh;
              object-fit: contain;
            }
            @media print {
              body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
            }
          </style>
        </head>
        <body>
          <div class="print-header">${i}</div>
          ${l?`<div class="additional-text">${l}</div>`:""}
          ${g()?`<div class="contour-info">${g()}</div>`:""}
          <img src="${S}" class="map-image" />
          <script>
            window.onload = function() {
              setTimeout(function() {
                window.print();
                window.close();
              }, 500);
            };
          <\/script>
        </body>
        </html>
      `),w.document.close(),t()}catch(x){console.error("Fehler beim Erstellen des Druckbilds:",x),alert("Es gab einen Fehler beim Vorbereiten des Drucks. Bitte versuchen Sie es erneut.")}finally{m(!1)}};return b.jsx(Vr,{open:e,onOpenChange:t,children:b.jsxs(Yr,{className:"sm:max-w-[425px]",children:[b.jsx(Xr,{children:b.jsxs(Wr,{className:"flex items-center gap-2",children:[b.jsx(K0,{className:"h-5 w-5"}),"Karte drucken"]})}),b.jsxs("div",{className:"grid gap-4 py-4",children:[b.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[b.jsx(ot,{htmlFor:"header",className:"text-right",children:"Überschrift:"}),b.jsx(Lt,{id:"header",value:i,onChange:x=>a(x.target.value),className:"col-span-3",placeholder:"Geben Sie eine Überschrift ein..."})]}),b.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[b.jsx(ot,{htmlFor:"additionalText",className:"text-right pt-2",children:"Zusätzlicher Text:"}),b.jsx(vE,{id:"additionalText",value:l,onChange:x=>c(x.target.value),className:"col-span-3",placeholder:"Optionaler Text für den Ausdruck...",rows:3})]}),b.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[b.jsx(ot,{htmlFor:"orientation",className:"text-right",children:"Ausrichtung:"}),b.jsxs("select",{id:"orientation",value:f,onChange:x=>d(x.target.value),className:"col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[b.jsx("option",{value:"landscape",children:"Querformat"}),b.jsx("option",{value:"portrait",children:"Hochformat"})]})]}),b.jsxs("div",{className:"text-sm text-gray-600",children:[b.jsx("p",{children:"Die Karte wird mit der aktuellen Ansicht gedruckt."}),b.jsx("p",{className:"mt-2",children:"Hinweis: Für beste Ergebnisse:"}),b.jsxs("ul",{className:"list-disc list-inside mt-1",children:[b.jsx("li",{children:"Stellen Sie die gewünschte Ansicht ein"}),b.jsx("li",{children:"Aktivieren Sie Hintergrundgrafiken"})]})]})]}),b.jsxs(Yc,{children:[b.jsx(st,{variant:"outline",onClick:t,disabled:h,children:"Abbrechen"}),b.jsxs(st,{onClick:_,disabled:h,className:"flex items-center gap-2",children:[b.jsx(K0,{className:"h-4 w-4"}),h?"Verarbeitung...":"Drucken"]})]})]})})},lj=({transform:e,position:t="bottomleft"})=>{const n=Fd(),[i,a]=W.useState(null);if(W.useEffect(()=>{if(!e){a(null);return}const c=()=>{const f=n.getContainer().offsetWidth,d=Math.min(200,f/4),h=n.containerPointToLatLng([0,n.getContainer().offsetHeight/2]),m=n.containerPointToLatLng([d,n.getContainer().offsetHeight/2]),[g,_]=e.pixelToGK(h.lng,h.lat),[x,D]=e.pixelToGK(m.lng,m.lat),y=Math.sqrt(Math.pow(x-g,2)+Math.pow(D-_,2)),S=[1,2,5,10,20,25,50,100,200,250,500,1e3,2e3,2500,5e3,1e4,2e4,25e3,5e4,1e5];let w=S[0];for(const z of S)if(z<=y)w=z;else break;const A=w/y*d;let N;w>=1e3?N=`${w/1e3} km`:N=`${w} m`,a({width:Math.round(A),label:N})};return n.on("zoomend",c),n.on("moveend",c),c(),()=>{n.off("zoomend",c),n.off("moveend",c)}},[n,e]),!i||!e)return null;const l={bottomleft:{bottom:"10px",left:"10px"},bottomright:{bottom:"10px",right:"10px"},topleft:{top:"10px",left:"10px"},topright:{top:"10px",right:"10px"}};return b.jsxs("div",{className:"leaflet-control-scale leaflet-control",style:{position:"absolute",...l[t],zIndex:1e3,background:"rgba(255, 255, 255, 0.8)",padding:"5px 10px",borderRadius:"4px",boxShadow:"0 1px 5px rgba(0,0,0,0.4)",fontSize:"11px",lineHeight:"1.5"},children:[b.jsx("div",{style:{marginBottom:"2px",fontWeight:"bold",color:"#333"},children:"GK Koordinatensystem"}),b.jsxs("div",{style:{position:"relative"},children:[b.jsxs("div",{style:{width:`${i.width}px`,height:"4px",border:"1px solid #333",borderTop:"none",background:"white",position:"relative"},children:[b.jsx("div",{style:{position:"absolute",left:"0",top:"-1px",width:"1px",height:"6px",background:"#333"}}),b.jsx("div",{style:{position:"absolute",right:"0",top:"-1px",width:"1px",height:"6px",background:"#333"}})]}),b.jsx("div",{style:{marginTop:"2px",textAlign:"center",color:"#333",fontWeight:"bold"},children:i.label})]})]})},uj=({transform:e,imageHeight:t,imageWidth:n})=>{const[i,a]=W.useState(null),l=Yt(),{editMode:c,selectedElementType:f,addHoehenpunkt:d,addESQ:h,addImmissionPoint:m,dtmProcessor:g,immissionGrid:_,showImmissionGrid:x,getInterpolatedGridValue:D,getInterpolatedDetailedGridValue:y}=l;if(Mg({mousemove:w=>{const{lat:A,lng:N}=w.latlng,z=N,k=t-A,M=z>=0&&z<=n&&A>=0&&A<=t;if(e&&M){const[B,P]=e.pixelToGK(z,A);let R=null;if(g)try{const U={Rechts:B,Hoch:P};R=g.berechneHoeheDGM(U)}catch(U){console.error("Error calculating terrain height",U)}let H=null;if(x&&_.length>0){const U=l.immissionGridDetailed||[],I=l.contourDisplayMode||"total";U.length>0&&I!=="total"?H=y(z,A,n,t,I):H=D(z,A,n,t)}a({pixel:[z,k],gk:[B,P],terrainHeight:R,gridImmission:H})}else a(e&&!M?{pixel:[z,k],gk:[0,0],terrainHeight:null,gridImmission:null}:{pixel:[z,k],gk:[0,0],terrainHeight:null,gridImmission:null})},mouseout:()=>{a(null)},click:w=>{if(c==="add"&&e){const{lat:A,lng:N}=w.latlng,[z,k]=e.pixelToGK(N,A),M={GK:{Rechts:z,Hoch:k},z:50};f==="hoehenpunkt"?d(M):f==="immissionpoint"?m(M):f==="esq"&&h(M)}}}),!i)return null;const S=w=>w<35?"#22c55e":w<45?"#84cc16":w<55?"#eab308":w<65?"#f97316":"#ef4444";return b.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1e3,fontSize:"12px",fontFamily:"monospace",minWidth:"200px"},children:[b.jsxs("div",{style:{marginBottom:"4px"},children:[b.jsx("strong",{children:"Pixel:"})," (",i.pixel[0].toFixed(1),","," ",i.pixel[1].toFixed(1),")"]}),e&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"4px"},children:[b.jsx("strong",{children:"GK:"})," (",i.gk[0].toFixed(2),","," ",i.gk[1].toFixed(2),")"]}),i.terrainHeight!==null&&b.jsxs("div",{style:{marginBottom:"4px"},children:[b.jsx("strong",{children:"Geländehöhe:"})," ",i.terrainHeight.toFixed(1)," ","m"]}),i.gridImmission!==null&&b.jsxs("div",{style:{padding:"4px",marginTop:"6px",borderRadius:"3px",backgroundColor:S(i.gridImmission)+"20",border:`1px solid ${S(i.gridImmission)}`},children:[b.jsx("strong",{children:(()=>{const w=l.immissionGridDetailed||[],A=l.contourDisplayMode||"total";if(w.length>0&&A!=="total")switch(A){case"esq":return"Immission (ESQ only):";case"trassen":return"Immission (Trassen only):";default:return"Immission (Grid):"}return"Immission (Grid):"})()}),b.jsxs("span",{style:{marginLeft:"4px",fontWeight:"bold",color:S(i.gridImmission)},children:[i.gridImmission.toFixed(1)," dB(A)"]})]})]})]})},Fb=(e,t,n)=>{const i=n?18:t?14:12,a=n?3:2,l=i+a*2;return fr.divIcon({className:`custom-marker ${n?"marker-focused":""} ${t?"marker-highlighted":""}`,html:`<div style="
      background-color: ${e};
      width: ${i}px;
      height: ${i}px;
      border-radius: 50%;
      border: ${a}px solid ${n?"#ffff00":"white"};
      box-shadow: ${n?"0 0 10px 2px rgba(255,255,0,0.5), 0 2px 4px rgba(0,0,0,0.3)":"0 2px 4px rgba(0,0,0,0.3)"};
      ${n?"animation: pulse 1.5s ease-in-out infinite;":""}
    "></div>`,iconSize:[l,l],iconAnchor:[l/2,l/2]})},cj=e=>fr.divIcon({className:"reference-marker",html:`<div style="
      background-color: #ff00ff;
      width: 20px;
      height: 20px;
      border-radius: 3px;
      border: 2px solid #000;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 12px;
    ">${e}</div>`,iconSize:[24,24],iconAnchor:[12,12]}),fj=(e,t)=>{const n=t?22:e?18:16,i=t?3:2,a=n+i*2,l=e?"#D2691E":"#8B4513";return fr.divIcon({className:`mast-marker ${t?"marker-focused":""} ${e?"marker-highlighted":""}`,html:`<div style="
      background-color: ${l};
      width: ${n}px;
      height: ${n}px;
      border-radius: 2px;
      border: ${i}px solid ${t?"#ffff00":"#654321"};
      box-shadow: ${t?"0 0 10px 2px rgba(255,255,0,0.5), 0 2px 4px rgba(0,0,0,0.5)":"0 2px 4px rgba(0,0,0,0.5)"};
      display: flex;
      align-items: center;
      justify-content: center;
      ${t?"animation: pulse 1.5s ease-in-out infinite;":""}
    ">
      <div style="
        width: ${n*.5}px;
        height: ${n*.5}px;
        background-color: #fff;
        border-radius: 50%;
      "></div>
    </div>`,iconSize:[a,a],iconAnchor:[a/2,a/2]})},hj=e=>{const n=(i=>i<35?"#22c55e":i<45?"#84cc16":i<55?"#eab308":i<65?"#f97316":"#ef4444")(e);return fr.divIcon({className:"grid-point-marker",html:`<div style="
      background-color: ${n};
      width: 6px;
      height: 6px;
      border-radius: 50%;
      border: 1px solid rgba(0,0,0,0.3);
      box-shadow: 0 1px 2px rgba(0,0,0,0.3);
    "></div>`,iconSize:[8,8],iconAnchor:[4,4]})},dj=({imageWidth:e,imageHeight:t,onTransformUpdate:n,showTrassen:i=!0,showDGM:a=!1,showContour:l=!1,onDimensionsUpdate:c})=>{const{originalData:f,projectImage:d,imageWidth:h,imageHeight:m,referencePoints:g,hoehenpunkte:_,esqSources:x,immissionPoints:D,trassenNew:y,poles:S,dgmDreiecke:w,dgmKanten:A,immissionGrid:N,immissionGridSettings:z,showImmissionGrid:k,showGridPoints:M,showImmissionPoints:B,showESQPoints:P,showHoehenpunkte:R,showPoles:H,showReferencePoints:U,deleteHoehenpunkt:I,deleteESQ:X,deleteImmissionPoint:j,deletePole:J,getCachedImmissionValue:q,immissionGridDetailed:ne,setContourDisplayMode:V,contourDisplayMode:Q,selectedMarkerType:Z,focusedMarkerId:$,markerHighlightColors:ee,setSelectedMarkerType:se,focusToNextMarker:oe,focusToPreviousMarker:he,clearMarkerSelection:ge}=Yt(),Re=h||e||893,Le=m||t||639,{confirm:Ge}=am(),Ke=f||{},[Qe,$e]=W.useState(!1),[Ve,G]=W.useState({width:Re,height:Le}),[ke,Se]=W.useState(null),ae=a,ie=i,de=l,[Fe,Oe]=W.useState(null),xe=W.useRef(null),[te,le]=W.useState(!1),ue=W.useCallback((ye,we,me)=>new Promise((De,je)=>{const Xe=new Image;Xe.onload=()=>{const Ye=document.createElement("canvas"),We=Ye.getContext("2d");if(!We){je(new Error("Could not get canvas context"));return}Ye.width=we,Ye.height=me,We.drawImage(Xe,0,0,we,me);const gt=Ye.toDataURL("image/png");De(gt)},Xe.onerror=()=>je(new Error("Failed to load image")),Xe.src=ye}),[]);W.useEffect(()=>{d&&Re&&Le?(console.log("Scaling image to dimensions:",{imageWidth:Re,imageHeight:Le,projectImage:d.substring(0,50)+"..."}),ue(d,Re,Le).then(ye=>{console.log("Image scaling completed successfully"),Se(ye),$e(!0)}).catch(ye=>{console.error("Failed to scale image:",ye),Se(d),$e(!0)})):d?(Se(d),$e(!0)):(Se(null),$e(!1))},[d,Re,Le,ue]),W.useEffect(()=>{G({width:Re,height:Le}),c?.({width:Re,height:Le})},[Re,Le,c]),W.useEffect(()=>{const ye=we=>{const me=we.target;me&&(me.tagName==="INPUT"||me.tagName==="TEXTAREA"||me.contentEditable==="true"||me.isContentEditable)||(we.key==="1"?(se("hoehenpunkt"),we.preventDefault()):we.key==="2"?(se("immissionpoint"),we.preventDefault()):we.key==="3"?(se("esq"),we.preventDefault()):we.key==="4"?(se("pole"),we.preventDefault()):we.key==="Tab"&&Z?(we.preventDefault(),we.shiftKey?he():oe()):we.key==="Escape"&&(ge(),we.preventDefault()))};return window.addEventListener("keydown",ye),()=>{window.removeEventListener("keydown",ye)}},[se,oe,he,ge,Z]),W.useEffect(()=>{if(Ve.height!==0)if(g.length>=2){const ye=g.map(me=>({gkRechts:me.gkRechts,gkHoch:me.gkHoch,pixelX:me.pixelX,pixelY:Ve.height-me.pixelY})),we=new U0(ye);xe.current=we,Oe(we),n?.(we)}else{console.log("Running in fallback mode");const ye=[],we=["A","B"];for(const me of we){const De=`GKR_${me}`,je=`GKH_${me}`,Xe=`PX_${me}`,Ye=`PY_${me}`;Ke[De]!==void 0&&Ke[je]!==void 0&&Ke[Xe]!==void 0&&Ke[Ye]!==void 0&&ye.push({gkRechts:Ke[De],gkHoch:Ke[je],pixelX:Ke[Xe],pixelY:Ve.height-Ke[Ye]})}if(ye.length>=2){const me=new U0(ye);xe.current=me,Oe(me),n?.(me)}else xe.current=null,Oe(null),n?.(null)}},[Ve.height,g]);const ve=[[0,0],[Ve.height,Ve.width]],Ne=(ye,we)=>{const me=Z===ye,De=$===we,je=ee.get(ye);if(!je)return Fb({hoehenpunkt:"#44ff44",immissionpoint:"#ff4444",esq:"#4444ff"}[ye],me,De);const Xe=De?je.focused:me?je.highlighted:je.normal;return Fb(Xe,me,De)},Ce=ye=>fj(Z==="pole",$===ye),Ie=(ye,we)=>{if(!Fe)return null;const[me,De]=Fe.gkToPixel(ye,we);return[De,me]};return b.jsxs("div",{id:"map-container",style:{height:"800px",width:"100%",position:"relative"},children:[b.jsx(oj,{isOpen:te,onClose:()=>le(!1),contourInfo:{showImmissionGrid:k,displayMode:Q||"total",hasDetailedData:ne&&ne.length>0||!1}}),ke&&b.jsx(st,{onClick:()=>le(!0),className:"absolute top-24 left-4 z-[1000] shadow-md print-hide bg-white",title:"Karte drucken",children:b.jsx(K0,{className:"h-5 w-5",color:"black"})}),ke&&k&&Array.isArray(ne)&&ne.length>0&&b.jsxs("div",{className:"absolute top-36 left-4 z-[1000] shadow-md print-hide bg-white rounded-md p-2",children:[b.jsx("div",{className:"text-xs font-medium mb-1 text-gray-700",children:"Contour Display:"}),b.jsxs("div",{className:"flex flex-col space-y-1",children:[b.jsx(st,{onClick:()=>V("total"),variant:Q==="total"?"default":"outline",size:"sm",className:"text-xs h-8",title:"Show total immission (ESQ + Transmission Lines)",children:"Total"}),b.jsx(st,{onClick:()=>V("esq"),variant:Q==="esq"?"default":"outline",size:"sm",className:"text-xs h-8",title:"Show ESQ sources only",children:"ESQ"}),b.jsx(st,{onClick:()=>V("trassen"),variant:Q==="trassen"?"default":"outline",size:"sm",className:"text-xs h-8",title:"Show transmission lines only",children:"Trassen"})]})]}),!ke&&b.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxWidth:"400px"},children:[b.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"15px",color:"#333"},children:"Kein Projekt geladen"}),b.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"20px"},children:"Bitte verwenden Sie die Menüleiste, um:"}),b.jsxs("ul",{style:{textAlign:"left",fontSize:"14px",color:"#666",paddingLeft:"20px"},children:[b.jsx("li",{children:"Ein neues Projekt zu erstellen"}),b.jsx("li",{children:"Ein gespeichertes Projekt zu öffnen"})]})]}),Qe&&b.jsxs(kS,{crs:fr.CRS.Simple,bounds:ve,style:{height:"100%",width:"100%"},minZoom:-10,maxZoom:10,children:[b.jsx(uj,{transform:Fe,imageHeight:Ve.height,imageWidth:Ve.width}),b.jsx(Z6,{imageHeight:Ve.height}),Fe&&b.jsxs(b.Fragment,{children:[b.jsx(fR,{transform:Fe,imageHeight:Ve.height}),b.jsx(lj,{transform:Fe,position:"bottomleft"})]}),ke&&b.jsx(NS,{url:ke,bounds:ve}),de&&b.jsx(HF,{width:Ve.width,height:Ve.height,dgmDreiecke:w,transform:Fe,gridSize:25,thresholds:15,opacity:.5}),k&&N.length>0&&b.jsx(GF,{width:Ve.width,height:Ve.height,transform:Fe,gridValues:N,gridValuesDetailed:ne,displayMode:Q,opacity:z.opacity,thresholds:15}),M&&N.length>0&&N.map((ye,we)=>{const me=ye.y,De=ye.x;return b.jsx(N0,{position:[me,De],icon:hj(ye.value),eventHandlers:{click:je=>{fr.DomEvent.stopPropagation(je)}},children:b.jsx(Gl,{children:b.jsxs("div",{style:{fontSize:"12px"},children:[b.jsxs("strong",{children:["Gitterpunkt #",we+1]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Immissionswert:"}),b.jsxs("span",{style:{marginLeft:"4px",fontWeight:"bold",color:ye.value<35?"#22c55e":ye.value<45?"#84cc16":ye.value<55?"#eab308":ye.value<65?"#f97316":"#ef4444"},children:[ye.value.toFixed(2)," dB(A)"]}),b.jsx("br",{}),b.jsx("strong",{children:"Position:"}),b.jsx("br",{}),"Pixel: (",ye.x.toFixed(1),","," ",(Ve.height-ye.y).toFixed(1),")"]})})},`grid-point-${we}`)}),U&&g.map(ye=>b.jsx(N0,{position:[Ve.height-ye.pixelY,ye.pixelX],icon:cj(ye.label),children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsxs("strong",{children:["Referenzpunkt ",ye.label]}),b.jsx("br",{}),"Pixel: (",ye.pixelX,", ",ye.pixelY,")",b.jsx("br",{}),"GK Rechts: ",ye.gkRechts.toFixed(2),b.jsx("br",{}),"GK Hoch: ",ye.gkHoch.toFixed(2)]})})},ye.id)),B&&Array.from(D.entries()).map(([ye,we])=>{const me=Ie(we.Position.GK.Rechts,we.Position.GK.Hoch);return me?b.jsx(Fh,{id:ye,type:"immissionpoint",position:me,icon:Ne("immissionpoint",ye),onDelete:async()=>{await Ge("Immissionspunkt löschen?")&&j(ye)},popupContent:b.jsxs("div",{children:[b.jsxs("strong",{children:["Immissionspunkt: ",we.Name]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Berechneter Wert:"}),b.jsx("br",{}),b.jsxs("span",{style:{fontSize:"14px",fontWeight:"bold",color:"#d9534f",backgroundColor:"#f9f2f4",padding:"2px 6px",borderRadius:"3px",border:"1px solid #ebccd1"},children:[q(ye).toFixed(2)," dB(A)"]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Pixel Koordinaten:"}),b.jsx("br",{}),"X: ",me[1].toFixed(1),", Y: ",me[0].toFixed(1),b.jsx("br",{}),b.jsx("strong",{children:"GK Koordinaten:"}),b.jsx("br",{}),"Rechts: ",we.Position.GK.Rechts.toFixed(2),b.jsx("br",{}),"Hoch: ",we.Position.GK.Hoch.toFixed(2),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Höhe: ",we.Position.z.toFixed(2)," m",b.jsx("br",{}),"Höhenoffset: ",we.HeightOffset," m"]})},`immission-${ye}`):null}),P&&Array.from(x.entries()).map(([ye,we])=>{const me=Ie(we.Position.GK.Rechts,we.Position.GK.Hoch);return me?b.jsx(Fh,{id:ye,type:"esq",position:me,icon:Ne("esq",ye),onDelete:async()=>{await Ge("ESQ löschen?")&&X(ye)},popupContent:b.jsxs("div",{children:[b.jsxs("strong",{children:["ESQ: ",we.Bezeichnung]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Pixel Koordinaten:"}),b.jsx("br",{}),"X: ",me[1].toFixed(1),", Y: ",me[0].toFixed(1),b.jsx("br",{}),b.jsx("strong",{children:"GK Koordinaten:"}),b.jsx("br",{}),"Rechts: ",we.Position.GK.Rechts.toFixed(2),b.jsx("br",{}),"Hoch: ",we.Position.GK.Hoch.toFixed(2),b.jsx("br",{}),"Z (Gelände): ",we.Position.z.toFixed(2)," m",b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Höhe über Grund: ",we.Hoehe.toFixed(2)," m",b.jsx("br",{}),"Gesamthöhe: ",(we.Position.z+we.Hoehe).toFixed(2)," ","m",b.jsx("br",{}),"Schallleistungspegel: ",we.L," dB"]})},`esq-${ye}`):null}),R&&Array.from(_.entries()).map(([ye,we])=>{const me=Ie(we.GK_Vektor.GK.Rechts,we.GK_Vektor.GK.Hoch);return me?b.jsx(Fh,{id:ye,type:"hoehenpunkt",position:me,icon:Ne("hoehenpunkt",ye),onDelete:async()=>{await Ge("Höhenpunkt löschen?")&&I(ye)},popupContent:b.jsxs("div",{children:[b.jsx("strong",{children:"Höhenpunkt"}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Pixel Koordinaten:"}),b.jsx("br",{}),"X: ",me[1].toFixed(1),", Y: ",me[0].toFixed(1),b.jsx("br",{}),b.jsx("strong",{children:"GK Koordinaten:"}),b.jsx("br",{}),"Rechts: ",we.GK_Vektor.GK.Rechts.toFixed(2),b.jsx("br",{}),"Hoch: ",we.GK_Vektor.GK.Hoch.toFixed(2),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Höhe: ",we.GK_Vektor.z.toFixed(2)," m"]})},`hoehe-${ye}`):null}),ie&&Array.from(y.entries()).map(([ye,we])=>{const me=we.poleIds.map(De=>S.get(De)).filter(Boolean);return b.jsxs(Jn.Fragment,{children:[H&&me.map((De,je)=>{if(!De)return null;const Xe=De.position;if(!Xe)return null;const Ye=Ie(Xe.GK.Rechts,Xe.GK.Hoch);return Ye?b.jsx(Fh,{id:De.id,type:"pole",position:Ye,icon:Ce(De.id),onDelete:async()=>{await Ge(`Mast "${De.name}" löschen?`)&&J(De.id)},popupContent:b.jsxs("div",{children:[b.jsxs("strong",{children:["Mast ",we.name," #",je+1]}),b.jsx("br",{}),De.name!=="No Name"&&b.jsxs(b.Fragment,{children:["Name: ",De.name,b.jsx("br",{})]}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Position:"}),b.jsx("br",{}),"GK Rechts: ",Xe.GK.Rechts.toFixed(2),b.jsx("br",{}),"GK Hoch: ",Xe.GK.Hoch.toFixed(2),b.jsx("hr",{style:{margin:"5px 0"}}),"Nullpunkt Höhe: ",De.nullpunktHeight.toFixed(2)," m",b.jsx("br",{}),"Mast Höhe: ",De.poleHeight.toFixed(2)," m",b.jsx("br",{}),"Mastspitze:"," ",(De.nullpunktHeight+De.poleHeight).toFixed(2)," ","m",b.jsx("br",{}),"Ebenen: ",De.levels?.length||0]})},`pole-${De.id}`):null}),me.map((De,je)=>{if(je===me.length-1)return null;const Xe=me[je+1],Ye=De?.position,We=Xe?.position;if(!Ye||!We)return null;const gt=Ie(Ye.GK.Rechts,Ye.GK.Hoch),zt=Ie(We.GK.Rechts,We.GK.Hoch);return!gt||!zt?null:b.jsx(dR,{mastId:De.id,nextMastId:Xe.id,mastName:De.name,nextMastName:Xe.name,trasseName:we.name,mastIndex:je,positions:[gt,zt]},`line-${ye}-${je}`)})]},`trasse-${ye}`)}),ae&&w?.map((ye,we)=>{const me=ye.A?.HP?.GK_Vektor,De=ye.B?.HP?.GK_Vektor,je=ye.C?.HP?.GK_Vektor;if(!me||!De||!je)return null;const Xe=Ie(me.GK.Rechts,me.GK.Hoch),Ye=Ie(De.GK.Rechts,De.GK.Hoch),We=Ie(je.GK.Rechts,je.GK.Hoch);if(!Xe||!Ye||!We)return null;const gt=[Xe,Ye,We];return b.jsx(TS,{positions:gt,pathOptions:{color:"#0088cc",weight:1,opacity:.6,fillColor:"#0088cc",fillOpacity:.1},children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsxs("strong",{children:["DGM Dreieck #",ye.LfdNummer]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Punkt A: Höhe ",me.z.toFixed(2)," m",b.jsx("br",{}),"Punkt B: Höhe ",De.z.toFixed(2)," m",b.jsx("br",{}),"Punkt C: Höhe ",je.z.toFixed(2)," m"]})})},`dreieck-${we}`)}),ae&&A?.map((ye,we)=>{const me=ye.EckeA?.HP?.GK_Vektor,De=ye.EckeB?.HP?.GK_Vektor;if(!me||!De)return null;const je=Ie(me.GK.Rechts,me.GK.Hoch),Xe=Ie(De.GK.Rechts,De.GK.Hoch);if(!je||!Xe)return null;const Ye=[je,Xe];return b.jsx(Zb,{positions:Ye,pathOptions:{color:"#004466",weight:2,opacity:.8,dashArray:"5, 5"},children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsx("strong",{children:"DGM Kante"}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Dreieck A: #",ye.DreieckA,b.jsx("br",{}),"Dreieck B: #",ye.DreieckB,b.jsx("br",{}),"Höhe A: ",me.z.toFixed(2)," m",b.jsx("br",{}),"Höhe B: ",De.z.toFixed(2)," m"]})})},`kante-${we}`)})]})]})},mj=()=>{const{selectedElementId:e,selectedElementType:t,isEditFormOpen:n,setEditFormOpen:i,hoehenpunkte:a,esqSources:l,immissionPoints:c,updateHoehenpunkt:f,updateESQ:d,updateImmissionPoint:h}=Yt(),[m,g]=W.useState({});if(W.useEffect(()=>{if(e){if(t==="hoehenpunkt"){const w=a.get(e);w&&g({rechts:w.GK_Vektor.GK.Rechts.toString(),hoch:w.GK_Vektor.GK.Hoch.toString(),z:w.GK_Vektor.z.toString()})}else if(t==="immissionpoint"){const w=c.get(e);w&&g({name:w.Name,rechts:w.Position.GK.Rechts.toString(),hoch:w.Position.GK.Hoch.toString(),z:w.Position.z.toString(),heightOffset:w.HeightOffset.toString(),g_bodenfaktor:w.G_Bodenfaktor.toString()})}else if(t==="esq"){const w=l.get(e);w&&g({bezeichnung:w.Bezeichnung,rechts:w.Position.GK.Rechts.toString(),hoch:w.Position.GK.Hoch.toString(),z:w.Position.z.toString(),hoehe:w.Hoehe.toString(),l:w.L.toString(),s:w.S.toString(),z_impulshaltigkeit:w.Z_Impulshaltigkeit.toString(),z_tonhaltigkeit:w.Z_Tonhaltigkeit.toString(),z_cmet:w.Z_Cmet.toString(),raumwinkelmass:w.Raumwinkelmass.toString(),schallleistungspegel:w.Schallleistungspegel,ruhezeitzuschlag:w.Ruhezeitzuschlag,beurteilungszeitraum:w.Beurteilungszeitraum.toString(),einwirkzeit:w.Einwirkzeit.toString(),zeiteinheit:w.Zeiteinheit.toString()})}}},[e,t,a,c,l]),!n||!e)return null;const _=w=>{w.preventDefault(),t==="hoehenpunkt"?f(e,{GK_Vektor:{GK:{Rechts:parseFloat(m.rechts||"0"),Hoch:parseFloat(m.hoch||"0")},z:parseFloat(m.z||"0")}}):t==="immissionpoint"?h(e,{Name:m.name||"",Position:{GK:{Rechts:parseFloat(m.rechts||"0"),Hoch:parseFloat(m.hoch||"0")},z:parseFloat(m.z||"0")},HeightOffset:parseFloat(m.heightOffset||"0"),G_Bodenfaktor:parseFloat(m.g_bodenfaktor||"0")}):t==="esq"&&d(e,{Bezeichnung:m.bezeichnung||"",Position:{GK:{Rechts:parseFloat(m.rechts||"0"),Hoch:parseFloat(m.hoch||"0")},z:parseFloat(m.z||"0")},Hoehe:parseFloat(m.hoehe||"0"),L:parseFloat(m.l||"0"),S:parseFloat(m.s||"0"),Z_Impulshaltigkeit:parseFloat(m.z_impulshaltigkeit||"0"),Z_Tonhaltigkeit:parseFloat(m.z_tonhaltigkeit||"0"),Z_Cmet:parseFloat(m.z_cmet||"0"),Raumwinkelmass:parseInt(m.raumwinkelmass||"0")||0,Schallleistungspegel:m.schallleistungspegel||!1,Ruhezeitzuschlag:m.ruhezeitzuschlag||!1,Beurteilungszeitraum:parseInt(m.beurteilungszeitraum||"0")||0,Einwirkzeit:parseFloat(m.einwirkzeit||"0"),Zeiteinheit:parseInt(m.zeiteinheit||"0")||0}),i(!1)},x={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",zIndex:2e3,minWidth:"300px",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto"},D={width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"},y={display:"block",marginBottom:"5px",fontWeight:"bold",fontSize:"12px"},S={padding:"10px 20px",margin:"5px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"};return b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1999},onClick:()=>i(!1)}),b.jsxs("div",{style:x,children:[b.jsxs("h3",{style:{marginTop:0},children:[t==="hoehenpunkt"&&"Höhenpunkt bearbeiten",t==="immissionpoint"&&"Immissionspunkt bearbeiten",t==="esq"&&"ESQ bearbeiten"]}),b.jsxs("form",{onSubmit:_,children:[t==="hoehenpunkt"&&b.jsxs(b.Fragment,{children:[b.jsx("label",{style:y,children:"GK Rechts:"}),b.jsx("input",{style:D,type:"number",step:"0.01",value:m.rechts||"",onChange:w=>g({...m,rechts:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Hoch:"}),b.jsx("input",{style:D,type:"number",step:"0.01",value:m.hoch||"",onChange:w=>g({...m,hoch:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"Höhe (z):"}),b.jsx("input",{style:D,type:"number",step:"0.01",value:m.z||"",onChange:w=>g({...m,z:w.target.value}),required:!0})]}),t==="immissionpoint"&&b.jsxs(b.Fragment,{children:[b.jsx("label",{style:y,children:"Name:"}),b.jsx("input",{style:D,type:"text",value:m.name||"",onChange:w=>g({...m,name:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Rechts:"}),b.jsx("input",{style:D,type:"number",step:"0.01",value:m.rechts||"",onChange:w=>g({...m,rechts:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Hoch:"}),b.jsx("input",{style:D,type:"number",step:"0.01",value:m.hoch||"",onChange:w=>g({...m,hoch:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"Höhe (z):"}),b.jsx("input",{style:D,type:"number",step:"0.01",value:m.z||"",onChange:w=>g({...m,z:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"Höhenoffset:"}),b.jsx("input",{style:D,type:"number",step:"0.1",value:m.heightOffset||0,onChange:w=>g({...m,heightOffset:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"Bodenfaktor (G):"}),b.jsx("input",{style:D,type:"number",step:"0.01",value:m.g_bodenfaktor||"",onChange:w=>g({...m,g_bodenfaktor:w.target.value}),required:!0})]}),t==="esq"&&b.jsxs(b.Fragment,{children:[b.jsx("label",{style:y,children:"Bezeichnung:"}),b.jsx("input",{style:D,type:"text",value:m.bezeichnung||"",onChange:w=>g({...m,bezeichnung:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Rechts:"}),b.jsx("input",{disabled:!0,style:D,type:"number",step:"0.01",value:m.rechts||"",onChange:w=>g({...m,rechts:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Hoch:"}),b.jsx("input",{disabled:!0,style:D,type:"number",step:"0.01",value:m.hoch||"",onChange:w=>g({...m,hoch:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"Position Höhe (z):"}),b.jsx("input",{disabled:!0,style:D,type:"number",step:"0.01",value:m.z||"",onChange:w=>g({...m,z:w.target.value}),required:!0}),b.jsx("label",{style:{...y,color:"red"},children:"Höhe:"}),b.jsx("input",{style:{...D,color:"red"},type:"number",step:"0.01",value:m.hoehe||"",onChange:w=>g({...m,hoehe:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"Schallleistungspegel (L):"}),b.jsx("input",{style:D,type:"number",step:"0.1",value:m.l||"",onChange:w=>g({...m,l:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"S:"}),b.jsx("input",{style:D,type:"number",step:"0.1",value:m.s||"",onChange:w=>g({...m,s:w.target.value})}),b.jsx("label",{style:y,children:"Z Impulshaltigkeit:"}),b.jsx("input",{style:D,type:"number",step:"0.1",value:m.z_impulshaltigkeit||"",onChange:w=>g({...m,z_impulshaltigkeit:w.target.value})}),b.jsx("label",{style:y,children:"Z Tonhaltigkeit:"}),b.jsx("input",{style:D,type:"number",step:"0.1",value:m.z_tonhaltigkeit||"",onChange:w=>g({...m,z_tonhaltigkeit:w.target.value})}),b.jsx("label",{style:y,children:"Z Cmet:"}),b.jsx("input",{style:D,type:"number",step:"0.1",value:m.z_cmet||"",onChange:w=>g({...m,z_cmet:w.target.value})}),b.jsx("label",{style:y,children:"Raumwinkelmass:"}),b.jsxs("select",{style:D,value:m.raumwinkelmass??"0",onChange:w=>g({...m,raumwinkelmass:w.target.value}),required:!0,children:[b.jsx("option",{value:"0",children:"0"}),b.jsx("option",{value:"3",children:"3"}),b.jsx("option",{value:"6",children:"6"}),b.jsx("option",{value:"9",children:"9"})]}),b.jsxs("label",{style:{...y,display:"flex",alignItems:"center"},children:[b.jsx("input",{type:"checkbox",checked:m.schallleistungspegel||!1,onChange:w=>g({...m,schallleistungspegel:w.target.checked}),style:{marginRight:"5px"}}),"Schallleistungspegel"]}),b.jsxs("label",{style:{...y,display:"flex",alignItems:"center"},children:[b.jsx("input",{type:"checkbox",checked:m.ruhezeitzuschlag||!1,onChange:w=>g({...m,ruhezeitzuschlag:w.target.checked}),style:{marginRight:"5px"}}),"Ruhezeitzuschlag"]}),b.jsx("label",{style:y,children:"Beurteilungszeitraum:"}),b.jsxs("select",{style:D,value:m.beurteilungszeitraum??"0",onChange:w=>g({...m,beurteilungszeitraum:w.target.value}),required:!0,children:[b.jsx("option",{value:"0",children:"0 - Tag (6:00-22:00)"}),b.jsx("option",{value:"1",children:"1 - Nacht (22:00-6:00)"}),b.jsx("option",{value:"2",children:"2 - Lauteste Stunde"})]}),b.jsx("label",{style:y,children:"Einwirkzeit:"}),b.jsx("input",{style:D,type:"number",step:"0.1",value:m.einwirkzeit||"",onChange:w=>g({...m,einwirkzeit:w.target.value}),required:!0}),b.jsx("label",{style:y,children:"Zeiteinheit:"}),b.jsxs("select",{style:D,value:m.zeiteinheit??"0",onChange:w=>g({...m,zeiteinheit:w.target.value}),required:!0,children:[b.jsx("option",{value:"0",children:"0 - Sekunden"}),b.jsx("option",{value:"1",children:"1 - Minuten"}),b.jsx("option",{value:"2",children:"2 - Stunden"})]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[b.jsx("button",{type:"button",style:{...S,background:"#f5f5f5",color:"#333"},onClick:()=>i(!1),children:"Abbrechen"}),b.jsx("button",{type:"submit",style:{...S,background:"#4CAF50",color:"white"},children:"Speichern"})]})]})]})]})};function Rh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var C0={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Rb;function pj(){return Rb||(Rb=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(i,a,l){function c(h,m){if(!a[h]){if(!i[h]){var g=typeof Rh=="function"&&Rh;if(!m&&g)return g(h,!0);if(f)return f(h,!0);var _=new Error("Cannot find module '"+h+"'");throw _.code="MODULE_NOT_FOUND",_}var x=a[h]={exports:{}};i[h][0].call(x.exports,function(D){var y=i[h][1][D];return c(y||D)},x,x.exports,n,i,a,l)}return a[h].exports}for(var f=typeof Rh=="function"&&Rh,d=0;d<l.length;d++)c(l[d]);return c})({1:[function(n,i,a){var l=n("./utils"),c=n("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(d){for(var h,m,g,_,x,D,y,S=[],w=0,A=d.length,N=A,z=l.getTypeOf(d)!=="string";w<d.length;)N=A-w,g=z?(h=d[w++],m=w<A?d[w++]:0,w<A?d[w++]:0):(h=d.charCodeAt(w++),m=w<A?d.charCodeAt(w++):0,w<A?d.charCodeAt(w++):0),_=h>>2,x=(3&h)<<4|m>>4,D=1<N?(15&m)<<2|g>>6:64,y=2<N?63&g:64,S.push(f.charAt(_)+f.charAt(x)+f.charAt(D)+f.charAt(y));return S.join("")},a.decode=function(d){var h,m,g,_,x,D,y=0,S=0,w="data:";if(d.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var A,N=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===f.charAt(64)&&N--,d.charAt(d.length-2)===f.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=c.uint8array?new Uint8Array(0|N):new Array(0|N);y<d.length;)h=f.indexOf(d.charAt(y++))<<2|(_=f.indexOf(d.charAt(y++)))>>4,m=(15&_)<<4|(x=f.indexOf(d.charAt(y++)))>>2,g=(3&x)<<6|(D=f.indexOf(d.charAt(y++))),A[S++]=h,x!==64&&(A[S++]=m),D!==64&&(A[S++]=g);return A}},{"./support":30,"./utils":32}],2:[function(n,i,a){var l=n("./external"),c=n("./stream/DataWorker"),f=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function h(m,g,_,x,D){this.compressedSize=m,this.uncompressedSize=g,this.crc32=_,this.compression=x,this.compressedContent=D}h.prototype={getContentWorker:function(){var m=new c(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),g=this;return m.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new c(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,g,_){return m.pipe(new f).pipe(new d("uncompressedSize")).pipe(g.compressWorker(_)).pipe(new d("compressedSize")).withStreamInfo("compression",g)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,a){var l=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,a){var l=n("./utils"),c=(function(){for(var f,d=[],h=0;h<256;h++){f=h;for(var m=0;m<8;m++)f=1&f?3988292384^f>>>1:f>>>1;d[h]=f}return d})();i.exports=function(f,d){return f!==void 0&&f.length?l.getTypeOf(f)!=="string"?(function(h,m,g,_){var x=c,D=_+g;h^=-1;for(var y=_;y<D;y++)h=h>>>8^x[255&(h^m[y])];return-1^h})(0|d,f,f.length,0):(function(h,m,g,_){var x=c,D=_+g;h^=-1;for(var y=_;y<D;y++)h=h>>>8^x[255&(h^m.charCodeAt(y))];return-1^h})(0|d,f,f.length,0):0}},{"./utils":32}],5:[function(n,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,i,a){var l=null;l=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:l}},{lie:37}],7:[function(n,i,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=n("pako"),f=n("./utils"),d=n("./stream/GenericWorker"),h=l?"uint8array":"array";function m(g,_){d.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=_,this.meta={}}a.magic="\b\0",f.inherits(m,d),m.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(h,g.data),!1)},m.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(_){g.push({data:_,meta:g.meta})}},a.compressWorker=function(g){return new m("Deflate",g)},a.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,a){function l(x,D){var y,S="";for(y=0;y<D;y++)S+=String.fromCharCode(255&x),x>>>=8;return S}function c(x,D,y,S,w,A){var N,z,k=x.file,M=x.compression,B=A!==h.utf8encode,P=f.transformTo("string",A(k.name)),R=f.transformTo("string",h.utf8encode(k.name)),H=k.comment,U=f.transformTo("string",A(H)),I=f.transformTo("string",h.utf8encode(H)),X=R.length!==k.name.length,j=I.length!==H.length,J="",q="",ne="",V=k.dir,Q=k.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};D&&!y||(Z.crc32=x.crc32,Z.compressedSize=x.compressedSize,Z.uncompressedSize=x.uncompressedSize);var $=0;D&&($|=8),B||!X&&!j||($|=2048);var ee=0,se=0;V&&(ee|=16),w==="UNIX"?(se=798,ee|=(function(he,ge){var Re=he;return he||(Re=ge?16893:33204),(65535&Re)<<16})(k.unixPermissions,V)):(se=20,ee|=(function(he){return 63&(he||0)})(k.dosPermissions)),N=Q.getUTCHours(),N<<=6,N|=Q.getUTCMinutes(),N<<=5,N|=Q.getUTCSeconds()/2,z=Q.getUTCFullYear()-1980,z<<=4,z|=Q.getUTCMonth()+1,z<<=5,z|=Q.getUTCDate(),X&&(q=l(1,1)+l(m(P),4)+R,J+="up"+l(q.length,2)+q),j&&(ne=l(1,1)+l(m(U),4)+I,J+="uc"+l(ne.length,2)+ne);var oe="";return oe+=`
\0`,oe+=l($,2),oe+=M.magic,oe+=l(N,2),oe+=l(z,2),oe+=l(Z.crc32,4),oe+=l(Z.compressedSize,4),oe+=l(Z.uncompressedSize,4),oe+=l(P.length,2),oe+=l(J.length,2),{fileRecord:g.LOCAL_FILE_HEADER+oe+P+J,dirRecord:g.CENTRAL_FILE_HEADER+l(se,2)+oe+l(U.length,2)+"\0\0\0\0"+l(ee,4)+l(S,4)+P+J+U}}var f=n("../utils"),d=n("../stream/GenericWorker"),h=n("../utf8"),m=n("../crc32"),g=n("../signature");function _(x,D,y,S){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=y,this.encodeFileName=S,this.streamFiles=x,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(_,d),_.prototype.push=function(x){var D=x.meta.percent||0,y=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(x):(this.bytesWritten+=x.data.length,d.prototype.push.call(this,{data:x.data,meta:{currentFile:this.currentFile,percent:y?(D+100*(y-S-1))/y:100}}))},_.prototype.openedSource=function(x){this.currentSourceOffset=this.bytesWritten,this.currentFile=x.file.name;var D=this.streamFiles&&!x.file.dir;if(D){var y=c(x,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(x){this.accumulate=!1;var D=this.streamFiles&&!x.file.dir,y=c(x,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),D)this.push({data:(function(S){return g.DATA_DESCRIPTOR+l(S.crc32,4)+l(S.compressedSize,4)+l(S.uncompressedSize,4)})(x),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var x=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var y=this.bytesWritten-x,S=(function(w,A,N,z,k){var M=f.transformTo("string",k(z));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(w,2)+l(w,2)+l(A,4)+l(N,4)+l(M.length,2)+M})(this.dirRecords.length,y,x,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(x){this._sources.push(x);var D=this;return x.on("data",function(y){D.processChunk(y)}),x.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),x.on("error",function(y){D.error(y)}),this},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(x){var D=this._sources;if(!d.prototype.error.call(this,x))return!1;for(var y=0;y<D.length;y++)try{D[y].error(x)}catch{}return!0},_.prototype.lock=function(){d.prototype.lock.call(this);for(var x=this._sources,D=0;D<x.length;D++)x[D].lock()},i.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,a){var l=n("../compressions"),c=n("./ZipFileWorker");a.generateWorker=function(f,d,h){var m=new c(d.streamFiles,h,d.platform,d.encodeFileName),g=0;try{f.forEach(function(_,x){g++;var D=(function(A,N){var z=A||N,k=l[z];if(!k)throw new Error(z+" is not a valid compression method !");return k})(x.options.compression,d.compression),y=x.options.compressionOptions||d.compressionOptions||{},S=x.dir,w=x.date;x._compressWorker(D,y).withStreamInfo("file",{name:_,dir:S,date:w,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(m)}),m.entriesCount=g}catch(_){m.error(_)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,a){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new l;for(var f in this)typeof this[f]!="function"&&(c[f]=this[f]);return c}}(l.prototype=n("./object")).loadAsync=n("./load"),l.support=n("./support"),l.defaults=n("./defaults"),l.version="3.10.1",l.loadAsync=function(c,f){return new l().loadAsync(c,f)},l.external=n("./external"),i.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,a){var l=n("./utils"),c=n("./external"),f=n("./utf8"),d=n("./zipEntries"),h=n("./stream/Crc32Probe"),m=n("./nodejsUtils");function g(_){return new c.Promise(function(x,D){var y=_.decompressed.getContentWorker().pipe(new h);y.on("error",function(S){D(S)}).on("end",function(){y.streamInfo.crc32!==_.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):x()}).resume()})}i.exports=function(_,x){var D=this;return x=l.extend(x||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),m.isNode&&m.isStream(_)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",_,!0,x.optimizedBinaryString,x.base64).then(function(y){var S=new d(x);return S.load(y),S}).then(function(y){var S=[c.Promise.resolve(y)],w=y.files;if(x.checkCRC32)for(var A=0;A<w.length;A++)S.push(g(w[A]));return c.Promise.all(S)}).then(function(y){for(var S=y.shift(),w=S.files,A=0;A<w.length;A++){var N=w[A],z=N.fileNameStr,k=l.resolve(N.fileNameStr);D.file(k,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:x.createFolders}),N.dir||(D.file(k).unsafeOriginalName=z)}return S.zipComment.length&&(D.comment=S.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,a){var l=n("../utils"),c=n("../stream/GenericWorker");function f(d,h){c.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(h)}l.inherits(f,c),f.prototype._bindStream=function(d){var h=this;(this._stream=d).pause(),d.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},f.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,a){var l=n("readable-stream").Readable;function c(f,d,h){l.call(this,d),this._helper=f;var m=this;f.on("data",function(g,_){m.push(g)||m._helper.pause(),h&&h(_)}).on("error",function(g){m.emit("error",g)}).on("end",function(){m.push(null)})}n("../utils").inherits(c,l),c.prototype._read=function(){this._helper.resume()},i.exports=c},{"../utils":32,"readable-stream":16}],14:[function(n,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,c);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,c)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var c=new Buffer(l);return c.fill(0),c},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(n,i,a){function l(k,M,B){var P,R=f.getTypeOf(M),H=f.extend(B||{},m);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(k=w(k)),H.createFolders&&(P=S(k))&&A.call(this,P,!0);var U=R==="string"&&H.binary===!1&&H.base64===!1;B&&B.binary!==void 0||(H.binary=!U),(M instanceof g&&M.uncompressedSize===0||H.dir||!M||M.length===0)&&(H.base64=!1,H.binary=!0,M="",H.compression="STORE",R="string");var I=null;I=M instanceof g||M instanceof d?M:D.isNode&&D.isStream(M)?new y(k,M):f.prepareContent(k,M,H.binary,H.optimizedBinaryString,H.base64);var X=new _(k,I,H);this.files[k]=X}var c=n("./utf8"),f=n("./utils"),d=n("./stream/GenericWorker"),h=n("./stream/StreamHelper"),m=n("./defaults"),g=n("./compressedObject"),_=n("./zipObject"),x=n("./generate"),D=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),S=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var M=k.lastIndexOf("/");return 0<M?k.substring(0,M):""},w=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},A=function(k,M){return M=M!==void 0?M:m.createFolders,k=w(k),this.files[k]||l.call(this,k,null,{dir:!0,createFolders:M}),this.files[k]};function N(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var M,B,P;for(M in this.files)P=this.files[M],(B=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&k(B,P)},filter:function(k){var M=[];return this.forEach(function(B,P){k(B,P)&&M.push(P)}),M},file:function(k,M,B){if(arguments.length!==1)return k=this.root+k,l.call(this,k,M,B),this;if(N(k)){var P=k;return this.filter(function(H,U){return!U.dir&&P.test(H)})}var R=this.files[this.root+k];return R&&!R.dir?R:null},folder:function(k){if(!k)return this;if(N(k))return this.filter(function(R,H){return H.dir&&k.test(R)});var M=this.root+k,B=A.call(this,M),P=this.clone();return P.root=B.name,P},remove:function(k){k=this.root+k;var M=this.files[k];if(M||(k.slice(-1)!=="/"&&(k+="/"),M=this.files[k]),M&&!M.dir)delete this.files[k];else for(var B=this.filter(function(R,H){return H.name.slice(0,k.length)===k}),P=0;P<B.length;P++)delete this.files[B[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var M,B={};try{if((B=f.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");f.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var P=B.comment||this.comment||"";M=x.generateWorker(this,B,P)}catch(R){(M=new d("error")).error(R)}return new h(M,B.type||"string",B.mimeType)},generateAsync:function(k,M){return this.generateInternalStream(k).accumulate(M)},generateNodeStream:function(k,M){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(M)}};i.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,a){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,a){var l=n("./DataReader");function c(f){l.call(this,f);for(var d=0;d<this.data.length;d++)f[d]=255&f[d]}n("../utils").inherits(c,l),c.prototype.byteAt=function(f){return this.data[this.zero+f]},c.prototype.lastIndexOfSignature=function(f){for(var d=f.charCodeAt(0),h=f.charCodeAt(1),m=f.charCodeAt(2),g=f.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===d&&this.data[_+1]===h&&this.data[_+2]===m&&this.data[_+3]===g)return _-this.zero;return-1},c.prototype.readAndCheckSignature=function(f){var d=f.charCodeAt(0),h=f.charCodeAt(1),m=f.charCodeAt(2),g=f.charCodeAt(3),_=this.readData(4);return d===_[0]&&h===_[1]&&m===_[2]&&g===_[3]},c.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./DataReader":18}],18:[function(n,i,a){var l=n("../utils");function c(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var d,h=0;for(this.checkOffset(f),d=this.index+f-1;d>=this.index;d--)h=(h<<8)+this.byteAt(d);return this.index+=f,h},readString:function(f){return l.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},i.exports=c},{"../utils":32}],19:[function(n,i,a){var l=n("./Uint8ArrayReader");function c(f){l.call(this,f)}n("../utils").inherits(c,l),c.prototype.readData=function(f){this.checkOffset(f);var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,a){var l=n("./DataReader");function c(f){l.call(this,f)}n("../utils").inherits(c,l),c.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},c.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},c.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},c.prototype.readData=function(f){this.checkOffset(f);var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./DataReader":18}],21:[function(n,i,a){var l=n("./ArrayReader");function c(f){l.call(this,f)}n("../utils").inherits(c,l),c.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,a){var l=n("../utils"),c=n("../support"),f=n("./ArrayReader"),d=n("./StringReader"),h=n("./NodeBufferReader"),m=n("./Uint8ArrayReader");i.exports=function(g){var _=l.getTypeOf(g);return l.checkSupport(_),_!=="string"||c.uint8array?_==="nodebuffer"?new h(g):c.uint8array?new m(l.transformTo("uint8array",g)):new f(l.transformTo("array",g)):new d(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,a){var l=n("./GenericWorker"),c=n("../utils");function f(d){l.call(this,"ConvertWorker to "+d),this.destType=d}c.inherits(f,l),f.prototype.processChunk=function(d){this.push({data:c.transformTo(this.destType,d.data),meta:d.meta})},i.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,a){var l=n("./GenericWorker"),c=n("../crc32");function f(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(f,l),f.prototype.processChunk=function(d){this.streamInfo.crc32=c(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,a){var l=n("../utils"),c=n("./GenericWorker");function f(d){c.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}l.inherits(f,c),f.prototype.processChunk=function(d){if(d){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+d.data.length}c.prototype.processChunk.call(this,d)},i.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,a){var l=n("../utils"),c=n("./GenericWorker");function f(d){c.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=l.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}l.inherits(f,c),f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,h);break;case"uint8array":d=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":d=this.data.slice(this.index,h)}return this.index=h,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,a){function l(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,f){return this._listeners[c].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,f){if(this._listeners[c])for(var d=0;d<this._listeners[c].length;d++)this._listeners[c][d].call(this,f)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var f=this;return c.on("data",function(d){f.processChunk(d)}),c.on("end",function(){f.end()}),c.on("error",function(d){f.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,f){return this.extraStreamInfo[c]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},i.exports=l},{}],29:[function(n,i,a){var l=n("../utils"),c=n("./ConvertWorker"),f=n("./GenericWorker"),d=n("../base64"),h=n("../support"),m=n("../external"),g=null;if(h.nodestream)try{g=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(D,y){return new m.Promise(function(S,w){var A=[],N=D._internalType,z=D._outputType,k=D._mimeType;D.on("data",function(M,B){A.push(M),y&&y(B)}).on("error",function(M){A=[],w(M)}).on("end",function(){try{var M=(function(B,P,R){switch(B){case"blob":return l.newBlob(l.transformTo("arraybuffer",P),R);case"base64":return d.encode(P);default:return l.transformTo(B,P)}})(z,(function(B,P){var R,H=0,U=null,I=0;for(R=0;R<P.length;R++)I+=P[R].length;switch(B){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(U=new Uint8Array(I),R=0;R<P.length;R++)U.set(P[R],H),H+=P[R].length;return U;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+B+"'")}})(N,A),k);S(M)}catch(B){w(B)}A=[]}).resume()})}function x(D,y,S){var w=y;switch(y){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=y,this._mimeType=S,l.checkSupport(w),this._worker=D.pipe(new c(w)),D.lock()}catch(A){this._worker=new f("error"),this._worker.error(A)}}x.prototype={accumulate:function(D){return _(this,D)},on:function(D,y){var S=this;return D==="data"?this._worker.on(D,function(w){y.call(S,w.data,w.meta)}):this._worker.on(D,function(){l.delay(y,arguments,S)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},D)}},i.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var l=new ArrayBuffer(0);try{a.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(l),a.blob=c.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,a){for(var l=n("./utils"),c=n("./support"),f=n("./nodejsUtils"),d=n("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function g(){d.call(this,"utf-8 decode"),this.leftOver=null}function _(){d.call(this,"utf-8 encode")}a.utf8encode=function(x){return c.nodebuffer?f.newBufferFrom(x,"utf-8"):(function(D){var y,S,w,A,N,z=D.length,k=0;for(A=0;A<z;A++)(64512&(S=D.charCodeAt(A)))==55296&&A+1<z&&(64512&(w=D.charCodeAt(A+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),A++),k+=S<128?1:S<2048?2:S<65536?3:4;for(y=c.uint8array?new Uint8Array(k):new Array(k),A=N=0;N<k;A++)(64512&(S=D.charCodeAt(A)))==55296&&A+1<z&&(64512&(w=D.charCodeAt(A+1)))==56320&&(S=65536+(S-55296<<10)+(w-56320),A++),S<128?y[N++]=S:(S<2048?y[N++]=192|S>>>6:(S<65536?y[N++]=224|S>>>12:(y[N++]=240|S>>>18,y[N++]=128|S>>>12&63),y[N++]=128|S>>>6&63),y[N++]=128|63&S);return y})(x)},a.utf8decode=function(x){return c.nodebuffer?l.transformTo("nodebuffer",x).toString("utf-8"):(function(D){var y,S,w,A,N=D.length,z=new Array(2*N);for(y=S=0;y<N;)if((w=D[y++])<128)z[S++]=w;else if(4<(A=h[w]))z[S++]=65533,y+=A-1;else{for(w&=A===2?31:A===3?15:7;1<A&&y<N;)w=w<<6|63&D[y++],A--;1<A?z[S++]=65533:w<65536?z[S++]=w:(w-=65536,z[S++]=55296|w>>10&1023,z[S++]=56320|1023&w)}return z.length!==S&&(z.subarray?z=z.subarray(0,S):z.length=S),l.applyFromCharCode(z)})(x=l.transformTo(c.uint8array?"uint8array":"array",x))},l.inherits(g,d),g.prototype.processChunk=function(x){var D=l.transformTo(c.uint8array?"uint8array":"array",x.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var y=D;(D=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),D.set(y,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var S=(function(A,N){var z;for((N=N||A.length)>A.length&&(N=A.length),z=N-1;0<=z&&(192&A[z])==128;)z--;return z<0||z===0?N:z+h[A[z]]>N?z:N})(D),w=D;S!==D.length&&(c.uint8array?(w=D.subarray(0,S),this.leftOver=D.subarray(S,D.length)):(w=D.slice(0,S),this.leftOver=D.slice(S,D.length))),this.push({data:a.utf8decode(w),meta:x.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=g,l.inherits(_,d),_.prototype.processChunk=function(x){this.push({data:a.utf8encode(x.data),meta:x.meta})},a.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,a){var l=n("./support"),c=n("./base64"),f=n("./nodejsUtils"),d=n("./external");function h(y){return y}function m(y,S){for(var w=0;w<y.length;++w)S[w]=255&y.charCodeAt(w);return S}n("setimmediate"),a.newBlob=function(y,S){a.checkSupport("blob");try{return new Blob([y],{type:S})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(y),w.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(y,S,w){var A=[],N=0,z=y.length;if(z<=w)return String.fromCharCode.apply(null,y);for(;N<z;)S==="array"||S==="nodebuffer"?A.push(String.fromCharCode.apply(null,y.slice(N,Math.min(N+w,z)))):A.push(String.fromCharCode.apply(null,y.subarray(N,Math.min(N+w,z)))),N+=w;return A.join("")},stringifyByChar:function(y){for(var S="",w=0;w<y.length;w++)S+=String.fromCharCode(y[w]);return S},applyCanBeUsed:{uint8array:(function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}})()}};function _(y){var S=65536,w=a.getTypeOf(y),A=!0;if(w==="uint8array"?A=g.applyCanBeUsed.uint8array:w==="nodebuffer"&&(A=g.applyCanBeUsed.nodebuffer),A)for(;1<S;)try{return g.stringifyByChunk(y,w,S)}catch{S=Math.floor(S/2)}return g.stringifyByChar(y)}function x(y,S){for(var w=0;w<y.length;w++)S[w]=y[w];return S}a.applyFromCharCode=_;var D={};D.string={string:h,array:function(y){return m(y,new Array(y.length))},arraybuffer:function(y){return D.string.uint8array(y).buffer},uint8array:function(y){return m(y,new Uint8Array(y.length))},nodebuffer:function(y){return m(y,f.allocBuffer(y.length))}},D.array={string:_,array:h,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return f.newBufferFrom(y)}},D.arraybuffer={string:function(y){return _(new Uint8Array(y))},array:function(y){return x(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:h,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return f.newBufferFrom(new Uint8Array(y))}},D.uint8array={string:_,array:function(y){return x(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:h,nodebuffer:function(y){return f.newBufferFrom(y)}},D.nodebuffer={string:_,array:function(y){return x(y,new Array(y.length))},arraybuffer:function(y){return D.nodebuffer.uint8array(y).buffer},uint8array:function(y){return x(y,new Uint8Array(y.length))},nodebuffer:h},a.transformTo=function(y,S){if(S=S||"",!y)return S;a.checkSupport(y);var w=a.getTypeOf(S);return D[w][y](S)},a.resolve=function(y){for(var S=y.split("/"),w=[],A=0;A<S.length;A++){var N=S[A];N==="."||N===""&&A!==0&&A!==S.length-1||(N===".."?w.pop():w.push(N))}return w.join("/")},a.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":l.nodebuffer&&f.isBuffer(y)?"nodebuffer":l.uint8array&&y instanceof Uint8Array?"uint8array":l.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(y){if(!l[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(y){var S,w,A="";for(w=0;w<(y||"").length;w++)A+="\\x"+((S=y.charCodeAt(w))<16?"0":"")+S.toString(16).toUpperCase();return A},a.delay=function(y,S,w){setImmediate(function(){y.apply(w||null,S||[])})},a.inherits=function(y,S){function w(){}w.prototype=S.prototype,y.prototype=new w},a.extend=function(){var y,S,w={};for(y=0;y<arguments.length;y++)for(S in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],S)&&w[S]===void 0&&(w[S]=arguments[y][S]);return w},a.prepareContent=function(y,S,w,A,N){return d.Promise.resolve(S).then(function(z){return l.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new d.Promise(function(k,M){var B=new FileReader;B.onload=function(P){k(P.target.result)},B.onerror=function(P){M(P.target.error)},B.readAsArrayBuffer(z)}):z}).then(function(z){var k=a.getTypeOf(z);return k?(k==="arraybuffer"?z=a.transformTo("uint8array",z):k==="string"&&(N?z=c.decode(z):w&&A!==!0&&(z=(function(M){return m(M,l.uint8array?new Uint8Array(M.length):new Array(M.length))})(z))),z):d.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,a){var l=n("./reader/readerFor"),c=n("./utils"),f=n("./signature"),d=n("./zipEntry"),h=n("./support");function m(g){this.files=[],this.loadOptions=g}m.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(_)+", expected "+c.pretty(g)+")")}},isSignature:function(g,_){var x=this.reader.index;this.reader.setIndex(g);var D=this.reader.readString(4)===_;return this.reader.setIndex(x),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),_=h.uint8array?"uint8array":"array",x=c.transformTo(_,g);this.zipComment=this.loadOptions.decodeFileName(x)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,_,x,D=this.zip64EndOfCentralSize-44;0<D;)g=this.reader.readInt(2),_=this.reader.readInt(4),x=this.reader.readData(_),this.zip64ExtensibleData[g]={id:g,length:_,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,_;for(g=0;g<this.files.length;g++)_=this.files[g],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(g=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var _=g;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var D=_-x;if(0<D)this.isSignature(_,f.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(g){this.reader=l(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,a){var l=n("./reader/readerFor"),c=n("./utils"),f=n("./compressedObject"),d=n("./crc32"),h=n("./utf8"),m=n("./compressions"),g=n("./support");function _(x,D){this.options=x,this.loadOptions=D}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(x){var D,y;if(x.skip(22),this.fileNameLength=x.readInt(2),y=x.readInt(2),this.fileName=x.readData(this.fileNameLength),x.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=(function(S){for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)&&m[w].magic===S)return m[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,D,x.readData(this.compressedSize))},readCentralPart:function(x){this.versionMadeBy=x.readInt(2),x.skip(2),this.bitFlag=x.readInt(2),this.compressionMethod=x.readString(2),this.date=x.readDate(),this.crc32=x.readInt(4),this.compressedSize=x.readInt(4),this.uncompressedSize=x.readInt(4);var D=x.readInt(2);if(this.extraFieldsLength=x.readInt(2),this.fileCommentLength=x.readInt(2),this.diskNumberStart=x.readInt(2),this.internalFileAttributes=x.readInt(2),this.externalFileAttributes=x.readInt(4),this.localHeaderOffset=x.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");x.skip(D),this.readExtraFields(x),this.parseZIP64ExtraField(x),this.fileComment=x.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var x=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),x==0&&(this.dosPermissions=63&this.externalFileAttributes),x==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var x=l(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=x.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=x.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=x.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=x.readInt(4))}},readExtraFields:function(x){var D,y,S,w=x.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});x.index+4<w;)D=x.readInt(2),y=x.readInt(2),S=x.readData(y),this.extraFields[D]={id:D,length:y,value:S};x.setIndex(w)},handleUTF8:function(){var x=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var y=c.transformTo(x,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var w=c.transformTo(x,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var x=this.extraFields[28789];if(x){var D=l(x.value);return D.readInt(1)!==1||d(this.fileName)!==D.readInt(4)?null:h.utf8decode(D.readData(x.length-5))}return null},findExtraFieldUnicodeComment:function(){var x=this.extraFields[25461];if(x){var D=l(x.value);return D.readInt(1)!==1||d(this.fileComment)!==D.readInt(4)?null:h.utf8decode(D.readData(x.length-5))}return null}},i.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,a){function l(D,y,S){this.name=D,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=y,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var c=n("./stream/StreamHelper"),f=n("./stream/DataWorker"),d=n("./utf8"),h=n("./compressedObject"),m=n("./stream/GenericWorker");l.prototype={internalStream:function(D){var y=null,S="string";try{if(!D)throw new Error("No output type specified.");var w=(S=D.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),y=this._decompressWorker();var A=!this._dataBinary;A&&!w&&(y=y.pipe(new d.Utf8EncodeWorker)),!A&&w&&(y=y.pipe(new d.Utf8DecodeWorker))}catch(N){(y=new m("error")).error(N)}return new c(y,S,"")},async:function(D,y){return this.internalStream(D).accumulate(y)},nodeStream:function(D,y){return this.internalStream(D||"nodebuffer").toNodejsStream(y)},_compressWorker:function(D,y){if(this._data instanceof h&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new d.Utf8EncodeWorker)),h.createWorkerFrom(S,D,y)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new f(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},x=0;x<g.length;x++)l.prototype[g[x]]=_;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,a){(function(l){var c,f,d=l.MutationObserver||l.WebKitMutationObserver;if(d){var h=0,m=new d(D),g=l.document.createTextNode("");m.observe(g,{characterData:!0}),c=function(){g.data=h=++h%2}}else if(l.setImmediate||l.MessageChannel===void 0)c="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var y=l.document.createElement("script");y.onreadystatechange=function(){D(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},l.document.documentElement.appendChild(y)}:function(){setTimeout(D,0)};else{var _=new l.MessageChannel;_.port1.onmessage=D,c=function(){_.port2.postMessage(0)}}var x=[];function D(){var y,S;f=!0;for(var w=x.length;w;){for(S=x,x=[],y=-1;++y<w;)S[y]();w=x.length}f=!1}i.exports=function(y){x.push(y)!==1||f||c()}}).call(this,typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,a){var l=n("immediate");function c(){}var f={},d=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function g(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,w!==c&&y(this,w)}function _(w,A,N){this.promise=w,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function x(w,A,N){l(function(){var z;try{z=A(N)}catch(k){return f.reject(w,k)}z===w?f.reject(w,new TypeError("Cannot resolve promise with itself")):f.resolve(w,z)})}function D(w){var A=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof A=="function")return function(){A.apply(w,arguments)}}function y(w,A){var N=!1;function z(B){N||(N=!0,f.reject(w,B))}function k(B){N||(N=!0,f.resolve(w,B))}var M=S(function(){A(k,z)});M.status==="error"&&z(M.value)}function S(w,A){var N={};try{N.value=w(A),N.status="success"}catch(z){N.status="error",N.value=z}return N}(i.exports=g).prototype.finally=function(w){if(typeof w!="function")return this;var A=this.constructor;return this.then(function(N){return A.resolve(w()).then(function(){return N})},function(N){return A.resolve(w()).then(function(){throw N})})},g.prototype.catch=function(w){return this.then(null,w)},g.prototype.then=function(w,A){if(typeof w!="function"&&this.state===h||typeof A!="function"&&this.state===d)return this;var N=new this.constructor(c);return this.state!==m?x(N,this.state===h?w:A,this.outcome):this.queue.push(new _(N,w,A)),N},_.prototype.callFulfilled=function(w){f.resolve(this.promise,w)},_.prototype.otherCallFulfilled=function(w){x(this.promise,this.onFulfilled,w)},_.prototype.callRejected=function(w){f.reject(this.promise,w)},_.prototype.otherCallRejected=function(w){x(this.promise,this.onRejected,w)},f.resolve=function(w,A){var N=S(D,A);if(N.status==="error")return f.reject(w,N.value);var z=N.value;if(z)y(w,z);else{w.state=h,w.outcome=A;for(var k=-1,M=w.queue.length;++k<M;)w.queue[k].callFulfilled(A)}return w},f.reject=function(w,A){w.state=d,w.outcome=A;for(var N=-1,z=w.queue.length;++N<z;)w.queue[N].callRejected(A);return w},g.resolve=function(w){return w instanceof this?w:f.resolve(new this(c),w)},g.reject=function(w){var A=new this(c);return f.reject(A,w)},g.all=function(w){var A=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,z=!1;if(!N)return this.resolve([]);for(var k=new Array(N),M=0,B=-1,P=new this(c);++B<N;)R(w[B],B);return P;function R(H,U){A.resolve(H).then(function(I){k[U]=I,++M!==N||z||(z=!0,f.resolve(P,k))},function(I){z||(z=!0,f.reject(P,I))})}},g.race=function(w){var A=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,z=!1;if(!N)return this.resolve([]);for(var k=-1,M=new this(c);++k<N;)B=w[k],A.resolve(B).then(function(P){z||(z=!0,f.resolve(M,P))},function(P){z||(z=!0,f.reject(M,P))});var B;return M}},{immediate:36}],38:[function(n,i,a){var l={};(0,n("./lib/utils/common").assign)(l,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,a){var l=n("./zlib/deflate"),c=n("./utils/common"),f=n("./utils/strings"),d=n("./zlib/messages"),h=n("./zlib/zstream"),m=Object.prototype.toString,g=0,_=-1,x=0,D=8;function y(w){if(!(this instanceof y))return new y(w);this.options=c.assign({level:_,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:x,to:""},w||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var N=l.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(N!==g)throw new Error(d[N]);if(A.header&&l.deflateSetHeader(this.strm,A.header),A.dictionary){var z;if(z=typeof A.dictionary=="string"?f.string2buf(A.dictionary):m.call(A.dictionary)==="[object ArrayBuffer]"?new Uint8Array(A.dictionary):A.dictionary,(N=l.deflateSetDictionary(this.strm,z))!==g)throw new Error(d[N]);this._dict_set=!0}}function S(w,A){var N=new y(A);if(N.push(w,!0),N.err)throw N.msg||d[N.err];return N.result}y.prototype.push=function(w,A){var N,z,k=this.strm,M=this.options.chunkSize;if(this.ended)return!1;z=A===~~A?A:A===!0?4:0,typeof w=="string"?k.input=f.string2buf(w):m.call(w)==="[object ArrayBuffer]"?k.input=new Uint8Array(w):k.input=w,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new c.Buf8(M),k.next_out=0,k.avail_out=M),(N=l.deflate(k,z))!==1&&N!==g)return this.onEnd(N),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(c.shrinkBuf(k.output,k.next_out))):this.onData(c.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&N!==1);return z===4?(N=l.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===g):z!==2||(this.onEnd(g),!(k.avail_out=0))},y.prototype.onData=function(w){this.chunks.push(w)},y.prototype.onEnd=function(w){w===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Deflate=y,a.deflate=S,a.deflateRaw=function(w,A){return(A=A||{}).raw=!0,S(w,A)},a.gzip=function(w,A){return(A=A||{}).gzip=!0,S(w,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,a){var l=n("./zlib/inflate"),c=n("./utils/common"),f=n("./utils/strings"),d=n("./zlib/constants"),h=n("./zlib/messages"),m=n("./zlib/zstream"),g=n("./zlib/gzheader"),_=Object.prototype.toString;function x(y){if(!(this instanceof x))return new x(y);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},y||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||y&&y.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var w=l.inflateInit2(this.strm,S.windowBits);if(w!==d.Z_OK)throw new Error(h[w]);this.header=new g,l.inflateGetHeader(this.strm,this.header)}function D(y,S){var w=new x(S);if(w.push(y,!0),w.err)throw w.msg||h[w.err];return w.result}x.prototype.push=function(y,S){var w,A,N,z,k,M,B=this.strm,P=this.options.chunkSize,R=this.options.dictionary,H=!1;if(this.ended)return!1;A=S===~~S?S:S===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof y=="string"?B.input=f.binstring2buf(y):_.call(y)==="[object ArrayBuffer]"?B.input=new Uint8Array(y):B.input=y,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new c.Buf8(P),B.next_out=0,B.avail_out=P),(w=l.inflate(B,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&R&&(M=typeof R=="string"?f.string2buf(R):_.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,w=l.inflateSetDictionary(this.strm,M)),w===d.Z_BUF_ERROR&&H===!0&&(w=d.Z_OK,H=!1),w!==d.Z_STREAM_END&&w!==d.Z_OK)return this.onEnd(w),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&w!==d.Z_STREAM_END&&(B.avail_in!==0||A!==d.Z_FINISH&&A!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=f.utf8border(B.output,B.next_out),z=B.next_out-N,k=f.buf2string(B.output,N),B.next_out=z,B.avail_out=P-z,z&&c.arraySet(B.output,B.output,N,z,0),this.onData(k)):this.onData(c.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(H=!0)}while((0<B.avail_in||B.avail_out===0)&&w!==d.Z_STREAM_END);return w===d.Z_STREAM_END&&(A=d.Z_FINISH),A===d.Z_FINISH?(w=l.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===d.Z_OK):A!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(B.avail_out=0))},x.prototype.onData=function(y){this.chunks.push(y)},x.prototype.onEnd=function(y){y===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Inflate=x,a.inflate=D,a.inflateRaw=function(y,S){return(S=S||{}).raw=!0,D(y,S)},a.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(d){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var g in m)m.hasOwnProperty(g)&&(d[g]=m[g])}}return d},a.shrinkBuf=function(d,h){return d.length===h?d:d.subarray?d.subarray(0,h):(d.length=h,d)};var c={arraySet:function(d,h,m,g,_){if(h.subarray&&d.subarray)d.set(h.subarray(m,m+g),_);else for(var x=0;x<g;x++)d[_+x]=h[m+x]},flattenChunks:function(d){var h,m,g,_,x,D;for(h=g=0,m=d.length;h<m;h++)g+=d[h].length;for(D=new Uint8Array(g),h=_=0,m=d.length;h<m;h++)x=d[h],D.set(x,_),_+=x.length;return D}},f={arraySet:function(d,h,m,g,_){for(var x=0;x<g;x++)d[_+x]=h[m+x]},flattenChunks:function(d){return[].concat.apply([],d)}};a.setTyped=function(d){d?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,c)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,f))},a.setTyped(l)},{}],42:[function(n,i,a){var l=n("./common"),c=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var d=new l.Buf8(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(g,_){if(_<65537&&(g.subarray&&f||!g.subarray&&c))return String.fromCharCode.apply(null,l.shrinkBuf(g,_));for(var x="",D=0;D<_;D++)x+=String.fromCharCode(g[D]);return x}d[254]=d[254]=1,a.string2buf=function(g){var _,x,D,y,S,w=g.length,A=0;for(y=0;y<w;y++)(64512&(x=g.charCodeAt(y)))==55296&&y+1<w&&(64512&(D=g.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(D-56320),y++),A+=x<128?1:x<2048?2:x<65536?3:4;for(_=new l.Buf8(A),y=S=0;S<A;y++)(64512&(x=g.charCodeAt(y)))==55296&&y+1<w&&(64512&(D=g.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(D-56320),y++),x<128?_[S++]=x:(x<2048?_[S++]=192|x>>>6:(x<65536?_[S++]=224|x>>>12:(_[S++]=240|x>>>18,_[S++]=128|x>>>12&63),_[S++]=128|x>>>6&63),_[S++]=128|63&x);return _},a.buf2binstring=function(g){return m(g,g.length)},a.binstring2buf=function(g){for(var _=new l.Buf8(g.length),x=0,D=_.length;x<D;x++)_[x]=g.charCodeAt(x);return _},a.buf2string=function(g,_){var x,D,y,S,w=_||g.length,A=new Array(2*w);for(x=D=0;x<w;)if((y=g[x++])<128)A[D++]=y;else if(4<(S=d[y]))A[D++]=65533,x+=S-1;else{for(y&=S===2?31:S===3?15:7;1<S&&x<w;)y=y<<6|63&g[x++],S--;1<S?A[D++]=65533:y<65536?A[D++]=y:(y-=65536,A[D++]=55296|y>>10&1023,A[D++]=56320|1023&y)}return m(A,D)},a.utf8border=function(g,_){var x;for((_=_||g.length)>g.length&&(_=g.length),x=_-1;0<=x&&(192&g[x])==128;)x--;return x<0||x===0?_:x+d[g[x]]>_?x:_}},{"./common":41}],43:[function(n,i,a){i.exports=function(l,c,f,d){for(var h=65535&l|0,m=l>>>16&65535|0,g=0;f!==0;){for(f-=g=2e3<f?2e3:f;m=m+(h=h+c[d++]|0)|0,--g;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(n,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,a){var l=(function(){for(var c,f=[],d=0;d<256;d++){c=d;for(var h=0;h<8;h++)c=1&c?3988292384^c>>>1:c>>>1;f[d]=c}return f})();i.exports=function(c,f,d,h){var m=l,g=h+d;c^=-1;for(var _=h;_<g;_++)c=c>>>8^m[255&(c^f[_])];return-1^c}},{}],46:[function(n,i,a){var l,c=n("../utils/common"),f=n("./trees"),d=n("./adler32"),h=n("./crc32"),m=n("./messages"),g=0,_=4,x=0,D=-2,y=-1,S=4,w=2,A=8,N=9,z=286,k=30,M=19,B=2*z+1,P=15,R=3,H=258,U=H+R+1,I=42,X=113,j=1,J=2,q=3,ne=4;function V(G,ke){return G.msg=m[ke],ke}function Q(G){return(G<<1)-(4<G?9:0)}function Z(G){for(var ke=G.length;0<=--ke;)G[ke]=0}function $(G){var ke=G.state,Se=ke.pending;Se>G.avail_out&&(Se=G.avail_out),Se!==0&&(c.arraySet(G.output,ke.pending_buf,ke.pending_out,Se,G.next_out),G.next_out+=Se,ke.pending_out+=Se,G.total_out+=Se,G.avail_out-=Se,ke.pending-=Se,ke.pending===0&&(ke.pending_out=0))}function ee(G,ke){f._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,ke),G.block_start=G.strstart,$(G.strm)}function se(G,ke){G.pending_buf[G.pending++]=ke}function oe(G,ke){G.pending_buf[G.pending++]=ke>>>8&255,G.pending_buf[G.pending++]=255&ke}function he(G,ke){var Se,ae,ie=G.max_chain_length,de=G.strstart,Fe=G.prev_length,Oe=G.nice_match,xe=G.strstart>G.w_size-U?G.strstart-(G.w_size-U):0,te=G.window,le=G.w_mask,ue=G.prev,ve=G.strstart+H,Ne=te[de+Fe-1],Ce=te[de+Fe];G.prev_length>=G.good_match&&(ie>>=2),Oe>G.lookahead&&(Oe=G.lookahead);do if(te[(Se=ke)+Fe]===Ce&&te[Se+Fe-1]===Ne&&te[Se]===te[de]&&te[++Se]===te[de+1]){de+=2,Se++;do;while(te[++de]===te[++Se]&&te[++de]===te[++Se]&&te[++de]===te[++Se]&&te[++de]===te[++Se]&&te[++de]===te[++Se]&&te[++de]===te[++Se]&&te[++de]===te[++Se]&&te[++de]===te[++Se]&&de<ve);if(ae=H-(ve-de),de=ve-H,Fe<ae){if(G.match_start=ke,Oe<=(Fe=ae))break;Ne=te[de+Fe-1],Ce=te[de+Fe]}}while((ke=ue[ke&le])>xe&&--ie!=0);return Fe<=G.lookahead?Fe:G.lookahead}function ge(G){var ke,Se,ae,ie,de,Fe,Oe,xe,te,le,ue=G.w_size;do{if(ie=G.window_size-G.lookahead-G.strstart,G.strstart>=ue+(ue-U)){for(c.arraySet(G.window,G.window,ue,ue,0),G.match_start-=ue,G.strstart-=ue,G.block_start-=ue,ke=Se=G.hash_size;ae=G.head[--ke],G.head[ke]=ue<=ae?ae-ue:0,--Se;);for(ke=Se=ue;ae=G.prev[--ke],G.prev[ke]=ue<=ae?ae-ue:0,--Se;);ie+=ue}if(G.strm.avail_in===0)break;if(Fe=G.strm,Oe=G.window,xe=G.strstart+G.lookahead,te=ie,le=void 0,le=Fe.avail_in,te<le&&(le=te),Se=le===0?0:(Fe.avail_in-=le,c.arraySet(Oe,Fe.input,Fe.next_in,le,xe),Fe.state.wrap===1?Fe.adler=d(Fe.adler,Oe,le,xe):Fe.state.wrap===2&&(Fe.adler=h(Fe.adler,Oe,le,xe)),Fe.next_in+=le,Fe.total_in+=le,le),G.lookahead+=Se,G.lookahead+G.insert>=R)for(de=G.strstart-G.insert,G.ins_h=G.window[de],G.ins_h=(G.ins_h<<G.hash_shift^G.window[de+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[de+R-1])&G.hash_mask,G.prev[de&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=de,de++,G.insert--,!(G.lookahead+G.insert<R)););}while(G.lookahead<U&&G.strm.avail_in!==0)}function Re(G,ke){for(var Se,ae;;){if(G.lookahead<U){if(ge(G),G.lookahead<U&&ke===g)return j;if(G.lookahead===0)break}if(Se=0,G.lookahead>=R&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,Se=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),Se!==0&&G.strstart-Se<=G.w_size-U&&(G.match_length=he(G,Se)),G.match_length>=R)if(ae=f._tr_tally(G,G.strstart-G.match_start,G.match_length-R),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=R){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,Se=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else ae=f._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(ae&&(ee(G,!1),G.strm.avail_out===0))return j}return G.insert=G.strstart<R-1?G.strstart:R-1,ke===_?(ee(G,!0),G.strm.avail_out===0?q:ne):G.last_lit&&(ee(G,!1),G.strm.avail_out===0)?j:J}function Le(G,ke){for(var Se,ae,ie;;){if(G.lookahead<U){if(ge(G),G.lookahead<U&&ke===g)return j;if(G.lookahead===0)break}if(Se=0,G.lookahead>=R&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,Se=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=R-1,Se!==0&&G.prev_length<G.max_lazy_match&&G.strstart-Se<=G.w_size-U&&(G.match_length=he(G,Se),G.match_length<=5&&(G.strategy===1||G.match_length===R&&4096<G.strstart-G.match_start)&&(G.match_length=R-1)),G.prev_length>=R&&G.match_length<=G.prev_length){for(ie=G.strstart+G.lookahead-R,ae=f._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-R),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=ie&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+R-1])&G.hash_mask,Se=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=R-1,G.strstart++,ae&&(ee(G,!1),G.strm.avail_out===0))return j}else if(G.match_available){if((ae=f._tr_tally(G,0,G.window[G.strstart-1]))&&ee(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return j}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(ae=f._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<R-1?G.strstart:R-1,ke===_?(ee(G,!0),G.strm.avail_out===0?q:ne):G.last_lit&&(ee(G,!1),G.strm.avail_out===0)?j:J}function Ge(G,ke,Se,ae,ie){this.good_length=G,this.max_lazy=ke,this.nice_length=Se,this.max_chain=ae,this.func=ie}function Ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*B),this.dyn_dtree=new c.Buf16(2*(2*k+1)),this.bl_tree=new c.Buf16(2*(2*M+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(P+1),this.heap=new c.Buf16(2*z+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*z+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(G){var ke;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=w,(ke=G.state).pending=0,ke.pending_out=0,ke.wrap<0&&(ke.wrap=-ke.wrap),ke.status=ke.wrap?I:X,G.adler=ke.wrap===2?0:1,ke.last_flush=g,f._tr_init(ke),x):V(G,D)}function $e(G){var ke=Qe(G);return ke===x&&(function(Se){Se.window_size=2*Se.w_size,Z(Se.head),Se.max_lazy_match=l[Se.level].max_lazy,Se.good_match=l[Se.level].good_length,Se.nice_match=l[Se.level].nice_length,Se.max_chain_length=l[Se.level].max_chain,Se.strstart=0,Se.block_start=0,Se.lookahead=0,Se.insert=0,Se.match_length=Se.prev_length=R-1,Se.match_available=0,Se.ins_h=0})(G.state),ke}function Ve(G,ke,Se,ae,ie,de){if(!G)return D;var Fe=1;if(ke===y&&(ke=6),ae<0?(Fe=0,ae=-ae):15<ae&&(Fe=2,ae-=16),ie<1||N<ie||Se!==A||ae<8||15<ae||ke<0||9<ke||de<0||S<de)return V(G,D);ae===8&&(ae=9);var Oe=new Ke;return(G.state=Oe).strm=G,Oe.wrap=Fe,Oe.gzhead=null,Oe.w_bits=ae,Oe.w_size=1<<Oe.w_bits,Oe.w_mask=Oe.w_size-1,Oe.hash_bits=ie+7,Oe.hash_size=1<<Oe.hash_bits,Oe.hash_mask=Oe.hash_size-1,Oe.hash_shift=~~((Oe.hash_bits+R-1)/R),Oe.window=new c.Buf8(2*Oe.w_size),Oe.head=new c.Buf16(Oe.hash_size),Oe.prev=new c.Buf16(Oe.w_size),Oe.lit_bufsize=1<<ie+6,Oe.pending_buf_size=4*Oe.lit_bufsize,Oe.pending_buf=new c.Buf8(Oe.pending_buf_size),Oe.d_buf=1*Oe.lit_bufsize,Oe.l_buf=3*Oe.lit_bufsize,Oe.level=ke,Oe.strategy=de,Oe.method=Se,$e(G)}l=[new Ge(0,0,0,0,function(G,ke){var Se=65535;for(Se>G.pending_buf_size-5&&(Se=G.pending_buf_size-5);;){if(G.lookahead<=1){if(ge(G),G.lookahead===0&&ke===g)return j;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var ae=G.block_start+Se;if((G.strstart===0||G.strstart>=ae)&&(G.lookahead=G.strstart-ae,G.strstart=ae,ee(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-U&&(ee(G,!1),G.strm.avail_out===0))return j}return G.insert=0,ke===_?(ee(G,!0),G.strm.avail_out===0?q:ne):(G.strstart>G.block_start&&(ee(G,!1),G.strm.avail_out),j)}),new Ge(4,4,8,4,Re),new Ge(4,5,16,8,Re),new Ge(4,6,32,32,Re),new Ge(4,4,16,16,Le),new Ge(8,16,32,32,Le),new Ge(8,16,128,128,Le),new Ge(8,32,128,256,Le),new Ge(32,128,258,1024,Le),new Ge(32,258,258,4096,Le)],a.deflateInit=function(G,ke){return Ve(G,ke,A,15,8,0)},a.deflateInit2=Ve,a.deflateReset=$e,a.deflateResetKeep=Qe,a.deflateSetHeader=function(G,ke){return G&&G.state?G.state.wrap!==2?D:(G.state.gzhead=ke,x):D},a.deflate=function(G,ke){var Se,ae,ie,de;if(!G||!G.state||5<ke||ke<0)return G?V(G,D):D;if(ae=G.state,!G.output||!G.input&&G.avail_in!==0||ae.status===666&&ke!==_)return V(G,G.avail_out===0?-5:D);if(ae.strm=G,Se=ae.last_flush,ae.last_flush=ke,ae.status===I)if(ae.wrap===2)G.adler=0,se(ae,31),se(ae,139),se(ae,8),ae.gzhead?(se(ae,(ae.gzhead.text?1:0)+(ae.gzhead.hcrc?2:0)+(ae.gzhead.extra?4:0)+(ae.gzhead.name?8:0)+(ae.gzhead.comment?16:0)),se(ae,255&ae.gzhead.time),se(ae,ae.gzhead.time>>8&255),se(ae,ae.gzhead.time>>16&255),se(ae,ae.gzhead.time>>24&255),se(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),se(ae,255&ae.gzhead.os),ae.gzhead.extra&&ae.gzhead.extra.length&&(se(ae,255&ae.gzhead.extra.length),se(ae,ae.gzhead.extra.length>>8&255)),ae.gzhead.hcrc&&(G.adler=h(G.adler,ae.pending_buf,ae.pending,0)),ae.gzindex=0,ae.status=69):(se(ae,0),se(ae,0),se(ae,0),se(ae,0),se(ae,0),se(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),se(ae,3),ae.status=X);else{var Fe=A+(ae.w_bits-8<<4)<<8;Fe|=(2<=ae.strategy||ae.level<2?0:ae.level<6?1:ae.level===6?2:3)<<6,ae.strstart!==0&&(Fe|=32),Fe+=31-Fe%31,ae.status=X,oe(ae,Fe),ae.strstart!==0&&(oe(ae,G.adler>>>16),oe(ae,65535&G.adler)),G.adler=1}if(ae.status===69)if(ae.gzhead.extra){for(ie=ae.pending;ae.gzindex<(65535&ae.gzhead.extra.length)&&(ae.pending!==ae.pending_buf_size||(ae.gzhead.hcrc&&ae.pending>ie&&(G.adler=h(G.adler,ae.pending_buf,ae.pending-ie,ie)),$(G),ie=ae.pending,ae.pending!==ae.pending_buf_size));)se(ae,255&ae.gzhead.extra[ae.gzindex]),ae.gzindex++;ae.gzhead.hcrc&&ae.pending>ie&&(G.adler=h(G.adler,ae.pending_buf,ae.pending-ie,ie)),ae.gzindex===ae.gzhead.extra.length&&(ae.gzindex=0,ae.status=73)}else ae.status=73;if(ae.status===73)if(ae.gzhead.name){ie=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ie&&(G.adler=h(G.adler,ae.pending_buf,ae.pending-ie,ie)),$(G),ie=ae.pending,ae.pending===ae.pending_buf_size)){de=1;break}de=ae.gzindex<ae.gzhead.name.length?255&ae.gzhead.name.charCodeAt(ae.gzindex++):0,se(ae,de)}while(de!==0);ae.gzhead.hcrc&&ae.pending>ie&&(G.adler=h(G.adler,ae.pending_buf,ae.pending-ie,ie)),de===0&&(ae.gzindex=0,ae.status=91)}else ae.status=91;if(ae.status===91)if(ae.gzhead.comment){ie=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ie&&(G.adler=h(G.adler,ae.pending_buf,ae.pending-ie,ie)),$(G),ie=ae.pending,ae.pending===ae.pending_buf_size)){de=1;break}de=ae.gzindex<ae.gzhead.comment.length?255&ae.gzhead.comment.charCodeAt(ae.gzindex++):0,se(ae,de)}while(de!==0);ae.gzhead.hcrc&&ae.pending>ie&&(G.adler=h(G.adler,ae.pending_buf,ae.pending-ie,ie)),de===0&&(ae.status=103)}else ae.status=103;if(ae.status===103&&(ae.gzhead.hcrc?(ae.pending+2>ae.pending_buf_size&&$(G),ae.pending+2<=ae.pending_buf_size&&(se(ae,255&G.adler),se(ae,G.adler>>8&255),G.adler=0,ae.status=X)):ae.status=X),ae.pending!==0){if($(G),G.avail_out===0)return ae.last_flush=-1,x}else if(G.avail_in===0&&Q(ke)<=Q(Se)&&ke!==_)return V(G,-5);if(ae.status===666&&G.avail_in!==0)return V(G,-5);if(G.avail_in!==0||ae.lookahead!==0||ke!==g&&ae.status!==666){var Oe=ae.strategy===2?(function(xe,te){for(var le;;){if(xe.lookahead===0&&(ge(xe),xe.lookahead===0)){if(te===g)return j;break}if(xe.match_length=0,le=f._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,le&&(ee(xe,!1),xe.strm.avail_out===0))return j}return xe.insert=0,te===_?(ee(xe,!0),xe.strm.avail_out===0?q:ne):xe.last_lit&&(ee(xe,!1),xe.strm.avail_out===0)?j:J})(ae,ke):ae.strategy===3?(function(xe,te){for(var le,ue,ve,Ne,Ce=xe.window;;){if(xe.lookahead<=H){if(ge(xe),xe.lookahead<=H&&te===g)return j;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=R&&0<xe.strstart&&(ue=Ce[ve=xe.strstart-1])===Ce[++ve]&&ue===Ce[++ve]&&ue===Ce[++ve]){Ne=xe.strstart+H;do;while(ue===Ce[++ve]&&ue===Ce[++ve]&&ue===Ce[++ve]&&ue===Ce[++ve]&&ue===Ce[++ve]&&ue===Ce[++ve]&&ue===Ce[++ve]&&ue===Ce[++ve]&&ve<Ne);xe.match_length=H-(Ne-ve),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=R?(le=f._tr_tally(xe,1,xe.match_length-R),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(le=f._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),le&&(ee(xe,!1),xe.strm.avail_out===0))return j}return xe.insert=0,te===_?(ee(xe,!0),xe.strm.avail_out===0?q:ne):xe.last_lit&&(ee(xe,!1),xe.strm.avail_out===0)?j:J})(ae,ke):l[ae.level].func(ae,ke);if(Oe!==q&&Oe!==ne||(ae.status=666),Oe===j||Oe===q)return G.avail_out===0&&(ae.last_flush=-1),x;if(Oe===J&&(ke===1?f._tr_align(ae):ke!==5&&(f._tr_stored_block(ae,0,0,!1),ke===3&&(Z(ae.head),ae.lookahead===0&&(ae.strstart=0,ae.block_start=0,ae.insert=0))),$(G),G.avail_out===0))return ae.last_flush=-1,x}return ke!==_?x:ae.wrap<=0?1:(ae.wrap===2?(se(ae,255&G.adler),se(ae,G.adler>>8&255),se(ae,G.adler>>16&255),se(ae,G.adler>>24&255),se(ae,255&G.total_in),se(ae,G.total_in>>8&255),se(ae,G.total_in>>16&255),se(ae,G.total_in>>24&255)):(oe(ae,G.adler>>>16),oe(ae,65535&G.adler)),$(G),0<ae.wrap&&(ae.wrap=-ae.wrap),ae.pending!==0?x:1)},a.deflateEnd=function(G){var ke;return G&&G.state?(ke=G.state.status)!==I&&ke!==69&&ke!==73&&ke!==91&&ke!==103&&ke!==X&&ke!==666?V(G,D):(G.state=null,ke===X?V(G,-3):x):D},a.deflateSetDictionary=function(G,ke){var Se,ae,ie,de,Fe,Oe,xe,te,le=ke.length;if(!G||!G.state||(de=(Se=G.state).wrap)===2||de===1&&Se.status!==I||Se.lookahead)return D;for(de===1&&(G.adler=d(G.adler,ke,le,0)),Se.wrap=0,le>=Se.w_size&&(de===0&&(Z(Se.head),Se.strstart=0,Se.block_start=0,Se.insert=0),te=new c.Buf8(Se.w_size),c.arraySet(te,ke,le-Se.w_size,Se.w_size,0),ke=te,le=Se.w_size),Fe=G.avail_in,Oe=G.next_in,xe=G.input,G.avail_in=le,G.next_in=0,G.input=ke,ge(Se);Se.lookahead>=R;){for(ae=Se.strstart,ie=Se.lookahead-(R-1);Se.ins_h=(Se.ins_h<<Se.hash_shift^Se.window[ae+R-1])&Se.hash_mask,Se.prev[ae&Se.w_mask]=Se.head[Se.ins_h],Se.head[Se.ins_h]=ae,ae++,--ie;);Se.strstart=ae,Se.lookahead=R-1,ge(Se)}return Se.strstart+=Se.lookahead,Se.block_start=Se.strstart,Se.insert=Se.lookahead,Se.lookahead=0,Se.match_length=Se.prev_length=R-1,Se.match_available=0,G.next_in=Oe,G.input=xe,G.avail_in=Fe,Se.wrap=de,x},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,a){i.exports=function(l,c){var f,d,h,m,g,_,x,D,y,S,w,A,N,z,k,M,B,P,R,H,U,I,X,j,J;f=l.state,d=l.next_in,j=l.input,h=d+(l.avail_in-5),m=l.next_out,J=l.output,g=m-(c-l.avail_out),_=m+(l.avail_out-257),x=f.dmax,D=f.wsize,y=f.whave,S=f.wnext,w=f.window,A=f.hold,N=f.bits,z=f.lencode,k=f.distcode,M=(1<<f.lenbits)-1,B=(1<<f.distbits)-1;e:do{N<15&&(A+=j[d++]<<N,N+=8,A+=j[d++]<<N,N+=8),P=z[A&M];t:for(;;){if(A>>>=R=P>>>24,N-=R,(R=P>>>16&255)===0)J[m++]=65535&P;else{if(!(16&R)){if((64&R)==0){P=z[(65535&P)+(A&(1<<R)-1)];continue t}if(32&R){f.mode=12;break e}l.msg="invalid literal/length code",f.mode=30;break e}H=65535&P,(R&=15)&&(N<R&&(A+=j[d++]<<N,N+=8),H+=A&(1<<R)-1,A>>>=R,N-=R),N<15&&(A+=j[d++]<<N,N+=8,A+=j[d++]<<N,N+=8),P=k[A&B];n:for(;;){if(A>>>=R=P>>>24,N-=R,!(16&(R=P>>>16&255))){if((64&R)==0){P=k[(65535&P)+(A&(1<<R)-1)];continue n}l.msg="invalid distance code",f.mode=30;break e}if(U=65535&P,N<(R&=15)&&(A+=j[d++]<<N,(N+=8)<R&&(A+=j[d++]<<N,N+=8)),x<(U+=A&(1<<R)-1)){l.msg="invalid distance too far back",f.mode=30;break e}if(A>>>=R,N-=R,(R=m-g)<U){if(y<(R=U-R)&&f.sane){l.msg="invalid distance too far back",f.mode=30;break e}if(X=w,(I=0)===S){if(I+=D-R,R<H){for(H-=R;J[m++]=w[I++],--R;);I=m-U,X=J}}else if(S<R){if(I+=D+S-R,(R-=S)<H){for(H-=R;J[m++]=w[I++],--R;);if(I=0,S<H){for(H-=R=S;J[m++]=w[I++],--R;);I=m-U,X=J}}}else if(I+=S-R,R<H){for(H-=R;J[m++]=w[I++],--R;);I=m-U,X=J}for(;2<H;)J[m++]=X[I++],J[m++]=X[I++],J[m++]=X[I++],H-=3;H&&(J[m++]=X[I++],1<H&&(J[m++]=X[I++]))}else{for(I=m-U;J[m++]=J[I++],J[m++]=J[I++],J[m++]=J[I++],2<(H-=3););H&&(J[m++]=J[I++],1<H&&(J[m++]=J[I++]))}break}}break}}while(d<h&&m<_);d-=H=N>>3,A&=(1<<(N-=H<<3))-1,l.next_in=d,l.next_out=m,l.avail_in=d<h?h-d+5:5-(d-h),l.avail_out=m<_?_-m+257:257-(m-_),f.hold=A,f.bits=N}},{}],49:[function(n,i,a){var l=n("../utils/common"),c=n("./adler32"),f=n("./crc32"),d=n("./inffast"),h=n("./inftrees"),m=1,g=2,_=0,x=-2,D=1,y=852,S=592;function w(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(I){var X;return I&&I.state?(X=I.state,I.total_in=I.total_out=X.total=0,I.msg="",X.wrap&&(I.adler=1&X.wrap),X.mode=D,X.last=0,X.havedict=0,X.dmax=32768,X.head=null,X.hold=0,X.bits=0,X.lencode=X.lendyn=new l.Buf32(y),X.distcode=X.distdyn=new l.Buf32(S),X.sane=1,X.back=-1,_):x}function z(I){var X;return I&&I.state?((X=I.state).wsize=0,X.whave=0,X.wnext=0,N(I)):x}function k(I,X){var j,J;return I&&I.state?(J=I.state,X<0?(j=0,X=-X):(j=1+(X>>4),X<48&&(X&=15)),X&&(X<8||15<X)?x:(J.window!==null&&J.wbits!==X&&(J.window=null),J.wrap=j,J.wbits=X,z(I))):x}function M(I,X){var j,J;return I?(J=new A,(I.state=J).window=null,(j=k(I,X))!==_&&(I.state=null),j):x}var B,P,R=!0;function H(I){if(R){var X;for(B=new l.Buf32(512),P=new l.Buf32(32),X=0;X<144;)I.lens[X++]=8;for(;X<256;)I.lens[X++]=9;for(;X<280;)I.lens[X++]=7;for(;X<288;)I.lens[X++]=8;for(h(m,I.lens,0,288,B,0,I.work,{bits:9}),X=0;X<32;)I.lens[X++]=5;h(g,I.lens,0,32,P,0,I.work,{bits:5}),R=!1}I.lencode=B,I.lenbits=9,I.distcode=P,I.distbits=5}function U(I,X,j,J){var q,ne=I.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new l.Buf8(ne.wsize)),J>=ne.wsize?(l.arraySet(ne.window,X,j-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(J<(q=ne.wsize-ne.wnext)&&(q=J),l.arraySet(ne.window,X,j-J,q,ne.wnext),(J-=q)?(l.arraySet(ne.window,X,j-J,J,0),ne.wnext=J,ne.whave=ne.wsize):(ne.wnext+=q,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=q))),0}a.inflateReset=z,a.inflateReset2=k,a.inflateResetKeep=N,a.inflateInit=function(I){return M(I,15)},a.inflateInit2=M,a.inflate=function(I,X){var j,J,q,ne,V,Q,Z,$,ee,se,oe,he,ge,Re,Le,Ge,Ke,Qe,$e,Ve,G,ke,Se,ae,ie=0,de=new l.Buf8(4),Fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return x;(j=I.state).mode===12&&(j.mode=13),V=I.next_out,q=I.output,Z=I.avail_out,ne=I.next_in,J=I.input,Q=I.avail_in,$=j.hold,ee=j.bits,se=Q,oe=Z,ke=_;e:for(;;)switch(j.mode){case D:if(j.wrap===0){j.mode=13;break}for(;ee<16;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if(2&j.wrap&&$===35615){de[j.check=0]=255&$,de[1]=$>>>8&255,j.check=f(j.check,de,2,0),ee=$=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&$)<<8)+($>>8))%31){I.msg="incorrect header check",j.mode=30;break}if((15&$)!=8){I.msg="unknown compression method",j.mode=30;break}if(ee-=4,G=8+(15&($>>>=4)),j.wbits===0)j.wbits=G;else if(G>j.wbits){I.msg="invalid window size",j.mode=30;break}j.dmax=1<<G,I.adler=j.check=1,j.mode=512&$?10:12,ee=$=0;break;case 2:for(;ee<16;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if(j.flags=$,(255&j.flags)!=8){I.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){I.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=$>>8&1),512&j.flags&&(de[0]=255&$,de[1]=$>>>8&255,j.check=f(j.check,de,2,0)),ee=$=0,j.mode=3;case 3:for(;ee<32;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}j.head&&(j.head.time=$),512&j.flags&&(de[0]=255&$,de[1]=$>>>8&255,de[2]=$>>>16&255,de[3]=$>>>24&255,j.check=f(j.check,de,4,0)),ee=$=0,j.mode=4;case 4:for(;ee<16;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}j.head&&(j.head.xflags=255&$,j.head.os=$>>8),512&j.flags&&(de[0]=255&$,de[1]=$>>>8&255,j.check=f(j.check,de,2,0)),ee=$=0,j.mode=5;case 5:if(1024&j.flags){for(;ee<16;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}j.length=$,j.head&&(j.head.extra_len=$),512&j.flags&&(de[0]=255&$,de[1]=$>>>8&255,j.check=f(j.check,de,2,0)),ee=$=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(Q<(he=j.length)&&(he=Q),he&&(j.head&&(G=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),l.arraySet(j.head.extra,J,ne,he,G)),512&j.flags&&(j.check=f(j.check,J,he,ne)),Q-=he,ne+=he,j.length-=he),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(Q===0)break e;for(he=0;G=J[ne+he++],j.head&&G&&j.length<65536&&(j.head.name+=String.fromCharCode(G)),G&&he<Q;);if(512&j.flags&&(j.check=f(j.check,J,he,ne)),Q-=he,ne+=he,G)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(Q===0)break e;for(he=0;G=J[ne+he++],j.head&&G&&j.length<65536&&(j.head.comment+=String.fromCharCode(G)),G&&he<Q;);if(512&j.flags&&(j.check=f(j.check,J,he,ne)),Q-=he,ne+=he,G)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;ee<16;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if($!==(65535&j.check)){I.msg="header crc mismatch",j.mode=30;break}ee=$=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),I.adler=j.check=0,j.mode=12;break;case 10:for(;ee<32;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}I.adler=j.check=w($),ee=$=0,j.mode=11;case 11:if(j.havedict===0)return I.next_out=V,I.avail_out=Z,I.next_in=ne,I.avail_in=Q,j.hold=$,j.bits=ee,2;I.adler=j.check=1,j.mode=12;case 12:if(X===5||X===6)break e;case 13:if(j.last){$>>>=7&ee,ee-=7&ee,j.mode=27;break}for(;ee<3;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}switch(j.last=1&$,ee-=1,3&($>>>=1)){case 0:j.mode=14;break;case 1:if(H(j),j.mode=20,X!==6)break;$>>>=2,ee-=2;break e;case 2:j.mode=17;break;case 3:I.msg="invalid block type",j.mode=30}$>>>=2,ee-=2;break;case 14:for($>>>=7&ee,ee-=7&ee;ee<32;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if((65535&$)!=($>>>16^65535)){I.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&$,ee=$=0,j.mode=15,X===6)break e;case 15:j.mode=16;case 16:if(he=j.length){if(Q<he&&(he=Q),Z<he&&(he=Z),he===0)break e;l.arraySet(q,J,ne,he,V),Q-=he,ne+=he,Z-=he,V+=he,j.length-=he;break}j.mode=12;break;case 17:for(;ee<14;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if(j.nlen=257+(31&$),$>>>=5,ee-=5,j.ndist=1+(31&$),$>>>=5,ee-=5,j.ncode=4+(15&$),$>>>=4,ee-=4,286<j.nlen||30<j.ndist){I.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;ee<3;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}j.lens[Fe[j.have++]]=7&$,$>>>=3,ee-=3}for(;j.have<19;)j.lens[Fe[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,Se={bits:j.lenbits},ke=h(0,j.lens,0,19,j.lencode,0,j.work,Se),j.lenbits=Se.bits,ke){I.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;Ge=(ie=j.lencode[$&(1<<j.lenbits)-1])>>>16&255,Ke=65535&ie,!((Le=ie>>>24)<=ee);){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if(Ke<16)$>>>=Le,ee-=Le,j.lens[j.have++]=Ke;else{if(Ke===16){for(ae=Le+2;ee<ae;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if($>>>=Le,ee-=Le,j.have===0){I.msg="invalid bit length repeat",j.mode=30;break}G=j.lens[j.have-1],he=3+(3&$),$>>>=2,ee-=2}else if(Ke===17){for(ae=Le+3;ee<ae;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}ee-=Le,G=0,he=3+(7&($>>>=Le)),$>>>=3,ee-=3}else{for(ae=Le+7;ee<ae;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}ee-=Le,G=0,he=11+(127&($>>>=Le)),$>>>=7,ee-=7}if(j.have+he>j.nlen+j.ndist){I.msg="invalid bit length repeat",j.mode=30;break}for(;he--;)j.lens[j.have++]=G}}if(j.mode===30)break;if(j.lens[256]===0){I.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,Se={bits:j.lenbits},ke=h(m,j.lens,0,j.nlen,j.lencode,0,j.work,Se),j.lenbits=Se.bits,ke){I.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,Se={bits:j.distbits},ke=h(g,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,Se),j.distbits=Se.bits,ke){I.msg="invalid distances set",j.mode=30;break}if(j.mode=20,X===6)break e;case 20:j.mode=21;case 21:if(6<=Q&&258<=Z){I.next_out=V,I.avail_out=Z,I.next_in=ne,I.avail_in=Q,j.hold=$,j.bits=ee,d(I,oe),V=I.next_out,q=I.output,Z=I.avail_out,ne=I.next_in,J=I.input,Q=I.avail_in,$=j.hold,ee=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;Ge=(ie=j.lencode[$&(1<<j.lenbits)-1])>>>16&255,Ke=65535&ie,!((Le=ie>>>24)<=ee);){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if(Ge&&(240&Ge)==0){for(Qe=Le,$e=Ge,Ve=Ke;Ge=(ie=j.lencode[Ve+(($&(1<<Qe+$e)-1)>>Qe)])>>>16&255,Ke=65535&ie,!(Qe+(Le=ie>>>24)<=ee);){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}$>>>=Qe,ee-=Qe,j.back+=Qe}if($>>>=Le,ee-=Le,j.back+=Le,j.length=Ke,Ge===0){j.mode=26;break}if(32&Ge){j.back=-1,j.mode=12;break}if(64&Ge){I.msg="invalid literal/length code",j.mode=30;break}j.extra=15&Ge,j.mode=22;case 22:if(j.extra){for(ae=j.extra;ee<ae;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}j.length+=$&(1<<j.extra)-1,$>>>=j.extra,ee-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;Ge=(ie=j.distcode[$&(1<<j.distbits)-1])>>>16&255,Ke=65535&ie,!((Le=ie>>>24)<=ee);){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if((240&Ge)==0){for(Qe=Le,$e=Ge,Ve=Ke;Ge=(ie=j.distcode[Ve+(($&(1<<Qe+$e)-1)>>Qe)])>>>16&255,Ke=65535&ie,!(Qe+(Le=ie>>>24)<=ee);){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}$>>>=Qe,ee-=Qe,j.back+=Qe}if($>>>=Le,ee-=Le,j.back+=Le,64&Ge){I.msg="invalid distance code",j.mode=30;break}j.offset=Ke,j.extra=15&Ge,j.mode=24;case 24:if(j.extra){for(ae=j.extra;ee<ae;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}j.offset+=$&(1<<j.extra)-1,$>>>=j.extra,ee-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){I.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(Z===0)break e;if(he=oe-Z,j.offset>he){if((he=j.offset-he)>j.whave&&j.sane){I.msg="invalid distance too far back",j.mode=30;break}ge=he>j.wnext?(he-=j.wnext,j.wsize-he):j.wnext-he,he>j.length&&(he=j.length),Re=j.window}else Re=q,ge=V-j.offset,he=j.length;for(Z<he&&(he=Z),Z-=he,j.length-=he;q[V++]=Re[ge++],--he;);j.length===0&&(j.mode=21);break;case 26:if(Z===0)break e;q[V++]=j.length,Z--,j.mode=21;break;case 27:if(j.wrap){for(;ee<32;){if(Q===0)break e;Q--,$|=J[ne++]<<ee,ee+=8}if(oe-=Z,I.total_out+=oe,j.total+=oe,oe&&(I.adler=j.check=j.flags?f(j.check,q,oe,V-oe):c(j.check,q,oe,V-oe)),oe=Z,(j.flags?$:w($))!==j.check){I.msg="incorrect data check",j.mode=30;break}ee=$=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;ee<32;){if(Q===0)break e;Q--,$+=J[ne++]<<ee,ee+=8}if($!==(4294967295&j.total)){I.msg="incorrect length check",j.mode=30;break}ee=$=0}j.mode=29;case 29:ke=1;break e;case 30:ke=-3;break e;case 31:return-4;case 32:default:return x}return I.next_out=V,I.avail_out=Z,I.next_in=ne,I.avail_in=Q,j.hold=$,j.bits=ee,(j.wsize||oe!==I.avail_out&&j.mode<30&&(j.mode<27||X!==4))&&U(I,I.output,I.next_out,oe-I.avail_out)?(j.mode=31,-4):(se-=I.avail_in,oe-=I.avail_out,I.total_in+=se,I.total_out+=oe,j.total+=oe,j.wrap&&oe&&(I.adler=j.check=j.flags?f(j.check,q,oe,I.next_out-oe):c(j.check,q,oe,I.next_out-oe)),I.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(se==0&&oe===0||X===4)&&ke===_&&(ke=-5),ke)},a.inflateEnd=function(I){if(!I||!I.state)return x;var X=I.state;return X.window&&(X.window=null),I.state=null,_},a.inflateGetHeader=function(I,X){var j;return I&&I.state?(2&(j=I.state).wrap)==0?x:((j.head=X).done=!1,_):x},a.inflateSetDictionary=function(I,X){var j,J=X.length;return I&&I.state?(j=I.state).wrap!==0&&j.mode!==11?x:j.mode===11&&c(1,X,J,0)!==j.check?-3:U(I,X,J,J)?(j.mode=31,-4):(j.havedict=1,_):x},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,a){var l=n("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,g,_,x,D,y,S,w){var A,N,z,k,M,B,P,R,H,U=w.bits,I=0,X=0,j=0,J=0,q=0,ne=0,V=0,Q=0,Z=0,$=0,ee=null,se=0,oe=new l.Buf16(16),he=new l.Buf16(16),ge=null,Re=0;for(I=0;I<=15;I++)oe[I]=0;for(X=0;X<x;X++)oe[g[_+X]]++;for(q=U,J=15;1<=J&&oe[J]===0;J--);if(J<q&&(q=J),J===0)return D[y++]=20971520,D[y++]=20971520,w.bits=1,0;for(j=1;j<J&&oe[j]===0;j++);for(q<j&&(q=j),I=Q=1;I<=15;I++)if(Q<<=1,(Q-=oe[I])<0)return-1;if(0<Q&&(m===0||J!==1))return-1;for(he[1]=0,I=1;I<15;I++)he[I+1]=he[I]+oe[I];for(X=0;X<x;X++)g[_+X]!==0&&(S[he[g[_+X]]++]=X);if(B=m===0?(ee=ge=S,19):m===1?(ee=c,se-=257,ge=f,Re-=257,256):(ee=d,ge=h,-1),I=j,M=y,V=X=$=0,z=-1,k=(Z=1<<(ne=q))-1,m===1&&852<Z||m===2&&592<Z)return 1;for(;;){for(P=I-V,H=S[X]<B?(R=0,S[X]):S[X]>B?(R=ge[Re+S[X]],ee[se+S[X]]):(R=96,0),A=1<<I-V,j=N=1<<ne;D[M+($>>V)+(N-=A)]=P<<24|R<<16|H|0,N!==0;);for(A=1<<I-1;$&A;)A>>=1;if(A!==0?($&=A-1,$+=A):$=0,X++,--oe[I]==0){if(I===J)break;I=g[_+S[X]]}if(q<I&&($&k)!==z){for(V===0&&(V=q),M+=j,Q=1<<(ne=I-V);ne+V<J&&!((Q-=oe[ne+V])<=0);)ne++,Q<<=1;if(Z+=1<<ne,m===1&&852<Z||m===2&&592<Z)return 1;D[z=$&k]=q<<24|ne<<16|M-y|0}}return $!==0&&(D[M+$]=I-V<<24|64<<16|0),w.bits=q,0}},{"../utils/common":41}],51:[function(n,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,a){var l=n("../utils/common"),c=0,f=1;function d(ie){for(var de=ie.length;0<=--de;)ie[de]=0}var h=0,m=29,g=256,_=g+1+m,x=30,D=19,y=2*_+1,S=15,w=16,A=7,N=256,z=16,k=17,M=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(_+2));d(U);var I=new Array(2*x);d(I);var X=new Array(512);d(X);var j=new Array(256);d(j);var J=new Array(m);d(J);var q,ne,V,Q=new Array(x);function Z(ie,de,Fe,Oe,xe){this.static_tree=ie,this.extra_bits=de,this.extra_base=Fe,this.elems=Oe,this.max_length=xe,this.has_stree=ie&&ie.length}function $(ie,de){this.dyn_tree=ie,this.max_code=0,this.stat_desc=de}function ee(ie){return ie<256?X[ie]:X[256+(ie>>>7)]}function se(ie,de){ie.pending_buf[ie.pending++]=255&de,ie.pending_buf[ie.pending++]=de>>>8&255}function oe(ie,de,Fe){ie.bi_valid>w-Fe?(ie.bi_buf|=de<<ie.bi_valid&65535,se(ie,ie.bi_buf),ie.bi_buf=de>>w-ie.bi_valid,ie.bi_valid+=Fe-w):(ie.bi_buf|=de<<ie.bi_valid&65535,ie.bi_valid+=Fe)}function he(ie,de,Fe){oe(ie,Fe[2*de],Fe[2*de+1])}function ge(ie,de){for(var Fe=0;Fe|=1&ie,ie>>>=1,Fe<<=1,0<--de;);return Fe>>>1}function Re(ie,de,Fe){var Oe,xe,te=new Array(S+1),le=0;for(Oe=1;Oe<=S;Oe++)te[Oe]=le=le+Fe[Oe-1]<<1;for(xe=0;xe<=de;xe++){var ue=ie[2*xe+1];ue!==0&&(ie[2*xe]=ge(te[ue]++,ue))}}function Le(ie){var de;for(de=0;de<_;de++)ie.dyn_ltree[2*de]=0;for(de=0;de<x;de++)ie.dyn_dtree[2*de]=0;for(de=0;de<D;de++)ie.bl_tree[2*de]=0;ie.dyn_ltree[2*N]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Ge(ie){8<ie.bi_valid?se(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function Ke(ie,de,Fe,Oe){var xe=2*de,te=2*Fe;return ie[xe]<ie[te]||ie[xe]===ie[te]&&Oe[de]<=Oe[Fe]}function Qe(ie,de,Fe){for(var Oe=ie.heap[Fe],xe=Fe<<1;xe<=ie.heap_len&&(xe<ie.heap_len&&Ke(de,ie.heap[xe+1],ie.heap[xe],ie.depth)&&xe++,!Ke(de,Oe,ie.heap[xe],ie.depth));)ie.heap[Fe]=ie.heap[xe],Fe=xe,xe<<=1;ie.heap[Fe]=Oe}function $e(ie,de,Fe){var Oe,xe,te,le,ue=0;if(ie.last_lit!==0)for(;Oe=ie.pending_buf[ie.d_buf+2*ue]<<8|ie.pending_buf[ie.d_buf+2*ue+1],xe=ie.pending_buf[ie.l_buf+ue],ue++,Oe===0?he(ie,xe,de):(he(ie,(te=j[xe])+g+1,de),(le=B[te])!==0&&oe(ie,xe-=J[te],le),he(ie,te=ee(--Oe),Fe),(le=P[te])!==0&&oe(ie,Oe-=Q[te],le)),ue<ie.last_lit;);he(ie,N,de)}function Ve(ie,de){var Fe,Oe,xe,te=de.dyn_tree,le=de.stat_desc.static_tree,ue=de.stat_desc.has_stree,ve=de.stat_desc.elems,Ne=-1;for(ie.heap_len=0,ie.heap_max=y,Fe=0;Fe<ve;Fe++)te[2*Fe]!==0?(ie.heap[++ie.heap_len]=Ne=Fe,ie.depth[Fe]=0):te[2*Fe+1]=0;for(;ie.heap_len<2;)te[2*(xe=ie.heap[++ie.heap_len]=Ne<2?++Ne:0)]=1,ie.depth[xe]=0,ie.opt_len--,ue&&(ie.static_len-=le[2*xe+1]);for(de.max_code=Ne,Fe=ie.heap_len>>1;1<=Fe;Fe--)Qe(ie,te,Fe);for(xe=ve;Fe=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],Qe(ie,te,1),Oe=ie.heap[1],ie.heap[--ie.heap_max]=Fe,ie.heap[--ie.heap_max]=Oe,te[2*xe]=te[2*Fe]+te[2*Oe],ie.depth[xe]=(ie.depth[Fe]>=ie.depth[Oe]?ie.depth[Fe]:ie.depth[Oe])+1,te[2*Fe+1]=te[2*Oe+1]=xe,ie.heap[1]=xe++,Qe(ie,te,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],(function(Ce,Ie){var ye,we,me,De,je,Xe,Ye=Ie.dyn_tree,We=Ie.max_code,gt=Ie.stat_desc.static_tree,zt=Ie.stat_desc.has_stree,Ut=Ie.stat_desc.extra_bits,It=Ie.stat_desc.extra_base,rn=Ie.stat_desc.max_length,zn=0;for(De=0;De<=S;De++)Ce.bl_count[De]=0;for(Ye[2*Ce.heap[Ce.heap_max]+1]=0,ye=Ce.heap_max+1;ye<y;ye++)rn<(De=Ye[2*Ye[2*(we=Ce.heap[ye])+1]+1]+1)&&(De=rn,zn++),Ye[2*we+1]=De,We<we||(Ce.bl_count[De]++,je=0,It<=we&&(je=Ut[we-It]),Xe=Ye[2*we],Ce.opt_len+=Xe*(De+je),zt&&(Ce.static_len+=Xe*(gt[2*we+1]+je)));if(zn!==0){do{for(De=rn-1;Ce.bl_count[De]===0;)De--;Ce.bl_count[De]--,Ce.bl_count[De+1]+=2,Ce.bl_count[rn]--,zn-=2}while(0<zn);for(De=rn;De!==0;De--)for(we=Ce.bl_count[De];we!==0;)We<(me=Ce.heap[--ye])||(Ye[2*me+1]!==De&&(Ce.opt_len+=(De-Ye[2*me+1])*Ye[2*me],Ye[2*me+1]=De),we--)}})(ie,de),Re(te,Ne,ie.bl_count)}function G(ie,de,Fe){var Oe,xe,te=-1,le=de[1],ue=0,ve=7,Ne=4;for(le===0&&(ve=138,Ne=3),de[2*(Fe+1)+1]=65535,Oe=0;Oe<=Fe;Oe++)xe=le,le=de[2*(Oe+1)+1],++ue<ve&&xe===le||(ue<Ne?ie.bl_tree[2*xe]+=ue:xe!==0?(xe!==te&&ie.bl_tree[2*xe]++,ie.bl_tree[2*z]++):ue<=10?ie.bl_tree[2*k]++:ie.bl_tree[2*M]++,te=xe,Ne=(ue=0)===le?(ve=138,3):xe===le?(ve=6,3):(ve=7,4))}function ke(ie,de,Fe){var Oe,xe,te=-1,le=de[1],ue=0,ve=7,Ne=4;for(le===0&&(ve=138,Ne=3),Oe=0;Oe<=Fe;Oe++)if(xe=le,le=de[2*(Oe+1)+1],!(++ue<ve&&xe===le)){if(ue<Ne)for(;he(ie,xe,ie.bl_tree),--ue!=0;);else xe!==0?(xe!==te&&(he(ie,xe,ie.bl_tree),ue--),he(ie,z,ie.bl_tree),oe(ie,ue-3,2)):ue<=10?(he(ie,k,ie.bl_tree),oe(ie,ue-3,3)):(he(ie,M,ie.bl_tree),oe(ie,ue-11,7));te=xe,Ne=(ue=0)===le?(ve=138,3):xe===le?(ve=6,3):(ve=7,4)}}d(Q);var Se=!1;function ae(ie,de,Fe,Oe){oe(ie,(h<<1)+(Oe?1:0),3),(function(xe,te,le,ue){Ge(xe),se(xe,le),se(xe,~le),l.arraySet(xe.pending_buf,xe.window,te,le,xe.pending),xe.pending+=le})(ie,de,Fe)}a._tr_init=function(ie){Se||((function(){var de,Fe,Oe,xe,te,le=new Array(S+1);for(xe=Oe=0;xe<m-1;xe++)for(J[xe]=Oe,de=0;de<1<<B[xe];de++)j[Oe++]=xe;for(j[Oe-1]=xe,xe=te=0;xe<16;xe++)for(Q[xe]=te,de=0;de<1<<P[xe];de++)X[te++]=xe;for(te>>=7;xe<x;xe++)for(Q[xe]=te<<7,de=0;de<1<<P[xe]-7;de++)X[256+te++]=xe;for(Fe=0;Fe<=S;Fe++)le[Fe]=0;for(de=0;de<=143;)U[2*de+1]=8,de++,le[8]++;for(;de<=255;)U[2*de+1]=9,de++,le[9]++;for(;de<=279;)U[2*de+1]=7,de++,le[7]++;for(;de<=287;)U[2*de+1]=8,de++,le[8]++;for(Re(U,_+1,le),de=0;de<x;de++)I[2*de+1]=5,I[2*de]=ge(de,5);q=new Z(U,B,g+1,_,S),ne=new Z(I,P,0,x,S),V=new Z(new Array(0),R,0,D,A)})(),Se=!0),ie.l_desc=new $(ie.dyn_ltree,q),ie.d_desc=new $(ie.dyn_dtree,ne),ie.bl_desc=new $(ie.bl_tree,V),ie.bi_buf=0,ie.bi_valid=0,Le(ie)},a._tr_stored_block=ae,a._tr_flush_block=function(ie,de,Fe,Oe){var xe,te,le=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=(function(ue){var ve,Ne=4093624447;for(ve=0;ve<=31;ve++,Ne>>>=1)if(1&Ne&&ue.dyn_ltree[2*ve]!==0)return c;if(ue.dyn_ltree[18]!==0||ue.dyn_ltree[20]!==0||ue.dyn_ltree[26]!==0)return f;for(ve=32;ve<g;ve++)if(ue.dyn_ltree[2*ve]!==0)return f;return c})(ie)),Ve(ie,ie.l_desc),Ve(ie,ie.d_desc),le=(function(ue){var ve;for(G(ue,ue.dyn_ltree,ue.l_desc.max_code),G(ue,ue.dyn_dtree,ue.d_desc.max_code),Ve(ue,ue.bl_desc),ve=D-1;3<=ve&&ue.bl_tree[2*H[ve]+1]===0;ve--);return ue.opt_len+=3*(ve+1)+5+5+4,ve})(ie),xe=ie.opt_len+3+7>>>3,(te=ie.static_len+3+7>>>3)<=xe&&(xe=te)):xe=te=Fe+5,Fe+4<=xe&&de!==-1?ae(ie,de,Fe,Oe):ie.strategy===4||te===xe?(oe(ie,2+(Oe?1:0),3),$e(ie,U,I)):(oe(ie,4+(Oe?1:0),3),(function(ue,ve,Ne,Ce){var Ie;for(oe(ue,ve-257,5),oe(ue,Ne-1,5),oe(ue,Ce-4,4),Ie=0;Ie<Ce;Ie++)oe(ue,ue.bl_tree[2*H[Ie]+1],3);ke(ue,ue.dyn_ltree,ve-1),ke(ue,ue.dyn_dtree,Ne-1)})(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,le+1),$e(ie,ie.dyn_ltree,ie.dyn_dtree)),Le(ie),Oe&&Ge(ie)},a._tr_tally=function(ie,de,Fe){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=de>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&de,ie.pending_buf[ie.l_buf+ie.last_lit]=255&Fe,ie.last_lit++,de===0?ie.dyn_ltree[2*Fe]++:(ie.matches++,de--,ie.dyn_ltree[2*(j[Fe]+g+1)]++,ie.dyn_dtree[2*ee(de)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){oe(ie,2,3),he(ie,N,U),(function(de){de.bi_valid===16?(se(de,de.bi_buf),de.bi_buf=0,de.bi_valid=0):8<=de.bi_valid&&(de.pending_buf[de.pending++]=255&de.bi_buf,de.bi_buf>>=8,de.bi_valid-=8)})(ie)}},{"../utils/common":41}],53:[function(n,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,a){(function(l){(function(c,f){if(!c.setImmediate){var d,h,m,g,_=1,x={},D=!1,y=c.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(c);S=S&&S.setTimeout?S:c,d={}.toString.call(c.process)==="[object process]"?function(z){process.nextTick(function(){A(z)})}:(function(){if(c.postMessage&&!c.importScripts){var z=!0,k=c.onmessage;return c.onmessage=function(){z=!1},c.postMessage("","*"),c.onmessage=k,z}})()?(g="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",N,!1):c.attachEvent("onmessage",N),function(z){c.postMessage(g+z,"*")}):c.MessageChannel?((m=new MessageChannel).port1.onmessage=function(z){A(z.data)},function(z){m.port2.postMessage(z)}):y&&"onreadystatechange"in y.createElement("script")?(h=y.documentElement,function(z){var k=y.createElement("script");k.onreadystatechange=function(){A(z),k.onreadystatechange=null,h.removeChild(k),k=null},h.appendChild(k)}):function(z){setTimeout(A,0,z)},S.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var k=new Array(arguments.length-1),M=0;M<k.length;M++)k[M]=arguments[M+1];var B={callback:z,args:k};return x[_]=B,d(_),_++},S.clearImmediate=w}function w(z){delete x[z]}function A(z){if(D)setTimeout(A,0,z);else{var k=x[z];if(k){D=!0;try{(function(M){var B=M.callback,P=M.args;switch(P.length){case 0:B();break;case 1:B(P[0]);break;case 2:B(P[0],P[1]);break;case 3:B(P[0],P[1],P[2]);break;default:B.apply(f,P)}})(k)}finally{w(z),D=!1}}}}function N(z){z.source===c&&typeof z.data=="string"&&z.data.indexOf(g)===0&&A(+z.data.slice(g.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(C0)),C0.exports}var gj=pj();const AE=kd(gj);class Hl{static async exportToZip(t,n,i){const a=new AE,l={exportDate:new Date().toISOString(),version:"1.0",projectName:n},c=JSON.stringify({ProjectData:t,Metadata:l},null,2);if(a.file("project.json",c),i){const d=i.match(/^data:image\/(\w+);base64,(.+)$/);if(d){const h=d[1],m=await fetch(i).then(g=>g.blob());a.file(`lageplan.${h}`,m)}}return await a.generateAsync({type:"blob"})}static exportToJson(t,n,i){const a={ProjectData:t,Metadata:{exportDate:new Date().toISOString(),version:"1.0",projectName:n,imageData:i||null}};return JSON.stringify(a,null,2)}static downloadBlob(t,n){const i=URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}}class xr extends Error{details;constructor(t,n){super(t),this.name="UsedDataLoadError",this.details=n}}class jb{static async loadFromFile(t){try{const n=await fetch(t);if(!n.ok)throw new xr(`Failed to fetch file: ${n.statusText}`);const i=await n.text();return this.loadFromJson(i)}catch(n){throw n instanceof xr?n:new xr("Failed to load file",n)}}static loadFromJson(t){try{const n=JSON.parse(t);return this.validateAndTransform(n)}catch(n){throw n instanceof xr?n:new xr("Invalid JSON format",n)}}static validateAndTransform(t){if(!t||typeof t!="object")throw new xr("Data must be an object");const n={Trassen:this.validateTrassen(t.Trassen),Hoehenpunkte:this.validateHoehenpunkte(t.Hoehenpunkte),DGMDreiecke:this.validateDGMDreiecke(t.DGMDreiecke),DGMKanten:this.validateDGMKanten(t.DGMKanten),ImmissionPoints:this.validateImmissionPoints(t.ImmissionPoints),LeiterTypes:t.LeiterTypes||[],ESQSources:this.validateESQSources(t.ESQSources),AgrKorrektur:!!t.AgrKorrektur,mitFrequenz:t.mitFrequenz!==void 0?!!t.mitFrequenz:!1},i=["A","B","C","D","E","F","G","H","I","J"];for(const a of i){const l=`GKR_${a}`,c=`GKH_${a}`,f=`PX_${a}`,d=`PY_${a}`;t[l]!==void 0&&(n[l]=t[l]),t[c]!==void 0&&(n[c]=t[c]),t[f]!==void 0&&(n[f]=t[f]),t[d]!==void 0&&(n[d]=t[d])}return t.IM_X_max!==void 0&&(n.IM_X_max=t.IM_X_max),t.IM_Y_max!==void 0&&(n.IM_Y_max=t.IM_Y_max),t.Name!==void 0&&(n.Name=t.Name),t.ReferencePoints!==void 0&&(n.ReferencePoints=t.ReferencePoints),t.ImageData!==void 0&&(n.ImageData=t.ImageData),n}static validateTrassen(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid Trasse at index ${i}`);return{Nummer:Number(n.Nummer)||0,Name:String(n.Name||""),AnzahlMastebenen:Number(n.AnzahlMastebenen)||0,AnzahlMastleitungen:Number(n.AnzahlMastleitungen)||0,UsedMasten:this.validateMasten(n.UsedMasten)}}):[]}static validateMasten(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid Mast at index ${i}`);return{Fusspunkt:n.Fusspunkt||{},Name:String(n.Name||""),NullpunktHoehe:Number(n.NullpunktHoehe)||0,MastHoehe:Number(n.MastHoehe)||0,Ausrichtung:this.validateVector2d(n.Ausrichtung),GKAusrichtung:this.validateGKVector2d(n.GKAusrichtung),UsedEbenen:this.validateEbenen(n.UsedEbenen)}}):[]}static validateEbenen(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid Ebene at index ${i}`);return{NummerEbene:Number(n.NummerEbene)||0,AbstandNullpunkt:Number(n.AbstandNullpunkt)||0,UsedLeitungenLinks:this.validateLeitungen(n.UsedLeitungenLinks),UsedLeitungenRechts:this.validateLeitungen(n.UsedLeitungenRechts)}}):[]}static validateLeitungen(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid Leiter at index ${i}`);return{Durchgangspunkt:this.validateGKVector3d(n.Durchgangspunkt),ACDC:Number(n.ACDC)||0,NummerLeiter:Number(n.NummerLeiter)||0,AbstandMastachse:Number(n.AbstandMastachse)||0,Isolatorlaenge:Number(n.Isolatorlaenge)||0,NextMastEbene:Number(n.NextMastEbene)||0,NextMastLeiter:Number(n.NextMastLeiter)||0,Einbauart:Number(n.Einbauart)||0,Durchhang:Number(n.Durchhang)||0,ParabelA:Number(n.ParabelA)||0,ParabelB:Number(n.ParabelB)||0,ParabelC:Number(n.ParabelC)||0,SchallLw:String(n.SchallLw||""),SchallLwDB:Number(n.SchallLwDB)||0,BetrU:Number(n.BetrU)||0,AmSeg:Number(n.AmSeg)||0,SegLenU:Number(n.SegLenU)||0,LeiterLen:Number(n.LeiterLen)||0,Mittelpkt:this.validateGKVector3d(n.Mittelpkt),SegmentPunkte:this.validateGKVector3dArray(n.SegmentPunkte)}}):[]}static validateImmissionPoints(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid ImmissionPoint at index ${i}`);return{Name:String(n.Name||""),OriginalData:n.OriginalData||{},Position:this.validateGKVector3d(n.Position),HeightOffset:Number(n.HeightOffset)||0,G_Bodenfaktor:Number(n.G_Bodenfaktor)||0}}):[]}static validateESQSources(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid ESQ at index ${i}`);return{Bezeichnung:String(n.Bezeichnung||""),Position:this.validateGKVector3d(n.Position),Hoehe:Number(n.Hoehe)||0,Raumwinkelmass:Number(n.Raumwinkelmass)||0,Beurteilungszeitraum:Number(n.Beurteilungszeitraum)||0,Schallleistungspegel:!!n.Schallleistungspegel,L:Number(n.L)||0,S:Number(n.S)||0,Z_Impulshaltigkeit:Number(n.Z_Impulshaltigkeit)||0,Z_Tonhaltigkeit:Number(n.Z_Tonhaltigkeit)||0,Z_Cmet:Number(n.Z_Cmet)||0,Ruhezeitzuschlag:!!n.Ruhezeitzuschlag,Einwirkzeit:Number(n.Einwirkzeit)||0,Zeiteinheit:Number(n.Zeiteinheit)||0}}):[]}static validateHoehenpunkte(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid Hoehenpunkt at index ${i}`);return{LfdNummer:Number(n.LfdNummer)||0,GK_Vektor:this.validateGKVector3d(n.GK_Vektor)}}):[]}static validateDGMDreiecke(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid DGMDreieck at index ${i}`);return{A:n.A||{},B:n.B||{},C:n.C||{},LfdNummer:Number(n.LfdNummer)||0}}):[]}static validateDGMKanten(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new xr(`Invalid DGMKante at index ${i}`);return{EckeA:n.EckeA||{},EckeB:n.EckeB||{},DreieckA:Number(n.DreieckA)||0,DreieckB:Number(n.DreieckB)||0}}):[]}static validateVector2d(t){return!t||typeof t!="object"?{x:0,y:0,Length:0}:{x:Number(t.x)||0,y:Number(t.y)||0,Length:Number(t.Length)||0}}static validateGKVector2d(t){return!t||typeof t!="object"?{Rechts:0,Hoch:0}:{Rechts:Number(t.Rechts)||0,Hoch:Number(t.Hoch)||0}}static validateGKVector3d(t){return!t||typeof t!="object"?{GK:{Rechts:0,Hoch:0},z:0}:{GK:this.validateGKVector2d(t.GK),z:Number(t.z)||0}}static validateGKVector3dArray(t){return Array.isArray(t)?t.map(n=>this.validateGKVector3d(n)):[]}}class vj{static async importFromZip(t){const i=await new AE().loadAsync(t),a=i.file("project.json");if(!a)throw new Error("Invalid project file: project.json not found");const l=await a.async("text"),c=JSON.parse(l);if(!c.ProjectData)throw new Error("Invalid project file: ProjectData not found");const f=jb.validateAndTransform(c.ProjectData);let d;const h=Object.keys(i.files).filter(_=>_.startsWith("lageplan.")&&!i.files[_].dir);if(h.length>0){const _=i.file(h[0]);if(_){const x=await _.async("blob");d=await yj(x)}}const m=f.IM_X_max,g=f.IM_Y_max;return{projectData:f,imageData:d,projectName:c.Metadata?.projectName,imageWidth:m,imageHeight:g}}static async importFromJson(t){const n=await t.text(),i=JSON.parse(n);if(!i.ProjectData)throw new Error("Invalid project file: ProjectData not found");const a=jb.validateAndTransform(i.ProjectData),l=a.IM_X_max,c=a.IM_Y_max;return{projectData:a,imageData:i.Metadata?.imageData,projectName:i.Metadata?.projectName||i.ProjectData?.Name,imageWidth:l,imageHeight:c}}static async importProject(t){const n=t.name.toLowerCase();if(n.endsWith(".zip"))return this.importFromZip(t);if(n.endsWith(".json"))return this.importFromJson(t);throw new Error("Unsupported file type. Please use .zip or .json files.")}}async function yj(e){return new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=n,i.readAsDataURL(e)})}const _j=`
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
`,NE=({isVisible:e,message:t="Berechnung läuft...",progress:n})=>e?b.jsxs(b.Fragment,{children:[b.jsx("style",{children:_j}),b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",style:{backdropFilter:"blur(4px)"},children:b.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 flex flex-col items-center space-y-4 min-w-[320px] max-w-[400px]",style:{animation:"fadeIn 0.2s ease-out"},children:[b.jsxs("div",{className:"relative",children:[b.jsx(NM,{className:"h-12 w-12 animate-spin text-blue-600"}),b.jsx("div",{className:"absolute inset-0 h-12 w-12 animate-ping opacity-20",children:b.jsx("div",{className:"h-full w-full rounded-full bg-blue-600"})})]}),b.jsxs("div",{className:"text-center w-full",children:[b.jsx("p",{className:"text-lg font-medium text-gray-900",children:t}),n&&b.jsxs("div",{className:"mt-4 w-full",children:[b.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.current.toLocaleString("de-DE")," von ",n.total.toLocaleString("de-DE")," berechnet"]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:b.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-300 ease-out",style:{width:`${n.current/n.total*100}%`}})}),b.jsxs("div",{className:"flex justify-between items-center mt-2",children:[b.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(n.current/n.total*100),"%"]}),n.current>0&&n.total>n.current&&b.jsxs("div",{className:"text-xs text-gray-500",children:["Verbleibend: ",(n.total-n.current).toLocaleString("de-DE")]})]})]})]})]})})]}):null,xj=({mapWidth:e,mapHeight:t,transform:n})=>{const{immissionGrid:i,immissionGridSettings:a,showImmissionGrid:l,showGridPoints:c,isCalculatingGrid:f,gridCalculationProgress:d,generateImmissionGrid:h,clearImmissionGrid:m,setShowImmissionGrid:g,setShowGridPoints:_,updateImmissionGridSettings:x}=Yt(),[D,y]=W.useState(a),S=async()=>{x(D),await h(e,t,n),l||g(!0)},{confirm:w}=am(),A=async()=>{await w("Immissionsgitter löschen?")&&m()};return b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Immissionsgitter"}),i.length>0&&b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>g(!l),className:"h-6 px-2",children:l?b.jsx(vM,{className:"h-3 w-3"}):b.jsx(pM,{className:"h-3 w-3"})})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("div",{children:[b.jsx(ot,{htmlFor:"gridX",className:"text-xs",children:"Punkte X"}),b.jsx(Lt,{id:"gridX",type:"number",min:"2",max:"50",value:D.gridSizeX,onChange:N=>y({...D,gridSizeX:parseInt(N.target.value)||10}),className:"h-8 text-xs"})]}),b.jsxs("div",{children:[b.jsx(ot,{htmlFor:"gridY",className:"text-xs",children:"Punkte Y"}),b.jsx(Lt,{id:"gridY",type:"number",min:"2",max:"50",value:D.gridSizeY,onChange:N=>y({...D,gridSizeY:parseInt(N.target.value)||10}),className:"h-8 text-xs"})]})]}),b.jsxs("div",{children:[b.jsx(ot,{htmlFor:"heightOffset",className:"text-xs",children:"Höhenoffset (m)"}),b.jsx(Lt,{id:"heightOffset",type:"number",min:"0",max:"100",step:"0.5",value:D.heightOffset,onChange:N=>y({...D,heightOffset:parseFloat(N.target.value)||1.5}),className:"h-8 text-xs"})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(st,{variant:"default",size:"sm",onClick:S,disabled:f||!n,className:"flex-1",children:[b.jsx(Ug,{className:"h-4 w-4 mr-1"}),f?"Berechne...":"Gitter erstellen"]}),i.length>0&&b.jsx(st,{variant:"destructive",size:"sm",onClick:A,disabled:f,children:b.jsx(jc,{className:"h-4 w-4"})})]}),i.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"text-xs text-gray-600",children:[i.length," Punkte berechnet",i.length>0&&b.jsxs("div",{className:"text-xs",children:["Wertebereich: ",Math.min(...i.map(N=>N.value)).toFixed(1)," - ",Math.max(...i.map(N=>N.value)).toFixed(1)," dB(A)"]})]}),b.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-3 border-t border-gray-200",children:[b.jsx(ur,{id:"showGridPoints",checked:c,onCheckedChange:N=>_(N)}),b.jsx("label",{htmlFor:"showGridPoints",className:"text-xs font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Gitterpunkte anzeigen"})]})]}),!n&&b.jsx("div",{className:"text-xs text-amber-600",children:"Hinweis: Helmert-Transformation erforderlich (Referenzpunkte A & B setzen)"})]}),b.jsx(NE,{isVisible:f,message:`Berechne ${D.gridSizeX*D.gridSizeY} Gitterpunkte...`,progress:d||void 0})]})},bj=({isOpen:e,onClose:t,mapWidth:n,mapHeight:i,transform:a})=>b.jsx(Vr,{open:e,onOpenChange:t,children:b.jsxs(Yr,{className:"sm:max-w-md",children:[b.jsx(Xr,{children:b.jsx(Wr,{children:"Immissionsgitter Einstellungen"})}),b.jsx("div",{className:"mt-4",children:b.jsx(xj,{mapWidth:n,mapHeight:i,transform:a})})]})});function wj(e){const t=e+"CollectionProvider",[n,i]=gu(t),[a,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=y=>{const{scope:S,children:w}=y,A=Jn.useRef(null),N=Jn.useRef(new Map).current;return b.jsx(a,{scope:S,itemMap:N,collectionRef:A,children:w})};c.displayName=t;const f=e+"CollectionSlot",d=Ed(f),h=Jn.forwardRef((y,S)=>{const{scope:w,children:A}=y,N=l(f,w),z=kr(S,N.collectionRef);return b.jsx(d,{ref:z,children:A})});h.displayName=f;const m=e+"CollectionItemSlot",g="data-radix-collection-item",_=Ed(m),x=Jn.forwardRef((y,S)=>{const{scope:w,children:A,...N}=y,z=Jn.useRef(null),k=kr(S,z),M=l(m,w);return Jn.useEffect(()=>(M.itemMap.set(z,{ref:z,...N}),()=>void M.itemMap.delete(z))),b.jsx(_,{[g]:"",ref:k,children:A})});x.displayName=m;function D(y){const S=l(e+"CollectionConsumer",y);return Jn.useCallback(()=>{const A=S.collectionRef.current;if(!A)return[];const N=Array.from(A.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((M,B)=>N.indexOf(M.ref.current)-N.indexOf(B.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:x},D,i]}var Dj=W.createContext(void 0);function ME(e){const t=W.useContext(Dj);return e||t||"ltr"}var A0="rovingFocusGroup.onEntryFocus",Ej={bubbles:!1,cancelable:!0},Xc="RovingFocusGroup",[bg,kE,Sj]=wj(Xc),[Cj,TE]=gu(Xc,[Sj]),[Aj,Nj]=Cj(Xc),zE=W.forwardRef((e,t)=>b.jsx(bg.Provider,{scope:e.__scopeRovingFocusGroup,children:b.jsx(bg.Slot,{scope:e.__scopeRovingFocusGroup,children:b.jsx(Mj,{...e,ref:t})})}));zE.displayName=Xc;var Mj=W.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:a=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...g}=e,_=W.useRef(null),x=kr(t,_),D=ME(l),[y,S]=tm({prop:c,defaultProp:f??null,onChange:d,caller:Xc}),[w,A]=W.useState(!1),N=lu(h),z=kE(n),k=W.useRef(!1),[M,B]=W.useState(0);return W.useEffect(()=>{const P=_.current;if(P)return P.addEventListener(A0,N),()=>P.removeEventListener(A0,N)},[N]),b.jsx(Aj,{scope:n,orientation:i,dir:D,loop:a,currentTabStopId:y,onItemFocus:W.useCallback(P=>S(P),[S]),onItemShiftTab:W.useCallback(()=>A(!0),[]),onFocusableItemAdd:W.useCallback(()=>B(P=>P+1),[]),onFocusableItemRemove:W.useCallback(()=>B(P=>P-1),[]),children:b.jsx(Zn.div,{tabIndex:w||M===0?-1:0,"data-orientation":i,...g,ref:x,style:{outline:"none",...e.style},onMouseDown:An(e.onMouseDown,()=>{k.current=!0}),onFocus:An(e.onFocus,P=>{const R=!k.current;if(P.target===P.currentTarget&&R&&!w){const H=new CustomEvent(A0,Ej);if(P.currentTarget.dispatchEvent(H),!H.defaultPrevented){const U=z().filter(q=>q.focusable),I=U.find(q=>q.active),X=U.find(q=>q.id===y),J=[I,X,...U].filter(Boolean).map(q=>q.ref.current);RE(J,m)}}k.current=!1}),onBlur:An(e.onBlur,()=>A(!1))})})}),LE="RovingFocusGroupItem",FE=W.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:a=!1,tabStopId:l,children:c,...f}=e,d=zc(),h=l||d,m=Nj(LE,n),g=m.currentTabStopId===h,_=kE(n),{onFocusableItemAdd:x,onFocusableItemRemove:D,currentTabStopId:y}=m;return W.useEffect(()=>{if(i)return x(),()=>D()},[i,x,D]),b.jsx(bg.ItemSlot,{scope:n,id:h,focusable:i,active:a,children:b.jsx(Zn.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...f,ref:t,onMouseDown:An(e.onMouseDown,S=>{i?m.onItemFocus(h):S.preventDefault()}),onFocus:An(e.onFocus,()=>m.onItemFocus(h)),onKeyDown:An(e.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const w=zj(S,m.orientation,m.dir);if(w!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let N=_().filter(z=>z.focusable).map(z=>z.ref.current);if(w==="last")N.reverse();else if(w==="prev"||w==="next"){w==="prev"&&N.reverse();const z=N.indexOf(S.currentTarget);N=m.loop?Lj(N,z+1):N.slice(z+1)}setTimeout(()=>RE(N))}}),children:typeof c=="function"?c({isCurrentTabStop:g,hasTabStop:y!=null}):c})})});FE.displayName=LE;var kj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Tj(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zj(e,t,n){const i=Tj(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return kj[i]}function RE(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function Lj(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var Fj=zE,Rj=FE,om="Tabs",[jj,rB]=gu(om,[TE]),jE=TE(),[Bj,hv]=jj(om),BE=W.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:a,defaultValue:l,orientation:c="horizontal",dir:f,activationMode:d="automatic",...h}=e,m=ME(f),[g,_]=tm({prop:i,onChange:a,defaultProp:l??"",caller:om});return b.jsx(Bj,{scope:n,baseId:zc(),value:g,onValueChange:_,orientation:c,dir:m,activationMode:d,children:b.jsx(Zn.div,{dir:m,"data-orientation":c,...h,ref:t})})});BE.displayName=om;var PE="TabsList",OE=W.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...a}=e,l=hv(PE,n),c=jE(n);return b.jsx(Fj,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:i,children:b.jsx(Zn.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:t})})});OE.displayName=PE;var IE="TabsTrigger",HE=W.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:a=!1,...l}=e,c=hv(IE,n),f=jE(n),d=ZE(c.baseId,i),h=KE(c.baseId,i),m=i===c.value;return b.jsx(Rj,{asChild:!0,...f,focusable:!a,active:m,children:b.jsx(Zn.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...l,ref:t,onMouseDown:An(e.onMouseDown,g=>{!a&&g.button===0&&g.ctrlKey===!1?c.onValueChange(i):g.preventDefault()}),onKeyDown:An(e.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&c.onValueChange(i)}),onFocus:An(e.onFocus,()=>{const g=c.activationMode!=="manual";!m&&!a&&g&&c.onValueChange(i)})})})});HE.displayName=IE;var GE="TabsContent",UE=W.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:a,children:l,...c}=e,f=hv(GE,n),d=ZE(f.baseId,i),h=KE(f.baseId,i),m=i===f.value,g=W.useRef(m);return W.useEffect(()=>{const _=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(_)},[]),b.jsx(vu,{present:a||m,children:({present:_})=>b.jsx(Zn.div,{"data-state":m?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":d,hidden:!_,id:h,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:_&&l})})});UE.displayName=GE;function ZE(e,t){return`${e}-trigger-${t}`}function KE(e,t){return`${e}-content-${t}`}var Pj=BE,Oj=OE,Ij=HE,Hj=UE;function qE({className:e,...t}){return b.jsx(Pj,{"data-slot":"tabs",className:gn("flex flex-col gap-2",e),...t})}function $E({className:e,...t}){return b.jsx(Oj,{"data-slot":"tabs-list",className:gn("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Nd({className:e,...t}){return b.jsx(Ij,{"data-slot":"tabs-trigger",className:gn("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Md({className:e,...t}){return b.jsx(Hj,{"data-slot":"tabs-content",className:gn("flex-1 outline-none",e),...t})}const Gj=({isOpen:e,onClose:t,onSave:n,existingTemplate:i})=>{const[a,l]=W.useState(()=>i||{name:"",description:"",anzahlEbenen:1,ebenenConfig:[{nummerEbene:1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1}]}),[c,f]=W.useState("none"),[d,h]=W.useState([]),[m,g]=W.useState("general");W.useEffect(()=>{e&&(l(i?{...i,ebenenConfig:i.ebenenConfig?[...i.ebenenConfig]:[]}:{name:"",description:"",anzahlEbenen:1,ebenenConfig:[{nummerEbene:1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1}]}),g("general"),f("none"))},[e,i]);const _=w=>{const A=a.ebenenConfig||[];let N=[];if(w>A.length){N=[...A];for(let z=A.length;z<w;z++)N.push({nummerEbene:z+1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1})}else w<A.length?N=A.slice(0,w):N=A;N=N.map((z,k)=>({...z,nummerEbene:k+1})),l({...a,anzahlEbenen:w,ebenenConfig:N})},x=w=>{if(console.log("Selected template:",w),f(w),w==="none")return;const N={simple:"Einfacher Einzelmast","380kv":"Standard 380kV","110kv":"Kompakt 110kV","220kv":"Doppelsystem 220kV"}[w],z=Kb.find(k=>k.name===N);if(z){const k=M0(z);l(k)}},D=()=>{const w=M0(a),A=HS(w);if(A.length>0){h(A);return}n(w),t()},y=(w,A)=>{l(N=>{const z=[...N.ebenenConfig||[]];return z[w]={...z[w],...A},{...N,ebenenConfig:z}})},S=()=>{const{anzahlEbenen:w=1,ebenenConfig:A=[]}=a,N=400,z=450,k=z/2,M=N-30,B=30,P=M-B;return b.jsxs("svg",{width:z,height:N,className:"border rounded",children:[b.jsx("line",{x1:0,y1:M,x2:z,y2:M,stroke:"#8B4513",strokeWidth:2}),b.jsx("line",{x1:k,y1:M,x2:k,y2:B,stroke:"#333",strokeWidth:4}),A.map((R,H)=>{const U=M-(H+1)/(w+1)*P,I=R.anzahlLeitungenLinks||0,X=R.anzahlLeitungenRechts||0;return b.jsxs("g",{children:[b.jsx("line",{x1:k-60,y1:U,x2:k+60,y2:U,stroke:"#666",strokeWidth:2}),Array.from({length:I},(j,J)=>{const q=k-20-J*15;return b.jsx("circle",{cx:q,cy:U,r:4,fill:"#FF0000"},`left-${J}`)}),Array.from({length:X},(j,J)=>{const q=k+20+J*15;return b.jsx("circle",{cx:q,cy:U,r:4,fill:"#0000FF"},`right-${J}`)}),b.jsxs("text",{x:k+70,y:U+5,fontSize:12,fill:"#333",children:["E",R.nummerEbene,": ",I,"L/",X,"R"]})]},H)}),b.jsx("text",{x:k-50,y:20,fontSize:14,fill:"#333",children:"Links"}),b.jsx("text",{x:k+20,y:20,fontSize:14,fill:"#333",children:"Rechts"})]})};return b.jsx(Vr,{open:e,onOpenChange:t,modal:!0,children:b.jsxs(Yr,{className:"!max-w-[90vw] !w-[90vw] !max-h-[90vh] overflow-y-auto",style:{width:"90vw",maxWidth:"90vw",height:"85vh"},onPointerDownOutside:w=>w.preventDefault(),children:[b.jsx(Xr,{children:b.jsx(Wr,{children:i?"Mast-Layout bearbeiten":"Neues Mast-Layout erstellen"})}),b.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsxs(qE,{value:m,onValueChange:g,children:[b.jsxs($E,{className:"grid w-full grid-cols-2",children:[b.jsx(Nd,{value:"general",children:"Allgemein"}),b.jsx(Nd,{value:"details",children:"Ebenen-Details"})]}),b.jsxs(Md,{value:"general",className:"space-y-4",children:[!i&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"template-select",children:"Vorlage verwenden"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs("select",{id:"template-select",className:"flex-1 h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",value:c,onChange:w=>{console.log("Select changed to:",w.target.value),x(w.target.value)},children:[b.jsx("option",{value:"none",children:"Keine Vorlage"}),b.jsx("option",{value:"simple",children:"Einfacher Einzelmast"}),b.jsx("option",{value:"380kv",children:"Standard 380kV"}),b.jsx("option",{value:"110kv",children:"Kompakt 110kV"}),b.jsx("option",{value:"220kv",children:"Doppelsystem 220kV"})]}),b.jsx(st,{type:"button",size:"sm",onClick:()=>{console.log("Test button clicked!"),alert("Button works!")},children:"Test"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"name",children:"Name *"}),b.jsx(Lt,{id:"name",value:a.name||"",onChange:w=>l({...a,name:w.target.value}),placeholder:"z.B. Standard 380kV"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"description",children:"Beschreibung"}),b.jsx(Lt,{id:"description",value:a.description||"",onChange:w=>l({...a,description:w.target.value}),placeholder:"Optionale Beschreibung..."})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"anzahlEbenen",children:"Anzahl Ebenen *"}),b.jsx(Lt,{id:"anzahlEbenen",type:"number",min:1,max:10,value:a.anzahlEbenen||1,onChange:w=>{const A=parseInt(w.target.value)||1;_(A)}})]})]}),b.jsx(Md,{value:"details",className:"space-y-4",children:a.ebenenConfig?.map((w,A)=>b.jsxs("div",{className:"border rounded p-3 space-y-3",children:[b.jsxs("div",{className:"font-medium",children:["Ebene ",w.nummerEbene]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx(ot,{className:"text-xs",children:"Leiter Links"}),b.jsx(Lt,{type:"number",min:0,max:10,value:w.anzahlLeitungenLinks||0,onChange:N=>{const z=parseInt(N.target.value)||0;y(A,{anzahlLeitungenLinks:z})}})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx(ot,{className:"text-xs",children:"Leiter Rechts"}),b.jsx(Lt,{type:"number",min:0,max:10,value:w.anzahlLeitungenRechts||0,onChange:N=>{const z=parseInt(N.target.value)||0;y(A,{anzahlLeitungenRechts:z})}})]})]})]},A))})]}),d.length>0&&b.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 space-y-1",children:[b.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-medium",children:[b.jsx(U2,{className:"h-4 w-4"}),"Validierungsfehler"]}),d.map((w,A)=>b.jsxs("div",{className:"text-sm text-red-600",children:["• ",w]},A))]})]}),b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsx("div",{className:"font-medium",children:"Vorschau"}),b.jsx("div",{className:"overflow-auto p-2",children:b.jsx("div",{className:"inline-block min-w-fit",children:S()})}),b.jsxs("div",{className:"bg-gray-50 rounded p-3 space-y-2 text-sm",children:[b.jsx("div",{className:"font-medium",children:"Zusammenfassung"}),b.jsxs("div",{children:["• ",a.anzahlEbenen||1," Ebene(n)"]}),a.ebenenConfig?.map((w,A)=>b.jsxs("div",{children:["• Ebene ",w.nummerEbene,": ",w.anzahlLeitungenLinks||0,"L/",w.anzahlLeitungenRechts||0,"R"]},A))]})]})]}),b.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[b.jsxs(st,{variant:"outline",onClick:t,children:[b.jsx(Os,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),b.jsxs(st,{onClick:D,children:[b.jsx(Kd,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})},Uj=({isOpen:e,onClose:t,onSave:n,leiterType:i,existingNames:a})=>{const[l,c]=W.useState(""),[f,d]=W.useState(55),[h,m]=W.useState({});W.useEffect(()=>{e&&(i?(c(i.Name),d(i.SchallLW)):(c(""),d(55)),m({}))},[e,i]);const g=()=>{const D={};return l.trim()?a.includes(l.trim())&&(!i||i.originalName!==l.trim())&&(D.name=`Ein Leitertyp mit dem Namen "${l.trim()}" existiert bereits`):D.name="Name ist erforderlich",m(D),Object.keys(D).length===0},_=()=>{g()&&(n({Name:l.trim(),SchallLW:f},i?.originalName),t())},x=D=>{D.key==="Enter"&&_()};return b.jsx(Vr,{open:e,onOpenChange:t,children:b.jsxs(Yr,{className:"sm:max-w-md",children:[b.jsx(Xr,{children:b.jsxs(Wr,{className:"flex items-center gap-2",children:[b.jsx(eu,{className:"h-5 w-5"}),i?"Leitertyp bearbeiten":"Neuer Leitertyp"]})}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"name",children:"Name"}),b.jsx(Lt,{id:"name",type:"text",placeholder:"z.B. L1",value:l,onChange:D=>{c(D.target.value),h.name&&m({...h,name:void 0})},onKeyPress:x,className:h.name?"border-red-500":"",autoFocus:!0}),h.name&&b.jsx("p",{className:"text-sm text-red-500",children:h.name})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"schallLW",children:"SchallLW (dB)"}),b.jsx(Lt,{id:"schallLW",type:"number",placeholder:"55",value:f,onChange:D=>d(parseFloat(D.target.value)||0),onKeyPress:x,min:0,max:200,step:.1}),b.jsx("p",{className:"text-xs text-gray-500",children:"Schallleistungspegel in Dezibel (0-200 dB)"})]})]}),b.jsxs(Yc,{children:[b.jsx(st,{variant:"outline",onClick:t,children:"Abbrechen"}),b.jsx(st,{onClick:_,children:i?"Speichern":"Hinzufügen"})]})]})})},Zj=({isOpen:e,onClose:t})=>{const{leiterTypes:n,addLeiterType:i,updateLeiterType:a,deleteLeiterType:l}=Yt(),[c,f]=W.useState(!1),[d,h]=W.useState(),[m,g]=W.useState([]);W.useEffect(()=>{if(e){const w=[];n.forEach((A,N)=>{w.push({key:N,Name:A.Name,SchallLW:A.SchallLW})}),g(w)}},[e,n]);const _=()=>{h(void 0),f(!0)},x=w=>{h({Name:w.Name,SchallLW:w.SchallLW,originalName:w.key}),f(!0)},D=async(w,A)=>{if(confirm(`Leitertyp "${A}" wirklich löschen?`)){l(w);const z=[];Yt.getState().leiterTypes.forEach((M,B)=>{z.push({key:B,Name:M.Name,SchallLW:M.SchallLW})}),g(z)}},y=(w,A)=>{A?a(A,w):i(w);const N=[];Yt.getState().leiterTypes.forEach((k,M)=>{N.push({key:M,Name:k.Name,SchallLW:k.SchallLW})}),g(N)},S=m.map(w=>w.Name);return b.jsxs(b.Fragment,{children:[b.jsx(Vr,{open:e,onOpenChange:t,children:b.jsxs(Yr,{className:"sm:max-w-lg",children:[b.jsx(Xr,{children:b.jsxs(Wr,{className:"flex items-center gap-2",children:[b.jsx(eu,{className:"h-5 w-5"}),"Leitertypen verwalten"]})}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Verwalten Sie die verfügbaren Leitertypen für Ihr Projekt."}),b.jsxs(st,{onClick:_,size:"sm",className:"gap-2",children:[b.jsx(Zd,{className:"h-4 w-4"}),"Neuer Typ"]})]}),b.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:m.length===0?b.jsxs("div",{className:"text-center py-12 text-gray-500",children:[b.jsx(eu,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),b.jsx("p",{className:"text-sm font-medium",children:"Keine Leitertypen vorhanden"}),b.jsx("p",{className:"text-xs mt-1",children:'Klicken Sie auf "Neuer Typ" um zu beginnen'})]}):m.map(w=>b.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors group",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"font-medium text-sm",children:w.Name}),b.jsxs("div",{className:"text-xs text-gray-500",children:["SchallLW: ",w.SchallLW," dB"]})]}),b.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>x(w),className:"h-8 w-8 p-0",title:"Bearbeiten",children:b.jsx(q0,{className:"h-4 w-4"})}),b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>D(w.key,w.Name),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Löschen",children:b.jsx(jc,{className:"h-4 w-4"})})]})]},w.key))}),m.length>0&&b.jsxs("div",{className:"pt-3 border-t text-xs text-gray-600 flex justify-between",children:[b.jsxs("span",{children:[m.length," Leitertyp(en) insgesamt"]}),b.jsx("span",{className:"text-gray-400",children:"Änderungen werden sofort gespeichert"})]}),b.jsx("div",{className:"flex justify-end pt-3 border-t",children:b.jsx(st,{variant:"outline",onClick:t,children:"Schließen"})})]})]})}),b.jsx(Uj,{isOpen:c,onClose:()=>f(!1),onSave:y,leiterType:d,existingNames:S})]})},Kj=({isOpen:e,onClose:t})=>{const{trassenNew:n,poles:i,connectionLines:a,mastLayoutTemplates:l,leiterTypes:c,addTrasseNew:f,updateTrasseNew:d,deleteTrasseNew:h,addMastLayoutTemplate:m,updateMastLayoutTemplate:g,deleteMastLayoutTemplate:_,loadStandardTemplates:x}=Yt();console.log("TrasseManagerDialog - trassenNew from store:",n),console.log("TrasseManagerDialog - trassenNew size:",n.size),console.log("Templates",l);const{prompt:D,confirm:y}=am(),[S,w]=W.useState(""),[A,N]=W.useState(""),[z,k]=W.useState(!1),[M,B]=W.useState(!1),[P,R]=W.useState();W.useEffect(()=>{e&&l.size===0&&(console.log("Loading standard templates..."),x())},[e]);const H=()=>{if(console.log("handleAddTrasse called"),console.log("newTrasseName:",S),console.log("selectedTemplateId:",A),S.trim()&&A){console.log("Calling addTrasseNew...");const ne=f(S,A);console.log("addTrasseNew returned trasseId:",ne),ne?(w(""),N(""),console.log("Trasse created successfully")):console.error("Failed to create Trasse - template required")}else console.log("Cannot add trasse - missing name or templateId")},U=async(ne,V)=>{const Q=await D("Trassen-Name bearbeiten:",V);Q&&Q!==V&&d(ne,{name:Q})},I=async(ne,V)=>{await y(`Trasse "${V}" wirklich löschen?`)&&h(ne)},X=ne=>{P?g(P.id,ne):m(ne),R(void 0)},j=ne=>{R(ne),k(!0)},J=async(ne,V)=>{await y(`Vorlage "${V}" wirklich löschen?`)&&_(ne)},q=ne=>{const V=n.get(ne);if(!V){console.error("Trasse not found:",ne);return}const Q=new Map;V.poleIds.forEach(ee=>{const se=i.get(ee);se&&Q.set(ee,se)});const Z=Array.from(a.values()).filter(ee=>ee.trasseId===ne),$=z0(V,Q,Z,Array.from(c.values()));if(console.log("=== New UI to UsedTrasse Conversion ==="),console.log("Input TrasseNew:",V),console.log("Input Poles:",Q),console.log("Input ConnectionLines:",Z),console.log("Output UsedTrasse:",$),$.UsedMasten.length>0){const ee=$.UsedMasten[0];if(ee.UsedEbenen.length>0){const se=ee.UsedEbenen[0];if(se.UsedLeitungenLinks&&se.UsedLeitungenLinks.length>0){const oe=se.UsedLeitungenLinks[0];console.log("First conductor details:"),console.log("  - SchallLw:",oe.SchallLw),console.log("  - SchallLwDB:",oe.SchallLwDB),console.log("  - Durchhang:",oe.Durchhang)}}}alert(`Conversion completed for Trasse "${V.name}". Check the console for details.`)};return b.jsxs(Vr,{open:e,onOpenChange:t,children:[b.jsxs(Yr,{className:"sm:max-w-lg",children:[b.jsx(Xr,{children:b.jsx(Wr,{children:"Trassen verwalten"})}),b.jsxs("div",{className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"p-3 bg-green-50 rounded-lg space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(ot,{className:"text-sm font-medium",children:"Leitertypen (Schallpegel)"}),b.jsxs(st,{variant:"outline",size:"sm",onClick:()=>B(!0),children:[b.jsx(eu,{className:"h-4 w-4 mr-2"}),"Leitertypen verwalten"]})]}),b.jsxs("div",{className:"text-xs text-gray-600",children:[c.size," Leitertyp(en) definiert"]})]}),b.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(ot,{className:"text-sm font-medium",children:"Mast-Layout-Vorlagen"}),b.jsxs(st,{variant:"outline",size:"sm",onClick:()=>{R(void 0),k(!0)},children:[b.jsx(OM,{className:"h-4 w-4 mr-2"}),"Neue Vorlage"]})]}),l&&l.size>0?b.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Array.from(l.entries()).map(([ne,V])=>b.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-white rounded text-xs",children:[b.jsx("span",{children:V.name}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>j(V),className:"h-6 w-6 p-0",children:b.jsx(q0,{className:"h-3 w-3"})}),b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>J(ne,V.name),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:b.jsx(jc,{className:"h-3 w-3"})})]})]},ne))}):b.jsxs("div",{className:"text-center py-3 bg-gray-50 rounded text-xs text-gray-500",children:[b.jsx("p",{children:"Keine Vorlagen vorhanden"}),b.jsx(st,{variant:"link",size:"sm",onClick:x,className:"mt-1",children:"Standard-Vorlagen laden"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{className:"text-sm",children:"Neue Trasse hinzufügen"}),!A&&S.trim()&&b.jsxs("div",{className:"text-xs text-amber-600 flex items-center gap-1",children:[b.jsx(U2,{className:"h-3 w-3"}),"Bitte wählen Sie eine Vorlage aus"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx(Lt,{type:"text",placeholder:"Trassen-Name...",value:S,onChange:ne=>w(ne.target.value),onKeyPress:ne=>{ne.key==="Enter"&&S.trim()&&A&&H()},className:"flex-1"}),l&&l.size>0?b.jsxs("select",{value:A||"",onChange:ne=>N(ne.target.value),className:"w-[180px] h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[b.jsx("option",{value:"",children:"Vorlage wählen (erforderlich)"}),Array.from(l.entries()).map(([ne,V])=>b.jsx("option",{value:ne,children:V.name},ne))]}):b.jsx(st,{variant:"outline",size:"sm",onClick:x,className:"w-[180px]",children:"Vorlagen laden"}),b.jsx(st,{onClick:H,disabled:!S.trim()||!A,size:"sm",title:A?"":"Bitte wählen Sie eine Vorlage",children:b.jsx(Zd,{className:"h-4 w-4"})})]})]}),b.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.size===0?b.jsxs("div",{className:"text-center py-8 text-gray-500",children:[b.jsx(Zg,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),b.jsx("p",{className:"text-sm",children:"Keine Trassen vorhanden"}),b.jsx("p",{className:"text-xs mt-1",children:"Fügen Sie eine neue Trasse hinzu"})]}):Array.from(n.entries()).map(([ne,V])=>b.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"font-medium text-sm",children:V.name}),b.jsxs("div",{className:"text-xs text-gray-500",children:[V.poleIds.length," Mast(e)",V.templateId&&l?.get(V.templateId)&&b.jsxs("span",{className:"ml-2 text-blue-600",title:"Basiert auf Vorlage (Kopie)",children:["⚡ ",l.get(V.templateId).name]})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>q(ne),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",title:"Run trasseUIToUsedTrasse conversion",children:b.jsx(HM,{className:"h-4 w-4"})}),b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>U(ne,V.name),className:"h-8 w-8 p-0",children:b.jsx(q0,{className:"h-4 w-4"})}),b.jsx(st,{variant:"ghost",size:"sm",onClick:()=>I(ne,V.name),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:b.jsx(jc,{className:"h-4 w-4"})})]})]},ne))}),n.size>0&&b.jsxs("div",{className:"pt-3 border-t text-xs text-gray-600",children:[n.size," Trasse(n) insgesamt"]})]})]}),b.jsx(Gj,{isOpen:z,onClose:()=>{k(!1),R(void 0)},onSave:X,existingTemplate:P,existingTemplates:l}),b.jsx(Zj,{isOpen:M,onClose:()=>B(!1)})]})},qj=({isOpen:e,onClose:t,showTrassen:n,setShowTrassen:i,showDGM:a,setShowDGM:l,showContour:c,setShowContour:f,showReferenceCalibration:d,setShowReferenceCalibration:h})=>{const{showImmissionGrid:m,setShowImmissionGrid:g,showGridPoints:_,setShowGridPoints:x,immissionGrid:D,dgmKanten:y,showImmissionPoints:S,setShowImmissionPoints:w,showESQPoints:A,setShowESQPoints:N,showHoehenpunkte:z,setShowHoehenpunkte:k,showPoles:M,setShowPoles:B,showReferencePoints:P,setShowReferencePoints:R,immissionPoints:H,esqSources:U,hoehenpunkte:I,poles:X,referencePoints:j}=Yt();return b.jsx(Vr,{open:e,onOpenChange:t,children:b.jsxs(Yr,{className:"sm:max-w-md",children:[b.jsx(Xr,{children:b.jsx(Wr,{children:"Kartenebenen"})}),b.jsxs("div",{className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"trassen-layer",checked:n,onCheckedChange:J=>i(J)}),b.jsxs(ot,{htmlFor:"trassen-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(Zg,{className:"h-4 w-4"}),b.jsx("span",{children:"Trassen anzeigen"})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"dgm-layer",checked:a,onCheckedChange:J=>l(J),disabled:!y||y.length===0}),b.jsxs(ot,{htmlFor:"dgm-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(Z2,{className:"h-4 w-4"}),b.jsx("span",{children:"DGM anzeigen"}),(!y||y.length===0)&&b.jsx("span",{className:"text-xs text-gray-500",children:"(nicht verfügbar)"})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"contour-layer",checked:c,onCheckedChange:J=>f(J)}),b.jsxs(ot,{htmlFor:"contour-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(Ph,{className:"h-4 w-4"}),b.jsx("span",{children:"Höhenlinien anzeigen"})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"immission-grid-layer",checked:m,onCheckedChange:J=>g(J),disabled:!D||D.length===0}),b.jsxs(ot,{htmlFor:"immission-grid-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(Ug,{className:"h-4 w-4"}),b.jsx("span",{children:"Immissionsgitter anzeigen"}),(!D||D.length===0)&&b.jsx("span",{className:"text-xs text-gray-500",children:"(nicht berechnet)"})]})]}),D&&D.length>0&&b.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[b.jsx(ur,{id:"grid-points-layer",checked:_,onCheckedChange:J=>x(J)}),b.jsxs(ot,{htmlFor:"grid-points-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(bx,{className:"h-4 w-4"}),b.jsx("span",{children:"Gitterpunkte anzeigen"})]})]})]}),b.jsxs("div",{className:"pt-3 border-t",children:[b.jsx("h3",{className:"text-sm font-medium mb-3 text-gray-700",children:"Markierungen"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"immission-points-layer",checked:S,onCheckedChange:J=>w(J)}),b.jsxs(ot,{htmlFor:"immission-points-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(Ud,{className:"h-4 w-4 text-red-500"}),b.jsx("span",{children:"Immissionspunkte"}),b.jsxs("span",{className:"text-xs text-gray-500",children:["(",H.size,")"]})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"esq-points-layer",checked:A,onCheckedChange:J=>N(J)}),b.jsxs(ot,{htmlFor:"esq-points-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(K2,{className:"h-4 w-4 text-blue-500"}),b.jsx("span",{children:"ESQ-Quellen"}),b.jsxs("span",{className:"text-xs text-gray-500",children:["(",U.size,")"]})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"hoehenpunkte-layer",checked:z,onCheckedChange:J=>k(J)}),b.jsxs(ot,{htmlFor:"hoehenpunkte-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(n6,{className:"h-4 w-4 text-green-500"}),b.jsx("span",{children:"Höhenpunkte"}),b.jsxs("span",{className:"text-xs text-gray-500",children:["(",I.size,")"]})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"poles-layer",checked:M,onCheckedChange:J=>B(J)}),b.jsxs(ot,{htmlFor:"poles-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(eu,{className:"h-4 w-4 text-amber-700"}),b.jsx("span",{children:"Masten"}),b.jsxs("span",{className:"text-xs text-gray-500",children:["(",X.size,")"]})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"reference-points-layer",checked:P,onCheckedChange:J=>R(J)}),b.jsxs(ot,{htmlFor:"reference-points-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(tM,{className:"h-4 w-4 text-purple-500"}),b.jsx("span",{children:"Referenzpunkte"}),b.jsxs("span",{className:"text-xs text-gray-500",children:["(",j.length,")"]})]})]})]})]}),b.jsxs("div",{className:"pt-3 border-t",children:[b.jsx("h3",{className:"text-sm font-medium mb-3 text-gray-700",children:"Benutzeroberfläche"}),b.jsx("div",{className:"space-y-3",children:b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(ur,{id:"reference-calibration-layer",checked:d,onCheckedChange:J=>h(J)}),b.jsxs(ot,{htmlFor:"reference-calibration-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(bx,{className:"h-4 w-4 text-indigo-500"}),b.jsx("span",{children:"Referenzpunkt-Kalibrierung"})]})]})})]}),b.jsx("div",{className:"pt-3 border-t space-y-1",children:b.jsxs("div",{className:"text-xs text-gray-600",children:[D&&D.length>0&&b.jsxs("div",{children:[D.length," Immissionsgitterpunkte berechnet"]}),y&&y.length>0&&b.jsxs("div",{children:[y.length," DGM-Kanten geladen"]})]})})]})]})})},$j=({isOpen:e,onClose:t})=>{const{projectName:n,mitFrequenz:i,kt:a,setProjectName:l,setMitFrequenz:c,setKt:f,clearImmissionGrid:d}=Yt(),[h,m]=W.useState(n),[g,_]=W.useState(i),[x,D]=W.useState(a);W.useEffect(()=>{e&&(m(n),_(i),D(a))},[e,n,i,a]);const y=()=>{const w=g!==i||x!==a;l(h),c(g),f(x),w&&(console.log("Clearing immission grid due to computation settings change"),d()),t()},S=()=>{m(n),_(i),D(a),t()};return b.jsx(Vr,{open:e,onOpenChange:t,children:b.jsxs(Yr,{className:"sm:max-w-[500px]",children:[b.jsx(Xr,{children:b.jsx(Wr,{children:"Projekteinstellungen"})}),b.jsxs("div",{className:"space-y-6 py-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"projectName",className:"text-sm font-medium",children:"Projektname"}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(Z0,{className:"h-4 w-4 text-gray-500"}),b.jsx(Lt,{id:"projectName",type:"text",value:h,onChange:w=>m(w.target.value),placeholder:"Projektname eingeben...",className:"flex-1"})]})]}),b.jsx("div",{className:"border-t pt-4"}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(ur,{id:"mitFrequenz",checked:g,onCheckedChange:w=>_(w)}),b.jsx(ot,{htmlFor:"mitFrequenz",className:"text-sm font-medium",children:"Frequenzabhängige Berechnung"})]}),b.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600 ml-6",children:[b.jsx(c0,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),b.jsx("span",{children:"Aktiviert die frequenzabhängige Berechnung der Schallimmissionen"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"kt",className:"text-sm font-medium",children:"Kt - Ton- und Informationshaltigkeit"}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(Lt,{id:"kt",type:"number",value:x,onChange:w=>D(parseFloat(w.target.value)||0),step:"0.1",className:"w-32"}),b.jsx("span",{className:"text-sm text-gray-600",children:"dB"})]}),b.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[b.jsx(c0,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),b.jsx("span",{children:"Zuschlag für Ton- und Informationshaltigkeit nach TA Lärm. Typische Werte: 0 dB (keine Auffälligkeit), 3-6 dB (deutliche Ton- oder Informationshaltigkeit)"})]})]}),b.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:b.jsxs("div",{className:"flex items-start space-x-2",children:[b.jsx(c0,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),b.jsxs("div",{className:"text-sm text-blue-800",children:[b.jsx("p",{className:"font-medium",children:"Hinweis:"}),b.jsx("p",{children:"Änderungen an diesen Einstellungen führen dazu, dass alle zwischengespeicherten Berechnungsergebnisse gelöscht werden und eine Neuberechnung erforderlich ist."})]})]})})]}),b.jsxs("div",{className:"flex justify-end space-x-2",children:[b.jsx(st,{variant:"outline",onClick:S,children:"Abbrechen"}),b.jsx(st,{onClick:y,children:"Speichern"})]})]})})},Vj=({isOpen:e,onClose:t,onConfirm:n,imageUrl:i,originalWidth:a,originalHeight:l})=>{const[c,f]=W.useState(0),[d,h]=W.useState(null),[m,g]=W.useState({width:a,height:l}),_=W.useCallback((A,N)=>new Promise((z,k)=>{const M=document.createElement("img");M.onload=()=>{const B=document.createElement("canvas"),P=B.getContext("2d");if(!P){k(new Error("Could not get canvas context"));return}const R=N*Math.PI/180,H=Math.abs(Math.sin(R)),U=Math.abs(Math.cos(R)),I=M.width*U+M.height*H,X=M.width*H+M.height*U;B.width=I,B.height=X,P.translate(I/2,X/2),P.rotate(R),P.drawImage(M,-M.width/2,-M.height/2);const j=B.toDataURL("image/png");z({rotatedUrl:j,width:Math.round(I),height:Math.round(X)})},M.onerror=()=>k(new Error("Failed to load image for rotation")),M.src=A}),[]),x=W.useCallback(async A=>{try{if(A===0)h(i),g({width:a,height:l});else{const N=await _(i,A);h(N.rotatedUrl),g({width:N.width,height:N.height})}}catch(N){console.error("Error generating preview:",N)}},[i,a,l,_]),D=()=>{const A=(c+90)%360;f(A),x(A)},y=()=>{const A=(c-90+360)%360;f(A),x(A)},S=()=>{n(c)},w=()=>{f(0),h(null),t()};return Jn.useEffect(()=>{e&&!d&&(h(i),g({width:a,height:l}))},[e,i,a,l,d]),b.jsx(Vr,{open:e,onOpenChange:w,children:b.jsxs(Yr,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[b.jsx(Xr,{children:b.jsx(Wr,{children:"Lageplan-Bild drehen"})}),b.jsxs("div",{className:"flex flex-col space-y-4",children:[b.jsxs("div",{className:"flex items-center justify-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[b.jsxs(st,{onClick:y,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[b.jsx(qM,{className:"h-4 w-4"}),b.jsx("span",{children:"90° links"})]}),b.jsxs("div",{className:"text-center",children:[b.jsxs("div",{className:"text-lg font-semibold text-gray-700",children:["Aktuell: ",c,"°"]}),b.jsxs("div",{className:"text-sm text-gray-500",children:[m.width," × ",m.height," px"]})]}),b.jsxs(st,{onClick:D,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[b.jsx(VM,{className:"h-4 w-4"}),b.jsx("span",{children:"90° rechts"})]})]}),b.jsx("div",{className:"flex justify-center items-center bg-gray-100 rounded-lg p-4 min-h-[300px] max-h-[500px] overflow-auto",children:d?b.jsx("img",{src:d,alt:"Rotation Preview",className:"max-w-full max-h-full object-contain border border-gray-300 rounded",style:{maxWidth:"100%",maxHeight:"400px"}}):b.jsx("div",{className:"text-gray-500",children:"Lade Vorschau..."})}),b.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[b.jsx("p",{children:"Verwenden Sie die Schaltflächen, um das Bild in 90°-Schritten zu drehen."}),b.jsx("p",{children:"Die Vorschau zeigt, wie das Bild nach der Rotation aussehen wird."})]})]}),b.jsxs(Yc,{className:"mt-6",children:[b.jsxs(st,{onClick:w,variant:"outline",className:"flex items-center space-x-2",children:[b.jsx(Os,{className:"h-4 w-4"}),b.jsx("span",{children:"Abbrechen"})]}),b.jsxs(st,{onClick:S,className:"flex items-center space-x-2",children:[b.jsx(od,{className:"h-4 w-4"}),b.jsx("span",{children:"Übernehmen"})]})]})]})})};console.log("SHOW_EXAMPLE_PROJECTS: ","true");const Yj=({mapWidth:e,mapHeight:t,transform:n,showTrassen:i,setShowTrassen:a,showDGM:l,setShowDGM:c,showContour:f,setShowContour:d,showReferenceCalibration:h,setShowReferenceCalibration:m})=>{const g=W.useRef(null),_=W.useRef(null),x=W.useRef(null),[D,y]=W.useState(!1),[S,w]=W.useState(!1),[A,N]=W.useState(!1),[z,k]=W.useState("Berechnung läuft..."),[M,B]=W.useState(void 0),[P,R]=W.useState(null),[H,U]=W.useState(!1),[I,X]=W.useState(!1),[j,J]=W.useState(!1),[q,ne]=W.useState(!1),[V,Q]=W.useState(!1),[Z,$]=W.useState(!1),[ee,se]=W.useState(null),{projectName:oe,projectImage:he,imageWidth:ge,imageHeight:Re,referencePoints:Le,setProjectName:Ge,createNewProject:Ke,setProjectImage:Qe,exportProjectData:$e,loadProjectData:Ve,computeImmissionPointsFromGUI:G,immissionPoints:ke,mitFrequenz:Se,kt:ae}=Yt(),{prompt:ie,confirm:de}=am(),Fe=he&&Le.length>=2;W.useEffect(()=>{const me=De=>{(De.ctrlKey||De.metaKey)&&((De.key==="n"||De.key==="N")&&(De.preventDefault(),Oe()),(De.key==="s"||De.key==="S")&&(De.preventDefault(),Fe&&Ne(!0)),(De.key==="x"||De.key==="X")&&(De.preventDefault(),_.current?.click()))};return window.addEventListener("keydown",me),()=>{window.removeEventListener("keydown",me)}},[Fe]);const Oe=async()=>{const me=await ie("Name für neues Projekt:","Neues Projekt");me&&await de("Aktuelle Projektdaten werden gelöscht. Fortfahren?")&&Ke(me)},xe=async(me,De,je)=>{try{if(!await de(`Beispielprojekt "${De}" laden? Aktuelle Daten werden überschrieben.`))return;const Ye=await fetch(me);if(!Ye.ok)throw new Error(`Failed to load project: ${Ye.statusText}`);const We=await Ye.json();if(Ve(We.ProjectData),console.log("Project name: ",De),De.toLowerCase().includes("tausend")){const{imageWidth:gt,imageHeight:zt}=Yt.getState();console.log("Setting image width and height to ",gt,zt),Qe(je,gt,zt)}else Qe(je,893,639);Ge(De)}catch(Xe){console.error("Error loading default project:",Xe),alert(`Fehler beim Laden des Beispielprojekts: ${Xe.message}`)}},te=(me,De)=>new Promise((je,Xe)=>{const Ye=document.createElement("img");Ye.onload=()=>{const We=document.createElement("canvas"),gt=We.getContext("2d");if(!gt){Xe(new Error("Could not get canvas context"));return}const zt=De*Math.PI/180,Ut=Math.abs(Math.sin(zt)),It=Math.abs(Math.cos(zt)),rn=Ye.width*It+Ye.height*Ut,zn=Ye.width*Ut+Ye.height*It;We.width=rn,We.height=zn,gt.translate(rn/2,zn/2),gt.rotate(zt),gt.drawImage(Ye,-Ye.width/2,-Ye.height/2);const zr=We.toDataURL("image/png");je({rotatedUrl:zr,width:Math.round(rn),height:Math.round(zn)})},Ye.onerror=()=>Xe(new Error("Failed to load image for rotation")),Ye.src=me}),le=async me=>{const De=me.target.files?.[0];if(!De)return;if(!De.type.startsWith("image/")){alert("Bitte wählen Sie eine Bilddatei aus.");return}y(!0);const je=new FileReader;je.onload=async Xe=>{const Ye=Xe.target?.result,We=document.createElement("img");We.onload=async()=>{try{await de("Möchten Sie das hochgeladene Lageplan-Bild drehen?")?(se({url:Ye,width:We.width,height:We.height}),$(!0),y(!1)):(Qe(Ye,We.width,We.height),y(!1))}catch(gt){console.error("Error during image processing:",gt),alert("Fehler beim Verarbeiten des Bildes."),y(!1)}},We.onerror=()=>{alert("Fehler beim Laden des Bildes."),y(!1)},We.src=Ye},je.onerror=()=>{alert("Fehler beim Lesen der Datei."),y(!1)},je.readAsDataURL(De)},ue=async me=>{if(ee){y(!0),$(!1);try{if(me===0)Qe(ee.url,ee.width,ee.height);else{const De=await te(ee.url,me);Qe(De.rotatedUrl,De.width,De.height)}}catch(De){console.error("Error applying rotation:",De),alert("Fehler beim Drehen des Bildes. Das ursprüngliche Bild wird verwendet."),Qe(ee.url,ee.width,ee.height)}finally{se(null),y(!1)}}},ve=()=>{$(!1),se(null),y(!1)},Ne=async(me=!1)=>{try{const De=$e(),je=`${oe.replace(/[^a-z0-9]/gi,"_")}_export`;if(me){const Xe=await Hl.exportToZip(De,oe,he||void 0);Hl.downloadBlob(Xe,`${je}.zip`)}else{const Xe=Hl.exportToJson(De,oe,he||void 0),Ye=new Blob([Xe],{type:"application/json"});Hl.downloadBlob(Ye,`${je}.json`)}}catch(De){console.error("Export error:",De),alert("Fehler beim Exportieren des Projekts.")}},Ce=async me=>{const De=me.target.files?.[0];if(De){try{const je=await vj.importProject(De);if(console.log("Import result:",{hasImageData:!!je.imageData,imageWidth:je.imageWidth,imageHeight:je.imageHeight,hasProjectDataImageData:!!je.projectData.ImageData,IM_X_max:je.projectData.IM_X_max,IM_Y_max:je.projectData.IM_Y_max}),Ve(je.projectData),je.imageData){const Ye=je.imageWidth&&je.imageWidth>0?je.imageWidth:893,We=je.imageHeight&&je.imageHeight>0?je.imageHeight:639;console.log("PATH 1: Setting project image dimensions from migration with embedded imageData:",{width:Ye,height:We,fromProjectData:je.imageWidth,fromProjectHeight:je.imageHeight}),Qe(je.imageData,Ye,We)}else je.imageWidth&&je.imageHeight&&je.imageWidth>0&&je.imageHeight>0&&(console.log("PATH 2: No imageData, but setting dimensions in store:",{width:je.imageWidth,height:je.imageHeight}),Yt.setState({imageWidth:je.imageWidth,imageHeight:je.imageHeight}));!je.imageData&&je.projectData.ImageData&&(console.log("PATH 3: Using ImageData from projectData with dimensions:",{width:je.imageWidth||893,height:je.imageHeight||639}),Qe(je.projectData.ImageData,je.imageWidth||893,je.imageHeight||639));const Xe=De.name.replace(/_export\.(json|zip)$/,"").replace(/_/g," ");Ge(je.projectName||je.projectData.Name||Xe)}catch(je){console.error("Import error:",je),alert(`Fehler beim Importieren: ${je.message}`)}_.current&&(_.current.value="")}},Ie=async me=>{const De=me.target.files?.[0];if(De){if(!De.name.toLowerCase().endsWith(".zip")){alert("Bitte wählen Sie eine ZIP-Datei aus.");return}N(!0),k("Transformiere ZIP-Datei...");try{const je=new FormData;je.append("ZipFile",De);const Ye=await fetch("http://coronapluswebapi.kuf-remote.de/api/Project/transform-zip",{method:"POST",body:je});if(!Ye.ok){const gt=await Ye.json().catch(()=>({}));throw new Error(gt.error||`Server error: ${Ye.statusText}`)}const We=await Ye.json();if(We.projectData){if(Ve(We.projectData),We.lageplanImage){const zn=`data:image/jpeg;base64,${We.lageplanImage}`,zr=We.projectData?.IM_X_max||893,aa=We.projectData?.IM_Y_max||639;console.log("Setting lageplan image from migration API with project dimensions:",{width:zr,height:aa,IM_X_max:We.projectData?.IM_X_max,IM_Y_max:We.projectData?.IM_Y_max}),Qe(zn,zr,aa)}const gt=De.name.replace(/\.zip$/i,"").replace(/_/g," ");Ge(We.projectData.Name||gt);const zt=We.projectData,Ut=`${gt}_migrated`,It=We.lageplanImage?`data:image/jpeg;base64,${We.lageplanImage}`:void 0,rn=await Hl.exportToZip(zt,gt,It);Hl.downloadBlob(rn,`${Ut}.zip`),alert("Projekt erfolgreich migriert und gespeichert!")}else throw new Error("Keine Projektdaten in der Antwort erhalten.")}catch(je){console.error("Migration error:",je),alert(`Fehler bei der Migration: ${je.message}`)}finally{N(!1),k("Berechnung läuft..."),x.current&&(x.current.value="")}}},ye=async()=>{k(`Konvertiere GUI-Daten und berechne ${ke.size} Immissionspunkte...`),B(void 0),w(!0);try{console.log("Converting GUI data to UsedData format...");const De=Yt.getState().exportProjectData().Trassen||[];console.log("Converted",De.length,"trassen for computation"),typeof G!="function"?(console.error("computeImmissionPointsFromGUI not implemented yet"),alert("Die Funktion wird noch implementiert...")):(await new Promise(je=>setTimeout(je,100)),G(De),console.log("GUI-based immission points calculation complete"))}catch(me){console.error("Error during GUI-based calculation:",me),alert("Fehler bei der GUI-basierten Berechnung: "+me.message)}finally{w(!1),B(void 0)}},we=me=>{R(P===me?null:me)};return b.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white border-b border-gray-200 shadow-sm z-[9999]",children:[b.jsxs("div",{className:"flex items-center px-4 h-12 space-x-1",children:[b.jsxs("div",{className:"flex items-center space-x-2 mr-4",children:[b.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Projekt:"}),b.jsx("span",{className:"text-sm font-semibold text-gray-800",children:oe||"Unbenanntes Projekt"})]}),b.jsx("div",{className:"h-8 w-px bg-gray-300 mr-2"}),b.jsxs("div",{className:"relative",children:[b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>we("projekt"),className:"h-8 hover:bg-gray-100",children:[b.jsx(Z0,{className:"h-4 w-4 mr-1"}),"Projekt",b.jsx(No,{className:"h-3 w-3 ml-1"})]}),P==="projekt"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-52 py-1 z-[10000]",children:[b.jsxs("button",{onClick:()=>{Oe(),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(Zd,{className:"h-4 w-4 mr-2"}),"Neues Projekt"]}),b.jsxs("button",{onClick:()=>{_.current?.click(),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(xM,{className:"h-4 w-4 mr-2"}),"Öffnen"]}),b.jsx("div",{className:"border-t my-1"}),b.jsxs("button",{onClick:()=>{Ne(!1),R(null)},disabled:!Fe,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx(Kd,{className:"h-4 w-4 mr-2"}),"Als JSON speichern"]}),b.jsxs("button",{onClick:()=>{Ne(!0),R(null)},disabled:!Fe,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx(rM,{className:"h-4 w-4 mr-2"}),"Als ZIP speichern"]}),b.jsx("div",{className:"border-t my-1"}),b.jsxs("button",{onClick:()=>{x.current?.click(),R(null)},disabled:A,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx(i6,{className:"h-4 w-4 mr-2"}),A?"Transformiere...":"Migration aus ZIP"]}),b.jsx("div",{className:"border-t my-1"}),b.jsxs("button",{onClick:()=>{Q(!0),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(xx,{className:"h-4 w-4 mr-2"}),"Projekteinstellungen ",Se&&"(F)"," ",ae!==0&&`(Kt: ${ae})`]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>we("daten"),className:"h-8 hover:bg-gray-100",children:[b.jsx(yx,{className:"h-4 w-4 mr-1"}),"Daten",b.jsx(No,{className:"h-3 w-3 ml-1"})]}),P==="daten"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-64 py-1 z-[10000]",children:[b.jsxs("button",{onClick:()=>{g.current?.click(),R(null)},disabled:D,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(yx,{className:"h-4 w-4 mr-2"}),D?"Lade Bild...":he?"Lageplan ändern":"Lageplan hochladen"]}),he&&b.jsxs("div",{className:"px-3 py-2 text-xs text-gray-600",children:["Größe: ",ge," × ",Re," px"]}),b.jsx("div",{className:"border-t my-1"}),b.jsxs("button",{onClick:async()=>{await de("Alle Höhen der Objekte (Masten, ESQ, Immissionspunkte) werden an die Geländehöhe angepasst. Fortfahren?")&&(Yt.getState().resetAllHeightsToTerrain(),alert("Höhen wurden erfolgreich an das Gelände angepasst.")),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100",children:[b.jsx(Ph,{className:"h-4 w-4 mr-2 inline"}),"Höhen an Gelände anpassen"]}),b.jsxs("button",{onClick:async()=>{const me=await ie("Höhe für alle Eckpunkte (in Metern):","100");if(me!==null){const De=parseFloat(me);if(isNaN(De)){alert("Ungültige Höhenangabe");return}const je=Yt.getState();if(!n||!he){alert("Bitte laden Sie zuerst ein Bild und setzen Sie Referenzpunkte.");return}const Xe=[{x:0,y:0,name:"Ecke_OL"},{x:ge,y:0,name:"Ecke_OR"},{x:0,y:Re,name:"Ecke_UL"},{x:ge,y:Re,name:"Ecke_UR"}];for(const Ye of Xe){const[We,gt]=n.pixelToGK(Ye.x,Ye.y),zt=1;let Ut=null;if(je.hoehenpunkte.forEach((It,rn)=>{if(It.GK_Vektor&&It.GK_Vektor.GK){const zn=Math.abs(It.GK_Vektor.GK.Rechts-We),zr=Math.abs(It.GK_Vektor.GK.Hoch-gt);zn<zt&&zr<zt&&(Ut=rn)}}),Ut)je.updateHoehenpunkt(Ut,{GK_Vektor:{GK:{Rechts:We,Hoch:gt},z:De}});else{const It={GK:{Rechts:We,Hoch:gt},z:De};je.addHoehenpunkt(It)}}alert(`Höhenpunkte mit Höhe ${De}m wurden in allen vier Ecken des Bildes gesetzt.`)}R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100",children:[b.jsx(Ph,{className:"h-4 w-4 mr-2 inline"}),"Eckpunkte mit Höhe setzen"]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>we("ansicht"),className:"h-8 hover:bg-gray-100",children:[b.jsx(_x,{className:"h-4 w-4 mr-1"}),"Ansicht",b.jsx(No,{className:"h-3 w-3 ml-1"})]}),P==="ansicht"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-56 py-1 z-[10000]",children:[b.jsxs("button",{onClick:()=>{J(!0),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(_x,{className:"h-4 w-4 mr-2"}),"Kartenebenen"]}),b.jsxs("button",{onClick:()=>{ne(!0),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(BM,{className:"h-4 w-4 mr-2"}),"Farbpaletten"]}),b.jsx("div",{className:"border-t my-1"}),b.jsxs("button",{onClick:()=>{m(!h),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(Ud,{className:"h-4 w-4 mr-2"}),h?"✓ ":"","Referenzpunkt-Kalibrierung"]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>we("samples"),className:"h-8 hover:bg-gray-100",children:[b.jsx(Ph,{className:"h-4 w-4 mr-1"}),"Beispiele",b.jsx(No,{className:"h-3 w-3 ml-1"})]}),P==="samples"&&b.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-56 py-1 z-[10000]",children:[{file:"/src/test/data/simple1.json",name:"Simple 1",image:"/Lageplan.jpg"},{file:"/src/test/data/foo1.json",name:"Foo1",image:"/Lageplan.jpg"},{file:"/src/test/data/terrain4combined.json",name:"Terrain 4 Combined",image:"/Lageplan.jpg"},{file:"/src/test/data/terrain5complex.json",name:"Terrain 5 Complex",image:"/Lageplan.jpg"},{file:"/src/test/data/trasse3.json",name:"Trasse 3",image:"/Lageplan.jpg"},{file:"/src/test/data/trasse4gelaende.json",name:"Trasse 4 Gelände",image:"/Lageplan.jpg"},{file:"/src/test/data/Foo3.json",name:"Foo3",image:"/Lageplan.jpg"},{file:"/src/test/data/Foo3TrasseOnly.json",name:"Foo3 Trasse Only",image:"/Lageplan.jpg"},{file:"/src/test/data/Tausend_2025_1.json",name:"Tausend",image:"/Lageplan_Tausend.jpg"}].map(({file:me,name:De,image:je})=>b.jsx("button",{onClick:()=>{xe(me,De,je),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100",children:De},De))})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>we("help"),className:"h-8 hover:bg-gray-100",children:[b.jsx(hM,{className:"h-4 w-4 mr-1"}),"Hilfe",b.jsx(No,{className:"h-3 w-3 ml-1"})]}),P==="help"&&b.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-48 py-1 z-[10000]",children:b.jsxs("button",{onClick:()=>{window.open("/Handbuch.pdf","_blank"),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(Z0,{className:"h-4 w-4 mr-2"}),"Handbuch öffnen (PDF)"]})})]}),b.jsx("div",{className:"h-8 w-px bg-gray-300 mx-2"}),b.jsxs("div",{className:"flex items-center space-x-1",children:[b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>X(!0),className:"h-8 hover:bg-blue-50 hover:text-blue-700",children:[b.jsx(Zg,{className:"h-4 w-4 mr-2"}),"Trassen"]}),b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>U(!0),className:"h-8 hover:bg-blue-50 hover:text-blue-700",children:[b.jsx(Ug,{className:"h-4 w-4 mr-2"}),"Immissionsgitter"]})]}),b.jsx("div",{className:"h-8 w-px bg-gray-300 mx-2"}),b.jsxs("div",{className:"relative",children:[b.jsxs(st,{variant:"ghost",size:"sm",onClick:()=>we("berechnung"),className:"h-8 hover:bg-gray-100",children:[b.jsx(vx,{className:"h-4 w-4 mr-1"}),"Berechnung",b.jsx(No,{className:"h-3 w-3 ml-1"})]}),P==="berechnung"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-64 py-1 z-[10000]",children:[b.jsxs("button",{onClick:()=>{ye(),R(null)},disabled:S||ke.size===0,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx(vx,{className:"h-4 w-4 mr-2"}),S?"Berechnung läuft...":"Immissionspunkte berechnen"]}),b.jsx("div",{className:"border-t my-1"}),b.jsxs("button",{onClick:()=>{Q(!0),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(xx,{className:"h-4 w-4 mr-2"}),"Berechnungseinstellungen ",Se&&"(F)"," ",ae!==0&&`(Kt: ${ae})`]})]})]})]}),b.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:le,style:{display:"none"}}),b.jsx("input",{ref:_,type:"file",accept:"application/json,.json,.zip,application/zip",onChange:Ce,style:{display:"none"}}),b.jsx("input",{ref:x,type:"file",accept:".zip,application/zip",onChange:Ie,style:{display:"none"}}),b.jsx(bj,{isOpen:H,onClose:()=>U(!1),mapWidth:e,mapHeight:t,transform:n}),b.jsx(Kj,{isOpen:I,onClose:()=>X(!1)}),b.jsx(qj,{isOpen:j,onClose:()=>J(!1),showTrassen:i,setShowTrassen:a,showDGM:l,setShowDGM:c,showContour:f,setShowContour:d,showReferenceCalibration:h,setShowReferenceCalibration:m}),b.jsx(OF,{isOpen:q,onClose:()=>ne(!1)}),b.jsx($j,{isOpen:V,onClose:()=>Q(!1)}),ee&&b.jsx(Vj,{isOpen:Z,onClose:ve,onConfirm:ue,imageUrl:ee.url,originalWidth:ee.width,originalHeight:ee.height}),b.jsx(NE,{isVisible:S||A,message:z,progress:M})]})},Xj=({referencePointsCount:e,immissionPointsCount:t,isImmissionPointsComputed:n,gridPointsCount:i,isGridComputed:a})=>b.jsx("div",{className:"fixed top-12 left-0 right-0 bg-gray-50 border-b border-gray-200 h-6 z-[9998]",children:b.jsxs("div",{className:"flex items-center justify-end px-4 h-full space-x-4 text-xs",children:[e>=2?b.jsxs("span",{className:"text-green-600",children:["✓ ",e," Referenzpunkte"]}):b.jsxs("span",{className:"text-yellow-600",children:["⚠ ",e,"/2 Referenzpunkte"]}),t>0&&b.jsxs("span",{className:n?"text-green-600":"text-blue-600",children:[n&&"✓ ",t," Immissionspunkte"]}),i>0&&b.jsxs("span",{className:a?"text-green-600":"text-blue-600",children:[a&&"✓ ",i," Gitterpunkte"]})]})}),Wj=({mastId:e,isPole:t=!1,isOpen:n,onClose:i})=>{const{poles:a,trassenNew:l,connectionLines:c,mastLayoutTemplates:f,updatePole:d,addConnectionLine:h,updateConnectionLine:m,dtmProcessor:g}=Yt(),_=t,x=t?a.get(e):void 0,D=_||x,y=x?l.get(x.trasseId):void 0,S=y,w=y?.templateId?f.get(y.templateId):void 0,[A,N]=W.useState({name:"",mastHoehe:100,nullpunktHoehe:150,ebenen:[]}),[z,k]=W.useState("general"),[M,B]=W.useState(!1),P=y?y.poleIds.indexOf(e):-1,R=y?P===y.poleIds.length-1:!0,H=y&&!R?y.poleIds[P+1]:null,U=H?a.get(H):null;if(W.useEffect(()=>{if(!D)return;let V=[],Q="",Z=100,$=150;if(console.log("Input is this pole: ",x),t&&x&&(Q=x.name||"",Z=x.poleHeight,$=x.nullpunktHeight,V=x.levels.map(ee=>({abstandNullpunkt:ee.levelHeight,leitungenLinks:ee.leftConnections.map(se=>{let oe=0,he=0;if(se.connected2Connection){const ge=se.connected2Connection.match(/_L(\d+)_([LR])(\d+)$/);if(ge){oe=parseInt(ge[1])||0;const Re=ge[2],Le=parseInt(ge[3])||1;he=Re==="L"?Le:-Le}}return{abstandMastachse:se.horizontalDistance2Pole,nextMastEbene:oe,nextMastLeiter:he,einbauart:se.einbauart||0,connected2Connection:se.connected2Connection}}),leitungenRechts:ee.rightConnections.map(se=>{let oe=0,he=0;if(se.connected2Connection){const ge=se.connected2Connection.match(/_L(\d+)_([LR])(\d+)$/);if(ge){oe=parseInt(ge[1])||0;const Re=ge[2],Le=parseInt(ge[3])||1;he=Re==="L"?-Le:Le}}return{abstandMastachse:se.horizontalDistance2Pole,nextMastEbene:oe,nextMastLeiter:he,einbauart:se.einbauart||0,connected2Connection:se.connected2Connection}})}))),V.length===0&&w){const ee=Z/(w.anzahlEbenen+1);w.ebenenConfig.forEach((se,oe)=>{V.push({abstandNullpunkt:(oe+1)*ee,leitungenLinks:Array.from({length:se.anzahlLeitungenLinks},(he,ge)=>({abstandMastachse:10+ge*5,nextMastEbene:oe+1,nextMastLeiter:ge+1,einbauart:0})),leitungenRechts:Array.from({length:se.anzahlLeitungenRechts},(he,ge)=>({abstandMastachse:10+ge*5,nextMastEbene:oe+1,nextMastLeiter:-(ge+1),einbauart:0}))})})}N({name:Q,mastHoehe:Z,nullpunktHoehe:$,ebenen:V}),console.log("Using this ebenenData: ",V)},[D,_,x,w,t,c]),!D||!S)return null;const I=()=>{if(t&&x){const V={...x,name:A.name,poleHeight:A.mastHoehe,nullpunktHeight:A.nullpunktHoehe,levels:A.ebenen.map((Q,Z)=>({levelNumber:Z+1,levelHeight:Q.abstandNullpunkt,leftConnections:Q.leitungenLinks.map(($,ee)=>{const se=x.levels[Z]?.leftConnections[ee],oe=se?.id||`${e}_${Z+1}_left_${ee+1}`;let he=$.connected2Connection;if(!he&&!M&&H&&$.nextMastEbene>0){const ge=$.nextMastLeiter>0?"left":"right",Re=Math.abs($.nextMastLeiter),Le=ge==="left"?"L":"R";he=`${H}_L${$.nextMastEbene}_${Le}${Re}`}return{id:oe,poleId:e,levelNumber:Z+1,side:"left",connectionNumber:ee+1,horizontalDistance2Pole:$.abstandMastachse,isolatorLength:se?.isolatorLength||2.5,einbauart:$.einbauart,connected2Connection:he,durchgangspunktGK:se?.durchgangspunktGK,durchgangspunktZ:se?.durchgangspunktZ}}),rightConnections:Q.leitungenRechts.map(($,ee)=>{const se=x.levels[Z]?.rightConnections[ee],oe=se?.id||`${e}_${Z+1}_right_${ee+1}`;let he=$.connected2Connection;if(!he&&!M&&H&&$.nextMastEbene>0){const ge=$.nextMastLeiter>0?"right":"left",Re=Math.abs($.nextMastLeiter),Le=ge==="left"?"L":"R";he=`${H}_L${$.nextMastEbene}_${Le}${Re}`}return{id:oe,poleId:e,levelNumber:Z+1,side:"right",connectionNumber:ee+1,horizontalDistance2Pole:$.abstandMastachse,isolatorLength:se?.isolatorLength||2.5,einbauart:$.einbauart,connected2Connection:he,durchgangspunktGK:se?.durchgangspunktGK,durchgangspunktZ:se?.durchgangspunktZ}})}))};d(e,V),V.levels.forEach(Q=>{Q.leftConnections.forEach(Z=>{if(Z.connected2Connection){const $=Array.from(c.values()).find(ee=>ee.fromConnectionId===Z.id);if($)$.toConnectionId!==Z.connected2Connection&&m($.id,{toConnectionId:Z.connected2Connection});else if(H){const se={id:`line_${e}_${H}_L${Q.levelNumber}_L${Z.connectionNumber}`,trasseId:x.trasseId,fromConnectionId:Z.id,toConnectionId:Z.connected2Connection,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};h(se)}}}),Q.rightConnections.forEach(Z=>{if(Z.connected2Connection){const $=Array.from(c.values()).find(ee=>ee.fromConnectionId===Z.id);if($)$.toConnectionId!==Z.connected2Connection&&m($.id,{toConnectionId:Z.connected2Connection});else if(H){const se={id:`line_${e}_${H}_L${Q.levelNumber}_R${Z.connectionNumber}`,trasseId:x.trasseId,fromConnectionId:Z.id,toConnectionId:Z.connected2Connection,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};h(se)}}})})}i()},X=(V,Q)=>{const Z=[...A.ebenen];Z[V].abstandNullpunkt=Q,N({...A,ebenen:Z})},j=(V,Q,Z,$)=>{const ee=[...A.ebenen];Q==="left"?ee[V].leitungenLinks[Z].abstandMastachse=$:ee[V].leitungenRechts[Z].abstandMastachse=$,N({...A,ebenen:ee})},J=(V,Q,Z,$)=>{const ee=[...A.ebenen];Q==="left"?ee[V].leitungenLinks[Z].connected2Connection=$||void 0:ee[V].leitungenRechts[Z].connected2Connection=$||void 0,N({...A,ebenen:ee})},q=(V,Q,Z,$)=>{const ee=[...A.ebenen];Q==="left"?ee[V].leitungenLinks[Z].einbauart=$:ee[V].leitungenRechts[Z].einbauart=$,N({...A,ebenen:ee})},ne=()=>{const oe=390/A.mastHoehe;let he=20;A.ebenen.forEach(Re=>{Re.leitungenLinks.forEach(Le=>{he=Math.max(he,Le.abstandMastachse)}),Re.leitungenRechts.forEach(Le=>{he=Math.max(he,Le.abstandMastachse)})});const ge=Math.min(3,150/he);return b.jsxs("svg",{width:500,height:450,className:"border rounded bg-gray-50",children:[b.jsx("line",{x1:0,y1:420,x2:500,y2:420,stroke:"#8B4513",strokeWidth:3}),Array.from({length:20},(Re,Le)=>b.jsx("line",{x1:Le*25,y1:420,x2:Le*25+10,y2:430,stroke:"#8B4513",strokeWidth:1,opacity:.5},`ground-${Le}`)),b.jsx("line",{x1:250,y1:420,x2:250,y2:30,stroke:"#333",strokeWidth:6}),b.jsxs("text",{x:260,y:25,fontSize:12,fill:"#666",children:[A.mastHoehe.toFixed(1),"m"]}),b.jsx("line",{x1:220,y1:420-A.nullpunktHoehe*oe,x2:280,y2:420-A.nullpunktHoehe*oe,stroke:"#0066CC",strokeWidth:1,strokeDasharray:"5,5"}),b.jsxs("text",{x:285,y:420-A.nullpunktHoehe*oe+4,fontSize:10,fill:"#0066CC",children:["Nullpunkt (",A.nullpunktHoehe.toFixed(1),"m)"]}),A.ebenen.map((Re,Le)=>{const Ge=420-Re.abstandNullpunkt*oe;return b.jsxs("g",{children:[b.jsx("line",{x1:250-(he*ge+20),y1:Ge,x2:250+(he*ge+20),y2:Ge,stroke:"#666",strokeWidth:3}),Re.leitungenLinks.map((Ke,Qe)=>{const $e=250-Ke.abstandMastachse*ge;return b.jsxs("g",{children:[b.jsx("line",{x1:245,y1:Ge,x2:$e,y2:Ge+8,stroke:"#4A5568",strokeWidth:2}),b.jsx("circle",{cx:$e,cy:Ge+8,r:5,fill:"#FF0000",stroke:"#CC0000",strokeWidth:1}),b.jsxs("text",{x:$e-10,y:Ge+25,fontSize:9,fill:"#666",textAnchor:"middle",children:[Ke.abstandMastachse.toFixed(1),"m"]})]},`left-${Qe}`)}),Re.leitungenRechts.map((Ke,Qe)=>{const $e=250+Ke.abstandMastachse*ge;return b.jsxs("g",{children:[b.jsx("line",{x1:255,y1:Ge,x2:$e,y2:Ge+8,stroke:"#4A5568",strokeWidth:2}),b.jsx("circle",{cx:$e,cy:Ge+8,r:5,fill:"#0000FF",stroke:"#0000CC",strokeWidth:1}),b.jsxs("text",{x:$e+10,y:Ge+25,fontSize:9,fill:"#666",textAnchor:"middle",children:[Ke.abstandMastachse.toFixed(1),"m"]})]},`right-${Qe}`)}),b.jsxs("text",{x:250-(he*ge+30),y:Ge+4,fontSize:12,fill:"#333",fontWeight:"bold",children:["E",Le+1]}),b.jsxs("text",{x:250+(he*ge+25),y:Ge+4,fontSize:10,fill:"#666",children:[Re.abstandNullpunkt.toFixed(1),"m"]})]},Le)}),b.jsxs("g",{transform:"translate(10, 20)",children:[b.jsx("text",{fontSize:11,fontWeight:"bold",fill:"#333",children:"Legende:"}),b.jsx("circle",{cx:10,cy:20,r:4,fill:"#FF0000"}),b.jsx("text",{x:20,y:24,fontSize:10,fill:"#666",children:"Links"}),b.jsx("circle",{cx:70,cy:20,r:4,fill:"#0000FF"}),b.jsx("text",{x:80,y:24,fontSize:10,fill:"#666",children:"Rechts"})]})]})};return b.jsx(Vr,{open:n,onOpenChange:i,children:b.jsxs(Yr,{className:"!max-w-[90vw] !w-[90vw] !max-h-[90vh] overflow-y-auto",style:{width:"90vw",maxWidth:"90vw",height:"85vh"},children:[b.jsx(Xr,{children:b.jsxs(Wr,{children:["Mast bearbeiten: ",x?.name||"Unnamed Pole"," "]})}),b.jsxs(qE,{value:z,onValueChange:k,children:[b.jsxs($E,{className:"grid w-full grid-cols-2",children:[b.jsx(Nd,{value:"general",children:"Allgemein"}),b.jsx(Nd,{value:"levels",children:"Ebenen & Leiter"})]}),b.jsxs(Md,{value:"general",className:"space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"name",children:"Name"}),b.jsx(Lt,{id:"name",value:A.name,onChange:V=>N({...A,name:V.target.value})})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(ot,{htmlFor:"mastHoehe",children:"Masthöhe [m] (nur visuelle Darstellung)"}),b.jsx(Lt,{id:"mastHoehe",type:"number",step:"0.1",value:A.mastHoehe,onChange:V=>N({...A,mastHoehe:parseFloat(V.target.value)||0})})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(ot,{htmlFor:"nullpunktHoehe",children:"Nullpunkthöhe (m)"}),x&&g&&b.jsx(st,{type:"button",variant:"outline",size:"sm",onClick:()=>{try{const V=g.berechneHoeheDGM(x.position.GK);isNaN(V)||N({...A,nullpunktHoehe:V})}catch(V){console.error("Error calculating terrain height:",V)}},className:"h-7 text-xs",children:"An Gelände anpassen"})]}),b.jsx(Lt,{id:"nullpunktHoehe",type:"number",step:"0.1",value:A.nullpunktHoehe,onChange:V=>N({...A,nullpunktHoehe:parseFloat(V.target.value)||0})})]})]}),w&&b.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[b.jsxs("div",{className:"text-sm font-medium text-blue-900",children:["Template: ",w.name]}),b.jsx("div",{className:"text-xs text-blue-700 mt-1",children:w.description})]}),b.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-1 text-sm",children:[b.jsxs("div",{className:"font-medium",children:["Trasse: ",t??y?.name]}),t&&x?b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:["Position: ",x.position.GK.Rechts.toFixed(2),", ",x.position.GK.Hoch.toFixed(2)]}),b.jsxs("div",{children:["Höhe über NN: ",x.position.z.toFixed(2),"m"]})]}):null]})]}),b.jsx(Md,{value:"levels",className:"space-y-4",children:w?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[b.jsx("input",{type:"checkbox",id:"disableAutoConnection",checked:M,onChange:V=>B(V.target.checked),className:"h-4 w-4"}),b.jsx(ot,{htmlFor:"disableAutoConnection",className:"text-sm",children:'Automatische Verbindungen deaktivieren (erlaubt explizites "Keine Verbindung")'})]}),b.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsxs("div",{className:"text-sm text-gray-600",children:['Konfiguration basiert auf Template "',w.name,'"']}),A.ebenen.map((V,Q)=>{const Z=w.ebenenConfig[Q];return Z?b.jsxs("div",{className:"border rounded p-3 space-y-2",children:[b.jsxs("div",{className:"font-medium text-sm",children:["Ebene ",Q+1," (",Z.anzahlLeitungenLinks,"L/",Z.anzahlLeitungenRechts,"R)"]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx(ot,{className:"text-xs",children:"Höhe über Nullpunkt (m)"}),b.jsx(Lt,{type:"number",step:"0.1",value:V.abstandNullpunkt,onChange:$=>X(Q,parseFloat($.target.value)||0),className:"h-8"})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[V.leitungenLinks.length>0&&b.jsxs("div",{className:"space-y-1",children:[b.jsx(ot,{className:"text-xs font-medium",children:"Leiter Links"}),V.leitungenLinks.map(($,ee)=>b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsxs("span",{className:"text-xs w-8",children:["L",ee+1,":"]}),b.jsx(Lt,{type:"number",step:"0.1",value:$.abstandMastachse,onChange:se=>j(Q,"left",ee,parseFloat(se.target.value)||0),className:"flex-1 h-7 text-xs",placeholder:"Abstand (m)"})]}),!R&&U&&b.jsxs("select",{value:$.connected2Connection||"",onChange:se=>{J(Q,"left",ee,se.target.value)},className:"w-full h-6 text-xs rounded border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Keine Verbindung"}),t&&U?U.levels.map((se,oe)=>b.jsxs("optgroup",{label:`Ebene ${oe+1}`,children:[se.leftConnections.map((he,ge)=>b.jsxs("option",{value:he.id,children:["Links ",ge+1]},`l-${ge}`)),se.rightConnections.map((he,ge)=>b.jsxs("option",{value:he.id,children:["Rechts ",ge+1]},`r-${ge}`))]},oe)):b.jsx("div",{})]}),b.jsxs("select",{value:$.einbauart,onChange:se=>q(Q,"left",ee,parseInt(se.target.value)),className:"w-full h-6 text-xs rounded border border-input bg-background px-2",title:"Isolator-Einbauart",children:[b.jsx("option",{value:"0",children:"T-380KV"}),b.jsx("option",{value:"1",children:"T-220KV"}),b.jsx("option",{value:"2",children:"Abspann"})]})]},ee))]}),V.leitungenRechts.length>0&&b.jsxs("div",{className:"space-y-1",children:[b.jsx(ot,{className:"text-xs font-medium",children:"Leiter Rechts"}),V.leitungenRechts.map(($,ee)=>b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsxs("span",{className:"text-xs w-8",children:["R",ee+1,":"]}),b.jsx(Lt,{type:"number",step:"0.1",value:$.abstandMastachse,onChange:se=>j(Q,"right",ee,parseFloat(se.target.value)||0),className:"flex-1 h-7 text-xs",placeholder:"Abstand (m)"})]}),!R&&U&&b.jsxs("select",{value:$.connected2Connection||"",onChange:se=>{J(Q,"right",ee,se.target.value)},className:"w-full h-6 text-xs rounded border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Keine Verbindung"}),t&&U?U.levels.map(se=>b.jsxs("optgroup",{label:`Ebene ${se.levelNumber}`,children:[se.leftConnections.map(oe=>b.jsxs("option",{value:oe.id,children:["Links ",oe.connectionNumber," (",oe.id,")"]},oe.id)),se.rightConnections.map(oe=>b.jsxs("option",{value:oe.id,children:["Rechts ",oe.connectionNumber," (",oe.id,")"]},oe.id))]},se.levelNumber)):b.jsx("div",{})]}),b.jsxs("select",{value:$.einbauart,onChange:se=>q(Q,"right",ee,parseInt(se.target.value)),className:"w-full h-6 text-xs rounded border border-input bg-background px-2",title:"Isolator-Einbauart",children:[b.jsx("option",{value:"0",children:"T-380KV"}),b.jsx("option",{value:"1",children:"T-220KV"}),b.jsx("option",{value:"2",children:"Abspann"})]})]},ee))]})]})]},Q):null})]}),b.jsxs("div",{className:"flex-1 space-y-2",children:[b.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Visualisierung"}),b.jsx("div",{className:"overflow-auto p-2",children:b.jsx("div",{className:"inline-block min-w-fit",children:ne()})})]})]})]}):b.jsxs("div",{className:"text-center py-8 text-gray-500",children:[b.jsx("p",{children:"Dieser Mast hat kein Template zugewiesen."}),b.jsx("p",{className:"text-sm mt-2",children:"Bitte weisen Sie der Trasse ein Template zu."})]})})]}),b.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[b.jsxs(st,{variant:"outline",onClick:i,children:[b.jsx(Os,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),b.jsxs(st,{onClick:I,children:[b.jsx(Kd,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})},Qj=()=>{const{selectedMarkerType:e,focusedMarkerId:t,setSelectedMarkerType:n,clearMarkerSelection:i,hoehenpunkte:a,immissionPoints:l,esqSources:c,poles:f,getMarkersByType:d,showHoehenpunkte:h,showImmissionPoints:m,showESQPoints:g,showPoles:_,setShowHoehenpunkte:x,setShowImmissionPoints:D,setShowESQPoints:y,setShowPoles:S}=Yt(),w=[{type:"hoehenpunkt",icon:b.jsx(Z2,{className:"h-4 w-4"}),label:"Höhenpunkte",count:a.size,shortcut:"1",color:"#00ff00",visible:h,setVisible:x},{type:"immissionpoint",icon:b.jsx(Ud,{className:"h-4 w-4"}),label:"Immissionspunkte",count:l.size,shortcut:"2",color:"#ff0000",visible:m,setVisible:D},{type:"esq",icon:b.jsx(K2,{className:"h-4 w-4"}),label:"ESQ",count:c.size,shortcut:"3",color:"#0000ff",visible:g,setVisible:y},{type:"pole",icon:b.jsx(DM,{className:"h-4 w-4"}),label:"Masten",count:f.size,shortcut:"4",color:"#D2691E",visible:_,setVisible:S}],N=(()=>{if(!e||!t)return null;const M=d(e).findIndex(B=>B.id===t);return M>=0?M+1:null})(),z=e?d(e).length:0;return b.jsx("div",{className:"absolute bottom-24 right-4 z-[1000] bg-white rounded-lg shadow-md p-3 print-hide",children:b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"text-sm font-medium mb-1",children:"Marker-Auswahl"}),w.map(k=>b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(ur,{id:`visibility-${k.type}`,checked:k.visible,onCheckedChange:M=>k.setVisible(M),className:"data-[state=checked]:bg-transparent data-[state=checked]:border-current",style:{borderColor:k.color,color:k.color}}),b.jsx(st,{onClick:()=>{e===k.type?i():n(k.type)},variant:e===k.type?"default":"outline",size:"sm",className:`flex-1 justify-start text-xs ${e===k.type?"ring-2 ring-offset-2":""} ${k.visible?"":"opacity-50"}`,style:{...e===k.type&&{borderColor:k.color,boxShadow:`0 0 0 2px ${k.color}40`}},disabled:k.count===0||!k.visible,children:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"flex items-center justify-center",style:{color:k.color},children:k.icon}),b.jsx("span",{children:k.label})]}),b.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[b.jsxs("span",{className:"text-gray-500",children:["(",k.count,")"]}),b.jsx("kbd",{className:"px-1 py-0.5 text-xs bg-gray-100 border border-gray-300 rounded",children:k.shortcut})]})]})})]},k.type)),e&&z>0&&b.jsx(b.Fragment,{children:b.jsxs("div",{className:"border-t pt-2 mt-2",children:[b.jsxs("div",{className:"text-xs text-gray-600",children:["Navigation: ",N?`${N}/${z}`:"Kein Fokus"]}),b.jsxs("div",{className:"flex gap-1 mt-1",children:[b.jsx("kbd",{className:"px-1 py-0.5 text-xs bg-gray-100 border border-gray-300 rounded",children:"Tab"}),b.jsx("span",{className:"text-xs text-gray-500",children:"Nächster"}),b.jsx("kbd",{className:"px-1 py-0.5 text-xs bg-gray-100 border border-gray-300 rounded",children:"Shift+Tab"}),b.jsx("span",{className:"text-xs text-gray-500",children:"Vorheriger"})]})]})}),e&&b.jsxs(st,{onClick:i,variant:"ghost",size:"sm",className:"text-xs mt-2",children:[b.jsx("span",{children:"Auswahl aufheben"}),b.jsx("kbd",{className:"ml-2 px-1 py-0.5 text-xs bg-gray-100 border border-gray-300 rounded",children:"Esc"})]})]})})};function Jj(){const{computationErrors:e,clearComputationErrors:t}=Yt(),[n,i]=W.useState(!1);W.useEffect(()=>{e.length>0&&i(!0)},[e]);const a=()=>{i(!1),t()};return{ErrorDialog:()=>b.jsx(uE,{open:n,onOpenChange:i,children:b.jsxs(cE,{className:"max-w-2xl",children:[b.jsxs(fE,{children:[b.jsx(dE,{className:"text-red-600",children:"Computation Errors Detected"}),b.jsx(mE,{className:"mt-4",children:b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"font-medium mb-3",children:"The following errors occurred while computing immission values:"}),b.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 max-h-96 overflow-y-auto",children:b.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.map((l,c)=>b.jsx("li",{className:"text-sm text-red-800",children:l},c))})}),b.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"Please check your data and try again. Common issues include:"}),b.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 ml-4",children:[b.jsx("li",{children:"Missing or invalid terrain data"}),b.jsx("li",{children:"Incorrectly configured trassen or masts"}),b.jsx("li",{children:"Invalid immission point positions"}),b.jsx("li",{children:"Calculation parameters out of valid range"})]})]})})]}),b.jsx(hE,{children:b.jsx(pE,{onClick:a,children:"OK"})})]})})}}function eB(){const[e,t]=W.useState(null),[n,i]=W.useState(!0),[a,l]=W.useState(!1),[c,f]=W.useState(!1),[d,h]=W.useState(!0),[m,g]=W.useState({width:800,height:600}),{imageWidth:_,imageHeight:x,loadStandardTemplates:D,selectedElementId:y,selectedElementType:S,isEditFormOpen:w,setEditFormOpen:A,referencePoints:N,immissionPoints:z,isImmissionPointsComputed:k,immissionGrid:M,isGridComputed:B}=Yt(),{ErrorDialog:P}=Jj();return W.useEffect(()=>{D()},[]),W.useEffect(()=>{_&&x&&g({width:_,height:x})},[_,x]),b.jsx(cR,{children:b.jsxs("div",{style:{height:"100vh",width:"100vw"},children:[b.jsx(Yj,{mapWidth:m.width,mapHeight:m.height,transform:e,showTrassen:n,setShowTrassen:i,showDGM:a,setShowDGM:l,showContour:c,setShowContour:f,showReferenceCalibration:d,setShowReferenceCalibration:h}),b.jsx(Xj,{referencePointsCount:N.length,immissionPointsCount:z.size,isImmissionPointsComputed:k,gridPointsCount:M.length,isGridComputed:B}),b.jsxs("div",{style:{paddingTop:"72px",height:"100%"},children:[b.jsx(dj,{onTransformUpdate:t,showTrassen:n,showDGM:a,showContour:c,onDimensionsUpdate:g}),b.jsx(Qj,{}),d&&b.jsx(K6,{}),S==="pole"&&y&&b.jsx(Wj,{mastId:y,isPole:S==="pole",isOpen:w,onClose:()=>A(!1)}),S!=="pole"&&b.jsx(mj,{})]}),b.jsx(P,{})]})})}Dg.createRoot(document.getElementById("root")).render(b.jsx(W.StrictMode,{children:b.jsx(eB,{})}));
