function i3(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Td(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vp={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function a3(){if(e_)return pc;e_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:e,type:i,key:c,ref:a!==void 0?a:null,props:l}}return pc.Fragment=t,pc.jsx=n,pc.jsxs=n,pc}var t_;function o3(){return t_||(t_=1,Vp.exports=a3()),Vp.exports}var b=o3(),Yp={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function s3(){if(n_)return _t;n_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function _($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,y={};function E($,q,ne){this.props=$,this.context=q,this.refs=y,this.updater=ne||x}E.prototype.isReactComponent={},E.prototype.setState=function($,q){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,q,"setState")},E.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function D(){}D.prototype=E.prototype;function A($,q,ne){this.props=$,this.context=q,this.refs=y,this.updater=ne||x}var N=A.prototype=new D;N.constructor=A,w(N,E.prototype),N.isPureReactComponent=!0;var F=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},T=Object.prototype.hasOwnProperty;function R($,q,ne,se,ce,pe){return ne=pe.ref,{$$typeof:e,type:$,key:q,ref:ne!==void 0?ne:null,props:pe}}function j($,q){return R($.type,q,void 0,void 0,void 0,$.props)}function O($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function G($){var q={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ne){return q[ne]})}var U=/\/+/g;function I($,q){return typeof $=="object"&&$!==null&&$.key!=null?G(""+$.key):q.toString(36)}function W(){}function B($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(W,W):($.status="pending",$.then(function(q){$.status==="pending"&&($.status="fulfilled",$.value=q)},function(q){$.status==="pending"&&($.status="rejected",$.reason=q)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function re($,q,ne,se,ce){var pe=typeof $;(pe==="undefined"||pe==="boolean")&&($=null);var _e=!1;if($===null)_e=!0;else switch(pe){case"bigint":case"string":case"number":_e=!0;break;case"object":switch($.$$typeof){case e:case t:_e=!0;break;case m:return _e=$._init,re(_e($._payload),q,ne,se,ce)}}if(_e)return ce=ce($),_e=se===""?"."+I($,0):se,F(ce)?(ne="",_e!=null&&(ne=_e.replace(U,"$&/")+"/"),re(ce,q,ne,"",function(Ie){return Ie})):ce!=null&&(O(ce)&&(ce=j(ce,ne+(ce.key==null||$&&$.key===ce.key?"":(""+ce.key).replace(U,"$&/")+"/")+_e)),q.push(ce)),1;_e=0;var ze=se===""?".":se+":";if(F($))for(var ke=0;ke<$.length;ke++)se=$[ke],pe=ze+I(se,ke),_e+=re(se,q,ne,pe,ce);else if(ke=_($),typeof ke=="function")for($=ke.call($),ke=0;!(se=$.next()).done;)se=se.value,pe=ze+I(se,ke++),_e+=re(se,q,ne,pe,ce);else if(pe==="object"){if(typeof $.then=="function")return re(B($),q,ne,se,ce);throw q=String($),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return _e}function K($,q,ne){if($==null)return $;var se=[],ce=0;return re($,se,"","",function(pe){return q.call(ne,pe,ce++)}),se}function ee($){if($._status===-1){var q=$._result;q=q(),q.then(function(ne){($._status===0||$._status===-1)&&($._status=1,$._result=ne)},function(ne){($._status===0||$._status===-1)&&($._status=2,$._result=ne)}),$._status===-1&&($._status=0,$._result=q)}if($._status===1)return $._result.default;throw $._result}var V=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function Q(){}return _t.Children={map:K,forEach:function($,q,ne){K($,function(){q.apply(this,arguments)},ne)},count:function($){var q=0;return K($,function(){q++}),q},toArray:function($){return K($,function(q){return q})||[]},only:function($){if(!O($))throw Error("React.Children.only expected to receive a single React element child.");return $}},_t.Component=E,_t.Fragment=n,_t.Profiler=a,_t.PureComponent=A,_t.StrictMode=i,_t.Suspense=d,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,_t.__COMPILER_RUNTIME={__proto__:null,c:function($){return k.H.useMemoCache($)}},_t.cache=function($){return function(){return $.apply(null,arguments)}},_t.cloneElement=function($,q,ne){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var se=w({},$.props),ce=$.key,pe=void 0;if(q!=null)for(_e in q.ref!==void 0&&(pe=void 0),q.key!==void 0&&(ce=""+q.key),q)!T.call(q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&q.ref===void 0||(se[_e]=q[_e]);var _e=arguments.length-2;if(_e===1)se.children=ne;else if(1<_e){for(var ze=Array(_e),ke=0;ke<_e;ke++)ze[ke]=arguments[ke+2];se.children=ze}return R($.type,ce,void 0,void 0,pe,se)},_t.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:l,_context:$},$},_t.createElement=function($,q,ne){var se,ce={},pe=null;if(q!=null)for(se in q.key!==void 0&&(pe=""+q.key),q)T.call(q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ce[se]=q[se]);var _e=arguments.length-2;if(_e===1)ce.children=ne;else if(1<_e){for(var ze=Array(_e),ke=0;ke<_e;ke++)ze[ke]=arguments[ke+2];ce.children=ze}if($&&$.defaultProps)for(se in _e=$.defaultProps,_e)ce[se]===void 0&&(ce[se]=_e[se]);return R($,pe,void 0,void 0,null,ce)},_t.createRef=function(){return{current:null}},_t.forwardRef=function($){return{$$typeof:f,render:$}},_t.isValidElement=O,_t.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:ee}},_t.memo=function($,q){return{$$typeof:h,type:$,compare:q===void 0?null:q}},_t.startTransition=function($){var q=k.T,ne={};k.T=ne;try{var se=$(),ce=k.S;ce!==null&&ce(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Q,V)}catch(pe){V(pe)}finally{k.T=q}},_t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},_t.use=function($){return k.H.use($)},_t.useActionState=function($,q,ne){return k.H.useActionState($,q,ne)},_t.useCallback=function($,q){return k.H.useCallback($,q)},_t.useContext=function($){return k.H.useContext($)},_t.useDebugValue=function(){},_t.useDeferredValue=function($,q){return k.H.useDeferredValue($,q)},_t.useEffect=function($,q,ne){var se=k.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect($,q)},_t.useId=function(){return k.H.useId()},_t.useImperativeHandle=function($,q,ne){return k.H.useImperativeHandle($,q,ne)},_t.useInsertionEffect=function($,q){return k.H.useInsertionEffect($,q)},_t.useLayoutEffect=function($,q){return k.H.useLayoutEffect($,q)},_t.useMemo=function($,q){return k.H.useMemo($,q)},_t.useOptimistic=function($,q){return k.H.useOptimistic($,q)},_t.useReducer=function($,q,ne){return k.H.useReducer($,q,ne)},_t.useRef=function($){return k.H.useRef($)},_t.useState=function($){return k.H.useState($)},_t.useSyncExternalStore=function($,q,ne){return k.H.useSyncExternalStore($,q,ne)},_t.useTransition=function(){return k.H.useTransition()},_t.version="19.1.1",_t}var r_;function bg(){return r_||(r_=1,Yp.exports=s3()),Yp.exports}var te=bg();const sr=Td(te),Bb=i3({__proto__:null,default:sr},[te]);var Xp={exports:{}},gc={},Wp={exports:{}},Qp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function l3(){return i_||(i_=1,(function(e){function t(K,ee){var V=K.length;K.push(ee);e:for(;0<V;){var Q=V-1>>>1,$=K[Q];if(0<a($,ee))K[Q]=ee,K[V]=$,V=Q;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ee=K[0],V=K.pop();if(V!==ee){K[0]=V;e:for(var Q=0,$=K.length,q=$>>>1;Q<q;){var ne=2*(Q+1)-1,se=K[ne],ce=ne+1,pe=K[ce];if(0>a(se,V))ce<$&&0>a(pe,se)?(K[Q]=pe,K[ce]=V,Q=ce):(K[Q]=se,K[ne]=V,Q=ne);else if(ce<$&&0>a(pe,V))K[Q]=pe,K[ce]=V,Q=ce;else break e}}return ee}function a(K,ee){var V=K.sortIndex-ee.sortIndex;return V!==0?V:K.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var d=[],h=[],m=1,g=null,_=3,x=!1,w=!1,y=!1,E=!1,D=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function F(K){for(var ee=n(h);ee!==null;){if(ee.callback===null)i(h);else if(ee.startTime<=K)i(h),ee.sortIndex=ee.expirationTime,t(d,ee);else break;ee=n(h)}}function k(K){if(y=!1,F(K),!w)if(n(d)!==null)w=!0,T||(T=!0,I());else{var ee=n(h);ee!==null&&re(k,ee.startTime-K)}}var T=!1,R=-1,j=5,O=-1;function G(){return E?!0:!(e.unstable_now()-O<j)}function U(){if(E=!1,T){var K=e.unstable_now();O=K;var ee=!0;try{e:{w=!1,y&&(y=!1,A(R),R=-1),x=!0;var V=_;try{t:{for(F(K),g=n(d);g!==null&&!(g.expirationTime>K&&G());){var Q=g.callback;if(typeof Q=="function"){g.callback=null,_=g.priorityLevel;var $=Q(g.expirationTime<=K);if(K=e.unstable_now(),typeof $=="function"){g.callback=$,F(K),ee=!0;break t}g===n(d)&&i(d),F(K)}else i(d);g=n(d)}if(g!==null)ee=!0;else{var q=n(h);q!==null&&re(k,q.startTime-K),ee=!1}}break e}finally{g=null,_=V,x=!1}ee=void 0}}finally{ee?I():T=!1}}}var I;if(typeof N=="function")I=function(){N(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,B=W.port2;W.port1.onmessage=U,I=function(){B.postMessage(null)}}else I=function(){D(U,0)};function re(K,ee){R=D(function(){K(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(K){switch(_){case 1:case 2:case 3:var ee=3;break;default:ee=_}var V=_;_=ee;try{return K()}finally{_=V}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(K,ee){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var V=_;_=K;try{return ee()}finally{_=V}},e.unstable_scheduleCallback=function(K,ee,V){var Q=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Q+V:Q):V=Q,K){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=V+$,K={id:m++,callback:ee,priorityLevel:K,startTime:V,expirationTime:$,sortIndex:-1},V>Q?(K.sortIndex=V,t(h,K),n(d)===null&&K===n(h)&&(y?(A(R),R=-1):y=!0,re(k,V-Q))):(K.sortIndex=$,t(d,K),w||x||(w=!0,T||(T=!0,I()))),K},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(K){var ee=_;return function(){var V=_;_=ee;try{return K.apply(this,arguments)}finally{_=V}}}})(Qp)),Qp}var a_;function u3(){return a_||(a_=1,Wp.exports=l3()),Wp.exports}var Jp={exports:{}},ir={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function c3(){if(o_)return ir;o_=1;var e=bg();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:d,containerInfo:h,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ir.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return l(d,h,null,m)},ir.flushSync=function(d){var h=c.T,m=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=h,i.p=m,i.d.f()}},ir.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},ir.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ir.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,g=f(m,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:x}):m==="script"&&i.d.X(d,{crossOrigin:g,integrity:_,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ir.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=f(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},ir.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=f(m,h.crossOrigin);i.d.L(d,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ir.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=f(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},ir.requestFormReset=function(d){i.d.r(d)},ir.unstable_batchedUpdates=function(d,h){return d(h)},ir.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},ir.useFormStatus=function(){return c.H.useHostTransitionStatus()},ir.version="19.1.1",ir}var s_;function Rb(){if(s_)return Jp.exports;s_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jp.exports=c3(),Jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function f3(){if(l_)return gc;l_=1;var e=u3(),t=bg(),n=Rb();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function d(r){var o=r.alternate;if(!o){if(o=l(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,v=o;;){var C=u.return;if(C===null)break;var M=C.alternate;if(M===null){if(v=C.return,v!==null){u=v;continue}break}if(C.child===M.child){for(M=C.child;M;){if(M===u)return f(C),r;if(M===v)return f(C),o;M=M.sibling}throw Error(i(188))}if(u.return!==v.return)u=C,v=M;else{for(var Z=!1,J=C.child;J;){if(J===u){Z=!0,u=C,v=M;break}if(J===v){Z=!0,v=C,u=M;break}J=J.sibling}if(!Z){for(J=M.child;J;){if(J===u){Z=!0,u=M,v=C;break}if(J===v){Z=!0,v=M,u=C;break}J=J.sibling}if(!Z)throw Error(i(189))}}if(u.alternate!==v)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function h(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=h(r),o!==null)return o;r=r.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function I(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var W=Symbol.for("react.client.reference");function B(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===W?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case E:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case T:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case N:return(r.displayName||"Context")+".Provider";case A:return(r._context.displayName||"Context")+".Consumer";case F:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return o=r.displayName||null,o!==null?o:B(r.type)||"Memo";case j:o=r._payload,r=r._init;try{return B(r(o))}catch{}}return null}var re=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},Q=[],$=-1;function q(r){return{current:r}}function ne(r){0>$||(r.current=Q[$],Q[$]=null,$--)}function se(r,o){$++,Q[$]=r.current,r.current=o}var ce=q(null),pe=q(null),_e=q(null),ze=q(null);function ke(r,o){switch(se(_e,o),se(pe,r),se(ce,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Ny(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Ny(o),r=My(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ne(ce),se(ce,r)}function Ie(){ne(ce),ne(pe),ne(_e)}function Ze(r){r.memoizedState!==null&&se(ze,r);var o=ce.current,u=My(o,r.type);o!==u&&(se(pe,r),se(ce,u))}function Xe(r){pe.current===r&&(ne(ce),ne(pe)),ze.current===r&&(ne(ze),cc._currentValue=V)}var $e=Object.prototype.hasOwnProperty,Ke=e.unstable_scheduleCallback,H=e.unstable_cancelCallback,Te=e.unstable_shouldYield,Se=e.unstable_requestPaint,ae=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,ue=e.unstable_ImmediatePriority,be=e.unstable_UserBlockingPriority,De=e.unstable_NormalPriority,ge=e.unstable_LowPriority,X=e.unstable_IdlePriority,oe=e.log,le=e.unstable_setDisableYieldValue,me=null,ye=null;function de(r){if(typeof oe=="function"&&le(r),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(me,r)}catch{}}var Be=Math.clz32?Math.clz32:je,Fe=Math.log,Re=Math.LN2;function je(r){return r>>>=0,r===0?32:31-(Fe(r)/Re|0)|0}var We=256,ht=4194304;function dt(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Et(r,o,u){var v=r.pendingLanes;if(v===0)return 0;var C=0,M=r.suspendedLanes,Z=r.pingedLanes;r=r.warmLanes;var J=v&134217727;return J!==0?(v=J&~M,v!==0?C=dt(v):(Z&=J,Z!==0?C=dt(Z):u||(u=J&~r,u!==0&&(C=dt(u))))):(J=v&~M,J!==0?C=dt(J):Z!==0?C=dt(Z):u||(u=v&~r,u!==0&&(C=dt(u)))),C===0?0:o!==0&&o!==C&&(o&M)===0&&(M=C&-C,u=o&-o,M>=u||M===32&&(u&4194048)!==0)?o:C}function Nt(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Qt(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tn(){var r=We;return We<<=1,(We&4194048)===0&&(We=256),r}function Sn(){var r=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),r}function Cn(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Un(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ki(r,o,u,v,C,M){var Z=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var J=r.entanglements,he=r.expirationTimes,Ce=r.hiddenUpdates;for(u=Z&~u;0<u;){var Oe=31-Be(u),He=1<<Oe;J[Oe]=0,he[Oe]=-1;var Ae=Ce[Oe];if(Ae!==null)for(Ce[Oe]=null,Oe=0;Oe<Ae.length;Oe++){var Ne=Ae[Oe];Ne!==null&&(Ne.lane&=-536870913)}u&=~He}v!==0&&Is(r,v,0),M!==0&&C===0&&r.tag!==0&&(r.suspendedLanes|=M&~(Z&~o))}function Is(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var v=31-Be(o);r.entangledLanes|=o,r.entanglements[v]=r.entanglements[v]|1073741824|u&4194090}function Hs(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var v=31-Be(u),C=1<<v;C&o|r[v]&o&&(r[v]|=o),u&=~C}}function qo(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Vo(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Gs(){var r=ee.p;return r!==0?r:(r=window.event,r===void 0?32:Vy(r.type))}function Yo(r,o){var u=ee.p;try{return ee.p=r,o()}finally{ee.p=u}}var Zr=Math.random().toString(36).slice(2),xn="__reactFiber$"+Zr,kn="__reactProps$"+Zr,zi="__reactContainer$"+Zr,er="__reactEvents$"+Zr,it="__reactListeners$"+Zr,Us="__reactHandles$"+Zr,Xo="__reactResources$"+Zr,Li="__reactMarker$"+Zr;function ja(r){delete r[xn],delete r[kn],delete r[er],delete r[it],delete r[Us]}function Kr(r){var o=r[xn];if(o)return o;for(var u=r.parentNode;u;){if(o=u[zi]||u[xn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=Ly(r);r!==null;){if(u=r[xn])return u;r=Ly(r)}return o}r=u,u=r.parentNode}return null}function si(r){if(r=r[xn]||r[zi]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function _r(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function li(r){var o=r[Xo];return o||(o=r[Xo]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function un(r){r[Li]=!0}var $s=new Set,Zs={};function ui(r,o){ci(r,o),ci(r+"Capture",o)}function ci(r,o){for(Zs[r]=o,r=0;r<o.length;r++)$s.add(o[r])}var yu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tr={},zt={};function zn(r){return $e.call(zt,r)?!0:$e.call(Tr,r)?!1:yu.test(r)?zt[r]=!0:(Tr[r]=!0,!1)}function Pa(r,o,u){if(zn(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var v=o.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function fi(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function $n(r,o,u,v){if(v===null)r.removeAttribute(u);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+v)}}var ra,Ia;function ia(r){if(ra===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ra=o&&o[1]||"",Ia=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ra+r+Ia}var Ks=!1;function aa(r,o){if(!r||Ks)return"";Ks=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(o){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(Ne){var Ae=Ne}Reflect.construct(r,[],He)}else{try{He.call()}catch(Ne){Ae=Ne}r.call(He.prototype)}}else{try{throw Error()}catch(Ne){Ae=Ne}(He=r())&&typeof He.catch=="function"&&He.catch(function(){})}}catch(Ne){if(Ne&&Ae&&typeof Ne.stack=="string")return[Ne.stack,Ae.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=v.DetermineComponentFrameRoot(),Z=M[0],J=M[1];if(Z&&J){var he=Z.split(`
`),Ce=J.split(`
`);for(C=v=0;v<he.length&&!he[v].includes("DetermineComponentFrameRoot");)v++;for(;C<Ce.length&&!Ce[C].includes("DetermineComponentFrameRoot");)C++;if(v===he.length||C===Ce.length)for(v=he.length-1,C=Ce.length-1;1<=v&&0<=C&&he[v]!==Ce[C];)C--;for(;1<=v&&0<=C;v--,C--)if(he[v]!==Ce[C]){if(v!==1||C!==1)do if(v--,C--,0>C||he[v]!==Ce[C]){var Oe=`
`+he[v].replace(" at new "," at ");return r.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",r.displayName)),Oe}while(1<=v&&0<=C);break}}}finally{Ks=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?ia(u):""}function Lt(r){switch(r.tag){case 26:case 27:case 5:return ia(r.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 15:return aa(r.type,!1);case 11:return aa(r.type.render,!1);case 1:return aa(r.type,!0);case 31:return ia("Activity");default:return""}}function Kt(r){try{var o="";do o+=Lt(r),r=r.return;while(r);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Zn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function oa(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ha(r){var o=oa(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),v=""+r[o];if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var C=u.get,M=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return C.call(this)},set:function(Z){v=""+Z,M.call(this,Z)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return v},setValue:function(Z){v=""+Z},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ga(r){r._valueTracker||(r._valueTracker=Ha(r))}function yt(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),v="";return r&&(v=oa(r)?r.checked?"true":"false":r.value),r=v,r!==u?(o.setValue(r),!0):!1}function qt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var _u=/[\n"\\]/g;function Kn(r){return r.replace(_u,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function tr(r,o,u,v,C,M,Z,J){r.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?r.type=Z:r.removeAttribute("type"),o!=null?Z==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Zn(o)):r.value!==""+Zn(o)&&(r.value=""+Zn(o)):Z!=="submit"&&Z!=="reset"||r.removeAttribute("value"),o!=null?Ua(r,Z,Zn(o)):u!=null?Ua(r,Z,Zn(u)):v!=null&&r.removeAttribute("value"),C==null&&M!=null&&(r.defaultChecked=!!M),C!=null&&(r.checked=C&&typeof C!="function"&&typeof C!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?r.name=""+Zn(J):r.removeAttribute("name")}function Wc(r,o,u,v,C,M,Z,J){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(r.type=M),o!=null||u!=null){if(!(M!=="submit"&&M!=="reset"||o!=null))return;u=u!=null?""+Zn(u):"",o=o!=null?""+Zn(o):u,J||o===r.value||(r.value=o),r.defaultValue=o}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,r.checked=J?r.checked:!!v,r.defaultChecked=!!v,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(r.name=Z)}function Ua(r,o,u){o==="number"&&qt(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function xr(r,o,u,v){if(r=r.options,o){o={};for(var C=0;C<u.length;C++)o["$"+u[C]]=!0;for(u=0;u<r.length;u++)C=o.hasOwnProperty("$"+r[u].value),r[u].selected!==C&&(r[u].selected=C),C&&v&&(r[u].defaultSelected=!0)}else{for(u=""+Zn(u),o=null,C=0;C<r.length;C++){if(r[C].value===u){r[C].selected=!0,v&&(r[C].defaultSelected=!0);return}o!==null||r[C].disabled||(o=r[C])}o!==null&&(o.selected=!0)}}function on(r,o,u){if(o!=null&&(o=""+Zn(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+Zn(u):""}function Fi(r,o,u,v){if(o==null){if(v!=null){if(u!=null)throw Error(i(92));if(re(v)){if(1<v.length)throw Error(i(93));v=v[0]}u=v}u==null&&(u=""),o=u}u=Zn(o),r.defaultValue=u,v=r.textContent,v===u&&v!==""&&v!==null&&(r.value=v)}function qr(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Wo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qs(r,o,u){var v=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?v?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":v?r.setProperty(o,u):typeof u!="number"||u===0||Wo.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function $a(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var v in u)!u.hasOwnProperty(v)||o!=null&&o.hasOwnProperty(v)||(v.indexOf("--")===0?r.setProperty(v,""):v==="float"?r.cssFloat="":r[v]="");for(var C in o)v=o[C],o.hasOwnProperty(C)&&u[C]!==v&&qs(r,C,v)}else for(var M in o)o.hasOwnProperty(M)&&qs(r,M,o[M])}function Qo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Za(r){return Vs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Jo=null;function Ka(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var sa=null,Bi=null;function Qc(r){var o=si(r);if(o&&(r=o.stateNode)){var u=r[kn]||null;e:switch(r=o.stateNode,o.type){case"input":if(tr(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Kn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var v=u[o];if(v!==r&&v.form===r.form){var C=v[kn]||null;if(!C)throw Error(i(90));tr(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(o=0;o<u.length;o++)v=u[o],v.form===r.form&&yt(v)}break e;case"textarea":on(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&xr(r,!!u.multiple,o,!1)}}}var gt=!1;function kr(r,o,u){if(gt)return r(o,u);gt=!0;try{var v=r(o);return v}finally{if(gt=!1,(sa!==null||Bi!==null)&&(qf(),sa&&(o=sa,r=Bi,Bi=sa=null,Qc(o),r)))for(o=0;o<r.length;o++)Qc(r[o])}}function Bt(r,o){var u=r.stateNode;if(u===null)return null;var v=u[kn]||null;if(v===null)return null;u=v[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(r=r.type,v=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!v;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),es=!1;if(Vr)try{var la={};Object.defineProperty(la,"passive",{get:function(){es=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{es=!1}var Yr=null,hi=null,qa=null;function Va(){if(qa)return qa;var r,o=hi,u=o.length,v,C="value"in Yr?Yr.value:Yr.textContent,M=C.length;for(r=0;r<u&&o[r]===C[r];r++);var Z=u-r;for(v=1;v<=Z&&o[u-v]===C[M-v];v++);return qa=C.slice(r,1<v?1-v:void 0)}function cn(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Xr(){return!0}function bu(){return!1}function qn(r){function o(u,v,C,M,Z){this._reactName=u,this._targetInst=C,this.type=v,this.nativeEvent=M,this.target=Z,this.currentTarget=null;for(var J in r)r.hasOwnProperty(J)&&(u=r[J],this[J]=u?u(M):M[J]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Xr:bu,this.isPropagationStopped=bu,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),o}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=qn(ua),ca=m({},ua,{view:0,detail:0}),om=qn(ca),Ys,St,ns,nr=m({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ns&&(ns&&r.type==="mousemove"?(Ys=r.screenX-ns.screenX,St=r.screenY-ns.screenY):St=Ys=0,ns=r),Ys)},movementY:function(r){return"movementY"in r?r.movementY:St}}),Ya=qn(nr),Jc=m({},nr,{dataTransfer:0}),sm=qn(Jc),wu=m({},ca,{relatedTarget:0}),Du=qn(wu),ef=m({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),lm=qn(ef),um=m({},ua,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Eu=qn(um),cm=m({},ua,{data:0}),zr=qn(cm),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ri={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nf(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Ri[r])?!!o[r]:!1}function Xs(){return nf}var Su=m({},ca,{key:function(r){if(r.key){var o=fm[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=cn(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?tf[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xs,charCode:function(r){return r.type==="keypress"?cn(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?cn(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),hm=qn(Su),rf=m({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cu=qn(rf),dm=m({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xs}),mm=qn(dm),Au=m({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),pm=qn(Au),af=m({},nr,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),of=qn(af),Ws=m({},ua,{newState:0,oldState:0}),fa=qn(Ws),gm=[9,13,27,32],ha=Vr&&"CompositionEvent"in window,Ln=null;Vr&&"documentMode"in document&&(Ln=document.documentMode);var sf=Vr&&"TextEvent"in window&&!Ln,Nu=Vr&&(!ha||Ln&&8<Ln&&11>=Ln),lf=" ",Qs=!1;function Js(r,o){switch(r){case"keyup":return gm.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xa=!1;function cf(r,o){switch(r){case"compositionend":return uf(o);case"keypress":return o.which!==32?null:(Qs=!0,lf);case"textInput":return r=o.data,r===lf&&Qs?null:r;default:return null}}function vm(r,o){if(Xa)return r==="compositionend"||!ha&&Js(r,o)?(r=Va(),qa=hi=Yr=null,Xa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Nu&&o.locale!=="ko"?null:o.data;default:return null}}var Lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function da(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Lr[r.type]:o==="textarea"}function ff(r,o,u,v){sa?Bi?Bi.push(v):Bi=[v]:sa=v,o=Jf(o,"onChange"),0<o.length&&(u=new ts("onChange","change",null,u,v),r.push({event:u,listeners:o}))}var fr=null,rs=null;function Wa(r){Dy(r,0)}function el(r){var o=_r(r);if(yt(o))return r}function Qa(r,o){if(r==="change")return o}var Mu=!1;if(Vr){var Ja;if(Vr){var Tu="oninput"in document;if(!Tu){var di=document.createElement("div");di.setAttribute("oninput","return;"),Tu=typeof di.oninput=="function"}Ja=Tu}else Ja=!1;Mu=Ja&&(!document.documentMode||9<document.documentMode)}function is(){fr&&(fr.detachEvent("onpropertychange",hf),rs=fr=null)}function hf(r){if(r.propertyName==="value"&&el(rs)){var o=[];ff(o,rs,r,Ka(r)),kr(Wa,o)}}function ku(r,o,u){r==="focusin"?(is(),fr=o,rs=u,fr.attachEvent("onpropertychange",hf)):r==="focusout"&&is()}function ym(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return el(rs)}function mi(r,o){if(r==="click")return el(o)}function _m(r,o){if(r==="input"||r==="change")return el(o)}function eo(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var hr=typeof Object.is=="function"?Object.is:eo;function dr(r,o){if(hr(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),v=Object.keys(o);if(u.length!==v.length)return!1;for(v=0;v<u.length;v++){var C=u[v];if(!$e.call(o,C)||!hr(r[C],o[C]))return!1}return!0}function as(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zu(r,o){var u=as(r);r=0;for(var v;u;){if(u.nodeType===3){if(v=r+u.textContent.length,r<=o&&v>=o)return{node:u,offset:o-r};r=v}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=as(u)}}function tl(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?tl(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function os(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=qt(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=qt(r.document)}return o}function ss(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var nl=Vr&&"documentMode"in document&&11>=document.documentMode,Fr=null,to=null,ma=null,rl=!1;function df(r,o,u){var v=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;rl||Fr==null||Fr!==qt(v)||(v=Fr,"selectionStart"in v&&ss(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ma&&dr(ma,v)||(ma=v,v=Jf(to,"onSelect"),0<v.length&&(o=new ts("onSelect","select",null,o,u),r.push({event:o,listeners:v}),o.target=Fr)))}function Wr(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var no={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},il={},mf={};Vr&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Oi(r){if(il[r])return il[r];if(!no[r])return r;var o=no[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in mf)return il[r]=o[u];return r}var pf=Oi("animationend"),Br=Oi("animationiteration"),ls=Oi("animationstart"),xm=Oi("transitionrun"),al=Oi("transitionstart"),bm=Oi("transitioncancel"),Lu=Oi("transitionend"),gf=new Map,pa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pa.push("scrollEnd");function Rr(r,o){gf.set(r,o),ui(o,[r])}var ga=new WeakMap;function mr(r,o){if(typeof r=="object"&&r!==null){var u=ga.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Kt(o)},ga.set(r,o),o)}return{value:r,source:o,stack:Kt(o)}}var pr=[],ro=0,Or=0;function us(){for(var r=ro,o=Or=ro=0;o<r;){var u=pr[o];pr[o++]=null;var v=pr[o];pr[o++]=null;var C=pr[o];pr[o++]=null;var M=pr[o];if(pr[o++]=null,v!==null&&C!==null){var Z=v.pending;Z===null?C.next=C:(C.next=Z.next,Z.next=C),v.pending=C}M!==0&&fs(u,C,M)}}function cs(r,o,u,v){pr[ro++]=r,pr[ro++]=o,pr[ro++]=u,pr[ro++]=v,Or|=v,r.lanes|=v,r=r.alternate,r!==null&&(r.lanes|=v)}function va(r,o,u,v){return cs(r,o,u,v),ji(r)}function io(r,o){return cs(r,null,null,o),ji(r)}function fs(r,o,u){r.lanes|=u;var v=r.alternate;v!==null&&(v.lanes|=u);for(var C=!1,M=r.return;M!==null;)M.childLanes|=u,v=M.alternate,v!==null&&(v.childLanes|=u),M.tag===22&&(r=M.stateNode,r===null||r._visibility&1||(C=!0)),r=M,M=M.return;return r.tag===3?(M=r.stateNode,C&&o!==null&&(C=31-Be(u),r=M.hiddenUpdates,v=r[C],v===null?r[C]=[o]:v.push(o),o.lane=u|536870912),M):null}function ji(r){if(50<nc)throw nc=0,yp=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var ya={};function vf(r,o,u,v){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(r,o,u,v){return new vf(r,o,u,v)}function ol(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Qr(r,o){var u=r.alternate;return u===null?(u=gr(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Fu(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function hs(r,o,u,v,C,M){var Z=0;if(v=r,typeof r=="function")ol(r)&&(Z=1);else if(typeof r=="string")Z=ZS(r,u,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=gr(31,u,o,C),r.elementType=O,r.lanes=M,r;case w:return Pi(u.children,C,M,o);case y:Z=8,C|=24;break;case E:return r=gr(12,u,o,C|2),r.elementType=E,r.lanes=M,r;case k:return r=gr(13,u,o,C),r.elementType=k,r.lanes=M,r;case T:return r=gr(19,u,o,C),r.elementType=T,r.lanes=M,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:case N:Z=10;break e;case A:Z=9;break e;case F:Z=11;break e;case R:Z=14;break e;case j:Z=16,v=null;break e}Z=29,u=Error(i(130,r===null?"null":typeof r,"")),v=null}return o=gr(Z,u,o,C),o.elementType=r,o.type=v,o.lanes=M,o}function Pi(r,o,u,v){return r=gr(7,r,v,o),r.lanes=u,r}function Bu(r,o,u){return r=gr(6,r,null,o),r.lanes=u,r}function sl(r,o,u){return o=gr(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var _a=[],ao=0,s=null,p=0,S=[],z=0,P=null,Y=1,fe="";function we(r,o){_a[ao++]=p,_a[ao++]=s,s=r,p=o}function Me(r,o,u){S[z++]=Y,S[z++]=fe,S[z++]=P,P=r;var v=Y;r=fe;var C=32-Be(v)-1;v&=~(1<<C),u+=1;var M=32-Be(o)+C;if(30<M){var Z=C-C%5;M=(v&(1<<Z)-1).toString(32),v>>=Z,C-=Z,Y=1<<32-Be(o)+C|u<<C|v,fe=M+r}else Y=1<<M|u<<C|v,fe=r}function Ge(r){r.return!==null&&(we(r,1),Me(r,1,0))}function Ve(r){for(;r===s;)s=_a[--ao],_a[ao]=null,p=_a[--ao],_a[ao]=null;for(;r===P;)P=S[--z],S[z]=null,fe=S[--z],S[z]=null,Y=S[--z],S[z]=null}var Qe=null,nt=null,pt=!1,Vt=null,sn=!1,Fn=Error(i(519));function br(r){var o=Error(i(418,""));throw so(mr(o,r)),Fn}function yf(r){var o=r.stateNode,u=r.type,v=r.memoizedProps;switch(o[xn]=r,o[kn]=v,u){case"dialog":Tt("cancel",o),Tt("close",o);break;case"iframe":case"object":case"embed":Tt("load",o);break;case"video":case"audio":for(u=0;u<ic.length;u++)Tt(ic[u],o);break;case"source":Tt("error",o);break;case"img":case"image":case"link":Tt("error",o),Tt("load",o);break;case"details":Tt("toggle",o);break;case"input":Tt("invalid",o),Wc(o,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Ga(o);break;case"select":Tt("invalid",o);break;case"textarea":Tt("invalid",o),Fi(o,v.value,v.defaultValue,v.children),Ga(o)}u=v.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||v.suppressHydrationWarning===!0||Ay(o.textContent,u)?(v.popover!=null&&(Tt("beforetoggle",o),Tt("toggle",o)),v.onScroll!=null&&Tt("scroll",o),v.onScrollEnd!=null&&Tt("scrollend",o),v.onClick!=null&&(o.onclick=eh),o=!0):o=!1,o||br(r)}function _f(r){for(Qe=r.return;Qe;)switch(Qe.tag){case 5:case 13:sn=!1;return;case 27:case 3:sn=!0;return;default:Qe=Qe.return}}function ds(r){if(r!==Qe)return!1;if(!pt)return _f(r),pt=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Fp(r.type,r.memoizedProps)),u=!u),u&&nt&&br(r),_f(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(u=r.data,u==="/$"){if(o===0){nt=yi(r.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;r=r.nextSibling}nt=null}}else o===27?(o=nt,Do(r.type)?(r=jp,jp=null,nt=r):nt=o):nt=Qe?yi(r.stateNode.nextSibling):null;return!0}function oo(){nt=Qe=null,pt=!1}function xf(){var r=Vt;return r!==null&&(Er===null?Er=r:Er.push.apply(Er,r),Vt=null),r}function so(r){Vt===null?Vt=[r]:Vt.push(r)}var nn=q(null),Jr=null,pi=null;function Ii(r,o,u){se(nn,o._currentValue),o._currentValue=u}function gi(r){r._currentValue=nn.current,ne(nn)}function ms(r,o,u){for(;r!==null;){var v=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,v!==null&&(v.childLanes|=o)):v!==null&&(v.childLanes&o)!==o&&(v.childLanes|=o),r===u)break;r=r.return}}function ll(r,o,u,v){var C=r.child;for(C!==null&&(C.return=r);C!==null;){var M=C.dependencies;if(M!==null){var Z=C.child;M=M.firstContext;e:for(;M!==null;){var J=M;M=C;for(var he=0;he<o.length;he++)if(J.context===o[he]){M.lanes|=u,J=M.alternate,J!==null&&(J.lanes|=u),ms(M.return,u,r),v||(Z=null);break e}M=J.next}}else if(C.tag===18){if(Z=C.return,Z===null)throw Error(i(341));Z.lanes|=u,M=Z.alternate,M!==null&&(M.lanes|=u),ms(Z,u,r),Z=null}else Z=C.child;if(Z!==null)Z.return=C;else for(Z=C;Z!==null;){if(Z===r){Z=null;break}if(C=Z.sibling,C!==null){C.return=Z.return,Z=C;break}Z=Z.return}C=Z}}function ps(r,o,u,v){r=null;for(var C=o,M=!1;C!==null;){if(!M){if((C.flags&524288)!==0)M=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var Z=C.alternate;if(Z===null)throw Error(i(387));if(Z=Z.memoizedProps,Z!==null){var J=C.type;hr(C.pendingProps.value,Z.value)||(r!==null?r.push(J):r=[J])}}else if(C===ze.current){if(Z=C.alternate,Z===null)throw Error(i(387));Z.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(r!==null?r.push(cc):r=[cc])}C=C.return}r!==null&&ll(o,r,u,v),o.flags|=262144}function bf(r){for(r=r.firstContext;r!==null;){if(!hr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function gs(r){Jr=r,pi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function rr(r){return dv(Jr,r)}function wf(r,o){return Jr===null&&gs(r),dv(r,o)}function dv(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},pi===null){if(r===null)throw Error(i(308));pi=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else pi=pi.next=o;return u}var $E=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,v){r.push(v)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},ZE=e.unstable_scheduleCallback,KE=e.unstable_NormalPriority,An={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wm(){return{controller:new $E,data:new Map,refCount:0}}function Ru(r){r.refCount--,r.refCount===0&&ZE(KE,function(){r.controller.abort()})}var Ou=null,Dm=0,ul=0,cl=null;function qE(r,o){if(Ou===null){var u=Ou=[];Dm=0,ul=Sp(),cl={status:"pending",value:void 0,then:function(v){u.push(v)}}}return Dm++,o.then(mv,mv),o}function mv(){if(--Dm===0&&Ou!==null){cl!==null&&(cl.status="fulfilled");var r=Ou;Ou=null,ul=0,cl=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function VE(r,o){var u=[],v={status:"pending",value:null,reason:null,then:function(C){u.push(C)}};return r.then(function(){v.status="fulfilled",v.value=o;for(var C=0;C<u.length;C++)(0,u[C])(o)},function(C){for(v.status="rejected",v.reason=C,C=0;C<u.length;C++)(0,u[C])(void 0)}),v}var pv=K.S;K.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&qE(r,o),pv!==null&&pv(r,o)};var vs=q(null);function Em(){var r=vs.current;return r!==null?r:Yt.pooledCache}function Df(r,o){o===null?se(vs,vs.current):se(vs,o.pool)}function gv(){var r=Em();return r===null?null:{parent:An._currentValue,pool:r}}var ju=Error(i(460)),vv=Error(i(474)),Ef=Error(i(542)),Sm={then:function(){}};function yv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Sf(){}function _v(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Sf,Sf),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,bv(r),r;default:if(typeof o.status=="string")o.then(Sf,Sf);else{if(r=Yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(v){if(o.status==="pending"){var C=o;C.status="fulfilled",C.value=v}},function(v){if(o.status==="pending"){var C=o;C.status="rejected",C.reason=v}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,bv(r),r}throw Pu=o,ju}}var Pu=null;function xv(){if(Pu===null)throw Error(i(459));var r=Pu;return Pu=null,r}function bv(r){if(r===ju||r===Ef)throw Error(i(483))}var lo=!1;function Cm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Am(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function uo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function co(r,o,u){var v=r.updateQueue;if(v===null)return null;if(v=v.shared,(jt&2)!==0){var C=v.pending;return C===null?o.next=o:(o.next=C.next,C.next=o),v.pending=o,o=ji(r),fs(r,null,u),o}return cs(r,v,o,u),ji(r)}function Iu(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var v=o.lanes;v&=r.pendingLanes,u|=v,o.lanes=u,Hs(r,u)}}function Nm(r,o){var u=r.updateQueue,v=r.alternate;if(v!==null&&(v=v.updateQueue,u===v)){var C=null,M=null;if(u=u.firstBaseUpdate,u!==null){do{var Z={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};M===null?C=M=Z:M=M.next=Z,u=u.next}while(u!==null);M===null?C=M=o:M=M.next=o}else C=M=o;u={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:M,shared:v.shared,callbacks:v.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Mm=!1;function Hu(){if(Mm){var r=cl;if(r!==null)throw r}}function Gu(r,o,u,v){Mm=!1;var C=r.updateQueue;lo=!1;var M=C.firstBaseUpdate,Z=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var he=J,Ce=he.next;he.next=null,Z===null?M=Ce:Z.next=Ce,Z=he;var Oe=r.alternate;Oe!==null&&(Oe=Oe.updateQueue,J=Oe.lastBaseUpdate,J!==Z&&(J===null?Oe.firstBaseUpdate=Ce:J.next=Ce,Oe.lastBaseUpdate=he))}if(M!==null){var He=C.baseState;Z=0,Oe=Ce=he=null,J=M;do{var Ae=J.lane&-536870913,Ne=Ae!==J.lane;if(Ne?(Ft&Ae)===Ae:(v&Ae)===Ae){Ae!==0&&Ae===ul&&(Mm=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var mt=r,ut=J;Ae=o;var Gt=u;switch(ut.tag){case 1:if(mt=ut.payload,typeof mt=="function"){He=mt.call(Gt,He,Ae);break e}He=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=ut.payload,Ae=typeof mt=="function"?mt.call(Gt,He,Ae):mt,Ae==null)break e;He=m({},He,Ae);break e;case 2:lo=!0}}Ae=J.callback,Ae!==null&&(r.flags|=64,Ne&&(r.flags|=8192),Ne=C.callbacks,Ne===null?C.callbacks=[Ae]:Ne.push(Ae))}else Ne={lane:Ae,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Oe===null?(Ce=Oe=Ne,he=He):Oe=Oe.next=Ne,Z|=Ae;if(J=J.next,J===null){if(J=C.shared.pending,J===null)break;Ne=J,J=Ne.next,Ne.next=null,C.lastBaseUpdate=Ne,C.shared.pending=null}}while(!0);Oe===null&&(he=He),C.baseState=he,C.firstBaseUpdate=Ce,C.lastBaseUpdate=Oe,M===null&&(C.shared.lanes=0),_o|=Z,r.lanes=Z,r.memoizedState=He}}function wv(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Dv(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)wv(u[r],o)}var fl=q(null),Cf=q(0);function Ev(r,o){r=Ca,se(Cf,r),se(fl,o),Ca=r|o.baseLanes}function Tm(){se(Cf,Ca),se(fl,fl.current)}function km(){Ca=Cf.current,ne(fl),ne(Cf)}var fo=0,bt=null,It=null,bn=null,Af=!1,hl=!1,ys=!1,Nf=0,Uu=0,dl=null,YE=0;function mn(){throw Error(i(321))}function zm(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!hr(r[u],o[u]))return!1;return!0}function Lm(r,o,u,v,C,M){return fo=M,bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,K.H=r===null||r.memoizedState===null?s1:l1,ys=!1,M=u(v,C),ys=!1,hl&&(M=Cv(o,u,v,C)),Sv(r),M}function Sv(r){K.H=Ff;var o=It!==null&&It.next!==null;if(fo=0,bn=It=bt=null,Af=!1,Uu=0,dl=null,o)throw Error(i(300));r===null||Bn||(r=r.dependencies,r!==null&&bf(r)&&(Bn=!0))}function Cv(r,o,u,v){bt=r;var C=0;do{if(hl&&(dl=null),Uu=0,hl=!1,25<=C)throw Error(i(301));if(C+=1,bn=It=null,r.updateQueue!=null){var M=r.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}K.H=nS,M=o(u,v)}while(hl);return M}function XE(){var r=K.H,o=r.useState()[0];return o=typeof o.then=="function"?$u(o):o,r=r.useState()[0],(It!==null?It.memoizedState:null)!==r&&(bt.flags|=1024),o}function Fm(){var r=Nf!==0;return Nf=0,r}function Bm(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function Rm(r){if(Af){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Af=!1}fo=0,bn=It=bt=null,hl=!1,Uu=Nf=0,dl=null}function wr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?bt.memoizedState=bn=r:bn=bn.next=r,bn}function wn(){if(It===null){var r=bt.alternate;r=r!==null?r.memoizedState:null}else r=It.next;var o=bn===null?bt.memoizedState:bn.next;if(o!==null)bn=o,It=r;else{if(r===null)throw bt.alternate===null?Error(i(467)):Error(i(310));It=r,r={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},bn===null?bt.memoizedState=bn=r:bn=bn.next=r}return bn}function Om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $u(r){var o=Uu;return Uu+=1,dl===null&&(dl=[]),r=_v(dl,r,o),o=bt,(bn===null?o.memoizedState:bn.next)===null&&(o=o.alternate,K.H=o===null||o.memoizedState===null?s1:l1),r}function Mf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return $u(r);if(r.$$typeof===N)return rr(r)}throw Error(i(438,String(r)))}function jm(r){var o=null,u=bt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var v=bt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(o={data:v.data.map(function(C){return C.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Om(),bt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),v=0;v<r;v++)u[v]=G;return o.index++,u}function xa(r,o){return typeof o=="function"?o(r):o}function Tf(r){var o=wn();return Pm(o,It,r)}function Pm(r,o,u){var v=r.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=u;var C=r.baseQueue,M=v.pending;if(M!==null){if(C!==null){var Z=C.next;C.next=M.next,M.next=Z}o.baseQueue=C=M,v.pending=null}if(M=r.baseState,C===null)r.memoizedState=M;else{o=C.next;var J=Z=null,he=null,Ce=o,Oe=!1;do{var He=Ce.lane&-536870913;if(He!==Ce.lane?(Ft&He)===He:(fo&He)===He){var Ae=Ce.revertLane;if(Ae===0)he!==null&&(he=he.next={lane:0,revertLane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),He===ul&&(Oe=!0);else if((fo&Ae)===Ae){Ce=Ce.next,Ae===ul&&(Oe=!0);continue}else He={lane:0,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},he===null?(J=he=He,Z=M):he=he.next=He,bt.lanes|=Ae,_o|=Ae;He=Ce.action,ys&&u(M,He),M=Ce.hasEagerState?Ce.eagerState:u(M,He)}else Ae={lane:He,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},he===null?(J=he=Ae,Z=M):he=he.next=Ae,bt.lanes|=He,_o|=He;Ce=Ce.next}while(Ce!==null&&Ce!==o);if(he===null?Z=M:he.next=J,!hr(M,r.memoizedState)&&(Bn=!0,Oe&&(u=cl,u!==null)))throw u;r.memoizedState=M,r.baseState=Z,r.baseQueue=he,v.lastRenderedState=M}return C===null&&(v.lanes=0),[r.memoizedState,v.dispatch]}function Im(r){var o=wn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var v=u.dispatch,C=u.pending,M=o.memoizedState;if(C!==null){u.pending=null;var Z=C=C.next;do M=r(M,Z.action),Z=Z.next;while(Z!==C);hr(M,o.memoizedState)||(Bn=!0),o.memoizedState=M,o.baseQueue===null&&(o.baseState=M),u.lastRenderedState=M}return[M,v]}function Av(r,o,u){var v=bt,C=wn(),M=pt;if(M){if(u===void 0)throw Error(i(407));u=u()}else u=o();var Z=!hr((It||C).memoizedState,u);Z&&(C.memoizedState=u,Bn=!0),C=C.queue;var J=Tv.bind(null,v,C,r);if(Zu(2048,8,J,[r]),C.getSnapshot!==o||Z||bn!==null&&bn.memoizedState.tag&1){if(v.flags|=2048,ml(9,kf(),Mv.bind(null,v,C,u,o),null),Yt===null)throw Error(i(349));M||(fo&124)!==0||Nv(v,o,u)}return u}function Nv(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=bt.updateQueue,o===null?(o=Om(),bt.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function Mv(r,o,u,v){o.value=u,o.getSnapshot=v,kv(o)&&zv(r)}function Tv(r,o,u){return u(function(){kv(o)&&zv(r)})}function kv(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!hr(r,u)}catch{return!0}}function zv(r){var o=io(r,2);o!==null&&Gr(o,r,2)}function Hm(r){var o=wr();if(typeof r=="function"){var u=r;if(r=u(),ys){de(!0);try{u()}finally{de(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:r},o}function Lv(r,o,u,v){return r.baseState=u,Pm(r,It,typeof v=="function"?v:xa)}function WE(r,o,u,v,C){if(Lf(r))throw Error(i(485));if(r=o.action,r!==null){var M={payload:C,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){M.listeners.push(Z)}};K.T!==null?u(!0):M.isTransition=!1,v(M),u=o.pending,u===null?(M.next=o.pending=M,Fv(o,M)):(M.next=u.next,o.pending=u.next=M)}}function Fv(r,o){var u=o.action,v=o.payload,C=r.state;if(o.isTransition){var M=K.T,Z={};K.T=Z;try{var J=u(C,v),he=K.S;he!==null&&he(Z,J),Bv(r,o,J)}catch(Ce){Gm(r,o,Ce)}finally{K.T=M}}else try{M=u(C,v),Bv(r,o,M)}catch(Ce){Gm(r,o,Ce)}}function Bv(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(v){Rv(r,o,v)},function(v){return Gm(r,o,v)}):Rv(r,o,u)}function Rv(r,o,u){o.status="fulfilled",o.value=u,Ov(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,Fv(r,u)))}function Gm(r,o,u){var v=r.pending;if(r.pending=null,v!==null){v=v.next;do o.status="rejected",o.reason=u,Ov(o),o=o.next;while(o!==v)}r.action=null}function Ov(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function jv(r,o){return o}function Pv(r,o){if(pt){var u=Yt.formState;if(u!==null){e:{var v=bt;if(pt){if(nt){t:{for(var C=nt,M=sn;C.nodeType!==8;){if(!M){C=null;break t}if(C=yi(C.nextSibling),C===null){C=null;break t}}M=C.data,C=M==="F!"||M==="F"?C:null}if(C){nt=yi(C.nextSibling),v=C.data==="F!";break e}}br(v)}v=!1}v&&(o=u[0])}}return u=wr(),u.memoizedState=u.baseState=o,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jv,lastRenderedState:o},u.queue=v,u=i1.bind(null,bt,v),v.dispatch=u,v=Hm(!1),M=qm.bind(null,bt,!1,v.queue),v=wr(),C={state:o,dispatch:null,action:r,pending:null},v.queue=C,u=WE.bind(null,bt,C,M,u),C.dispatch=u,v.memoizedState=r,[o,u,!1]}function Iv(r){var o=wn();return Hv(o,It,r)}function Hv(r,o,u){if(o=Pm(r,o,jv)[0],r=Tf(xa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var v=$u(o)}catch(Z){throw Z===ju?Ef:Z}else v=o;o=wn();var C=o.queue,M=C.dispatch;return u!==o.memoizedState&&(bt.flags|=2048,ml(9,kf(),QE.bind(null,C,u),null)),[v,M,r]}function QE(r,o){r.action=o}function Gv(r){var o=wn(),u=It;if(u!==null)return Hv(o,u,r);wn(),o=o.memoizedState,u=wn();var v=u.queue.dispatch;return u.memoizedState=r,[o,v,!1]}function ml(r,o,u,v){return r={tag:r,create:u,deps:v,inst:o,next:null},o=bt.updateQueue,o===null&&(o=Om(),bt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(v=u.next,u.next=r,r.next=v,o.lastEffect=r),r}function kf(){return{destroy:void 0,resource:void 0}}function Uv(){return wn().memoizedState}function zf(r,o,u,v){var C=wr();v=v===void 0?null:v,bt.flags|=r,C.memoizedState=ml(1|o,kf(),u,v)}function Zu(r,o,u,v){var C=wn();v=v===void 0?null:v;var M=C.memoizedState.inst;It!==null&&v!==null&&zm(v,It.memoizedState.deps)?C.memoizedState=ml(o,M,u,v):(bt.flags|=r,C.memoizedState=ml(1|o,M,u,v))}function $v(r,o){zf(8390656,8,r,o)}function Zv(r,o){Zu(2048,8,r,o)}function Kv(r,o){return Zu(4,2,r,o)}function qv(r,o){return Zu(4,4,r,o)}function Vv(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Yv(r,o,u){u=u!=null?u.concat([r]):null,Zu(4,4,Vv.bind(null,o,r),u)}function Um(){}function Xv(r,o){var u=wn();o=o===void 0?null:o;var v=u.memoizedState;return o!==null&&zm(o,v[1])?v[0]:(u.memoizedState=[r,o],r)}function Wv(r,o){var u=wn();o=o===void 0?null:o;var v=u.memoizedState;if(o!==null&&zm(o,v[1]))return v[0];if(v=r(),ys){de(!0);try{r()}finally{de(!1)}}return u.memoizedState=[v,o],v}function $m(r,o,u){return u===void 0||(fo&1073741824)!==0?r.memoizedState=o:(r.memoizedState=u,r=ey(),bt.lanes|=r,_o|=r,u)}function Qv(r,o,u,v){return hr(u,o)?u:fl.current!==null?(r=$m(r,u,v),hr(r,o)||(Bn=!0),r):(fo&42)===0?(Bn=!0,r.memoizedState=u):(r=ey(),bt.lanes|=r,_o|=r,o)}function Jv(r,o,u,v,C){var M=ee.p;ee.p=M!==0&&8>M?M:8;var Z=K.T,J={};K.T=J,qm(r,!1,o,u);try{var he=C(),Ce=K.S;if(Ce!==null&&Ce(J,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var Oe=VE(he,v);Ku(r,o,Oe,Hr(r))}else Ku(r,o,v,Hr(r))}catch(He){Ku(r,o,{then:function(){},status:"rejected",reason:He},Hr())}finally{ee.p=M,K.T=Z}}function JE(){}function Zm(r,o,u,v){if(r.tag!==5)throw Error(i(476));var C=e1(r).queue;Jv(r,C,o,V,u===null?JE:function(){return t1(r),u(v)})}function e1(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:V},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function t1(r){var o=e1(r).next.queue;Ku(r,o,{},Hr())}function Km(){return rr(cc)}function n1(){return wn().memoizedState}function r1(){return wn().memoizedState}function eS(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Hr();r=uo(u);var v=co(o,r,u);v!==null&&(Gr(v,o,u),Iu(v,o,u)),o={cache:wm()},r.payload=o;return}o=o.return}}function tS(r,o,u){var v=Hr();u={lane:v,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Lf(r)?a1(o,u):(u=va(r,o,u,v),u!==null&&(Gr(u,r,v),o1(u,o,v)))}function i1(r,o,u){var v=Hr();Ku(r,o,u,v)}function Ku(r,o,u,v){var C={lane:v,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Lf(r))a1(o,C);else{var M=r.alternate;if(r.lanes===0&&(M===null||M.lanes===0)&&(M=o.lastRenderedReducer,M!==null))try{var Z=o.lastRenderedState,J=M(Z,u);if(C.hasEagerState=!0,C.eagerState=J,hr(J,Z))return cs(r,o,C,0),Yt===null&&us(),!1}catch{}finally{}if(u=va(r,o,C,v),u!==null)return Gr(u,r,v),o1(u,o,v),!0}return!1}function qm(r,o,u,v){if(v={lane:2,revertLane:Sp(),action:v,hasEagerState:!1,eagerState:null,next:null},Lf(r)){if(o)throw Error(i(479))}else o=va(r,u,v,2),o!==null&&Gr(o,r,2)}function Lf(r){var o=r.alternate;return r===bt||o!==null&&o===bt}function a1(r,o){hl=Af=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function o1(r,o,u){if((u&4194048)!==0){var v=o.lanes;v&=r.pendingLanes,u|=v,o.lanes=u,Hs(r,u)}}var Ff={readContext:rr,use:Mf,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn},s1={readContext:rr,use:Mf,useCallback:function(r,o){return wr().memoizedState=[r,o===void 0?null:o],r},useContext:rr,useEffect:$v,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,zf(4194308,4,Vv.bind(null,o,r),u)},useLayoutEffect:function(r,o){return zf(4194308,4,r,o)},useInsertionEffect:function(r,o){zf(4,2,r,o)},useMemo:function(r,o){var u=wr();o=o===void 0?null:o;var v=r();if(ys){de(!0);try{r()}finally{de(!1)}}return u.memoizedState=[v,o],v},useReducer:function(r,o,u){var v=wr();if(u!==void 0){var C=u(o);if(ys){de(!0);try{u(o)}finally{de(!1)}}}else C=o;return v.memoizedState=v.baseState=C,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:C},v.queue=r,r=r.dispatch=tS.bind(null,bt,r),[v.memoizedState,r]},useRef:function(r){var o=wr();return r={current:r},o.memoizedState=r},useState:function(r){r=Hm(r);var o=r.queue,u=i1.bind(null,bt,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Um,useDeferredValue:function(r,o){var u=wr();return $m(u,r,o)},useTransition:function(){var r=Hm(!1);return r=Jv.bind(null,bt,r.queue,!0,!1),wr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var v=bt,C=wr();if(pt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Yt===null)throw Error(i(349));(Ft&124)!==0||Nv(v,o,u)}C.memoizedState=u;var M={value:u,getSnapshot:o};return C.queue=M,$v(Tv.bind(null,v,M,r),[r]),v.flags|=2048,ml(9,kf(),Mv.bind(null,v,M,u,o),null),u},useId:function(){var r=wr(),o=Yt.identifierPrefix;if(pt){var u=fe,v=Y;u=(v&~(1<<32-Be(v)-1)).toString(32)+u,o="«"+o+"R"+u,u=Nf++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=YE++,o="«"+o+"r"+u.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:Km,useFormState:Pv,useActionState:Pv,useOptimistic:function(r){var o=wr();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=qm.bind(null,bt,!0,u),u.dispatch=o,[r,o]},useMemoCache:jm,useCacheRefresh:function(){return wr().memoizedState=eS.bind(null,bt)}},l1={readContext:rr,use:Mf,useCallback:Xv,useContext:rr,useEffect:Zv,useImperativeHandle:Yv,useInsertionEffect:Kv,useLayoutEffect:qv,useMemo:Wv,useReducer:Tf,useRef:Uv,useState:function(){return Tf(xa)},useDebugValue:Um,useDeferredValue:function(r,o){var u=wn();return Qv(u,It.memoizedState,r,o)},useTransition:function(){var r=Tf(xa)[0],o=wn().memoizedState;return[typeof r=="boolean"?r:$u(r),o]},useSyncExternalStore:Av,useId:n1,useHostTransitionStatus:Km,useFormState:Iv,useActionState:Iv,useOptimistic:function(r,o){var u=wn();return Lv(u,It,r,o)},useMemoCache:jm,useCacheRefresh:r1},nS={readContext:rr,use:Mf,useCallback:Xv,useContext:rr,useEffect:Zv,useImperativeHandle:Yv,useInsertionEffect:Kv,useLayoutEffect:qv,useMemo:Wv,useReducer:Im,useRef:Uv,useState:function(){return Im(xa)},useDebugValue:Um,useDeferredValue:function(r,o){var u=wn();return It===null?$m(u,r,o):Qv(u,It.memoizedState,r,o)},useTransition:function(){var r=Im(xa)[0],o=wn().memoizedState;return[typeof r=="boolean"?r:$u(r),o]},useSyncExternalStore:Av,useId:n1,useHostTransitionStatus:Km,useFormState:Gv,useActionState:Gv,useOptimistic:function(r,o){var u=wn();return It!==null?Lv(u,It,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:jm,useCacheRefresh:r1},pl=null,qu=0;function Bf(r){var o=qu;return qu+=1,pl===null&&(pl=[]),_v(pl,r,o)}function Vu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Rf(r,o){throw o.$$typeof===g?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function u1(r){var o=r._init;return o(r._payload)}function c1(r){function o(xe,ve){if(r){var Ee=xe.deletions;Ee===null?(xe.deletions=[ve],xe.flags|=16):Ee.push(ve)}}function u(xe,ve){if(!r)return null;for(;ve!==null;)o(xe,ve),ve=ve.sibling;return null}function v(xe){for(var ve=new Map;xe!==null;)xe.key!==null?ve.set(xe.key,xe):ve.set(xe.index,xe),xe=xe.sibling;return ve}function C(xe,ve){return xe=Qr(xe,ve),xe.index=0,xe.sibling=null,xe}function M(xe,ve,Ee){return xe.index=Ee,r?(Ee=xe.alternate,Ee!==null?(Ee=Ee.index,Ee<ve?(xe.flags|=67108866,ve):Ee):(xe.flags|=67108866,ve)):(xe.flags|=1048576,ve)}function Z(xe){return r&&xe.alternate===null&&(xe.flags|=67108866),xe}function J(xe,ve,Ee,Pe){return ve===null||ve.tag!==6?(ve=Bu(Ee,xe.mode,Pe),ve.return=xe,ve):(ve=C(ve,Ee),ve.return=xe,ve)}function he(xe,ve,Ee,Pe){var Je=Ee.type;return Je===w?Oe(xe,ve,Ee.props.children,Pe,Ee.key):ve!==null&&(ve.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===j&&u1(Je)===ve.type)?(ve=C(ve,Ee.props),Vu(ve,Ee),ve.return=xe,ve):(ve=hs(Ee.type,Ee.key,Ee.props,null,xe.mode,Pe),Vu(ve,Ee),ve.return=xe,ve)}function Ce(xe,ve,Ee,Pe){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ee.containerInfo||ve.stateNode.implementation!==Ee.implementation?(ve=sl(Ee,xe.mode,Pe),ve.return=xe,ve):(ve=C(ve,Ee.children||[]),ve.return=xe,ve)}function Oe(xe,ve,Ee,Pe,Je){return ve===null||ve.tag!==7?(ve=Pi(Ee,xe.mode,Pe,Je),ve.return=xe,ve):(ve=C(ve,Ee),ve.return=xe,ve)}function He(xe,ve,Ee){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Bu(""+ve,xe.mode,Ee),ve.return=xe,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case _:return Ee=hs(ve.type,ve.key,ve.props,null,xe.mode,Ee),Vu(Ee,ve),Ee.return=xe,Ee;case x:return ve=sl(ve,xe.mode,Ee),ve.return=xe,ve;case j:var Pe=ve._init;return ve=Pe(ve._payload),He(xe,ve,Ee)}if(re(ve)||I(ve))return ve=Pi(ve,xe.mode,Ee,null),ve.return=xe,ve;if(typeof ve.then=="function")return He(xe,Bf(ve),Ee);if(ve.$$typeof===N)return He(xe,wf(xe,ve),Ee);Rf(xe,ve)}return null}function Ae(xe,ve,Ee,Pe){var Je=ve!==null?ve.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Je!==null?null:J(xe,ve,""+Ee,Pe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case _:return Ee.key===Je?he(xe,ve,Ee,Pe):null;case x:return Ee.key===Je?Ce(xe,ve,Ee,Pe):null;case j:return Je=Ee._init,Ee=Je(Ee._payload),Ae(xe,ve,Ee,Pe)}if(re(Ee)||I(Ee))return Je!==null?null:Oe(xe,ve,Ee,Pe,null);if(typeof Ee.then=="function")return Ae(xe,ve,Bf(Ee),Pe);if(Ee.$$typeof===N)return Ae(xe,ve,wf(xe,Ee),Pe);Rf(xe,Ee)}return null}function Ne(xe,ve,Ee,Pe,Je){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return xe=xe.get(Ee)||null,J(ve,xe,""+Pe,Je);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case _:return xe=xe.get(Pe.key===null?Ee:Pe.key)||null,he(ve,xe,Pe,Je);case x:return xe=xe.get(Pe.key===null?Ee:Pe.key)||null,Ce(ve,xe,Pe,Je);case j:var Ct=Pe._init;return Pe=Ct(Pe._payload),Ne(xe,ve,Ee,Pe,Je)}if(re(Pe)||I(Pe))return xe=xe.get(Ee)||null,Oe(ve,xe,Pe,Je,null);if(typeof Pe.then=="function")return Ne(xe,ve,Ee,Bf(Pe),Je);if(Pe.$$typeof===N)return Ne(xe,ve,Ee,wf(ve,Pe),Je);Rf(ve,Pe)}return null}function mt(xe,ve,Ee,Pe){for(var Je=null,Ct=null,ot=ve,ft=ve=0,On=null;ot!==null&&ft<Ee.length;ft++){ot.index>ft?(On=ot,ot=null):On=ot.sibling;var Rt=Ae(xe,ot,Ee[ft],Pe);if(Rt===null){ot===null&&(ot=On);break}r&&ot&&Rt.alternate===null&&o(xe,ot),ve=M(Rt,ve,ft),Ct===null?Je=Rt:Ct.sibling=Rt,Ct=Rt,ot=On}if(ft===Ee.length)return u(xe,ot),pt&&we(xe,ft),Je;if(ot===null){for(;ft<Ee.length;ft++)ot=He(xe,Ee[ft],Pe),ot!==null&&(ve=M(ot,ve,ft),Ct===null?Je=ot:Ct.sibling=ot,Ct=ot);return pt&&we(xe,ft),Je}for(ot=v(ot);ft<Ee.length;ft++)On=Ne(ot,xe,ft,Ee[ft],Pe),On!==null&&(r&&On.alternate!==null&&ot.delete(On.key===null?ft:On.key),ve=M(On,ve,ft),Ct===null?Je=On:Ct.sibling=On,Ct=On);return r&&ot.forEach(function(No){return o(xe,No)}),pt&&we(xe,ft),Je}function ut(xe,ve,Ee,Pe){if(Ee==null)throw Error(i(151));for(var Je=null,Ct=null,ot=ve,ft=ve=0,On=null,Rt=Ee.next();ot!==null&&!Rt.done;ft++,Rt=Ee.next()){ot.index>ft?(On=ot,ot=null):On=ot.sibling;var No=Ae(xe,ot,Rt.value,Pe);if(No===null){ot===null&&(ot=On);break}r&&ot&&No.alternate===null&&o(xe,ot),ve=M(No,ve,ft),Ct===null?Je=No:Ct.sibling=No,Ct=No,ot=On}if(Rt.done)return u(xe,ot),pt&&we(xe,ft),Je;if(ot===null){for(;!Rt.done;ft++,Rt=Ee.next())Rt=He(xe,Rt.value,Pe),Rt!==null&&(ve=M(Rt,ve,ft),Ct===null?Je=Rt:Ct.sibling=Rt,Ct=Rt);return pt&&we(xe,ft),Je}for(ot=v(ot);!Rt.done;ft++,Rt=Ee.next())Rt=Ne(ot,xe,ft,Rt.value,Pe),Rt!==null&&(r&&Rt.alternate!==null&&ot.delete(Rt.key===null?ft:Rt.key),ve=M(Rt,ve,ft),Ct===null?Je=Rt:Ct.sibling=Rt,Ct=Rt);return r&&ot.forEach(function(r3){return o(xe,r3)}),pt&&we(xe,ft),Je}function Gt(xe,ve,Ee,Pe){if(typeof Ee=="object"&&Ee!==null&&Ee.type===w&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case _:e:{for(var Je=Ee.key;ve!==null;){if(ve.key===Je){if(Je=Ee.type,Je===w){if(ve.tag===7){u(xe,ve.sibling),Pe=C(ve,Ee.props.children),Pe.return=xe,xe=Pe;break e}}else if(ve.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===j&&u1(Je)===ve.type){u(xe,ve.sibling),Pe=C(ve,Ee.props),Vu(Pe,Ee),Pe.return=xe,xe=Pe;break e}u(xe,ve);break}else o(xe,ve);ve=ve.sibling}Ee.type===w?(Pe=Pi(Ee.props.children,xe.mode,Pe,Ee.key),Pe.return=xe,xe=Pe):(Pe=hs(Ee.type,Ee.key,Ee.props,null,xe.mode,Pe),Vu(Pe,Ee),Pe.return=xe,xe=Pe)}return Z(xe);case x:e:{for(Je=Ee.key;ve!==null;){if(ve.key===Je)if(ve.tag===4&&ve.stateNode.containerInfo===Ee.containerInfo&&ve.stateNode.implementation===Ee.implementation){u(xe,ve.sibling),Pe=C(ve,Ee.children||[]),Pe.return=xe,xe=Pe;break e}else{u(xe,ve);break}else o(xe,ve);ve=ve.sibling}Pe=sl(Ee,xe.mode,Pe),Pe.return=xe,xe=Pe}return Z(xe);case j:return Je=Ee._init,Ee=Je(Ee._payload),Gt(xe,ve,Ee,Pe)}if(re(Ee))return mt(xe,ve,Ee,Pe);if(I(Ee)){if(Je=I(Ee),typeof Je!="function")throw Error(i(150));return Ee=Je.call(Ee),ut(xe,ve,Ee,Pe)}if(typeof Ee.then=="function")return Gt(xe,ve,Bf(Ee),Pe);if(Ee.$$typeof===N)return Gt(xe,ve,wf(xe,Ee),Pe);Rf(xe,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,ve!==null&&ve.tag===6?(u(xe,ve.sibling),Pe=C(ve,Ee),Pe.return=xe,xe=Pe):(u(xe,ve),Pe=Bu(Ee,xe.mode,Pe),Pe.return=xe,xe=Pe),Z(xe)):u(xe,ve)}return function(xe,ve,Ee,Pe){try{qu=0;var Je=Gt(xe,ve,Ee,Pe);return pl=null,Je}catch(ot){if(ot===ju||ot===Ef)throw ot;var Ct=gr(29,ot,null,xe.mode);return Ct.lanes=Pe,Ct.return=xe,Ct}finally{}}}var gl=c1(!0),f1=c1(!1),ei=q(null),Hi=null;function ho(r){var o=r.alternate;se(Nn,Nn.current&1),se(ei,r),Hi===null&&(o===null||fl.current!==null||o.memoizedState!==null)&&(Hi=r)}function h1(r){if(r.tag===22){if(se(Nn,Nn.current),se(ei,r),Hi===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(Hi=r)}}else mo()}function mo(){se(Nn,Nn.current),se(ei,ei.current)}function ba(r){ne(ei),Hi===r&&(Hi=null),ne(Nn)}var Nn=q(0);function Of(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Op(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Vm(r,o,u,v){o=r.memoizedState,u=u(v,o),u=u==null?o:m({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Ym={enqueueSetState:function(r,o,u){r=r._reactInternals;var v=Hr(),C=uo(v);C.payload=o,u!=null&&(C.callback=u),o=co(r,C,v),o!==null&&(Gr(o,r,v),Iu(o,r,v))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var v=Hr(),C=uo(v);C.tag=1,C.payload=o,u!=null&&(C.callback=u),o=co(r,C,v),o!==null&&(Gr(o,r,v),Iu(o,r,v))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Hr(),v=uo(u);v.tag=2,o!=null&&(v.callback=o),o=co(r,v,u),o!==null&&(Gr(o,r,u),Iu(o,r,u))}};function d1(r,o,u,v,C,M,Z){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(v,M,Z):o.prototype&&o.prototype.isPureReactComponent?!dr(u,v)||!dr(C,M):!0}function m1(r,o,u,v){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,v),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,v),o.state!==r&&Ym.enqueueReplaceState(o,o.state,null)}function _s(r,o){var u=o;if("ref"in o){u={};for(var v in o)v!=="ref"&&(u[v]=o[v])}if(r=r.defaultProps){u===o&&(u=m({},u));for(var C in r)u[C]===void 0&&(u[C]=r[C])}return u}var jf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function p1(r){jf(r)}function g1(r){console.error(r)}function v1(r){jf(r)}function Pf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(v){setTimeout(function(){throw v})}}function y1(r,o,u){try{var v=r.onCaughtError;v(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Xm(r,o,u){return u=uo(u),u.tag=3,u.payload={element:null},u.callback=function(){Pf(r,o)},u}function _1(r){return r=uo(r),r.tag=3,r}function x1(r,o,u,v){var C=u.type.getDerivedStateFromError;if(typeof C=="function"){var M=v.value;r.payload=function(){return C(M)},r.callback=function(){y1(o,u,v)}}var Z=u.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(r.callback=function(){y1(o,u,v),typeof C!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var J=v.stack;this.componentDidCatch(v.value,{componentStack:J!==null?J:""})})}function rS(r,o,u,v,C){if(u.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(o=u.alternate,o!==null&&ps(o,u,C,!0),u=ei.current,u!==null){switch(u.tag){case 13:return Hi===null?xp():u.alternate===null&&fn===0&&(fn=3),u.flags&=-257,u.flags|=65536,u.lanes=C,v===Sm?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([v]):o.add(v),wp(r,v,C)),!1;case 22:return u.flags|=65536,v===Sm?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([v])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([v]):u.add(v)),wp(r,v,C)),!1}throw Error(i(435,u.tag))}return wp(r,v,C),xp(),!1}if(pt)return o=ei.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=C,v!==Fn&&(r=Error(i(422),{cause:v}),so(mr(r,u)))):(v!==Fn&&(o=Error(i(423),{cause:v}),so(mr(o,u))),r=r.current.alternate,r.flags|=65536,C&=-C,r.lanes|=C,v=mr(v,u),C=Xm(r.stateNode,v,C),Nm(r,C),fn!==4&&(fn=2)),!1;var M=Error(i(520),{cause:v});if(M=mr(M,u),tc===null?tc=[M]:tc.push(M),fn!==4&&(fn=2),o===null)return!0;v=mr(v,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=C&-C,u.lanes|=r,r=Xm(u.stateNode,v,r),Nm(u,r),!1;case 1:if(o=u.type,M=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(xo===null||!xo.has(M))))return u.flags|=65536,C&=-C,u.lanes|=C,C=_1(C),x1(C,r,u,v),Nm(u,C),!1}u=u.return}while(u!==null);return!1}var b1=Error(i(461)),Bn=!1;function Vn(r,o,u,v){o.child=r===null?f1(o,null,u,v):gl(o,r.child,u,v)}function w1(r,o,u,v,C){u=u.render;var M=o.ref;if("ref"in v){var Z={};for(var J in v)J!=="ref"&&(Z[J]=v[J])}else Z=v;return gs(o),v=Lm(r,o,u,Z,M,C),J=Fm(),r!==null&&!Bn?(Bm(r,o,C),wa(r,o,C)):(pt&&J&&Ge(o),o.flags|=1,Vn(r,o,v,C),o.child)}function D1(r,o,u,v,C){if(r===null){var M=u.type;return typeof M=="function"&&!ol(M)&&M.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=M,E1(r,o,M,v,C)):(r=hs(u.type,null,v,o,o.mode,C),r.ref=o.ref,r.return=o,o.child=r)}if(M=r.child,!ip(r,C)){var Z=M.memoizedProps;if(u=u.compare,u=u!==null?u:dr,u(Z,v)&&r.ref===o.ref)return wa(r,o,C)}return o.flags|=1,r=Qr(M,v),r.ref=o.ref,r.return=o,o.child=r}function E1(r,o,u,v,C){if(r!==null){var M=r.memoizedProps;if(dr(M,v)&&r.ref===o.ref)if(Bn=!1,o.pendingProps=v=M,ip(r,C))(r.flags&131072)!==0&&(Bn=!0);else return o.lanes=r.lanes,wa(r,o,C)}return Wm(r,o,u,v,C)}function S1(r,o,u){var v=o.pendingProps,C=v.children,M=r!==null?r.memoizedState:null;if(v.mode==="hidden"){if((o.flags&128)!==0){if(v=M!==null?M.baseLanes|u:u,r!==null){for(C=o.child=r.child,M=0;C!==null;)M=M|C.lanes|C.childLanes,C=C.sibling;o.childLanes=M&~v}else o.childLanes=0,o.child=null;return C1(r,o,v,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Df(o,M!==null?M.cachePool:null),M!==null?Ev(o,M):Tm(),h1(o);else return o.lanes=o.childLanes=536870912,C1(r,o,M!==null?M.baseLanes|u:u,u)}else M!==null?(Df(o,M.cachePool),Ev(o,M),mo(),o.memoizedState=null):(r!==null&&Df(o,null),Tm(),mo());return Vn(r,o,C,u),o.child}function C1(r,o,u,v){var C=Em();return C=C===null?null:{parent:An._currentValue,pool:C},o.memoizedState={baseLanes:u,cachePool:C},r!==null&&Df(o,null),Tm(),h1(o),r!==null&&ps(r,o,v,!0),null}function If(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Wm(r,o,u,v,C){return gs(o),u=Lm(r,o,u,v,void 0,C),v=Fm(),r!==null&&!Bn?(Bm(r,o,C),wa(r,o,C)):(pt&&v&&Ge(o),o.flags|=1,Vn(r,o,u,C),o.child)}function A1(r,o,u,v,C,M){return gs(o),o.updateQueue=null,u=Cv(o,v,u,C),Sv(r),v=Fm(),r!==null&&!Bn?(Bm(r,o,M),wa(r,o,M)):(pt&&v&&Ge(o),o.flags|=1,Vn(r,o,u,M),o.child)}function N1(r,o,u,v,C){if(gs(o),o.stateNode===null){var M=ya,Z=u.contextType;typeof Z=="object"&&Z!==null&&(M=rr(Z)),M=new u(v,M),o.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=Ym,o.stateNode=M,M._reactInternals=o,M=o.stateNode,M.props=v,M.state=o.memoizedState,M.refs={},Cm(o),Z=u.contextType,M.context=typeof Z=="object"&&Z!==null?rr(Z):ya,M.state=o.memoizedState,Z=u.getDerivedStateFromProps,typeof Z=="function"&&(Vm(o,u,Z,v),M.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(Z=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),Z!==M.state&&Ym.enqueueReplaceState(M,M.state,null),Gu(o,v,M,C),Hu(),M.state=o.memoizedState),typeof M.componentDidMount=="function"&&(o.flags|=4194308),v=!0}else if(r===null){M=o.stateNode;var J=o.memoizedProps,he=_s(u,J);M.props=he;var Ce=M.context,Oe=u.contextType;Z=ya,typeof Oe=="object"&&Oe!==null&&(Z=rr(Oe));var He=u.getDerivedStateFromProps;Oe=typeof He=="function"||typeof M.getSnapshotBeforeUpdate=="function",J=o.pendingProps!==J,Oe||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(J||Ce!==Z)&&m1(o,M,v,Z),lo=!1;var Ae=o.memoizedState;M.state=Ae,Gu(o,v,M,C),Hu(),Ce=o.memoizedState,J||Ae!==Ce||lo?(typeof He=="function"&&(Vm(o,u,He,v),Ce=o.memoizedState),(he=lo||d1(o,u,he,v,Ae,Ce,Z))?(Oe||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=v,o.memoizedState=Ce),M.props=v,M.state=Ce,M.context=Z,v=he):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),v=!1)}else{M=o.stateNode,Am(r,o),Z=o.memoizedProps,Oe=_s(u,Z),M.props=Oe,He=o.pendingProps,Ae=M.context,Ce=u.contextType,he=ya,typeof Ce=="object"&&Ce!==null&&(he=rr(Ce)),J=u.getDerivedStateFromProps,(Ce=typeof J=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Z!==He||Ae!==he)&&m1(o,M,v,he),lo=!1,Ae=o.memoizedState,M.state=Ae,Gu(o,v,M,C),Hu();var Ne=o.memoizedState;Z!==He||Ae!==Ne||lo||r!==null&&r.dependencies!==null&&bf(r.dependencies)?(typeof J=="function"&&(Vm(o,u,J,v),Ne=o.memoizedState),(Oe=lo||d1(o,u,Oe,v,Ae,Ne,he)||r!==null&&r.dependencies!==null&&bf(r.dependencies))?(Ce||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(v,Ne,he),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(v,Ne,he)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||Z===r.memoizedProps&&Ae===r.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Z===r.memoizedProps&&Ae===r.memoizedState||(o.flags|=1024),o.memoizedProps=v,o.memoizedState=Ne),M.props=v,M.state=Ne,M.context=he,v=Oe):(typeof M.componentDidUpdate!="function"||Z===r.memoizedProps&&Ae===r.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Z===r.memoizedProps&&Ae===r.memoizedState||(o.flags|=1024),v=!1)}return M=v,If(r,o),v=(o.flags&128)!==0,M||v?(M=o.stateNode,u=v&&typeof u.getDerivedStateFromError!="function"?null:M.render(),o.flags|=1,r!==null&&v?(o.child=gl(o,r.child,null,C),o.child=gl(o,null,u,C)):Vn(r,o,u,C),o.memoizedState=M.state,r=o.child):r=wa(r,o,C),r}function M1(r,o,u,v){return oo(),o.flags|=256,Vn(r,o,u,v),o.child}var Qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jm(r){return{baseLanes:r,cachePool:gv()}}function ep(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=ti),r}function T1(r,o,u){var v=o.pendingProps,C=!1,M=(o.flags&128)!==0,Z;if((Z=M)||(Z=r!==null&&r.memoizedState===null?!1:(Nn.current&2)!==0),Z&&(C=!0,o.flags&=-129),Z=(o.flags&32)!==0,o.flags&=-33,r===null){if(pt){if(C?ho(o):mo(),pt){var J=nt,he;if(he=J){e:{for(he=J,J=sn;he.nodeType!==8;){if(!J){J=null;break e}if(he=yi(he.nextSibling),he===null){J=null;break e}}J=he}J!==null?(o.memoizedState={dehydrated:J,treeContext:P!==null?{id:Y,overflow:fe}:null,retryLane:536870912,hydrationErrors:null},he=gr(18,null,null,0),he.stateNode=J,he.return=o,o.child=he,Qe=o,nt=null,he=!0):he=!1}he||br(o)}if(J=o.memoizedState,J!==null&&(J=J.dehydrated,J!==null))return Op(J)?o.lanes=32:o.lanes=536870912,null;ba(o)}return J=v.children,v=v.fallback,C?(mo(),C=o.mode,J=Hf({mode:"hidden",children:J},C),v=Pi(v,C,u,null),J.return=o,v.return=o,J.sibling=v,o.child=J,C=o.child,C.memoizedState=Jm(u),C.childLanes=ep(r,Z,u),o.memoizedState=Qm,v):(ho(o),tp(o,J))}if(he=r.memoizedState,he!==null&&(J=he.dehydrated,J!==null)){if(M)o.flags&256?(ho(o),o.flags&=-257,o=np(r,o,u)):o.memoizedState!==null?(mo(),o.child=r.child,o.flags|=128,o=null):(mo(),C=v.fallback,J=o.mode,v=Hf({mode:"visible",children:v.children},J),C=Pi(C,J,u,null),C.flags|=2,v.return=o,C.return=o,v.sibling=C,o.child=v,gl(o,r.child,null,u),v=o.child,v.memoizedState=Jm(u),v.childLanes=ep(r,Z,u),o.memoizedState=Qm,o=C);else if(ho(o),Op(J)){if(Z=J.nextSibling&&J.nextSibling.dataset,Z)var Ce=Z.dgst;Z=Ce,v=Error(i(419)),v.stack="",v.digest=Z,so({value:v,source:null,stack:null}),o=np(r,o,u)}else if(Bn||ps(r,o,u,!1),Z=(u&r.childLanes)!==0,Bn||Z){if(Z=Yt,Z!==null&&(v=u&-u,v=(v&42)!==0?1:qo(v),v=(v&(Z.suspendedLanes|u))!==0?0:v,v!==0&&v!==he.retryLane))throw he.retryLane=v,io(r,v),Gr(Z,r,v),b1;J.data==="$?"||xp(),o=np(r,o,u)}else J.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=he.treeContext,nt=yi(J.nextSibling),Qe=o,pt=!0,Vt=null,sn=!1,r!==null&&(S[z++]=Y,S[z++]=fe,S[z++]=P,Y=r.id,fe=r.overflow,P=o),o=tp(o,v.children),o.flags|=4096);return o}return C?(mo(),C=v.fallback,J=o.mode,he=r.child,Ce=he.sibling,v=Qr(he,{mode:"hidden",children:v.children}),v.subtreeFlags=he.subtreeFlags&65011712,Ce!==null?C=Qr(Ce,C):(C=Pi(C,J,u,null),C.flags|=2),C.return=o,v.return=o,v.sibling=C,o.child=v,v=C,C=o.child,J=r.child.memoizedState,J===null?J=Jm(u):(he=J.cachePool,he!==null?(Ce=An._currentValue,he=he.parent!==Ce?{parent:Ce,pool:Ce}:he):he=gv(),J={baseLanes:J.baseLanes|u,cachePool:he}),C.memoizedState=J,C.childLanes=ep(r,Z,u),o.memoizedState=Qm,v):(ho(o),u=r.child,r=u.sibling,u=Qr(u,{mode:"visible",children:v.children}),u.return=o,u.sibling=null,r!==null&&(Z=o.deletions,Z===null?(o.deletions=[r],o.flags|=16):Z.push(r)),o.child=u,o.memoizedState=null,u)}function tp(r,o){return o=Hf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Hf(r,o){return r=gr(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function np(r,o,u){return gl(o,r.child,null,u),r=tp(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function k1(r,o,u){r.lanes|=o;var v=r.alternate;v!==null&&(v.lanes|=o),ms(r.return,o,u)}function rp(r,o,u,v,C){var M=r.memoizedState;M===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:v,tail:u,tailMode:C}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=v,M.tail=u,M.tailMode=C)}function z1(r,o,u){var v=o.pendingProps,C=v.revealOrder,M=v.tail;if(Vn(r,o,v.children,u),v=Nn.current,(v&2)!==0)v=v&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&k1(r,u,o);else if(r.tag===19)k1(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}v&=1}switch(se(Nn,v),C){case"forwards":for(u=o.child,C=null;u!==null;)r=u.alternate,r!==null&&Of(r)===null&&(C=u),u=u.sibling;u=C,u===null?(C=o.child,o.child=null):(C=u.sibling,u.sibling=null),rp(o,!1,C,u,M);break;case"backwards":for(u=null,C=o.child,o.child=null;C!==null;){if(r=C.alternate,r!==null&&Of(r)===null){o.child=C;break}r=C.sibling,C.sibling=u,u=C,C=r}rp(o,!0,u,null,M);break;case"together":rp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function wa(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),_o|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(ps(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Qr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Qr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function ip(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&bf(r)))}function iS(r,o,u){switch(o.tag){case 3:ke(o,o.stateNode.containerInfo),Ii(o,An,r.memoizedState.cache),oo();break;case 27:case 5:Ze(o);break;case 4:ke(o,o.stateNode.containerInfo);break;case 10:Ii(o,o.type,o.memoizedProps.value);break;case 13:var v=o.memoizedState;if(v!==null)return v.dehydrated!==null?(ho(o),o.flags|=128,null):(u&o.child.childLanes)!==0?T1(r,o,u):(ho(o),r=wa(r,o,u),r!==null?r.sibling:null);ho(o);break;case 19:var C=(r.flags&128)!==0;if(v=(u&o.childLanes)!==0,v||(ps(r,o,u,!1),v=(u&o.childLanes)!==0),C){if(v)return z1(r,o,u);o.flags|=128}if(C=o.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),se(Nn,Nn.current),v)break;return null;case 22:case 23:return o.lanes=0,S1(r,o,u);case 24:Ii(o,An,r.memoizedState.cache)}return wa(r,o,u)}function L1(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)Bn=!0;else{if(!ip(r,u)&&(o.flags&128)===0)return Bn=!1,iS(r,o,u);Bn=(r.flags&131072)!==0}else Bn=!1,pt&&(o.flags&1048576)!==0&&Me(o,p,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var v=o.elementType,C=v._init;if(v=C(v._payload),o.type=v,typeof v=="function")ol(v)?(r=_s(v,r),o.tag=1,o=N1(null,o,v,r,u)):(o.tag=0,o=Wm(null,o,v,r,u));else{if(v!=null){if(C=v.$$typeof,C===F){o.tag=11,o=w1(null,o,v,r,u);break e}else if(C===R){o.tag=14,o=D1(null,o,v,r,u);break e}}throw o=B(v)||v,Error(i(306,o,""))}}return o;case 0:return Wm(r,o,o.type,o.pendingProps,u);case 1:return v=o.type,C=_s(v,o.pendingProps),N1(r,o,v,C,u);case 3:e:{if(ke(o,o.stateNode.containerInfo),r===null)throw Error(i(387));v=o.pendingProps;var M=o.memoizedState;C=M.element,Am(r,o),Gu(o,v,null,u);var Z=o.memoizedState;if(v=Z.cache,Ii(o,An,v),v!==M.cache&&ll(o,[An],u,!0),Hu(),v=Z.element,M.isDehydrated)if(M={element:v,isDehydrated:!1,cache:Z.cache},o.updateQueue.baseState=M,o.memoizedState=M,o.flags&256){o=M1(r,o,v,u);break e}else if(v!==C){C=mr(Error(i(424)),o),so(C),o=M1(r,o,v,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(nt=yi(r.firstChild),Qe=o,pt=!0,Vt=null,sn=!0,u=f1(o,null,v,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(oo(),v===C){o=wa(r,o,u);break e}Vn(r,o,v,u)}o=o.child}return o;case 26:return If(r,o),r===null?(u=Oy(o.type,null,o.pendingProps,null))?o.memoizedState=u:pt||(u=o.type,r=o.pendingProps,v=th(_e.current).createElement(u),v[xn]=o,v[kn]=r,Xn(v,u,r),un(v),o.stateNode=v):o.memoizedState=Oy(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Ze(o),r===null&&pt&&(v=o.stateNode=Fy(o.type,o.pendingProps,_e.current),Qe=o,sn=!0,C=nt,Do(o.type)?(jp=C,nt=yi(v.firstChild)):nt=C),Vn(r,o,o.pendingProps.children,u),If(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&pt&&((C=v=nt)&&(v=zS(v,o.type,o.pendingProps,sn),v!==null?(o.stateNode=v,Qe=o,nt=yi(v.firstChild),sn=!1,C=!0):C=!1),C||br(o)),Ze(o),C=o.type,M=o.pendingProps,Z=r!==null?r.memoizedProps:null,v=M.children,Fp(C,M)?v=null:Z!==null&&Fp(C,Z)&&(o.flags|=32),o.memoizedState!==null&&(C=Lm(r,o,XE,null,null,u),cc._currentValue=C),If(r,o),Vn(r,o,v,u),o.child;case 6:return r===null&&pt&&((r=u=nt)&&(u=LS(u,o.pendingProps,sn),u!==null?(o.stateNode=u,Qe=o,nt=null,r=!0):r=!1),r||br(o)),null;case 13:return T1(r,o,u);case 4:return ke(o,o.stateNode.containerInfo),v=o.pendingProps,r===null?o.child=gl(o,null,v,u):Vn(r,o,v,u),o.child;case 11:return w1(r,o,o.type,o.pendingProps,u);case 7:return Vn(r,o,o.pendingProps,u),o.child;case 8:return Vn(r,o,o.pendingProps.children,u),o.child;case 12:return Vn(r,o,o.pendingProps.children,u),o.child;case 10:return v=o.pendingProps,Ii(o,o.type,v.value),Vn(r,o,v.children,u),o.child;case 9:return C=o.type._context,v=o.pendingProps.children,gs(o),C=rr(C),v=v(C),o.flags|=1,Vn(r,o,v,u),o.child;case 14:return D1(r,o,o.type,o.pendingProps,u);case 15:return E1(r,o,o.type,o.pendingProps,u);case 19:return z1(r,o,u);case 31:return v=o.pendingProps,u=o.mode,v={mode:v.mode,children:v.children},r===null?(u=Hf(v,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=Qr(r.child,v),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return S1(r,o,u);case 24:return gs(o),v=rr(An),r===null?(C=Em(),C===null&&(C=Yt,M=wm(),C.pooledCache=M,M.refCount++,M!==null&&(C.pooledCacheLanes|=u),C=M),o.memoizedState={parent:v,cache:C},Cm(o),Ii(o,An,C)):((r.lanes&u)!==0&&(Am(r,o),Gu(o,null,null,u),Hu()),C=r.memoizedState,M=o.memoizedState,C.parent!==v?(C={parent:v,cache:v},o.memoizedState=C,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=C),Ii(o,An,v)):(v=M.cache,Ii(o,An,v),v!==C.cache&&ll(o,[An],u,!0))),Vn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Da(r){r.flags|=4}function F1(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Gy(o)){if(o=ei.current,o!==null&&((Ft&4194048)===Ft?Hi!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||o!==Hi))throw Pu=Sm,vv;r.flags|=8192}}function Gf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Sn():536870912,r.lanes|=o,xl|=o)}function Yu(r,o){if(!pt)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:v.sibling=null}}function ln(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,v=0;if(o)for(var C=r.child;C!==null;)u|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=r,C=C.sibling;else for(C=r.child;C!==null;)u|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=r,C=C.sibling;return r.subtreeFlags|=v,r.childLanes=u,o}function aS(r,o,u){var v=o.pendingProps;switch(Ve(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(o),null;case 1:return ln(o),null;case 3:return u=o.stateNode,v=null,r!==null&&(v=r.memoizedState.cache),o.memoizedState.cache!==v&&(o.flags|=2048),gi(An),Ie(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(ds(o)?Da(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xf())),ln(o),null;case 26:return u=o.memoizedState,r===null?(Da(o),u!==null?(ln(o),F1(o,u)):(ln(o),o.flags&=-16777217)):u?u!==r.memoizedState?(Da(o),ln(o),F1(o,u)):(ln(o),o.flags&=-16777217):(r.memoizedProps!==v&&Da(o),ln(o),o.flags&=-16777217),null;case 27:Xe(o),u=_e.current;var C=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==v&&Da(o);else{if(!v){if(o.stateNode===null)throw Error(i(166));return ln(o),null}r=ce.current,ds(o)?yf(o):(r=Fy(C,v,u),o.stateNode=r,Da(o))}return ln(o),null;case 5:if(Xe(o),u=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==v&&Da(o);else{if(!v){if(o.stateNode===null)throw Error(i(166));return ln(o),null}if(r=ce.current,ds(o))yf(o);else{switch(C=th(_e.current),r){case 1:r=C.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:r=C.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":r=C.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":r=C.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":r=C.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof v.is=="string"?C.createElement("select",{is:v.is}):C.createElement("select"),v.multiple?r.multiple=!0:v.size&&(r.size=v.size);break;default:r=typeof v.is=="string"?C.createElement(u,{is:v.is}):C.createElement(u)}}r[xn]=o,r[kn]=v;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)r.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=r;e:switch(Xn(r,u,v),u){case"button":case"input":case"select":case"textarea":r=!!v.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Da(o)}}return ln(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==v&&Da(o);else{if(typeof v!="string"&&o.stateNode===null)throw Error(i(166));if(r=_e.current,ds(o)){if(r=o.stateNode,u=o.memoizedProps,v=null,C=Qe,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}r[xn]=o,r=!!(r.nodeValue===u||v!==null&&v.suppressHydrationWarning===!0||Ay(r.nodeValue,u)),r||br(o)}else r=th(r).createTextNode(v),r[xn]=o,o.stateNode=r}return ln(o),null;case 13:if(v=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(C=ds(o),v!==null&&v.dehydrated!==null){if(r===null){if(!C)throw Error(i(318));if(C=o.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[xn]=o}else oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ln(o),C=!1}else C=xf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=C),C=!0;if(!C)return o.flags&256?(ba(o),o):(ba(o),null)}if(ba(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=v!==null,r=r!==null&&r.memoizedState!==null,u){v=o.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool);var M=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(M=v.memoizedState.cachePool.pool),M!==C&&(v.flags|=2048)}return u!==r&&u&&(o.child.flags|=8192),Gf(o,o.updateQueue),ln(o),null;case 4:return Ie(),r===null&&Mp(o.stateNode.containerInfo),ln(o),null;case 10:return gi(o.type),ln(o),null;case 19:if(ne(Nn),C=o.memoizedState,C===null)return ln(o),null;if(v=(o.flags&128)!==0,M=C.rendering,M===null)if(v)Yu(C,!1);else{if(fn!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(M=Of(r),M!==null){for(o.flags|=128,Yu(C,!1),r=M.updateQueue,o.updateQueue=r,Gf(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)Fu(u,r),u=u.sibling;return se(Nn,Nn.current&1|2),o.child}r=r.sibling}C.tail!==null&&ae()>Zf&&(o.flags|=128,v=!0,Yu(C,!1),o.lanes=4194304)}else{if(!v)if(r=Of(M),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,Gf(o,r),Yu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!M.alternate&&!pt)return ln(o),null}else 2*ae()-C.renderingStartTime>Zf&&u!==536870912&&(o.flags|=128,v=!0,Yu(C,!1),o.lanes=4194304);C.isBackwards?(M.sibling=o.child,o.child=M):(r=C.last,r!==null?r.sibling=M:o.child=M,C.last=M)}return C.tail!==null?(o=C.tail,C.rendering=o,C.tail=o.sibling,C.renderingStartTime=ae(),o.sibling=null,r=Nn.current,se(Nn,v?r&1|2:r&1),o):(ln(o),null);case 22:case 23:return ba(o),km(),v=o.memoizedState!==null,r!==null?r.memoizedState!==null!==v&&(o.flags|=8192):v&&(o.flags|=8192),v?(u&536870912)!==0&&(o.flags&128)===0&&(ln(o),o.subtreeFlags&6&&(o.flags|=8192)):ln(o),u=o.updateQueue,u!==null&&Gf(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),v=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(v=o.memoizedState.cachePool.pool),v!==u&&(o.flags|=2048),r!==null&&ne(vs),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),gi(An),ln(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function oS(r,o){switch(Ve(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return gi(An),Ie(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Xe(o),null;case 13:if(ba(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));oo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ne(Nn),null;case 4:return Ie(),null;case 10:return gi(o.type),null;case 22:case 23:return ba(o),km(),r!==null&&ne(vs),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return gi(An),null;case 25:return null;default:return null}}function B1(r,o){switch(Ve(o),o.tag){case 3:gi(An),Ie();break;case 26:case 27:case 5:Xe(o);break;case 4:Ie();break;case 13:ba(o);break;case 19:ne(Nn);break;case 10:gi(o.type);break;case 22:case 23:ba(o),km(),r!==null&&ne(vs);break;case 24:gi(An)}}function Xu(r,o){try{var u=o.updateQueue,v=u!==null?u.lastEffect:null;if(v!==null){var C=v.next;u=C;do{if((u.tag&r)===r){v=void 0;var M=u.create,Z=u.inst;v=M(),Z.destroy=v}u=u.next}while(u!==C)}}catch(J){$t(o,o.return,J)}}function po(r,o,u){try{var v=o.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var M=C.next;v=M;do{if((v.tag&r)===r){var Z=v.inst,J=Z.destroy;if(J!==void 0){Z.destroy=void 0,C=o;var he=u,Ce=J;try{Ce()}catch(Oe){$t(C,he,Oe)}}}v=v.next}while(v!==M)}}catch(Oe){$t(o,o.return,Oe)}}function R1(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{Dv(o,u)}catch(v){$t(r,r.return,v)}}}function O1(r,o,u){u.props=_s(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(v){$t(r,o,v)}}function Wu(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var v=r.stateNode;break;case 30:v=r.stateNode;break;default:v=r.stateNode}typeof u=="function"?r.refCleanup=u(v):u.current=v}}catch(C){$t(r,o,C)}}function Gi(r,o){var u=r.ref,v=r.refCleanup;if(u!==null)if(typeof v=="function")try{v()}catch(C){$t(r,o,C)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(C){$t(r,o,C)}else u.current=null}function j1(r){var o=r.type,u=r.memoizedProps,v=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&v.focus();break e;case"img":u.src?v.src=u.src:u.srcSet&&(v.srcset=u.srcSet)}}catch(C){$t(r,r.return,C)}}function ap(r,o,u){try{var v=r.stateNode;AS(v,r.type,u,o),v[kn]=o}catch(C){$t(r,r.return,C)}}function P1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Do(r.type)||r.tag===4}function op(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||P1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Do(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function sp(r,o,u){var v=r.tag;if(v===5||v===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=eh));else if(v!==4&&(v===27&&Do(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(sp(r,o,u),r=r.sibling;r!==null;)sp(r,o,u),r=r.sibling}function Uf(r,o,u){var v=r.tag;if(v===5||v===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(v!==4&&(v===27&&Do(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Uf(r,o,u),r=r.sibling;r!==null;)Uf(r,o,u),r=r.sibling}function I1(r){var o=r.stateNode,u=r.memoizedProps;try{for(var v=r.type,C=o.attributes;C.length;)o.removeAttributeNode(C[0]);Xn(o,v,u),o[xn]=r,o[kn]=u}catch(M){$t(r,r.return,M)}}var Ea=!1,pn=!1,lp=!1,H1=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function sS(r,o){if(r=r.containerInfo,zp=sh,r=os(r),ss(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var v=u.getSelection&&u.getSelection();if(v&&v.rangeCount!==0){u=v.anchorNode;var C=v.anchorOffset,M=v.focusNode;v=v.focusOffset;try{u.nodeType,M.nodeType}catch{u=null;break e}var Z=0,J=-1,he=-1,Ce=0,Oe=0,He=r,Ae=null;t:for(;;){for(var Ne;He!==u||C!==0&&He.nodeType!==3||(J=Z+C),He!==M||v!==0&&He.nodeType!==3||(he=Z+v),He.nodeType===3&&(Z+=He.nodeValue.length),(Ne=He.firstChild)!==null;)Ae=He,He=Ne;for(;;){if(He===r)break t;if(Ae===u&&++Ce===C&&(J=Z),Ae===M&&++Oe===v&&(he=Z),(Ne=He.nextSibling)!==null)break;He=Ae,Ae=He.parentNode}He=Ne}u=J===-1||he===-1?null:{start:J,end:he}}else u=null}u=u||{start:0,end:0}}else u=null;for(Lp={focusedElem:r,selectionRange:u},sh=!1,Rn=o;Rn!==null;)if(o=Rn,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,Rn=r;else for(;Rn!==null;){switch(o=Rn,M=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&M!==null){r=void 0,u=o,C=M.memoizedProps,M=M.memoizedState,v=u.stateNode;try{var mt=_s(u.type,C,u.elementType===u.type);r=v.getSnapshotBeforeUpdate(mt,M),v.__reactInternalSnapshotBeforeUpdate=r}catch(ut){$t(u,u.return,ut)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)Rp(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Rp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Rn=r;break}Rn=o.return}}function G1(r,o,u){var v=u.flags;switch(u.tag){case 0:case 11:case 15:go(r,u),v&4&&Xu(5,u);break;case 1:if(go(r,u),v&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(Z){$t(u,u.return,Z)}else{var C=_s(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(C,o,r.__reactInternalSnapshotBeforeUpdate)}catch(Z){$t(u,u.return,Z)}}v&64&&R1(u),v&512&&Wu(u,u.return);break;case 3:if(go(r,u),v&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Dv(r,o)}catch(Z){$t(u,u.return,Z)}}break;case 27:o===null&&v&4&&I1(u);case 26:case 5:go(r,u),o===null&&v&4&&j1(u),v&512&&Wu(u,u.return);break;case 12:go(r,u);break;case 13:go(r,u),v&4&&Z1(r,u),v&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=gS.bind(null,u),FS(r,u))));break;case 22:if(v=u.memoizedState!==null||Ea,!v){o=o!==null&&o.memoizedState!==null||pn,C=Ea;var M=pn;Ea=v,(pn=o)&&!M?vo(r,u,(u.subtreeFlags&8772)!==0):go(r,u),Ea=C,pn=M}break;case 30:break;default:go(r,u)}}function U1(r){var o=r.alternate;o!==null&&(r.alternate=null,U1(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&ja(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var rn=null,Dr=!1;function Sa(r,o,u){for(u=u.child;u!==null;)$1(r,o,u),u=u.sibling}function $1(r,o,u){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(me,u)}catch{}switch(u.tag){case 26:pn||Gi(u,o),Sa(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:pn||Gi(u,o);var v=rn,C=Dr;Do(u.type)&&(rn=u.stateNode,Dr=!1),Sa(r,o,u),oc(u.stateNode),rn=v,Dr=C;break;case 5:pn||Gi(u,o);case 6:if(v=rn,C=Dr,rn=null,Sa(r,o,u),rn=v,Dr=C,rn!==null)if(Dr)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(u.stateNode)}catch(M){$t(u,o,M)}else try{rn.removeChild(u.stateNode)}catch(M){$t(u,o,M)}break;case 18:rn!==null&&(Dr?(r=rn,zy(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),mc(r)):zy(rn,u.stateNode));break;case 4:v=rn,C=Dr,rn=u.stateNode.containerInfo,Dr=!0,Sa(r,o,u),rn=v,Dr=C;break;case 0:case 11:case 14:case 15:pn||po(2,u,o),pn||po(4,u,o),Sa(r,o,u);break;case 1:pn||(Gi(u,o),v=u.stateNode,typeof v.componentWillUnmount=="function"&&O1(u,o,v)),Sa(r,o,u);break;case 21:Sa(r,o,u);break;case 22:pn=(v=pn)||u.memoizedState!==null,Sa(r,o,u),pn=v;break;default:Sa(r,o,u)}}function Z1(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{mc(r)}catch(u){$t(o,o.return,u)}}function lS(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new H1),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new H1),o;default:throw Error(i(435,r.tag))}}function up(r,o){var u=lS(r);o.forEach(function(v){var C=vS.bind(null,r,v);u.has(v)||(u.add(v),v.then(C,C))})}function jr(r,o){var u=o.deletions;if(u!==null)for(var v=0;v<u.length;v++){var C=u[v],M=r,Z=o,J=Z;e:for(;J!==null;){switch(J.tag){case 27:if(Do(J.type)){rn=J.stateNode,Dr=!1;break e}break;case 5:rn=J.stateNode,Dr=!1;break e;case 3:case 4:rn=J.stateNode.containerInfo,Dr=!0;break e}J=J.return}if(rn===null)throw Error(i(160));$1(M,Z,C),rn=null,Dr=!1,M=C.alternate,M!==null&&(M.return=null),C.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)K1(o,r),o=o.sibling}var vi=null;function K1(r,o){var u=r.alternate,v=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:jr(o,r),Pr(r),v&4&&(po(3,r,r.return),Xu(3,r),po(5,r,r.return));break;case 1:jr(o,r),Pr(r),v&512&&(pn||u===null||Gi(u,u.return)),v&64&&Ea&&(r=r.updateQueue,r!==null&&(v=r.callbacks,v!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?v:u.concat(v))));break;case 26:var C=vi;if(jr(o,r),Pr(r),v&512&&(pn||u===null||Gi(u,u.return)),v&4){var M=u!==null?u.memoizedState:null;if(v=r.memoizedState,u===null)if(v===null)if(r.stateNode===null){e:{v=r.type,u=r.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":M=C.getElementsByTagName("title")[0],(!M||M[Li]||M[xn]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=C.createElement(v),C.head.insertBefore(M,C.querySelector("head > title"))),Xn(M,v,u),M[xn]=r,un(M),v=M;break e;case"link":var Z=Iy("link","href",C).get(v+(u.href||""));if(Z){for(var J=0;J<Z.length;J++)if(M=Z[J],M.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&M.getAttribute("rel")===(u.rel==null?null:u.rel)&&M.getAttribute("title")===(u.title==null?null:u.title)&&M.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){Z.splice(J,1);break t}}M=C.createElement(v),Xn(M,v,u),C.head.appendChild(M);break;case"meta":if(Z=Iy("meta","content",C).get(v+(u.content||""))){for(J=0;J<Z.length;J++)if(M=Z[J],M.getAttribute("content")===(u.content==null?null:""+u.content)&&M.getAttribute("name")===(u.name==null?null:u.name)&&M.getAttribute("property")===(u.property==null?null:u.property)&&M.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&M.getAttribute("charset")===(u.charSet==null?null:u.charSet)){Z.splice(J,1);break t}}M=C.createElement(v),Xn(M,v,u),C.head.appendChild(M);break;default:throw Error(i(468,v))}M[xn]=r,un(M),v=M}r.stateNode=v}else Hy(C,r.type,r.stateNode);else r.stateNode=Py(C,v,r.memoizedProps);else M!==v?(M===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):M.count--,v===null?Hy(C,r.type,r.stateNode):Py(C,v,r.memoizedProps)):v===null&&r.stateNode!==null&&ap(r,r.memoizedProps,u.memoizedProps)}break;case 27:jr(o,r),Pr(r),v&512&&(pn||u===null||Gi(u,u.return)),u!==null&&v&4&&ap(r,r.memoizedProps,u.memoizedProps);break;case 5:if(jr(o,r),Pr(r),v&512&&(pn||u===null||Gi(u,u.return)),r.flags&32){C=r.stateNode;try{qr(C,"")}catch(Ne){$t(r,r.return,Ne)}}v&4&&r.stateNode!=null&&(C=r.memoizedProps,ap(r,C,u!==null?u.memoizedProps:C)),v&1024&&(lp=!0);break;case 6:if(jr(o,r),Pr(r),v&4){if(r.stateNode===null)throw Error(i(162));v=r.memoizedProps,u=r.stateNode;try{u.nodeValue=v}catch(Ne){$t(r,r.return,Ne)}}break;case 3:if(ih=null,C=vi,vi=nh(o.containerInfo),jr(o,r),vi=C,Pr(r),v&4&&u!==null&&u.memoizedState.isDehydrated)try{mc(o.containerInfo)}catch(Ne){$t(r,r.return,Ne)}lp&&(lp=!1,q1(r));break;case 4:v=vi,vi=nh(r.stateNode.containerInfo),jr(o,r),Pr(r),vi=v;break;case 12:jr(o,r),Pr(r);break;case 13:jr(o,r),Pr(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(pp=ae()),v&4&&(v=r.updateQueue,v!==null&&(r.updateQueue=null,up(r,v)));break;case 22:C=r.memoizedState!==null;var he=u!==null&&u.memoizedState!==null,Ce=Ea,Oe=pn;if(Ea=Ce||C,pn=Oe||he,jr(o,r),pn=Oe,Ea=Ce,Pr(r),v&8192)e:for(o=r.stateNode,o._visibility=C?o._visibility&-2:o._visibility|1,C&&(u===null||he||Ea||pn||xs(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){he=u=o;try{if(M=he.stateNode,C)Z=M.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{J=he.stateNode;var He=he.memoizedProps.style,Ae=He!=null&&He.hasOwnProperty("display")?He.display:null;J.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(Ne){$t(he,he.return,Ne)}}}else if(o.tag===6){if(u===null){he=o;try{he.stateNode.nodeValue=C?"":he.memoizedProps}catch(Ne){$t(he,he.return,Ne)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}v&4&&(v=r.updateQueue,v!==null&&(u=v.retryQueue,u!==null&&(v.retryQueue=null,up(r,u))));break;case 19:jr(o,r),Pr(r),v&4&&(v=r.updateQueue,v!==null&&(r.updateQueue=null,up(r,v)));break;case 30:break;case 21:break;default:jr(o,r),Pr(r)}}function Pr(r){var o=r.flags;if(o&2){try{for(var u,v=r.return;v!==null;){if(P1(v)){u=v;break}v=v.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var C=u.stateNode,M=op(r);Uf(r,M,C);break;case 5:var Z=u.stateNode;u.flags&32&&(qr(Z,""),u.flags&=-33);var J=op(r);Uf(r,J,Z);break;case 3:case 4:var he=u.stateNode.containerInfo,Ce=op(r);sp(r,Ce,he);break;default:throw Error(i(161))}}catch(Oe){$t(r,r.return,Oe)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function q1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;q1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function go(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)G1(r,o.alternate,o),o=o.sibling}function xs(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:po(4,o,o.return),xs(o);break;case 1:Gi(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&O1(o,o.return,u),xs(o);break;case 27:oc(o.stateNode);case 26:case 5:Gi(o,o.return),xs(o);break;case 22:o.memoizedState===null&&xs(o);break;case 30:xs(o);break;default:xs(o)}r=r.sibling}}function vo(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var v=o.alternate,C=r,M=o,Z=M.flags;switch(M.tag){case 0:case 11:case 15:vo(C,M,u),Xu(4,M);break;case 1:if(vo(C,M,u),v=M,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Ce){$t(v,v.return,Ce)}if(v=M,C=v.updateQueue,C!==null){var J=v.stateNode;try{var he=C.shared.hiddenCallbacks;if(he!==null)for(C.shared.hiddenCallbacks=null,C=0;C<he.length;C++)wv(he[C],J)}catch(Ce){$t(v,v.return,Ce)}}u&&Z&64&&R1(M),Wu(M,M.return);break;case 27:I1(M);case 26:case 5:vo(C,M,u),u&&v===null&&Z&4&&j1(M),Wu(M,M.return);break;case 12:vo(C,M,u);break;case 13:vo(C,M,u),u&&Z&4&&Z1(C,M);break;case 22:M.memoizedState===null&&vo(C,M,u),Wu(M,M.return);break;case 30:break;default:vo(C,M,u)}o=o.sibling}}function cp(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Ru(u))}function fp(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Ru(r))}function Ui(r,o,u,v){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)V1(r,o,u,v),o=o.sibling}function V1(r,o,u,v){var C=o.flags;switch(o.tag){case 0:case 11:case 15:Ui(r,o,u,v),C&2048&&Xu(9,o);break;case 1:Ui(r,o,u,v);break;case 3:Ui(r,o,u,v),C&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Ru(r)));break;case 12:if(C&2048){Ui(r,o,u,v),r=o.stateNode;try{var M=o.memoizedProps,Z=M.id,J=M.onPostCommit;typeof J=="function"&&J(Z,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(he){$t(o,o.return,he)}}else Ui(r,o,u,v);break;case 13:Ui(r,o,u,v);break;case 23:break;case 22:M=o.stateNode,Z=o.alternate,o.memoizedState!==null?M._visibility&2?Ui(r,o,u,v):Qu(r,o):M._visibility&2?Ui(r,o,u,v):(M._visibility|=2,vl(r,o,u,v,(o.subtreeFlags&10256)!==0)),C&2048&&cp(Z,o);break;case 24:Ui(r,o,u,v),C&2048&&fp(o.alternate,o);break;default:Ui(r,o,u,v)}}function vl(r,o,u,v,C){for(C=C&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var M=r,Z=o,J=u,he=v,Ce=Z.flags;switch(Z.tag){case 0:case 11:case 15:vl(M,Z,J,he,C),Xu(8,Z);break;case 23:break;case 22:var Oe=Z.stateNode;Z.memoizedState!==null?Oe._visibility&2?vl(M,Z,J,he,C):Qu(M,Z):(Oe._visibility|=2,vl(M,Z,J,he,C)),C&&Ce&2048&&cp(Z.alternate,Z);break;case 24:vl(M,Z,J,he,C),C&&Ce&2048&&fp(Z.alternate,Z);break;default:vl(M,Z,J,he,C)}o=o.sibling}}function Qu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,v=o,C=v.flags;switch(v.tag){case 22:Qu(u,v),C&2048&&cp(v.alternate,v);break;case 24:Qu(u,v),C&2048&&fp(v.alternate,v);break;default:Qu(u,v)}o=o.sibling}}var Ju=8192;function yl(r){if(r.subtreeFlags&Ju)for(r=r.child;r!==null;)Y1(r),r=r.sibling}function Y1(r){switch(r.tag){case 26:yl(r),r.flags&Ju&&r.memoizedState!==null&&qS(vi,r.memoizedState,r.memoizedProps);break;case 5:yl(r);break;case 3:case 4:var o=vi;vi=nh(r.stateNode.containerInfo),yl(r),vi=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=Ju,Ju=16777216,yl(r),Ju=o):yl(r));break;default:yl(r)}}function X1(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function ec(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var v=o[u];Rn=v,Q1(v,r)}X1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)W1(r),r=r.sibling}function W1(r){switch(r.tag){case 0:case 11:case 15:ec(r),r.flags&2048&&po(9,r,r.return);break;case 3:ec(r);break;case 12:ec(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,$f(r)):ec(r);break;default:ec(r)}}function $f(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var v=o[u];Rn=v,Q1(v,r)}X1(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:po(8,o,o.return),$f(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,$f(o));break;default:$f(o)}r=r.sibling}}function Q1(r,o){for(;Rn!==null;){var u=Rn;switch(u.tag){case 0:case 11:case 15:po(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var v=u.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Ru(u.memoizedState.cache)}if(v=u.child,v!==null)v.return=u,Rn=v;else e:for(u=r;Rn!==null;){v=Rn;var C=v.sibling,M=v.return;if(U1(v),v===u){Rn=null;break e}if(C!==null){C.return=M,Rn=C;break e}Rn=M}}}var uS={getCacheForType:function(r){var o=rr(An),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u}},cS=typeof WeakMap=="function"?WeakMap:Map,jt=0,Yt=null,Mt=null,Ft=0,Pt=0,Ir=null,yo=!1,_l=!1,hp=!1,Ca=0,fn=0,_o=0,bs=0,dp=0,ti=0,xl=0,tc=null,Er=null,mp=!1,pp=0,Zf=1/0,Kf=null,xo=null,Yn=0,bo=null,bl=null,wl=0,gp=0,vp=null,J1=null,nc=0,yp=null;function Hr(){if((jt&2)!==0&&Ft!==0)return Ft&-Ft;if(K.T!==null){var r=ul;return r!==0?r:Sp()}return Gs()}function ey(){ti===0&&(ti=(Ft&536870912)===0||pt?tn():536870912);var r=ei.current;return r!==null&&(r.flags|=32),ti}function Gr(r,o,u){(r===Yt&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)&&(Dl(r,0),wo(r,Ft,ti,!1)),Un(r,u),((jt&2)===0||r!==Yt)&&(r===Yt&&((jt&2)===0&&(bs|=u),fn===4&&wo(r,Ft,ti,!1)),$i(r))}function ty(r,o,u){if((jt&6)!==0)throw Error(i(327));var v=!u&&(o&124)===0&&(o&r.expiredLanes)===0||Nt(r,o),C=v?dS(r,o):bp(r,o,!0),M=v;do{if(C===0){_l&&!v&&wo(r,o,0,!1);break}else{if(u=r.current.alternate,M&&!fS(u)){C=bp(r,o,!1),M=!1;continue}if(C===2){if(M=o,r.errorRecoveryDisabledLanes&M)var Z=0;else Z=r.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){o=Z;e:{var J=r;C=tc;var he=J.current.memoizedState.isDehydrated;if(he&&(Dl(J,Z).flags|=256),Z=bp(J,Z,!1),Z!==2){if(hp&&!he){J.errorRecoveryDisabledLanes|=M,bs|=M,C=4;break e}M=Er,Er=C,M!==null&&(Er===null?Er=M:Er.push.apply(Er,M))}C=Z}if(M=!1,C!==2)continue}}if(C===1){Dl(r,0),wo(r,o,0,!0);break}e:{switch(v=r,M=C,M){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:wo(v,o,ti,!yo);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(C=pp+300-ae(),10<C)){if(wo(v,o,ti,!yo),Et(v,0,!0)!==0)break e;v.timeoutHandle=Ty(ny.bind(null,v,u,Er,Kf,mp,o,ti,bs,xl,yo,M,2,-0,0),C);break e}ny(v,u,Er,Kf,mp,o,ti,bs,xl,yo,M,0,-0,0)}}break}while(!0);$i(r)}function ny(r,o,u,v,C,M,Z,J,he,Ce,Oe,He,Ae,Ne){if(r.timeoutHandle=-1,He=o.subtreeFlags,(He&8192||(He&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:KS},Y1(o),He=VS(),He!==null)){r.cancelPendingCommit=He(uy.bind(null,r,o,M,u,v,C,Z,J,he,Oe,1,Ae,Ne)),wo(r,M,Z,!Ce);return}uy(r,o,M,u,v,C,Z,J,he)}function fS(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var v=0;v<u.length;v++){var C=u[v],M=C.getSnapshot;C=C.value;try{if(!hr(M(),C))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function wo(r,o,u,v){o&=~dp,o&=~bs,r.suspendedLanes|=o,r.pingedLanes&=~o,v&&(r.warmLanes|=o),v=r.expirationTimes;for(var C=o;0<C;){var M=31-Be(C),Z=1<<M;v[M]=-1,C&=~Z}u!==0&&Is(r,u,o)}function qf(){return(jt&6)===0?(rc(0),!1):!0}function _p(){if(Mt!==null){if(Pt===0)var r=Mt.return;else r=Mt,pi=Jr=null,Rm(r),pl=null,qu=0,r=Mt;for(;r!==null;)B1(r.alternate,r),r=r.return;Mt=null}}function Dl(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,MS(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),_p(),Yt=r,Mt=u=Qr(r.current,null),Ft=o,Pt=0,Ir=null,yo=!1,_l=Nt(r,o),hp=!1,xl=ti=dp=bs=_o=fn=0,Er=tc=null,mp=!1,(o&8)!==0&&(o|=o&32);var v=r.entangledLanes;if(v!==0)for(r=r.entanglements,v&=o;0<v;){var C=31-Be(v),M=1<<C;o|=r[C],v&=~M}return Ca=o,us(),u}function ry(r,o){bt=null,K.H=Ff,o===ju||o===Ef?(o=xv(),Pt=3):o===vv?(o=xv(),Pt=4):Pt=o===b1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ir=o,Mt===null&&(fn=1,Pf(r,mr(o,r.current)))}function iy(){var r=K.H;return K.H=Ff,r===null?Ff:r}function ay(){var r=K.A;return K.A=uS,r}function xp(){fn=4,yo||(Ft&4194048)!==Ft&&ei.current!==null||(_l=!0),(_o&134217727)===0&&(bs&134217727)===0||Yt===null||wo(Yt,Ft,ti,!1)}function bp(r,o,u){var v=jt;jt|=2;var C=iy(),M=ay();(Yt!==r||Ft!==o)&&(Kf=null,Dl(r,o)),o=!1;var Z=fn;e:do try{if(Pt!==0&&Mt!==null){var J=Mt,he=Ir;switch(Pt){case 8:_p(),Z=6;break e;case 3:case 2:case 9:case 6:ei.current===null&&(o=!0);var Ce=Pt;if(Pt=0,Ir=null,El(r,J,he,Ce),u&&_l){Z=0;break e}break;default:Ce=Pt,Pt=0,Ir=null,El(r,J,he,Ce)}}hS(),Z=fn;break}catch(Oe){ry(r,Oe)}while(!0);return o&&r.shellSuspendCounter++,pi=Jr=null,jt=v,K.H=C,K.A=M,Mt===null&&(Yt=null,Ft=0,us()),Z}function hS(){for(;Mt!==null;)oy(Mt)}function dS(r,o){var u=jt;jt|=2;var v=iy(),C=ay();Yt!==r||Ft!==o?(Kf=null,Zf=ae()+500,Dl(r,o)):_l=Nt(r,o);e:do try{if(Pt!==0&&Mt!==null){o=Mt;var M=Ir;t:switch(Pt){case 1:Pt=0,Ir=null,El(r,o,M,1);break;case 2:case 9:if(yv(M)){Pt=0,Ir=null,sy(o);break}o=function(){Pt!==2&&Pt!==9||Yt!==r||(Pt=7),$i(r)},M.then(o,o);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:yv(M)?(Pt=0,Ir=null,sy(o)):(Pt=0,Ir=null,El(r,o,M,7));break;case 5:var Z=null;switch(Mt.tag){case 26:Z=Mt.memoizedState;case 5:case 27:var J=Mt;if(!Z||Gy(Z)){Pt=0,Ir=null;var he=J.sibling;if(he!==null)Mt=he;else{var Ce=J.return;Ce!==null?(Mt=Ce,Vf(Ce)):Mt=null}break t}}Pt=0,Ir=null,El(r,o,M,5);break;case 6:Pt=0,Ir=null,El(r,o,M,6);break;case 8:_p(),fn=6;break e;default:throw Error(i(462))}}mS();break}catch(Oe){ry(r,Oe)}while(!0);return pi=Jr=null,K.H=v,K.A=C,jt=u,Mt!==null?0:(Yt=null,Ft=0,us(),fn)}function mS(){for(;Mt!==null&&!Te();)oy(Mt)}function oy(r){var o=L1(r.alternate,r,Ca);r.memoizedProps=r.pendingProps,o===null?Vf(r):Mt=o}function sy(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=A1(u,o,o.pendingProps,o.type,void 0,Ft);break;case 11:o=A1(u,o,o.pendingProps,o.type.render,o.ref,Ft);break;case 5:Rm(o);default:B1(u,o),o=Mt=Fu(o,Ca),o=L1(u,o,Ca)}r.memoizedProps=r.pendingProps,o===null?Vf(r):Mt=o}function El(r,o,u,v){pi=Jr=null,Rm(o),pl=null,qu=0;var C=o.return;try{if(rS(r,C,o,u,Ft)){fn=1,Pf(r,mr(u,r.current)),Mt=null;return}}catch(M){if(C!==null)throw Mt=C,M;fn=1,Pf(r,mr(u,r.current)),Mt=null;return}o.flags&32768?(pt||v===1?r=!0:_l||(Ft&536870912)!==0?r=!1:(yo=r=!0,(v===2||v===9||v===3||v===6)&&(v=ei.current,v!==null&&v.tag===13&&(v.flags|=16384))),ly(o,r)):Vf(o)}function Vf(r){var o=r;do{if((o.flags&32768)!==0){ly(o,yo);return}r=o.return;var u=aS(o.alternate,o,Ca);if(u!==null){Mt=u;return}if(o=o.sibling,o!==null){Mt=o;return}Mt=o=r}while(o!==null);fn===0&&(fn=5)}function ly(r,o){do{var u=oS(r.alternate,r);if(u!==null){u.flags&=32767,Mt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Mt=r;return}Mt=r=u}while(r!==null);fn=6,Mt=null}function uy(r,o,u,v,C,M,Z,J,he){r.cancelPendingCommit=null;do Yf();while(Yn!==0);if((jt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(M=o.lanes|o.childLanes,M|=Or,ki(r,u,M,Z,J,he),r===Yt&&(Mt=Yt=null,Ft=0),bl=o,bo=r,wl=u,gp=M,vp=C,J1=v,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,yS(De,function(){return my(),null})):(r.callbackNode=null,r.callbackPriority=0),v=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||v){v=K.T,K.T=null,C=ee.p,ee.p=2,Z=jt,jt|=4;try{sS(r,o,u)}finally{jt=Z,ee.p=C,K.T=v}}Yn=1,cy(),fy(),hy()}}function cy(){if(Yn===1){Yn=0;var r=bo,o=bl,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=K.T,K.T=null;var v=ee.p;ee.p=2;var C=jt;jt|=4;try{K1(o,r);var M=Lp,Z=os(r.containerInfo),J=M.focusedElem,he=M.selectionRange;if(Z!==J&&J&&J.ownerDocument&&tl(J.ownerDocument.documentElement,J)){if(he!==null&&ss(J)){var Ce=he.start,Oe=he.end;if(Oe===void 0&&(Oe=Ce),"selectionStart"in J)J.selectionStart=Ce,J.selectionEnd=Math.min(Oe,J.value.length);else{var He=J.ownerDocument||document,Ae=He&&He.defaultView||window;if(Ae.getSelection){var Ne=Ae.getSelection(),mt=J.textContent.length,ut=Math.min(he.start,mt),Gt=he.end===void 0?ut:Math.min(he.end,mt);!Ne.extend&&ut>Gt&&(Z=Gt,Gt=ut,ut=Z);var xe=zu(J,ut),ve=zu(J,Gt);if(xe&&ve&&(Ne.rangeCount!==1||Ne.anchorNode!==xe.node||Ne.anchorOffset!==xe.offset||Ne.focusNode!==ve.node||Ne.focusOffset!==ve.offset)){var Ee=He.createRange();Ee.setStart(xe.node,xe.offset),Ne.removeAllRanges(),ut>Gt?(Ne.addRange(Ee),Ne.extend(ve.node,ve.offset)):(Ee.setEnd(ve.node,ve.offset),Ne.addRange(Ee))}}}}for(He=[],Ne=J;Ne=Ne.parentNode;)Ne.nodeType===1&&He.push({element:Ne,left:Ne.scrollLeft,top:Ne.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<He.length;J++){var Pe=He[J];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}sh=!!zp,Lp=zp=null}finally{jt=C,ee.p=v,K.T=u}}r.current=o,Yn=2}}function fy(){if(Yn===2){Yn=0;var r=bo,o=bl,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=K.T,K.T=null;var v=ee.p;ee.p=2;var C=jt;jt|=4;try{G1(r,o.alternate,o)}finally{jt=C,ee.p=v,K.T=u}}Yn=3}}function hy(){if(Yn===4||Yn===3){Yn=0,Se();var r=bo,o=bl,u=wl,v=J1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Yn=5:(Yn=0,bl=bo=null,dy(r,r.pendingLanes));var C=r.pendingLanes;if(C===0&&(xo=null),Vo(u),o=o.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(me,o,void 0,(o.current.flags&128)===128)}catch{}if(v!==null){o=K.T,C=ee.p,ee.p=2,K.T=null;try{for(var M=r.onRecoverableError,Z=0;Z<v.length;Z++){var J=v[Z];M(J.value,{componentStack:J.stack})}}finally{K.T=o,ee.p=C}}(wl&3)!==0&&Yf(),$i(r),C=r.pendingLanes,(u&4194090)!==0&&(C&42)!==0?r===yp?nc++:(nc=0,yp=r):nc=0,rc(0)}}function dy(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Ru(o)))}function Yf(r){return cy(),fy(),hy(),my()}function my(){if(Yn!==5)return!1;var r=bo,o=gp;gp=0;var u=Vo(wl),v=K.T,C=ee.p;try{ee.p=32>u?32:u,K.T=null,u=vp,vp=null;var M=bo,Z=wl;if(Yn=0,bl=bo=null,wl=0,(jt&6)!==0)throw Error(i(331));var J=jt;if(jt|=4,W1(M.current),V1(M,M.current,Z,u),jt=J,rc(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(me,M)}catch{}return!0}finally{ee.p=C,K.T=v,dy(r,o)}}function py(r,o,u){o=mr(u,o),o=Xm(r.stateNode,o,2),r=co(r,o,2),r!==null&&(Un(r,2),$i(r))}function $t(r,o,u){if(r.tag===3)py(r,r,u);else for(;o!==null;){if(o.tag===3){py(o,r,u);break}else if(o.tag===1){var v=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(xo===null||!xo.has(v))){r=mr(u,r),u=_1(2),v=co(o,u,2),v!==null&&(x1(u,v,o,r),Un(v,2),$i(v));break}}o=o.return}}function wp(r,o,u){var v=r.pingCache;if(v===null){v=r.pingCache=new cS;var C=new Set;v.set(o,C)}else C=v.get(o),C===void 0&&(C=new Set,v.set(o,C));C.has(u)||(hp=!0,C.add(u),r=pS.bind(null,r,o,u),o.then(r,r))}function pS(r,o,u){var v=r.pingCache;v!==null&&v.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Yt===r&&(Ft&u)===u&&(fn===4||fn===3&&(Ft&62914560)===Ft&&300>ae()-pp?(jt&2)===0&&Dl(r,0):dp|=u,xl===Ft&&(xl=0)),$i(r)}function gy(r,o){o===0&&(o=Sn()),r=io(r,o),r!==null&&(Un(r,o),$i(r))}function gS(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),gy(r,u)}function vS(r,o){var u=0;switch(r.tag){case 13:var v=r.stateNode,C=r.memoizedState;C!==null&&(u=C.retryLane);break;case 19:v=r.stateNode;break;case 22:v=r.stateNode._retryCache;break;default:throw Error(i(314))}v!==null&&v.delete(o),gy(r,u)}function yS(r,o){return Ke(r,o)}var Xf=null,Sl=null,Dp=!1,Wf=!1,Ep=!1,ws=0;function $i(r){r!==Sl&&r.next===null&&(Sl===null?Xf=Sl=r:Sl=Sl.next=r),Wf=!0,Dp||(Dp=!0,xS())}function rc(r,o){if(!Ep&&Wf){Ep=!0;do for(var u=!1,v=Xf;v!==null;){if(r!==0){var C=v.pendingLanes;if(C===0)var M=0;else{var Z=v.suspendedLanes,J=v.pingedLanes;M=(1<<31-Be(42|r)+1)-1,M&=C&~(Z&~J),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(u=!0,xy(v,M))}else M=Ft,M=Et(v,v===Yt?M:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(M&3)===0||Nt(v,M)||(u=!0,xy(v,M));v=v.next}while(u);Ep=!1}}function _S(){vy()}function vy(){Wf=Dp=!1;var r=0;ws!==0&&(NS()&&(r=ws),ws=0);for(var o=ae(),u=null,v=Xf;v!==null;){var C=v.next,M=yy(v,o);M===0?(v.next=null,u===null?Xf=C:u.next=C,C===null&&(Sl=u)):(u=v,(r!==0||(M&3)!==0)&&(Wf=!0)),v=C}rc(r)}function yy(r,o){for(var u=r.suspendedLanes,v=r.pingedLanes,C=r.expirationTimes,M=r.pendingLanes&-62914561;0<M;){var Z=31-Be(M),J=1<<Z,he=C[Z];he===-1?((J&u)===0||(J&v)!==0)&&(C[Z]=Qt(J,o)):he<=o&&(r.expiredLanes|=J),M&=~J}if(o=Yt,u=Ft,u=Et(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),v=r.callbackNode,u===0||r===o&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)return v!==null&&v!==null&&H(v),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Nt(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(v!==null&&H(v),Vo(u)){case 2:case 8:u=be;break;case 32:u=De;break;case 268435456:u=X;break;default:u=De}return v=_y.bind(null,r),u=Ke(u,v),r.callbackPriority=o,r.callbackNode=u,o}return v!==null&&v!==null&&H(v),r.callbackPriority=2,r.callbackNode=null,2}function _y(r,o){if(Yn!==0&&Yn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Yf()&&r.callbackNode!==u)return null;var v=Ft;return v=Et(r,r===Yt?v:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),v===0?null:(ty(r,v,o),yy(r,ae()),r.callbackNode!=null&&r.callbackNode===u?_y.bind(null,r):null)}function xy(r,o){if(Yf())return null;ty(r,o,!0)}function xS(){TS(function(){(jt&6)!==0?Ke(ue,_S):vy()})}function Sp(){return ws===0&&(ws=tn()),ws}function by(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Za(""+r)}function wy(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function bS(r,o,u,v,C){if(o==="submit"&&u&&u.stateNode===C){var M=by((C[kn]||null).action),Z=v.submitter;Z&&(o=(o=Z[kn]||null)?by(o.formAction):Z.getAttribute("formAction"),o!==null&&(M=o,Z=null));var J=new ts("action","action",null,v,C);r.push({event:J,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(ws!==0){var he=Z?wy(C,Z):new FormData(C);Zm(u,{pending:!0,data:he,method:C.method,action:M},null,he)}}else typeof M=="function"&&(J.preventDefault(),he=Z?wy(C,Z):new FormData(C),Zm(u,{pending:!0,data:he,method:C.method,action:M},M,he))},currentTarget:C}]})}}for(var Cp=0;Cp<pa.length;Cp++){var Ap=pa[Cp],wS=Ap.toLowerCase(),DS=Ap[0].toUpperCase()+Ap.slice(1);Rr(wS,"on"+DS)}Rr(pf,"onAnimationEnd"),Rr(Br,"onAnimationIteration"),Rr(ls,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(xm,"onTransitionRun"),Rr(al,"onTransitionStart"),Rr(bm,"onTransitionCancel"),Rr(Lu,"onTransitionEnd"),ci("onMouseEnter",["mouseout","mouseover"]),ci("onMouseLeave",["mouseout","mouseover"]),ci("onPointerEnter",["pointerout","pointerover"]),ci("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ES=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ic));function Dy(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var v=r[u],C=v.event;v=v.listeners;e:{var M=void 0;if(o)for(var Z=v.length-1;0<=Z;Z--){var J=v[Z],he=J.instance,Ce=J.currentTarget;if(J=J.listener,he!==M&&C.isPropagationStopped())break e;M=J,C.currentTarget=Ce;try{M(C)}catch(Oe){jf(Oe)}C.currentTarget=null,M=he}else for(Z=0;Z<v.length;Z++){if(J=v[Z],he=J.instance,Ce=J.currentTarget,J=J.listener,he!==M&&C.isPropagationStopped())break e;M=J,C.currentTarget=Ce;try{M(C)}catch(Oe){jf(Oe)}C.currentTarget=null,M=he}}}}function Tt(r,o){var u=o[er];u===void 0&&(u=o[er]=new Set);var v=r+"__bubble";u.has(v)||(Ey(o,r,2,!1),u.add(v))}function Np(r,o,u){var v=0;o&&(v|=4),Ey(u,r,v,o)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function Mp(r){if(!r[Qf]){r[Qf]=!0,$s.forEach(function(u){u!=="selectionchange"&&(ES.has(u)||Np(u,!1,r),Np(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Qf]||(o[Qf]=!0,Np("selectionchange",!1,o))}}function Ey(r,o,u,v){switch(Vy(o)){case 2:var C=WS;break;case 8:C=QS;break;default:C=Up}u=C.bind(null,o,u,r),C=void 0,!es||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(C=!0),v?C!==void 0?r.addEventListener(o,u,{capture:!0,passive:C}):r.addEventListener(o,u,!0):C!==void 0?r.addEventListener(o,u,{passive:C}):r.addEventListener(o,u,!1)}function Tp(r,o,u,v,C){var M=v;if((o&1)===0&&(o&2)===0&&v!==null)e:for(;;){if(v===null)return;var Z=v.tag;if(Z===3||Z===4){var J=v.stateNode.containerInfo;if(J===C)break;if(Z===4)for(Z=v.return;Z!==null;){var he=Z.tag;if((he===3||he===4)&&Z.stateNode.containerInfo===C)return;Z=Z.return}for(;J!==null;){if(Z=Kr(J),Z===null)return;if(he=Z.tag,he===5||he===6||he===26||he===27){v=M=Z;continue e}J=J.parentNode}}v=v.return}kr(function(){var Ce=M,Oe=Ka(u),He=[];e:{var Ae=gf.get(r);if(Ae!==void 0){var Ne=ts,mt=r;switch(r){case"keypress":if(cn(u)===0)break e;case"keydown":case"keyup":Ne=hm;break;case"focusin":mt="focus",Ne=Du;break;case"focusout":mt="blur",Ne=Du;break;case"beforeblur":case"afterblur":Ne=Du;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=mm;break;case pf:case Br:case ls:Ne=lm;break;case Lu:Ne=pm;break;case"scroll":case"scrollend":Ne=om;break;case"wheel":Ne=of;break;case"copy":case"cut":case"paste":Ne=Eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=Cu;break;case"toggle":case"beforetoggle":Ne=fa}var ut=(o&4)!==0,Gt=!ut&&(r==="scroll"||r==="scrollend"),xe=ut?Ae!==null?Ae+"Capture":null:Ae;ut=[];for(var ve=Ce,Ee;ve!==null;){var Pe=ve;if(Ee=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||Ee===null||xe===null||(Pe=Bt(ve,xe),Pe!=null&&ut.push(ac(ve,Pe,Ee))),Gt)break;ve=ve.return}0<ut.length&&(Ae=new Ne(Ae,mt,null,u,Oe),He.push({event:Ae,listeners:ut}))}}if((o&7)===0){e:{if(Ae=r==="mouseover"||r==="pointerover",Ne=r==="mouseout"||r==="pointerout",Ae&&u!==Jo&&(mt=u.relatedTarget||u.fromElement)&&(Kr(mt)||mt[zi]))break e;if((Ne||Ae)&&(Ae=Oe.window===Oe?Oe:(Ae=Oe.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ne?(mt=u.relatedTarget||u.toElement,Ne=Ce,mt=mt?Kr(mt):null,mt!==null&&(Gt=l(mt),ut=mt.tag,mt!==Gt||ut!==5&&ut!==27&&ut!==6)&&(mt=null)):(Ne=null,mt=Ce),Ne!==mt)){if(ut=Ya,Pe="onMouseLeave",xe="onMouseEnter",ve="mouse",(r==="pointerout"||r==="pointerover")&&(ut=Cu,Pe="onPointerLeave",xe="onPointerEnter",ve="pointer"),Gt=Ne==null?Ae:_r(Ne),Ee=mt==null?Ae:_r(mt),Ae=new ut(Pe,ve+"leave",Ne,u,Oe),Ae.target=Gt,Ae.relatedTarget=Ee,Pe=null,Kr(Oe)===Ce&&(ut=new ut(xe,ve+"enter",mt,u,Oe),ut.target=Ee,ut.relatedTarget=Gt,Pe=ut),Gt=Pe,Ne&&mt)t:{for(ut=Ne,xe=mt,ve=0,Ee=ut;Ee;Ee=Cl(Ee))ve++;for(Ee=0,Pe=xe;Pe;Pe=Cl(Pe))Ee++;for(;0<ve-Ee;)ut=Cl(ut),ve--;for(;0<Ee-ve;)xe=Cl(xe),Ee--;for(;ve--;){if(ut===xe||xe!==null&&ut===xe.alternate)break t;ut=Cl(ut),xe=Cl(xe)}ut=null}else ut=null;Ne!==null&&Sy(He,Ae,Ne,ut,!1),mt!==null&&Gt!==null&&Sy(He,Gt,mt,ut,!0)}}e:{if(Ae=Ce?_r(Ce):window,Ne=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&Ae.type==="file")var Je=Qa;else if(da(Ae))if(Mu)Je=_m;else{Je=ym;var Ct=ku}else Ne=Ae.nodeName,!Ne||Ne.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?Ce&&Qo(Ce.elementType)&&(Je=Qa):Je=mi;if(Je&&(Je=Je(r,Ce))){ff(He,Je,u,Oe);break e}Ct&&Ct(r,Ae,Ce),r==="focusout"&&Ce&&Ae.type==="number"&&Ce.memoizedProps.value!=null&&Ua(Ae,"number",Ae.value)}switch(Ct=Ce?_r(Ce):window,r){case"focusin":(da(Ct)||Ct.contentEditable==="true")&&(Fr=Ct,to=Ce,ma=null);break;case"focusout":ma=to=Fr=null;break;case"mousedown":rl=!0;break;case"contextmenu":case"mouseup":case"dragend":rl=!1,df(He,u,Oe);break;case"selectionchange":if(nl)break;case"keydown":case"keyup":df(He,u,Oe)}var ot;if(ha)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Xa?Js(r,u)&&(ft="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(ft="onCompositionStart");ft&&(Nu&&u.locale!=="ko"&&(Xa||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Xa&&(ot=Va()):(Yr=Oe,hi="value"in Yr?Yr.value:Yr.textContent,Xa=!0)),Ct=Jf(Ce,ft),0<Ct.length&&(ft=new zr(ft,r,null,u,Oe),He.push({event:ft,listeners:Ct}),ot?ft.data=ot:(ot=uf(u),ot!==null&&(ft.data=ot)))),(ot=sf?cf(r,u):vm(r,u))&&(ft=Jf(Ce,"onBeforeInput"),0<ft.length&&(Ct=new zr("onBeforeInput","beforeinput",null,u,Oe),He.push({event:Ct,listeners:ft}),Ct.data=ot)),bS(He,r,Ce,u,Oe)}Dy(He,o)})}function ac(r,o,u){return{instance:r,listener:o,currentTarget:u}}function Jf(r,o){for(var u=o+"Capture",v=[];r!==null;){var C=r,M=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||M===null||(C=Bt(r,u),C!=null&&v.unshift(ac(r,C,M)),C=Bt(r,o),C!=null&&v.push(ac(r,C,M))),r.tag===3)return v;r=r.return}return[]}function Cl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Sy(r,o,u,v,C){for(var M=o._reactName,Z=[];u!==null&&u!==v;){var J=u,he=J.alternate,Ce=J.stateNode;if(J=J.tag,he!==null&&he===v)break;J!==5&&J!==26&&J!==27||Ce===null||(he=Ce,C?(Ce=Bt(u,M),Ce!=null&&Z.unshift(ac(u,Ce,he))):C||(Ce=Bt(u,M),Ce!=null&&Z.push(ac(u,Ce,he)))),u=u.return}Z.length!==0&&r.push({event:o,listeners:Z})}var SS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function Cy(r){return(typeof r=="string"?r:""+r).replace(SS,`
`).replace(CS,"")}function Ay(r,o){return o=Cy(o),Cy(r)===o}function eh(){}function Ht(r,o,u,v,C,M){switch(u){case"children":typeof v=="string"?o==="body"||o==="textarea"&&v===""||qr(r,v):(typeof v=="number"||typeof v=="bigint")&&o!=="body"&&qr(r,""+v);break;case"className":fi(r,"class",v);break;case"tabIndex":fi(r,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":fi(r,u,v);break;case"style":$a(r,v,M);break;case"data":if(o!=="object"){fi(r,"data",v);break}case"src":case"href":if(v===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){r.removeAttribute(u);break}v=Za(""+v),r.setAttribute(u,v);break;case"action":case"formAction":if(typeof v=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(u==="formAction"?(o!=="input"&&Ht(r,o,"name",C.name,C,null),Ht(r,o,"formEncType",C.formEncType,C,null),Ht(r,o,"formMethod",C.formMethod,C,null),Ht(r,o,"formTarget",C.formTarget,C,null)):(Ht(r,o,"encType",C.encType,C,null),Ht(r,o,"method",C.method,C,null),Ht(r,o,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){r.removeAttribute(u);break}v=Za(""+v),r.setAttribute(u,v);break;case"onClick":v!=null&&(r.onclick=eh);break;case"onScroll":v!=null&&Tt("scroll",r);break;case"onScrollEnd":v!=null&&Tt("scrollend",r);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(u=v.__html,u!=null){if(C.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":r.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){r.removeAttribute("xlink:href");break}u=Za(""+v),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(u,""+v):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":v===!0?r.setAttribute(u,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?r.setAttribute(u,v):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?r.setAttribute(u,v):r.removeAttribute(u);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?r.removeAttribute(u):r.setAttribute(u,v);break;case"popover":Tt("beforetoggle",r),Tt("toggle",r),Pa(r,"popover",v);break;case"xlinkActuate":$n(r,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":$n(r,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":$n(r,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":$n(r,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":$n(r,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":$n(r,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":$n(r,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":$n(r,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":$n(r,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Pa(r,"is",v);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=xu.get(u)||u,Pa(r,u,v))}}function kp(r,o,u,v,C,M){switch(u){case"style":$a(r,v,M);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(u=v.__html,u!=null){if(C.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof v=="string"?qr(r,v):(typeof v=="number"||typeof v=="bigint")&&qr(r,""+v);break;case"onScroll":v!=null&&Tt("scroll",r);break;case"onScrollEnd":v!=null&&Tt("scrollend",r);break;case"onClick":v!=null&&(r.onclick=eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zs.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(C=u.endsWith("Capture"),o=u.slice(2,C?u.length-7:void 0),M=r[kn]||null,M=M!=null?M[u]:null,typeof M=="function"&&r.removeEventListener(o,M,C),typeof v=="function")){typeof M!="function"&&M!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,v,C);break e}u in r?r[u]=v:v===!0?r.setAttribute(u,""):Pa(r,u,v)}}}function Xn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",r),Tt("load",r);var v=!1,C=!1,M;for(M in u)if(u.hasOwnProperty(M)){var Z=u[M];if(Z!=null)switch(M){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ht(r,o,M,Z,u,null)}}C&&Ht(r,o,"srcSet",u.srcSet,u,null),v&&Ht(r,o,"src",u.src,u,null);return;case"input":Tt("invalid",r);var J=M=Z=C=null,he=null,Ce=null;for(v in u)if(u.hasOwnProperty(v)){var Oe=u[v];if(Oe!=null)switch(v){case"name":C=Oe;break;case"type":Z=Oe;break;case"checked":he=Oe;break;case"defaultChecked":Ce=Oe;break;case"value":M=Oe;break;case"defaultValue":J=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,o));break;default:Ht(r,o,v,Oe,u,null)}}Wc(r,M,J,he,Ce,Z,C,!1),Ga(r);return;case"select":Tt("invalid",r),v=Z=M=null;for(C in u)if(u.hasOwnProperty(C)&&(J=u[C],J!=null))switch(C){case"value":M=J;break;case"defaultValue":Z=J;break;case"multiple":v=J;default:Ht(r,o,C,J,u,null)}o=M,u=Z,r.multiple=!!v,o!=null?xr(r,!!v,o,!1):u!=null&&xr(r,!!v,u,!0);return;case"textarea":Tt("invalid",r),M=C=v=null;for(Z in u)if(u.hasOwnProperty(Z)&&(J=u[Z],J!=null))switch(Z){case"value":v=J;break;case"defaultValue":C=J;break;case"children":M=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(91));break;default:Ht(r,o,Z,J,u,null)}Fi(r,v,C,M),Ga(r);return;case"option":for(he in u)if(u.hasOwnProperty(he)&&(v=u[he],v!=null))switch(he){case"selected":r.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ht(r,o,he,v,u,null)}return;case"dialog":Tt("beforetoggle",r),Tt("toggle",r),Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":Tt("load",r);break;case"video":case"audio":for(v=0;v<ic.length;v++)Tt(ic[v],r);break;case"image":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"embed":case"source":case"link":Tt("error",r),Tt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ce in u)if(u.hasOwnProperty(Ce)&&(v=u[Ce],v!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ht(r,o,Ce,v,u,null)}return;default:if(Qo(o)){for(Oe in u)u.hasOwnProperty(Oe)&&(v=u[Oe],v!==void 0&&kp(r,o,Oe,v,u,void 0));return}}for(J in u)u.hasOwnProperty(J)&&(v=u[J],v!=null&&Ht(r,o,J,v,u,null))}function AS(r,o,u,v){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,M=null,Z=null,J=null,he=null,Ce=null,Oe=null;for(Ne in u){var He=u[Ne];if(u.hasOwnProperty(Ne)&&He!=null)switch(Ne){case"checked":break;case"value":break;case"defaultValue":he=He;default:v.hasOwnProperty(Ne)||Ht(r,o,Ne,null,v,He)}}for(var Ae in v){var Ne=v[Ae];if(He=u[Ae],v.hasOwnProperty(Ae)&&(Ne!=null||He!=null))switch(Ae){case"type":M=Ne;break;case"name":C=Ne;break;case"checked":Ce=Ne;break;case"defaultChecked":Oe=Ne;break;case"value":Z=Ne;break;case"defaultValue":J=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,o));break;default:Ne!==He&&Ht(r,o,Ae,Ne,v,He)}}tr(r,Z,J,he,Ce,Oe,M,C);return;case"select":Ne=Z=J=Ae=null;for(M in u)if(he=u[M],u.hasOwnProperty(M)&&he!=null)switch(M){case"value":break;case"multiple":Ne=he;default:v.hasOwnProperty(M)||Ht(r,o,M,null,v,he)}for(C in v)if(M=v[C],he=u[C],v.hasOwnProperty(C)&&(M!=null||he!=null))switch(C){case"value":Ae=M;break;case"defaultValue":J=M;break;case"multiple":Z=M;default:M!==he&&Ht(r,o,C,M,v,he)}o=J,u=Z,v=Ne,Ae!=null?xr(r,!!u,Ae,!1):!!v!=!!u&&(o!=null?xr(r,!!u,o,!0):xr(r,!!u,u?[]:"",!1));return;case"textarea":Ne=Ae=null;for(J in u)if(C=u[J],u.hasOwnProperty(J)&&C!=null&&!v.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:Ht(r,o,J,null,v,C)}for(Z in v)if(C=v[Z],M=u[Z],v.hasOwnProperty(Z)&&(C!=null||M!=null))switch(Z){case"value":Ae=C;break;case"defaultValue":Ne=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==M&&Ht(r,o,Z,C,v,M)}on(r,Ae,Ne);return;case"option":for(var mt in u)if(Ae=u[mt],u.hasOwnProperty(mt)&&Ae!=null&&!v.hasOwnProperty(mt))switch(mt){case"selected":r.selected=!1;break;default:Ht(r,o,mt,null,v,Ae)}for(he in v)if(Ae=v[he],Ne=u[he],v.hasOwnProperty(he)&&Ae!==Ne&&(Ae!=null||Ne!=null))switch(he){case"selected":r.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol";break;default:Ht(r,o,he,Ae,v,Ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in u)Ae=u[ut],u.hasOwnProperty(ut)&&Ae!=null&&!v.hasOwnProperty(ut)&&Ht(r,o,ut,null,v,Ae);for(Ce in v)if(Ae=v[Ce],Ne=u[Ce],v.hasOwnProperty(Ce)&&Ae!==Ne&&(Ae!=null||Ne!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,o));break;default:Ht(r,o,Ce,Ae,v,Ne)}return;default:if(Qo(o)){for(var Gt in u)Ae=u[Gt],u.hasOwnProperty(Gt)&&Ae!==void 0&&!v.hasOwnProperty(Gt)&&kp(r,o,Gt,void 0,v,Ae);for(Oe in v)Ae=v[Oe],Ne=u[Oe],!v.hasOwnProperty(Oe)||Ae===Ne||Ae===void 0&&Ne===void 0||kp(r,o,Oe,Ae,v,Ne);return}}for(var xe in u)Ae=u[xe],u.hasOwnProperty(xe)&&Ae!=null&&!v.hasOwnProperty(xe)&&Ht(r,o,xe,null,v,Ae);for(He in v)Ae=v[He],Ne=u[He],!v.hasOwnProperty(He)||Ae===Ne||Ae==null&&Ne==null||Ht(r,o,He,Ae,v,Ne)}var zp=null,Lp=null;function th(r){return r.nodeType===9?r:r.ownerDocument}function Ny(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function My(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Fp(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Bp=null;function NS(){var r=window.event;return r&&r.type==="popstate"?r===Bp?!1:(Bp=r,!0):(Bp=null,!1)}var Ty=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,TS=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(r){return ky.resolve(null).then(r).catch(kS)}:Ty;function kS(r){setTimeout(function(){throw r})}function Do(r){return r==="head"}function zy(r,o){var u=o,v=0,C=0;do{var M=u.nextSibling;if(r.removeChild(u),M&&M.nodeType===8)if(u=M.data,u==="/$"){if(0<v&&8>v){u=v;var Z=r.ownerDocument;if(u&1&&oc(Z.documentElement),u&2&&oc(Z.body),u&4)for(u=Z.head,oc(u),Z=u.firstChild;Z;){var J=Z.nextSibling,he=Z.nodeName;Z[Li]||he==="SCRIPT"||he==="STYLE"||he==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||u.removeChild(Z),Z=J}}if(C===0){r.removeChild(M),mc(o);return}C--}else u==="$"||u==="$?"||u==="$!"?C++:v=u.charCodeAt(0)-48;else v=0;u=M}while(u);mc(o)}function Rp(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Rp(u),ja(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function zS(r,o,u,v){for(;r.nodeType===1;){var C=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!v&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(v){if(!r[Li])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(M=r.getAttribute("rel"),M==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(M!==C.rel||r.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||r.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||r.getAttribute("title")!==(C.title==null?null:C.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(M=r.getAttribute("src"),(M!==(C.src==null?null:C.src)||r.getAttribute("type")!==(C.type==null?null:C.type)||r.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&M&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var M=C.name==null?null:""+C.name;if(C.type==="hidden"&&r.getAttribute("name")===M)return r}else return r;if(r=yi(r.nextSibling),r===null)break}return null}function LS(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=yi(r.nextSibling),r===null))return null;return r}function Op(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function FS(r,o){var u=r.ownerDocument;if(r.data!=="$?"||u.readyState==="complete")o();else{var v=function(){o(),u.removeEventListener("DOMContentLoaded",v)};u.addEventListener("DOMContentLoaded",v),r._reactRetry=v}}function yi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var jp=null;function Ly(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return r;o--}else u==="/$"&&o++}r=r.previousSibling}return null}function Fy(r,o,u){switch(o=th(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function oc(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);ja(r)}var ni=new Map,By=new Set;function nh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Aa=ee.d;ee.d={f:BS,r:RS,D:OS,C:jS,L:PS,m:IS,X:GS,S:HS,M:US};function BS(){var r=Aa.f(),o=qf();return r||o}function RS(r){var o=si(r);o!==null&&o.tag===5&&o.type==="form"?t1(o):Aa.r(r)}var Al=typeof document>"u"?null:document;function Ry(r,o,u){var v=Al;if(v&&typeof o=="string"&&o){var C=Kn(o);C='link[rel="'+r+'"][href="'+C+'"]',typeof u=="string"&&(C+='[crossorigin="'+u+'"]'),By.has(C)||(By.add(C),r={rel:r,crossOrigin:u,href:o},v.querySelector(C)===null&&(o=v.createElement("link"),Xn(o,"link",r),un(o),v.head.appendChild(o)))}}function OS(r){Aa.D(r),Ry("dns-prefetch",r,null)}function jS(r,o){Aa.C(r,o),Ry("preconnect",r,o)}function PS(r,o,u){Aa.L(r,o,u);var v=Al;if(v&&r&&o){var C='link[rel="preload"][as="'+Kn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(C+='[imagesrcset="'+Kn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(C+='[imagesizes="'+Kn(u.imageSizes)+'"]')):C+='[href="'+Kn(r)+'"]';var M=C;switch(o){case"style":M=Nl(r);break;case"script":M=Ml(r)}ni.has(M)||(r=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),ni.set(M,r),v.querySelector(C)!==null||o==="style"&&v.querySelector(sc(M))||o==="script"&&v.querySelector(lc(M))||(o=v.createElement("link"),Xn(o,"link",r),un(o),v.head.appendChild(o)))}}function IS(r,o){Aa.m(r,o);var u=Al;if(u&&r){var v=o&&typeof o.as=="string"?o.as:"script",C='link[rel="modulepreload"][as="'+Kn(v)+'"][href="'+Kn(r)+'"]',M=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=Ml(r)}if(!ni.has(M)&&(r=m({rel:"modulepreload",href:r},o),ni.set(M,r),u.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(lc(M)))return}v=u.createElement("link"),Xn(v,"link",r),un(v),u.head.appendChild(v)}}}function HS(r,o,u){Aa.S(r,o,u);var v=Al;if(v&&r){var C=li(v).hoistableStyles,M=Nl(r);o=o||"default";var Z=C.get(M);if(!Z){var J={loading:0,preload:null};if(Z=v.querySelector(sc(M)))J.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":o},u),(u=ni.get(M))&&Pp(r,u);var he=Z=v.createElement("link");un(he),Xn(he,"link",r),he._p=new Promise(function(Ce,Oe){he.onload=Ce,he.onerror=Oe}),he.addEventListener("load",function(){J.loading|=1}),he.addEventListener("error",function(){J.loading|=2}),J.loading|=4,rh(Z,o,v)}Z={type:"stylesheet",instance:Z,count:1,state:J},C.set(M,Z)}}}function GS(r,o){Aa.X(r,o);var u=Al;if(u&&r){var v=li(u).hoistableScripts,C=Ml(r),M=v.get(C);M||(M=u.querySelector(lc(C)),M||(r=m({src:r,async:!0},o),(o=ni.get(C))&&Ip(r,o),M=u.createElement("script"),un(M),Xn(M,"link",r),u.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},v.set(C,M))}}function US(r,o){Aa.M(r,o);var u=Al;if(u&&r){var v=li(u).hoistableScripts,C=Ml(r),M=v.get(C);M||(M=u.querySelector(lc(C)),M||(r=m({src:r,async:!0,type:"module"},o),(o=ni.get(C))&&Ip(r,o),M=u.createElement("script"),un(M),Xn(M,"link",r),u.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},v.set(C,M))}}function Oy(r,o,u,v){var C=(C=_e.current)?nh(C):null;if(!C)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Nl(u.href),u=li(C).hoistableStyles,v=u.get(o),v||(v={type:"style",instance:null,count:0,state:null},u.set(o,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Nl(u.href);var M=li(C).hoistableStyles,Z=M.get(r);if(Z||(C=C.ownerDocument||C,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(r,Z),(M=C.querySelector(sc(r)))&&!M._p&&(Z.instance=M,Z.state.loading=5),ni.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ni.set(r,u),M||$S(C,r,u,Z.state))),o&&v===null)throw Error(i(528,""));return Z}if(o&&v!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ml(u),u=li(C).hoistableScripts,v=u.get(o),v||(v={type:"script",instance:null,count:0,state:null},u.set(o,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Nl(r){return'href="'+Kn(r)+'"'}function sc(r){return'link[rel="stylesheet"]['+r+"]"}function jy(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function $S(r,o,u,v){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?v.loading=1:(o=r.createElement("link"),v.preload=o,o.addEventListener("load",function(){return v.loading|=1}),o.addEventListener("error",function(){return v.loading|=2}),Xn(o,"link",u),un(o),r.head.appendChild(o))}function Ml(r){return'[src="'+Kn(r)+'"]'}function lc(r){return"script[async]"+r}function Py(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var v=r.querySelector('style[data-href~="'+Kn(u.href)+'"]');if(v)return o.instance=v,un(v),v;var C=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return v=(r.ownerDocument||r).createElement("style"),un(v),Xn(v,"style",C),rh(v,u.precedence,r),o.instance=v;case"stylesheet":C=Nl(u.href);var M=r.querySelector(sc(C));if(M)return o.state.loading|=4,o.instance=M,un(M),M;v=jy(u),(C=ni.get(C))&&Pp(v,C),M=(r.ownerDocument||r).createElement("link"),un(M);var Z=M;return Z._p=new Promise(function(J,he){Z.onload=J,Z.onerror=he}),Xn(M,"link",v),o.state.loading|=4,rh(M,u.precedence,r),o.instance=M;case"script":return M=Ml(u.src),(C=r.querySelector(lc(M)))?(o.instance=C,un(C),C):(v=u,(C=ni.get(M))&&(v=m({},u),Ip(v,C)),r=r.ownerDocument||r,C=r.createElement("script"),un(C),Xn(C,"link",v),r.head.appendChild(C),o.instance=C);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(v=o.instance,o.state.loading|=4,rh(v,u.precedence,r));return o.instance}function rh(r,o,u){for(var v=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,M=C,Z=0;Z<v.length;Z++){var J=v[Z];if(J.dataset.precedence===o)M=J;else if(M!==C)break}M?M.parentNode.insertBefore(r,M.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Pp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Ip(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var ih=null;function Iy(r,o,u){if(ih===null){var v=new Map,C=ih=new Map;C.set(u,v)}else C=ih,v=C.get(u),v||(v=new Map,C.set(u,v));if(v.has(r))return v;for(v.set(r,null),u=u.getElementsByTagName(r),C=0;C<u.length;C++){var M=u[C];if(!(M[Li]||M[xn]||r==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=M.getAttribute(o)||"";Z=r+Z;var J=v.get(Z);J?J.push(M):v.set(Z,[M])}}return v}function Hy(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function ZS(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Gy(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var uc=null;function KS(){}function qS(r,o,u){if(uc===null)throw Error(i(475));var v=uc;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var C=Nl(u.href),M=r.querySelector(sc(C));if(M){r=M._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(v.count++,v=ah.bind(v),r.then(v,v)),o.state.loading|=4,o.instance=M,un(M);return}M=r.ownerDocument||r,u=jy(u),(C=ni.get(C))&&Pp(u,C),M=M.createElement("link"),un(M);var Z=M;Z._p=new Promise(function(J,he){Z.onload=J,Z.onerror=he}),Xn(M,"link",u),o.instance=M}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(v.count++,o=ah.bind(v),r.addEventListener("load",o),r.addEventListener("error",o))}}function VS(){if(uc===null)throw Error(i(475));var r=uc;return r.stylesheets&&r.count===0&&Hp(r,r.stylesheets),0<r.count?function(o){var u=setTimeout(function(){if(r.stylesheets&&Hp(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u)}}:null}function ah(){if(this.count--,this.count===0){if(this.stylesheets)Hp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var oh=null;function Hp(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,oh=new Map,o.forEach(YS,r),oh=null,ah.call(r))}function YS(r,o){if(!(o.state.loading&4)){var u=oh.get(r);if(u)var v=u.get(null);else{u=new Map,oh.set(r,u);for(var C=r.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<C.length;M++){var Z=C[M];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(u.set(Z.dataset.precedence,Z),v=Z)}v&&u.set(null,v)}C=o.instance,Z=C.getAttribute("data-precedence"),M=u.get(Z)||v,M===v&&u.set(null,C),u.set(Z,C),this.count++,v=ah.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),M?M.parentNode.insertBefore(C,M.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(C,r.firstChild)),o.state.loading|=4}}var cc={$$typeof:N,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function XS(r,o,u,v,C,M,Z,J){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cn(0),this.hiddenUpdates=Cn(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=M,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function Uy(r,o,u,v,C,M,Z,J,he,Ce,Oe,He){return r=new XS(r,o,u,Z,J,he,Ce,He),o=1,M===!0&&(o|=24),M=gr(3,null,null,o),r.current=M,M.stateNode=r,o=wm(),o.refCount++,r.pooledCache=o,o.refCount++,M.memoizedState={element:v,isDehydrated:u,cache:o},Cm(M),r}function $y(r){return r?(r=ya,r):ya}function Zy(r,o,u,v,C,M){C=$y(C),v.context===null?v.context=C:v.pendingContext=C,v=uo(o),v.payload={element:u},M=M===void 0?null:M,M!==null&&(v.callback=M),u=co(r,v,o),u!==null&&(Gr(u,r,o),Iu(u,r,o))}function Ky(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Gp(r,o){Ky(r,o),(r=r.alternate)&&Ky(r,o)}function qy(r){if(r.tag===13){var o=io(r,67108864);o!==null&&Gr(o,r,67108864),Gp(r,67108864)}}var sh=!0;function WS(r,o,u,v){var C=K.T;K.T=null;var M=ee.p;try{ee.p=2,Up(r,o,u,v)}finally{ee.p=M,K.T=C}}function QS(r,o,u,v){var C=K.T;K.T=null;var M=ee.p;try{ee.p=8,Up(r,o,u,v)}finally{ee.p=M,K.T=C}}function Up(r,o,u,v){if(sh){var C=$p(v);if(C===null)Tp(r,o,v,lh,u),Yy(r,v);else if(e3(C,r,o,u,v))v.stopPropagation();else if(Yy(r,v),o&4&&-1<JS.indexOf(r)){for(;C!==null;){var M=si(C);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var Z=dt(M.pendingLanes);if(Z!==0){var J=M;for(J.pendingLanes|=2,J.entangledLanes|=2;Z;){var he=1<<31-Be(Z);J.entanglements[1]|=he,Z&=~he}$i(M),(jt&6)===0&&(Zf=ae()+500,rc(0))}}break;case 13:J=io(M,2),J!==null&&Gr(J,M,2),qf(),Gp(M,2)}if(M=$p(v),M===null&&Tp(r,o,v,lh,u),M===C)break;C=M}C!==null&&v.stopPropagation()}else Tp(r,o,v,null,u)}}function $p(r){return r=Ka(r),Zp(r)}var lh=null;function Zp(r){if(lh=null,r=Kr(r),r!==null){var o=l(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return lh=r,null}function Vy(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case ue:return 2;case be:return 8;case De:case ge:return 32;case X:return 268435456;default:return 32}default:return 32}}var Kp=!1,Eo=null,So=null,Co=null,fc=new Map,hc=new Map,Ao=[],JS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yy(r,o){switch(r){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":fc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(o.pointerId)}}function dc(r,o,u,v,C,M){return r===null||r.nativeEvent!==M?(r={blockedOn:o,domEventName:u,eventSystemFlags:v,nativeEvent:M,targetContainers:[C]},o!==null&&(o=si(o),o!==null&&qy(o)),r):(r.eventSystemFlags|=v,o=r.targetContainers,C!==null&&o.indexOf(C)===-1&&o.push(C),r)}function e3(r,o,u,v,C){switch(o){case"focusin":return Eo=dc(Eo,r,o,u,v,C),!0;case"dragenter":return So=dc(So,r,o,u,v,C),!0;case"mouseover":return Co=dc(Co,r,o,u,v,C),!0;case"pointerover":var M=C.pointerId;return fc.set(M,dc(fc.get(M)||null,r,o,u,v,C)),!0;case"gotpointercapture":return M=C.pointerId,hc.set(M,dc(hc.get(M)||null,r,o,u,v,C)),!0}return!1}function Xy(r){var o=Kr(r.target);if(o!==null){var u=l(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){r.blockedOn=o,Yo(r.priority,function(){if(u.tag===13){var v=Hr();v=qo(v);var C=io(u,v);C!==null&&Gr(C,u,v),Gp(u,v)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function uh(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=$p(r.nativeEvent);if(u===null){u=r.nativeEvent;var v=new u.constructor(u.type,u);Jo=v,u.target.dispatchEvent(v),Jo=null}else return o=si(u),o!==null&&qy(o),r.blockedOn=u,!1;o.shift()}return!0}function Wy(r,o,u){uh(r)&&u.delete(o)}function t3(){Kp=!1,Eo!==null&&uh(Eo)&&(Eo=null),So!==null&&uh(So)&&(So=null),Co!==null&&uh(Co)&&(Co=null),fc.forEach(Wy),hc.forEach(Wy)}function ch(r,o){r.blockedOn===o&&(r.blockedOn=null,Kp||(Kp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,t3)))}var fh=null;function Qy(r){fh!==r&&(fh=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){fh===r&&(fh=null);for(var o=0;o<r.length;o+=3){var u=r[o],v=r[o+1],C=r[o+2];if(typeof v!="function"){if(Zp(v||u)===null)continue;break}var M=si(u);M!==null&&(r.splice(o,3),o-=3,Zm(M,{pending:!0,data:C,method:u.method,action:v},v,C))}}))}function mc(r){function o(he){return ch(he,r)}Eo!==null&&ch(Eo,r),So!==null&&ch(So,r),Co!==null&&ch(Co,r),fc.forEach(o),hc.forEach(o);for(var u=0;u<Ao.length;u++){var v=Ao[u];v.blockedOn===r&&(v.blockedOn=null)}for(;0<Ao.length&&(u=Ao[0],u.blockedOn===null);)Xy(u),u.blockedOn===null&&Ao.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(v=0;v<u.length;v+=3){var C=u[v],M=u[v+1],Z=C[kn]||null;if(typeof M=="function")Z||Qy(u);else if(Z){var J=null;if(M&&M.hasAttribute("formAction")){if(C=M,Z=M[kn]||null)J=Z.formAction;else if(Zp(C)!==null)continue}else J=Z.action;typeof J=="function"?u[v+1]=J:(u.splice(v,3),v-=3),Qy(u)}}}function qp(r){this._internalRoot=r}hh.prototype.render=qp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,v=Hr();Zy(u,v,r,o,null,null)},hh.prototype.unmount=qp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Zy(r.current,2,null,r,null,null),qf(),o[zi]=null}};function hh(r){this._internalRoot=r}hh.prototype.unstable_scheduleHydration=function(r){if(r){var o=Gs();r={blockedOn:null,target:r,priority:o};for(var u=0;u<Ao.length&&o!==0&&o<Ao[u].priority;u++);Ao.splice(u,0,r),u===0&&Xy(r)}};var Jy=t.version;if(Jy!=="19.1.1")throw Error(i(527,Jy,"19.1.1"));ee.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(o),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var n3={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{me=dh.inject(n3),ye=dh}catch{}}return gc.createRoot=function(r,o){if(!a(r))throw Error(i(299));var u=!1,v="",C=p1,M=g1,Z=v1,J=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(v=o.identifierPrefix),o.onUncaughtError!==void 0&&(C=o.onUncaughtError),o.onCaughtError!==void 0&&(M=o.onCaughtError),o.onRecoverableError!==void 0&&(Z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(J=o.unstable_transitionCallbacks)),o=Uy(r,1,!1,null,null,u,v,C,M,Z,J,null),r[zi]=o.current,Mp(r),new qp(o)},gc.hydrateRoot=function(r,o,u){if(!a(r))throw Error(i(299));var v=!1,C="",M=p1,Z=g1,J=v1,he=null,Ce=null;return u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(C=u.identifierPrefix),u.onUncaughtError!==void 0&&(M=u.onUncaughtError),u.onCaughtError!==void 0&&(Z=u.onCaughtError),u.onRecoverableError!==void 0&&(J=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(he=u.unstable_transitionCallbacks),u.formState!==void 0&&(Ce=u.formState)),o=Uy(r,1,!0,o,u??null,v,C,M,Z,J,he,Ce),o.context=$y(null),u=o.current,v=Hr(),v=qo(v),C=uo(v),C.callback=null,co(u,C,v),u=v,o.current.lanes=u,Un(o,u),$i(o),r[zi]=o.current,Mp(r),new hh(o)},gc.version="19.1.1",gc}var u_;function h3(){if(u_)return Xp.exports;u_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Xp.exports=f3(),Xp.exports}var wg=h3(),Dc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var d3=Dc.exports,c_;function m3(){return c_||(c_=1,(function(e,t){(function(n,i){i(t)})(d3,(function(n){var i="1.9.4";function a(s){var p,S,z,P;for(S=1,z=arguments.length;S<z;S++){P=arguments[S];for(p in P)s[p]=P[p]}return s}var l=Object.create||(function(){function s(){}return function(p){return s.prototype=p,new s}})();function c(s,p){var S=Array.prototype.slice;if(s.bind)return s.bind.apply(s,S.call(arguments,1));var z=S.call(arguments,2);return function(){return s.apply(p,z.length?z.concat(S.call(arguments)):arguments)}}var f=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++f),s._leaflet_id}function h(s,p,S){var z,P,Y,fe;return fe=function(){z=!1,P&&(Y.apply(S,P),P=!1)},Y=function(){z?P=arguments:(s.apply(S,arguments),setTimeout(fe,p),z=!0)},Y}function m(s,p,S){var z=p[1],P=p[0],Y=z-P;return s===z&&S?s:((s-P)%Y+Y)%Y+P}function g(){return!1}function _(s,p){if(p===!1)return s;var S=Math.pow(10,p===void 0?6:p);return Math.round(s*S)/S}function x(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function w(s){return x(s).split(/\s+/)}function y(s,p){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?l(s.options):{});for(var S in p)s.options[S]=p[S];return s.options}function E(s,p,S){var z=[];for(var P in s)z.push(encodeURIComponent(S?P.toUpperCase():P)+"="+encodeURIComponent(s[P]));return(!p||p.indexOf("?")===-1?"?":"&")+z.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function A(s,p){return s.replace(D,function(S,z){var P=p[z];if(P===void 0)throw new Error("No value provided for variable "+S);return typeof P=="function"&&(P=P(p)),P})}var N=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,p){for(var S=0;S<s.length;S++)if(s[S]===p)return S;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function T(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function j(s){var p=+new Date,S=Math.max(0,16-(p-R));return R=p+S,window.setTimeout(s,S)}var O=window.requestAnimationFrame||T("RequestAnimationFrame")||j,G=window.cancelAnimationFrame||T("CancelAnimationFrame")||T("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function U(s,p,S){if(S&&O===j)s.call(p);else return O.call(window,c(s,p))}function I(s){s&&G.call(window,s)}var W={__proto__:null,extend:a,create:l,bind:c,get lastId(){return f},stamp:d,throttle:h,wrapNum:m,falseFn:g,formatNum:_,trim:x,splitWords:w,setOptions:y,getParamString:E,template:A,isArray:N,indexOf:F,emptyImageUrl:k,requestFn:O,cancelFn:G,requestAnimFrame:U,cancelAnimFrame:I};function B(){}B.extend=function(s){var p=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=p.__super__=this.prototype,z=l(S);z.constructor=p,p.prototype=z;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(p[P]=this[P]);return s.statics&&a(p,s.statics),s.includes&&(re(s.includes),a.apply(null,[z].concat(s.includes))),a(z,s),delete z.statics,delete z.includes,z.options&&(z.options=S.options?l(S.options):{},a(z.options,s.options)),z._initHooks=[],z.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Y=0,fe=z._initHooks.length;Y<fe;Y++)z._initHooks[Y].call(this)}},p},B.include=function(s){var p=this.prototype.options;return a(this.prototype,s),s.options&&(this.prototype.options=p,this.mergeOptions(s.options)),this},B.mergeOptions=function(s){return a(this.prototype.options,s),this},B.addInitHook=function(s){var p=Array.prototype.slice.call(arguments,1),S=typeof s=="function"?s:function(){this[s].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function re(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=N(s)?s:[s];for(var p=0;p<s.length;p++)s[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var K={on:function(s,p,S){if(typeof s=="object")for(var z in s)this._on(z,s[z],p);else{s=w(s);for(var P=0,Y=s.length;P<Y;P++)this._on(s[P],p,S)}return this},off:function(s,p,S){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var z in s)this._off(z,s[z],p);else{s=w(s);for(var P=arguments.length===1,Y=0,fe=s.length;Y<fe;Y++)P?this._off(s[Y]):this._off(s[Y],p,S)}return this},_on:function(s,p,S,z){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(s,p,S)===!1){S===this&&(S=void 0);var P={fn:p,ctx:S};z&&(P.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(P)}},_off:function(s,p,S){var z,P,Y;if(this._events&&(z=this._events[s],!!z)){if(arguments.length===1){if(this._firingCount)for(P=0,Y=z.length;P<Y;P++)z[P].fn=g;delete this._events[s];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var fe=this._listens(s,p,S);if(fe!==!1){var we=z[fe];this._firingCount&&(we.fn=g,this._events[s]=z=z.slice()),z.splice(fe,1)}}},fire:function(s,p,S){if(!this.listens(s,S))return this;var z=a({},p,{type:s,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var P=this._events[s];if(P){this._firingCount=this._firingCount+1||1;for(var Y=0,fe=P.length;Y<fe;Y++){var we=P[Y],Me=we.fn;we.once&&this.off(s,Me,we.ctx),Me.call(we.ctx||this,z)}this._firingCount--}}return S&&this._propagateEvent(z),this},listens:function(s,p,S,z){typeof s!="string"&&console.warn('"string" type argument expected');var P=p;typeof p!="function"&&(z=!!p,P=void 0,S=void 0);var Y=this._events&&this._events[s];if(Y&&Y.length&&this._listens(s,P,S)!==!1)return!0;if(z){for(var fe in this._eventParents)if(this._eventParents[fe].listens(s,p,S,z))return!0}return!1},_listens:function(s,p,S){if(!this._events)return!1;var z=this._events[s]||[];if(!p)return!!z.length;S===this&&(S=void 0);for(var P=0,Y=z.length;P<Y;P++)if(z[P].fn===p&&z[P].ctx===S)return P;return!1},once:function(s,p,S){if(typeof s=="object")for(var z in s)this._on(z,s[z],p,!0);else{s=w(s);for(var P=0,Y=s.length;P<Y;P++)this._on(s[P],p,S,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var p in this._eventParents)this._eventParents[p].fire(s.type,a({layer:s.target,propagatedFrom:s.target},s),!0)}};K.addEventListener=K.on,K.removeEventListener=K.clearAllEventListeners=K.off,K.addOneTimeEventListener=K.once,K.fireEvent=K.fire,K.hasEventListeners=K.listens;var ee=B.extend(K);function V(s,p,S){this.x=S?Math.round(s):s,this.y=S?Math.round(p):p}var Q=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(s){return this.clone()._add($(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract($(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new V(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new V(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(s){s=$(s);var p=s.x-this.x,S=s.y-this.y;return Math.sqrt(p*p+S*S)},equals:function(s){return s=$(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=$(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function $(s,p,S){return s instanceof V?s:N(s)?new V(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new V(s.x,s.y):new V(s,p,S)}function q(s,p){if(s)for(var S=p?[s,p]:s,z=0,P=S.length;z<P;z++)this.extend(S[z])}q.prototype={extend:function(s){var p,S;if(!s)return this;if(s instanceof V||typeof s[0]=="number"||"x"in s)p=S=$(s);else if(s=ne(s),p=s.min,S=s.max,!p||!S)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=S.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(s){return $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return $(this.min.x,this.max.y)},getTopRight:function(){return $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var p,S;return typeof s[0]=="number"||s instanceof V?s=$(s):s=ne(s),s instanceof q?(p=s.min,S=s.max):p=S=s,p.x>=this.min.x&&S.x<=this.max.x&&p.y>=this.min.y&&S.y<=this.max.y},intersects:function(s){s=ne(s);var p=this.min,S=this.max,z=s.min,P=s.max,Y=P.x>=p.x&&z.x<=S.x,fe=P.y>=p.y&&z.y<=S.y;return Y&&fe},overlaps:function(s){s=ne(s);var p=this.min,S=this.max,z=s.min,P=s.max,Y=P.x>p.x&&z.x<S.x,fe=P.y>p.y&&z.y<S.y;return Y&&fe},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var p=this.min,S=this.max,z=Math.abs(p.x-S.x)*s,P=Math.abs(p.y-S.y)*s;return ne($(p.x-z,p.y-P),$(S.x+z,S.y+P))},equals:function(s){return s?(s=ne(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ne(s,p){return!s||s instanceof q?s:new q(s,p)}function se(s,p){if(s)for(var S=p?[s,p]:s,z=0,P=S.length;z<P;z++)this.extend(S[z])}se.prototype={extend:function(s){var p=this._southWest,S=this._northEast,z,P;if(s instanceof pe)z=s,P=s;else if(s instanceof se){if(z=s._southWest,P=s._northEast,!z||!P)return this}else return s?this.extend(_e(s)||ce(s)):this;return!p&&!S?(this._southWest=new pe(z.lat,z.lng),this._northEast=new pe(P.lat,P.lng)):(p.lat=Math.min(z.lat,p.lat),p.lng=Math.min(z.lng,p.lng),S.lat=Math.max(P.lat,S.lat),S.lng=Math.max(P.lng,S.lng)),this},pad:function(s){var p=this._southWest,S=this._northEast,z=Math.abs(p.lat-S.lat)*s,P=Math.abs(p.lng-S.lng)*s;return new se(new pe(p.lat-z,p.lng-P),new pe(S.lat+z,S.lng+P))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof pe||"lat"in s?s=_e(s):s=ce(s);var p=this._southWest,S=this._northEast,z,P;return s instanceof se?(z=s.getSouthWest(),P=s.getNorthEast()):z=P=s,z.lat>=p.lat&&P.lat<=S.lat&&z.lng>=p.lng&&P.lng<=S.lng},intersects:function(s){s=ce(s);var p=this._southWest,S=this._northEast,z=s.getSouthWest(),P=s.getNorthEast(),Y=P.lat>=p.lat&&z.lat<=S.lat,fe=P.lng>=p.lng&&z.lng<=S.lng;return Y&&fe},overlaps:function(s){s=ce(s);var p=this._southWest,S=this._northEast,z=s.getSouthWest(),P=s.getNorthEast(),Y=P.lat>p.lat&&z.lat<S.lat,fe=P.lng>p.lng&&z.lng<S.lng;return Y&&fe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,p){return s?(s=ce(s),this._southWest.equals(s.getSouthWest(),p)&&this._northEast.equals(s.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(s,p){return s instanceof se?s:new se(s,p)}function pe(s,p,S){if(isNaN(s)||isNaN(p))throw new Error("Invalid LatLng object: ("+s+", "+p+")");this.lat=+s,this.lng=+p,S!==void 0&&(this.alt=+S)}pe.prototype={equals:function(s,p){if(!s)return!1;s=_e(s);var S=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return S<=(p===void 0?1e-9:p)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return ke.distance(this,_e(s))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(s){var p=180*s/40075017,S=p/Math.cos(Math.PI/180*this.lat);return ce([this.lat-p,this.lng-S],[this.lat+p,this.lng+S])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function _e(s,p,S){return s instanceof pe?s:N(s)&&typeof s[0]!="object"?s.length===3?new pe(s[0],s[1],s[2]):s.length===2?new pe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new pe(s.lat,"lng"in s?s.lng:s.lon,s.alt):p===void 0?null:new pe(s,p,S)}var ze={latLngToPoint:function(s,p){var S=this.projection.project(s),z=this.scale(p);return this.transformation._transform(S,z)},pointToLatLng:function(s,p){var S=this.scale(p),z=this.transformation.untransform(s,S);return this.projection.unproject(z)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var p=this.projection.bounds,S=this.scale(s),z=this.transformation.transform(p.min,S),P=this.transformation.transform(p.max,S);return new q(z,P)},infinite:!1,wrapLatLng:function(s){var p=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,S=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,z=s.alt;return new pe(S,p,z)},wrapLatLngBounds:function(s){var p=s.getCenter(),S=this.wrapLatLng(p),z=p.lat-S.lat,P=p.lng-S.lng;if(z===0&&P===0)return s;var Y=s.getSouthWest(),fe=s.getNorthEast(),we=new pe(Y.lat-z,Y.lng-P),Me=new pe(fe.lat-z,fe.lng-P);return new se(we,Me)}},ke=a({},ze,{wrapLng:[-180,180],R:6371e3,distance:function(s,p){var S=Math.PI/180,z=s.lat*S,P=p.lat*S,Y=Math.sin((p.lat-s.lat)*S/2),fe=Math.sin((p.lng-s.lng)*S/2),we=Y*Y+Math.cos(z)*Math.cos(P)*fe*fe,Me=2*Math.atan2(Math.sqrt(we),Math.sqrt(1-we));return this.R*Me}}),Ie=6378137,Ze={R:Ie,MAX_LATITUDE:85.0511287798,project:function(s){var p=Math.PI/180,S=this.MAX_LATITUDE,z=Math.max(Math.min(S,s.lat),-S),P=Math.sin(z*p);return new V(this.R*s.lng*p,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(s){var p=180/Math.PI;return new pe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*p,s.x*p/this.R)},bounds:(function(){var s=Ie*Math.PI;return new q([-s,-s],[s,s])})()};function Xe(s,p,S,z){if(N(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=p,this._c=S,this._d=z}Xe.prototype={transform:function(s,p){return this._transform(s.clone(),p)},_transform:function(s,p){return p=p||1,s.x=p*(this._a*s.x+this._b),s.y=p*(this._c*s.y+this._d),s},untransform:function(s,p){return p=p||1,new V((s.x/p-this._b)/this._a,(s.y/p-this._d)/this._c)}};function $e(s,p,S,z){return new Xe(s,p,S,z)}var Ke=a({},ke,{code:"EPSG:3857",projection:Ze,transformation:(function(){var s=.5/(Math.PI*Ze.R);return $e(s,.5,-s,.5)})()}),H=a({},Ke,{code:"EPSG:900913"});function Te(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Se(s,p){var S="",z,P,Y,fe,we,Me;for(z=0,Y=s.length;z<Y;z++){for(we=s[z],P=0,fe=we.length;P<fe;P++)Me=we[P],S+=(P?"L":"M")+Me.x+" "+Me.y;S+=p?it.svg?"z":"x":""}return S||"M0 0"}var ae=document.documentElement.style,ie="ActiveXObject"in window,ue=ie&&!document.addEventListener,be="msLaunchUri"in navigator&&!("documentMode"in document),De=er("webkit"),ge=er("android"),X=er("android 2")||er("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),le=ge&&er("Google")&&oe<537&&!("AudioNode"in window),me=!!window.opera,ye=!be&&er("chrome"),de=er("gecko")&&!De&&!me&&!ie,Be=!ye&&er("safari"),Fe=er("phantom"),Re="OTransition"in ae,je=navigator.platform.indexOf("Win")===0,We=ie&&"transition"in ae,ht="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!X,dt="MozPerspective"in ae,Et=!window.L_DISABLE_3D&&(We||ht||dt)&&!Re&&!Fe,Nt=typeof orientation<"u"||er("mobile"),Qt=Nt&&De,tn=Nt&&ht,Sn=!window.PointerEvent&&window.MSPointerEvent,Cn=!!(window.PointerEvent||Sn),Un="ontouchstart"in window||!!window.TouchEvent,ki=!window.L_NO_TOUCH&&(Un||Cn),Is=Nt&&me,Hs=Nt&&de,qo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Vo=(function(){var s=!1;try{var p=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,p),window.removeEventListener("testPassiveEventSupport",g,p)}catch{}return s})(),Gs=(function(){return!!document.createElement("canvas").getContext})(),Yo=!!(document.createElementNS&&Te("svg").createSVGRect),Zr=!!Yo&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),xn=!Yo&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var p=s.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}})(),kn=navigator.platform.indexOf("Mac")===0,zi=navigator.platform.indexOf("Linux")===0;function er(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var it={ie,ielt9:ue,edge:be,webkit:De,android:ge,android23:X,androidStock:le,opera:me,chrome:ye,gecko:de,safari:Be,phantom:Fe,opera12:Re,win:je,ie3d:We,webkit3d:ht,gecko3d:dt,any3d:Et,mobile:Nt,mobileWebkit:Qt,mobileWebkit3d:tn,msPointer:Sn,pointer:Cn,touch:ki,touchNative:Un,mobileOpera:Is,mobileGecko:Hs,retina:qo,passiveEvents:Vo,canvas:Gs,svg:Yo,vml:xn,inlineSvg:Zr,mac:kn,linux:zi},Us=it.msPointer?"MSPointerDown":"pointerdown",Xo=it.msPointer?"MSPointerMove":"pointermove",Li=it.msPointer?"MSPointerUp":"pointerup",ja=it.msPointer?"MSPointerCancel":"pointercancel",Kr={touchstart:Us,touchmove:Xo,touchend:Li,touchcancel:ja},si={touchstart:zt,touchmove:Tr,touchend:Tr,touchcancel:Tr},_r={},li=!1;function un(s,p,S){return p==="touchstart"&&yu(),si[p]?(S=si[p].bind(this,S),s.addEventListener(Kr[p],S,!1),S):(console.warn("wrong event specified:",p),g)}function $s(s,p,S){if(!Kr[p]){console.warn("wrong event specified:",p);return}s.removeEventListener(Kr[p],S,!1)}function Zs(s){_r[s.pointerId]=s}function ui(s){_r[s.pointerId]&&(_r[s.pointerId]=s)}function ci(s){delete _r[s.pointerId]}function yu(){li||(document.addEventListener(Us,Zs,!0),document.addEventListener(Xo,ui,!0),document.addEventListener(Li,ci,!0),document.addEventListener(ja,ci,!0),li=!0)}function Tr(s,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var S in _r)p.touches.push(_r[S]);p.changedTouches=[p],s(p)}}function zt(s,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&cn(p),Tr(s,p)}function zn(s){var p={},S,z;for(z in s)S=s[z],p[z]=S&&S.bind?S.bind(s):S;return s=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var Pa=200;function fi(s,p){s.addEventListener("dblclick",p);var S=0,z;function P(Y){if(Y.detail!==1){z=Y.detail;return}if(!(Y.pointerType==="mouse"||Y.sourceCapabilities&&!Y.sourceCapabilities.firesTouchEvents)){var fe=bu(Y);if(!(fe.some(function(Me){return Me instanceof HTMLLabelElement&&Me.attributes.for})&&!fe.some(function(Me){return Me instanceof HTMLInputElement||Me instanceof HTMLSelectElement}))){var we=Date.now();we-S<=Pa?(z++,z===2&&p(zn(Y))):z=1,S=we}}}return s.addEventListener("click",P),{dblclick:p,simDblclick:P}}function $n(s,p){s.removeEventListener("dblclick",p.dblclick),s.removeEventListener("click",p.simDblclick)}var ra=Ua(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ia=Ua(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ia=Ia==="webkitTransition"||Ia==="OTransition"?Ia+"End":"transitionend";function Ks(s){return typeof s=="string"?document.getElementById(s):s}function aa(s,p){var S=s.style[p]||s.currentStyle&&s.currentStyle[p];if((!S||S==="auto")&&document.defaultView){var z=document.defaultView.getComputedStyle(s,null);S=z?z[p]:null}return S==="auto"?null:S}function Lt(s,p,S){var z=document.createElement(s);return z.className=p||"",S&&S.appendChild(z),z}function Kt(s){var p=s.parentNode;p&&p.removeChild(s)}function Zn(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function oa(s){var p=s.parentNode;p&&p.lastChild!==s&&p.appendChild(s)}function Ha(s){var p=s.parentNode;p&&p.firstChild!==s&&p.insertBefore(s,p.firstChild)}function Ga(s,p){if(s.classList!==void 0)return s.classList.contains(p);var S=Kn(s);return S.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(S)}function yt(s,p){if(s.classList!==void 0)for(var S=w(p),z=0,P=S.length;z<P;z++)s.classList.add(S[z]);else if(!Ga(s,p)){var Y=Kn(s);_u(s,(Y?Y+" ":"")+p)}}function qt(s,p){s.classList!==void 0?s.classList.remove(p):_u(s,x((" "+Kn(s)+" ").replace(" "+p+" "," ")))}function _u(s,p){s.className.baseVal===void 0?s.className=p:s.className.baseVal=p}function Kn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function tr(s,p){"opacity"in s.style?s.style.opacity=p:"filter"in s.style&&Wc(s,p)}function Wc(s,p){var S=!1,z="DXImageTransform.Microsoft.Alpha";try{S=s.filters.item(z)}catch{if(p===1)return}p=Math.round(p*100),S?(S.Enabled=p!==100,S.Opacity=p):s.style.filter+=" progid:"+z+"(opacity="+p+")"}function Ua(s){for(var p=document.documentElement.style,S=0;S<s.length;S++)if(s[S]in p)return s[S];return!1}function xr(s,p,S){var z=p||new V(0,0);s.style[ra]=(it.ie3d?"translate("+z.x+"px,"+z.y+"px)":"translate3d("+z.x+"px,"+z.y+"px,0)")+(S?" scale("+S+")":"")}function on(s,p){s._leaflet_pos=p,it.any3d?xr(s,p):(s.style.left=p.x+"px",s.style.top=p.y+"px")}function Fi(s){return s._leaflet_pos||new V(0,0)}var qr,Wo,qs;if("onselectstart"in document)qr=function(){gt(window,"selectstart",cn)},Wo=function(){Bt(window,"selectstart",cn)};else{var $a=Ua(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qr=function(){if($a){var s=document.documentElement.style;qs=s[$a],s[$a]="none"}},Wo=function(){$a&&(document.documentElement.style[$a]=qs,qs=void 0)}}function Qo(){gt(window,"dragstart",cn)}function xu(){Bt(window,"dragstart",cn)}var Vs,Za;function Jo(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ka(),Vs=s,Za=s.style.outlineStyle,s.style.outlineStyle="none",gt(window,"keydown",Ka))}function Ka(){Vs&&(Vs.style.outlineStyle=Za,Vs=void 0,Za=void 0,Bt(window,"keydown",Ka))}function sa(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Bi(s){var p=s.getBoundingClientRect();return{x:p.width/s.offsetWidth||1,y:p.height/s.offsetHeight||1,boundingClientRect:p}}var Qc={__proto__:null,TRANSFORM:ra,TRANSITION:Ia,TRANSITION_END:ia,get:Ks,getStyle:aa,create:Lt,remove:Kt,empty:Zn,toFront:oa,toBack:Ha,hasClass:Ga,addClass:yt,removeClass:qt,setClass:_u,getClass:Kn,setOpacity:tr,testProp:Ua,setTransform:xr,setPosition:on,getPosition:Fi,get disableTextSelection(){return qr},get enableTextSelection(){return Wo},disableImageDrag:Qo,enableImageDrag:xu,preventOutline:Jo,restoreOutline:Ka,getSizedParentNode:sa,getScale:Bi};function gt(s,p,S,z){if(p&&typeof p=="object")for(var P in p)la(s,P,p[P],S);else{p=w(p);for(var Y=0,fe=p.length;Y<fe;Y++)la(s,p[Y],S,z)}return this}var kr="_leaflet_events";function Bt(s,p,S,z){if(arguments.length===1)Vr(s),delete s[kr];else if(p&&typeof p=="object")for(var P in p)Yr(s,P,p[P],S);else if(p=w(p),arguments.length===2)Vr(s,function(we){return F(p,we)!==-1});else for(var Y=0,fe=p.length;Y<fe;Y++)Yr(s,p[Y],S,z);return this}function Vr(s,p){for(var S in s[kr]){var z=S.split(/\d/)[0];(!p||p(z))&&Yr(s,z,null,null,S)}}var es={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function la(s,p,S,z){var P=p+d(S)+(z?"_"+d(z):"");if(s[kr]&&s[kr][P])return this;var Y=function(we){return S.call(z||s,we||window.event)},fe=Y;!it.touchNative&&it.pointer&&p.indexOf("touch")===0?Y=un(s,p,Y):it.touch&&p==="dblclick"?Y=fi(s,Y):"addEventListener"in s?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?s.addEventListener(es[p]||p,Y,it.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Y=function(we){we=we||window.event,ca(s,we)&&fe(we)},s.addEventListener(es[p],Y,!1)):s.addEventListener(p,fe,!1):s.attachEvent("on"+p,Y),s[kr]=s[kr]||{},s[kr][P]=Y}function Yr(s,p,S,z,P){P=P||p+d(S)+(z?"_"+d(z):"");var Y=s[kr]&&s[kr][P];if(!Y)return this;!it.touchNative&&it.pointer&&p.indexOf("touch")===0?$s(s,p,Y):it.touch&&p==="dblclick"?$n(s,Y):"removeEventListener"in s?s.removeEventListener(es[p]||p,Y,!1):s.detachEvent("on"+p,Y),s[kr][P]=null}function hi(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function qa(s){return la(s,"wheel",hi),this}function Va(s){return gt(s,"mousedown touchstart dblclick contextmenu",hi),s._leaflet_disable_click=!0,this}function cn(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Xr(s){return cn(s),hi(s),this}function bu(s){if(s.composedPath)return s.composedPath();for(var p=[],S=s.target;S;)p.push(S),S=S.parentNode;return p}function qn(s,p){if(!p)return new V(s.clientX,s.clientY);var S=Bi(p),z=S.boundingClientRect;return new V((s.clientX-z.left)/S.x-p.clientLeft,(s.clientY-z.top)/S.y-p.clientTop)}var ua=it.linux&&it.chrome?window.devicePixelRatio:it.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ts(s){return it.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ua:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ca(s,p){var S=p.relatedTarget;if(!S)return!0;try{for(;S&&S!==s;)S=S.parentNode}catch{return!1}return S!==s}var om={__proto__:null,on:gt,off:Bt,stopPropagation:hi,disableScrollPropagation:qa,disableClickPropagation:Va,preventDefault:cn,stop:Xr,getPropagationPath:bu,getMousePosition:qn,getWheelDelta:ts,isExternalTarget:ca,addListener:gt,removeListener:Bt},Ys=ee.extend({run:function(s,p,S,z){this.stop(),this._el=s,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(z||.5,.2),this._startPos=Fi(s),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(s){var p=+new Date-this._startTime,S=this._duration*1e3;p<S?this._runFrame(this._easeOut(p/S),s):(this._runFrame(1),this._complete())},_runFrame:function(s,p){var S=this._startPos.add(this._offset.multiplyBy(s));p&&S._round(),on(this._el,S),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),St=ee.extend({options:{crs:Ke,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,p){p=y(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(_e(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ia&&it.any3d&&!it.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),gt(this._proxy,ia,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,p,S){if(p=p===void 0?this._zoom:this._limitZoom(p),s=this._limitCenter(_e(s),p,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=a({animate:S.animate},S.zoom),S.pan=a({animate:S.animate,duration:S.duration},S.pan));var z=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,p,S.zoom):this._tryAnimatedPan(s,S.pan);if(z)return clearTimeout(this._sizeTimer),this}return this._resetView(s,p,S.pan&&S.pan.noMoveStart),this},setZoom:function(s,p){return this._loaded?this.setView(this.getCenter(),s,{zoom:p}):(this._zoom=s,this)},zoomIn:function(s,p){return s=s||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,p)},zoomOut:function(s,p){return s=s||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,p)},setZoomAround:function(s,p,S){var z=this.getZoomScale(p),P=this.getSize().divideBy(2),Y=s instanceof V?s:this.latLngToContainerPoint(s),fe=Y.subtract(P).multiplyBy(1-1/z),we=this.containerPointToLatLng(P.add(fe));return this.setView(we,p,{zoom:S})},_getBoundsCenterZoom:function(s,p){p=p||{},s=s.getBounds?s.getBounds():ce(s);var S=$(p.paddingTopLeft||p.padding||[0,0]),z=$(p.paddingBottomRight||p.padding||[0,0]),P=this.getBoundsZoom(s,!1,S.add(z));if(P=typeof p.maxZoom=="number"?Math.min(p.maxZoom,P):P,P===1/0)return{center:s.getCenter(),zoom:P};var Y=z.subtract(S).divideBy(2),fe=this.project(s.getSouthWest(),P),we=this.project(s.getNorthEast(),P),Me=this.unproject(fe.add(we).divideBy(2).add(Y),P);return{center:Me,zoom:P}},fitBounds:function(s,p){if(s=ce(s),!s.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(s,p);return this.setView(S.center,S.zoom,p)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,p){return this.setView(s,this._zoom,{pan:p})},panBy:function(s,p){if(s=$(s).round(),p=p||{},!s.x&&!s.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ys,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){yt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,S,p.duration||.25,p.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,p,S){if(S=S||{},S.animate===!1||!it.any3d)return this.setView(s,p,S);this._stop();var z=this.project(this.getCenter()),P=this.project(s),Y=this.getSize(),fe=this._zoom;s=_e(s),p=p===void 0?fe:p;var we=Math.max(Y.x,Y.y),Me=we*this.getZoomScale(fe,p),Ge=P.distanceTo(z)||1,Ve=1.42,Qe=Ve*Ve;function nt(nn){var Jr=nn?-1:1,pi=nn?Me:we,Ii=Me*Me-we*we+Jr*Qe*Qe*Ge*Ge,gi=2*pi*Qe*Ge,ms=Ii/gi,ll=Math.sqrt(ms*ms+1)-ms,ps=ll<1e-9?-18:Math.log(ll);return ps}function pt(nn){return(Math.exp(nn)-Math.exp(-nn))/2}function Vt(nn){return(Math.exp(nn)+Math.exp(-nn))/2}function sn(nn){return pt(nn)/Vt(nn)}var Fn=nt(0);function br(nn){return we*(Vt(Fn)/Vt(Fn+Ve*nn))}function yf(nn){return we*(Vt(Fn)*sn(Fn+Ve*nn)-pt(Fn))/Qe}function _f(nn){return 1-Math.pow(1-nn,1.5)}var ds=Date.now(),oo=(nt(1)-Fn)/Ve,xf=S.duration?1e3*S.duration:1e3*oo*.8;function so(){var nn=(Date.now()-ds)/xf,Jr=_f(nn)*oo;nn<=1?(this._flyToFrame=U(so,this),this._move(this.unproject(z.add(P.subtract(z).multiplyBy(yf(Jr)/Ge)),fe),this.getScaleZoom(we/br(Jr),fe),{flyTo:!0})):this._move(s,p)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),so.call(this),this},flyToBounds:function(s,p){var S=this._getBoundsCenterZoom(s,p);return this.flyTo(S.center,S.zoom,p)},setMaxBounds:function(s){return s=ce(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var p=this.options.minZoom;return this.options.minZoom=s,this._loaded&&p!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var p=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&p!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,p){this._enforcingBounds=!0;var S=this.getCenter(),z=this._limitCenter(S,this._zoom,ce(s));return S.equals(z)||this.panTo(z,p),this._enforcingBounds=!1,this},panInside:function(s,p){p=p||{};var S=$(p.paddingTopLeft||p.padding||[0,0]),z=$(p.paddingBottomRight||p.padding||[0,0]),P=this.project(this.getCenter()),Y=this.project(s),fe=this.getPixelBounds(),we=ne([fe.min.add(S),fe.max.subtract(z)]),Me=we.getSize();if(!we.contains(Y)){this._enforcingBounds=!0;var Ge=Y.subtract(we.getCenter()),Ve=we.extend(Y).getSize().subtract(Me);P.x+=Ge.x<0?-Ve.x:Ve.x,P.y+=Ge.y<0?-Ve.y:Ve.y,this.panTo(this.unproject(P),p),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=a({animate:!1,pan:!0},s===!0?{animate:!0}:s);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),z=p.divideBy(2).round(),P=S.divideBy(2).round(),Y=z.subtract(P);return!Y.x&&!Y.y?this:(s.animate&&s.pan?this.panBy(Y):(s.pan&&this._rawPanBy(Y),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=a({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=c(this._handleGeolocationResponse,this),S=c(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,S,s):navigator.geolocation.getCurrentPosition(p,S,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var p=s.code,S=s.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var p=s.coords.latitude,S=s.coords.longitude,z=new pe(p,S),P=z.toBounds(s.coords.accuracy*2),Y=this._locateOptions;if(Y.setView){var fe=this.getBoundsZoom(P);this.setView(z,Y.maxZoom?Math.min(fe,Y.maxZoom):fe)}var we={latlng:z,bounds:P,timestamp:s.timestamp};for(var Me in s.coords)typeof s.coords[Me]=="number"&&(we[Me]=s.coords[Me]);this.fire("locationfound",we)}},addHandler:function(s,p){if(!p)return this;var S=this[s]=new p(this);return this._handlers.push(S),this.options[s]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Kt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Kt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,p){var S="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),z=Lt("div",S,p||this._mapPane);return s&&(this._panes[s]=z),z},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),p=this.unproject(s.getBottomLeft()),S=this.unproject(s.getTopRight());return new se(p,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,p,S){s=ce(s),S=$(S||[0,0]);var z=this.getZoom()||0,P=this.getMinZoom(),Y=this.getMaxZoom(),fe=s.getNorthWest(),we=s.getSouthEast(),Me=this.getSize().subtract(S),Ge=ne(this.project(we,z),this.project(fe,z)).getSize(),Ve=it.any3d?this.options.zoomSnap:1,Qe=Me.x/Ge.x,nt=Me.y/Ge.y,pt=p?Math.max(Qe,nt):Math.min(Qe,nt);return z=this.getScaleZoom(pt,z),Ve&&(z=Math.round(z/(Ve/100))*(Ve/100),z=p?Math.ceil(z/Ve)*Ve:Math.floor(z/Ve)*Ve),Math.max(P,Math.min(Y,z))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,p){var S=this._getTopLeftPoint(s,p);return new q(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,p){var S=this.options.crs;return p=p===void 0?this._zoom:p,S.scale(s)/S.scale(p)},getScaleZoom:function(s,p){var S=this.options.crs;p=p===void 0?this._zoom:p;var z=S.zoom(s*S.scale(p));return isNaN(z)?1/0:z},project:function(s,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(_e(s),p)},unproject:function(s,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng($(s),p)},layerPointToLatLng:function(s){var p=$(s).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(s){var p=this.project(_e(s))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(_e(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ce(s))},distance:function(s,p){return this.options.crs.distance(_e(s),_e(p))},containerPointToLayerPoint:function(s){return $(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return $(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var p=this.containerPointToLayerPoint($(s));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_e(s)))},mouseEventToContainerPoint:function(s){return qn(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var p=this._container=Ks(s);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");gt(p,"scroll",this._onScroll,this),this._containerId=d(p)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&it.any3d,yt(s,"leaflet-container"+(it.touch?" leaflet-touch":"")+(it.retina?" leaflet-retina":"")+(it.ielt9?" leaflet-oldie":"")+(it.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=aa(s,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),on(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yt(s.markerPane,"leaflet-zoom-hide"),yt(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,p,S){on(this._mapPane,new V(0,0));var z=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var P=this._zoom!==p;this._moveStart(P,S)._move(s,p)._moveEnd(P),this.fire("viewreset"),z&&this.fire("load")},_moveStart:function(s,p){return s&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(s,p,S,z){p===void 0&&(p=this._zoom);var P=this._zoom!==p;return this._zoom=p,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),z?S&&S.pinch&&this.fire("zoom",S):((P||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){on(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var p=s?Bt:gt;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),it.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,p){for(var S=[],z,P=p==="mouseout"||p==="mouseover",Y=s.target||s.srcElement,fe=!1;Y;){if(z=this._targets[d(Y)],z&&(p==="click"||p==="preclick")&&this._draggableMoved(z)){fe=!0;break}if(z&&z.listens(p,!0)&&(P&&!ca(Y,s)||(S.push(z),P))||Y===this._container)break;Y=Y.parentNode}return!S.length&&!fe&&!P&&this.listens(p,!0)&&(S=[this]),S},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var p=s.target||s.srcElement;if(!(!this._loaded||p._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(p))){var S=s.type;S==="mousedown"&&Jo(p),this._fireDOMEvent(s,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,p,S){if(s.type==="click"){var z=a({},s);z.type="preclick",this._fireDOMEvent(z,z.type,S)}var P=this._findEventTargets(s,p);if(S){for(var Y=[],fe=0;fe<S.length;fe++)S[fe].listens(p,!0)&&Y.push(S[fe]);P=Y.concat(P)}if(P.length){p==="contextmenu"&&cn(s);var we=P[0],Me={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Ge=we.getLatLng&&(!we._radius||we._radius<=10);Me.containerPoint=Ge?this.latLngToContainerPoint(we.getLatLng()):this.mouseEventToContainerPoint(s),Me.layerPoint=this.containerPointToLayerPoint(Me.containerPoint),Me.latlng=Ge?we.getLatLng():this.layerPointToLatLng(Me.layerPoint)}for(fe=0;fe<P.length;fe++)if(P[fe].fire(p,Me,!0),Me.originalEvent._stopped||P[fe].options.bubblingMouseEvents===!1&&F(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,p=this._handlers.length;s<p;s++)this._handlers[s].disable()},whenReady:function(s,p){return this._loaded?s.call(p||this,{target:this}):this.on("load",s,p),this},_getMapPanePos:function(){return Fi(this._mapPane)||new V(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,p){var S=s&&p!==void 0?this._getNewPixelOrigin(s,p):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,p){var S=this.getSize()._divideBy(2);return this.project(s,p)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,p,S){var z=this._getNewPixelOrigin(S,p);return this.project(s,p)._subtract(z)},_latLngBoundsToNewLayerBounds:function(s,p,S){var z=this._getNewPixelOrigin(S,p);return ne([this.project(s.getSouthWest(),p)._subtract(z),this.project(s.getNorthWest(),p)._subtract(z),this.project(s.getSouthEast(),p)._subtract(z),this.project(s.getNorthEast(),p)._subtract(z)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,p,S){if(!S)return s;var z=this.project(s,p),P=this.getSize().divideBy(2),Y=new q(z.subtract(P),z.add(P)),fe=this._getBoundsOffset(Y,S,p);return Math.abs(fe.x)<=1&&Math.abs(fe.y)<=1?s:this.unproject(z.add(fe),p)},_limitOffset:function(s,p){if(!p)return s;var S=this.getPixelBounds(),z=new q(S.min.add(s),S.max.add(s));return s.add(this._getBoundsOffset(z,p))},_getBoundsOffset:function(s,p,S){var z=ne(this.project(p.getNorthEast(),S),this.project(p.getSouthWest(),S)),P=z.min.subtract(s.min),Y=z.max.subtract(s.max),fe=this._rebound(P.x,-Y.x),we=this._rebound(P.y,-Y.y);return new V(fe,we)},_rebound:function(s,p){return s+p>0?Math.round(s-p)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(p))},_limitZoom:function(s){var p=this.getMinZoom(),S=this.getMaxZoom(),z=it.any3d?this.options.zoomSnap:1;return z&&(s=Math.round(s/z)*z),Math.max(p,Math.min(S,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,p){var S=this._getCenterOffset(s)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,p),!0)},_createAnimProxy:function(){var s=this._proxy=Lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(p){var S=ra,z=this._proxy.style[S];xr(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),z===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Kt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),p=this.getZoom();xr(this._proxy,this.project(s,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,p,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var z=this.getZoomScale(p),P=this._getCenterOffset(s)._divideBy(1-1/z);return S.animate!==!0&&!this.getSize().contains(P)?!1:(U(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(s,p,!0)},this),!0)},_animateZoom:function(s,p,S,z){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=p,yt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:p,noUpdate:z}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ns(s,p){return new St(s,p)}var nr=B.extend({options:{position:"topright"},initialize:function(s){y(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var p=this._map;return p&&p.removeControl(this),this.options.position=s,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var p=this._container=this.onAdd(s),S=this.getPosition(),z=s._controlCorners[S];return yt(p,"leaflet-control"),S.indexOf("bottom")!==-1?z.insertBefore(p,z.firstChild):z.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Kt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ya=function(s){return new nr(s)};St.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},p="leaflet-",S=this._controlContainer=Lt("div",p+"control-container",this._container);function z(P,Y){var fe=p+P+" "+p+Y;s[P+Y]=Lt("div",fe,S)}z("top","left"),z("top","right"),z("bottom","left"),z("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Kt(this._controlCorners[s]);Kt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Jc=nr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,p,S,z){return S<z?-1:z<S?1:0}},initialize:function(s,p,S){y(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var z in s)this._addLayer(s[z],z);for(z in p)this._addLayer(p[z],z,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return nr.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,p){return this._addLayer(s,p),this._map?this._update():this},addOverlay:function(s,p){return this._addLayer(s,p,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var p=this._getLayer(d(s));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){yt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(yt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",p=this._container=Lt("div",s),S=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Va(p),qa(p);var z=this._section=Lt("section",s+"-list");S&&(this._map.on("click",this.collapse,this),gt(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=Lt("a",s+"-toggle",p);P.href="#",P.title="Layers",P.setAttribute("role","button"),gt(P,{keydown:function(Y){Y.keyCode===13&&this._expandSafely()},click:function(Y){cn(Y),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=Lt("div",s+"-base",z),this._separator=Lt("div",s+"-separator",z),this._overlaysList=Lt("div",s+"-overlays",z),p.appendChild(z)},_getLayer:function(s){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&d(this._layers[p].layer)===s)return this._layers[p]},_addLayer:function(s,p,S){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:p,overlay:S}),this.options.sortLayers&&this._layers.sort(c(function(z,P){return this.options.sortFunction(z.layer,P.layer,z.name,P.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zn(this._baseLayersList),Zn(this._overlaysList),this._layerControlInputs=[];var s,p,S,z,P=0;for(S=0;S<this._layers.length;S++)z=this._layers[S],this._addItem(z),p=p||z.overlay,s=s||!z.overlay,P+=z.overlay?0:1;return this.options.hideSingleBase&&(s=s&&P>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=p&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var p=this._getLayer(d(s.target)),S=p.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;S&&this._map.fire(S,p)},_createRadioElement:function(s,p){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(p?' checked="checked"':"")+"/>",z=document.createElement("div");return z.innerHTML=S,z.firstChild},_addItem:function(s){var p=document.createElement("label"),S=this._map.hasLayer(s.layer),z;s.overlay?(z=document.createElement("input"),z.type="checkbox",z.className="leaflet-control-layers-selector",z.defaultChecked=S):z=this._createRadioElement("leaflet-base-layers_"+d(this),S),this._layerControlInputs.push(z),z.layerId=d(s.layer),gt(z,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+s.name;var Y=document.createElement("span");p.appendChild(Y),Y.appendChild(z),Y.appendChild(P);var fe=s.overlay?this._overlaysList:this._baseLayersList;return fe.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,p,S,z=[],P=[];this._handlingClick=!0;for(var Y=s.length-1;Y>=0;Y--)p=s[Y],S=this._getLayer(p.layerId).layer,p.checked?z.push(S):p.checked||P.push(S);for(Y=0;Y<P.length;Y++)this._map.hasLayer(P[Y])&&this._map.removeLayer(P[Y]);for(Y=0;Y<z.length;Y++)this._map.hasLayer(z[Y])||this._map.addLayer(z[Y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,p,S,z=this._map.getZoom(),P=s.length-1;P>=0;P--)p=s[P],S=this._getLayer(p.layerId).layer,p.disabled=S.options.minZoom!==void 0&&z<S.options.minZoom||S.options.maxZoom!==void 0&&z>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,gt(s,"click",cn),this.expand();var p=this;setTimeout(function(){Bt(s,"click",cn),p._preventClick=!1})}}),sm=function(s,p,S){return new Jc(s,p,S)},wu=nr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var p="leaflet-control-zoom",S=Lt("div",p+" leaflet-bar"),z=this.options;return this._zoomInButton=this._createButton(z.zoomInText,z.zoomInTitle,p+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(z.zoomOutText,z.zoomOutTitle,p+"-out",S,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,p,S,z,P){var Y=Lt("a",S,z);return Y.innerHTML=s,Y.href="#",Y.title=p,Y.setAttribute("role","button"),Y.setAttribute("aria-label",p),Va(Y),gt(Y,"click",Xr),gt(Y,"click",P,this),gt(Y,"click",this._refocusOnMap,this),Y},_updateDisabled:function(){var s=this._map,p="leaflet-disabled";qt(this._zoomInButton,p),qt(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(yt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(yt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wu,this.addControl(this.zoomControl))});var Du=function(s){return new wu(s)},ef=nr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var p="leaflet-control-scale",S=Lt("div",p),z=this.options;return this._addScales(z,p+"-line",S),s.on(z.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),S},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,p,S){s.metric&&(this._mScale=Lt("div",p,S)),s.imperial&&(this._iScale=Lt("div",p,S))},_update:function(){var s=this._map,p=s.getSize().y/2,S=s.distance(s.containerPointToLatLng([0,p]),s.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(S)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var p=this._getRoundNum(s),S=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,S,p/s)},_updateImperial:function(s){var p=s*3.2808399,S,z,P;p>5280?(S=p/5280,z=this._getRoundNum(S),this._updateScale(this._iScale,z+" mi",z/S)):(P=this._getRoundNum(p),this._updateScale(this._iScale,P+" ft",P/p))},_updateScale:function(s,p,S){s.style.width=Math.round(this.options.maxWidth*S)+"px",s.innerHTML=p},_getRoundNum:function(s){var p=Math.pow(10,(Math.floor(s)+"").length-1),S=s/p;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,p*S}}),lm=function(s){return new ef(s)},um='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eu=nr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(it.inlineSvg?um+" ":"")+"Leaflet</a>"},initialize:function(s){y(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Lt("div","leaflet-control-attribution"),Va(this._container);for(var p in s._layers)s._layers[p].getAttribution&&this.addAttribution(s._layers[p].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var p in this._attributions)this._attributions[p]&&s.push(p);var S=[];this.options.prefix&&S.push(this.options.prefix),s.length&&S.push(s.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new Eu().addTo(this)});var cm=function(s){return new Eu(s)};nr.Layers=Jc,nr.Zoom=wu,nr.Scale=ef,nr.Attribution=Eu,Ya.layers=sm,Ya.zoom=Du,Ya.scale=lm,Ya.attribution=cm;var zr=B.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});zr.addTo=function(s,p){return s.addHandler(p,this),this};var fm={Events:K},tf=it.touch?"touchstart mousedown":"mousedown",Ri=ee.extend({options:{clickTolerance:3},initialize:function(s,p,S,z){y(this,z),this._element=s,this._dragStartTarget=p||s,this._preventOutline=S},enable:function(){this._enabled||(gt(this._dragStartTarget,tf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ri._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,tf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ga(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ri._dragging===this&&this.finishDrag();return}if(!(Ri._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ri._dragging=this,this._preventOutline&&Jo(this._element),Qo(),qr(),!this._moving)){this.fire("down");var p=s.touches?s.touches[0]:s,S=sa(this._element);this._startPoint=new V(p.clientX,p.clientY),this._startPos=Fi(this._element),this._parentScale=Bi(S);var z=s.type==="mousedown";gt(document,z?"mousemove":"touchmove",this._onMove,this),gt(document,z?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var p=s.touches&&s.touches.length===1?s.touches[0]:s,S=new V(p.clientX,p.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,cn(s),this._moved||(this.fire("dragstart"),this._moved=!0,yt(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),on(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){qt(document.body,"leaflet-dragging"),this._lastTarget&&(qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),xu(),Wo();var p=this._moved&&this._moving;this._moving=!1,Ri._dragging=!1,p&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function nf(s,p,S){var z,P=[1,4,2,8],Y,fe,we,Me,Ge,Ve,Qe,nt;for(Y=0,Ve=s.length;Y<Ve;Y++)s[Y]._code=fa(s[Y],p);for(we=0;we<4;we++){for(Qe=P[we],z=[],Y=0,Ve=s.length,fe=Ve-1;Y<Ve;fe=Y++)Me=s[Y],Ge=s[fe],Me._code&Qe?Ge._code&Qe||(nt=Ws(Ge,Me,Qe,p,S),nt._code=fa(nt,p),z.push(nt)):(Ge._code&Qe&&(nt=Ws(Ge,Me,Qe,p,S),nt._code=fa(nt,p),z.push(nt)),z.push(Me));s=z}return s}function Xs(s,p){var S,z,P,Y,fe,we,Me,Ge,Ve;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Qe=_e([0,0]),nt=ce(s),pt=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());pt<1700&&(Qe=Su(s));var Vt=s.length,sn=[];for(S=0;S<Vt;S++){var Fn=_e(s[S]);sn.push(p.project(_e([Fn.lat-Qe.lat,Fn.lng-Qe.lng])))}for(we=Me=Ge=0,S=0,z=Vt-1;S<Vt;z=S++)P=sn[S],Y=sn[z],fe=P.y*Y.x-Y.y*P.x,Me+=(P.x+Y.x)*fe,Ge+=(P.y+Y.y)*fe,we+=fe*3;we===0?Ve=sn[0]:Ve=[Me/we,Ge/we];var br=p.unproject($(Ve));return _e([br.lat+Qe.lat,br.lng+Qe.lng])}function Su(s){for(var p=0,S=0,z=0,P=0;P<s.length;P++){var Y=_e(s[P]);p+=Y.lat,S+=Y.lng,z++}return _e([p/z,S/z])}var hm={__proto__:null,clipPolygon:nf,polygonCenter:Xs,centroid:Su};function rf(s,p){if(!p||!s.length)return s.slice();var S=p*p;return s=pm(s,S),s=mm(s,S),s}function Cu(s,p,S){return Math.sqrt(ha(s,p,S,!0))}function dm(s,p,S){return ha(s,p,S)}function mm(s,p){var S=s.length,z=typeof Uint8Array<"u"?Uint8Array:Array,P=new z(S);P[0]=P[S-1]=1,Au(s,P,p,0,S-1);var Y,fe=[];for(Y=0;Y<S;Y++)P[Y]&&fe.push(s[Y]);return fe}function Au(s,p,S,z,P){var Y=0,fe,we,Me;for(we=z+1;we<=P-1;we++)Me=ha(s[we],s[z],s[P],!0),Me>Y&&(fe=we,Y=Me);Y>S&&(p[fe]=1,Au(s,p,S,z,fe),Au(s,p,S,fe,P))}function pm(s,p){for(var S=[s[0]],z=1,P=0,Y=s.length;z<Y;z++)gm(s[z],s[P])>p&&(S.push(s[z]),P=z);return P<Y-1&&S.push(s[Y-1]),S}var af;function of(s,p,S,z,P){var Y=z?af:fa(s,S),fe=fa(p,S),we,Me,Ge;for(af=fe;;){if(!(Y|fe))return[s,p];if(Y&fe)return!1;we=Y||fe,Me=Ws(s,p,we,S,P),Ge=fa(Me,S),we===Y?(s=Me,Y=Ge):(p=Me,fe=Ge)}}function Ws(s,p,S,z,P){var Y=p.x-s.x,fe=p.y-s.y,we=z.min,Me=z.max,Ge,Ve;return S&8?(Ge=s.x+Y*(Me.y-s.y)/fe,Ve=Me.y):S&4?(Ge=s.x+Y*(we.y-s.y)/fe,Ve=we.y):S&2?(Ge=Me.x,Ve=s.y+fe*(Me.x-s.x)/Y):S&1&&(Ge=we.x,Ve=s.y+fe*(we.x-s.x)/Y),new V(Ge,Ve,P)}function fa(s,p){var S=0;return s.x<p.min.x?S|=1:s.x>p.max.x&&(S|=2),s.y<p.min.y?S|=4:s.y>p.max.y&&(S|=8),S}function gm(s,p){var S=p.x-s.x,z=p.y-s.y;return S*S+z*z}function ha(s,p,S,z){var P=p.x,Y=p.y,fe=S.x-P,we=S.y-Y,Me=fe*fe+we*we,Ge;return Me>0&&(Ge=((s.x-P)*fe+(s.y-Y)*we)/Me,Ge>1?(P=S.x,Y=S.y):Ge>0&&(P+=fe*Ge,Y+=we*Ge)),fe=s.x-P,we=s.y-Y,z?fe*fe+we*we:new V(P,Y)}function Ln(s){return!N(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function sf(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(s)}function Nu(s,p){var S,z,P,Y,fe,we,Me,Ge;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ve=_e([0,0]),Qe=ce(s),nt=Qe.getNorthWest().distanceTo(Qe.getSouthWest())*Qe.getNorthEast().distanceTo(Qe.getNorthWest());nt<1700&&(Ve=Su(s));var pt=s.length,Vt=[];for(S=0;S<pt;S++){var sn=_e(s[S]);Vt.push(p.project(_e([sn.lat-Ve.lat,sn.lng-Ve.lng])))}for(S=0,z=0;S<pt-1;S++)z+=Vt[S].distanceTo(Vt[S+1])/2;if(z===0)Ge=Vt[0];else for(S=0,Y=0;S<pt-1;S++)if(fe=Vt[S],we=Vt[S+1],P=fe.distanceTo(we),Y+=P,Y>z){Me=(Y-z)/P,Ge=[we.x-Me*(we.x-fe.x),we.y-Me*(we.y-fe.y)];break}var Fn=p.unproject($(Ge));return _e([Fn.lat+Ve.lat,Fn.lng+Ve.lng])}var lf={__proto__:null,simplify:rf,pointToSegmentDistance:Cu,closestPointOnSegment:dm,clipSegment:of,_getEdgeIntersection:Ws,_getBitCode:fa,_sqClosestPointOnSegment:ha,isFlat:Ln,_flat:sf,polylineCenter:Nu},Qs={project:function(s){return new V(s.lng,s.lat)},unproject:function(s){return new pe(s.y,s.x)},bounds:new q([-180,-90],[180,90])},Js={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var p=Math.PI/180,S=this.R,z=s.lat*p,P=this.R_MINOR/S,Y=Math.sqrt(1-P*P),fe=Y*Math.sin(z),we=Math.tan(Math.PI/4-z/2)/Math.pow((1-fe)/(1+fe),Y/2);return z=-S*Math.log(Math.max(we,1e-10)),new V(s.lng*p*S,z)},unproject:function(s){for(var p=180/Math.PI,S=this.R,z=this.R_MINOR/S,P=Math.sqrt(1-z*z),Y=Math.exp(-s.y/S),fe=Math.PI/2-2*Math.atan(Y),we=0,Me=.1,Ge;we<15&&Math.abs(Me)>1e-7;we++)Ge=P*Math.sin(fe),Ge=Math.pow((1-Ge)/(1+Ge),P/2),Me=Math.PI/2-2*Math.atan(Y*Ge)-fe,fe+=Me;return new pe(fe*p,s.x*p/S)}},uf={__proto__:null,LonLat:Qs,Mercator:Js,SphericalMercator:Ze},Xa=a({},ke,{code:"EPSG:3395",projection:Js,transformation:(function(){var s=.5/(Math.PI*Js.R);return $e(s,.5,-s,.5)})()}),cf=a({},ke,{code:"EPSG:4326",projection:Qs,transformation:$e(1/180,1,-1/180,.5)}),vm=a({},ze,{projection:Qs,transformation:$e(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,p){var S=p.lng-s.lng,z=p.lat-s.lat;return Math.sqrt(S*S+z*z)},infinite:!0});ze.Earth=ke,ze.EPSG3395=Xa,ze.EPSG3857=Ke,ze.EPSG900913=H,ze.EPSG4326=cf,ze.Simple=vm;var Lr=ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var p=s.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var S=this.getEvents();p.on(S,this),this.once("remove",function(){p.off(S,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});St.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var p=d(s);return this._layers[p]?this:(this._layers[p]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var p=d(s);return this._layers[p]?(this._loaded&&s.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,p){for(var S in this._layers)s.call(p,this._layers[S]);return this},_addLayers:function(s){s=s?N(s)?s:[s]:[];for(var p=0,S=s.length;p<S;p++)this.addLayer(s[p])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var p=d(s);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,p=-1/0,S=this._getZoomSpan();for(var z in this._zoomBoundLayers){var P=this._zoomBoundLayers[z].options;s=P.minZoom===void 0?s:Math.min(s,P.minZoom),p=P.maxZoom===void 0?p:Math.max(p,P.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=s===1/0?void 0:s,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var da=Lr.extend({initialize:function(s,p){y(this,p),this._layers={};var S,z;if(s)for(S=0,z=s.length;S<z;S++)this.addLayer(s[S])},addLayer:function(s){var p=this.getLayerId(s);return this._layers[p]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var p=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(s){var p=typeof s=="number"?s:this.getLayerId(s);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var p=Array.prototype.slice.call(arguments,1),S,z;for(S in this._layers)z=this._layers[S],z[s]&&z[s].apply(z,p);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,p){for(var S in this._layers)s.call(p,this._layers[S]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),ff=function(s,p){return new da(s,p)},fr=da.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),da.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),da.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new se;for(var p in this._layers){var S=this._layers[p];s.extend(S.getBounds?S.getBounds():S.getLatLng())}return s}}),rs=function(s,p){return new fr(s,p)},Wa=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){y(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,p){var S=this._getIconUrl(s);if(!S){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var z=this._createImg(S,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(z,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(z.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),z},_setIconStyles:function(s,p){var S=this.options,z=S[p+"Size"];typeof z=="number"&&(z=[z,z]);var P=$(z),Y=$(p==="shadow"&&S.shadowAnchor||S.iconAnchor||P&&P.divideBy(2,!0));s.className="leaflet-marker-"+p+" "+(S.className||""),Y&&(s.style.marginLeft=-Y.x+"px",s.style.marginTop=-Y.y+"px"),P&&(s.style.width=P.x+"px",s.style.height=P.y+"px")},_createImg:function(s,p){return p=p||document.createElement("img"),p.src=s,p},_getIconUrl:function(s){return it.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function el(s){return new Wa(s)}var Qa=Wa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Qa.imagePath!="string"&&(Qa.imagePath=this._detectIconPath()),(this.options.imagePath||Qa.imagePath)+Wa.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var p=function(S,z,P){var Y=z.exec(S);return Y&&Y[P]};return s=p(s,/^url\((['"])?(.+)\1\)$/,2),s&&p(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Lt("div","leaflet-default-icon-path",document.body),p=aa(s,"background-image")||aa(s,"backgroundImage");if(document.body.removeChild(s),p=this._stripUrl(p),p)return p;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Mu=zr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ri(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yt(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var p=this._marker,S=p._map,z=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,Y=Fi(p._icon),fe=S.getPixelBounds(),we=S.getPixelOrigin(),Me=ne(fe.min._subtract(we).add(P),fe.max._subtract(we).subtract(P));if(!Me.contains(Y)){var Ge=$((Math.max(Me.max.x,Y.x)-Me.max.x)/(fe.max.x-Me.max.x)-(Math.min(Me.min.x,Y.x)-Me.min.x)/(fe.min.x-Me.min.x),(Math.max(Me.max.y,Y.y)-Me.max.y)/(fe.max.y-Me.max.y)-(Math.min(Me.min.y,Y.y)-Me.min.y)/(fe.min.y-Me.min.y)).multiplyBy(z);S.panBy(Ge,{animate:!1}),this._draggable._newPos._add(Ge),this._draggable._startPos._add(Ge),on(p._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=U(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,s)))},_onDrag:function(s){var p=this._marker,S=p._shadow,z=Fi(p._icon),P=p._map.layerPointToLatLng(z);S&&on(S,z),p._latlng=P,s.latlng=P,s.oldLatLng=this._oldLatLng,p.fire("move",s).fire("drag",s)},_onDragEnd:function(s){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ja=Lr.extend({options:{icon:new Qa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,p){y(this,p),this._latlng=_e(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var p=this._latlng;return this._latlng=_e(s),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=s.icon.createIcon(this._icon),z=!1;S!==this._icon&&(this._icon&&this._removeIcon(),z=!0,s.title&&(S.title=s.title),S.tagName==="IMG"&&(S.alt=s.alt||"")),yt(S,p),s.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(S,"focus",this._panOnFocus,this);var P=s.icon.createShadow(this._shadow),Y=!1;P!==this._shadow&&(this._removeShadow(),Y=!0),P&&(yt(P,p),P.alt=""),this._shadow=P,s.opacity<1&&this._updateOpacity(),z&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&Y&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),Kt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Kt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&on(this._icon,s),this._shadow&&on(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var p=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(yt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mu)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mu(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&tr(this._icon,s),this._shadow&&tr(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var p=this.options.icon.options,S=p.iconSize?$(p.iconSize):$(0,0),z=p.iconAnchor?$(p.iconAnchor):$(0,0);s.panInside(this._latlng,{paddingTopLeft:z,paddingBottomRight:S.subtract(z)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Tu(s,p){return new Ja(s,p)}var di=Lr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return y(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),is=di.extend({options:{fill:!0,radius:10},initialize:function(s,p){y(this,p),this._latlng=_e(s),this._radius=this.options.radius},setLatLng:function(s){var p=this._latlng;return this._latlng=_e(s),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var p=s&&s.radius||this._radius;return di.prototype.setStyle.call(this,s),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,p=this._radiusY||s,S=this._clickTolerance(),z=[s+S,p+S];this._pxBounds=new q(this._point.subtract(z),this._point.add(z))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function hf(s,p){return new is(s,p)}var ku=is.extend({initialize:function(s,p,S){if(typeof p=="number"&&(p=a({},S,{radius:p})),y(this,p),this._latlng=_e(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new se(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:di.prototype.setStyle,_project:function(){var s=this._latlng.lng,p=this._latlng.lat,S=this._map,z=S.options.crs;if(z.distance===ke.distance){var P=Math.PI/180,Y=this._mRadius/ke.R/P,fe=S.project([p+Y,s]),we=S.project([p-Y,s]),Me=fe.add(we).divideBy(2),Ge=S.unproject(Me).lat,Ve=Math.acos((Math.cos(Y*P)-Math.sin(p*P)*Math.sin(Ge*P))/(Math.cos(p*P)*Math.cos(Ge*P)))/P;(isNaN(Ve)||Ve===0)&&(Ve=Y/Math.cos(Math.PI/180*p)),this._point=Me.subtract(S.getPixelOrigin()),this._radius=isNaN(Ve)?0:Me.x-S.project([Ge,s-Ve]).x,this._radiusY=Me.y-fe.y}else{var Qe=z.unproject(z.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(Qe).x}this._updateBounds()}});function ym(s,p,S){return new ku(s,p,S)}var mi=di.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,p){y(this,p),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var p=1/0,S=null,z=ha,P,Y,fe=0,we=this._parts.length;fe<we;fe++)for(var Me=this._parts[fe],Ge=1,Ve=Me.length;Ge<Ve;Ge++){P=Me[Ge-1],Y=Me[Ge];var Qe=z(s,P,Y,!0);Qe<p&&(p=Qe,S=z(s,P,Y))}return S&&(S.distance=Math.sqrt(p)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,p){return p=p||this._defaultShape(),s=_e(s),p.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new se,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var p=[],S=Ln(s),z=0,P=s.length;z<P;z++)S?(p[z]=_e(s[z]),this._bounds.extend(p[z])):p[z]=this._convertLatLngs(s[z]);return p},_project:function(){var s=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),p=new V(s,s);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(s,p,S){var z=s[0]instanceof pe,P=s.length,Y,fe;if(z){for(fe=[],Y=0;Y<P;Y++)fe[Y]=this._map.latLngToLayerPoint(s[Y]),S.extend(fe[Y]);p.push(fe)}else for(Y=0;Y<P;Y++)this._projectLatlngs(s[Y],p,S)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,S,z,P,Y,fe,we,Me;for(S=0,P=0,Y=this._rings.length;S<Y;S++)for(Me=this._rings[S],z=0,fe=Me.length;z<fe-1;z++)we=of(Me[z],Me[z+1],s,z,!0),we&&(p[P]=p[P]||[],p[P].push(we[0]),(we[1]!==Me[z+1]||z===fe-2)&&(p[P].push(we[1]),P++))}},_simplifyPoints:function(){for(var s=this._parts,p=this.options.smoothFactor,S=0,z=s.length;S<z;S++)s[S]=rf(s[S],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,p){var S,z,P,Y,fe,we,Me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(S=0,Y=this._parts.length;S<Y;S++)for(we=this._parts[S],z=0,fe=we.length,P=fe-1;z<fe;P=z++)if(!(!p&&z===0)&&Cu(s,we[P],we[z])<=Me)return!0;return!1}});function _m(s,p){return new mi(s,p)}mi._flat=sf;var eo=mi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Xs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var p=mi.prototype._convertLatLngs.call(this,s),S=p.length;return S>=2&&p[0]instanceof pe&&p[0].equals(p[S-1])&&p.pop(),p},_setLatLngs:function(s){mi.prototype._setLatLngs.call(this,s),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,p=this.options.weight,S=new V(p,p);if(s=new q(s.min.subtract(S),s.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var z=0,P=this._rings.length,Y;z<P;z++)Y=nf(this._rings[z],s,!0),Y.length&&this._parts.push(Y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var p=!1,S,z,P,Y,fe,we,Me,Ge;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(Y=0,Me=this._parts.length;Y<Me;Y++)for(S=this._parts[Y],fe=0,Ge=S.length,we=Ge-1;fe<Ge;we=fe++)z=S[fe],P=S[we],z.y>s.y!=P.y>s.y&&s.x<(P.x-z.x)*(s.y-z.y)/(P.y-z.y)+z.x&&(p=!p);return p||mi.prototype._containsPoint.call(this,s,!0)}});function hr(s,p){return new eo(s,p)}var dr=fr.extend({initialize:function(s,p){y(this,p),this._layers={},s&&this.addData(s)},addData:function(s){var p=N(s)?s:s.features,S,z,P;if(p){for(S=0,z=p.length;S<z;S++)P=p[S],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var Y=this.options;if(Y.filter&&!Y.filter(s))return this;var fe=as(s,Y);return fe?(fe.feature=to(s),fe.defaultOptions=fe.options,this.resetStyle(fe),Y.onEachFeature&&Y.onEachFeature(s,fe),this.addLayer(fe)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=a({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(p){this._setLayerStyle(p,s)},this)},_setLayerStyle:function(s,p){s.setStyle&&(typeof p=="function"&&(p=p(s.feature)),s.setStyle(p))}});function as(s,p){var S=s.type==="Feature"?s.geometry:s,z=S?S.coordinates:null,P=[],Y=p&&p.pointToLayer,fe=p&&p.coordsToLatLng||tl,we,Me,Ge,Ve;if(!z&&!S)return null;switch(S.type){case"Point":return we=fe(z),zu(Y,s,we,p);case"MultiPoint":for(Ge=0,Ve=z.length;Ge<Ve;Ge++)we=fe(z[Ge]),P.push(zu(Y,s,we,p));return new fr(P);case"LineString":case"MultiLineString":return Me=os(z,S.type==="LineString"?0:1,fe),new mi(Me,p);case"Polygon":case"MultiPolygon":return Me=os(z,S.type==="Polygon"?1:2,fe),new eo(Me,p);case"GeometryCollection":for(Ge=0,Ve=S.geometries.length;Ge<Ve;Ge++){var Qe=as({geometry:S.geometries[Ge],type:"Feature",properties:s.properties},p);Qe&&P.push(Qe)}return new fr(P);case"FeatureCollection":for(Ge=0,Ve=S.features.length;Ge<Ve;Ge++){var nt=as(S.features[Ge],p);nt&&P.push(nt)}return new fr(P);default:throw new Error("Invalid GeoJSON object.")}}function zu(s,p,S,z){return s?s(p,S):new Ja(S,z&&z.markersInheritOptions&&z)}function tl(s){return new pe(s[1],s[0],s[2])}function os(s,p,S){for(var z=[],P=0,Y=s.length,fe;P<Y;P++)fe=p?os(s[P],p-1,S):(S||tl)(s[P]),z.push(fe);return z}function ss(s,p){return s=_e(s),s.alt!==void 0?[_(s.lng,p),_(s.lat,p),_(s.alt,p)]:[_(s.lng,p),_(s.lat,p)]}function nl(s,p,S,z){for(var P=[],Y=0,fe=s.length;Y<fe;Y++)P.push(p?nl(s[Y],Ln(s[Y])?0:p-1,S,z):ss(s[Y],z));return!p&&S&&P.length>0&&P.push(P[0].slice()),P}function Fr(s,p){return s.feature?a({},s.feature,{geometry:p}):to(p)}function to(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var ma={toGeoJSON:function(s){return Fr(this,{type:"Point",coordinates:ss(this.getLatLng(),s)})}};Ja.include(ma),ku.include(ma),is.include(ma),mi.include({toGeoJSON:function(s){var p=!Ln(this._latlngs),S=nl(this._latlngs,p?1:0,!1,s);return Fr(this,{type:(p?"Multi":"")+"LineString",coordinates:S})}}),eo.include({toGeoJSON:function(s){var p=!Ln(this._latlngs),S=p&&!Ln(this._latlngs[0]),z=nl(this._latlngs,S?2:p?1:0,!0,s);return p||(z=[z]),Fr(this,{type:(S?"Multi":"")+"Polygon",coordinates:z})}}),da.include({toMultiPoint:function(s){var p=[];return this.eachLayer(function(S){p.push(S.toGeoJSON(s).geometry.coordinates)}),Fr(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(s){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(s);var S=p==="GeometryCollection",z=[];return this.eachLayer(function(P){if(P.toGeoJSON){var Y=P.toGeoJSON(s);if(S)z.push(Y.geometry);else{var fe=to(Y);fe.type==="FeatureCollection"?z.push.apply(z,fe.features):z.push(fe)}}}),S?Fr(this,{geometries:z,type:"GeometryCollection"}):{type:"FeatureCollection",features:z}}});function rl(s,p){return new dr(s,p)}var df=rl,Wr=Lr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,p,S){this._url=s,this._bounds=ce(p),y(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Kt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&oa(this._image),this},bringToBack:function(){return this._map&&Ha(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ce(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",p=this._image=s?this._url:Lt("img");if(yt(p,"leaflet-image-layer"),this._zoomAnimated&&yt(p,"leaflet-zoom-animated"),this.options.className&&yt(p,this.options.className),p.onselectstart=g,p.onmousemove=g,p.onload=c(this.fire,this,"load"),p.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(s){var p=this._map.getZoomScale(s.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;xr(this._image,S,p)},_reset:function(){var s=this._image,p=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=p.getSize();on(s,p.min),s.style.width=S.x+"px",s.style.height=S.y+"px"},_updateOpacity:function(){tr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),no=function(s,p,S){return new Wr(s,p,S)},il=Wr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",p=this._image=s?this._url:Lt("video");if(yt(p,"leaflet-image-layer"),this._zoomAnimated&&yt(p,"leaflet-zoom-animated"),this.options.className&&yt(p,this.options.className),p.onselectstart=g,p.onmousemove=g,p.onloadeddata=c(this.fire,this,"load"),s){for(var S=p.getElementsByTagName("source"),z=[],P=0;P<S.length;P++)z.push(S[P].src);this._url=S.length>0?z:[p.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Y=0;Y<this._url.length;Y++){var fe=Lt("source");fe.src=this._url[Y],p.appendChild(fe)}}});function mf(s,p,S){return new il(s,p,S)}var Oi=Wr.extend({_initImage:function(){var s=this._image=this._url;yt(s,"leaflet-image-layer"),this._zoomAnimated&&yt(s,"leaflet-zoom-animated"),this.options.className&&yt(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function pf(s,p,S){return new Oi(s,p,S)}var Br=Lr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,p){s&&(s instanceof pe||N(s))?(this._latlng=_e(s),y(this,p)):(y(this,s),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&tr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&tr(this._container,1),this.bringToFront(),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(tr(this._container,0),this._removeTimeout=setTimeout(c(Kt,void 0,this._container),200)):Kt(this._container),this.options.interactive&&(qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=_e(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oa(this._container),this},bringToBack:function(){return this._map&&Ha(this._container),this},_prepareOpen:function(s){var p=this._source;if(!p._map)return!1;if(p instanceof fr){p=null;var S=this._source._layers;for(var z in S)if(S[z]._map){p=S[z];break}if(!p)return!1;this._source=p}if(!s)if(p.getCenter)s=p.getCenter();else if(p.getLatLng)s=p.getLatLng();else if(p.getBounds)s=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")s.innerHTML=p;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),p=$(this.options.offset),S=this._getAnchor();this._zoomAnimated?on(this._container,s.add(S)):p=p.add(s).add(S);var z=this._containerBottom=-p.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=z+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(s,p,S,z){var P=p;return P instanceof s||(P=new s(z).setContent(p)),S&&P.setLatLng(S),P}}),Lr.include({_initOverlay:function(s,p,S,z){var P=S;return P instanceof s?(y(P,z),P._source=this):(P=p&&!z?p:new s(z,this),P.setContent(S)),P}});var ls=Br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Br.prototype.openOn.call(this,s)},onAdd:function(s){Br.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof di||this._source.on("preclick",hi))},onRemove:function(s){Br.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof di||this._source.off("preclick",hi))},getEvents:function(){var s=Br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",p=this._container=Lt("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=Lt("div",s+"-content-wrapper",p);if(this._contentNode=Lt("div",s+"-content",S),Va(p),qa(this._contentNode),gt(p,"contextmenu",hi),this._tipContainer=Lt("div",s+"-tip-container",p),this._tip=Lt("div",s+"-tip",this._tipContainer),this.options.closeButton){var z=this._closeButton=Lt("a",s+"-close-button",p);z.setAttribute("role","button"),z.setAttribute("aria-label","Close popup"),z.href="#close",z.innerHTML='<span aria-hidden="true">&#215;</span>',gt(z,"click",function(P){cn(P),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,p=s.style;p.width="",p.whiteSpace="nowrap";var S=s.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),p.width=S+1+"px",p.whiteSpace="",p.height="";var z=s.offsetHeight,P=this.options.maxHeight,Y="leaflet-popup-scrolled";P&&z>P?(p.height=P+"px",yt(s,Y)):qt(s,Y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var p=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),S=this._getAnchor();on(this._container,p.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,p=parseInt(aa(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+p,z=this._containerWidth,P=new V(this._containerLeft,-S-this._containerBottom);P._add(Fi(this._container));var Y=s.layerPointToContainerPoint(P),fe=$(this.options.autoPanPadding),we=$(this.options.autoPanPaddingTopLeft||fe),Me=$(this.options.autoPanPaddingBottomRight||fe),Ge=s.getSize(),Ve=0,Qe=0;Y.x+z+Me.x>Ge.x&&(Ve=Y.x+z-Ge.x+Me.x),Y.x-Ve-we.x<0&&(Ve=Y.x-we.x),Y.y+S+Me.y>Ge.y&&(Qe=Y.y+S-Ge.y+Me.y),Y.y-Qe-we.y<0&&(Qe=Y.y-we.y),(Ve||Qe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Ve,Qe]))}},_getAnchor:function(){return $(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xm=function(s,p){return new ls(s,p)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(s,p,S){return this._initOverlay(ls,s,p,S).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Lr.include({bindPopup:function(s,p){return this._popup=this._initOverlay(ls,this._popup,s,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof fr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Xr(s);var p=s.layer||s.target;if(this._popup._source===p&&!(p instanceof di)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=p,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var al=Br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Br.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Br.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Br.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",p=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Lt("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var p,S,z=this._map,P=this._container,Y=z.latLngToContainerPoint(z.getCenter()),fe=z.layerPointToContainerPoint(s),we=this.options.direction,Me=P.offsetWidth,Ge=P.offsetHeight,Ve=$(this.options.offset),Qe=this._getAnchor();we==="top"?(p=Me/2,S=Ge):we==="bottom"?(p=Me/2,S=0):we==="center"?(p=Me/2,S=Ge/2):we==="right"?(p=0,S=Ge/2):we==="left"?(p=Me,S=Ge/2):fe.x<Y.x?(we="right",p=0,S=Ge/2):(we="left",p=Me+(Ve.x+Qe.x)*2,S=Ge/2),s=s.subtract($(p,S,!0)).add(Ve).add(Qe),qt(P,"leaflet-tooltip-right"),qt(P,"leaflet-tooltip-left"),qt(P,"leaflet-tooltip-top"),qt(P,"leaflet-tooltip-bottom"),yt(P,"leaflet-tooltip-"+we),on(P,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&tr(this._container,s)},_animateZoom:function(s){var p=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(p)},_getAnchor:function(){return $(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bm=function(s,p){return new al(s,p)};St.include({openTooltip:function(s,p,S){return this._initOverlay(al,s,p,S).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Lr.include({bindTooltip:function(s,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(al,this._tooltip,s,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var p=s?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[p](S),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof fr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var p=typeof s.getElement=="function"&&s.getElement();p&&(gt(p,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),gt(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var p=typeof s.getElement=="function"&&s.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var p=s.latlng,S,z;this._tooltip.options.sticky&&s.originalEvent&&(S=this._map.mouseEventToContainerPoint(s.originalEvent),z=this._map.containerPointToLayerPoint(S),p=this._map.layerPointToLatLng(z)),this._tooltip.setLatLng(p)}});var Lu=Wa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var p=s&&s.tagName==="DIV"?s:document.createElement("div"),S=this.options;if(S.html instanceof Element?(Zn(p),p.appendChild(S.html)):p.innerHTML=S.html!==!1?S.html:"",S.bgPos){var z=$(S.bgPos);p.style.backgroundPosition=-z.x+"px "+-z.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function gf(s){return new Lu(s)}Wa.Default=Qa;var pa=Lr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:it.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){y(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Kt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oa(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ha(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof V?s:new V(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var p=this.getPane().children,S=-s(-1/0,1/0),z=0,P=p.length,Y;z<P;z++)Y=p[z].style.zIndex,p[z]!==this._container&&Y&&(S=s(S,+Y));isFinite(S)&&(this.options.zIndex=S+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!it.ielt9){tr(this._container,this.options.opacity);var s=+new Date,p=!1,S=!1;for(var z in this._tiles){var P=this._tiles[z];if(!(!P.current||!P.loaded)){var Y=Math.min(1,(s-P.loaded)/200);tr(P.el,Y),Y<1?p=!0:(P.active?S=!0:this._onOpaqueTile(P),P.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),p&&(I(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,p=this.options.maxZoom;if(s!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===s?(this._levels[S].el.style.zIndex=p-Math.abs(s-S),this._onUpdateLevel(S)):(Kt(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var z=this._levels[s],P=this._map;return z||(z=this._levels[s]={},z.el=Lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),z.el.style.zIndex=p,z.origin=P.project(P.unproject(P.getPixelOrigin()),s).round(),z.zoom=s,this._setZoomTransform(z,P.getCenter(),P.getZoom()),g(z.el.offsetWidth),this._onCreateLevel(z)),this._level=z,z}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,p,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)p=this._tiles[s],p.retain=p.current;for(s in this._tiles)if(p=this._tiles[s],p.current&&!p.active){var z=p.coords;this._retainParent(z.x,z.y,z.z,z.z-5)||this._retainChildren(z.x,z.y,z.z,z.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var p in this._tiles)this._tiles[p].coords.z===s&&this._removeTile(p)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Kt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,p,S,z){var P=Math.floor(s/2),Y=Math.floor(p/2),fe=S-1,we=new V(+P,+Y);we.z=+fe;var Me=this._tileCoordsToKey(we),Ge=this._tiles[Me];return Ge&&Ge.active?(Ge.retain=!0,!0):(Ge&&Ge.loaded&&(Ge.retain=!0),fe>z?this._retainParent(P,Y,fe,z):!1)},_retainChildren:function(s,p,S,z){for(var P=2*s;P<2*s+2;P++)for(var Y=2*p;Y<2*p+2;Y++){var fe=new V(P,Y);fe.z=S+1;var we=this._tileCoordsToKey(fe),Me=this._tiles[we];if(Me&&Me.active){Me.retain=!0;continue}else Me&&Me.loaded&&(Me.retain=!0);S+1<z&&this._retainChildren(P,Y,S+1,z)}},_resetView:function(s){var p=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var p=this.options;return p.minNativeZoom!==void 0&&s<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<s?p.maxNativeZoom:s},_setView:function(s,p,S,z){var P=Math.round(p);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var Y=this.options.updateWhenZooming&&P!==this._tileZoom;(!z||Y)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(s),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(s,p)},_setZoomTransforms:function(s,p){for(var S in this._levels)this._setZoomTransform(this._levels[S],s,p)},_setZoomTransform:function(s,p,S){var z=this._map.getZoomScale(S,s.zoom),P=s.origin.multiplyBy(z).subtract(this._map._getNewPixelOrigin(p,S)).round();it.any3d?xr(s.el,P,z):on(s.el,P)},_resetGrid:function(){var s=this._map,p=s.options.crs,S=this._tileSize=this.getTileSize(),z=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,p.wrapLng[0]],z).x/S.x),Math.ceil(s.project([0,p.wrapLng[1]],z).x/S.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([p.wrapLat[0],0],z).y/S.x),Math.ceil(s.project([p.wrapLat[1],0],z).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var p=this._map,S=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),z=p.getZoomScale(S,this._tileZoom),P=p.project(s,this._tileZoom).floor(),Y=p.getSize().divideBy(z*2);return new q(P.subtract(Y),P.add(Y))},_update:function(s){var p=this._map;if(p){var S=this._clampZoom(p.getZoom());if(s===void 0&&(s=p.getCenter()),this._tileZoom!==void 0){var z=this._getTiledPixelBounds(s),P=this._pxBoundsToTileRange(z),Y=P.getCenter(),fe=[],we=this.options.keepBuffer,Me=new q(P.getBottomLeft().subtract([we,-we]),P.getTopRight().add([we,-we]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ge in this._tiles){var Ve=this._tiles[Ge].coords;(Ve.z!==this._tileZoom||!Me.contains(new V(Ve.x,Ve.y)))&&(this._tiles[Ge].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(s,S);return}for(var Qe=P.min.y;Qe<=P.max.y;Qe++)for(var nt=P.min.x;nt<=P.max.x;nt++){var pt=new V(nt,Qe);if(pt.z=this._tileZoom,!!this._isValidTile(pt)){var Vt=this._tiles[this._tileCoordsToKey(pt)];Vt?Vt.current=!0:fe.push(pt)}}if(fe.sort(function(Fn,br){return Fn.distanceTo(Y)-br.distanceTo(Y)}),fe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var sn=document.createDocumentFragment();for(nt=0;nt<fe.length;nt++)this._addTile(fe[nt],sn);this._level.el.appendChild(sn)}}}},_isValidTile:function(s){var p=this._map.options.crs;if(!p.infinite){var S=this._globalTileRange;if(!p.wrapLng&&(s.x<S.min.x||s.x>S.max.x)||!p.wrapLat&&(s.y<S.min.y||s.y>S.max.y))return!1}if(!this.options.bounds)return!0;var z=this._tileCoordsToBounds(s);return ce(this.options.bounds).overlaps(z)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var p=this._map,S=this.getTileSize(),z=s.scaleBy(S),P=z.add(S),Y=p.unproject(z,s.z),fe=p.unproject(P,s.z);return[Y,fe]},_tileCoordsToBounds:function(s){var p=this._tileCoordsToNwSe(s),S=new se(p[0],p[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var p=s.split(":"),S=new V(+p[0],+p[1]);return S.z=+p[2],S},_removeTile:function(s){var p=this._tiles[s];p&&(Kt(p.el),delete this._tiles[s],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){yt(s,"leaflet-tile");var p=this.getTileSize();s.style.width=p.x+"px",s.style.height=p.y+"px",s.onselectstart=g,s.onmousemove=g,it.ielt9&&this.options.opacity<1&&tr(s,this.options.opacity)},_addTile:function(s,p){var S=this._getTilePos(s),z=this._tileCoordsToKey(s),P=this.createTile(this._wrapCoords(s),c(this._tileReady,this,s));this._initTile(P),this.createTile.length<2&&U(c(this._tileReady,this,s,null,P)),on(P,S),this._tiles[z]={el:P,coords:s,current:!0},p.appendChild(P),this.fire("tileloadstart",{tile:P,coords:s})},_tileReady:function(s,p,S){p&&this.fire("tileerror",{error:p,tile:S,coords:s});var z=this._tileCoordsToKey(s);S=this._tiles[z],S&&(S.loaded=+new Date,this._map._fadeAnimated?(tr(S.el,0),I(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),p||(yt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),it.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var p=new V(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return p.z=s.z,p},_pxBoundsToTileRange:function(s){var p=this.getTileSize();return new q(s.min.unscaleBy(p).floor(),s.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Rr(s){return new pa(s)}var ga=pa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,p){this._url=s,p=y(this,p),p.detectRetina&&it.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,p){return this._url===s&&p===void 0&&(p=!0),this._url=s,p||this.redraw(),this},createTile:function(s,p){var S=document.createElement("img");return gt(S,"load",c(this._tileOnLoad,this,p,S)),gt(S,"error",c(this._tileOnError,this,p,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(s),S},getTileUrl:function(s){var p={r:it.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-s.y;this.options.tms&&(p.y=S),p["-y"]=S}return A(this._url,a(p,this.options))},_tileOnLoad:function(s,p){it.ielt9?setTimeout(c(s,this,null,p),0):s(null,p)},_tileOnError:function(s,p,S){var z=this.options.errorTileUrl;z&&p.getAttribute("src")!==z&&(p.src=z),s(S,p)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,p=this.options.maxZoom,S=this.options.zoomReverse,z=this.options.zoomOffset;return S&&(s=p-s),s+z},_getSubdomain:function(s){var p=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var s,p;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(p=this._tiles[s].el,p.onload=g,p.onerror=g,!p.complete)){p.src=k;var S=this._tiles[s].coords;Kt(p),delete this._tiles[s],this.fire("tileabort",{tile:p,coords:S})}},_removeTile:function(s){var p=this._tiles[s];if(p)return p.el.setAttribute("src",k),pa.prototype._removeTile.call(this,s)},_tileReady:function(s,p,S){if(!(!this._map||S&&S.getAttribute("src")===k))return pa.prototype._tileReady.call(this,s,p,S)}});function mr(s,p){return new ga(s,p)}var pr=ga.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,p){this._url=s;var S=a({},this.defaultWmsParams);for(var z in p)z in this.options||(S[z]=p[z]);p=y(this,p);var P=p.detectRetina&&it.retina?2:1,Y=this.getTileSize();S.width=Y.x*P,S.height=Y.y*P,this.wmsParams=S},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,ga.prototype.onAdd.call(this,s)},getTileUrl:function(s){var p=this._tileCoordsToNwSe(s),S=this._crs,z=ne(S.project(p[0]),S.project(p[1])),P=z.min,Y=z.max,fe=(this._wmsVersion>=1.3&&this._crs===cf?[P.y,P.x,Y.y,Y.x]:[P.x,P.y,Y.x,Y.y]).join(","),we=ga.prototype.getTileUrl.call(this,s);return we+E(this.wmsParams,we,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+fe},setParams:function(s,p){return a(this.wmsParams,s),p||this.redraw(),this}});function ro(s,p){return new pr(s,p)}ga.WMS=pr,mr.wms=ro;var Or=Lr.extend({options:{padding:.1},initialize:function(s){y(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,p){var S=this._map.getZoomScale(p,this._zoom),z=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,p),Y=z.multiplyBy(-S).add(P).subtract(this._map._getNewPixelOrigin(s,p));it.any3d?xr(this._container,Y,S):on(this._container,Y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,p=this._map.getSize(),S=this._map.containerPointToLayerPoint(p.multiplyBy(-s)).round();this._bounds=new q(S,S.add(p.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),us=Or.extend({options:{tolerance:0},getEvents:function(){var s=Or.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Or.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");gt(s,"mousemove",this._onMouseMove,this),gt(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),gt(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,Kt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var p in this._layers)s=this._layers[p],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Or.prototype._update.call(this);var s=this._bounds,p=this._container,S=s.getSize(),z=it.retina?2:1;on(p,s.min),p.width=z*S.x,p.height=z*S.y,p.style.width=S.x+"px",p.style.height=S.y+"px",it.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Or.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var p=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var p=s._order,S=p.next,z=p.prev;S?S.prev=z:this._drawLast=z,z?z.next=S:this._drawFirst=S,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var p=s.options.dashArray.split(/[, ]+/),S=[],z,P;for(P=0;P<p.length;P++){if(z=Number(p[P]),isNaN(z))return;S.push(z)}s.options._dashArray=S}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var p=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(s._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(s._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var p=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,p=this._redrawBounds;if(this._ctx.save(),p){var S=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var z=this._drawFirst;z;z=z.next)s=z.layer,(!p||s._pxBounds&&s._pxBounds.intersects(p))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,p){if(this._drawing){var S,z,P,Y,fe=s._parts,we=fe.length,Me=this._ctx;if(we){for(Me.beginPath(),S=0;S<we;S++){for(z=0,P=fe[S].length;z<P;z++)Y=fe[S][z],Me[z?"lineTo":"moveTo"](Y.x,Y.y);p&&Me.closePath()}this._fillStroke(Me,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var p=s._point,S=this._ctx,z=Math.max(Math.round(s._radius),1),P=(Math.max(Math.round(s._radiusY),1)||z)/z;P!==1&&(S.save(),S.scale(1,P)),S.beginPath(),S.arc(p.x,p.y/P,z,0,Math.PI*2,!1),P!==1&&S.restore(),this._fillStroke(S,s)}},_fillStroke:function(s,p){var S=p.options;S.fill&&(s.globalAlpha=S.fillOpacity,s.fillStyle=S.fillColor||S.color,s.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(s.setLineDash&&s.setLineDash(p.options&&p.options._dashArray||[]),s.globalAlpha=S.opacity,s.lineWidth=S.weight,s.strokeStyle=S.color,s.lineCap=S.lineCap,s.lineJoin=S.lineJoin,s.stroke())},_onClick:function(s){for(var p=this._map.mouseEventToLayerPoint(s),S,z,P=this._drawFirst;P;P=P.next)S=P.layer,S.options.interactive&&S._containsPoint(p)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(S))&&(z=S);this._fireEvent(z?[z]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,p)}},_handleMouseOut:function(s){var p=this._hoveredLayer;p&&(qt(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,p){if(!this._mouseHoverThrottled){for(var S,z,P=this._drawFirst;P;P=P.next)S=P.layer,S.options.interactive&&S._containsPoint(p)&&(z=S);z!==this._hoveredLayer&&(this._handleMouseOut(s),z&&(yt(this._container,"leaflet-interactive"),this._fireEvent([z],s,"mouseover"),this._hoveredLayer=z)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,p,S){this._map._fireDOMEvent(p,S||p.type,s)},_bringToFront:function(s){var p=s._order;if(p){var S=p.next,z=p.prev;if(S)S.prev=z;else return;z?z.next=S:S&&(this._drawFirst=S),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(s)}},_bringToBack:function(s){var p=s._order;if(p){var S=p.next,z=p.prev;if(z)z.next=S;else return;S?S.prev=z:z&&(this._drawLast=z),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(s)}}});function cs(s){return it.canvas?new us(s):null}var va=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),io={_initContainer:function(){this._container=Lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Or.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var p=s._container=va("shape");yt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",s._path=va("path"),p.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var p=s._container;this._container.appendChild(p),s.options.interactive&&s.addInteractiveTarget(p)},_removePath:function(s){var p=s._container;Kt(p),s.removeInteractiveTarget(p),delete this._layers[d(s)]},_updateStyle:function(s){var p=s._stroke,S=s._fill,z=s.options,P=s._container;P.stroked=!!z.stroke,P.filled=!!z.fill,z.stroke?(p||(p=s._stroke=va("stroke")),P.appendChild(p),p.weight=z.weight+"px",p.color=z.color,p.opacity=z.opacity,z.dashArray?p.dashStyle=N(z.dashArray)?z.dashArray.join(" "):z.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=z.lineCap.replace("butt","flat"),p.joinstyle=z.lineJoin):p&&(P.removeChild(p),s._stroke=null),z.fill?(S||(S=s._fill=va("fill")),P.appendChild(S),S.color=z.fillColor||z.color,S.opacity=z.fillOpacity):S&&(P.removeChild(S),s._fill=null)},_updateCircle:function(s){var p=s._point.round(),S=Math.round(s._radius),z=Math.round(s._radiusY||S);this._setPath(s,s._empty()?"M0 0":"AL "+p.x+","+p.y+" "+S+","+z+" 0,"+65535*360)},_setPath:function(s,p){s._path.v=p},_bringToFront:function(s){oa(s._container)},_bringToBack:function(s){Ha(s._container)}},fs=it.vml?va:Te,ji=Or.extend({_initContainer:function(){this._container=fs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Kt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Or.prototype._update.call(this);var s=this._bounds,p=s.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,S.setAttribute("width",p.x),S.setAttribute("height",p.y)),on(S,s.min),S.setAttribute("viewBox",[s.min.x,s.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(s){var p=s._path=fs("path");s.options.className&&yt(p,s.options.className),s.options.interactive&&yt(p,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Kt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var p=s._path,S=s.options;p&&(S.stroke?(p.setAttribute("stroke",S.color),p.setAttribute("stroke-opacity",S.opacity),p.setAttribute("stroke-width",S.weight),p.setAttribute("stroke-linecap",S.lineCap),p.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?p.setAttribute("stroke-dasharray",S.dashArray):p.removeAttribute("stroke-dasharray"),S.dashOffset?p.setAttribute("stroke-dashoffset",S.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),S.fill?(p.setAttribute("fill",S.fillColor||S.color),p.setAttribute("fill-opacity",S.fillOpacity),p.setAttribute("fill-rule",S.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(s,p){this._setPath(s,Se(s._parts,p))},_updateCircle:function(s){var p=s._point,S=Math.max(Math.round(s._radius),1),z=Math.max(Math.round(s._radiusY),1)||S,P="a"+S+","+z+" 0 1,0 ",Y=s._empty()?"M0 0":"M"+(p.x-S)+","+p.y+P+S*2+",0 "+P+-S*2+",0 ";this._setPath(s,Y)},_setPath:function(s,p){s._path.setAttribute("d",p)},_bringToFront:function(s){oa(s._path)},_bringToBack:function(s){Ha(s._path)}});it.vml&&ji.include(io);function ya(s){return it.svg||it.vml?new ji(s):null}St.include({getRenderer:function(s){var p=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var p=this._paneRenderers[s];return p===void 0&&(p=this._createRenderer({pane:s}),this._paneRenderers[s]=p),p},_createRenderer:function(s){return this.options.preferCanvas&&cs(s)||ya(s)}});var vf=eo.extend({initialize:function(s,p){eo.prototype.initialize.call(this,this._boundsToLatLngs(s),p)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ce(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function gr(s,p){return new vf(s,p)}ji.create=fs,ji.pointsToPath=Se,dr.geometryToLayer=as,dr.coordsToLatLng=tl,dr.coordsToLatLngs=os,dr.latLngToCoords=ss,dr.latLngsToCoords=nl,dr.getFeature=Fr,dr.asFeature=to,St.mergeOptions({boxZoom:!0});var ol=zr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Kt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qr(),Qo(),this._startPoint=this._map.mouseEventToContainerPoint(s),gt(document,{contextmenu:Xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Lt("div","leaflet-zoom-box",this._container),yt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var p=new q(this._point,this._startPoint),S=p.getSize();on(this._box,p.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(Kt(this._box),qt(this._container,"leaflet-crosshair")),Wo(),xu(),Bt(document,{contextmenu:Xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var p=new se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",ol),St.mergeOptions({doubleClickZoom:!0});var Qr=zr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var p=this._map,S=p.getZoom(),z=p.options.zoomDelta,P=s.originalEvent.shiftKey?S-z:S+z;p.options.doubleClickZoom==="center"?p.setZoom(P):p.setZoomAround(s.containerPoint,P)}});St.addInitHook("addHandler","doubleClickZoom",Qr),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fu=zr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ri(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}yt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qt(this._map._container,"leaflet-grab"),qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=ce(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var p=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(p),this._prunePositions(p)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,p){return s-(s-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;s.x<p.min.x&&(s.x=this._viscousLimit(s.x,p.min.x)),s.y<p.min.y&&(s.y=this._viscousLimit(s.y,p.min.y)),s.x>p.max.x&&(s.x=this._viscousLimit(s.x,p.max.x)),s.y>p.max.y&&(s.y=this._viscousLimit(s.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,p=Math.round(s/2),S=this._initialWorldOffset,z=this._draggable._newPos.x,P=(z-p+S)%s+p-S,Y=(z+p+S)%s-p-S,fe=Math.abs(P+S)<Math.abs(Y+S)?P:Y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=fe},_onDragEnd:function(s){var p=this._map,S=p.options,z=!S.inertia||s.noInertia||this._times.length<2;if(p.fire("dragend",s),z)p.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),Y=(this._lastTime-this._times[0])/1e3,fe=S.easeLinearity,we=P.multiplyBy(fe/Y),Me=we.distanceTo([0,0]),Ge=Math.min(S.inertiaMaxSpeed,Me),Ve=we.multiplyBy(Ge/Me),Qe=Ge/(S.inertiaDeceleration*fe),nt=Ve.multiplyBy(-Qe/2).round();!nt.x&&!nt.y?p.fire("moveend"):(nt=p._limitOffset(nt,p.options.maxBounds),U(function(){p.panBy(nt,{duration:Qe,easeLinearity:fe,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",Fu),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hs=zr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),gt(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,p=document.documentElement,S=s.scrollTop||p.scrollTop,z=s.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(z,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var p=this._panKeys={},S=this.keyCodes,z,P;for(z=0,P=S.left.length;z<P;z++)p[S.left[z]]=[-1*s,0];for(z=0,P=S.right.length;z<P;z++)p[S.right[z]]=[s,0];for(z=0,P=S.down.length;z<P;z++)p[S.down[z]]=[0,s];for(z=0,P=S.up.length;z<P;z++)p[S.up[z]]=[0,-1*s]},_setZoomDelta:function(s){var p=this._zoomKeys={},S=this.keyCodes,z,P;for(z=0,P=S.zoomIn.length;z<P;z++)p[S.zoomIn[z]]=s;for(z=0,P=S.zoomOut.length;z<P;z++)p[S.zoomOut[z]]=-s},_addHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var p=s.keyCode,S=this._map,z;if(p in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(z=this._panKeys[p],s.shiftKey&&(z=$(z).multiplyBy(3)),S.options.maxBounds&&(z=S._limitOffset($(z),S.options.maxBounds)),S.options.worldCopyJump){var P=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(z)));S.panTo(P)}else S.panBy(z)}else if(p in this._zoomKeys)S.setZoom(S.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;Xr(s)}}});St.addInitHook("addHandler","keyboard",hs),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Pi=zr.extend({addHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var p=ts(s),S=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var z=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),z),Xr(s)},_performZoom:function(){var s=this._map,p=s.getZoom(),S=this._map.options.zoomSnap||0;s._stop();var z=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(z))))/Math.LN2,Y=S?Math.ceil(P/S)*S:P,fe=s._limitZoom(p+(this._delta>0?Y:-Y))-p;this._delta=0,this._startTime=null,fe&&(s.options.scrollWheelZoom==="center"?s.setZoom(p+fe):s.setZoomAround(this._lastMousePos,p+fe))}});St.addInitHook("addHandler","scrollWheelZoom",Pi);var Bu=600;St.mergeOptions({tapHold:it.touchNative&&it.safari&&it.mobile,tapTolerance:15});var sl=zr.extend({addHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var p=s.touches[0];this._startPos=this._newPos=new V(p.clientX,p.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(gt(document,"touchend",cn),gt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),Bu),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Bt(document,"touchend",cn),Bt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(s){var p=s.touches[0];this._newPos=new V(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,p){var S=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});S._simulated=!0,p.target.dispatchEvent(S)}});St.addInitHook("addHandler","tapHold",sl),St.mergeOptions({touchZoom:it.touch,bounceAtZoomLimits:!0});var _a=zr.extend({addHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qt(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var p=this._map;if(!(!s.touches||s.touches.length!==2||p._animatingZoom||this._zooming)){var S=p.mouseEventToContainerPoint(s.touches[0]),z=p.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(S.add(z)._divideBy(2))),this._startDist=S.distanceTo(z),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),cn(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var p=this._map,S=p.mouseEventToContainerPoint(s.touches[0]),z=p.mouseEventToContainerPoint(s.touches[1]),P=S.distanceTo(z)/this._startDist;if(this._zoom=p.getScaleZoom(P,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&P<1||this._zoom>p.getMaxZoom()&&P>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var Y=S._add(z)._divideBy(2)._subtract(this._centerPoint);if(P===1&&Y.x===0&&Y.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Y),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var fe=c(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(fe,this,!0),cn(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",_a),St.BoxZoom=ol,St.DoubleClickZoom=Qr,St.Drag=Fu,St.Keyboard=hs,St.ScrollWheelZoom=Pi,St.TapHold=sl,St.TouchZoom=_a,n.Bounds=q,n.Browser=it,n.CRS=ze,n.Canvas=us,n.Circle=ku,n.CircleMarker=is,n.Class=B,n.Control=nr,n.DivIcon=Lu,n.DivOverlay=Br,n.DomEvent=om,n.DomUtil=Qc,n.Draggable=Ri,n.Evented=ee,n.FeatureGroup=fr,n.GeoJSON=dr,n.GridLayer=pa,n.Handler=zr,n.Icon=Wa,n.ImageOverlay=Wr,n.LatLng=pe,n.LatLngBounds=se,n.Layer=Lr,n.LayerGroup=da,n.LineUtil=lf,n.Map=St,n.Marker=Ja,n.Mixin=fm,n.Path=di,n.Point=V,n.PolyUtil=hm,n.Polygon=eo,n.Polyline=mi,n.Popup=ls,n.PosAnimation=Ys,n.Projection=uf,n.Rectangle=vf,n.Renderer=Or,n.SVG=ji,n.SVGOverlay=Oi,n.TileLayer=ga,n.Tooltip=al,n.Transformation=Xe,n.Util=W,n.VideoOverlay=il,n.bind=c,n.bounds=ne,n.canvas=cs,n.circle=ym,n.circleMarker=hf,n.control=Ya,n.divIcon=gf,n.extend=a,n.featureGroup=rs,n.geoJSON=rl,n.geoJson=df,n.gridLayer=Rr,n.icon=el,n.imageOverlay=no,n.latLng=_e,n.latLngBounds=ce,n.layerGroup=ff,n.map=ns,n.marker=Tu,n.point=$,n.polygon=hr,n.polyline=_m,n.popup=xm,n.rectangle=gr,n.setOptions=y,n.stamp=d,n.svg=ya,n.svgOverlay=pf,n.tileLayer=mr,n.tooltip=bm,n.transformation=$e,n.version=i,n.videoOverlay=mf;var ao=window.L;n.noConflict=function(){return window.L=ao,this},window.L=n}))})(Dc,Dc.exports)),Dc.exports}var Xi=m3();const ur=Td(Xi);function Ob(e,t){const n=te.useRef(t);te.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}var Dg=Rb();const kd=Td(Dg),p3=1;function g3(e){return Object.freeze({__version:p3,map:e})}function zd(e,t){return Object.freeze({...e,...t})}const Eg=te.createContext(null);function Ld(){const e=te.use(Eg);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function jb(e){function t(n,i){const{instance:a,context:l}=e(n).current;te.useImperativeHandle(i,()=>a);const{children:c}=n;return c==null?null:sr.createElement(Eg,{value:l},c)}return te.forwardRef(t)}function v3(e){function t(n,i){const[a,l]=te.useState(!1),{instance:c}=e(n,l).current;te.useImperativeHandle(i,()=>c),te.useEffect(function(){a&&c.update()},[c,a,n.children]);const f=c._contentNode;return f?Dg.createPortal(n.children,f):null}return te.forwardRef(t)}function Sg(e,t){const n=te.useRef(void 0);te.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Cg(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function y3(e,t){return function(i,a){const l=Ld(),c=e(Cg(i,l),l);return Ob(l.map,i.attribution),Sg(c.current,i.eventHandlers),t(c.current,l,i,a),c}}function Uc(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Ag(e,t){return t==null?function(i,a){const l=te.useRef(void 0);return l.current||(l.current=e(i,a)),l}:function(i,a){const l=te.useRef(void 0);l.current||(l.current=e(i,a));const c=te.useRef(i),{instance:f}=l.current;return te.useEffect(function(){c.current!==i&&(t(f,i,c.current),c.current=i)},[f,i,t]),l}}function Pb(e,t){te.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function _3(e){return function(n){const i=Ld(),a=e(Cg(n,i),i);return Ob(i.map,n.attribution),Sg(a.current,n.eventHandlers),Pb(a.current,i),a}}function x3(e,t){const n=te.useRef(void 0);te.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function b3(e){return function(n){const i=Ld(),a=e(Cg(n,i),i);return Sg(a.current,n.eventHandlers),Pb(a.current,i),x3(a.current,n),a}}function Ib(e,t){const n=Ag(e,t),i=_3(n);return jb(i)}function w3(e,t){const n=Ag(e),i=y3(n,t);return v3(i)}function Hb(e,t){const n=Ag(e,t),i=b3(n);return jb(i)}function D3(e,t,n){t.bounds instanceof Xi.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}function Fd(){return Ld().map}function Ng(e){const t=Fd();return te.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const E3=Ib(function({bounds:t,url:n,...i},a){const l=new Xi.ImageOverlay(n,t,i);return Uc(l,zd(a,{overlayContainer:l}))},function(t,n,i){if(D3(t,n,i),n.bounds!==i.bounds){const a=n.bounds instanceof Xi.LatLngBounds?n.bounds:new Xi.LatLngBounds(n.bounds);t.setBounds(a)}n.url!==i.url&&t.setUrl(n.url)});function S3({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:l,placeholder:c,style:f,whenReady:d,zoom:h,...m},g){const[_]=te.useState({className:a,id:l,style:f}),[x,w]=te.useState(null),y=te.useRef(void 0);te.useImperativeHandle(g,()=>x?.map??null,[x]);const E=te.useCallback(A=>{if(A!==null&&!y.current){const N=new Xi.Map(A,m);y.current=N,n!=null&&h!=null?N.setView(n,h):e!=null&&N.fitBounds(e,t),d!=null&&N.whenReady(d),w(g3(N))}},[]);te.useEffect(()=>()=>{x?.map.remove()},[x]);const D=x?sr.createElement(Eg,{value:x},i):c??null;return sr.createElement("div",{..._,ref:E},D)}const C3=te.forwardRef(S3),A0=Ib(function({position:t,...n},i){const a=new Xi.Marker(t,n);return Uc(a,zd(i,{overlayContainer:a}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),A3=Hb(function({positions:t,...n},i){const a=new Xi.Polygon(t,n);return Uc(a,zd(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Gb=Hb(function({positions:t,...n},i){const a=new Xi.Polyline(t,n);return Uc(a,zd(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Gl=w3(function(t,n){const i=new Xi.Popup(t,n.overlayContainer);return Uc(i,n)},function(t,n,{position:i},a){te.useEffect(function(){const{instance:c}=t;function f(h){h.popup===c&&(c.update(),a(!0))}function d(h){h.popup===c&&a(!1)}return n.map.on({popupopen:f,popupclose:d}),n.overlayContainer==null?(i!=null&&c.setLatLng(i),c.openOn(n.map)):n.overlayContainer.bindPopup(c),function(){n.map.off({popupopen:f,popupclose:d}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(c)}},[t,n,a,i])}),f_=e=>{let t;const n=new Set,i=(h,m)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const _=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(x=>x(t,_))}},a=()=>t,f={setState:i,getState:a,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h))},d=t=e(i,a,f);return f},N3=(e=>e?f_(e):f_),M3=e=>e;function T3(e,t=M3){const n=sr.useSyncExternalStore(e.subscribe,sr.useCallback(()=>t(e.getState()),[e,t]),sr.useCallback(()=>t(e.getInitialState()),[e,t]));return sr.useDebugValue(n),n}const h_=e=>{const t=N3(e),n=i=>T3(t,i);return Object.assign(n,t),n},k3=(e=>e?h_(e):h_),Wn=[];for(let e=0;e<256;++e)Wn.push((e+256).toString(16).slice(1));function z3(e,t=0){return(Wn[e[t+0]]+Wn[e[t+1]]+Wn[e[t+2]]+Wn[e[t+3]]+"-"+Wn[e[t+4]]+Wn[e[t+5]]+"-"+Wn[e[t+6]]+Wn[e[t+7]]+"-"+Wn[e[t+8]]+Wn[e[t+9]]+"-"+Wn[e[t+10]]+Wn[e[t+11]]+Wn[e[t+12]]+Wn[e[t+13]]+Wn[e[t+14]]+Wn[e[t+15]]).toLowerCase()}let e0;const L3=new Uint8Array(16);function F3(){if(!e0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");e0=crypto.getRandomValues.bind(crypto)}return e0(L3)}const B3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),d_={randomUUID:B3};function In(e,t,n){if(d_.randomUUID&&!e)return d_.randomUUID();e=e||{};const i=e.random??e.rng?.()??F3();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,z3(i)}const Ub=[{name:"Einfacher Einzelmast",description:"Einzelmast mit einer Ebene und einem Leiter rechts",anzahlEbenen:1,ebenenConfig:[{nummerEbene:1,anzahlLeitungenLinks:0,anzahlLeitungenRechts:1}]}];function N0(e){const t={id:e.id||"",name:e.name||"Neue Vorlage",description:e.description,anzahlEbenen:e.anzahlEbenen||1,ebenenConfig:[]};return!e.ebenenConfig||e.ebenenConfig.length===0?t.ebenenConfig=R3(t.anzahlEbenen):t.ebenenConfig=e.ebenenConfig,t}function R3(e){const t=[];for(let n=0;n<e;n++)t.push({nummerEbene:n+1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1});return t}function O3(e){const t=[];return(!e.name||e.name.trim()==="")&&t.push("Template name is required"),e.anzahlEbenen<1&&t.push("At least one level (Ebene) is required"),e.ebenenConfig.length!==e.anzahlEbenen&&t.push("Number of level configurations must match anzahlEbenen"),e.ebenenConfig.forEach((n,i)=>{(n.anzahlLeitungenLinks<0||n.anzahlLeitungenRechts<0)&&t.push(`Ebene ${i+1}: Number of conductors cannot be negative`),n.anzahlLeitungenLinks===0&&n.anzahlLeitungenRechts===0&&t.push(`Ebene ${i+1}: At least one conductor is required`)}),t}function Ql(e,t,n,i){return`${e}_L${t}_${n[0].toUpperCase()}${i}`}function j3(e){const t=e.match(/^(.+)_L(\d+)_([LR])(\d+)$/);return t?{poleId:t[1],levelNumber:parseInt(t[2]),side:t[3]==="L"?"left":"right",connectionNumber:parseInt(t[4])}:null}function Zh(e,t){const n=t.x-e.x,i=t.y-e.y,a=Math.sqrt(n*n+i*i);return{x:n,y:i,Length:a}}function Kh(e,t){const n=t.Rechts-e.Rechts,i=t.Hoch-e.Hoch;return{Rechts:n,Hoch:i}}function M0(e){const t=e.Length||Math.sqrt(e.x*e.x+e.y*e.y);if(t===0)return{x:0,y:1,Length:1};const n=e.x/t;return{x:-(e.y/t),y:n,Length:1}}function T0(e){const t=Math.sqrt(e.Rechts*e.Rechts+e.Hoch*e.Hoch);if(t===0)return{Rechts:0,Hoch:1};const n=e.Rechts/t;return{Rechts:-(e.Hoch/t),Hoch:n}}function P3(e,t,n){const i=Zh(e,t),a=Zh(e,n),l=i.Length||Math.sqrt(i.x*i.x+i.y*i.y),c=a.Length||Math.sqrt(a.x*a.x+a.y*a.y);if(l===0||c===0)return{x:0,y:1,Length:1};const f={x:i.x/l,y:i.y/l},d={x:a.x/c,y:a.y/c};let h=f.x+d.x,m=f.y+d.y;const g=Math.sqrt(h*h+m*m);return g<.001?M0(a):(h/=g,m/=g,{x:-m,y:h,Length:1})}function I3(e,t,n){const i=Kh(e,t),a=Kh(e,n),l=Math.sqrt(i.Rechts*i.Rechts+i.Hoch*i.Hoch),c=Math.sqrt(a.Rechts*a.Rechts+a.Hoch*a.Hoch);if(l===0||c===0)return{Rechts:0,Hoch:1};const f={Rechts:i.Rechts/l,Hoch:i.Hoch/l},d={Rechts:a.Rechts/c,Hoch:a.Hoch/c};let h=f.Rechts+d.Rechts,m=f.Hoch+d.Hoch;const g=Math.sqrt(h*h+m*m);return g<.001?T0(a):(h/=g,m/=g,{Rechts:-m,Hoch:h})}function H3(e,t){const n=[],i=e.length;if(i===0)return n;if(i===1)return n.push({ausrichtung:{x:0,y:1,Length:1},gkAusrichtung:{Rechts:0,Hoch:1}}),n;for(let a=0;a<i;a++)if(a===0){const l=Zh(e[0],e[1]),c=Kh(t[0],t[1]);n.push({ausrichtung:M0(l),gkAusrichtung:T0(c)})}else if(a===i-1){const l=Zh(e[a-1],e[a]),c=Kh(t[a-1],t[a]);n.push({ausrichtung:M0(l),gkAusrichtung:T0(c)})}else n.push({ausrichtung:P3(e[a],e[a-1],e[a+1]),gkAusrichtung:I3(t[a],t[a-1],t[a+1])});return n}function k0(e,t,n,i){const a=[],l=new Map;for(const _ of n)l.set(_.fromConnectionId,_);const c=Array.from(t.values()).filter(_=>_.trasseId===e.id).sort((_,x)=>{const w=e.poleIds.indexOf(_.id),y=e.poleIds.indexOf(x.id);return w-y}),f=c.map(_=>({x:_.position.GK.Rechts,y:_.position.GK.Hoch,Length:Math.sqrt(_.position.GK.Rechts*_.position.GK.Rechts+_.position.GK.Hoch*_.position.GK.Hoch)})),d=c.map(_=>_.position.GK),h=H3(f,d);for(let _=0;_<c.length;_++){const x=c[_],w=_<c.length-1?c[_+1]:null,y=h[_],E=G3(x,w,l,i,_+1,y);a.push(E)}const m=Math.max(...a.map(_=>_.UsedEbenen.length),1),g=a.reduce((_,x)=>Math.max(_,x.UsedEbenen.reduce((w,y)=>w+y.UsedLeitungenLinks.length+y.UsedLeitungenRechts.length,0)),0);return{Nummer:parseInt(e.id.replace(/\D/g,"").substr(0,5))||1,Name:e.name,AnzahlMastebenen:m,AnzahlMastleitungen:g,UsedMasten:a}}function m_(e){if(e.einbauart===0)return 5;if(e.einbauart===1)return 4;if(e.einbauart===2)return 0;throw new Error("Invalid einbauart: "+e.einbauart)}function G3(e,t,n,i,a,l){const c={lfdNummer:a,OVektor:{x:e.position.GK.Rechts,y:e.position.GK.Hoch,Length:Math.sqrt(e.position.GK.Rechts*e.position.GK.Rechts+e.position.GK.Hoch*e.position.GK.Hoch)},GK_Vektor:e.position},f={...e,orientation:l?.ausrichtung||e.orientation,gkOrientation:l?.gkAusrichtung||e.gkOrientation||{Rechts:e.orientation.x,Hoch:e.orientation.y}},d=[];for(const m of e.levels){const g=U3(m,f,t,n,i);d.push(g)}const h=e.position.z+e.poleHeight;return{Fusspunkt:c,Name:e.name||`Mast ${a}`,NullpunktHoehe:h,MastHoehe:e.poleHeight,Ausrichtung:f.orientation,GKAusrichtung:f.gkOrientation,UsedEbenen:d}}function U3(e,t,n,i,a){const l=[],c=[];for(const d of e.leftConnections){const h=i.get(d.id);!h&&d.connected2Connection&&console.log(`WARNING: No connection line found for ${d.id}`);const m=p_(d,t,e,h,n,a,!0);l.push(m)}for(const d of e.rightConnections){const h=i.get(d.id),m=p_(d,t,e,h,n,a,!1);c.push(m)}const f=e.levelHeight;return{NummerEbene:e.levelNumber,AbstandNullpunkt:f,UsedLeitungenLinks:l,UsedLeitungenRechts:c}}function p_(e,t,n,i,a,l,c){const f=t.gkOrientation||{Rechts:t.orientation.x,Hoch:t.orientation.y},d=Math.sqrt(f.Rechts*f.Rechts+f.Hoch*f.Hoch);let h=f.Rechts,m=f.Hoch;d>0&&(h/=d,m/=d);const g=c?e.horizontalDistance2Pole:-e.horizontalDistance2Pole,_=e.durchgangspunktZ!==void 0?e.durchgangspunktZ:t.position.z+n.levelHeight;console.log("connection",e),console.log("pole",t),console.log("level",n),console.log("durchgangspunktZ",e.durchgangspunktZ),console.log("Expected Isolatorlaenge",m_(e));const x=t.nullpunktHeight+n.levelHeight-m_(e);console.log("Computed DurchgangspunktZ",x);const w={GK:{Rechts:t.position.GK.Rechts+h*g,Hoch:t.position.GK.Hoch+m*g},z:_};let y=0,E=0;if(e.connected2Connection&&a){const k=j3(e.connected2Connection);k&&(y=k.levelNumber,E=k.side==="left"?-k.connectionNumber:k.connectionNumber)}let D=i?.connectionLineType||"",A=i?.soundPowerLevel!==void 0?i.soundPowerLevel:0;if(D&&i?.soundPowerLevel===void 0){const k=l.find(T=>T.Name===D);k&&(A=k.SchallLW)}const N=w,F=i?.acdc!==void 0?i.acdc:e.acdc!==void 0?e.acdc:1;return!i&&e.schallLw!==void 0&&(D=e.schallLw),!i&&e.schallLwDB!==void 0&&(A=e.schallLwDB),{Durchgangspunkt:w,ACDC:F,NummerLeiter:c?-e.connectionNumber:e.connectionNumber,AbstandMastachse:e.horizontalDistance2Pole,Isolatorlaenge:e.isolatorLength||2.5,NextMastEbene:y,NextMastLeiter:E,Einbauart:0,Durchhang:i?.maxSag||5,ParabelA:0,ParabelB:0,ParabelC:0,SchallLw:D,SchallLwDB:A,BetrU:i?.operatingVoltage||0,AmSeg:0,SegLenU:0,LeiterLen:0,Mittelpkt:N,SegmentPunkte:[]}}function $3(e,t,n){const i=new Map,a=[],l=[],c=new Map,f=n||e.Nummer.toString();for(let h=0;h<e.UsedMasten.length;h++){const m=e.UsedMasten[h],g=`pole_${f}_${h+1}`;l.push(g);const _=Z3(m,g,f);i.set(g,_);for(const x of _.levels){for(const w of x.leftConnections)c.set(w.id,w);for(const w of x.rightConnections)c.set(w.id,w)}}for(let h=0;h<e.UsedMasten.length-1;h++){const m=l[h],g=l[h+1],_=i.get(g),x=e.UsedMasten[h];for(const w of x.UsedEbenen){for(let y=0;y<w.UsedLeitungenLinks.length;y++){const E=w.UsedLeitungenLinks[y];if(E.NextMastEbene>0){const D=Ql(m,w.NummerEbene,"left",y+1),A=_.levels.find(N=>N.levelNumber===E.NextMastEbene);if(A){let N;if(E.NextMastLeiter<0){const F=Math.abs(E.NextMastLeiter)-1;N=A.leftConnections[F]}else if(E.NextMastLeiter>0){const F=E.NextMastLeiter-1;N=A.rightConnections[F]}if(N){const F=c.get(D);F&&(F.connected2Connection=N.id),a.push({id:`line_${h}_${w.NummerEbene}_L${y+1}`,trasseId:f,fromConnectionId:D,toConnectionId:N.id,connectionLineType:E.SchallLw||`Type_${E.SchallLwDB}dB`,maxSag:E.Durchhang>0?E.Durchhang:5,operatingVoltage:E.BetrU,soundPowerLevel:E.SchallLwDB,acdc:E.ACDC})}}}}for(let y=0;y<w.UsedLeitungenRechts.length;y++){const E=w.UsedLeitungenRechts[y];if(E.NextMastEbene>0){const D=Ql(m,w.NummerEbene,"right",y+1),A=_.levels.find(N=>N.levelNumber===E.NextMastEbene);if(A){let N;if(E.NextMastLeiter<0){const F=Math.abs(E.NextMastLeiter)-1;N=A.leftConnections[F]}else if(E.NextMastLeiter>0){const F=E.NextMastLeiter-1;N=A.rightConnections[F]}if(N){const F=c.get(D);F&&(F.connected2Connection=N.id),a.push({id:`line_${h}_${w.NummerEbene}_R${y+1}`,trasseId:f,fromConnectionId:D,toConnectionId:N.id,connectionLineType:E.SchallLw||`Type_${E.SchallLwDB}dB`,maxSag:E.Durchhang>0?E.Durchhang:5,operatingVoltage:E.BetrU,soundPowerLevel:E.SchallLwDB,acdc:E.ACDC})}}}}}}return{trasse:{id:n||e.Nummer.toString(),name:e.Name,templateId:t,poleIds:l},poles:i,connectionLines:a}}function Z3(e,t,n){const i=[];console.log("Using this mast: ",e);for(const a of e.UsedEbenen){const l={levelNumber:a.NummerEbene,levelHeight:a.AbstandNullpunkt,leftConnections:[],rightConnections:[]};for(let c=0;c<a.UsedLeitungenLinks.length;c++){const f=a.UsedLeitungenLinks[c],d={id:Ql(t,a.NummerEbene,"left",c+1),poleId:t,levelNumber:a.NummerEbene,side:"left",connectionNumber:c+1,horizontalDistance2Pole:f.AbstandMastachse,isolatorLength:f.Isolatorlaenge,einbauart:f.Einbauart,durchgangspunktGK:{Rechts:f.Durchgangspunkt.GK.Rechts,Hoch:f.Durchgangspunkt.GK.Hoch},durchgangspunktZ:f.Durchgangspunkt.z,acdc:f.ACDC,schallLw:f.SchallLw,schallLwDB:f.SchallLwDB};l.leftConnections.push(d)}for(let c=0;c<a.UsedLeitungenRechts.length;c++){const f=a.UsedLeitungenRechts[c],d={id:Ql(t,a.NummerEbene,"right",c+1),poleId:t,levelNumber:a.NummerEbene,side:"right",connectionNumber:c+1,horizontalDistance2Pole:f.AbstandMastachse,isolatorLength:f.Isolatorlaenge,einbauart:f.Einbauart,durchgangspunktGK:{Rechts:f.Durchgangspunkt.GK.Rechts,Hoch:f.Durchgangspunkt.GK.Hoch},durchgangspunktZ:f.Durchgangspunkt.z,acdc:f.ACDC,schallLw:f.SchallLw,schallLwDB:f.SchallLwDB};l.rightConnections.push(d)}i.push(l)}return console.log("Return this levels: ",i),{id:t,trasseId:n,name:e.Name||"No Name",position:e.Fusspunkt.GK_Vektor,poleHeight:e.MastHoehe,nullpunktHeight:e.NullpunktHoehe||0,orientation:e.Ausrichtung,gkOrientation:e.GKAusrichtung,levels:i}}const Ba=11102230246251565e-32,ar=134217729,K3=(3+8*Ba)*Ba;function t0(e,t,n,i,a){let l,c,f,d,h=t[0],m=i[0],g=0,_=0;m>h==m>-h?(l=h,h=t[++g]):(l=m,m=i[++_]);let x=0;if(g<e&&_<n)for(m>h==m>-h?(c=h+l,f=l-(c-h),h=t[++g]):(c=m+l,f=l-(c-m),m=i[++_]),l=c,f!==0&&(a[x++]=f);g<e&&_<n;)m>h==m>-h?(c=l+h,d=c-l,f=l-(c-d)+(h-d),h=t[++g]):(c=l+m,d=c-l,f=l-(c-d)+(m-d),m=i[++_]),l=c,f!==0&&(a[x++]=f);for(;g<e;)c=l+h,d=c-l,f=l-(c-d)+(h-d),h=t[++g],l=c,f!==0&&(a[x++]=f);for(;_<n;)c=l+m,d=c-l,f=l-(c-d)+(m-d),m=i[++_],l=c,f!==0&&(a[x++]=f);return(l!==0||x===0)&&(a[x++]=l),x}function q3(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function $c(e){return new Float64Array(e)}const V3=(3+16*Ba)*Ba,Y3=(2+12*Ba)*Ba,X3=(9+64*Ba)*Ba*Ba,Tl=$c(4),g_=$c(8),v_=$c(12),y_=$c(16),vr=$c(4);function W3(e,t,n,i,a,l,c){let f,d,h,m,g,_,x,w,y,E,D,A,N,F,k,T,R,j;const O=e-a,G=n-a,U=t-l,I=i-l;F=O*I,_=ar*O,x=_-(_-O),w=O-x,_=ar*I,y=_-(_-I),E=I-y,k=w*E-(F-x*y-w*y-x*E),T=U*G,_=ar*U,x=_-(_-U),w=U-x,_=ar*G,y=_-(_-G),E=G-y,R=w*E-(T-x*y-w*y-x*E),D=k-R,g=k-D,Tl[0]=k-(D+g)+(g-R),A=F+D,g=A-F,N=F-(A-g)+(D-g),D=N-T,g=N-D,Tl[1]=N-(D+g)+(g-T),j=A+D,g=j-A,Tl[2]=A-(j-g)+(D-g),Tl[3]=j;let W=q3(4,Tl),B=Y3*c;if(W>=B||-W>=B||(g=e-O,f=e-(O+g)+(g-a),g=n-G,h=n-(G+g)+(g-a),g=t-U,d=t-(U+g)+(g-l),g=i-I,m=i-(I+g)+(g-l),f===0&&d===0&&h===0&&m===0)||(B=X3*c+K3*Math.abs(W),W+=O*m+I*f-(U*h+G*d),W>=B||-W>=B))return W;F=f*I,_=ar*f,x=_-(_-f),w=f-x,_=ar*I,y=_-(_-I),E=I-y,k=w*E-(F-x*y-w*y-x*E),T=d*G,_=ar*d,x=_-(_-d),w=d-x,_=ar*G,y=_-(_-G),E=G-y,R=w*E-(T-x*y-w*y-x*E),D=k-R,g=k-D,vr[0]=k-(D+g)+(g-R),A=F+D,g=A-F,N=F-(A-g)+(D-g),D=N-T,g=N-D,vr[1]=N-(D+g)+(g-T),j=A+D,g=j-A,vr[2]=A-(j-g)+(D-g),vr[3]=j;const re=t0(4,Tl,4,vr,g_);F=O*m,_=ar*O,x=_-(_-O),w=O-x,_=ar*m,y=_-(_-m),E=m-y,k=w*E-(F-x*y-w*y-x*E),T=U*h,_=ar*U,x=_-(_-U),w=U-x,_=ar*h,y=_-(_-h),E=h-y,R=w*E-(T-x*y-w*y-x*E),D=k-R,g=k-D,vr[0]=k-(D+g)+(g-R),A=F+D,g=A-F,N=F-(A-g)+(D-g),D=N-T,g=N-D,vr[1]=N-(D+g)+(g-T),j=A+D,g=j-A,vr[2]=A-(j-g)+(D-g),vr[3]=j;const K=t0(re,g_,4,vr,v_);F=f*m,_=ar*f,x=_-(_-f),w=f-x,_=ar*m,y=_-(_-m),E=m-y,k=w*E-(F-x*y-w*y-x*E),T=d*h,_=ar*d,x=_-(_-d),w=d-x,_=ar*h,y=_-(_-h),E=h-y,R=w*E-(T-x*y-w*y-x*E),D=k-R,g=k-D,vr[0]=k-(D+g)+(g-R),A=F+D,g=A-F,N=F-(A-g)+(D-g),D=N-T,g=N-D,vr[1]=N-(D+g)+(g-T),j=A+D,g=j-A,vr[2]=A-(j-g)+(D-g),vr[3]=j;const ee=t0(K,v_,4,vr,y_);return y_[ee-1]}function ph(e,t,n,i,a,l){const c=(t-l)*(n-a),f=(e-a)*(i-l),d=c-f,h=Math.abs(c+f);return Math.abs(d)>=V3*h?d:-W3(e,t,n,i,a,l,h)}const __=Math.pow(2,-52),gh=new Uint32Array(512);class Fo{static from(t,n=nC,i=rC){const a=t.length,l=new Float64Array(a*2);for(let c=0;c<a;c++){const f=t[c];l[2*c]=n(f),l[2*c+1]=i(f)}return new Fo(l)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:a,_hullHash:l}=this,c=t.length>>1;let f=1/0,d=1/0,h=-1/0,m=-1/0;for(let O=0;O<c;O++){const G=t[2*O],U=t[2*O+1];G<f&&(f=G),U<d&&(d=U),G>h&&(h=G),U>m&&(m=U),this._ids[O]=O}const g=(f+h)/2,_=(d+m)/2;let x,w,y;for(let O=0,G=1/0;O<c;O++){const U=n0(g,_,t[2*O],t[2*O+1]);U<G&&(x=O,G=U)}const E=t[2*x],D=t[2*x+1];for(let O=0,G=1/0;O<c;O++){if(O===x)continue;const U=n0(E,D,t[2*O],t[2*O+1]);U<G&&U>0&&(w=O,G=U)}let A=t[2*w],N=t[2*w+1],F=1/0;for(let O=0;O<c;O++){if(O===x||O===w)continue;const G=eC(E,D,A,N,t[2*O],t[2*O+1]);G<F&&(y=O,F=G)}let k=t[2*y],T=t[2*y+1];if(F===1/0){for(let U=0;U<c;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];Ul(this._ids,this._dists,0,c-1);const O=new Uint32Array(c);let G=0;for(let U=0,I=-1/0;U<c;U++){const W=this._ids[U],B=this._dists[W];B>I&&(O[G++]=W,I=B)}this.hull=O.subarray(0,G),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(ph(E,D,A,N,k,T)<0){const O=w,G=A,U=N;w=y,A=k,N=T,y=O,k=G,T=U}const R=tC(E,D,A,N,k,T);this._cx=R.x,this._cy=R.y;for(let O=0;O<c;O++)this._dists[O]=n0(t[2*O],t[2*O+1],R.x,R.y);Ul(this._ids,this._dists,0,c-1),this._hullStart=x;let j=3;i[x]=n[y]=w,i[w]=n[x]=y,i[y]=n[w]=x,a[x]=0,a[w]=1,a[y]=2,l.fill(-1),l[this._hashKey(E,D)]=x,l[this._hashKey(A,N)]=w,l[this._hashKey(k,T)]=y,this.trianglesLen=0,this._addTriangle(x,w,y,-1,-1,-1);for(let O=0,G,U;O<this._ids.length;O++){const I=this._ids[O],W=t[2*I],B=t[2*I+1];if(O>0&&Math.abs(W-G)<=__&&Math.abs(B-U)<=__||(G=W,U=B,I===x||I===w||I===y))continue;let re=0;for(let $=0,q=this._hashKey(W,B);$<this._hashSize&&(re=l[(q+$)%this._hashSize],!(re!==-1&&re!==i[re]));$++);re=n[re];let K=re,ee;for(;ee=i[K],ph(W,B,t[2*K],t[2*K+1],t[2*ee],t[2*ee+1])>=0;)if(K=ee,K===re){K=-1;break}if(K===-1)continue;let V=this._addTriangle(K,I,i[K],-1,-1,a[K]);a[I]=this._legalize(V+2),a[K]=V,j++;let Q=i[K];for(;ee=i[Q],ph(W,B,t[2*Q],t[2*Q+1],t[2*ee],t[2*ee+1])<0;)V=this._addTriangle(Q,I,ee,a[I],-1,a[Q]),a[I]=this._legalize(V+2),i[Q]=Q,j--,Q=ee;if(K===re)for(;ee=n[K],ph(W,B,t[2*ee],t[2*ee+1],t[2*K],t[2*K+1])<0;)V=this._addTriangle(ee,I,K,-1,a[K],a[ee]),this._legalize(V+2),a[ee]=V,i[K]=K,j--,K=ee;this._hullStart=n[I]=K,i[K]=n[Q]=I,i[I]=Q,l[this._hashKey(W,B)]=I,l[this._hashKey(t[2*K],t[2*K+1])]=K}this.hull=new Uint32Array(j);for(let O=0,G=this._hullStart;O<j;O++)this.hull[O]=G,G=i[G];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Q3(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:a}=this;let l=0,c=0;for(;;){const f=i[t],d=t-t%3;if(c=d+(t+2)%3,f===-1){if(l===0)break;t=gh[--l];continue}const h=f-f%3,m=d+(t+1)%3,g=h+(f+2)%3,_=n[c],x=n[t],w=n[m],y=n[g];if(J3(a[2*_],a[2*_+1],a[2*x],a[2*x+1],a[2*w],a[2*w+1],a[2*y],a[2*y+1])){n[t]=y,n[f]=_;const D=i[g];if(D===-1){let N=this._hullStart;do{if(this._hullTri[N]===g){this._hullTri[N]=t;break}N=this._hullPrev[N]}while(N!==this._hullStart)}this._link(t,D),this._link(f,i[c]),this._link(c,g);const A=h+(f+1)%3;l<gh.length&&(gh[l++]=A)}else{if(l===0)break;t=gh[--l]}}return c}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,a,l,c){const f=this.trianglesLen;return this._triangles[f]=t,this._triangles[f+1]=n,this._triangles[f+2]=i,this._link(f,a),this._link(f+1,l),this._link(f+2,c),this.trianglesLen+=3,f}}function Q3(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function n0(e,t,n,i){const a=e-n,l=t-i;return a*a+l*l}function J3(e,t,n,i,a,l,c,f){const d=e-c,h=t-f,m=n-c,g=i-f,_=a-c,x=l-f,w=d*d+h*h,y=m*m+g*g,E=_*_+x*x;return d*(g*E-y*x)-h*(m*E-y*_)+w*(m*x-g*_)<0}function eC(e,t,n,i,a,l){const c=n-e,f=i-t,d=a-e,h=l-t,m=c*c+f*f,g=d*d+h*h,_=.5/(c*h-f*d),x=(h*m-f*g)*_,w=(c*g-d*m)*_;return x*x+w*w}function tC(e,t,n,i,a,l){const c=n-e,f=i-t,d=a-e,h=l-t,m=c*c+f*f,g=d*d+h*h,_=.5/(c*h-f*d),x=e+(h*m-f*g)*_,w=t+(c*g-d*m)*_;return{x,y:w}}function Ul(e,t,n,i){if(i-n<=20)for(let a=n+1;a<=i;a++){const l=e[a],c=t[l];let f=a-1;for(;f>=n&&t[e[f]]>c;)e[f+1]=e[f--];e[f+1]=l}else{const a=n+i>>1;let l=n+1,c=i;vc(e,a,l),t[e[n]]>t[e[i]]&&vc(e,n,i),t[e[l]]>t[e[i]]&&vc(e,l,i),t[e[n]]>t[e[l]]&&vc(e,n,l);const f=e[l],d=t[f];for(;;){do l++;while(t[e[l]]<d);do c--;while(t[e[c]]>d);if(c<l)break;vc(e,l,c)}e[n+1]=e[c],e[c]=f,i-l+1>=c-n?(Ul(e,t,l,i),Ul(e,t,n,c-1)):(Ul(e,t,n,c-1),Ul(e,t,l,i))}}function vc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function nC(e){return e[0]}function rC(e){return e[1]}function x_(e){if(console.log("Computing triangulation for",e.length,"points"),e.length<3)return console.log("Not enough points for triangulation"),{dreiecke:[],kanten:[]};const t=e.map(_=>_.GK_Vektor.GK.Rechts),n=e.map(_=>_.GK_Vektor.GK.Hoch),i=Math.min(...t),a=Math.min(...n);console.log("Coordinate ranges - X:",Math.min(...t),"to",Math.max(...t)),console.log("Coordinate ranges - Y:",Math.min(...n),"to",Math.max(...n));const l=[];e.forEach((_,x)=>{const w=_.GK_Vektor.GK.Rechts-i,y=_.GK_Vektor.GK.Hoch-a;console.log(`Point ${x}: original(${_.GK_Vektor.GK.Rechts}, ${_.GK_Vektor.GK.Hoch}) normalized(${w}, ${y})`),l.push(w),l.push(y)}),console.log("Normalized points array for Delaunator:",l);const c=new Set;for(let _=0;_<l.length;_+=2){const x=`${l[_]},${l[_+1]}`;c.has(x)&&console.warn("Duplicate point found:",l[_],l[_+1]),c.add(x)}console.log("Unique points count:",c.size),console.log("Testing Delaunator with simple triangle..."),console.log("Delaunator constructor:",typeof Fo),console.log("Delaunator.from function:",typeof Fo.from);try{const _=[168,180,168,178,168,179,168,181,168,183];console.log("Using coords from docs:",_);const x=new Fo(_);console.log("Doc example triangles:",x.triangles.length),console.log("Doc example result:",Array.from(x.triangles));const w=[0,0,1,0,0,1],y=new Fo(w);console.log("Simple triangle triangles:",y.triangles.length),console.log("Simple triangle result:",Array.from(y.triangles))}catch(_){console.error("Test triangulation failed:",_)}let f;try{if(f=new Fo(l),console.log("Delaunator triangles array length:",f.triangles.length),console.log("First few triangles:",Array.from(f.triangles.slice(0,12))),console.log("Hull:",Array.from(f.hull)),console.log("Hull length:",f.hull.length),!f.triangles||f.triangles.length===0){if(console.error("Delaunator produced no triangles - points might be collinear or invalid"),l.length>=6){console.log("Attempting manual triangle creation...");const _=[l[0],l[1]],x=[l[2],l[3]],w=[l[4],l[5]];console.log("Three points for manual triangle:",_,x,w);const y=(x[0]-_[0])*(w[1]-_[1])-(x[1]-_[1])*(w[0]-_[0]);console.log("Cross product (collinearity test):",y),Math.abs(y)<1e-10&&console.error("Points are collinear!")}return{dreiecke:[],kanten:[]}}}catch(_){return console.error("Delaunator error:",_),{dreiecke:[],kanten:[]}}const d=[],h=f.triangles.length/3;console.log("Generated",h,"triangles");for(let _=0;_<h;_++){const x=f.triangles[_*3],w=f.triangles[_*3+1],y=f.triangles[_*3+2],E={LfdNummer:_+1,A:{Nummer:-1,HP:{lfdNummer:x+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[x].GK_Vektor}},B:{Nummer:-1,HP:{lfdNummer:w+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[w].GK_Vektor}},C:{Nummer:-1,HP:{lfdNummer:y+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[y].GK_Vektor}}};d.push(E)}const m=[],g=new Map;for(let _=0;_<h;_++){const x=f.triangles[_*3],w=f.triangles[_*3+1],y=f.triangles[_*3+2];[[Math.min(x,w),Math.max(x,w)],[Math.min(w,y),Math.max(w,y)],[Math.min(y,x),Math.max(y,x)]].forEach(D=>{const A=`${D[0]}-${D[1]}`;g.has(A)||g.set(A,{indices:D,triangles:[]}),g.get(A).triangles.push(_+1)})}return g.forEach(_=>{const[x,w]=_.indices,y={EckeA:{Nummer:-1,HP:{lfdNummer:x+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[x].GK_Vektor}},EckeB:{Nummer:-1,HP:{lfdNummer:w+1,OVektor:{x:0,y:0,Length:0},GK_Vektor:e[w].GK_Vektor}},DreieckA:_.triangles[0]||-1,DreieckB:_.triangles[1]||-1};m.push(y)}),{dreiecke:d,kanten:m}}const iC={};class Dn{usedData;dtmProcessor;absorpKoeff=1;logEnabled;logger;constructor(t,n=null,i){this.usedData=t,this.dtmProcessor=n;const a=iC?.VITE_DEBUG_LOGS,l=a?["1","true","on","yes"].includes(a.toLowerCase()):!1,c=!1;console.log("Opts",i),console.log("logEnabled",i?.enableLogging,l,c),this.logEnabled=i?.enableLogging??l??c??!1,this.logger={log:(...f)=>{this.logEnabled&&console.log(...f)},warn:(...f)=>{this.logEnabled&&console.warn(...f)},error:(...f)=>{this.logEnabled&&console.error(...f)}}}getDtmProcessor(){return this.dtmProcessor}calculateLatLTForImmissionPointDetailed(t){if(t>=this.usedData.ImmissionPoints.length)return this.logger.log(`Invalid immission point index: ${t}`),{total:0,esq:0,trassen:0};const n=this.usedData.ImmissionPoints[t],i={GK:{Rechts:n.Position.GK.Rechts,Hoch:n.Position.GK.Hoch},z:n.Position.z+n.HeightOffset};this.logger.log(`    UsedDataCalculator - Processing: ${n.Name}`),this.logger.log(`    Using ImmiPkt: Rechts=${i.GK.Rechts}, Hoch=${i.GK.Hoch}, Z=${i.z}`),this.logger.log(`    mitFrequenz: ${this.usedData.mitFrequenz}`);const a=this.calculateESQContribution(i,n);this.logger.log(`    ESQ total contribution: ${10*Math.log10(a)} dB`);let l=0;this.logger.log(`    Total transmission lines in UsedData: ${this.usedData.Trassen.length}`);for(const g of this.usedData.Trassen){this.logger.log(`    Processing transmission line: ${g.Name} (Nummer=${g.Nummer}, Masts=${g.UsedMasten.length})`);for(let _=0;_<g.UsedMasten.length-1;_++){const x=g.UsedMasten[_],w=g.UsedMasten[_+1];this.logger.log(`      Processing mast span ${_} to ${_+1}`);for(const y of x.UsedEbenen){this.logger.log(`        Processing level: NummerEbene=${y.NummerEbene}`);for(const E of y.UsedLeitungenLinks){this.logger.log(`          Processing left conductor: NummerLeiter=${E.NummerLeiter}, NextMastEbene=${E.NextMastEbene}, NextMastLeiter=${E.NextMastLeiter}`);const D=this.findNextConductor(w,E.NextMastEbene,E.NextMastLeiter);if(D){this.logger.log(`            Found next conductor: NummerLeiter=${D.NummerLeiter}`);const A=this.calcLeiter(E,D,i,n.G_Bodenfaktor);A>0&&(this.logger.log(`            Contribution: ${A}`),l+=A)}else this.logger.log("            WARNING: Could not find next conductor!")}for(const E of y.UsedLeitungenRechts){this.logger.log(`          Processing right conductor: NummerLeiter=${E.NummerLeiter}, NextMastEbene=${E.NextMastEbene}, NextMastLeiter=${E.NextMastLeiter}`);const D=this.findNextConductor(w,E.NextMastEbene,E.NextMastLeiter);if(D){this.logger.log(`            Found next conductor: NummerLeiter=${D.NummerLeiter}`);const A=this.calcLeiter(E,D,i,n.G_Bodenfaktor);A>0&&(this.logger.log(`            Contribution: ${A}`),l+=A)}else this.logger.log("            WARNING: Could not find next conductor!")}}}}const c=a+l;let f=0;c>=1&&(f=10*Math.log10(c));let d=0;a>=1&&(d=10*Math.log10(a));let h=0;l>=1&&(h=10*Math.log10(l)),this.logger.log(`[UsedDataCalculator] Total LatLT for immission point ${t}: ${f.toFixed(2)} dB`),this.logger.log(`[UsedDataCalculator] ESQ LatLT: ${d.toFixed(2)} dB`),this.logger.log(`[UsedDataCalculator] Trassen LatLT: ${h.toFixed(2)} dB`);const m=this.usedData.Kt??0;return{total:f+m,esq:d+m,trassen:h+m}}calculateLatLTForImmissionPoint(t){return this.calculateLatLTForImmissionPointDetailed(t).total}findNextConductor(t,n,i){if(n<=0||n>t.UsedEbenen.length)throw this.logger.log(`DEBUG: findNextConductor: nextMastEbene=${n} is out of range`),new Error(`findNextConductor: nextMastEbene=${n} is out of range`);const a=t.UsedEbenen.find(l=>l.NummerEbene===n);if(!a)throw this.logger.log(`DEBUG: findNextConductor: targetEbene=${n} not found`),new Error(`findNextConductor: targetEbene=${n} not found`);if(i<0){const l=-i-1;if(this.logger.log(`DEBUG: findNextConductor: index=${l} targetEbene.UsedLeitungenLinks.length=${a.UsedLeitungenLinks.length}`),l>=0&&l<a.UsedLeitungenLinks.length)return a.UsedLeitungenLinks[l]}else if(i>0){const l=i-1;if(l>=0&&l<a.UsedLeitungenRechts.length)return a.UsedLeitungenRechts[l]}throw this.logger.log(`DEBUG: findNextConductor: nextMastLeiter=${i} not found`),new Error(`findNextConductor: nextMastLeiter=${i} not found`)}calcLeiter(t,n,i,a){let l=0;const c=t.SchallLw?.trim()||"";this.logger.log(`            Looking up sound power for conductor type: '${c}'`),this.logger.log(`            Available conductor types: ${this.usedData.LeiterTypes.length}`);for(const d of this.usedData.LeiterTypes){const h=d.Name?.trim()||"",m=d.SchallLW||0;if(this.logger.log(`              Checking: '${h}' vs '${c}', SchallLW=${m}`),h===c){l=m,this.logger.log("schallLW",m),this.logger.log(`            FOUND: lwFehler=${l} dB for type '${c}'`);break}}if(l===0)throw this.logger.log(`            WARNING: No sound power level found for conductor type '${c}'`),new Error(`No sound power level found for conductor type '${c}'`);this.logger.log(`            Conductor parameters: BetrU=${t.BetrU}, ParabelA=${t.ParabelA}, ParabelB=${t.ParabelB}, ParabelC=${t.ParabelC}`);const f=this.iterationLeiter(l,0,t.BetrU,t,n,i,!1,a);return this.logger.log(`DEBUG: Total Iteration_Leiter result = ${f}`),f}iterationLeiter(t,n,i,a,l,c,f,d){const h=n+(i-n)/2,m=this.parabelpunkt(a.BetrU,a.Durchgangspunkt.GK,l.Durchgangspunkt.GK,a.ParabelA,a.ParabelB,a.ParabelC,a.Durchhang,h),g=Dn.GKVector3d_Abstand(m,c),_=2*a.ParabelA*n+a.ParabelB,x=2*a.ParabelA*i+a.ParabelB,w=Math.sqrt(1+_*_),y=Math.sqrt(1+x*x),E=(x*y+Math.log(x+y)-(_*w+Math.log(_+w)))/(4*a.ParabelA);if(this.logger.log(`DEBUG: dEntfernung=${g}, SegLen=${E}`),this.logger.log(`DEBUG: mtlPunkt at hoch=${m.GK.Hoch}, rechts=${m.GK.Rechts}, hoehe=${m.z}`),this.logger.log(`DEBUG: Branching check: dEntfernung(${g}) > 2*SegLen(${2*E}) = ${g>2*E}, SegLen < 5 = ${E<5}`),Number.isNaN(E))throw this.logger.error("🚨 ERROR: SegLen is NaN!"),new Error("SegLen is NaN!");if(g>2*E||E<5){const D=t+10*Math.log10(E);if(g<=.28*Math.sqrt(Math.pow(10,.1*D)))return this.segTrasse(D,m,c,g,f,a.ACDC,d)}else return this.logger.log(`DEBUG: SUBDIVIDING segment from ${n} to ${i}`),this.iterationLeiter(t,n,h,a,l,c,f,d)+this.iterationLeiter(t,h,i,a,l,c,f,d);return 0}parabelpunkt(t,n,i,a,l,c,f,d){if(a===0&&l===0&&c===0)throw this.logger.error("🚨 ERROR: Parabelpunkt: a, b, c are all 0!"),new Error("Parabelpunkt: a, b, c are all 0!");return console.log("Used d",f),{GK:{Hoch:n.Hoch+d*(i.Hoch-n.Hoch)/t,Rechts:n.Rechts+d*(i.Rechts-n.Rechts)/t},z:a*d*d+l*d+c}}segTrasse(t,n,i,a,l,c,f){if(this.usedData.mitFrequenz===!1||this.usedData.mitFrequenz===void 0){const d=this.calculateAdiv(a),h=this.calculateAatm(a);this.logger.log("Running in non-frequency-dependent mode");const m=this.berechneAgr(n,i,f,l),g=this.getDOmega(n,i);let _=0;this.usedData.AgrKorrektur&&(_=this.getAgrKorrektur(a,n,i));const x=0,w=d+h+x+m;if(this.logger.log(`DEBUG: Adiv=${d}, Aatm=${h}, Amisc=${x}, Agrbar=${m}, Total A=${w}`),this.logger.log(`DEBUG: DOmega=${g.toFixed(4)}, AgrKorrektur=${_.toFixed(4)}`),this.logger.log(`DEBUG: Checking condition: Lw(${t.toFixed(2)}) + DOmega(${g.toFixed(2)}) = ${(t+g).toFixed(2)} > A(${w.toFixed(2)}) + AgrKorrektur(${_.toFixed(2)}) = ${(w+_).toFixed(2)}`),t+g>w+_){const y=Math.pow(10,.1*(t+g-w-_));return this.logger.log(`DEBUG: Calculation: 10^(0.1 * (${t.toFixed(2)} + ${g.toFixed(2)} - ${w.toFixed(2)} - ${_.toFixed(2)})) = 10^(0.1 * ${(t+g-w-_).toFixed(2)}) = ${y.toExponential(4)}`),y}return 0}else{this.logger.log(`DEBUG: Using frequency-dependent calculation, btACDC=${c}, Lw=${t.toFixed(2)}`);let d=0;for(let h=0;h<=32;h++){const m=20*Math.log10(a)+11,g=this.getAlphaAtm(h)*a/1e3,_=0,x=this.berechneAbschirmungMtlHoeheDpFreq(n,i,a,h,l),w=x[0],y=x[1],E=x[2];this.logger.log(`Agrbar_f: ${w}, mtlHoehe: ${y}, dP: ${E}`);let D=w;D<=0&&(D=this.berechneAgrF0124(y,E,h,f)),this.logger.log(`Adjusted Agrbar_f: ${D}`);const A=m+g+_+D;this.logger.log(`A_f: ${A}`);const N=this.getLwAF(h,c);this.logger.log(`Frequenzanpassung ${N}`);const F=.1*(t+N-A),k=Math.pow(10,F);d=d+k,this.logger.log(`DEBUG: f=${h}(${this.getStrF(h)}Hz): Adiv_f=${m.toFixed(2)}, Aatm_f=${g.toFixed(2)}, Agrbar_f=${D.toFixed(2)}, A_f=${A.toFixed(2)}, Freq_adj=${N.toFixed(2)}`),this.logger.log(`Addition: ${k}`)}return this.logger.log(`DEBUG: Frequency-dependent total Seg_i_f_sum = ${d.toExponential(4)}`),d}}calculateAdiv(t){return 20*Math.log10(t)+11}calculateAatm(t){return this.absorpKoeff*t/1e3}berechneAgr(t,n,i,a=!0){console.log("Using bodenfaktor",i);const l=Dn.GKVector3d_Abstand(t,n),c=this.berechneAbschirmungMtlHoeheDp(t,n,l,a),f=c[0],d=c[1],h=c[2];if(this.logger.log(`DEBUG: mtlHoehe=${d}, dP=${h}`),console.log("Agrbar_before",f),f<=0){let m=4.8-2*d/h*(17+300/h);return m<0&&(m=0),this.logger.log(`DEBUG Agr: 4.8 - (${2*d} / ${h}) * (17 + 300 / ${h})`),this.logger.log(`DEBUG Agr: 4.8 - ${2*d/h} * ${17+300/h} = ${m}`),m}else return this.logger.log(`DEBUG: Using screening attenuation Dz = ${f} dB`),f}berechneAbschirmungMtlHoeheDpFreq(t,n,i,a,l=!0){const c=t.GK.Rechts,f=t.GK.Hoch;console.log("bIsESQ",l),console.log("dEntfernung",i),console.log("f",a);const d=Dn.GKVector3d_Richtungsvektor(t,n),h=d.GK.Rechts,m=d.GK.Hoch;let g=!1;const _=[];if(this.dtmProcessor&&this.dtmProcessor.DGMKante)for(let D=0;D<this.dtmProcessor.DGMKante.length;D++){const A=this.dtmProcessor.DGMKante[D];if(!A||!A.EckeA)break;const N=this.getHeightPointByLfdNummer(A.EckeA.HP.lfdNummer),F=this.getHeightPointByLfdNummer(A.EckeB.HP.lfdNummer);if(!N||!F)continue;const k=N.GK.Rechts,T=N.GK.Hoch,R=Dn.GKVector3d_Richtungsvektor(N,F),j=R.GK.Rechts,O=R.GK.Hoch,G=O*h-j*m;if(Math.abs(G)>1e-4){const U=(-c*m+f*h+k*m-T*h)/G,I=(-c*O+f*j+k*O-T*j)/G;if(U>=0&&U<=1&&I>=0&&I<=1){const W={GK:{Rechts:R.GK.Rechts*U,Hoch:R.GK.Hoch*U},z:R.z*U},B=Dn.GKVector3d_Add(N,W),re=Dn.GKVector2d_Abstand(t.GK,B.GK),K=t.z+re*(n.z-t.z)/Dn.GKVector2d_Abstand(t.GK,n.GK);B.z>K&&(g=!0),_.push({index:D,point:B,distance:re})}}}let x=-1;if(g&&_.length>0){let D=_[0];for(const T of _)T.point.z>D.point.z&&(D=T);const A=Dn.GKVector3d_Abstand(t,D.point),N=Dn.GKVector3d_Abstand(D.point,n),F=Dn.GKVector3d_Abstand(t,n),k=A+N-F;if(k>0){const T=Math.exp(-Math.sqrt(A*N*F/(2*k))/2e3);if(a===-1)x=10*Math.log10(3+k*T*20/.7);else{const R=this.getLambdaAbsch(a);x=10*Math.log10(3+k*T*20/R)}this.logger.log(`DEBUG: Frequency screening - f=${a}, lambda=${a===-1?.7:this.getLambdaAbsch(a).toFixed(4)}, z=${k.toFixed(4)}, Kmet=${T.toFixed(4)}, Attenuation=${x.toFixed(2)} dB`)}else x=0}const w=this.getMittlereHoeheDpWithEdges(_,t,n),y=w[0],E=w[1];return[x,y,E]}berechneAbschirmungMtlHoeheDp(t,n,i,a=!0){return this.berechneAbschirmungMtlHoeheDpFreq(t,n,i,-1,a)}getHeightPointByLfdNummer(t){if(!this.usedData.Hoehenpunkte||t===0)return null;const n=this.usedData.Hoehenpunkte.find(i=>i.LfdNummer===t);return n?n.GK_Vektor:null}getMittlereHoeheDpWithEdges(t,n,i){const a=Dn.GKVector2d_Abstand(n.GK,i.GK),l=[],c=this.dtmProcessor?.berechneHoeheDGM(n.GK)||0;l.push({distance:0,height:c});for(const w of t)l.push({distance:w.distance,height:w.point.z});const f=this.dtmProcessor?.berechneHoeheDGM(i.GK)||0;l.push({distance:a,height:f}),l.sort((w,y)=>w.distance-y.distance);let d=0,h=0,m=0,g=n.z;for(const w of l){const y=w.distance,E=w.height;d+=(g+E)*(m-y),y>m&&(h+=Math.sqrt(Math.pow(y-m,2)+Math.pow(E-g,2))),m=y,g=E}const _=a,x=i.z;return d+=(g+x)*(m-_),d+=(x+n.z)*(_-0),d=d/2,d=d/a,h===0&&(h=a),[d,h]}getDOmega(t,n){const i=this.dtmProcessor?.berechneHoeheDGM(t.GK)||0,a=this.dtmProcessor?.berechneHoeheDGM(n.GK)||0,l=t.z-i,c=n.z-a,f=Dn.GKVector2d_Abstand(t.GK,n.GK),d=10*Math.log10(1+(f*f+Math.pow(l-c,2))/(f*f+Math.pow(l+c,2)));return this.logger.log(`DEBUG: DOmega=${d}, hS=${l}, hR=${c}, dP=${f}`),d}getAgrKorrektur(t,n,i){const a=this.dtmProcessor?.berechneHoeheDGM(n.GK)||0,l=this.dtmProcessor?.berechneHoeheDGM(i.GK)||0,c=n.z-a,f=i.z-l,d=(c+f)/2;if(d<=0)return 0;const h=10*Math.log10(t/d);let m=0;if(h<=9&&h>=-5){const g=h-3;m=-2e-5*Math.pow(g,6)-3e-5*Math.pow(g,5)+.0017*Math.pow(g,4)-.0019*Math.pow(g,3)-.0491*Math.pow(g,2)+.3146*g+2.0716}else if(h<=19&&h>9){const g=h-13;m=1e-5*Math.pow(g,6)-1e-4*Math.pow(g,5)+6e-5*Math.pow(g,4)-.0028*Math.pow(g,3)+.0525*Math.pow(g,2)-.4149*g-.0884-1}else m=0;return m}berechneCmet(t,n,i,a,l){const c=i,f=a,d=Dn.GKVector2d_Abstand(t.GK,n.GK);return console.log("Provided c0",l),d<=10*(c+f),0}calculateESQContribution(t,n){let i=0;for(const a of this.usedData.ESQSources){this.logger.log(`    Processing ESQ: ${a.Bezeichnung}`),console.log("Current ESQ",a);const l={GK:{Rechts:a.Position.GK.Rechts,Hoch:a.Position.GK.Hoch},z:a.Position.z+a.Hoehe},c=Dn.GKVector3d_Abstand(l,t);this.logger.log(`      Distance to ESQ: ${c.toFixed(2)} m`);let f=0;if(a.Schallleistungspegel?(f=a.L,this.logger.log(`      Using direct Lw: ${f} dB`)):(f=a.L+10*Math.log10(4*Math.PI*a.S*a.S),this.logger.log(`      Calculated Lw from L=${a.L} and S=${a.S}: ${f} dB`)),f>0){const d=20*Math.log10(c)+11,h=this.absorpKoeff*c/1e3,m=this.berechneAgr(l,t,n.G_Bodenfaktor,!0),g=a.Raumwinkelmass;let _=0;this.usedData.AgrKorrektur&&(_=this.getAgrKorrektur(c,l,t));const x=n.HeightOffset,w=this.berechneCmet(l,t,a.Hoehe,x,a.Z_Cmet),E=d+h+0+m;let D=0,A=0;a.Beurteilungszeitraum===0?D=16:a.Beurteilungszeitraum===1?D=8:a.Beurteilungszeitraum===2&&(D=1),a.Zeiteinheit===0?A=a.Einwirkzeit/3600:a.Zeiteinheit===1?A=a.Einwirkzeit/60:(a.Zeiteinheit===2||console.log("WARNING: Unknown time unit for ESQ",a),A=a.Einwirkzeit);const N=A>0?10*Math.log10(A/D):0;console.log("DZeit",N,A,D);const F=a.Ruhezeitzuschlag?1.9:0,k=a.Z_Tonhaltigkeit,T=a.Z_Impulshaltigkeit;this.logger.log(`      Attenuation: Adiv=${d.toFixed(2)}, Aatm=${h.toFixed(2)}, Agrbar=${m.toFixed(2)}, Cmet=${w.toFixed(2)}`),this.logger.log(`      Lw=${f.toFixed(2)}, DOmega=${g.toFixed(2)}, Total A=${E.toFixed(2)}`),this.logger.log(`      Penalties: ZRuhe=${F.toFixed(1)}, Z_Ton=${k.toFixed(1)}, Z_Impuls=${T.toFixed(1)}`);const R=f+g-E-_-w+N+F+k+T;if(R>0){const j=Math.pow(10,.1*R);this.logger.log(`      ESQ contribution: ${10*Math.log10(j)} dB`),i+=j}}}return i}getAlphaAtm(t){return t>=0&&t<=8?.1:t>=9&&t<=11?.4:t>=12&&t<=14?1:t>=15&&t<=17?1.9:t>=18&&t<=20?3.7:t>=21&&t<=23?9.7:t>=24&&t<=26?32.8:t>=27&&t<=32?117:0}getAC(t){return{0:-1e6,1:-1e6,2:-1e6,3:-1e6,4:-1e6,5:-1e6,6:-38.1,7:-37.6,8:-34.9,9:-20.7,10:-28.9,11:-28.9,12:-22.9,13:-26,14:-22.7,15:-21.3,16:-20,17:-17.6,18:-15.9,19:-13.6,20:-11.9,21:-10.7,22:-9.8,23:-9.4,24:-9.8,25:-10.4,26:-10.3,27:-10.7,28:-11.5,29:-12.5,30:-14.8,31:-19.5,32:-22.2}[t]||0}getDCpos(t){return t>=0&&t<=5?-1e6:t>=6&&t<=8?-44.1+4.77:t>=9&&t<=11?-33+4.77:t>=12&&t<=14?-20.5+4.77:t>=15&&t<=17?-13.1+4.77:t>=18&&t<=20?-8+4.77:t>=21&&t<=23?-5.7+4.77:t>=24&&t<=26?-5.9+4.77:t>=27&&t<=29?-6+4.77:t>=30&&t<=32?-14.5+4.77:0}getDCneg(t){return t>=0&&t<=14?-1e6:t>=15&&t<=17?-25.4+4.77:t>=18&&t<=20?-21.2+4.77:t>=21&&t<=23?-17+4.77:t>=24&&t<=26?-7.2+4.77:t>=27&&t<=29?-4.3+4.77:t>=30&&t<=32?-3.8+4.77:0}getLwAF(t,n){switch(n){case 1:return this.getAC(t);case 2:return this.getDCpos(t);case 3:return this.getDCneg(t);default:return this.getAC(t)}}getStrF(t){return["12.5","16","20","25","31.5","40","50","63","80","100","125","160","200","250","315","400","500","630","800","1000","1250","1600","2000","2500","3150","4000","5000","6300","8000","10000","12500","16000","20000"][t]||"unknown"}getLambdaAbsch(t){const i=[12.5,16,20,25,31.5,40,50,63,80,100,125,160,200,250,315,400,500,630,800,1e3,1250,1600,2e3,2500,3150,4e3,5e3,6300,8e3,1e4,12500,16e3,2e4][t];return i?340/i:340/1e3}berechneAgrF0124(t,n,i,a){console.log("f",i),console.log("G_Bodenfaktor",a);let l=4.8-2*t/n*(17+300/n);return l<0&&(l=0),l}static GKVector3d_Abstand(t,n){const i=n.GK.Rechts-t.GK.Rechts,a=n.GK.Hoch-t.GK.Hoch,l=n.z-t.z;return Math.sqrt(i*i+a*a+l*l)}static GKVector2d_Abstand(t,n){const i=n.Rechts-t.Rechts,a=n.Hoch-t.Hoch;return Math.sqrt(i*i+a*a)}static GKVector3d_Richtungsvektor(t,n){return{GK:{Rechts:n.GK.Rechts-t.GK.Rechts,Hoch:n.GK.Hoch-t.GK.Hoch},z:n.z-t.z}}static GKVector3d_Add(t,n){return{GK:{Rechts:t.GK.Rechts+n.GK.Rechts,Hoch:t.GK.Hoch+n.GK.Hoch},z:t.z+n.z}}}class yc{dreiecke;hPunkte;dgmKanten=[];constructor(t,n){this.dreiecke=t||[],this.hPunkte=n||[],this.dreiecke.length>0&&this.generateEdgesFromTriangles()}setDGMKante(t){t&&t.length>0&&(this.dgmKanten=t)}get DGMKante(){return this.dgmKanten}generateEdgesFromTriangles(){const t=new Map;for(const n of this.dreiecke){if(!n||!n.A||!n.B||!n.C)continue;const i=[[n.A,n.B],[n.B,n.C],[n.C,n.A]];for(const[a,l]of i){const c=a.HP.lfdNummer,f=l.HP.lfdNummer,d=c<f?`${c}-${f}`:`${f}-${c}`;if(t.has(d)){const h=t.get(d);h.DreieckB===-1&&(h.DreieckB=n.LfdNummer)}else{const h={EckeA:{Nummer:a.Nummer,HP:{lfdNummer:a.HP.lfdNummer}},EckeB:{Nummer:l.Nummer,HP:{lfdNummer:l.HP.lfdNummer}},DreieckA:n.LfdNummer,DreieckB:-1};t.set(d,h)}}}this.dgmKanten=Array.from(t.values())}berechneHoeheDGM(t){for(const n of this.dreiecke){if(!n||n.LfdNummer===0)continue;const i=this.getPointFromHLinie(n.A),a=this.getPointFromHLinie(n.B),l=this.getPointFromHLinie(n.C);if(!(!i||!a||!l)&&this.isPointInTriangle(t,i.GK,a.GK,l.GK))return this.interpolateHeight(t,i,a,l)}return this.getNearestPointHeight(t)}getPointFromHLinie(t){if(!t||!t.HP)return null;const n=t.HP.lfdNummer;if(n===0)return null;const i=this.hPunkte.find(a=>a.LfdNummer===n);return i?i.GK_Vektor:null}isPointInTriangle(t,n,i,a){const l=a.Rechts-n.Rechts,c=a.Hoch-n.Hoch,f=i.Rechts-n.Rechts,d=i.Hoch-n.Hoch,h=t.Rechts-n.Rechts,m=t.Hoch-n.Hoch,g=l*l+c*c,_=l*f+c*d,x=l*h+c*m,w=f*f+d*d,y=f*h+d*m,E=1/(g*w-_*_),D=(w*x-_*y)*E,A=(g*y-_*x)*E;return D>=0&&A>=0&&D+A<=1}interpolateHeight(t,n,i,a){const l=a.GK.Rechts-n.GK.Rechts,c=a.GK.Hoch-n.GK.Hoch,f=i.GK.Rechts-n.GK.Rechts,d=i.GK.Hoch-n.GK.Hoch,h=t.Rechts-n.GK.Rechts,m=t.Hoch-n.GK.Hoch,g=l*l+c*c,_=l*f+c*d,x=l*h+c*m,w=f*f+d*d,y=f*h+d*m,E=1/(g*w-_*_),D=(w*x-_*y)*E,A=(g*y-_*x)*E;return(1-D-A)*n.z+A*i.z+D*a.z}getNearestPointHeight(t){if(this.hPunkte.length===0)return 0;let n=Number.MAX_VALUE,i=0;for(const a of this.hPunkte){if(!a||a.LfdNummer===0)continue;const l=a.GK_Vektor.GK.Rechts-t.Rechts,c=a.GK_Vektor.GK.Hoch-t.Hoch,f=Math.sqrt(l*l+c*c);f<n&&(n=f,i=a.GK_Vektor.z)}return i}findEdgeIntersections(t,n){const i=[];for(let a=0;a<this.dgmKanten.length;a++){const l=this.dgmKanten[a];if(!l)continue;const c=this.getPointFromHLinie(l.EckeA),f=this.getPointFromHLinie(l.EckeB);if(!c||!f)continue;const d=this.lineSegmentIntersection(t,n,c.GK,f.GK);if(d){const h=d.Rechts-t.Rechts,m=d.Hoch-t.Hoch,g=Math.sqrt(h*h+m*m),_=this.getParameterOnLineSegment(c.GK,f.GK,d),x=c.z+_*(f.z-c.z);i.push({distance:g,point:{GK:d,z:x},edgeIndex:a})}}return i.sort((a,l)=>a.distance-l.distance),i}lineSegmentIntersection(t,n,i,a){const l=t.Rechts,c=t.Hoch,f=n.Rechts,d=n.Hoch,h=i.Rechts,m=i.Hoch,g=a.Rechts,_=a.Hoch,x=(l-f)*(m-_)-(c-d)*(h-g);if(Math.abs(x)<1e-10)return null;const w=((l-h)*(m-_)-(c-m)*(h-g))/x,y=-((l-f)*(c-m)-(c-d)*(l-h))/x;return w>=0&&w<=1&&y>=0&&y<=1?{Rechts:l+w*(f-l),Hoch:c+w*(d-c)}:null}getParameterOnLineSegment(t,n,i){const a=n.Rechts-t.Rechts,l=n.Hoch-t.Hoch;return Math.abs(a)>Math.abs(l)?(i.Rechts-t.Rechts)/a:(i.Hoch-t.Hoch)/l}}function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qh.apply(null,arguments)}var $b={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function aC(e,t){if(Vh(e,t))return e[t];throw typeof e[t]=="function"&&sC(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function oC(e,t,n){if(Vh(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function Vh(e,t){return!lC(e)&&!Array.isArray(e)?!1:Fc(uC,t)?!0:!(t in Object.prototype||t in Function.prototype)}function sC(e,t){return e==null||typeof e[t]!="function"||Fc(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Fc(cC,t)?!0:!(t in Object.prototype||t in Function.prototype)}function lC(e){return typeof e=="object"&&e&&e.constructor===Object}var uC={length:!0,name:!0},cC={toString:!0,valueOf:!0,toLocaleString:!0};class fC{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return aC(this.wrappedObject,t)}set(t,n){return oC(this.wrappedObject,t,n),this}has(t){return Vh(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return hC(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){Vh(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function hC(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function Xt(e){return typeof e=="number"}function yn(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function dC(e){return typeof e=="bigint"}function Zb(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Kb(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function qb(e){return e&&e.constructor.prototype.isUnit===!0||!1}function Zi(e){return typeof e=="string"}var gn=Array.isArray;function Wt(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Yh(e){return Array.isArray(e)||Wt(e)}function Vb(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Yb(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function mC(e){return e&&e.constructor.prototype.isRange===!0||!1}function Mg(e){return e&&e.constructor.prototype.isIndex===!0||!1}function pC(e){return typeof e=="boolean"}function gC(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function vC(e){return e&&e.constructor.prototype.isHelp===!0||!1}function yC(e){return typeof e=="function"}function _C(e){return e instanceof Date}function xC(e){return e instanceof RegExp}function Tg(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Zb(e)&&!Kb(e))}function bC(e){return e?e instanceof Map||e instanceof fC||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function wC(e){return e===null}function DC(e){return e===void 0}function EC(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function SC(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function CC(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function AC(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function NC(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function MC(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function TC(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function kC(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function zC(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function LC(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function FC(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function BC(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function RC(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function OC(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function jC(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function PC(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function IC(e){return e&&e.constructor.prototype.isChain===!0||!1}function Oo(e){var t=typeof e;return t==="object"?e===null?"null":yn(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Ut(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return Ut(n)});if(e instanceof Date)return new Date(e.valueOf());if(yn(e))return e;if(Tg(e))return HC(e,Ut);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function HC(e,t){var n={};for(var i in e)Fc(e,i)&&(n[i]=t(e[i]));return n}function GC(e,t){for(var n in t)Fc(t,n)&&(e[n]=t[n]);return e}function Ho(e,t){var n,i,a;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(i=0,a=e.length;i<a;i++)if(!Ho(e[i],t[i]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Ho(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function Fc(e,t){return e&&Object.hasOwnProperty.call(e,t)}function UC(e,t){for(var n={},i=0;i<t.length;i++){var a=t[i],l=e[a];l!==void 0&&(n[a]=l)}return n}var $C=["Matrix","Array"],ZC=["number","BigNumber","Fraction"],Uo=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze($b)};qh(Uo,$b,{MATRIX_OPTIONS:$C,NUMBER_OPTIONS:ZC});function b_(){return!0}function ri(){return!1}function kl(){}const w_="Argument is not a typed-function.";function Xb(){function e(X){return typeof X=="object"&&X!==null&&X.constructor===Object}const t=[{name:"number",test:function(X){return typeof X=="number"}},{name:"string",test:function(X){return typeof X=="string"}},{name:"boolean",test:function(X){return typeof X=="boolean"}},{name:"Function",test:function(X){return typeof X=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(X){return X instanceof Date}},{name:"RegExp",test:function(X){return X instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(X){return X===null}},{name:"undefined",test:function(X){return X===void 0}}],n={name:"any",test:b_,isAny:!0};let i,a,l=0,c={createCount:0};function f(X){const oe=i.get(X);if(oe)return oe;let le='Unknown type "'+X+'"';const me=X.toLowerCase();let ye;for(ye of a)if(ye.toLowerCase()===me){le+='. Did you mean "'+ye+'" ?';break}throw new TypeError(le)}function d(X){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const le=oe?f(oe).index:a.length,me=[];for(let de=0;de<X.length;++de){if(!X[de]||typeof X[de].name!="string"||typeof X[de].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Be=X[de].name;if(i.has(Be))throw new TypeError('Duplicate type name "'+Be+'"');me.push(Be),i.set(Be,{name:Be,test:X[de].test,isAny:X[de].isAny,index:le+de,conversionsTo:[]})}const ye=a.slice(le);a=a.slice(0,le).concat(me).concat(ye);for(let de=le+me.length;de<a.length;++de)i.get(a[de]).index=de}function h(){i=new Map,a=[],l=0,d([n],!1)}h(),d(t);function m(){let X;for(X of a)i.get(X).conversionsTo=[];l=0}function g(X){const oe=a.filter(le=>{const me=i.get(le);return!me.isAny&&me.test(X)});return oe.length?oe:["any"]}function _(X){return X&&typeof X=="function"&&"_typedFunctionData"in X}function x(X,oe,le){if(!_(X))throw new TypeError(w_);const me=le&&le.exact,ye=Array.isArray(oe)?oe.join(","):oe,de=F(ye),Be=E(de);if(!me||Be in X.signatures){const We=X._typedFunctionData.signatureMap.get(Be);if(We)return We}const Fe=de.length;let Re;if(me){Re=[];let We;for(We in X.signatures)Re.push(X._typedFunctionData.signatureMap.get(We))}else Re=X._typedFunctionData.signatures;for(let We=0;We<Fe;++We){const ht=de[We],dt=[];let Et;for(Et of Re){const Nt=j(Et.params,We);if(!(!Nt||ht.restParam&&!Nt.restParam)){if(!Nt.hasAny){const Qt=N(Nt);if(ht.types.some(tn=>!Qt.has(tn.name)))continue}dt.push(Et)}}if(Re=dt,Re.length===0)break}let je;for(je of Re)if(je.params.length<=Fe)return je;throw new TypeError("Signature not found (signature: "+(X.name||"unnamed")+"("+E(de,", ")+"))")}function w(X,oe,le){return x(X,oe,le).implementation}function y(X,oe){const le=f(oe);if(le.test(X))return X;const me=le.conversionsTo;if(me.length===0)throw new Error("There are no conversions to "+oe+" defined.");for(let ye=0;ye<me.length;ye++)if(f(me[ye].from).test(X))return me[ye].convert(X);throw new Error("Cannot convert "+X+" to "+oe)}function E(X){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return X.map(le=>le.name).join(oe)}function D(X){const oe=X.indexOf("...")===0,me=(oe?X.length>3?X.slice(3):"any":X).split("|").map(Fe=>f(Fe.trim()));let ye=!1,de=oe?"...":"";return{types:me.map(function(Fe){return ye=Fe.isAny||ye,de+=Fe.name+"|",{name:Fe.name,typeIndex:Fe.index,test:Fe.test,isAny:Fe.isAny,conversion:null,conversionIndex:-1}}),name:de.slice(0,-1),hasAny:ye,hasConversion:!1,restParam:oe}}function A(X){const oe=X.types.map(Be=>Be.name),le=ee(oe);let me=X.hasAny,ye=X.name;const de=le.map(function(Be){const Fe=f(Be.from);return me=Fe.isAny||me,ye+="|"+Be.from,{name:Be.from,typeIndex:Fe.index,test:Fe.test,isAny:Fe.isAny,conversion:Be,conversionIndex:Be.index}});return{types:X.types.concat(de),name:ye,hasAny:me,hasConversion:de.length>0,restParam:X.restParam}}function N(X){return X.typeSet||(X.typeSet=new Set,X.types.forEach(oe=>X.typeSet.add(oe.name))),X.typeSet}function F(X){const oe=[];if(typeof X!="string")throw new TypeError("Signatures must be strings");const le=X.trim();if(le==="")return oe;const me=le.split(",");for(let ye=0;ye<me.length;++ye){const de=D(me[ye].trim());if(de.restParam&&ye!==me.length-1)throw new SyntaxError('Unexpected rest parameter "'+me[ye]+'": only allowed for the last parameter');if(de.types.length===0)return null;oe.push(de)}return oe}function k(X){const oe=Ie(X);return oe?oe.restParam:!1}function T(X){if(!X||X.types.length===0)return b_;if(X.types.length===1)return f(X.types[0].name).test;if(X.types.length===2){const oe=f(X.types[0].name).test,le=f(X.types[1].name).test;return function(ye){return oe(ye)||le(ye)}}else{const oe=X.types.map(function(le){return f(le.name).test});return function(me){for(let ye=0;ye<oe.length;ye++)if(oe[ye](me))return!0;return!1}}}function R(X){let oe,le,me;if(k(X)){oe=ke(X).map(T);const ye=oe.length,de=T(Ie(X)),Be=function(Fe){for(let Re=ye;Re<Fe.length;Re++)if(!de(Fe[Re]))return!1;return!0};return function(Re){for(let je=0;je<oe.length;je++)if(!oe[je](Re[je]))return!1;return Be(Re)&&Re.length>=ye+1}}else return X.length===0?function(de){return de.length===0}:X.length===1?(le=T(X[0]),function(de){return le(de[0])&&de.length===1}):X.length===2?(le=T(X[0]),me=T(X[1]),function(de){return le(de[0])&&me(de[1])&&de.length===2}):(oe=X.map(T),function(de){for(let Be=0;Be<oe.length;Be++)if(!oe[Be](de[Be]))return!1;return de.length===oe.length})}function j(X,oe){return oe<X.length?X[oe]:k(X)?Ie(X):null}function O(X,oe){const le=j(X,oe);return le?N(le):new Set}function G(X){return X.conversion===null||X.conversion===void 0}function U(X,oe){const le=new Set;return X.forEach(me=>{const ye=O(me.params,oe);let de;for(de of ye)le.add(de)}),le.has("any")?["any"]:Array.from(le)}function I(X,oe,le){let me,ye;const de=X||"unnamed";let Be=le,Fe;for(Fe=0;Fe<oe.length;Fe++){const ht=[];if(Be.forEach(dt=>{const Et=j(dt.params,Fe),Nt=T(Et);(Fe<dt.params.length||k(dt.params))&&Nt(oe[Fe])&&ht.push(dt)}),ht.length===0){if(ye=U(Be,Fe),ye.length>0){const dt=g(oe[Fe]);return me=new TypeError("Unexpected type of argument in function "+de+" (expected: "+ye.join(" or ")+", actual: "+dt.join(" | ")+", index: "+Fe+")"),me.data={category:"wrongType",fn:de,index:Fe,actual:dt,expected:ye},me}}else Be=ht}const Re=Be.map(function(ht){return k(ht.params)?1/0:ht.params.length});if(oe.length<Math.min.apply(null,Re))return ye=U(Be,Fe),me=new TypeError("Too few arguments in function "+de+" (expected: "+ye.join(" or ")+", index: "+oe.length+")"),me.data={category:"tooFewArgs",fn:de,index:oe.length,expected:ye},me;const je=Math.max.apply(null,Re);if(oe.length>je)return me=new TypeError("Too many arguments in function "+de+" (expected: "+je+", actual: "+oe.length+")"),me.data={category:"tooManyArgs",fn:de,index:oe.length,expectedLength:je},me;const We=[];for(let ht=0;ht<oe.length;++ht)We.push(g(oe[ht]).join("|"));return me=new TypeError('Arguments of type "'+We.join(", ")+'" do not match any of the defined signatures of function '+de+"."),me.data={category:"mismatch",actual:We},me}function W(X){let oe=a.length+1;for(let le=0;le<X.types.length;le++)G(X.types[le])&&(oe=Math.min(oe,X.types[le].typeIndex));return oe}function B(X){let oe=l+1;for(let le=0;le<X.types.length;le++)G(X.types[le])||(oe=Math.min(oe,X.types[le].conversionIndex));return oe}function re(X,oe){if(X.hasAny){if(!oe.hasAny)return 1}else if(oe.hasAny)return-1;if(X.restParam){if(!oe.restParam)return 1}else if(oe.restParam)return-1;if(X.hasConversion){if(!oe.hasConversion)return 1}else if(oe.hasConversion)return-1;const le=W(X)-W(oe);if(le<0)return-1;if(le>0)return 1;const me=B(X)-B(oe);return me<0?-1:me>0?1:0}function K(X,oe){const le=X.params,me=oe.params,ye=Ie(le),de=Ie(me),Be=k(le),Fe=k(me);if(Be&&ye.hasAny){if(!Fe||!de.hasAny)return 1}else if(Fe&&de.hasAny)return-1;let Re=0,je=0,We;for(We of le)We.hasAny&&++Re,We.hasConversion&&++je;let ht=0,dt=0;for(We of me)We.hasAny&&++ht,We.hasConversion&&++dt;if(Re!==ht)return Re-ht;if(Be&&ye.hasConversion){if(!Fe||!de.hasConversion)return 1}else if(Fe&&de.hasConversion)return-1;if(je!==dt)return je-dt;if(Be){if(!Fe)return 1}else if(Fe)return-1;const Et=(le.length-me.length)*(Be?-1:1);if(Et!==0)return Et;const Nt=[];let Qt=0;for(let Sn=0;Sn<le.length;++Sn){const Cn=re(le[Sn],me[Sn]);Nt.push(Cn),Qt+=Cn}if(Qt!==0)return Qt;let tn;for(tn of Nt)if(tn!==0)return tn;return 0}function ee(X){if(X.length===0)return[];const oe=X.map(f);X.length>1&&oe.sort((ye,de)=>ye.index-de.index);let le=oe[0].conversionsTo;if(X.length===1)return le;le=le.concat([]);const me=new Set(X);for(let ye=1;ye<oe.length;++ye){let de;for(de of oe[ye].conversionsTo)me.has(de.from)||(le.push(de),me.add(de.from))}return le}function V(X,oe){let le=oe;if(X.some(ye=>ye.hasConversion)){const ye=k(X),de=X.map(Q);le=function(){const Fe=[],Re=ye?arguments.length-1:arguments.length;for(let je=0;je<Re;je++)Fe[je]=de[je](arguments[je]);return ye&&(Fe[Re]=arguments[Re].map(de[Re])),oe.apply(this,Fe)}}let me=le;if(k(X)){const ye=X.length-1;me=function(){return le.apply(this,Ze(arguments,0,ye).concat([Ze(arguments,ye)]))}}return me}function Q(X){let oe,le,me,ye;const de=[],Be=[];switch(X.types.forEach(function(Fe){Fe.conversion&&(de.push(f(Fe.conversion.from).test),Be.push(Fe.conversion.convert))}),Be.length){case 0:return function(Re){return Re};case 1:return oe=de[0],me=Be[0],function(Re){return oe(Re)?me(Re):Re};case 2:return oe=de[0],le=de[1],me=Be[0],ye=Be[1],function(Re){return oe(Re)?me(Re):le(Re)?ye(Re):Re};default:return function(Re){for(let je=0;je<Be.length;je++)if(de[je](Re))return Be[je](Re);return Re}}}function $(X){function oe(le,me,ye){if(me<le.length){const de=le[me];let Be=[];if(de.restParam){const Fe=de.types.filter(G);Fe.length<de.types.length&&Be.push({types:Fe,name:"..."+Fe.map(Re=>Re.name).join("|"),hasAny:Fe.some(Re=>Re.isAny),hasConversion:!1,restParam:!0}),Be.push(de)}else Be=de.types.map(function(Fe){return{types:[Fe],name:Fe.name,hasAny:Fe.isAny,hasConversion:Fe.conversion,restParam:!1}});return $e(Be,function(Fe){return oe(le,me+1,ye.concat([Fe]))})}else return[ye]}return oe(X,0,[])}function q(X,oe){const le=Math.max(X.length,oe.length);for(let Fe=0;Fe<le;Fe++){const Re=O(X,Fe),je=O(oe,Fe);let We=!1,ht;for(ht of je)if(Re.has(ht)){We=!0;break}if(!We)return!1}const me=X.length,ye=oe.length,de=k(X),Be=k(oe);return de?Be?me===ye:ye>=me:Be?me>=ye:me===ye}function ne(X){return X.map(oe=>ae(oe)?Te(oe.referToSelf.callback):Se(oe)?H(oe.referTo.references,oe.referTo.callback):oe)}function se(X,oe,le){const me=[];let ye;for(ye of X){let de=le[ye];if(typeof de!="number")throw new TypeError('No definition for referenced signature "'+ye+'"');if(de=oe[de],typeof de!="function")return!1;me.push(de)}return me}function ce(X,oe,le){const me=ne(X),ye=new Array(me.length).fill(!1);let de=!0;for(;de;){de=!1;let Be=!0;for(let Fe=0;Fe<me.length;++Fe){if(ye[Fe])continue;const Re=me[Fe];if(ae(Re))me[Fe]=Re.referToSelf.callback(le),me[Fe].referToSelf=Re.referToSelf,ye[Fe]=!0,Be=!1;else if(Se(Re)){const je=se(Re.referTo.references,me,oe);je?(me[Fe]=Re.referTo.callback.apply(this,je),me[Fe].referTo=Re.referTo,ye[Fe]=!0,Be=!1):de=!0}}if(Be&&de)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return me}function pe(X){const oe=/\bthis(\(|\.signatures\b)/;Object.keys(X).forEach(le=>{const me=X[le];if(oe.test(me.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function _e(X,oe){if(c.createCount++,Object.keys(oe).length===0)throw new SyntaxError("No signatures provided");c.warnAgainstDeprecatedThis&&pe(oe);const le=[],me=[],ye={},de=[];let Be;for(Be in oe){if(!Object.prototype.hasOwnProperty.call(oe,Be))continue;const zt=F(Be);if(!zt)continue;le.forEach(function($n){if(q($n,zt))throw new TypeError('Conflicting signatures "'+E($n)+'" and "'+E(zt)+'".')}),le.push(zt);const zn=me.length;me.push(oe[Be]);const Pa=zt.map(A);let fi;for(fi of $(Pa)){const $n=E(fi);de.push({params:fi,name:$n,fn:zn}),fi.every(ra=>!ra.hasConversion)&&(ye[$n]=zn)}}de.sort(K);const Fe=ce(me,ye,Tr);let Re;for(Re in ye)Object.prototype.hasOwnProperty.call(ye,Re)&&(ye[Re]=Fe[ye[Re]]);const je=[],We=new Map;for(Re of de)We.has(Re.name)||(Re.fn=Fe[Re.fn],je.push(Re),We.set(Re.name,Re));const ht=je[0]&&je[0].params.length<=2&&!k(je[0].params),dt=je[1]&&je[1].params.length<=2&&!k(je[1].params),Et=je[2]&&je[2].params.length<=2&&!k(je[2].params),Nt=je[3]&&je[3].params.length<=2&&!k(je[3].params),Qt=je[4]&&je[4].params.length<=2&&!k(je[4].params),tn=je[5]&&je[5].params.length<=2&&!k(je[5].params),Sn=ht&&dt&&Et&&Nt&&Qt&&tn;for(let zt=0;zt<je.length;++zt)je[zt].test=R(je[zt].params);const Cn=ht?T(je[0].params[0]):ri,Un=dt?T(je[1].params[0]):ri,ki=Et?T(je[2].params[0]):ri,Is=Nt?T(je[3].params[0]):ri,Hs=Qt?T(je[4].params[0]):ri,qo=tn?T(je[5].params[0]):ri,Vo=ht?T(je[0].params[1]):ri,Gs=dt?T(je[1].params[1]):ri,Yo=Et?T(je[2].params[1]):ri,Zr=Nt?T(je[3].params[1]):ri,xn=Qt?T(je[4].params[1]):ri,kn=tn?T(je[5].params[1]):ri;for(let zt=0;zt<je.length;++zt)je[zt].implementation=V(je[zt].params,je[zt].fn);const zi=ht?je[0].implementation:kl,er=dt?je[1].implementation:kl,it=Et?je[2].implementation:kl,Us=Nt?je[3].implementation:kl,Xo=Qt?je[4].implementation:kl,Li=tn?je[5].implementation:kl,ja=ht?je[0].params.length:-1,Kr=dt?je[1].params.length:-1,si=Et?je[2].params.length:-1,_r=Nt?je[3].params.length:-1,li=Qt?je[4].params.length:-1,un=tn?je[5].params.length:-1,$s=Sn?6:0,Zs=je.length,ui=je.map(zt=>zt.test),ci=je.map(zt=>zt.implementation),yu=function(){for(let zn=$s;zn<Zs;zn++)if(ui[zn](arguments))return ci[zn].apply(this,arguments);return c.onMismatch(X,arguments,je)};function Tr(zt,zn){return arguments.length===ja&&Cn(zt)&&Vo(zn)?zi.apply(this,arguments):arguments.length===Kr&&Un(zt)&&Gs(zn)?er.apply(this,arguments):arguments.length===si&&ki(zt)&&Yo(zn)?it.apply(this,arguments):arguments.length===_r&&Is(zt)&&Zr(zn)?Us.apply(this,arguments):arguments.length===li&&Hs(zt)&&xn(zn)?Xo.apply(this,arguments):arguments.length===un&&qo(zt)&&kn(zn)?Li.apply(this,arguments):yu.apply(this,arguments)}try{Object.defineProperty(Tr,"name",{value:X})}catch{}return Tr.signatures=ye,Tr._typedFunctionData={signatures:je,signatureMap:We},Tr}function ze(X,oe,le){throw I(X,oe,le)}function ke(X){return Ze(X,0,X.length-1)}function Ie(X){return X[X.length-1]}function Ze(X,oe,le){return Array.prototype.slice.call(X,oe,le)}function Xe(X,oe){for(let le=0;le<X.length;le++)if(oe(X[le]))return X[le]}function $e(X,oe){return Array.prototype.concat.apply([],X.map(oe))}function Ke(){const X=ke(arguments).map(le=>E(F(le))),oe=Ie(arguments);if(typeof oe!="function")throw new TypeError("Callback function expected as last argument");return H(X,oe)}function H(X,oe){return{referTo:{references:X,callback:oe}}}function Te(X){if(typeof X!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:X}}}function Se(X){return X&&typeof X.referTo=="object"&&Array.isArray(X.referTo.references)&&typeof X.referTo.callback=="function"}function ae(X){return X&&typeof X.referToSelf=="object"&&typeof X.referToSelf.callback=="function"}function ie(X,oe){if(!X)return oe;if(oe&&oe!==X){const le=new Error("Function names do not match (expected: "+X+", actual: "+oe+")");throw le.data={actual:oe,expected:X},le}return X}function ue(X){let oe;for(const le in X)Object.prototype.hasOwnProperty.call(X,le)&&(_(X[le])||typeof X[le].signature=="string")&&(oe=ie(oe,X[le].name));return oe}function be(X,oe){let le;for(le in oe)if(Object.prototype.hasOwnProperty.call(oe,le)){if(le in X&&oe[le]!==X[le]){const me=new Error('Signature "'+le+'" is defined twice');throw me.data={signature:le,sourceFunction:oe[le],destFunction:X[le]},me}X[le]=oe[le]}}const De=c;c=function(X){const oe=typeof X=="string",le=oe?1:0;let me=oe?X:"";const ye={};for(let de=le;de<arguments.length;++de){const Be=arguments[de];let Fe={},Re;if(typeof Be=="function"?(Re=Be.name,typeof Be.signature=="string"?Fe[Be.signature]=Be:_(Be)&&(Fe=Be.signatures)):e(Be)&&(Fe=Be,oe||(Re=ue(Be))),Object.keys(Fe).length===0){const je=new TypeError("Argument to 'typed' at index "+de+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw je.data={index:de,argument:Be},je}oe||(me=ie(me,Re)),be(ye,Fe)}return _e(me||"",ye)},c.create=Xb,c.createCount=De.createCount,c.onMismatch=ze,c.throwMismatchError=ze,c.createError=I,c.clear=h,c.clearConversions=m,c.addTypes=d,c._findType=f,c.referTo=Ke,c.referToSelf=Te,c.convert=y,c.findSignature=x,c.find=w,c.isTypedFunction=_,c.warnAgainstDeprecatedThis=!0,c.addType=function(X,oe){let le="any";oe!==!1&&i.has("Object")&&(le="Object"),c.addTypes([X],le)};function ge(X){if(!X||typeof X.from!="string"||typeof X.to!="string"||typeof X.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(X.to===X.from)throw new SyntaxError('Illegal to define conversion from "'+X.from+'" to itself.')}return c.addConversion=function(X){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ge(X);const le=f(X.to),me=le.conversionsTo.find(ye=>ye.from===X.from);if(me)if(oe&&oe.override)c.removeConversion({from:me.from,to:X.to,convert:me.convert});else throw new Error('There is already a conversion from "'+X.from+'" to "'+le.name+'"');le.conversionsTo.push({from:X.from,convert:X.convert,index:l++})},c.addConversions=function(X,oe){X.forEach(le=>c.addConversion(le,oe))},c.removeConversion=function(X){ge(X);const oe=f(X.to),le=Xe(oe.conversionsTo,ye=>ye.from===X.from);if(!le)throw new Error("Attempt to remove nonexistent conversion from "+X.from+" to "+X.to);if(le.convert!==X.convert)throw new Error("Conversion to remove does not match existing conversion");const me=oe.conversionsTo.indexOf(le);oe.conversionsTo.splice(me,1)},c.resolve=function(X,oe){if(!_(X))throw new TypeError(w_);const le=X._typedFunctionData.signatures;for(let me=0;me<le.length;++me)if(le[me].test(oe))return le[me];return null},c}const Xh=Xb();function Ye(e,t,n,i){function a(l){var c=UC(l,t.map(VC));return KC(e,t,l),n(c)}return a.isFactory=!0,a.fn=e,a.dependencies=t.slice().sort(),i&&(a.meta=i),a}function KC(e,t,n){var i=t.filter(l=>!qC(l)).every(l=>n[l]!==void 0);if(!i){var a=t.filter(l=>n[l]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(a.map(l=>'"'.concat(l,'"')).join(", "),"."))}}function qC(e){return e&&e[0]==="?"}function VC(e){return e&&e[0]==="?"?e.slice(1):e}function vn(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function r0(e,t,n){var i={2:"0b",8:"0o",16:"0x"},a=i[t],l="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!vn(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!vn(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),l="i".concat(n)}var c="";return e<0&&(e=-e,c="-"),"".concat(c).concat(a).concat(e.toString(t)).concat(l)}function z0(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:i,wordSize:a}=Wb(t);switch(n){case"fixed":return XC(e,i);case"exponential":return Qb(e,i);case"engineering":return YC(e,i);case"bin":return r0(e,2,a);case"oct":return r0(e,8,a);case"hex":return r0(e,16,a);case"auto":return WC(e,i,t).replace(/((\.\d*?)(0+))($|e)/,function(){var l=arguments[2],c=arguments[4];return l!=="."?l+c:c});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Wb(e){var t="auto",n,i;if(e!==void 0)if(Xt(e))n=e;else if(yn(e))n=e.toNumber();else if(Tg(e))e.precision!==void 0&&(n=D_(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(i=D_(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:i}}function Bd(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],i=t[2],a=parseFloat(t[4]||"0"),l=i.indexOf(".");a+=l!==-1?l-1:i.length-1;var c=i.replace(".","").replace(/^0*/,function(f){return a-=f.length,""}).replace(/0*$/,"").split("").map(function(f){return parseInt(f)});return c.length===0&&(c.push(0),a++),{sign:n,coefficients:c,exponent:a}}function YC(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Bd(e),i=Rd(n,t),a=i.exponent,l=i.coefficients,c=a%3===0?a:a<0?a-3-a%3:a-a%3;if(Xt(t))for(;t>l.length||a-c+1>l.length;)l.push(0);else for(var f=Math.abs(a-c)-(l.length-1),d=0;d<f;d++)l.push(0);for(var h=Math.abs(a-c),m=1;h>0;)m++,h--;var g=l.slice(m).join(""),_=Xt(t)&&g.length||g.match(/[1-9]/)?"."+g:"",x=l.slice(0,m).join("")+_+"e"+(a>=0?"+":"")+c.toString();return i.sign+x}function XC(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Bd(e),i=typeof t=="number"?Rd(n,n.exponent+1+t):n,a=i.coefficients,l=i.exponent+1,c=l+(t||0);return a.length<c&&(a=a.concat(ql(c-a.length))),l<0&&(a=ql(-l+1).concat(a),l=1),l<a.length&&a.splice(l,0,l===0?"0.":"."),i.sign+a.join("")}function Qb(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Bd(e),i=t?Rd(n,t):n,a=i.coefficients,l=i.exponent;a.length<t&&(a=a.concat(ql(t-a.length)));var c=a.shift();return i.sign+c+(a.length>0?"."+a.join(""):"")+"e"+(l>=0?"+":"")+l}function WC(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var i=E_(n?.lowerExp,-3),a=E_(n?.upperExp,5),l=Bd(e),c=t?Rd(l,t):l;if(c.exponent<i||c.exponent>=a)return Qb(e,t);var f=c.coefficients,d=c.exponent;f.length<t&&(f=f.concat(ql(t-f.length))),f=f.concat(ql(d-f.length+1+(f.length<t?t-f.length:0))),f=ql(-d).concat(f);var h=d>0?d:0;return h<f.length-1&&f.splice(h+1,0,"."),c.sign+f.join("")}function Rd(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=n.coefficients;t<=0;)i.unshift(0),n.exponent++,t++;if(i.length>t){var a=i.splice(t,i.length-t);if(a[0]>=5){var l=t-1;for(i[l]++;i[l]===10;)i.pop(),l===0&&(i.unshift(0),n.exponent++,l++),l--,i[l]++}}return n}function ql(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function QC(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function ks(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),i)}function D_(e,t){if(Xt(e))return e;if(yn(e))return e.toNumber();t()}function E_(e,t){return Xt(e)?e:yn(e)?e.toNumber():t}var Jb=function(){return Jb=Xh.create,Xh},JC=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],eA=Ye("typed",JC,function(t){var{BigNumber:n,Complex:i,DenseMatrix:a,Fraction:l}=t,c=Jb();return c.clear(),c.addTypes([{name:"number",test:Xt},{name:"Complex",test:Zb},{name:"BigNumber",test:yn},{name:"bigint",test:dC},{name:"Fraction",test:Kb},{name:"Unit",test:qb},{name:"identifier",test:f=>Zi&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(f)},{name:"string",test:Zi},{name:"Chain",test:IC},{name:"Array",test:gn},{name:"Matrix",test:Wt},{name:"DenseMatrix",test:Vb},{name:"SparseMatrix",test:Yb},{name:"Range",test:mC},{name:"Index",test:Mg},{name:"boolean",test:pC},{name:"ResultSet",test:gC},{name:"Help",test:vC},{name:"function",test:yC},{name:"Date",test:_C},{name:"RegExp",test:xC},{name:"null",test:wC},{name:"undefined",test:DC},{name:"AccessorNode",test:EC},{name:"ArrayNode",test:SC},{name:"AssignmentNode",test:CC},{name:"BlockNode",test:AC},{name:"ConditionalNode",test:NC},{name:"ConstantNode",test:MC},{name:"FunctionNode",test:kC},{name:"FunctionAssignmentNode",test:TC},{name:"IndexNode",test:zC},{name:"Node",test:LC},{name:"ObjectNode",test:FC},{name:"OperatorNode",test:BC},{name:"ParenthesisNode",test:RC},{name:"RangeNode",test:OC},{name:"RelationalNode",test:jC},{name:"SymbolNode",test:PC},{name:"Map",test:bC},{name:"Object",test:Tg}]),c.addConversions([{from:"number",to:"BigNumber",convert:function(d){if(n||vh(d),QC(d)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+d+"). Use function bignumber(x) to convert to BigNumber.");return new n(d)}},{from:"number",to:"Complex",convert:function(d){return i||yh(d),new i(d,0)}},{from:"BigNumber",to:"Complex",convert:function(d){return i||yh(d),new i(d.toNumber(),0)}},{from:"bigint",to:"number",convert:function(d){if(d>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+d+")");return Number(d)}},{from:"bigint",to:"BigNumber",convert:function(d){return n||vh(d),new n(d.toString())}},{from:"bigint",to:"Fraction",convert:function(d){return l||_h(d),new l(d)}},{from:"Fraction",to:"BigNumber",convert:function(d){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(d){return i||yh(d),new i(d.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(d){l||_h(d);var h=new l(d);if(h.valueOf()!==d)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+d+"). Use function fraction(x) to convert to Fraction.");return h}},{from:"string",to:"number",convert:function(d){var h=Number(d);if(isNaN(h))throw new Error('Cannot convert "'+d+'" to a number');return h}},{from:"string",to:"BigNumber",convert:function(d){n||vh(d);try{return new n(d)}catch{throw new Error('Cannot convert "'+d+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(d){try{return BigInt(d)}catch{throw new Error('Cannot convert "'+d+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(d){l||_h(d);try{return new l(d)}catch{throw new Error('Cannot convert "'+d+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(d){i||yh(d);try{return new i(d)}catch{throw new Error('Cannot convert "'+d+'" to Complex')}}},{from:"boolean",to:"number",convert:function(d){return+d}},{from:"boolean",to:"BigNumber",convert:function(d){return n||vh(d),new n(+d)}},{from:"boolean",to:"bigint",convert:function(d){return BigInt(+d)}},{from:"boolean",to:"Fraction",convert:function(d){return l||_h(d),new l(+d)}},{from:"boolean",to:"string",convert:function(d){return String(d)}},{from:"Array",to:"Matrix",convert:function(d){return a||tA(),new a(d)}},{from:"Matrix",to:"Array",convert:function(d){return d.valueOf()}}]),c.onMismatch=(f,d,h)=>{var m=c.createError(f,d,h);if(["wrongType","mismatch"].includes(m.data.category)&&d.length===1&&Yh(d[0])&&h.some(_=>!_.params.includes(","))){var g=new TypeError("Function '".concat(f,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(f,")'."));throw g.data=m.data,g}throw m},c.onMismatch=(f,d,h)=>{var m=c.createError(f,d,h);if(["wrongType","mismatch"].includes(m.data.category)&&d.length===1&&Yh(d[0])&&h.some(_=>!_.params.includes(","))){var g=new TypeError("Function '".concat(f,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(f,")'."));throw g.data=m.data,g}throw m},c});function vh(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function yh(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function tA(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function _h(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var $l=9e15,$o=1e9,L0="0123456789abcdef",Wh="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Qh="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",F0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-$l,maxE:$l,crypto:!1},e2,Fa,vt=!0,Od="[DecimalError] ",Go=Od+"Invalid argument: ",t2=Od+"Precision limit exceeded",n2=Od+"crypto unavailable",r2="[object Decimal]",cr=Math.floor,Tn=Math.pow,nA=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rA=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,iA=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,i2=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Di=1e7,ct=7,aA=9007199254740991,oA=Wh.length-1,B0=Qh.length-1,Ue={toStringTag:r2};Ue.absoluteValue=Ue.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),st(e)};Ue.ceil=function(){return st(new this.constructor(this),this.e+1,2)};Ue.clampedTo=Ue.clamp=function(e,t){var n,i=this,a=i.constructor;if(e=new a(e),t=new a(t),!e.s||!t.s)return new a(NaN);if(e.gt(t))throw Error(Go+t);return n=i.cmp(e),n<0?e:i.cmp(t)>0?t:new a(i)};Ue.comparedTo=Ue.cmp=function(e){var t,n,i,a,l=this,c=l.d,f=(e=new l.constructor(e)).d,d=l.s,h=e.s;if(!c||!f)return!d||!h?NaN:d!==h?d:c===f?0:!c^d<0?1:-1;if(!c[0]||!f[0])return c[0]?d:f[0]?-h:0;if(d!==h)return d;if(l.e!==e.e)return l.e>e.e^d<0?1:-1;for(i=c.length,a=f.length,t=0,n=i<a?i:a;t<n;++t)if(c[t]!==f[t])return c[t]>f[t]^d<0?1:-1;return i===a?0:i>a^d<0?1:-1};Ue.cosine=Ue.cos=function(){var e,t,n=this,i=n.constructor;return n.d?n.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+ct,i.rounding=1,n=sA(i,u2(i,n)),i.precision=e,i.rounding=t,st(Fa==2||Fa==3?n.neg():n,e,t,!0)):new i(1):new i(NaN)};Ue.cubeRoot=Ue.cbrt=function(){var e,t,n,i,a,l,c,f,d,h,m=this,g=m.constructor;if(!m.isFinite()||m.isZero())return new g(m);for(vt=!1,l=m.s*Tn(m.s*m,1/3),!l||Math.abs(l)==1/0?(n=Qn(m.d),e=m.e,(l=(e-n.length+1)%3)&&(n+=l==1||l==-2?"0":"00"),l=Tn(n,1/3),e=cr((e+1)/3)-(e%3==(e<0?-1:2)),l==1/0?n="5e"+e:(n=l.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),i=new g(n),i.s=m.s):i=new g(l.toString()),c=(e=g.precision)+3;;)if(f=i,d=f.times(f).times(f),h=d.plus(m),i=Zt(h.plus(m).times(f),h.plus(d),c+2,1),Qn(f.d).slice(0,c)===(n=Qn(i.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!a&&n=="4999"){if(!a&&(st(f,e+1,0),f.times(f).times(f).eq(m))){i=f;break}c+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(st(i,e+1,1),t=!i.times(i).times(i).eq(m));break}return vt=!0,st(i,e,g.rounding,t)};Ue.decimalPlaces=Ue.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-cr(this.e/ct))*ct,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};Ue.dividedBy=Ue.div=function(e){return Zt(this,new this.constructor(e))};Ue.dividedToIntegerBy=Ue.divToInt=function(e){var t=this,n=t.constructor;return st(Zt(t,new n(e),0,1,1),n.precision,n.rounding)};Ue.equals=Ue.eq=function(e){return this.cmp(e)===0};Ue.floor=function(){return st(new this.constructor(this),this.e+1,3)};Ue.greaterThan=Ue.gt=function(e){return this.cmp(e)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(e){var t=this.cmp(e);return t==1||t===0};Ue.hyperbolicCosine=Ue.cosh=function(){var e,t,n,i,a,l=this,c=l.constructor,f=new c(1);if(!l.isFinite())return new c(l.s?1/0:NaN);if(l.isZero())return f;n=c.precision,i=c.rounding,c.precision=n+Math.max(l.e,l.sd())+4,c.rounding=1,a=l.d.length,a<32?(e=Math.ceil(a/3),t=(1/Pd(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),l=Jl(c,1,l.times(t),new c(1),!0);for(var d,h=e,m=new c(8);h--;)d=l.times(l),l=f.minus(d.times(m.minus(d.times(m))));return st(l,c.precision=n,c.rounding=i,!0)};Ue.hyperbolicSine=Ue.sinh=function(){var e,t,n,i,a=this,l=a.constructor;if(!a.isFinite()||a.isZero())return new l(a);if(t=l.precision,n=l.rounding,l.precision=t+Math.max(a.e,a.sd())+4,l.rounding=1,i=a.d.length,i<3)a=Jl(l,2,a,a,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,a=a.times(1/Pd(5,e)),a=Jl(l,2,a,a,!0);for(var c,f=new l(5),d=new l(16),h=new l(20);e--;)c=a.times(a),a=a.times(f.plus(c.times(d.times(c).plus(h))))}return l.precision=t,l.rounding=n,st(a,t,n,!0)};Ue.hyperbolicTangent=Ue.tanh=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,Zt(n.sinh(),n.cosh(),i.precision=e,i.rounding=t)):new i(n.s)};Ue.inverseCosine=Ue.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,a=t.rounding;return n!==-1?n===0?e.isNeg()?Yi(t,i,a):new t(0):new t(NaN):e.isZero()?Yi(t,i+4,a).times(.5):(t.precision=i+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=i,t.rounding=a,e.times(2))};Ue.inverseHyperbolicCosine=Ue.acosh=function(){var e,t,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,vt=!1,n=n.times(n).minus(1).sqrt().plus(n),vt=!0,i.precision=e,i.rounding=t,n.ln()):new i(n)};Ue.inverseHyperbolicSine=Ue.asinh=function(){var e,t,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,vt=!1,n=n.times(n).plus(1).sqrt().plus(n),vt=!0,i.precision=e,i.rounding=t,n.ln())};Ue.inverseHyperbolicTangent=Ue.atanh=function(){var e,t,n,i,a=this,l=a.constructor;return a.isFinite()?a.e>=0?new l(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(e=l.precision,t=l.rounding,i=a.sd(),Math.max(i,e)<2*-a.e-1?st(new l(a),e,t,!0):(l.precision=n=i-a.e,a=Zt(a.plus(1),new l(1).minus(a),n+e,1),l.precision=e+4,l.rounding=1,a=a.ln(),l.precision=e,l.rounding=t,a.times(.5))):new l(NaN)};Ue.inverseSine=Ue.asin=function(){var e,t,n,i,a=this,l=a.constructor;return a.isZero()?new l(a):(t=a.abs().cmp(1),n=l.precision,i=l.rounding,t!==-1?t===0?(e=Yi(l,n+4,i).times(.5),e.s=a.s,e):new l(NaN):(l.precision=n+6,l.rounding=1,a=a.div(new l(1).minus(a.times(a)).sqrt().plus(1)).atan(),l.precision=n,l.rounding=i,a.times(2)))};Ue.inverseTangent=Ue.atan=function(){var e,t,n,i,a,l,c,f,d,h=this,m=h.constructor,g=m.precision,_=m.rounding;if(h.isFinite()){if(h.isZero())return new m(h);if(h.abs().eq(1)&&g+4<=B0)return c=Yi(m,g+4,_).times(.25),c.s=h.s,c}else{if(!h.s)return new m(NaN);if(g+4<=B0)return c=Yi(m,g+4,_).times(.5),c.s=h.s,c}for(m.precision=f=g+10,m.rounding=1,n=Math.min(28,f/ct+2|0),e=n;e;--e)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(vt=!1,t=Math.ceil(f/ct),i=1,d=h.times(h),c=new m(h),a=h;e!==-1;)if(a=a.times(d),l=c.minus(a.div(i+=2)),a=a.times(d),c=l.plus(a.div(i+=2)),c.d[t]!==void 0)for(e=t;c.d[e]===l.d[e]&&e--;);return n&&(c=c.times(2<<n-1)),vt=!0,st(c,m.precision=g,m.rounding=_,!0)};Ue.isFinite=function(){return!!this.d};Ue.isInteger=Ue.isInt=function(){return!!this.d&&cr(this.e/ct)>this.d.length-2};Ue.isNaN=function(){return!this.s};Ue.isNegative=Ue.isNeg=function(){return this.s<0};Ue.isPositive=Ue.isPos=function(){return this.s>0};Ue.isZero=function(){return!!this.d&&this.d[0]===0};Ue.lessThan=Ue.lt=function(e){return this.cmp(e)<0};Ue.lessThanOrEqualTo=Ue.lte=function(e){return this.cmp(e)<1};Ue.logarithm=Ue.log=function(e){var t,n,i,a,l,c,f,d,h=this,m=h.constructor,g=m.precision,_=m.rounding,x=5;if(e==null)e=new m(10),t=!0;else{if(e=new m(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new m(NaN);t=e.eq(10)}if(n=h.d,h.s<0||!n||!n[0]||h.eq(1))return new m(n&&!n[0]?-1/0:h.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)l=!0;else{for(a=n[0];a%10===0;)a/=10;l=a!==1}if(vt=!1,f=g+x,c=Bo(h,f),i=t?Jh(m,f+10):Bo(e,f),d=Zt(c,i,f,1),Bc(d.d,a=g,_))do if(f+=10,c=Bo(h,f),i=t?Jh(m,f+10):Bo(e,f),d=Zt(c,i,f,1),!l){+Qn(d.d).slice(a+1,a+15)+1==1e14&&(d=st(d,g+1,0));break}while(Bc(d.d,a+=10,_));return vt=!0,st(d,g,_)};Ue.minus=Ue.sub=function(e){var t,n,i,a,l,c,f,d,h,m,g,_,x=this,w=x.constructor;if(e=new w(e),!x.d||!e.d)return!x.s||!e.s?e=new w(NaN):x.d?e.s=-e.s:e=new w(e.d||x.s!==e.s?x:NaN),e;if(x.s!=e.s)return e.s=-e.s,x.plus(e);if(h=x.d,_=e.d,f=w.precision,d=w.rounding,!h[0]||!_[0]){if(_[0])e.s=-e.s;else if(h[0])e=new w(x);else return new w(d===3?-0:0);return vt?st(e,f,d):e}if(n=cr(e.e/ct),m=cr(x.e/ct),h=h.slice(),l=m-n,l){for(g=l<0,g?(t=h,l=-l,c=_.length):(t=_,n=m,c=h.length),i=Math.max(Math.ceil(f/ct),c)+2,l>i&&(l=i,t.length=1),t.reverse(),i=l;i--;)t.push(0);t.reverse()}else{for(i=h.length,c=_.length,g=i<c,g&&(c=i),i=0;i<c;i++)if(h[i]!=_[i]){g=h[i]<_[i];break}l=0}for(g&&(t=h,h=_,_=t,e.s=-e.s),c=h.length,i=_.length-c;i>0;--i)h[c++]=0;for(i=_.length;i>l;){if(h[--i]<_[i]){for(a=i;a&&h[--a]===0;)h[a]=Di-1;--h[a],h[i]+=Di}h[i]-=_[i]}for(;h[--c]===0;)h.pop();for(;h[0]===0;h.shift())--n;return h[0]?(e.d=h,e.e=jd(h,n),vt?st(e,f,d):e):new w(d===3?-0:0)};Ue.modulo=Ue.mod=function(e){var t,n=this,i=n.constructor;return e=new i(e),!n.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||n.d&&!n.d[0]?st(new i(n),i.precision,i.rounding):(vt=!1,i.modulo==9?(t=Zt(n,e.abs(),0,3,1),t.s*=e.s):t=Zt(n,e,0,i.modulo,1),t=t.times(e),vt=!0,n.minus(t))};Ue.naturalExponential=Ue.exp=function(){return R0(this)};Ue.naturalLogarithm=Ue.ln=function(){return Bo(this)};Ue.negated=Ue.neg=function(){var e=new this.constructor(this);return e.s=-e.s,st(e)};Ue.plus=Ue.add=function(e){var t,n,i,a,l,c,f,d,h,m,g=this,_=g.constructor;if(e=new _(e),!g.d||!e.d)return!g.s||!e.s?e=new _(NaN):g.d||(e=new _(e.d||g.s===e.s?g:NaN)),e;if(g.s!=e.s)return e.s=-e.s,g.minus(e);if(h=g.d,m=e.d,f=_.precision,d=_.rounding,!h[0]||!m[0])return m[0]||(e=new _(g)),vt?st(e,f,d):e;if(l=cr(g.e/ct),i=cr(e.e/ct),h=h.slice(),a=l-i,a){for(a<0?(n=h,a=-a,c=m.length):(n=m,i=l,c=h.length),l=Math.ceil(f/ct),c=l>c?l+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=h.length,a=m.length,c-a<0&&(a=c,n=m,m=h,h=n),t=0;a;)t=(h[--a]=h[a]+m[a]+t)/Di|0,h[a]%=Di;for(t&&(h.unshift(t),++i),c=h.length;h[--c]==0;)h.pop();return e.d=h,e.e=jd(h,i),vt?st(e,f,d):e};Ue.precision=Ue.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Go+e);return n.d?(t=a2(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};Ue.round=function(){var e=this,t=e.constructor;return st(new t(e),e.e+1,t.rounding)};Ue.sine=Ue.sin=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+ct,i.rounding=1,n=uA(i,u2(i,n)),i.precision=e,i.rounding=t,st(Fa>2?n.neg():n,e,t,!0)):new i(NaN)};Ue.squareRoot=Ue.sqrt=function(){var e,t,n,i,a,l,c=this,f=c.d,d=c.e,h=c.s,m=c.constructor;if(h!==1||!f||!f[0])return new m(!h||h<0&&(!f||f[0])?NaN:f?c:1/0);for(vt=!1,h=Math.sqrt(+c),h==0||h==1/0?(t=Qn(f),(t.length+d)%2==0&&(t+="0"),h=Math.sqrt(t),d=cr((d+1)/2)-(d<0||d%2),h==1/0?t="5e"+d:(t=h.toExponential(),t=t.slice(0,t.indexOf("e")+1)+d),i=new m(t)):i=new m(h.toString()),n=(d=m.precision)+3;;)if(l=i,i=l.plus(Zt(c,l,n+2,1)).times(.5),Qn(l.d).slice(0,n)===(t=Qn(i.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!a&&t=="4999"){if(!a&&(st(l,d+1,0),l.times(l).eq(c))){i=l;break}n+=4,a=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(st(i,d+1,1),e=!i.times(i).eq(c));break}return vt=!0,st(i,d,m.rounding,e)};Ue.tangent=Ue.tan=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,n=n.sin(),n.s=1,n=Zt(n,new i(1).minus(n.times(n)).sqrt(),e+10,0),i.precision=e,i.rounding=t,st(Fa==2||Fa==4?n.neg():n,e,t,!0)):new i(NaN)};Ue.times=Ue.mul=function(e){var t,n,i,a,l,c,f,d,h,m=this,g=m.constructor,_=m.d,x=(e=new g(e)).d;if(e.s*=m.s,!_||!_[0]||!x||!x[0])return new g(!e.s||_&&!_[0]&&!x||x&&!x[0]&&!_?NaN:!_||!x?e.s/0:e.s*0);for(n=cr(m.e/ct)+cr(e.e/ct),d=_.length,h=x.length,d<h&&(l=_,_=x,x=l,c=d,d=h,h=c),l=[],c=d+h,i=c;i--;)l.push(0);for(i=h;--i>=0;){for(t=0,a=d+i;a>i;)f=l[a]+x[i]*_[a-i-1]+t,l[a--]=f%Di|0,t=f/Di|0;l[a]=(l[a]+t)%Di|0}for(;!l[--c];)l.pop();return t?++n:l.shift(),e.d=l,e.e=jd(l,n),vt?st(e,g.precision,g.rounding):e};Ue.toBinary=function(e,t){return kg(this,2,e,t)};Ue.toDecimalPlaces=Ue.toDP=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:(Ar(e,0,$o),t===void 0?t=i.rounding:Ar(t,0,8),st(n,e+n.e+1,t))};Ue.toExponential=function(e,t){var n,i=this,a=i.constructor;return e===void 0?n=Qi(i,!0):(Ar(e,0,$o),t===void 0?t=a.rounding:Ar(t,0,8),i=st(new a(i),e+1,t),n=Qi(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ue.toFixed=function(e,t){var n,i,a=this,l=a.constructor;return e===void 0?n=Qi(a):(Ar(e,0,$o),t===void 0?t=l.rounding:Ar(t,0,8),i=st(new l(a),e+a.e+1,t),n=Qi(i,!1,e+i.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};Ue.toFraction=function(e){var t,n,i,a,l,c,f,d,h,m,g,_,x=this,w=x.d,y=x.constructor;if(!w)return new y(x);if(h=n=new y(1),i=d=new y(0),t=new y(i),l=t.e=a2(w)-x.e-1,c=l%ct,t.d[0]=Tn(10,c<0?ct+c:c),e==null)e=l>0?t:h;else{if(f=new y(e),!f.isInt()||f.lt(h))throw Error(Go+f);e=f.gt(t)?l>0?t:h:f}for(vt=!1,f=new y(Qn(w)),m=y.precision,y.precision=l=w.length*ct*2;g=Zt(f,t,0,1,1),a=n.plus(g.times(i)),a.cmp(e)!=1;)n=i,i=a,a=h,h=d.plus(g.times(a)),d=a,a=t,t=f.minus(g.times(a)),f=a;return a=Zt(e.minus(n),i,0,1,1),d=d.plus(a.times(h)),n=n.plus(a.times(i)),d.s=h.s=x.s,_=Zt(h,i,l,1).minus(x).abs().cmp(Zt(d,n,l,1).minus(x).abs())<1?[h,i]:[d,n],y.precision=m,vt=!0,_};Ue.toHexadecimal=Ue.toHex=function(e,t){return kg(this,16,e,t)};Ue.toNearest=function(e,t){var n=this,i=n.constructor;if(n=new i(n),e==null){if(!n.d)return n;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:Ar(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(vt=!1,n=Zt(n,e,0,t,1).times(e),vt=!0,st(n)):(e.s=n.s,n=e),n};Ue.toNumber=function(){return+this};Ue.toOctal=function(e,t){return kg(this,8,e,t)};Ue.toPower=Ue.pow=function(e){var t,n,i,a,l,c,f=this,d=f.constructor,h=+(e=new d(e));if(!f.d||!e.d||!f.d[0]||!e.d[0])return new d(Tn(+f,h));if(f=new d(f),f.eq(1))return f;if(i=d.precision,l=d.rounding,e.eq(1))return st(f,i,l);if(t=cr(e.e/ct),t>=e.d.length-1&&(n=h<0?-h:h)<=aA)return a=o2(d,f,n,i),e.s<0?new d(1).div(a):st(a,i,l);if(c=f.s,c<0){if(t<e.d.length-1)return new d(NaN);if((e.d[t]&1)==0&&(c=1),f.e==0&&f.d[0]==1&&f.d.length==1)return f.s=c,f}return n=Tn(+f,h),t=n==0||!isFinite(n)?cr(h*(Math.log("0."+Qn(f.d))/Math.LN10+f.e+1)):new d(n+"").e,t>d.maxE+1||t<d.minE-1?new d(t>0?c/0:0):(vt=!1,d.rounding=f.s=1,n=Math.min(12,(t+"").length),a=R0(e.times(Bo(f,i+n)),i),a.d&&(a=st(a,i+5,1),Bc(a.d,i,l)&&(t=i+10,a=st(R0(e.times(Bo(f,t+n)),t),t+5,1),+Qn(a.d).slice(i+1,i+15)+1==1e14&&(a=st(a,i+1,0)))),a.s=c,vt=!0,d.rounding=l,st(a,i,l))};Ue.toPrecision=function(e,t){var n,i=this,a=i.constructor;return e===void 0?n=Qi(i,i.e<=a.toExpNeg||i.e>=a.toExpPos):(Ar(e,1,$o),t===void 0?t=a.rounding:Ar(t,0,8),i=st(new a(i),e,t),n=Qi(i,e<=i.e||i.e<=a.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+n:n};Ue.toSignificantDigits=Ue.toSD=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):(Ar(e,1,$o),t===void 0?t=i.rounding:Ar(t,0,8)),st(new i(n),e,t)};Ue.toString=function(){var e=this,t=e.constructor,n=Qi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};Ue.truncated=Ue.trunc=function(){return st(new this.constructor(this),this.e+1,1)};Ue.valueOf=Ue.toJSON=function(){var e=this,t=e.constructor,n=Qi(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Qn(e){var t,n,i,a=e.length-1,l="",c=e[0];if(a>0){for(l+=c,t=1;t<a;t++)i=e[t]+"",n=ct-i.length,n&&(l+=zo(n)),l+=i;c=e[t],i=c+"",n=ct-i.length,n&&(l+=zo(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}function Ar(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Go+e)}function Bc(e,t,n,i){var a,l,c,f;for(l=e[0];l>=10;l/=10)--t;return--t<0?(t+=ct,a=0):(a=Math.ceil((t+1)/ct),t%=ct),l=Tn(10,ct-t),f=e[a]%l|0,i==null?t<3?(t==0?f=f/100|0:t==1&&(f=f/10|0),c=n<4&&f==99999||n>3&&f==49999||f==5e4||f==0):c=(n<4&&f+1==l||n>3&&f+1==l/2)&&(e[a+1]/l/100|0)==Tn(10,t-2)-1||(f==l/2||f==0)&&(e[a+1]/l/100|0)==0:t<4?(t==0?f=f/1e3|0:t==1?f=f/100|0:t==2&&(f=f/10|0),c=(i||n<4)&&f==9999||!i&&n>3&&f==4999):c=((i||n<4)&&f+1==l||!i&&n>3&&f+1==l/2)&&(e[a+1]/l/1e3|0)==Tn(10,t-3)-1,c}function Rh(e,t,n){for(var i,a=[0],l,c=0,f=e.length;c<f;){for(l=a.length;l--;)a[l]*=t;for(a[0]+=L0.indexOf(e.charAt(c++)),i=0;i<a.length;i++)a[i]>n-1&&(a[i+1]===void 0&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}function sA(e,t){var n,i,a;if(t.isZero())return t;i=t.d.length,i<32?(n=Math.ceil(i/3),a=(1/Pd(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),e.precision+=n,t=Jl(e,1,t.times(a),new e(1));for(var l=n;l--;){var c=t.times(t);t=c.times(c).minus(c).times(8).plus(1)}return e.precision-=n,t}var Zt=(function(){function e(i,a,l){var c,f=0,d=i.length;for(i=i.slice();d--;)c=i[d]*a+f,i[d]=c%l|0,f=c/l|0;return f&&i.unshift(f),i}function t(i,a,l,c){var f,d;if(l!=c)d=l>c?1:-1;else for(f=d=0;f<l;f++)if(i[f]!=a[f]){d=i[f]>a[f]?1:-1;break}return d}function n(i,a,l,c){for(var f=0;l--;)i[l]-=f,f=i[l]<a[l]?1:0,i[l]=f*c+i[l]-a[l];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,l,c,f,d){var h,m,g,_,x,w,y,E,D,A,N,F,k,T,R,j,O,G,U,I,W=i.constructor,B=i.s==a.s?1:-1,re=i.d,K=a.d;if(!re||!re[0]||!K||!K[0])return new W(!i.s||!a.s||(re?K&&re[0]==K[0]:!K)?NaN:re&&re[0]==0||!K?B*0:B/0);for(d?(x=1,m=i.e-a.e):(d=Di,x=ct,m=cr(i.e/x)-cr(a.e/x)),U=K.length,O=re.length,D=new W(B),A=D.d=[],g=0;K[g]==(re[g]||0);g++);if(K[g]>(re[g]||0)&&m--,l==null?(T=l=W.precision,c=W.rounding):f?T=l+(i.e-a.e)+1:T=l,T<0)A.push(1),w=!0;else{if(T=T/x+2|0,g=0,U==1){for(_=0,K=K[0],T++;(g<O||_)&&T--;g++)R=_*d+(re[g]||0),A[g]=R/K|0,_=R%K|0;w=_||g<O}else{for(_=d/(K[0]+1)|0,_>1&&(K=e(K,_,d),re=e(re,_,d),U=K.length,O=re.length),j=U,N=re.slice(0,U),F=N.length;F<U;)N[F++]=0;I=K.slice(),I.unshift(0),G=K[0],K[1]>=d/2&&++G;do _=0,h=t(K,N,U,F),h<0?(k=N[0],U!=F&&(k=k*d+(N[1]||0)),_=k/G|0,_>1?(_>=d&&(_=d-1),y=e(K,_,d),E=y.length,F=N.length,h=t(y,N,E,F),h==1&&(_--,n(y,U<E?I:K,E,d))):(_==0&&(h=_=1),y=K.slice()),E=y.length,E<F&&y.unshift(0),n(N,y,F,d),h==-1&&(F=N.length,h=t(K,N,U,F),h<1&&(_++,n(N,U<F?I:K,F,d))),F=N.length):h===0&&(_++,N=[0]),A[g++]=_,h&&N[0]?N[F++]=re[j]||0:(N=[re[j]],F=1);while((j++<O||N[0]!==void 0)&&T--);w=N[0]!==void 0}A[0]||A.shift()}if(x==1)D.e=m,e2=w;else{for(g=1,_=A[0];_>=10;_/=10)g++;D.e=g+m*x-1,st(D,f?l+D.e+1:l,c,w)}return D}})();function st(e,t,n,i){var a,l,c,f,d,h,m,g,_,x=e.constructor;e:if(t!=null){if(g=e.d,!g)return e;for(a=1,f=g[0];f>=10;f/=10)a++;if(l=t-a,l<0)l+=ct,c=t,m=g[_=0],d=m/Tn(10,a-c-1)%10|0;else if(_=Math.ceil((l+1)/ct),f=g.length,_>=f)if(i){for(;f++<=_;)g.push(0);m=d=0,a=1,l%=ct,c=l-ct+1}else break e;else{for(m=f=g[_],a=1;f>=10;f/=10)a++;l%=ct,c=l-ct+a,d=c<0?0:m/Tn(10,a-c-1)%10|0}if(i=i||t<0||g[_+1]!==void 0||(c<0?m:m%Tn(10,a-c-1)),h=n<4?(d||i)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||i||n==6&&(l>0?c>0?m/Tn(10,a-c):0:g[_-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,h?(t-=e.e+1,g[0]=Tn(10,(ct-t%ct)%ct),e.e=-t||0):g[0]=e.e=0,e;if(l==0?(g.length=_,f=1,_--):(g.length=_+1,f=Tn(10,ct-l),g[_]=c>0?(m/Tn(10,a-c)%Tn(10,c)|0)*f:0),h)for(;;)if(_==0){for(l=1,c=g[0];c>=10;c/=10)l++;for(c=g[0]+=f,f=1;c>=10;c/=10)f++;l!=f&&(e.e++,g[0]==Di&&(g[0]=1));break}else{if(g[_]+=f,g[_]!=Di)break;g[_--]=0,f=1}for(l=g.length;g[--l]===0;)g.pop()}return vt&&(e.e>x.maxE?(e.d=null,e.e=NaN):e.e<x.minE&&(e.e=0,e.d=[0])),e}function Qi(e,t,n){if(!e.isFinite())return l2(e);var i,a=e.e,l=Qn(e.d),c=l.length;return t?(n&&(i=n-c)>0?l=l.charAt(0)+"."+l.slice(1)+zo(i):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(e.e<0?"e":"e+")+e.e):a<0?(l="0."+zo(-a-1)+l,n&&(i=n-c)>0&&(l+=zo(i))):a>=c?(l+=zo(a+1-c),n&&(i=n-a-1)>0&&(l=l+"."+zo(i))):((i=a+1)<c&&(l=l.slice(0,i)+"."+l.slice(i)),n&&(i=n-c)>0&&(a+1===c&&(l+="."),l+=zo(i))),l}function jd(e,t){var n=e[0];for(t*=ct;n>=10;n/=10)t++;return t}function Jh(e,t,n){if(t>oA)throw vt=!0,n&&(e.precision=n),Error(t2);return st(new e(Wh),t,1,!0)}function Yi(e,t,n){if(t>B0)throw Error(t2);return st(new e(Qh),t,n,!0)}function a2(e){var t=e.length-1,n=t*ct+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function zo(e){for(var t="";e--;)t+="0";return t}function o2(e,t,n,i){var a,l=new e(1),c=Math.ceil(i/ct+4);for(vt=!1;;){if(n%2&&(l=l.times(t),C_(l.d,c)&&(a=!0)),n=cr(n/2),n===0){n=l.d.length-1,a&&l.d[n]===0&&++l.d[n];break}t=t.times(t),C_(t.d,c)}return vt=!0,l}function S_(e){return e.d[e.d.length-1]&1}function s2(e,t,n){for(var i,a,l=new e(t[0]),c=0;++c<t.length;){if(a=new e(t[c]),!a.s){l=a;break}i=l.cmp(a),(i===n||i===0&&l.s===n)&&(l=a)}return l}function R0(e,t){var n,i,a,l,c,f,d,h=0,m=0,g=0,_=e.constructor,x=_.rounding,w=_.precision;if(!e.d||!e.d[0]||e.e>17)return new _(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(vt=!1,d=w):d=t,f=new _(.03125);e.e>-2;)e=e.times(f),g+=5;for(i=Math.log(Tn(2,g))/Math.LN10*2+5|0,d+=i,n=l=c=new _(1),_.precision=d;;){if(l=st(l.times(e),d,1),n=n.times(++m),f=c.plus(Zt(l,n,d,1)),Qn(f.d).slice(0,d)===Qn(c.d).slice(0,d)){for(a=g;a--;)c=st(c.times(c),d,1);if(t==null)if(h<3&&Bc(c.d,d-i,x,h))_.precision=d+=10,n=l=f=new _(1),m=0,h++;else return st(c,_.precision=w,x,vt=!0);else return _.precision=w,c}c=f}}function Bo(e,t){var n,i,a,l,c,f,d,h,m,g,_,x=1,w=10,y=e,E=y.d,D=y.constructor,A=D.rounding,N=D.precision;if(y.s<0||!E||!E[0]||!y.e&&E[0]==1&&E.length==1)return new D(E&&!E[0]?-1/0:y.s!=1?NaN:E?0:y);if(t==null?(vt=!1,m=N):m=t,D.precision=m+=w,n=Qn(E),i=n.charAt(0),Math.abs(l=y.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)y=y.times(e),n=Qn(y.d),i=n.charAt(0),x++;l=y.e,i>1?(y=new D("0."+n),l++):y=new D(i+"."+n.slice(1))}else return h=Jh(D,m+2,N).times(l+""),y=Bo(new D(i+"."+n.slice(1)),m-w).plus(h),D.precision=N,t==null?st(y,N,A,vt=!0):y;for(g=y,d=c=y=Zt(y.minus(1),y.plus(1),m,1),_=st(y.times(y),m,1),a=3;;){if(c=st(c.times(_),m,1),h=d.plus(Zt(c,new D(a),m,1)),Qn(h.d).slice(0,m)===Qn(d.d).slice(0,m))if(d=d.times(2),l!==0&&(d=d.plus(Jh(D,m+2,N).times(l+""))),d=Zt(d,new D(x),m,1),t==null)if(Bc(d.d,m-w,A,f))D.precision=m+=w,h=c=y=Zt(g.minus(1),g.plus(1),m,1),_=st(y.times(y),m,1),a=f=1;else return st(d,D.precision=N,A,vt=!0);else return D.precision=N,d;d=h,a+=2}}function l2(e){return String(e.s*e.s/0)}function Oh(e,t){var n,i,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;i++);for(a=t.length;t.charCodeAt(a-1)===48;--a);if(t=t.slice(i,a),t){if(a-=i,e.e=n=n-i-1,e.d=[],i=(n+1)%ct,n<0&&(i+=ct),i<a){for(i&&e.d.push(+t.slice(0,i)),a-=ct;i<a;)e.d.push(+t.slice(i,i+=ct));t=t.slice(i),i=ct-t.length}else i-=a;for(;i--;)t+="0";e.d.push(+t),vt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function lA(e,t){var n,i,a,l,c,f,d,h,m;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),i2.test(t))return Oh(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(rA.test(t))n=16,t=t.toLowerCase();else if(nA.test(t))n=2;else if(iA.test(t))n=8;else throw Error(Go+t);for(l=t.search(/p/i),l>0?(d=+t.slice(l+1),t=t.substring(2,l)):t=t.slice(2),l=t.indexOf("."),c=l>=0,i=e.constructor,c&&(t=t.replace(".",""),f=t.length,l=f-l,a=o2(i,new i(n),l,l*2)),h=Rh(t,n,Di),m=h.length-1,l=m;h[l]===0;--l)h.pop();return l<0?new i(e.s*0):(e.e=jd(h,m),e.d=h,vt=!1,c&&(e=Zt(e,a,f*4)),d&&(e=e.times(Math.abs(d)<54?Tn(2,d):eu.pow(2,d))),vt=!0,e)}function uA(e,t){var n,i=t.d.length;if(i<3)return t.isZero()?t:Jl(e,2,t,t);n=1.4*Math.sqrt(i),n=n>16?16:n|0,t=t.times(1/Pd(5,n)),t=Jl(e,2,t,t);for(var a,l=new e(5),c=new e(16),f=new e(20);n--;)a=t.times(t),t=t.times(l.plus(a.times(c.times(a).minus(f))));return t}function Jl(e,t,n,i,a){var l,c,f,d,h=e.precision,m=Math.ceil(h/ct);for(vt=!1,d=n.times(n),f=new e(i);;){if(c=Zt(f.times(d),new e(t++*t++),h,1),f=a?i.plus(c):i.minus(c),i=Zt(c.times(d),new e(t++*t++),h,1),c=f.plus(i),c.d[m]!==void 0){for(l=m;c.d[l]===f.d[l]&&l--;);if(l==-1)break}l=f,f=i,i=c,c=l}return vt=!0,c.d.length=m+1,c}function Pd(e,t){for(var n=e;--t;)n*=e;return n}function u2(e,t){var n,i=t.s<0,a=Yi(e,e.precision,1),l=a.times(.5);if(t=t.abs(),t.lte(l))return Fa=i?4:1,t;if(n=t.divToInt(a),n.isZero())Fa=i?3:2;else{if(t=t.minus(n.times(a)),t.lte(l))return Fa=S_(n)?i?2:3:i?4:1,t;Fa=S_(n)?i?1:4:i?3:2}return t.minus(a).abs()}function kg(e,t,n,i){var a,l,c,f,d,h,m,g,_,x=e.constructor,w=n!==void 0;if(w?(Ar(n,1,$o),i===void 0?i=x.rounding:Ar(i,0,8)):(n=x.precision,i=x.rounding),!e.isFinite())m=l2(e);else{for(m=Qi(e),c=m.indexOf("."),w?(a=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):a=t,c>=0&&(m=m.replace(".",""),_=new x(1),_.e=m.length-c,_.d=Rh(Qi(_),10,a),_.e=_.d.length),g=Rh(m,10,a),l=d=g.length;g[--d]==0;)g.pop();if(!g[0])m=w?"0p+0":"0";else{if(c<0?l--:(e=new x(e),e.d=g,e.e=l,e=Zt(e,_,n,i,0,a),g=e.d,l=e.e,h=e2),c=g[n],f=a/2,h=h||g[n+1]!==void 0,h=i<4?(c!==void 0||h)&&(i===0||i===(e.s<0?3:2)):c>f||c===f&&(i===4||h||i===6&&g[n-1]&1||i===(e.s<0?8:7)),g.length=n,h)for(;++g[--n]>a-1;)g[n]=0,n||(++l,g.unshift(1));for(d=g.length;!g[d-1];--d);for(c=0,m="";c<d;c++)m+=L0.charAt(g[c]);if(w){if(d>1)if(t==16||t==8){for(c=t==16?4:3,--d;d%c;d++)m+="0";for(g=Rh(m,a,t),d=g.length;!g[d-1];--d);for(c=1,m="1.";c<d;c++)m+=L0.charAt(g[c])}else m=m.charAt(0)+"."+m.slice(1);m=m+(l<0?"p":"p+")+l}else if(l<0){for(;++l;)m="0"+m;m="0."+m}else if(++l>d)for(l-=d;l--;)m+="0";else l<d&&(m=m.slice(0,l)+"."+m.slice(l))}m=(t==16?"0x":t==2?"0b":t==8?"0o":"")+m}return e.s<0?"-"+m:m}function C_(e,t){if(e.length>t)return e.length=t,!0}function cA(e){return new this(e).abs()}function fA(e){return new this(e).acos()}function hA(e){return new this(e).acosh()}function dA(e,t){return new this(e).plus(t)}function mA(e){return new this(e).asin()}function pA(e){return new this(e).asinh()}function gA(e){return new this(e).atan()}function vA(e){return new this(e).atanh()}function yA(e,t){e=new this(e),t=new this(t);var n,i=this.precision,a=this.rounding,l=i+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Yi(this,l,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Yi(this,i,a):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Yi(this,l,1).times(.5),n.s=e.s):t.s<0?(this.precision=l,this.rounding=1,n=this.atan(Zt(e,t,l,1)),t=Yi(this,l,1),this.precision=i,this.rounding=a,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Zt(e,t,l,1)),n}function _A(e){return new this(e).cbrt()}function xA(e){return st(e=new this(e),e.e+1,2)}function bA(e,t,n){return new this(e).clamp(t,n)}function wA(e){if(!e||typeof e!="object")throw Error(Od+"Object expected");var t,n,i,a=e.defaults===!0,l=["precision",1,$o,"rounding",0,8,"toExpNeg",-$l,0,"toExpPos",0,$l,"maxE",0,$l,"minE",-$l,0,"modulo",0,9];for(t=0;t<l.length;t+=3)if(n=l[t],a&&(this[n]=F0[n]),(i=e[n])!==void 0)if(cr(i)===i&&i>=l[t+1]&&i<=l[t+2])this[n]=i;else throw Error(Go+n+": "+i);if(n="crypto",a&&(this[n]=F0[n]),(i=e[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(n2);else this[n]=!1;else throw Error(Go+n+": "+i);return this}function DA(e){return new this(e).cos()}function EA(e){return new this(e).cosh()}function c2(e){var t,n,i;function a(l){var c,f,d,h=this;if(!(h instanceof a))return new a(l);if(h.constructor=a,A_(l)){h.s=l.s,vt?!l.d||l.e>a.maxE?(h.e=NaN,h.d=null):l.e<a.minE?(h.e=0,h.d=[0]):(h.e=l.e,h.d=l.d.slice()):(h.e=l.e,h.d=l.d?l.d.slice():l.d);return}if(d=typeof l,d==="number"){if(l===0){h.s=1/l<0?-1:1,h.e=0,h.d=[0];return}if(l<0?(l=-l,h.s=-1):h.s=1,l===~~l&&l<1e7){for(c=0,f=l;f>=10;f/=10)c++;vt?c>a.maxE?(h.e=NaN,h.d=null):c<a.minE?(h.e=0,h.d=[0]):(h.e=c,h.d=[l]):(h.e=c,h.d=[l]);return}if(l*0!==0){l||(h.s=NaN),h.e=NaN,h.d=null;return}return Oh(h,l.toString())}if(d==="string")return(f=l.charCodeAt(0))===45?(l=l.slice(1),h.s=-1):(f===43&&(l=l.slice(1)),h.s=1),i2.test(l)?Oh(h,l):lA(h,l);if(d==="bigint")return l<0?(l=-l,h.s=-1):h.s=1,Oh(h,l.toString());throw Error(Go+l)}if(a.prototype=Ue,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=wA,a.clone=c2,a.isDecimal=A_,a.abs=cA,a.acos=fA,a.acosh=hA,a.add=dA,a.asin=mA,a.asinh=pA,a.atan=gA,a.atanh=vA,a.atan2=yA,a.cbrt=_A,a.ceil=xA,a.clamp=bA,a.cos=DA,a.cosh=EA,a.div=SA,a.exp=CA,a.floor=AA,a.hypot=NA,a.ln=MA,a.log=TA,a.log10=zA,a.log2=kA,a.max=LA,a.min=FA,a.mod=BA,a.mul=RA,a.pow=OA,a.random=jA,a.round=PA,a.sign=IA,a.sin=HA,a.sinh=GA,a.sqrt=UA,a.sub=$A,a.sum=ZA,a.tan=KA,a.tanh=qA,a.trunc=VA,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return a.config(e),a}function SA(e,t){return new this(e).div(t)}function CA(e){return new this(e).exp()}function AA(e){return st(e=new this(e),e.e+1,3)}function NA(){var e,t,n=new this(0);for(vt=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return vt=!0,new this(1/0);n=t}return vt=!0,n.sqrt()}function A_(e){return e instanceof eu||e&&e.toStringTag===r2||!1}function MA(e){return new this(e).ln()}function TA(e,t){return new this(e).log(t)}function kA(e){return new this(e).log(2)}function zA(e){return new this(e).log(10)}function LA(){return s2(this,arguments,-1)}function FA(){return s2(this,arguments,1)}function BA(e,t){return new this(e).mod(t)}function RA(e,t){return new this(e).mul(t)}function OA(e,t){return new this(e).pow(t)}function jA(e){var t,n,i,a,l=0,c=new this(1),f=[];if(e===void 0?e=this.precision:Ar(e,1,$o),i=Math.ceil(e/ct),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));l<i;)a=t[l],a>=429e7?t[l]=crypto.getRandomValues(new Uint32Array(1))[0]:f[l++]=a%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);l<i;)a=t[l]+(t[l+1]<<8)+(t[l+2]<<16)+((t[l+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(t,l):(f.push(a%1e7),l+=4);l=i/4}else throw Error(n2);else for(;l<i;)f[l++]=Math.random()*1e7|0;for(i=f[--l],e%=ct,i&&e&&(a=Tn(10,ct-e),f[l]=(i/a|0)*a);f[l]===0;l--)f.pop();if(l<0)n=0,f=[0];else{for(n=-1;f[0]===0;n-=ct)f.shift();for(i=1,a=f[0];a>=10;a/=10)i++;i<ct&&(n-=ct-i)}return c.e=n,c.d=f,c}function PA(e){return st(e=new this(e),e.e+1,this.rounding)}function IA(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function HA(e){return new this(e).sin()}function GA(e){return new this(e).sinh()}function UA(e){return new this(e).sqrt()}function $A(e,t){return new this(e).sub(t)}function ZA(){var e=0,t=arguments,n=new this(t[e]);for(vt=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return vt=!0,st(n,this.precision,this.rounding)}function KA(e){return new this(e).tan()}function qA(e){return new this(e).tanh()}function VA(e){return st(e=new this(e),e.e+1,1)}Ue[Symbol.for("nodejs.util.inspect.custom")]=Ue.toString;Ue[Symbol.toStringTag]="Decimal";var eu=Ue.constructor=c2(F0);Wh=new eu(Wh);Qh=new eu(Qh);var YA="BigNumber",XA=["?on","config"],WA=Ye(YA,XA,e=>{var{on:t,config:n}=e,i=eu.clone({precision:n.precision,modulo:eu.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(a){return new i(a.value)},t&&t("config",function(a,l){a.precision!==l.precision&&i.config({precision:a.precision})}),i},{isClass:!0});const or=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},ii=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},QA=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},i0=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},zl=function(){throw SyntaxError("Invalid Param")};function a0(e,t){const n=Math.abs(e),i=Math.abs(t);return e===0?Math.log(i):t===0?Math.log(n):n<3e3&&i<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const JA={re:0,im:0},Ss=function(e,t){const n=JA;if(e==null)n.re=n.im=0;else if(t!==void 0)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return Le.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return Le.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else e.length===2?(n.re=e[0],n.im=e[1]):zl();break;case"string":n.im=n.re=0;const i=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,l=0;i===null&&zl();for(let c=0;c<i.length;c++){const f=i[c];f===" "||f==="	"||f===`
`||(f==="+"?a++:f==="-"?l++:f==="i"||f==="I"?(a+l===0&&zl(),i[c+1]!==" "&&!isNaN(i[c+1])?(n.im+=parseFloat((l%2?"-":"")+i[c+1]),c++):n.im+=parseFloat((l%2?"-":"")+"1"),a=l=0):((a+l===0||isNaN(f))&&zl(),i[c+1]==="i"||i[c+1]==="I"?(n.im+=parseFloat((l%2?"-":"")+f),c++):n.re+=parseFloat((l%2?"-":"")+f),a=l=0))}a+l>0&&zl();break;case"number":n.im=0,n.re=e;break;default:zl()}return isNaN(n.re)||isNaN(n.im),n};function Le(e,t){if(!(this instanceof Le))return new Le(e,t);const n=Ss(e,t);this.re=n.re,this.im=n.im}Le.prototype={re:0,im:0,sign:function(){const e=i0(this.re,this.im);return new Le(this.re/e,this.im/e)},add:function(e,t){const n=Ss(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return i||a?i&&a?Le.NAN:Le.INFINITY:new Le(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=Ss(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return i||a?i&&a?Le.NAN:Le.INFINITY:new Le(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=Ss(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),l=this.re===0&&this.im===0,c=n.re===0&&n.im===0;return i&&c||a&&l?Le.NAN:i||a?Le.INFINITY:n.im===0&&this.im===0?new Le(this.re*n.re,0):new Le(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=Ss(e,t),i=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),l=this.re===0&&this.im===0,c=n.re===0&&n.im===0;if(l&&c||i&&a)return Le.NAN;if(c||i)return Le.INFINITY;if(l||a)return Le.ZERO;if(n.im===0)return new Le(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const f=n.re/n.im,d=n.re*f+n.im;return new Le((this.re*f+this.im)/d,(this.im*f-this.re)/d)}else{const f=n.im/n.re,d=n.im*f+n.re;return new Le((this.re+this.im*f)/d,(this.im-this.re*f)/d)}},pow:function(e,t){const n=Ss(e,t),i=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return Le.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new Le(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new Le(Math.pow(this.im,n.re),0);case 1:return new Le(0,Math.pow(this.im,n.re));case 2:return new Le(-Math.pow(this.im,n.re),0);case 3:return new Le(0,-Math.pow(this.im,n.re))}}if(i&&n.re>0)return Le.ZERO;const l=Math.atan2(this.im,this.re),c=a0(this.re,this.im);let f=Math.exp(n.re*c-n.im*l),d=n.im*c+n.re*l;return new Le(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new Le(Math.sqrt(e),0):new Le(0,Math.sqrt(-e));const n=i0(e,t);let i=Math.sqrt(.5*(n+Math.abs(e))),a=Math.abs(t)/(2*i);return e>=0?new Le(i,t<0?-a:a):new Le(a,t<0?-i:i)},exp:function(){const e=Math.exp(this.re);return this.im===0?new Le(e,0):new Le(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new Le(Math.expm1(e)*Math.cos(t)+QA(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new Le(Math.log(e),0):new Le(a0(e,t),Math.atan2(t,e))},abs:function(){return i0(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new Le(Math.sin(e)*or(t),Math.cos(e)*ii(t))},cos:function(){const e=this.re,t=this.im;return new Le(Math.cos(e)*or(t),-Math.sin(e)*ii(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+or(t);return new Le(Math.sin(e)/n,ii(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-or(t);return new Le(-Math.sin(e)/n,ii(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*or(2*t)+.5*Math.cos(2*e);return new Le(Math.cos(e)*or(t)/n,Math.sin(e)*ii(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*or(2*t)-.5*Math.cos(2*e);return new Le(Math.sin(e)*or(t)/n,-Math.cos(e)*ii(t)/n)},asin:function(){const e=this.re,t=this.im,n=new Le(t*t-e*e+1,-2*e*t).sqrt(),i=new Le(n.re-t,n.im+e).log();return new Le(i.im,-i.re)},acos:function(){const e=this.re,t=this.im,n=new Le(t*t-e*e+1,-2*e*t).sqrt(),i=new Le(n.re-t,n.im+e).log();return new Le(Math.PI/2-i.im,i.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new Le(0,1/0);if(t===-1)return new Le(0,-1/0)}const n=e*e+(1-t)*(1-t),i=new Le((1-t*t-e*e)/n,-2*e/n).log();return new Le(-.5*i.im,.5*i.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new Le(Math.atan2(1,e),0);const n=e*e+t*t;return n!==0?new Le(e/n,-t/n).atan():new Le(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Le(0,1/0);const n=e*e+t*t;return n!==0?new Le(e/n,-t/n).acos():new Le(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Le(Math.PI/2,1/0);const n=e*e+t*t;return n!==0?new Le(e/n,-t/n).asin():new Le(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new Le(ii(e)*Math.cos(t),or(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new Le(or(e)*Math.cos(t),ii(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=or(e)+Math.cos(t);return new Le(ii(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=or(e)-Math.cos(t);return new Le(ii(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-or(2*e);return new Le(-2*ii(e)*Math.cos(t)/n,2*or(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+or(2*e);return new Le(2*or(e)*Math.cos(t)/n,-2*ii(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&t===0,i=1-e,a=1+e,l=i*i+t*t,c=l!==0?new Le((a*i-t*t)/l,(t*i+a*t)/l):new Le(e!==-1?e/0:0,t!==0?t/0:0),f=c.re;return c.re=a0(c.re,c.im)/2,c.im=Math.atan2(c.im,f)/2,n&&(c.im=-c.im),c},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Le(0,Math.PI/2);const n=e*e+t*t;return n!==0?new Le(e/n,-t/n).atanh():new Le(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new Le(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return n!==0?new Le(e/n,-t/n).asinh():new Le(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return Le.INFINITY;const n=e*e+t*t;return n!==0?new Le(e/n,-t/n).acosh():new Le(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return Le.INFINITY;if(this.isInfinite())return Le.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new Le(e/n,-t/n)},conjugate:function(){return new Le(this.re,-this.im)},neg:function(){return new Le(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new Le(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new Le(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new Le(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=Ss(e,t);return Math.abs(n.re-this.re)<=Le.EPSILON&&Math.abs(n.im-this.im)<=Le.EPSILON},clone:function(){return new Le(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<Le.EPSILON&&(e=0),Math.abs(t)<Le.EPSILON&&(t=0),t===0?n+e:(e!==0?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),t!==1&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Le.ZERO=new Le(0,0);Le.ONE=new Le(1,0);Le.I=new Le(0,1);Le.PI=new Le(Math.PI,0);Le.E=new Le(Math.E,0);Le.INFINITY=new Le(1/0,1/0);Le.NAN=new Le(NaN,NaN);Le.EPSILON=1e-15;var e5="Complex",t5=[],n5=Ye(e5,t5,()=>(Object.defineProperty(Le,"name",{value:"Complex"}),Le.prototype.constructor=Le,Le.prototype.type="Complex",Le.prototype.isComplex=!0,Le.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Le.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Le.prototype.format=function(e){var t="",n=this.im,i=this.re,a=z0(this.re,e),l=z0(this.im,e),c=Xt(e)?e:e?e.precision:null;if(c!==null){var f=Math.pow(10,-c);Math.abs(i/n)<f&&(i=0),Math.abs(n/i)<f&&(n=0)}return n===0?t=a:i===0?n===1?t="i":n===-1?t="-i":t=l+"i":n<0?n===-1?t=a+" - i":t=a+" - "+l.substring(1)+"i":n===1?t=a+" + i":t=a+" + "+l+"i",t},Le.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Le(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],i=arguments[1];if(Xt(n)){if(qb(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),Xt(i))return new Le({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Le.prototype.valueOf=Le.prototype.toString,Le.fromJSON=function(e){return new Le(e)},Le.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Le),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const at=BigInt(0),xt=BigInt(1),Hn=BigInt(2),kc=BigInt(3),Zl=BigInt(5),Sr=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const r5=2e3,qe={s:xt,n:at,d:xt};function Na(e,t){try{e=BigInt(e)}catch{throw To()}return e*t}function _i(e){return typeof e=="bigint"?e:Math.floor(e)}function an(e,t){if(t===at)throw zg();const n=Object.create(ai.prototype);n.s=e<at?-xt:xt,e=e<at?-e:e;const i=Cs(e,t);return n.n=e/i,n.d=t/i,n}const i5=[Hn*Hn,Hn,Hn*Hn,Hn,Hn*Hn,Hn*kc,Hn,Hn*kc];function Ll(e){const t=Object.create(null);if(e<=xt)return t[e]=xt,t;const n=i=>{t[i]=(t[i]||at)+xt};for(;e%Hn===at;)n(Hn),e/=Hn;for(;e%kc===at;)n(kc),e/=kc;for(;e%Zl===at;)n(Zl),e/=Zl;for(let i=0,a=Hn+Zl;a*a<=e;){for(;e%a===at;)n(a),e/=a;a+=i5[i],i=i+1&7}return e>xt&&n(e),t}const Pn=function(e,t){let n=at,i=xt,a=xt;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw To();if(e%1!==0)throw N_();n=BigInt(e)}if(typeof t=="bigint")i=t;else{if(isNaN(t))throw To();if(t%1!==0)throw N_();i=BigInt(t)}a=n*i}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),i=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(i=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw To();a=n*i}else if(typeof e=="number"){if(isNaN(e))throw To();if(e<0&&(a=-xt,e=-e),e%1===0)n=BigInt(e);else{let l=1,c=0,f=1,d=1,h=1,m=1e7;for(e>=1&&(l=10**Math.floor(1+Math.log10(e)),e/=l);f<=m&&h<=m;){let g=(c+d)/(f+h);if(e===g){f+h<=m?(n=c+d,i=f+h):h>f?(n=d,i=h):(n=c,i=f);break}else e>g?(c+=d,f+=h):(d+=c,h+=f),f>m?(n=d,i=h):(n=c,i=f)}n=BigInt(n)*BigInt(l),i=BigInt(i)}}else if(typeof e=="string"){let l=0,c=at,f=at,d=at,h=xt,m=xt,g=e.replace(/_/g,"").match(/\d+|./g);if(g===null)throw To();if(g[l]==="-"?(a=-xt,l++):g[l]==="+"&&l++,g.length===l+1?f=Na(g[l++],a):g[l+1]==="."||g[l]==="."?(g[l]!=="."&&(c=Na(g[l++],a)),l++,(l+1===g.length||g[l+1]==="("&&g[l+3]===")"||g[l+1]==="'"&&g[l+3]==="'")&&(f=Na(g[l],a),h=Sr**BigInt(g[l].length),l++),(g[l]==="("&&g[l+2]===")"||g[l]==="'"&&g[l+2]==="'")&&(d=Na(g[l+1],a),m=Sr**BigInt(g[l+1].length)-xt,l+=3)):g[l+1]==="/"||g[l+1]===":"?(f=Na(g[l],a),h=Na(g[l+2],xt),l+=3):g[l+3]==="/"&&g[l+1]===" "&&(c=Na(g[l],a),f=Na(g[l+2],a),h=Na(g[l+4],xt),l+=5),g.length<=l)i=h*m,a=n=d+i*c+m*f;else throw To()}else if(typeof e=="bigint")n=e,a=e,i=xt;else throw To();if(i===at)throw zg();qe.s=a<at?-xt:xt,qe.n=n<at?-n:n,qe.d=i<at?-i:i};function a5(e,t,n){let i=xt;for(;t>at;e=e*e%n,t>>=xt)t&xt&&(i=i*e%n);return i}function o5(e,t){for(;t%Hn===at;t/=Hn);for(;t%Zl===at;t/=Zl);if(t===xt)return at;let n=Sr%t,i=1;for(;n!==xt;i++)if(n=n*Sr%t,i>r5)return at;return BigInt(i)}function s5(e,t,n){let i=xt,a=a5(Sr,n,t);for(let l=0;l<300;l++){if(i===a)return BigInt(l);i=i*Sr%t,a=a*Sr%t}return 0}function Cs(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function ai(e,t){if(Pn(e,t),this instanceof ai)e=Cs(qe.d,qe.n),this.s=qe.s,this.n=qe.n/e,this.d=qe.d/e;else return an(qe.s*qe.n,qe.d)}const zg=function(){return new Error("Division by Zero")},To=function(){return new Error("Invalid argument")},N_=function(){return new Error("Parameters must be integer")};ai.prototype={s:xt,n:at,d:xt,abs:function(){return an(this.n,this.d)},neg:function(){return an(-this.s*this.n,this.d)},add:function(e,t){return Pn(e,t),an(this.s*this.n*qe.d+qe.s*this.d*qe.n,this.d*qe.d)},sub:function(e,t){return Pn(e,t),an(this.s*this.n*qe.d-qe.s*this.d*qe.n,this.d*qe.d)},mul:function(e,t){return Pn(e,t),an(this.s*qe.s*this.n*qe.n,this.d*qe.d)},div:function(e,t){return Pn(e,t),an(this.s*qe.s*this.n*qe.d,this.d*qe.n)},clone:function(){return an(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return an(this.s*this.n%this.d,xt);if(Pn(e,t),at===qe.n*this.d)throw zg();return an(this.s*(qe.d*this.n)%(qe.n*this.d),qe.d*this.d)},gcd:function(e,t){return Pn(e,t),an(Cs(qe.n,this.n)*Cs(qe.d,this.d),qe.d*this.d)},lcm:function(e,t){return Pn(e,t),qe.n===at&&this.n===at?an(at,xt):an(qe.n*this.n,Cs(qe.n,this.n)*Cs(qe.d,this.d))},inverse:function(){return an(this.s*this.d,this.n)},pow:function(e,t){if(Pn(e,t),qe.d===xt)return qe.s<at?an((this.s*this.d)**qe.n,this.n**qe.n):an((this.s*this.n)**qe.n,this.d**qe.n);if(this.s<at)return null;let n=Ll(this.n),i=Ll(this.d),a=xt,l=xt;for(let c in n)if(c!=="1"){if(c==="0"){a=at;break}if(n[c]*=qe.n,n[c]%qe.d===at)n[c]/=qe.d;else return null;a*=BigInt(c)**n[c]}for(let c in i)if(c!=="1"){if(i[c]*=qe.n,i[c]%qe.d===at)i[c]/=qe.d;else return null;l*=BigInt(c)**i[c]}return qe.s<at?an(l,a):an(a,l)},log:function(e,t){if(Pn(e,t),this.s<=at||qe.s<=at)return null;const n=Object.create(null),i=Ll(qe.n),a=Ll(qe.d),l=Ll(this.n),c=Ll(this.d);for(const h in a)i[h]=(i[h]||at)-a[h];for(const h in c)l[h]=(l[h]||at)-c[h];for(const h in i)h!=="1"&&(n[h]=!0);for(const h in l)h!=="1"&&(n[h]=!0);let f=null,d=null;for(const h in n){const m=i[h]||at,g=l[h]||at;if(m===at){if(g!==at)return null;continue}let _=g,x=m;const w=Cs(_,x);if(_/=w,x/=w,f===null&&d===null)f=_,d=x;else if(_*d!==f*x)return null}return f!==null&&d!==null?an(f,d):null},equals:function(e,t){return Pn(e,t),this.s*this.n*qe.d===qe.s*qe.n*this.d},lt:function(e,t){return Pn(e,t),this.s*this.n*qe.d<qe.s*qe.n*this.d},lte:function(e,t){return Pn(e,t),this.s*this.n*qe.d<=qe.s*qe.n*this.d},gt:function(e,t){return Pn(e,t),this.s*this.n*qe.d>qe.s*qe.n*this.d},gte:function(e,t){return Pn(e,t),this.s*this.n*qe.d>=qe.s*qe.n*this.d},compare:function(e,t){Pn(e,t);let n=this.s*this.n*qe.d-qe.s*qe.n*this.d;return(at<n)-(n<at)},ceil:function(e){return e=Sr**BigInt(e||0),an(_i(this.s*e*this.n/this.d)+(e*this.n%this.d>at&&this.s>=at?xt:at),e)},floor:function(e){return e=Sr**BigInt(e||0),an(_i(this.s*e*this.n/this.d)-(e*this.n%this.d>at&&this.s<at?xt:at),e)},round:function(e){return e=Sr**BigInt(e||0),an(_i(this.s*e*this.n/this.d)+this.s*((this.s>=at?xt:at)+Hn*(e*this.n%this.d)>this.d?xt:at),e)},roundTo:function(e,t){Pn(e,t);const n=this.n*qe.d,i=this.d*qe.n,a=n%i;let l=_i(n/i);return a+a>=i&&l++,an(this.s*l*qe.n,qe.d)},divisible:function(e,t){return Pn(e,t),qe.n===at?!1:this.n*qe.d%(qe.n*this.d)===at},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e=15){let t=this.n,n=this.d,i=o5(t,n),a=s5(t,n,i),l=this.s<at?"-":"";if(l+=_i(t/n),t%=n,t*=Sr,t&&(l+="."),i){for(let c=a;c--;)l+=_i(t/n),t%=n,t*=Sr;l+="(";for(let c=i;c--;)l+=_i(t/n),t%=n,t*=Sr;l+=")"}else for(let c=e;t&&c--;)l+=_i(t/n),t%=n,t*=Sr;return l},toFraction:function(e=!1){let t=this.n,n=this.d,i=this.s<at?"-":"";if(n===xt)i+=t;else{const a=_i(t/n);e&&a>at&&(i+=a,i+=" ",t%=n),i+=t,i+="/",i+=n}return i},toLatex:function(e=!1){let t=this.n,n=this.d,i=this.s<at?"-":"";if(n===xt)i+=t;else{const a=_i(t/n);e&&a>at&&(i+=a,t%=n),i+="\\frac{",i+=t,i+="}{",i+=n,i+="}"}return i},toContinued:function(){let e=this.n,t=this.d;const n=[];for(;t;){n.push(_i(e/t));const i=e%t;e=t,t=i}return n},simplify:function(e=.001){const t=BigInt(Math.ceil(1/e)),n=this.abs(),i=n.toContinued();for(let a=1;a<i.length;a++){let l=an(i[a-1],xt);for(let f=a-2;f>=0;f--)l=l.inverse().add(i[f]);let c=l.sub(n);if(c.n*t<c.d)return l.mul(this.s)}return this}};var l5="Fraction",u5=[],c5=Ye(l5,u5,()=>(Object.defineProperty(ai,"name",{value:"Fraction"}),ai.prototype.constructor=ai,ai.prototype.type="Fraction",ai.prototype.isFraction=!0,ai.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ai.fromJSON=function(e){return new ai(e)},ai),{isClass:!0}),f5="Matrix",h5=[],d5=Ye(f5,h5,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,i){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,i){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function o0(e,t,n){var i=e.constructor,a=new i(2),l="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!vn(n))throw new Error("size must be an integer");if(e.greaterThan(a.pow(n-1).sub(1))||e.lessThan(a.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(a.pow(n))),l="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(l);case 8:return"".concat(e.toOctal()).concat(l);case 16:return"".concat(e.toHexadecimal()).concat(l);default:throw new Error("Base ".concat(t," not supported "))}}function m5(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:i,wordSize:a}=Wb(t);switch(n){case"fixed":return g5(e,i);case"exponential":return M_(e,i);case"engineering":return p5(e,i);case"bin":return o0(e,2,a);case"oct":return o0(e,8,a);case"hex":return o0(e,16,a);case"auto":{var l=T_(t?.lowerExp,-3),c=T_(t?.upperExp,5);if(e.isZero())return"0";var f,d=e.toSignificantDigits(i),h=d.e;return h>=l&&h<c?f=d.toFixed():f=M_(e,i),f.replace(/((\.\d*?)(0+))($|e)/,function(){var m=arguments[2],g=arguments[4];return m!=="."?m+g:g})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function p5(e,t){var n=e.e,i=n%3===0?n:n<0?n-3-n%3:n-n%3,a=e.mul(Math.pow(10,-i)),l=a.toPrecision(t);if(l.includes("e")){var c=e.constructor;l=new c(l).toFixed()}return l+"e"+(n>=0?"+":"")+i.toString()}function M_(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function g5(e,t){return e.toFixed(t)}function T_(e,t){return Xt(e)?e:yn(e)?e.toNumber():t}function Jt(e,t){var n=v5(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function v5(e,t){if(typeof e=="number")return z0(e,t);if(yn(e))return m5(e,t);if(y5(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return f2(e,t);if(Zi(e))return k_(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(i=>k_(i)+": "+Jt(e[i],t));return"{"+n.join(", ")+"}"}return String(e)}function k_(e){for(var t=String(e),n="",i=0;i<t.length;){var a=t.charAt(i);n+=a in z_?z_[a]:a,i++}return'"'+n+'"'}var z_={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function f2(e,t){if(Array.isArray(e)){for(var n="[",i=e.length,a=0;a<i;a++)a!==0&&(n+=", "),n+=f2(e[a],t);return n+="]",n}else return Jt(e,t)}function y5(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function Ot(e,t,n){if(!(this instanceof Ot))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Ot.prototype=new RangeError;Ot.prototype.constructor=RangeError;Ot.prototype.name="DimensionError";Ot.prototype.isDimensionError=!0;function Os(e,t,n){if(!(this instanceof Os))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Os.prototype=new RangeError;Os.prototype.constructor=RangeError;Os.prototype.name="IndexError";Os.prototype.isIndexError=!0;function Jn(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function h2(e,t,n){var i,a=e.length;if(a!==t[n])throw new Ot(a,t[n]);if(n<t.length-1){var l=n+1;for(i=0;i<a;i++){var c=e[i];if(!Array.isArray(c))throw new Ot(t.length-1,t.length,"<");h2(e[i],t,l)}}else for(i=0;i<a;i++)if(Array.isArray(e[i]))throw new Ot(t.length+1,t.length,">")}function L_(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new Ot(e.length,0)}else h2(e,t,0)}function hn(e,t){if(e!==void 0){if(!Xt(e)||!vn(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Os(e,t)}}function O0(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(a){if(!Xt(a)||!vn(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jt(t)+")")}),(Xt(e)||yn(e))&&(e=[e]);var i=n!==void 0?n:0;return j0(e,t,0,i),e}function j0(e,t,n,i){var a,l,c=e.length,f=t[n],d=Math.min(c,f);if(e.length=f,n<t.length-1){var h=n+1;for(a=0;a<d;a++)l=e[a],Array.isArray(l)||(l=[l],e[a]=l),j0(l,t,h,i);for(a=d;a<f;a++)l=[],e[a]=l,j0(l,t,h,i)}else{for(a=0;a<d;a++)for(;Array.isArray(e[a]);)e[a]=e[a][0];for(a=d;a<f;a++)e[a]=i}}function d2(e,t){var n=P0(e,!0),i=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Ot(0,i,"!=");t=Lg(t,i);var a=m2(t);if(i!==a)throw new Ot(a,i,"!=");try{return _5(n,t)}catch(l){throw l instanceof Ot?new Ot(a,i,"!="):l}}function Lg(e,t){var n=m2(e),i=e.slice(),a=-1,l=e.indexOf(a),c=e.indexOf(a,l+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var f=l>=0,d=t%n===0;if(f)if(d)i[l]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return i}function m2(e){return e.reduce((t,n)=>t*n,1)}function _5(e,t){for(var n=e,i,a=t.length-1;a>0;a--){var l=t[a];i=[];for(var c=n.length/l,f=0;f<c;f++)i.push(n.slice(f*l,(f+1)*l));n=i}return n}function p2(e,t,n,i){var a=i||Jn(e);if(n)for(var l=0;l<n;l++)e=[e],a.unshift(1);for(e=g2(e,t,0);a.length<t;)a.push(1);return e}function g2(e,t,n){var i,a;if(Array.isArray(e)){var l=n+1;for(i=0,a=e.length;i<a;i++)e[i]=g2(e[i],t,l)}else for(var c=n;c<t;c++)e=[e];return e}function P0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(e))return e;if(typeof t!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return t?a(e):i(e),n;function i(l){for(var c=0;c<l.length;c++){var f=l[c];Array.isArray(f)?i(f):n.push(f)}}function a(l){if(Array.isArray(l[0]))for(var c=0;c<l.length;c++)a(l[c]);else for(var f=0;f<l.length;f++)n.push(l[f])}}function Fg(e,t){for(var n,i=0,a=0;a<e.length;a++){var l=e[a],c=Array.isArray(l);if(a===0&&c&&(i=l.length),c&&l.length!==i)return;var f=c?Fg(l,t):t(l);if(n===void 0)n=f;else if(n!==f)return"mixed"}return n}function v2(e,t,n,i){if(i<n){if(e.length!==t.length)throw new Ot(e.length,t.length);for(var a=[],l=0;l<e.length;l++)a[l]=v2(e[l],t[l],n,i+1);return a}else return e.concat(t)}function y2(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,i){return v2(n,i,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function _2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.map(_=>_.length),a=Math.max(...i),l=new Array(a).fill(null),c=0;c<t.length;c++)for(var f=t[c],d=i[c],h=0;h<d;h++){var m=a-d+h;f[h]>l[m]&&(l[m]=f[h])}for(var g=0;g<t.length;g++)x2(t[g],l);return l}function x2(e,t){for(var n=t.length,i=e.length,a=0;a<i;a++){var l=n-i+a;if(e[a]<t[l]&&e[a]>1||e[a]>t[l])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(i," with size ").concat(e[a]," to size ").concat(t[l]))}}function I0(e,t){var n=Jn(e);if(Ho(n,t))return e;x2(n,t);var i=_2(n,t),a=i.length,l=[...Array(a-n.length).fill(1),...n],c=b5(e);n.length<a&&(c=d2(c,l),n=Jn(c));for(var f=0;f<a;f++)n[f]<i[f]&&(c=x5(c,i[f],f),n=Jn(c));return c}function x5(e,t,n){return y2(...Array(t).fill(e),n)}function b2(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=Jn(e);if(t.length!==n.length)throw new Ot(t.length,n.length);for(var i=0;i<t.length;i++)hn(t[i],n[i]);return t.reduce((a,l)=>a[l],e)}function F_(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.length===0)return[];if(n)return l(e);var i=[];return a(e,0);function a(c,f){if(Array.isArray(c)){for(var d=c.length,h=Array(d),m=0;m<d;m++)i[f]=m,h[m]=a(c[m],f+1);return h}else return t(c,i.slice(0,f),e)}function l(c){if(Array.isArray(c)){for(var f=c.length,d=Array(f),h=0;h<f;h++)d[h]=l(c[h]);return d}else return t(c)}}function b5(e){return qh([],e)}function ed(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Xh.isTypedFunction(e)){var a;if(i)a=1;else{var l=(t.isMatrix?t.size():Jn(t)).map(()=>0),c=t.isMatrix?t.get(l):b2(t,l);a=E5(e,c,l,t)}var f;if(t.isMatrix&&t.dataType!=="mixed"&&t.dataType!==void 0){var d=w5(e,a);f=d!==void 0?d:e}else f=e;return a>=1&&a<=3?{isUnary:a===1,fn:function(){for(var m=arguments.length,g=new Array(m),_=0;_<m;_++)g[_]=arguments[_];return B_(f,g.slice(0,a),n,e.name)}}:{isUnary:!1,fn:function(){for(var m=arguments.length,g=new Array(m),_=0;_<m;_++)g[_]=arguments[_];return B_(f,g,n,e.name)}}}return i===void 0?{isUnary:D5(e),fn:e}:{isUnary:i,fn:e}}function w5(e,t){var n=[];if(Object.entries(e.signatures).forEach(i=>{var[a,l]=i;a.split(",").length===t&&n.push(l)}),n.length===1)return n[0]}function D5(e){if(e.length!==1)return!1;var t=e.toString();if(/arguments/.test(t))return!1;var n=t.match(/\(.*?\)/);return!/\.\.\./.test(n)}function E5(e,t,n,i){for(var a=[t,n,i],l=3;l>0;l--){var c=a.slice(0,l);if(Xh.resolve(e,c)!==null)return l}}function B_(e,t,n,i){try{return e(...t)}catch(a){S5(a,t,n,i)}}function S5(e,t,n,i){var a;if(e instanceof TypeError&&((a=e.data)===null||a===void 0?void 0:a.category)==="wrongType"){var l=[];throw l.push("value: ".concat(Oo(t[0]))),t.length>=2&&l.push("index: ".concat(Oo(t[1]))),t.length>=3&&l.push("array: ".concat(Oo(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(i,"(").concat(l.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(i,": ").concat(e.message))}var C5="DenseMatrix",A5=["Matrix"],N5=Ye(C5,A5,e=>{var{Matrix:t}=e;function n(m,g){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!Zi(g))throw new Error("Invalid datatype: "+g);if(Wt(m))m.type==="DenseMatrix"?(this._data=Ut(m._data),this._size=Ut(m._size),this._datatype=g||m._datatype):(this._data=m.toArray(),this._size=m.size(),this._datatype=g||m._datatype);else if(m&&gn(m.data)&&gn(m.size))this._data=m.data,this._size=m.size,L_(this._data,this._size),this._datatype=g||m.datatype;else if(gn(m))this._data=h(m),this._size=Jn(this._data),L_(this._data,this._size),this._datatype=g;else{if(m)throw new TypeError("Unsupported type of data ("+Oo(m)+")");this._data=[],this._size=[0],this._datatype=g}}n.prototype=new t,n.prototype.createDenseMatrix=function(m,g){return new n(m,g)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Fg(this._data,Oo)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(m,g){return new n(m,g)},n.prototype.subset=function(m,g,_){switch(arguments.length){case 1:return i(this,m);case 2:case 3:return l(this,m,g,_);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(m){return b2(this._data,m)},n.prototype.set=function(m,g,_){if(!gn(m))throw new TypeError("Array expected");if(m.length<this._size.length)throw new Ot(m.length,this._size.length,"<");var x,w,y,E=m.map(function(A){return A+1});d(this,E,_);var D=this._data;for(x=0,w=m.length-1;x<w;x++)y=m[x],hn(y,D.length),D=D[y];return y=m[m.length-1],hn(y,D.length),D[y]=g,this};function i(m,g){if(!Mg(g))throw new TypeError("Invalid index");var _=g.isScalar();if(_)return m.get(g.min());var x=g.size();if(x.length!==m._size.length)throw new Ot(x.length,m._size.length);for(var w=g.min(),y=g.max(),E=0,D=m._size.length;E<D;E++)hn(w[E],m._size[E]),hn(y[E],m._size[E]);var A=new n([]),N=a(m._data,g);return A._size=N.size,A._datatype=m._datatype,A._data=N.data,A}function a(m,g){var _=g.size().length-1,x=Array(_);return{data:w(m),size:x};function w(y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=g.dimension(E);return x[E]=D.size()[0],E<_?D.map(A=>(hn(A,y.length),w(y[A],E+1))).valueOf():D.map(A=>(hn(A,y.length),y[A])).valueOf()}}function l(m,g,_,x){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var w=g.size(),y=g.isScalar(),E;if(Wt(_)?(E=_.size(),_=_.valueOf()):E=Jn(_),y){if(E.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),_,x)}else{if(!Ho(E,w))try{E.length===0?_=I0([_],w):_=I0(_,w),E=Jn(_)}catch{}if(w.length<m._size.length)throw new Ot(w.length,m._size.length,"<");if(E.length<w.length){for(var D=0,A=0;w[D]===1&&E[D]===1;)D++;for(;w[D]===1;)A++,D++;_=p2(_,w.length,A,E)}if(!Ho(w,E))throw new Ot(w,E,">");var N=g.max().map(function(F){return F+1});d(m,N,x),c(m._data,g,_)}return m}function c(m,g,_){var x=g.size().length-1;w(m,_);function w(y,E){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=g.dimension(D);D<x?A.forEach((N,F)=>{hn(N,y.length),w(y[N],E[F[0]],D+1)}):A.forEach((N,F)=>{hn(N,y.length),y[N]=E[F[0]]})}}n.prototype.resize=function(m,g,_){if(!Yh(m))throw new TypeError("Array or Matrix expected");var x=m.valueOf().map(y=>Array.isArray(y)&&y.length===1?y[0]:y),w=_?this.clone():this;return f(w,x,g)};function f(m,g,_){if(g.length===0){for(var x=m._data;gn(x);)x=x[0];return x}return m._size=g.slice(0),m._data=O0(m._data,m._size,_),m}n.prototype.reshape=function(m,g){var _=g?this.clone():this;_._data=d2(_._data,m);var x=_._size.reduce((w,y)=>w*y);return _._size=Lg(m,x),_};function d(m,g,_){for(var x=m._size.slice(0),w=!1;x.length<g.length;)x.push(0),w=!0;for(var y=0,E=g.length;y<E;y++)g[y]>x[y]&&(x[y]=g[y],w=!0);w&&f(m,x,_)}n.prototype.clone=function(){var m=new n({data:Ut(this._data),size:Ut(this._size),datatype:this._datatype});return m},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=this,x=_._size.length-1;if(x<0)return _.clone();var w=ed(m,_,"map",g),y=w.fn,E=_.create(void 0,_._datatype);if(E._size=_._size,g||w.isUnary)return E._data=T(_._data),E;if(x===0){for(var D=_.valueOf(),A=Array(D.length),N=0;N<D.length;N++)A[N]=y(D[N],[N],_);return E._data=A,E}var F=[];return E._data=k(_._data),E;function k(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=Array(R.length);if(j<x)for(var G=0;G<R.length;G++)F[j]=G,O[G]=k(R[G],j+1);else for(var U=0;U<R.length;U++)F[j]=U,O[U]=y(R[U],F.slice(),_);return O}function T(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=Array(R.length);if(j<x)for(var G=0;G<R.length;G++)O[G]=T(R[G],j+1);else for(var U=0;U<R.length;U++)O[U]=y(R[U]);return O}},n.prototype.forEach=function(m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=this,x=_._size.length-1;if(x<0)return;var w=ed(m,_,"map",g),y=w.fn;if(g||w.isUnary){N(_._data);return}if(x===0){for(var E=0;E<_._data.length;E++)y(_._data[E],[E],_);return}var D=[];A(_._data);function A(F){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(k<x)for(var T=0;T<F.length;T++)D[k]=T,A(F[T],k+1);else for(var R=0;R<F.length;R++)D[k]=R,y(F[R],D.slice(),_)}function N(F){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(k<x)for(var T=0;T<F.length;T++)N(F[T],k+1);else for(var R=0;R<F.length;R++)y(F[R])}},n.prototype[Symbol.iterator]=function*(){var m=this._size.length-1;if(!(m<0)){if(m===0){for(var g=0;g<this._data.length;g++)yield{value:this._data[g],index:[g]};return}var _=[],x=function*(y,E){if(E<m)for(var D=0;D<y.length;D++)_[E]=D,yield*x(y[D],E+1);else for(var A=0;A<y.length;A++)_[E]=A,yield{value:y[A],index:_.slice()}};yield*x(this._data,0)}},n.prototype.rows=function(){var m=[],g=this.size();if(g.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var _=this._data;for(var x of _)m.push(new n([x],this._datatype));return m},n.prototype.columns=function(){var m=this,g=[],_=this.size();if(_.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var x=this._data,w=function(D){var A=x.map(N=>[N[D]]);g.push(new n(A,m._datatype))},y=0;y<_[1];y++)w(y);return g},n.prototype.toArray=function(){return Ut(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(m){return Jt(this._data,m)},n.prototype.toString=function(){return Jt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(m){if(m){if(yn(m)&&(m=m.toNumber()),!Xt(m)||!vn(m))throw new TypeError("The parameter k must be an integer number")}else m=0;for(var g=m>0?m:0,_=m<0?-m:0,x=this._size[0],w=this._size[1],y=Math.min(x-_,w-g),E=[],D=0;D<y;D++)E[D]=this._data[D+_][D+g];return new n({data:E,size:[y],datatype:this._datatype})},n.diagonal=function(m,g,_,x){if(!gn(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(R){if(yn(R)&&(R=R.toNumber()),!Xt(R)||!vn(R)||R<1)throw new Error("Size values must be positive integers");return R}),_){if(yn(_)&&(_=_.toNumber()),!Xt(_)||!vn(_))throw new TypeError("The parameter k must be an integer number")}else _=0;var w=_>0?_:0,y=_<0?-_:0,E=m[0],D=m[1],A=Math.min(E-y,D-w),N;if(gn(g)){if(g.length!==A)throw new Error("Invalid value array length");N=function(j){return g[j]}}else if(Wt(g)){var F=g.size();if(F.length!==1||F[0]!==A)throw new Error("Invalid matrix length");N=function(j){return g.get([j])}}else N=function(){return g};x||(x=yn(N(0))?N(0).mul(0):0);var k=[];if(m.length>0){k=O0(k,m,x);for(var T=0;T<A;T++)k[T+y][T+w]=N(T)}return new n({data:k,size:[E,D]})},n.fromJSON=function(m){return new n(m)},n.prototype.swapRows=function(m,g){if(!Xt(m)||!vn(m)||!Xt(g)||!vn(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return hn(m,this._size[0]),hn(g,this._size[0]),n._swapRows(m,g,this._data),this},n._swapRows=function(m,g,_){var x=_[m];_[m]=_[g],_[g]=x};function h(m){return Wt(m)?h(m.valueOf()):gn(m)?m.map(h):m}return n},{isClass:!0});function Zo(e,t,n){if(!n)return Wt(e)?e.map(a=>t(a),!1,!0):F_(e,t,!0);var i=a=>a===0?a:t(a);return Wt(e)?e.map(a=>i(a),!1,!0):F_(e,i,!0)}var R_="isInteger",M5=["typed"],T5=Ye(R_,M5,e=>{var{typed:t}=e;return t(R_,{number:vn,BigNumber:function(i){return i.isInt()},bigint:function(i){return!0},Fraction:function(i){return i.d===1n},"Array | Matrix":t.referToSelf(n=>i=>Zo(i,n))})}),w2="number",Bg="number, number";function D2(e){return Math.abs(e)}D2.signature=w2;function E2(e,t){return e+t}E2.signature=Bg;function S2(e,t){return e-t}S2.signature=Bg;function C2(e,t){return e*t}C2.signature=Bg;function A2(e){return-e}A2.signature=w2;function Id(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),i))}var O_="isZero",k5=["typed","equalScalar"],z5=Ye(O_,k5,e=>{var{typed:t,equalScalar:n}=e;return t(O_,{"number | BigNumber | Complex | Fraction":i=>n(i,0),bigint:i=>i===0n,Unit:t.referToSelf(i=>a=>t.find(i,a.valueType())(a.value)),"Array | Matrix":t.referToSelf(i=>a=>Zo(a,i))})});function L5(e,t,n,i){return ks(e.re,t.re,n,i)&&ks(e.im,t.im,n,i)}var Hd=Ye("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(i,a)=>{if(!i.equalBase(a))throw new Error("Cannot compare units with different base");return t.find(n,[i.valueType(),a.valueType()])(i.value,a.value)})}}),td="equalScalar",F5=["typed","config"],B5=Ye(td,F5,e=>{var{typed:t,config:n}=e,i=Hd({typed:t});return t(td,{"boolean, boolean":function(l,c){return l===c},"number, number":function(l,c){return ks(l,c,n.relTol,n.absTol)},"BigNumber, BigNumber":function(l,c){return l.eq(c)||Id(l,c,n.relTol,n.absTol)},"bigint, bigint":function(l,c){return l===c},"Fraction, Fraction":function(l,c){return l.equals(c)},"Complex, Complex":function(l,c){return L5(l,c,n.relTol,n.absTol)}},i)});Ye(td,["typed","config"],e=>{var{typed:t,config:n}=e;return t(td,{"number, number":function(a,l){return ks(a,l,n.relTol,n.absTol)}})});var R5="SparseMatrix",O5=["typed","equalScalar","Matrix"],j5=Ye(R5,O5,e=>{var{typed:t,equalScalar:n,Matrix:i}=e;function a(y,E){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(E&&!Zi(E))throw new Error("Invalid datatype: "+E);if(Wt(y))l(this,y,E);else if(y&&gn(y.index)&&gn(y.ptr)&&gn(y.size))this._values=y.values,this._index=y.index,this._ptr=y.ptr,this._size=y.size,this._datatype=E||y.datatype;else if(gn(y))c(this,y,E);else{if(y)throw new TypeError("Unsupported type of data ("+Oo(y)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=E}}function l(y,E,D){E.type==="SparseMatrix"?(y._values=E._values?Ut(E._values):void 0,y._index=Ut(E._index),y._ptr=Ut(E._ptr),y._size=Ut(E._size),y._datatype=D||E._datatype):c(y,E.valueOf(),D||E._datatype)}function c(y,E,D){y._values=[],y._index=[],y._ptr=[],y._datatype=D;var A=E.length,N=0,F=n,k=0;if(Zi(D)&&(F=t.find(n,[D,D])||n,k=t.convert(0,D)),A>0){var T=0;do{y._ptr.push(y._index.length);for(var R=0;R<A;R++){var j=E[R];if(gn(j)){if(T===0&&N<j.length&&(N=j.length),T<j.length){var O=j[T];F(O,k)||(y._values.push(O),y._index.push(R))}}else T===0&&N<1&&(N=1),F(j,k)||(y._values.push(j),y._index.push(R))}T++}while(T<N)}y._ptr.push(y._index.length),y._size=[A,N]}a.prototype=new i,a.prototype.createSparseMatrix=function(y,E){return new a(y,E)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return Fg(this._values,Oo)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(y,E){return new a(y,E)},a.prototype.density=function(){var y=this._size[0],E=this._size[1];return y!==0&&E!==0?this._index.length/(y*E):0},a.prototype.subset=function(y,E,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return f(this,y);case 2:case 3:return d(this,y,E,D);default:throw new SyntaxError("Wrong number of arguments")}};function f(y,E){if(!Mg(E))throw new TypeError("Invalid index");var D=E.isScalar();if(D)return y.get(E.min());var A=E.size();if(A.length!==y._size.length)throw new Ot(A.length,y._size.length);var N,F,k,T,R=E.min(),j=E.max();for(N=0,F=y._size.length;N<F;N++)hn(R[N],y._size[N]),hn(j[N],y._size[N]);var O=y._values,G=y._index,U=y._ptr,I=E.dimension(0),W=E.dimension(1),B=[],re=[];I.forEach(function(Q,$){re[Q]=$[0],B[Q]=!0});var K=O?[]:void 0,ee=[],V=[];return W.forEach(function(Q){for(V.push(ee.length),k=U[Q],T=U[Q+1];k<T;k++)N=G[k],B[N]===!0&&(ee.push(re[N]),K&&K.push(O[k]))}),V.push(ee.length),new a({values:K,index:ee,ptr:V,size:A,datatype:y._datatype})}function d(y,E,D,A){if(!E||E.isIndex!==!0)throw new TypeError("Invalid index");var N=E.size(),F=E.isScalar(),k;if(Wt(D)?(k=D.size(),D=D.toArray()):k=Jn(D),F){if(k.length!==0)throw new TypeError("Scalar expected");y.set(E.min(),D,A)}else{if(N.length!==1&&N.length!==2)throw new Ot(N.length,y._size.length,"<");if(k.length<N.length){for(var T=0,R=0;N[T]===1&&k[T]===1;)T++;for(;N[T]===1;)R++,T++;D=p2(D,N.length,R,k)}if(!Ho(N,k))throw new Ot(N,k,">");if(N.length===1){var j=E.dimension(0);j.forEach(function(U,I){hn(U),y.set([U,0],D[I[0]],A)})}else{var O=E.dimension(0),G=E.dimension(1);O.forEach(function(U,I){hn(U),G.forEach(function(W,B){hn(W),y.set([U,W],D[I[0]][B[0]],A)})})}}return y}a.prototype.get=function(y){if(!gn(y))throw new TypeError("Array expected");if(y.length!==this._size.length)throw new Ot(y.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var E=y[0],D=y[1];hn(E,this._size[0]),hn(D,this._size[1]);var A=h(E,this._ptr[D],this._ptr[D+1],this._index);return A<this._ptr[D+1]&&this._index[A]===E?this._values[A]:0},a.prototype.set=function(y,E,D){if(!gn(y))throw new TypeError("Array expected");if(y.length!==this._size.length)throw new Ot(y.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var A=y[0],N=y[1],F=this._size[0],k=this._size[1],T=n,R=0;Zi(this._datatype)&&(T=t.find(n,[this._datatype,this._datatype])||n,R=t.convert(0,this._datatype)),(A>F-1||N>k-1)&&(_(this,Math.max(A+1,F),Math.max(N+1,k),D),F=this._size[0],k=this._size[1]),hn(A,F),hn(N,k);var j=h(A,this._ptr[N],this._ptr[N+1],this._index);return j<this._ptr[N+1]&&this._index[j]===A?T(E,R)?m(j,N,this._values,this._index,this._ptr):this._values[j]=E:T(E,R)||g(j,A,N,E,this._values,this._index,this._ptr),this};function h(y,E,D,A){if(D-E===0)return D;for(var N=E;N<D;N++)if(A[N]===y)return N;return E}function m(y,E,D,A,N){D.splice(y,1),A.splice(y,1);for(var F=E+1;F<N.length;F++)N[F]--}function g(y,E,D,A,N,F,k){N.splice(y,0,A),F.splice(y,0,E);for(var T=D+1;T<k.length;T++)k[T]++}a.prototype.resize=function(y,E,D){if(!Yh(y))throw new TypeError("Array or Matrix expected");var A=y.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(A.length!==2)throw new Error("Only two dimensions matrix are supported");A.forEach(function(F){if(!Xt(F)||!vn(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jt(A)+")")});var N=D?this.clone():this;return _(N,A[0],A[1],E)};function _(y,E,D,A){var N=A||0,F=n,k=0;Zi(y._datatype)&&(F=t.find(n,[y._datatype,y._datatype])||n,k=t.convert(0,y._datatype),N=t.convert(N,y._datatype));var T=!F(N,k),R=y._size[0],j=y._size[1],O,G,U;if(D>j){for(G=j;G<D;G++)if(y._ptr[G]=y._values.length,T)for(O=0;O<R;O++)y._values.push(N),y._index.push(O);y._ptr[D]=y._values.length}else D<j&&(y._ptr.splice(D+1,j-D),y._values.splice(y._ptr[D],y._values.length),y._index.splice(y._ptr[D],y._index.length));if(j=D,E>R){if(T){var I=0;for(G=0;G<j;G++){y._ptr[G]=y._ptr[G]+I,U=y._ptr[G+1]+I;var W=0;for(O=R;O<E;O++,W++)y._values.splice(U+W,0,N),y._index.splice(U+W,0,O),I++}y._ptr[j]=y._values.length}}else if(E<R){var B=0;for(G=0;G<j;G++){y._ptr[G]=y._ptr[G]-B;var re=y._ptr[G],K=y._ptr[G+1]-B;for(U=re;U<K;U++)O=y._index[U],O>E-1&&(y._values.splice(U,1),y._index.splice(U,1),B++)}y._ptr[G]=y._values.length}return y._size[0]=E,y._size[1]=D,y}a.prototype.reshape=function(y,E){if(!gn(y))throw new TypeError("Array expected");if(y.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");y.forEach(function(Q){if(!Xt(Q)||!vn(Q)||Q<=-2||Q===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Jt(y)+")")});var D=this._size[0]*this._size[1];y=Lg(y,D);var A=y[0]*y[1];if(D!==A)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var N=E?this.clone():this;if(this._size[0]===y[0]&&this._size[1]===y[1])return N;for(var F=[],k=0;k<N._ptr.length;k++)for(var T=0;T<N._ptr[k+1]-N._ptr[k];T++)F.push(k);for(var R=N._values.slice(),j=N._index.slice(),O=0;O<N._index.length;O++){var G=j[O],U=F[O],I=G*N._size[1]+U;F[O]=I%y[1],j[O]=Math.floor(I/y[1])}N._values.length=0,N._index.length=0,N._ptr.length=y[1]+1,N._size=y.slice();for(var W=0;W<N._ptr.length;W++)N._ptr[W]=0;for(var B=0;B<R.length;B++){var re=j[B],K=F[B],ee=R[B],V=h(re,N._ptr[K],N._ptr[K+1],N._index);g(V,re,K,ee,N._values,N._index,N._ptr)}return N},a.prototype.clone=function(){var y=new a({values:this._values?Ut(this._values):void 0,index:Ut(this._index),ptr:Ut(this._ptr),size:Ut(this._size),datatype:this._datatype});return y},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(y,E){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,A=this._size[0],N=this._size[1],F=ed(y,D,"map"),k=function(R,j,O){return F.fn(R,[j,O],D)};return x(this,0,A-1,0,N-1,k,E)};function x(y,E,D,A,N,F,k){var T=[],R=[],j=[],O=n,G=0;Zi(y._datatype)&&(O=t.find(n,[y._datatype,y._datatype])||n,G=t.convert(0,y._datatype));for(var U=function(se,ce,pe){var _e=F(se,ce,pe);O(_e,G)||(T.push(_e),R.push(ce))},I=A;I<=N;I++){j.push(T.length);var W=y._ptr[I],B=y._ptr[I+1];if(k)for(var re=W;re<B;re++){var K=y._index[re];K>=E&&K<=D&&U(y._values[re],K-E,I-A)}else{for(var ee={},V=W;V<B;V++){var Q=y._index[V];ee[Q]=y._values[V]}for(var $=E;$<=D;$++){var q=$ in ee?ee[$]:0;U(q,$-E,I-A)}}}return j.push(T.length),new a({values:T,index:R,ptr:j,size:[D-E+1,N-A+1]})}a.prototype.forEach=function(y,E){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,A=this._size[0],N=this._size[1],F=ed(y,D,"forEach"),k=0;k<N;k++){var T=this._ptr[k],R=this._ptr[k+1];if(E)for(var j=T;j<R;j++){var O=this._index[j];F.fn(this._values[j],[O,k],D)}else{for(var G={},U=T;U<R;U++){var I=this._index[U];G[I]=this._values[U]}for(var W=0;W<A;W++){var B=W in G?G[W]:0;F.fn(B,[W,k],D)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var y=this._size[1],E=0;E<y;E++)for(var D=this._ptr[E],A=this._ptr[E+1],N=D;N<A;N++){var F=this._index[N];yield{value:this._values[N],index:[F,E]}}},a.prototype.toArray=function(){return w(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return w(this._values,this._index,this._ptr,this._size,!1)};function w(y,E,D,A,N){var F=A[0],k=A[1],T=[],R,j;for(R=0;R<F;R++)for(T[R]=[],j=0;j<k;j++)T[R][j]=0;for(j=0;j<k;j++)for(var O=D[j],G=D[j+1],U=O;U<G;U++)R=E[U],T[R][j]=y?N?Ut(y[U]):y[U]:1;return T}return a.prototype.format=function(y){for(var E=this._size[0],D=this._size[1],A=this.density(),N="Sparse Matrix ["+Jt(E,y)+" x "+Jt(D,y)+"] density: "+Jt(A,y)+`
`,F=0;F<D;F++)for(var k=this._ptr[F],T=this._ptr[F+1],R=k;R<T;R++){var j=this._index[R];N+=`
    (`+Jt(j,y)+", "+Jt(F,y)+") ==> "+(this._values?Jt(this._values[R],y):"X")}return N},a.prototype.toString=function(){return Jt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(y){if(y){if(yn(y)&&(y=y.toNumber()),!Xt(y)||!vn(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var E=y>0?y:0,D=y<0?-y:0,A=this._size[0],N=this._size[1],F=Math.min(A-D,N-E),k=[],T=[],R=[];R[0]=0;for(var j=E;j<N&&k.length<F;j++)for(var O=this._ptr[j],G=this._ptr[j+1],U=O;U<G;U++){var I=this._index[U];if(I===j-E+D){k.push(this._values[U]),T[k.length-1]=I-D;break}}return R.push(k.length),new a({values:k,index:T,ptr:R,size:[F,1]})},a.fromJSON=function(y){return new a(y)},a.diagonal=function(y,E,D,A,N){if(!gn(y))throw new TypeError("Array expected, size parameter");if(y.length!==2)throw new Error("Only two dimensions matrix are supported");if(y=y.map(function(Q){if(yn(Q)&&(Q=Q.toNumber()),!Xt(Q)||!vn(Q)||Q<1)throw new Error("Size values must be positive integers");return Q}),D){if(yn(D)&&(D=D.toNumber()),!Xt(D)||!vn(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var F=n,k=0;Zi(N)&&(F=t.find(n,[N,N])||n,k=t.convert(0,N));var T=D>0?D:0,R=D<0?-D:0,j=y[0],O=y[1],G=Math.min(j-R,O-T),U;if(gn(E)){if(E.length!==G)throw new Error("Invalid value array length");U=function($){return E[$]}}else if(Wt(E)){var I=E.size();if(I.length!==1||I[0]!==G)throw new Error("Invalid matrix length");U=function($){return E.get([$])}}else U=function(){return E};for(var W=[],B=[],re=[],K=0;K<O;K++){re.push(W.length);var ee=K-T;if(ee>=0&&ee<G){var V=U(ee);F(V,k)||(B.push(ee+R),W.push(V))}}return re.push(W.length),new a({values:W,index:B,ptr:re,size:[j,O]})},a.prototype.swapRows=function(y,E){if(!Xt(y)||!vn(y)||!Xt(E)||!vn(E))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return hn(y,this._size[0]),hn(E,this._size[0]),a._swapRows(y,E,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(y,E,D,A,N){for(var F=A[y],k=A[y+1],T=F;T<k;T++)N(D[T],E[T])},a._swapRows=function(y,E,D,A,N,F){for(var k=0;k<D;k++){var T=F[k],R=F[k+1],j=h(y,T,R,N),O=h(E,T,R,N);if(j<R&&O<R&&N[j]===y&&N[O]===E){if(A){var G=A[j];A[j]=A[O],A[O]=G}continue}if(j<R&&N[j]===y&&(O>=R||N[O]!==E)){var U=A?A[j]:void 0;N.splice(O,0,E),A&&A.splice(O,0,U),N.splice(O<=j?j+1:j,1),A&&A.splice(O<=j?j+1:j,1);continue}if(O<R&&N[O]===E&&(j>=R||N[j]!==y)){var I=A?A[O]:void 0;N.splice(j,0,y),A&&A.splice(j,0,I),N.splice(j<=O?O+1:O,1),A&&A.splice(j<=O?O+1:O,1)}}},a},{isClass:!0}),P5="number",I5=["typed"];function H5(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],i=t[2],a=t[3];return{input:e,radix:n,integerPart:i,fractionalPart:a}}else return null}function G5(e){for(var t=parseInt(e.integerPart,e.radix),n=0,i=0;i<e.fractionalPart.length;i++){var a=parseInt(e.fractionalPart[i],e.radix);n+=a/Math.pow(e.radix,i+1)}var l=t+n;if(isNaN(l))throw new SyntaxError('String "'+e.input+'" is not a valid number');return l}var U5=Ye(P5,I5,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var l=H5(a);if(l)return G5(l);var c=0,f=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);f&&(c=Number(f[2]),a=f[1]);var d=Number(a);if(isNaN(d))throw new SyntaxError('String "'+a+'" is not a valid number');if(f){if(d>2**c-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));d>=2**(c-1)&&(d=d-2**c)}return d},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:t.referToSelf(i=>a=>{var l=a.clone();return l.value=i(a.value),l}),null:function(a){return 0},"Unit, string | Unit":function(a,l){return a.toNumber(l)},"Array | Matrix":t.referToSelf(i=>a=>Zo(a,i))});return n.fromJSON=function(i){return parseFloat(i.value)},n}),$5="bignumber",Z5=["typed","BigNumber"],K5=Ye($5,Z5,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(a){return new n(a+"")},string:function(a){var l=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(l){var c=l[2],f=n(l[1]),d=new n(2).pow(Number(c));if(f.gt(d.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var h=new n(2).pow(Number(c)-1);return f.gte(h)?f.sub(d):f}return new n(a)},BigNumber:function(a){return a},bigint:function(a){return new n(a.toString())},Unit:t.referToSelf(i=>a=>{var l=a.clone();return l.value=i(a.value),l}),Fraction:function(a){return new n(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new n(0)},"Array | Matrix":t.referToSelf(i=>a=>Zo(a,i))})}),q5="fraction",V5=["typed","Fraction"],Y5=Ye(q5,V5,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new n(a)},string:function(a){return new n(a)},"number, number":function(a,l){return new n(a,l)},"bigint, bigint":function(a,l){return new n(a,l)},null:function(a){return new n(0)},BigNumber:function(a){return new n(a.toString())},bigint:function(a){return new n(a.toString())},Fraction:function(a){return a},Unit:t.referToSelf(i=>a=>{var l=a.clone();return l.value=i(a.value),l}),Object:function(a){return new n(a)},"Array | Matrix":t.referToSelf(i=>a=>Zo(a,i))})}),j_="matrix",X5=["typed","Matrix","DenseMatrix","SparseMatrix"],W5=Ye(j_,X5,e=>{var{typed:t,Matrix:n,DenseMatrix:i,SparseMatrix:a}=e;return t(j_,{"":function(){return l([])},string:function(f){return l([],f)},"string, string":function(f,d){return l([],f,d)},Array:function(f){return l(f)},Matrix:function(f){return l(f,f.storage())},"Array | Matrix, string":l,"Array | Matrix, string, string":l});function l(c,f,d){if(f==="dense"||f==="default"||f===void 0)return new i(c,d);if(f==="sparse")return new a(c,d);throw new TypeError("Unknown matrix type "+JSON.stringify(f)+".")}}),P_="unaryMinus",Q5=["typed"],J5=Ye(P_,Q5,e=>{var{typed:t}=e;return t(P_,{number:A2,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>i=>{var a=i.clone();return a.value=t.find(n,a.valueType())(i.value),a}),"Array | Matrix":t.referToSelf(n=>i=>Zo(i,n,!0))})}),I_="abs",e8=["typed"],t8=Ye(I_,e8,e=>{var{typed:t}=e;return t(I_,{number:D2,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>i=>Zo(i,n,!0))})}),H_="addScalar",n8=["typed"],r8=Ye(H_,n8,e=>{var{typed:t}=e;return t(H_,{"number, number":E2,"Complex, Complex":function(i,a){return i.add(a)},"BigNumber, BigNumber":function(i,a){return i.plus(a)},"bigint, bigint":function(i,a){return i+a},"Fraction, Fraction":function(i,a){return i.add(a)},"Unit, Unit":t.referToSelf(n=>(i,a)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(a))throw new Error("Units do not match");var l=i.clone();return l.value=t.find(n,[l.valueType(),a.valueType()])(l.value,a.value),l.fixPrefix=!1,l})})}),G_="subtractScalar",i8=["typed"],a8=Ye(G_,i8,e=>{var{typed:t}=e;return t(G_,{"number, number":S2,"Complex, Complex":function(i,a){return i.sub(a)},"BigNumber, BigNumber":function(i,a){return i.minus(a)},"bigint, bigint":function(i,a){return i-a},"Fraction, Fraction":function(i,a){return i.sub(a)},"Unit, Unit":t.referToSelf(n=>(i,a)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(a))throw new Error("Units do not match");var l=i.clone();return l.value=t.find(n,[l.valueType(),a.valueType()])(l.value,a.value),l.fixPrefix=!1,l})})}),o8="matAlgo11xS0s",s8=["typed","equalScalar"],N2=Ye(o8,s8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c,f){var d=a._values,h=a._index,m=a._ptr,g=a._size,_=a._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var x=g[0],w=g[1],y,E=n,D=0,A=c;typeof _=="string"&&(y=_,E=t.find(n,[y,y]),D=t.convert(0,y),l=t.convert(l,y),A=t.find(c,[y,y]));for(var N=[],F=[],k=[],T=0;T<w;T++){k[T]=F.length;for(var R=m[T],j=m[T+1],O=R;O<j;O++){var G=h[O],U=f?A(l,d[O]):A(d[O],l);E(U,D)||(F.push(G),N.push(U))}}return k[w]=F.length,a.createSparseMatrix({values:N,index:F,ptr:k,size:[x,w],datatype:y})}}),l8="matAlgo12xSfs",u8=["typed","DenseMatrix"],uu=Ye(l8,u8,e=>{var{typed:t,DenseMatrix:n}=e;return function(a,l,c,f){var d=a._values,h=a._index,m=a._ptr,g=a._size,_=a._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var x=g[0],w=g[1],y,E=c;typeof _=="string"&&(y=_,l=t.convert(l,y),E=t.find(c,[y,y]));for(var D=[],A=[],N=[],F=0;F<w;F++){for(var k=F+1,T=m[F],R=m[F+1],j=T;j<R;j++){var O=h[j];A[O]=d[j],N[O]=k}for(var G=0;G<x;G++)F===0&&(D[G]=[]),N[G]===k?D[G][F]=f?E(l,A[G]):E(A[G],l):D[G][F]=f?E(l,0):E(0,l)}return new n({data:D,size:[x,w],datatype:y})}}),c8="matAlgo14xDs",f8=["typed"],M2=Ye(c8,f8,e=>{var{typed:t}=e;return function(a,l,c,f){var d=a._data,h=a._size,m=a._datatype,g,_=c;typeof m=="string"&&(g=m,l=t.convert(l,g),_=t.find(c,[g,g]));var x=h.length>0?n(_,0,h,h[0],d,l,f):[];return a.createDenseMatrix({data:x,size:Ut(h),datatype:g})};function n(i,a,l,c,f,d,h){var m=[];if(a===l.length-1)for(var g=0;g<c;g++)m[g]=h?i(d,f[g]):i(f[g],d);else for(var _=0;_<c;_++)m[_]=n(i,a+1,l,l[a+1],f[_],d,h);return m}}),h8="matAlgo02xDS0",d8=["typed","equalScalar"],m8=Ye(h8,d8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c,f){var d=a._data,h=a._size,m=a._datatype||a.getDataType(),g=l._values,_=l._index,x=l._ptr,w=l._size,y=l._datatype||l._data===void 0?l._datatype:l.getDataType();if(h.length!==w.length)throw new Ot(h.length,w.length);if(h[0]!==w[0]||h[1]!==w[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+w+")");if(!g)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var E=h[0],D=h[1],A,N=n,F=0,k=c;typeof m=="string"&&m===y&&m!=="mixed"&&(A=m,N=t.find(n,[A,A]),F=t.convert(0,A),k=t.find(c,[A,A]));for(var T=[],R=[],j=[],O=0;O<D;O++){j[O]=R.length;for(var G=x[O],U=x[O+1],I=G;I<U;I++){var W=_[I],B=f?k(g[I],d[W][O]):k(d[W][O],g[I]);N(B,F)||(R.push(W),T.push(B))}}return j[D]=R.length,l.createSparseMatrix({values:T,index:R,ptr:j,size:[E,D],datatype:m===a._datatype&&y===l._datatype?A:void 0})}}),p8="matAlgo03xDSf",g8=["typed"],cu=Ye(p8,g8,e=>{var{typed:t}=e;return function(i,a,l,c){var f=i._data,d=i._size,h=i._datatype||i.getDataType(),m=a._values,g=a._index,_=a._ptr,x=a._size,w=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(d.length!==x.length)throw new Ot(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");if(!m)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=d[0],E=d[1],D,A=0,N=l;typeof h=="string"&&h===w&&h!=="mixed"&&(D=h,A=t.convert(0,D),N=t.find(l,[D,D]));for(var F=[],k=0;k<y;k++)F[k]=[];for(var T=[],R=[],j=0;j<E;j++){for(var O=j+1,G=_[j],U=_[j+1],I=G;I<U;I++){var W=g[I];T[W]=c?N(m[I],f[W][j]):N(f[W][j],m[I]),R[W]=O}for(var B=0;B<y;B++)R[B]===O?F[B][j]=T[B]:F[B][j]=c?N(A,f[B][j]):N(f[B][j],A)}return i.createDenseMatrix({data:F,size:[y,E],datatype:h===i._datatype&&w===a._datatype?D:void 0})}}),v8="matAlgo05xSfSf",y8=["typed","equalScalar"],_8=Ye(v8,y8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c){var f=a._values,d=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType(),_=l._values,x=l._index,w=l._ptr,y=l._size,E=l._datatype||l._data===void 0?l._datatype:l.getDataType();if(m.length!==y.length)throw new Ot(m.length,y.length);if(m[0]!==y[0]||m[1]!==y[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+y+")");var D=m[0],A=m[1],N,F=n,k=0,T=c;typeof g=="string"&&g===E&&g!=="mixed"&&(N=g,F=t.find(n,[N,N]),k=t.convert(0,N),T=t.find(c,[N,N]));var R=f&&_?[]:void 0,j=[],O=[],G=R?[]:void 0,U=R?[]:void 0,I=[],W=[],B,re,K,ee;for(re=0;re<A;re++){O[re]=j.length;var V=re+1;for(K=h[re],ee=h[re+1];K<ee;K++)B=d[K],j.push(B),I[B]=V,G&&(G[B]=f[K]);for(K=w[re],ee=w[re+1];K<ee;K++)B=x[K],I[B]!==V&&j.push(B),W[B]=V,U&&(U[B]=_[K]);if(R)for(K=O[re];K<j.length;){B=j[K];var Q=I[B],$=W[B];if(Q===V||$===V){var q=Q===V?G[B]:k,ne=$===V?U[B]:k,se=T(q,ne);F(se,k)?j.splice(K,1):(R.push(se),K++)}}}return O[A]=j.length,a.createSparseMatrix({values:R,index:j,ptr:O,size:[D,A],datatype:g===a._datatype&&E===l._datatype?N:void 0})}}),x8="matAlgo13xDD",b8=["typed"],w8=Ye(x8,b8,e=>{var{typed:t}=e;return function(a,l,c){var f=a._data,d=a._size,h=a._datatype,m=l._data,g=l._size,_=l._datatype,x=[];if(d.length!==g.length)throw new Ot(d.length,g.length);for(var w=0;w<d.length;w++){if(d[w]!==g[w])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+g+")");x[w]=d[w]}var y,E=c;typeof h=="string"&&h===_&&(y=h,E=t.find(c,[y,y]));var D=x.length>0?n(E,0,x,x[0],f,m):[];return a.createDenseMatrix({data:D,size:x,datatype:y})};function n(i,a,l,c,f,d){var h=[];if(a===l.length-1)for(var m=0;m<c;m++)h[m]=i(f[m],d[m]);else for(var g=0;g<c;g++)h[g]=n(i,a+1,l,l[a+1],f[g],d[g]);return h}});function jn(e,t){if(Ho(e.size(),t.size()))return[e,t];var n=_2(e.size(),t.size());return[e,t].map(i=>D8(i,n))}function D8(e,t){return Ho(e.size(),t)?e:e.create(I0(e.valueOf(),t),e.datatype())}var E8="matrixAlgorithmSuite",S8=["typed","matrix"],js=Ye(E8,S8,e=>{var{typed:t,matrix:n}=e,i=w8({typed:t}),a=M2({typed:t});return function(c){var f=c.elop,d=c.SD||c.DS,h;f?(h={"DenseMatrix, DenseMatrix":(x,w)=>i(...jn(x,w),f),"Array, Array":(x,w)=>i(...jn(n(x),n(w)),f).valueOf(),"Array, DenseMatrix":(x,w)=>i(...jn(n(x),w),f),"DenseMatrix, Array":(x,w)=>i(...jn(x,n(w)),f)},c.SS&&(h["SparseMatrix, SparseMatrix"]=(x,w)=>c.SS(...jn(x,w),f,!1)),c.DS&&(h["DenseMatrix, SparseMatrix"]=(x,w)=>c.DS(...jn(x,w),f,!1),h["Array, SparseMatrix"]=(x,w)=>c.DS(...jn(n(x),w),f,!1)),d&&(h["SparseMatrix, DenseMatrix"]=(x,w)=>d(...jn(w,x),f,!0),h["SparseMatrix, Array"]=(x,w)=>d(...jn(n(w),x),f,!0))):(h={"DenseMatrix, DenseMatrix":t.referToSelf(x=>(w,y)=>i(...jn(w,y),x)),"Array, Array":t.referToSelf(x=>(w,y)=>i(...jn(n(w),n(y)),x).valueOf()),"Array, DenseMatrix":t.referToSelf(x=>(w,y)=>i(...jn(n(w),y),x)),"DenseMatrix, Array":t.referToSelf(x=>(w,y)=>i(...jn(w,n(y)),x))},c.SS&&(h["SparseMatrix, SparseMatrix"]=t.referToSelf(x=>(w,y)=>c.SS(...jn(w,y),x,!1))),c.DS&&(h["DenseMatrix, SparseMatrix"]=t.referToSelf(x=>(w,y)=>c.DS(...jn(w,y),x,!1)),h["Array, SparseMatrix"]=t.referToSelf(x=>(w,y)=>c.DS(...jn(n(w),y),x,!1))),d&&(h["SparseMatrix, DenseMatrix"]=t.referToSelf(x=>(w,y)=>d(...jn(y,w),x,!0)),h["SparseMatrix, Array"]=t.referToSelf(x=>(w,y)=>d(...jn(n(y),w),x,!0))));var m=c.scalar||"any",g=c.Ds||c.Ss;g&&(f?(h["DenseMatrix,"+m]=(x,w)=>a(x,w,f,!1),h[m+", DenseMatrix"]=(x,w)=>a(w,x,f,!0),h["Array,"+m]=(x,w)=>a(n(x),w,f,!1).valueOf(),h[m+", Array"]=(x,w)=>a(n(w),x,f,!0).valueOf()):(h["DenseMatrix,"+m]=t.referToSelf(x=>(w,y)=>a(w,y,x,!1)),h[m+", DenseMatrix"]=t.referToSelf(x=>(w,y)=>a(y,w,x,!0)),h["Array,"+m]=t.referToSelf(x=>(w,y)=>a(n(w),y,x,!1).valueOf()),h[m+", Array"]=t.referToSelf(x=>(w,y)=>a(n(y),w,x,!0).valueOf())));var _=c.sS!==void 0?c.sS:c.Ss;return f?(c.Ss&&(h["SparseMatrix,"+m]=(x,w)=>c.Ss(x,w,f,!1)),_&&(h[m+", SparseMatrix"]=(x,w)=>_(w,x,f,!0))):(c.Ss&&(h["SparseMatrix,"+m]=t.referToSelf(x=>(w,y)=>c.Ss(w,y,x,!1))),_&&(h[m+", SparseMatrix"]=t.referToSelf(x=>(w,y)=>_(y,w,x,!0)))),f&&f.signatures&&GC(h,f.signatures),h}}),C8="matAlgo01xDSid",A8=["typed"],T2=Ye(C8,A8,e=>{var{typed:t}=e;return function(i,a,l,c){var f=i._data,d=i._size,h=i._datatype||i.getDataType(),m=a._values,g=a._index,_=a._ptr,x=a._size,w=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(d.length!==x.length)throw new Ot(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");if(!m)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=d[0],E=d[1],D=typeof h=="string"&&h!=="mixed"&&h===w?h:void 0,A=D?t.find(l,[D,D]):l,N,F,k=[];for(N=0;N<y;N++)k[N]=[];var T=[],R=[];for(F=0;F<E;F++){for(var j=F+1,O=_[F],G=_[F+1],U=O;U<G;U++)N=g[U],T[N]=c?A(m[U],f[N][F]):A(f[N][F],m[U]),R[N]=j;for(N=0;N<y;N++)R[N]===j?k[N][F]=T[N]:k[N][F]=f[N][F]}return i.createDenseMatrix({data:k,size:[y,E],datatype:h===i._datatype&&w===a._datatype?D:void 0})}}),N8="matAlgo04xSidSid",M8=["typed","equalScalar"],T8=Ye(N8,M8,e=>{var{typed:t,equalScalar:n}=e;return function(a,l,c){var f=a._values,d=a._index,h=a._ptr,m=a._size,g=a._datatype||a._data===void 0?a._datatype:a.getDataType(),_=l._values,x=l._index,w=l._ptr,y=l._size,E=l._datatype||l._data===void 0?l._datatype:l.getDataType();if(m.length!==y.length)throw new Ot(m.length,y.length);if(m[0]!==y[0]||m[1]!==y[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+y+")");var D=m[0],A=m[1],N,F=n,k=0,T=c;typeof g=="string"&&g===E&&g!=="mixed"&&(N=g,F=t.find(n,[N,N]),k=t.convert(0,N),T=t.find(c,[N,N]));var R=f&&_?[]:void 0,j=[],O=[],G=f&&_?[]:void 0,U=f&&_?[]:void 0,I=[],W=[],B,re,K,ee,V;for(re=0;re<A;re++){O[re]=j.length;var Q=re+1;for(ee=h[re],V=h[re+1],K=ee;K<V;K++)B=d[K],j.push(B),I[B]=Q,G&&(G[B]=f[K]);for(ee=w[re],V=w[re+1],K=ee;K<V;K++)if(B=x[K],I[B]===Q){if(G){var $=T(G[B],_[K]);F($,k)?I[B]=null:G[B]=$}}else j.push(B),W[B]=Q,U&&(U[B]=_[K]);if(G&&U)for(K=O[re];K<j.length;)B=j[K],I[B]===Q?(R[K]=G[B],K++):W[B]===Q?(R[K]=U[B],K++):j.splice(K,1)}return O[A]=j.length,a.createSparseMatrix({values:R,index:j,ptr:O,size:[D,A],datatype:g===a._datatype&&E===l._datatype?N:void 0})}}),k8="matAlgo10xSids",z8=["typed","DenseMatrix"],k2=Ye(k8,z8,e=>{var{typed:t,DenseMatrix:n}=e;return function(a,l,c,f){var d=a._values,h=a._index,m=a._ptr,g=a._size,_=a._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var x=g[0],w=g[1],y,E=c;typeof _=="string"&&(y=_,l=t.convert(l,y),E=t.find(c,[y,y]));for(var D=[],A=[],N=[],F=0;F<w;F++){for(var k=F+1,T=m[F],R=m[F+1],j=T;j<R;j++){var O=h[j];A[O]=d[j],N[O]=k}for(var G=0;G<x;G++)F===0&&(D[G]=[]),N[G]===k?D[G][F]=f?E(l,A[G]):E(A[G],l):D[G][F]=l}return new n({data:D,size:[x,w],datatype:y})}}),L8="multiplyScalar",F8=["typed"],B8=Ye(L8,F8,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":C2,"Complex, Complex":function(i,a){return i.mul(a)},"BigNumber, BigNumber":function(i,a){return i.times(a)},"bigint, bigint":function(i,a){return i*a},"Fraction, Fraction":function(i,a){return i.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(n,i)=>i.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,i)=>n.multiply(i)})}),U_="multiply",R8=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],O8=Ye(U_,R8,e=>{var{typed:t,matrix:n,addScalar:i,multiplyScalar:a,equalScalar:l,dot:c}=e,f=N2({typed:t,equalScalar:l}),d=M2({typed:t});function h(k,T){switch(k.length){case 1:switch(T.length){case 1:if(k[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(k[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+k[0]+") must match Matrix rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;case 2:switch(T.length){case 1:if(k[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+k[1]+") must match Vector length ("+T[0]+")");break;case 2:if(k[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+k[1]+") must match Matrix B rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+k.length+" dimensions)")}}function m(k,T,R){if(R===0)throw new Error("Cannot multiply two empty vectors");return c(k,T)}function g(k,T){if(T.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return _(k,T)}function _(k,T){var R=k._data,j=k._size,O=k._datatype||k.getDataType(),G=T._data,U=T._size,I=T._datatype||T.getDataType(),W=j[0],B=U[1],re,K=i,ee=a;O&&I&&O===I&&typeof O=="string"&&O!=="mixed"&&(re=O,K=t.find(i,[re,re]),ee=t.find(a,[re,re]));for(var V=[],Q=0;Q<B;Q++){for(var $=ee(R[0],G[0][Q]),q=1;q<W;q++)$=K($,ee(R[q],G[q][Q]));V[Q]=$}return k.createDenseMatrix({data:V,size:[B],datatype:O===k._datatype&&I===T._datatype?re:void 0})}var x=t("_multiplyMatrixVector",{"DenseMatrix, any":y,"SparseMatrix, any":A}),w=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":E,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":N,"SparseMatrix, SparseMatrix":F});function y(k,T){var R=k._data,j=k._size,O=k._datatype||k.getDataType(),G=T._data,U=T._datatype||T.getDataType(),I=j[0],W=j[1],B,re=i,K=a;O&&U&&O===U&&typeof O=="string"&&O!=="mixed"&&(B=O,re=t.find(i,[B,B]),K=t.find(a,[B,B]));for(var ee=[],V=0;V<I;V++){for(var Q=R[V],$=K(Q[0],G[0]),q=1;q<W;q++)$=re($,K(Q[q],G[q]));ee[V]=$}return k.createDenseMatrix({data:ee,size:[I],datatype:O===k._datatype&&U===T._datatype?B:void 0})}function E(k,T){var R=k._data,j=k._size,O=k._datatype||k.getDataType(),G=T._data,U=T._size,I=T._datatype||T.getDataType(),W=j[0],B=j[1],re=U[1],K,ee=i,V=a;O&&I&&O===I&&typeof O=="string"&&O!=="mixed"&&O!=="mixed"&&(K=O,ee=t.find(i,[K,K]),V=t.find(a,[K,K]));for(var Q=[],$=0;$<W;$++){var q=R[$];Q[$]=[];for(var ne=0;ne<re;ne++){for(var se=V(q[0],G[0][ne]),ce=1;ce<B;ce++)se=ee(se,V(q[ce],G[ce][ne]));Q[$][ne]=se}}return k.createDenseMatrix({data:Q,size:[W,re],datatype:O===k._datatype&&I===T._datatype?K:void 0})}function D(k,T){var R=k._data,j=k._size,O=k._datatype||k.getDataType(),G=T._values,U=T._index,I=T._ptr,W=T._size,B=T._datatype||T._data===void 0?T._datatype:T.getDataType();if(!G)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var re=j[0],K=W[1],ee,V=i,Q=a,$=l,q=0;O&&B&&O===B&&typeof O=="string"&&O!=="mixed"&&(ee=O,V=t.find(i,[ee,ee]),Q=t.find(a,[ee,ee]),$=t.find(l,[ee,ee]),q=t.convert(0,ee));for(var ne=[],se=[],ce=[],pe=T.createSparseMatrix({values:ne,index:se,ptr:ce,size:[re,K],datatype:O===k._datatype&&B===T._datatype?ee:void 0}),_e=0;_e<K;_e++){ce[_e]=se.length;var ze=I[_e],ke=I[_e+1];if(ke>ze)for(var Ie=0,Ze=0;Ze<re;Ze++){for(var Xe=Ze+1,$e=void 0,Ke=ze;Ke<ke;Ke++){var H=U[Ke];Ie!==Xe?($e=Q(R[Ze][H],G[Ke]),Ie=Xe):$e=V($e,Q(R[Ze][H],G[Ke]))}Ie===Xe&&!$($e,q)&&(se.push(Ze),ne.push($e))}}return ce[K]=se.length,pe}function A(k,T){var R=k._values,j=k._index,O=k._ptr,G=k._datatype||k._data===void 0?k._datatype:k.getDataType();if(!R)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var U=T._data,I=T._datatype||T.getDataType(),W=k._size[0],B=T._size[0],re=[],K=[],ee=[],V,Q=i,$=a,q=l,ne=0;G&&I&&G===I&&typeof G=="string"&&G!=="mixed"&&(V=G,Q=t.find(i,[V,V]),$=t.find(a,[V,V]),q=t.find(l,[V,V]),ne=t.convert(0,V));var se=[],ce=[];ee[0]=0;for(var pe=0;pe<B;pe++){var _e=U[pe];if(!q(_e,ne))for(var ze=O[pe],ke=O[pe+1],Ie=ze;Ie<ke;Ie++){var Ze=j[Ie];ce[Ze]?se[Ze]=Q(se[Ze],$(_e,R[Ie])):(ce[Ze]=!0,K.push(Ze),se[Ze]=$(_e,R[Ie]))}}for(var Xe=K.length,$e=0;$e<Xe;$e++){var Ke=K[$e];re[$e]=se[Ke]}return ee[1]=K.length,k.createSparseMatrix({values:re,index:K,ptr:ee,size:[W,1],datatype:G===k._datatype&&I===T._datatype?V:void 0})}function N(k,T){var R=k._values,j=k._index,O=k._ptr,G=k._datatype||k._data===void 0?k._datatype:k.getDataType();if(!R)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var U=T._data,I=T._datatype||T.getDataType(),W=k._size[0],B=T._size[0],re=T._size[1],K,ee=i,V=a,Q=l,$=0;G&&I&&G===I&&typeof G=="string"&&G!=="mixed"&&(K=G,ee=t.find(i,[K,K]),V=t.find(a,[K,K]),Q=t.find(l,[K,K]),$=t.convert(0,K));for(var q=[],ne=[],se=[],ce=k.createSparseMatrix({values:q,index:ne,ptr:se,size:[W,re],datatype:G===k._datatype&&I===T._datatype?K:void 0}),pe=[],_e=[],ze=0;ze<re;ze++){se[ze]=ne.length;for(var ke=ze+1,Ie=0;Ie<B;Ie++){var Ze=U[Ie][ze];if(!Q(Ze,$))for(var Xe=O[Ie],$e=O[Ie+1],Ke=Xe;Ke<$e;Ke++){var H=j[Ke];_e[H]!==ke?(_e[H]=ke,ne.push(H),pe[H]=V(Ze,R[Ke])):pe[H]=ee(pe[H],V(Ze,R[Ke]))}}for(var Te=se[ze],Se=ne.length,ae=Te;ae<Se;ae++){var ie=ne[ae];q[ae]=pe[ie]}}return se[re]=ne.length,ce}function F(k,T){var R=k._values,j=k._index,O=k._ptr,G=k._datatype||k._data===void 0?k._datatype:k.getDataType(),U=T._values,I=T._index,W=T._ptr,B=T._datatype||T._data===void 0?T._datatype:T.getDataType(),re=k._size[0],K=T._size[1],ee=R&&U,V,Q=i,$=a;G&&B&&G===B&&typeof G=="string"&&G!=="mixed"&&(V=G,Q=t.find(i,[V,V]),$=t.find(a,[V,V]));for(var q=ee?[]:void 0,ne=[],se=[],ce=k.createSparseMatrix({values:q,index:ne,ptr:se,size:[re,K],datatype:G===k._datatype&&B===T._datatype?V:void 0}),pe=ee?[]:void 0,_e=[],ze,ke,Ie,Ze,Xe,$e,Ke,H,Te=0;Te<K;Te++){se[Te]=ne.length;var Se=Te+1;for(Xe=W[Te],$e=W[Te+1],Ze=Xe;Ze<$e;Ze++)if(H=I[Ze],ee)for(ke=O[H],Ie=O[H+1],ze=ke;ze<Ie;ze++)Ke=j[ze],_e[Ke]!==Se?(_e[Ke]=Se,ne.push(Ke),pe[Ke]=$(U[Ze],R[ze])):pe[Ke]=Q(pe[Ke],$(U[Ze],R[ze]));else for(ke=O[H],Ie=O[H+1],ze=ke;ze<Ie;ze++)Ke=j[ze],_e[Ke]!==Se&&(_e[Ke]=Se,ne.push(Ke));if(ee)for(var ae=se[Te],ie=ne.length,ue=ae;ue<ie;ue++){var be=ne[ue];q[ue]=pe[be]}}return se[K]=ne.length,ce}return t(U_,a,{"Array, Array":t.referTo("Matrix, Matrix",k=>(T,R)=>{h(Jn(T),Jn(R));var j=k(n(T),n(R));return Wt(j)?j.valueOf():j}),"Matrix, Matrix":function(T,R){var j=T.size(),O=R.size();return h(j,O),j.length===1?O.length===1?m(T,R,j[0]):g(T,R):O.length===1?x(T,R):w(T,R)},"Matrix, Array":t.referTo("Matrix,Matrix",k=>(T,R)=>k(T,n(R))),"Array, Matrix":t.referToSelf(k=>(T,R)=>k(n(T,R.storage()),R)),"SparseMatrix, any":function(T,R){return f(T,R,a,!1)},"DenseMatrix, any":function(T,R){return d(T,R,a,!1)},"any, SparseMatrix":function(T,R){return f(R,T,a,!0)},"any, DenseMatrix":function(T,R){return d(R,T,a,!0)},"Array, any":function(T,R){return d(n(T),R,a,!1).valueOf()},"any, Array":function(T,R){return d(n(R),T,a,!0).valueOf()},"any, any":a,"any, any, ...any":t.referToSelf(k=>(T,R,j)=>{for(var O=k(T,R),G=0;G<j.length;G++)O=k(O,j[G]);return O})})}),$_="subtract",j8=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],P8=Ye($_,j8,e=>{var{typed:t,matrix:n,equalScalar:i,subtractScalar:a,unaryMinus:l,DenseMatrix:c,concat:f}=e,d=T2({typed:t}),h=cu({typed:t}),m=_8({typed:t,equalScalar:i}),g=k2({typed:t,DenseMatrix:c}),_=uu({typed:t,DenseMatrix:c}),x=js({typed:t,matrix:n,concat:f});return t($_,{"any, any":a},x({elop:a,SS:m,DS:d,SD:h,Ss:_,sS:g}))}),I8="matAlgo07xSSf",H8=["typed","SparseMatrix"],Zc=Ye(I8,H8,e=>{var{typed:t,SparseMatrix:n}=e;return function(l,c,f){var d=l._size,h=l._datatype||l._data===void 0?l._datatype:l.getDataType(),m=c._size,g=c._datatype||c._data===void 0?c._datatype:c.getDataType();if(d.length!==m.length)throw new Ot(d.length,m.length);if(d[0]!==m[0]||d[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+m+")");var _=d[0],x=d[1],w,y=0,E=f;typeof h=="string"&&h===g&&h!=="mixed"&&(w=h,y=t.convert(0,w),E=t.find(f,[w,w]));for(var D=[],A=[],N=new Array(x+1).fill(0),F=[],k=[],T=[],R=[],j=0;j<x;j++){var O=j+1,G=0;i(l,j,T,F,O),i(c,j,R,k,O);for(var U=0;U<_;U++){var I=T[U]===O?F[U]:y,W=R[U]===O?k[U]:y,B=E(I,W);B!==0&&B!==!1&&(A.push(U),D.push(B),G++)}N[j+1]=N[j]+G}return new n({values:D,index:A,ptr:N,size:[_,x],datatype:h===l._datatype&&g===c._datatype?w:void 0})};function i(a,l,c,f,d){for(var h=a._values,m=a._index,g=a._ptr,_=g[l],x=g[l+1];_<x;_++){var w=m[_];c[w]=d,f[w]=h[_]}}}),Z_="conj",G8=["typed"],U8=Ye(Z_,G8,e=>{var{typed:t}=e;return t(Z_,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),Unit:t.referToSelf(n=>i=>new i.constructor(n(i.toNumeric()),i.formatUnits())),"Array | Matrix":t.referToSelf(n=>i=>Zo(i,n))})}),K_="concat",$8=["typed","matrix","isInteger"],Z8=Ye(K_,$8,e=>{var{typed:t,matrix:n,isInteger:i}=e;return t(K_,{"...Array | Matrix | number | BigNumber":function(l){var c,f=l.length,d=-1,h,m=!1,g=[];for(c=0;c<f;c++){var _=l[c];if(Wt(_)&&(m=!0),Xt(_)||yn(_)){if(c!==f-1)throw new Error("Dimension must be specified as last argument");if(h=d,d=_.valueOf(),!i(d))throw new TypeError("Integer number expected for dimension");if(d<0||c>0&&d>h)throw new Os(d,h+1)}else{var x=Ut(_).valueOf(),w=Jn(x);if(g[c]=x,h=d,d=w.length-1,c>0&&d!==h)throw new Ot(h+1,d+1)}}if(g.length===0)throw new SyntaxError("At least one matrix expected");for(var y=g.shift();g.length;)y=y2(y,g.shift(),d);return m?n(y):y},"...string":function(l){return l.join("")}})}),q_="flatten",K8=["typed"],q8=Ye(q_,K8,e=>{var{typed:t}=e;return t(q_,{Array:function(i){return P0(i)},Matrix:function(i){return i.create(P0(i.valueOf(),!0),i.datatype())}})}),V_="identity",V8=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Y8=Ye(V_,V8,e=>{var{typed:t,config:n,matrix:i,BigNumber:a,DenseMatrix:l,SparseMatrix:c}=e;return t(V_,{"":function(){return n.matrix==="Matrix"?i([]):[]},string:function(m){return i(m)},"number | BigNumber":function(m){return d(m,m,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(m,g){return d(m,m,g)},"number | BigNumber, number | BigNumber":function(m,g){return d(m,g,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(m,g,_){return d(m,g,_)},Array:function(m){return f(m)},"Array, string":function(m,g){return f(m,g)},Matrix:function(m){return f(m.valueOf(),m.storage())},"Matrix, string":function(m,g){return f(m.valueOf(),g)}});function f(h,m){switch(h.length){case 0:return m?i(m):[];case 1:return d(h[0],h[0],m);case 2:return d(h[0],h[1],m);default:throw new Error("Vector containing two values expected")}}function d(h,m,g){var _=yn(h)||yn(m)?a:null;if(yn(h)&&(h=h.toNumber()),yn(m)&&(m=m.toNumber()),!vn(h)||h<1)throw new Error("Parameters in function identity must be positive integers");if(!vn(m)||m<1)throw new Error("Parameters in function identity must be positive integers");var x=_?new a(1):1,w=_?new _(0):0,y=[h,m];if(g){if(g==="sparse")return c.diagonal(y,x,0,w);if(g==="dense")return l.diagonal(y,x,0,w);throw new TypeError('Unknown matrix type "'.concat(g,'"'))}for(var E=O0([],y,w),D=h<m?h:m,A=0;A<D;A++)E[A][A]=x;return E}});function X8(){throw new Error('No "bignumber" implementation available')}function W8(){throw new Error('No "fraction" implementation available')}function Q8(){throw new Error('No "matrix" implementation available')}var Y_="size",J8=["typed","config","?matrix"],eN=Ye(Y_,J8,e=>{var{typed:t,config:n,matrix:i}=e;return t(Y_,{Matrix:function(l){return l.create(l.size(),"number")},Array:Jn,string:function(l){return n.matrix==="Array"?[l.length]:i([l.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(l){return n.matrix==="Array"?[]:i?i([],"dense","number"):Q8()}})}),X_="transpose",tN=["typed","matrix"],nN=Ye(X_,tN,e=>{var{typed:t,matrix:n}=e;return t(X_,{Array:c=>i(n(c)).valueOf(),Matrix:i,any:Ut});function i(c){var f=c.size(),d;switch(f.length){case 1:d=c.clone();break;case 2:{var h=f[0],m=f[1];if(m===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Jt(f)+")");switch(c.storage()){case"dense":d=a(c,h,m);break;case"sparse":d=l(c,h,m);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Jt(f)+")")}return d}function a(c,f,d){for(var h=c._data,m=[],g,_=0;_<d;_++){g=m[_]=[];for(var x=0;x<f;x++)g[x]=Ut(h[x][_])}return c.createDenseMatrix({data:m,size:[d,f],datatype:c._datatype})}function l(c,f,d){for(var h=c._values,m=c._index,g=c._ptr,_=h?[]:void 0,x=[],w=[],y=[],E=0;E<f;E++)y[E]=0;var D,A,N;for(D=0,A=m.length;D<A;D++)y[m[D]]++;for(var F=0,k=0;k<f;k++)w.push(F),F+=y[k],y[k]=w[k];for(w.push(F),N=0;N<d;N++)for(var T=g[N],R=g[N+1],j=T;j<R;j++){var O=y[m[j]]++;x[O]=N,h&&(_[O]=Ut(h[j]))}return c.createSparseMatrix({values:_,index:x,ptr:w,size:[d,f],datatype:c._datatype})}}),W_="ctranspose",rN=["typed","transpose","conj"],iN=Ye(W_,rN,e=>{var{typed:t,transpose:n,conj:i}=e;return t(W_,{any:function(l){return i(n(l))}})}),aN="numeric",oN=["number","?bignumber","?fraction"],sN=Ye(aN,oN,e=>{var{number:t,bignumber:n,fraction:i}=e,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},l={number:c=>t(c),BigNumber:n?c=>n(c):X8,bigint:c=>BigInt(c),Fraction:i?c=>i(c):W8};return function(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",h=arguments.length>2?arguments[2]:void 0;if(h!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var m=Oo(f);if(!(m in a))throw new TypeError("Cannot convert "+f+' of type "'+m+'"; valid input types are '+Object.keys(a).join(", "));if(!(d in l))throw new TypeError("Cannot convert "+f+' to type "'+d+'"; valid output types are '+Object.keys(l).join(", "));return d===m?f:l[d](f)}}),Q_="divideScalar",lN=["typed","numeric"],uN=Ye(Q_,lN,e=>{var{typed:t,numeric:n}=e;return t(Q_,{"number, number":function(a,l){return a/l},"Complex, Complex":function(a,l){return a.div(l)},"BigNumber, BigNumber":function(a,l){return a.div(l)},"bigint, bigint":function(a,l){return a/l},"Fraction, Fraction":function(a,l){return a.div(l)},"Unit, number | Complex | Fraction | BigNumber | Unit":(i,a)=>i.divide(a),"number | Fraction | Complex | BigNumber, Unit":(i,a)=>a.divideInto(i)})}),J_="dotDivide",cN=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],fN=Ye(J_,cN,e=>{var{typed:t,matrix:n,equalScalar:i,divideScalar:a,DenseMatrix:l,concat:c,SparseMatrix:f}=e,d=m8({typed:t,equalScalar:i}),h=cu({typed:t}),m=Zc({typed:t,SparseMatrix:f}),g=N2({typed:t,equalScalar:i}),_=uu({typed:t,DenseMatrix:l}),x=js({typed:t,matrix:n,concat:c});return t(J_,x({elop:a,SS:m,DS:h,SD:d,Ss:g,sS:_}))});function Rg(e){var{DenseMatrix:t}=e;return function(i,a,l){var c=i.size();if(c.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Jt(c)+")");var f=c[0],d=c[1];if(f!==d)throw new RangeError("Matrix must be square (size: "+Jt(c)+")");var h=[];if(Wt(a)){var m=a.size(),g=a._data;if(m.length===1){if(m[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<f;_++)h[_]=[g[_]];return new t({data:h,size:[f,1],datatype:a._datatype})}if(m.length===2){if(m[0]!==f||m[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Vb(a)){if(l){h=[];for(var x=0;x<f;x++)h[x]=[g[x][0]];return new t({data:h,size:[f,1],datatype:a._datatype})}return a}if(Yb(a)){for(var w=0;w<f;w++)h[w]=[0];for(var y=a._values,E=a._index,D=a._ptr,A=D[1],N=D[0];N<A;N++){var F=E[N];h[F][0]=y[N]}return new t({data:h,size:[f,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(gn(a)){var k=Jn(a);if(k.length===1){if(k[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var T=0;T<f;T++)h[T]=[a[T]];return new t({data:h,size:[f,1]})}if(k.length===2){if(k[0]!==f||k[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var R=0;R<f;R++)h[R]=[a[R][0]];return new t({data:h,size:[f,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var ex="lsolve",hN=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],dN=Ye(ex,hN,e=>{var{typed:t,matrix:n,divideScalar:i,multiplyScalar:a,subtractScalar:l,equalScalar:c,DenseMatrix:f}=e,d=Rg({DenseMatrix:f});return t(ex,{"SparseMatrix, Array | Matrix":function(_,x){return m(_,x)},"DenseMatrix, Array | Matrix":function(_,x){return h(_,x)},"Array, Array | Matrix":function(_,x){var w=n(_),y=h(w,x);return y.valueOf()}});function h(g,_){_=d(g,_,!0);for(var x=_._data,w=g._size[0],y=g._size[1],E=[],D=g._data,A=0;A<y;A++){var N=x[A][0]||0,F=void 0;if(c(N,0))F=0;else{var k=D[A][A];if(c(k,0))throw new Error("Linear system cannot be solved since matrix is singular");F=i(N,k);for(var T=A+1;T<w;T++)x[T]=[l(x[T][0]||0,a(F,D[T][A]))]}E[A]=[F]}return new f({data:E,size:[w,1]})}function m(g,_){_=d(g,_,!0);for(var x=_._data,w=g._size[0],y=g._size[1],E=g._values,D=g._index,A=g._ptr,N=[],F=0;F<y;F++){var k=x[F][0]||0;if(c(k,0))N[F]=[0];else{for(var T=0,R=[],j=[],O=A[F],G=A[F+1],U=O;U<G;U++){var I=D[U];I===F?T=E[U]:I>F&&(R.push(E[U]),j.push(I))}if(c(T,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var W=i(k,T),B=0,re=j.length;B<re;B++){var K=j[B];x[K]=[l(x[K][0]||0,a(W,R[B]))]}N[F]=[W]}}return new f({data:N,size:[w,1]})}}),tx="usolve",mN=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],pN=Ye(tx,mN,e=>{var{typed:t,matrix:n,divideScalar:i,multiplyScalar:a,subtractScalar:l,equalScalar:c,DenseMatrix:f}=e,d=Rg({DenseMatrix:f});return t(tx,{"SparseMatrix, Array | Matrix":function(_,x){return m(_,x)},"DenseMatrix, Array | Matrix":function(_,x){return h(_,x)},"Array, Array | Matrix":function(_,x){var w=n(_),y=h(w,x);return y.valueOf()}});function h(g,_){_=d(g,_,!0);for(var x=_._data,w=g._size[0],y=g._size[1],E=[],D=g._data,A=y-1;A>=0;A--){var N=x[A][0]||0,F=void 0;if(c(N,0))F=0;else{var k=D[A][A];if(c(k,0))throw new Error("Linear system cannot be solved since matrix is singular");F=i(N,k);for(var T=A-1;T>=0;T--)x[T]=[l(x[T][0]||0,a(F,D[T][A]))]}E[A]=[F]}return new f({data:E,size:[w,1]})}function m(g,_){_=d(g,_,!0);for(var x=_._data,w=g._size[0],y=g._size[1],E=g._values,D=g._index,A=g._ptr,N=[],F=y-1;F>=0;F--){var k=x[F][0]||0;if(c(k,0))N[F]=[0];else{for(var T=0,R=[],j=[],O=A[F],G=A[F+1],U=G-1;U>=O;U--){var I=D[U];I===F?T=E[U]:I<F&&(R.push(E[U]),j.push(I))}if(c(T,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var W=i(k,T),B=0,re=j.length;B<re;B++){var K=j[B];x[K]=[l(x[K][0],a(W,R[B]))]}N[F]=[W]}}return new f({data:N,size:[w,1]})}}),nd="equal",gN=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],vN=Ye(nd,gN,e=>{var{typed:t,matrix:n,equalScalar:i,DenseMatrix:a,concat:l,SparseMatrix:c}=e,f=cu({typed:t}),d=Zc({typed:t,SparseMatrix:c}),h=uu({typed:t,DenseMatrix:a}),m=js({typed:t,matrix:n,concat:l});return t(nd,yN({typed:t,equalScalar:i}),m({elop:i,SS:d,DS:f,Ss:h}))}),yN=Ye(nd,["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return t(nd,{"any, any":function(a,l){return a===null?l===null:l===null?a===null:a===void 0?l===void 0:l===void 0?a===void 0:n(a,l)}})}),rd="smaller",_N=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],xN=Ye(rd,_N,e=>{var{typed:t,config:n,bignumber:i,matrix:a,DenseMatrix:l,concat:c,SparseMatrix:f}=e,d=cu({typed:t}),h=Zc({typed:t,SparseMatrix:f}),m=uu({typed:t,DenseMatrix:l}),g=js({typed:t,matrix:a,concat:c}),_=Hd({typed:t});function x(w,y){return w.lt(y)&&!Id(w,y,n.relTol,n.absTol)}return t(rd,bN({typed:t,config:n}),{"boolean, boolean":(w,y)=>w<y,"BigNumber, BigNumber":x,"bigint, bigint":(w,y)=>w<y,"Fraction, Fraction":(w,y)=>w.compare(y)===-1,"Fraction, BigNumber":function(y,E){return x(i(y),E)},"BigNumber, Fraction":function(y,E){return x(y,i(E))},"Complex, Complex":function(y,E){throw new TypeError("No ordering relation is defined for complex numbers")}},_,g({SS:h,DS:d,Ss:m}))}),bN=Ye(rd,["typed","config"],e=>{var{typed:t,config:n}=e;return t(rd,{"number, number":function(a,l){return a<l&&!ks(a,l,n.relTol,n.absTol)}})}),id="larger",wN=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],DN=Ye(id,wN,e=>{var{typed:t,config:n,bignumber:i,matrix:a,DenseMatrix:l,concat:c,SparseMatrix:f}=e,d=cu({typed:t}),h=Zc({typed:t,SparseMatrix:f}),m=uu({typed:t,DenseMatrix:l}),g=js({typed:t,matrix:a,concat:c}),_=Hd({typed:t});function x(w,y){return w.gt(y)&&!Id(w,y,n.relTol,n.absTol)}return t(id,EN({typed:t,config:n}),{"boolean, boolean":(w,y)=>w>y,"BigNumber, BigNumber":x,"bigint, bigint":(w,y)=>w>y,"Fraction, Fraction":(w,y)=>w.compare(y)===1,"Fraction, BigNumber":function(y,E){return x(i(y),E)},"BigNumber, Fraction":function(y,E){return x(y,i(E))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},_,g({SS:h,DS:d,Ss:m}))}),EN=Ye(id,["typed","config"],e=>{var{typed:t,config:n}=e;return t(id,{"number, number":function(a,l){return a>l&&!ks(a,l,n.relTol,n.absTol)}})}),ad="largerEq",SN=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],CN=Ye(ad,SN,e=>{var{typed:t,config:n,matrix:i,DenseMatrix:a,concat:l,SparseMatrix:c}=e,f=cu({typed:t}),d=Zc({typed:t,SparseMatrix:c}),h=uu({typed:t,DenseMatrix:a}),m=js({typed:t,matrix:i,concat:l}),g=Hd({typed:t});return t(ad,AN({typed:t,config:n}),{"boolean, boolean":(_,x)=>_>=x,"BigNumber, BigNumber":function(x,w){return x.gte(w)||Id(x,w,n.relTol,n.absTol)},"bigint, bigint":function(x,w){return x>=w},"Fraction, Fraction":(_,x)=>_.compare(x)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},g,m({SS:d,DS:f,Ss:h}))}),AN=Ye(ad,["typed","config"],e=>{var{typed:t,config:n}=e;return t(ad,{"number, number":function(a,l){return a>=l||ks(a,l,n.relTol,n.absTol)}})}),nx="deepEqual",NN=["typed","equal"],MN=Ye(nx,NN,e=>{var{typed:t,equal:n}=e;return t(nx,{"any, any":function(l,c){return i(l.valueOf(),c.valueOf())}});function i(a,l){if(Array.isArray(a))if(Array.isArray(l)){var c=a.length;if(c!==l.length)return!1;for(var f=0;f<c;f++)if(!i(a[f],l[f]))return!1;return!0}else return!1;else return Array.isArray(l)?!1:n(a,l)}}),TN="FibonacciHeap",kN=["smaller","larger"],zN=Ye(TN,kN,e=>{var{smaller:t,larger:n}=e,i=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(m,g){var _={key:m,value:g,degree:0};if(this._minimum){var x=this._minimum;_.left=x,_.right=x.right,x.right=_,_.right.left=_,t(m,x.key)&&(this._minimum=_)}else _.left=_,_.right=_,this._minimum=_;return this._size++,_},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var m=this._minimum;if(m===null)return m;for(var g=this._minimum,_=m.degree,x=m.child;_>0;){var w=x.right;x.left.right=x.right,x.right.left=x.left,x.left=g,x.right=g.right,g.right=x,x.right.left=x,x.parent=null,x=w,_--}return m.left.right=m.right,m.right.left=m.left,m===m.right?g=null:(g=m.right,g=h(g,this._size)),this._size--,this._minimum=g,m},a.prototype.remove=function(m){this._minimum=l(this._minimum,m,-1),this.extractMinimum()};function l(m,g,_){g.key=_;var x=g.parent;return x&&t(g.key,x.key)&&(c(m,g,x),f(m,x)),t(g.key,m.key)&&(m=g),m}function c(m,g,_){g.left.right=g.right,g.right.left=g.left,_.degree--,_.child===g&&(_.child=g.right),_.degree===0&&(_.child=null),g.left=m,g.right=m.right,m.right=g,g.right.left=g,g.parent=null,g.mark=!1}function f(m,g){var _=g.parent;_&&(g.mark?(c(m,g,_),f(_)):g.mark=!0)}var d=function(g,_){g.left.right=g.right,g.right.left=g.left,g.parent=_,_.child?(g.left=_.child,g.right=_.child.right,_.child.right=g,g.right.left=g):(_.child=g,g.right=g,g.left=g),_.degree++,g.mark=!1};function h(m,g){var _=Math.floor(Math.log(g)*i)+1,x=new Array(_),w=0,y=m;if(y)for(w++,y=y.right;y!==m;)w++,y=y.right;for(var E;w>0;){for(var D=y.degree,A=y.right;E=x[D],!!E;){if(n(y.key,E.key)){var N=E;E=y,y=N}d(E,y),x[D]=null,D++}x[D]=y,y=A,w--}m=null;for(var F=0;F<_;F++)E=x[F],E&&(m?(E.left.right=E.right,E.right.left=E.left,E.left=m,E.right=m.right,m.right=E,E.right.left=E,t(E.key,m.key)&&(m=E)):m=E);return m}return a},{isClass:!0}),LN="Spa",FN=["addScalar","equalScalar","FibonacciHeap"],BN=Ye(LN,FN,e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:i}=e;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(l,c){if(this._values[l])this._values[l].value=c;else{var f=this._heap.insert(l,c);this._values[l]=f}},a.prototype.get=function(l){var c=this._values[l];return c?c.value:0},a.prototype.accumulate=function(l,c){var f=this._values[l];f?f.value=t(f.value,c):(f=this._heap.insert(l,c),this._values[l]=f)},a.prototype.forEach=function(l,c,f){var d=this._heap,h=this._values,m=[],g=d.extractMinimum();for(g&&m.push(g);g&&g.key<=c;)g.key>=l&&(n(g.value,0)||f(g.key,g.value,this)),g=d.extractMinimum(),g&&m.push(g);for(var _=0;_<m.length;_++){var x=m[_];g=d.insert(x.key,x.value),h[g.key]=g}},a.prototype.swap=function(l,c){var f=this._values[l],d=this._values[c];if(!f&&d)f=this._heap.insert(l,d.value),this._heap.remove(d),this._values[l]=f,this._values[c]=void 0;else if(f&&!d)d=this._heap.insert(c,f.value),this._heap.remove(f),this._values[c]=d,this._values[l]=void 0;else if(f&&d){var h=f.value;f.value=d.value,d.value=h}},a},{isClass:!0}),rx="add",RN=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],ON=Ye(rx,RN,e=>{var{typed:t,matrix:n,addScalar:i,equalScalar:a,DenseMatrix:l,SparseMatrix:c,concat:f}=e,d=T2({typed:t}),h=T8({typed:t,equalScalar:a}),m=k2({typed:t,DenseMatrix:l}),g=js({typed:t,matrix:n,concat:f});return t(rx,{"any, any":i,"any, any, ...any":t.referToSelf(_=>(x,w,y)=>{for(var E=_(x,w),D=0;D<y.length;D++)E=_(E,y[D]);return E})},g({elop:i,DS:d,SS:h,Ss:m}))}),ix="dot",jN=["typed","addScalar","multiplyScalar","conj","size"],PN=Ye(ix,jN,e=>{var{typed:t,addScalar:n,multiplyScalar:i,conj:a,size:l}=e;return t(ix,{"Array | DenseMatrix, Array | DenseMatrix":f,"SparseMatrix, SparseMatrix":d});function c(m,g){var _=h(m),x=h(g),w,y;if(_.length===1)w=_[0];else if(_.length===2&&_[1]===1)w=_[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+_.join(", ")+")");if(x.length===1)y=x[0];else if(x.length===2&&x[1]===1)y=x[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+x.join(", ")+")");if(w!==y)throw new RangeError("Vectors must have equal length ("+w+" != "+y+")");if(w===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return w}function f(m,g){var _=c(m,g),x=Wt(m)?m._data:m,w=Wt(m)?m._datatype||m.getDataType():void 0,y=Wt(g)?g._data:g,E=Wt(g)?g._datatype||g.getDataType():void 0,D=h(m).length===2,A=h(g).length===2,N=n,F=i;if(w&&E&&w===E&&typeof w=="string"&&w!=="mixed"){var k=w;N=t.find(n,[k,k]),F=t.find(i,[k,k])}if(!D&&!A){for(var T=F(a(x[0]),y[0]),R=1;R<_;R++)T=N(T,F(a(x[R]),y[R]));return T}if(!D&&A){for(var j=F(a(x[0]),y[0][0]),O=1;O<_;O++)j=N(j,F(a(x[O]),y[O][0]));return j}if(D&&!A){for(var G=F(a(x[0][0]),y[0]),U=1;U<_;U++)G=N(G,F(a(x[U][0]),y[U]));return G}if(D&&A){for(var I=F(a(x[0][0]),y[0][0]),W=1;W<_;W++)I=N(I,F(a(x[W][0]),y[W][0]));return I}}function d(m,g){c(m,g);for(var _=m._index,x=m._values,w=g._index,y=g._values,E=0,D=n,A=i,N=0,F=0;N<_.length&&F<w.length;){var k=_[N],T=w[F];if(k<T){N++;continue}if(k>T){F++;continue}k===T&&(E=D(E,A(x[N],y[F])),N++,F++)}return E}function h(m){return Wt(m)?m.size():l(m)}}),ax="lup",IN=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],HN=Ye(ax,IN,e=>{var{typed:t,matrix:n,abs:i,addScalar:a,divideScalar:l,multiplyScalar:c,subtractScalar:f,larger:d,equalScalar:h,unaryMinus:m,DenseMatrix:g,SparseMatrix:_,Spa:x}=e;return t(ax,{DenseMatrix:function(D){return w(D)},SparseMatrix:function(D){return y(D)},Array:function(D){var A=n(D),N=w(A);return{L:N.L.valueOf(),U:N.U.valueOf(),p:N.p}}});function w(E){var D=E._size[0],A=E._size[1],N=Math.min(D,A),F=Ut(E._data),k=[],T=[D,N],R=[],j=[N,A],O,G,U,I=[];for(O=0;O<D;O++)I[O]=O;for(G=0;G<A;G++){if(G>0)for(O=0;O<D;O++){var W=Math.min(O,G),B=0;for(U=0;U<W;U++)B=a(B,c(F[O][U],F[U][G]));F[O][G]=f(F[O][G],B)}var re=G,K=0,ee=0;for(O=G;O<D;O++){var V=F[O][G],Q=i(V);d(Q,K)&&(re=O,K=Q,ee=V)}if(G!==re&&(I[G]=[I[re],I[re]=I[G]][0],g._swapRows(G,re,F)),G<D)for(O=G+1;O<D;O++){var $=F[O][G];h($,0)||(F[O][G]=l(F[O][G],ee))}}for(G=0;G<A;G++)for(O=0;O<D;O++){if(G===0&&(O<A&&(R[O]=[]),k[O]=[]),O<G){O<A&&(R[O][G]=F[O][G]),G<D&&(k[O][G]=0);continue}if(O===G){O<A&&(R[O][G]=F[O][G]),G<D&&(k[O][G]=1);continue}O<A&&(R[O][G]=0),G<D&&(k[O][G]=F[O][G])}var q=new g({data:k,size:T}),ne=new g({data:R,size:j}),se=[];for(O=0,N=I.length;O<N;O++)se[I[O]]=O;return{L:q,U:ne,p:se,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function y(E){var D=E._size[0],A=E._size[1],N=Math.min(D,A),F=E._values,k=E._index,T=E._ptr,R=[],j=[],O=[],G=[D,N],U=[],I=[],W=[],B=[N,A],re,K,ee,V=[],Q=[];for(re=0;re<D;re++)V[re]=re,Q[re]=re;var $=function(se,ce){var pe=Q[se],_e=Q[ce];V[pe]=ce,V[_e]=se,Q[se]=_e,Q[ce]=pe},q=function(){var se=new x;K<D&&(O.push(R.length),R.push(1),j.push(K)),W.push(U.length);var ce=T[K],pe=T[K+1];for(ee=ce;ee<pe;ee++)re=k[ee],se.set(V[re],F[ee]);K>0&&se.forEach(0,K-1,function(Ie,Ze){_._forEachRow(Ie,R,j,O,function(Xe,$e){Xe>Ie&&se.accumulate(Xe,m(c($e,Ze)))})});var _e=K,ze=se.get(K),ke=i(ze);se.forEach(K+1,D-1,function(Ie,Ze){var Xe=i(Ze);d(Xe,ke)&&(_e=Ie,ke=Xe,ze=Ze)}),K!==_e&&(_._swapRows(K,_e,G[1],R,j,O),_._swapRows(K,_e,B[1],U,I,W),se.swap(K,_e),$(K,_e)),se.forEach(0,D-1,function(Ie,Ze){Ie<=K?(U.push(Ze),I.push(Ie)):(Ze=l(Ze,ze),h(Ze,0)||(R.push(Ze),j.push(Ie)))})};for(K=0;K<A;K++)q();return W.push(U.length),O.push(R.length),{L:new _({values:R,index:j,ptr:O,size:G}),U:new _({values:U,index:I,ptr:W,size:B}),p:V,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});function GN(e,t,n,i){e._values;for(var a=e._index,l=e._ptr,c=e._size,f=e._datatype,d=c[0],h=c[1],m=null,g=[],_=[],x=0,w=0;w<h;w++){_[w]=x;for(var y=n?n[w]:w,E=l[y],D=l[y+1],A=E;A<D;A++){var N=a[A];g[x]=N,x++}}return _[h]=x,e.createSparseMatrix({values:m,index:g,ptr:_,size:[d,h],datatype:f})}function z2(e,t,n,i,a,l,c){var f=0;for(n[c]=e;f>=0;){var d=n[c+f],h=n[i+d];h===-1?(f--,l[t++]=d):(n[i+d]=n[a+h],++f,n[c+f]=h)}return t}function UN(e,t){if(!e)return null;var n=0,i,a=[],l=[],c=0,f=t,d=2*t;for(i=0;i<t;i++)l[c+i]=-1;for(i=t-1;i>=0;i--)e[i]!==-1&&(l[f+i]=l[c+e[i]],l[c+e[i]]=i);for(i=0;i<t;i++)e[i]===-1&&(n=z2(i,n,l,c,f,a,d));return a}function $N(e,t){if(!e)return null;var n=e._index,i=e._ptr,a=e._size,l=a[0],c=a[1],f=[],d=[],h=0,m=c,g,_;for(g=0;g<l;g++)d[m+g]=-1;for(var x=0;x<c;x++){f[x]=-1,d[h+x]=-1;for(var w=i[x],y=i[x+1],E=w;E<y;E++){var D=n[E];for(g=d[m+D];g!==-1&&g<x;g=_)_=d[h+g],d[h+g]=x,_===-1&&(f[g]=x);d[m+D]=x}}return f}function ZN(e,t,n){for(var i=e._values,a=e._index,l=e._ptr,c=e._size,f=c[1],d=0,h=0;h<f;h++){var m=l[h];for(l[h]=d;m<l[h+1];m++)t(a[m],h,i?i[m]:1,n)&&(a[d]=a[m],i&&(i[d]=i[m]),d++)}return l[f]=d,a.splice(d,a.length-d),i&&i.splice(d,i.length-d),d}function Lo(e){return-e-2}var KN="csAmd",qN=["add","multiply","transpose"],VN=Ye(KN,qN,e=>{var{add:t,multiply:n,transpose:i}=e;return function(m,g){if(!g||m<=0||m>3)return null;var _=g._size,x=_[0],w=_[1],y=0,E=Math.max(16,10*Math.sqrt(w));E=Math.min(w-2,E);var D=a(m,g,x,w,E);ZN(D,d,null);for(var A=D._index,N=D._ptr,F=N[w],k=[],T=[],R=0,j=w+1,O=2*(w+1),G=3*(w+1),U=4*(w+1),I=5*(w+1),W=6*(w+1),B=7*(w+1),re=k,K=l(w,N,T,R,G,re,O,B,j,W,U,I),ee=c(w,N,T,I,U,W,E,j,G,re,O),V=0,Q,$,q,ne,se,ce,pe,_e,ze,ke,Ie,Ze,Xe,$e,Ke,H;ee<w;){for(q=-1;V<w&&(q=T[G+V])===-1;V++);T[O+q]!==-1&&(re[T[O+q]]=-1),T[G+V]=T[O+q];var Te=T[U+q],Se=T[j+q];ee+=Se;var ae=0;T[j+q]=-Se;var ie=N[q],ue=Te===0?ie:F,be=ue;for(ne=1;ne<=Te+1;ne++){for(ne>Te?(ce=q,pe=ie,_e=T[R+q]-Te):(ce=A[ie++],pe=N[ce],_e=T[R+ce]),se=1;se<=_e;se++)Q=A[pe++],!((ze=T[j+Q])<=0)&&(ae+=ze,T[j+Q]=-ze,A[be++]=Q,T[O+Q]!==-1&&(re[T[O+Q]]=re[Q]),re[Q]!==-1?T[O+re[Q]]=T[O+Q]:T[G+T[I+Q]]=T[O+Q]);ce!==q&&(N[ce]=Lo(q),T[W+ce]=0)}for(Te!==0&&(F=be),T[I+q]=ae,N[q]=ue,T[R+q]=be-ue,T[U+q]=-2,K=f(K,y,T,W,w),ke=ue;ke<be;ke++)if(Q=A[ke],!((Ie=T[U+Q])<=0)){ze=-T[j+Q];var De=K-ze;for(ie=N[Q],Ze=N[Q]+Ie-1;ie<=Ze;ie++)ce=A[ie],T[W+ce]>=K?T[W+ce]-=ze:T[W+ce]!==0&&(T[W+ce]=T[I+ce]+De)}for(ke=ue;ke<be;ke++){for(Q=A[ke],Ze=N[Q],Xe=Ze+T[U+Q]-1,$e=Ze,Ke=0,H=0,ie=Ze;ie<=Xe;ie++)if(ce=A[ie],T[W+ce]!==0){var ge=T[W+ce]-K;ge>0?(H+=ge,A[$e++]=ce,Ke+=ce):(N[ce]=Lo(q),T[W+ce]=0)}T[U+Q]=$e-Ze+1;var X=$e,oe=Ze+T[R+Q];for(ie=Xe+1;ie<oe;ie++){$=A[ie];var le=T[j+$];le<=0||(H+=le,A[$e++]=$,Ke+=$)}H===0?(N[Q]=Lo(q),ze=-T[j+Q],ae-=ze,Se+=ze,ee+=ze,T[j+Q]=0,T[U+Q]=-1):(T[I+Q]=Math.min(T[I+Q],H),A[$e]=A[X],A[X]=A[Ze],A[Ze]=q,T[R+Q]=$e-Ze+1,Ke=(Ke<0?-Ke:Ke)%w,T[O+Q]=T[B+Ke],T[B+Ke]=Q,re[Q]=Ke)}for(T[I+q]=ae,y=Math.max(y,ae),K=f(K+y,y,T,W,w),ke=ue;ke<be;ke++)if(Q=A[ke],!(T[j+Q]>=0))for(Ke=re[Q],Q=T[B+Ke],T[B+Ke]=-1;Q!==-1&&T[O+Q]!==-1;Q=T[O+Q],K++){for(_e=T[R+Q],Ie=T[U+Q],ie=N[Q]+1;ie<=N[Q]+_e-1;ie++)T[W+A[ie]]=K;var me=Q;for($=T[O+Q];$!==-1;){var ye=T[R+$]===_e&&T[U+$]===Ie;for(ie=N[$]+1;ye&&ie<=N[$]+_e-1;ie++)T[W+A[ie]]!==K&&(ye=0);ye?(N[$]=Lo(Q),T[j+Q]+=T[j+$],T[j+$]=0,T[U+$]=-1,$=T[O+$],T[O+me]=$):(me=$,$=T[O+$])}}for(ie=ue,ke=ue;ke<be;ke++)Q=A[ke],!((ze=-T[j+Q])<=0)&&(T[j+Q]=ze,H=T[I+Q]+ae-ze,H=Math.min(H,w-ee-ze),T[G+H]!==-1&&(re[T[G+H]]=Q),T[O+Q]=T[G+H],re[Q]=-1,T[G+H]=Q,V=Math.min(V,H),T[I+Q]=H,A[ie++]=Q);T[j+q]=Se,(T[R+q]=ie-ue)===0&&(N[q]=-1,T[W+q]=0),Te!==0&&(F=ie)}for(Q=0;Q<w;Q++)N[Q]=Lo(N[Q]);for($=0;$<=w;$++)T[G+$]=-1;for($=w;$>=0;$--)T[j+$]>0||(T[O+$]=T[G+N[$]],T[G+N[$]]=$);for(ce=w;ce>=0;ce--)T[j+ce]<=0||N[ce]!==-1&&(T[O+ce]=T[G+N[ce]],T[G+N[ce]]=ce);for(q=0,Q=0;Q<=w;Q++)N[Q]===-1&&(q=z2(Q,q,T,G,O,k,W));return k.splice(k.length-1,1),k};function a(h,m,g,_,x){var w=i(m);if(h===1&&_===g)return t(m,w);if(h===2){for(var y=w._index,E=w._ptr,D=0,A=0;A<g;A++){var N=E[A];if(E[A]=D,!(E[A+1]-N>x))for(var F=E[A+1];N<F;N++)y[D++]=y[N]}return E[g]=D,m=i(w),n(w,m)}return n(w,m)}function l(h,m,g,_,x,w,y,E,D,A,N,F){for(var k=0;k<h;k++)g[_+k]=m[k+1]-m[k];g[_+h]=0;for(var T=0;T<=h;T++)g[x+T]=-1,w[T]=-1,g[y+T]=-1,g[E+T]=-1,g[D+T]=1,g[A+T]=1,g[N+T]=0,g[F+T]=g[_+T];var R=f(0,0,g,A,h);return g[N+h]=-2,m[h]=-1,g[A+h]=0,R}function c(h,m,g,_,x,w,y,E,D,A,N){for(var F=0,k=0;k<h;k++){var T=g[_+k];if(T===0)g[x+k]=-2,F++,m[k]=-1,g[w+k]=0;else if(T>y)g[E+k]=0,g[x+k]=-1,F++,m[k]=Lo(h),g[E+h]++;else{var R=g[D+T];R!==-1&&(A[R]=k),g[N+k]=g[D+T],g[D+T]=k}}return F}function f(h,m,g,_,x){if(h<2||h+m<0){for(var w=0;w<x;w++)g[_+w]!==0&&(g[_+w]=1);h=2}return h}function d(h,m){return h!==m}});function YN(e,t,n,i,a,l,c){var f,d,h=0,m;if(e<=t||n[i+t]<=n[a+e])return-1;n[a+e]=n[i+t];var g=n[l+e];if(n[l+e]=t,g===-1)h=1,m=e;else{for(h=2,m=g;m!==n[c+m];m=n[c+m]);for(f=g;f!==m;f=d)d=n[c+f],n[c+f]=m}return{jleaf:h,q:m}}var XN="csCounts",WN=["transpose"],QN=Ye(XN,WN,e=>{var{transpose:t}=e;return function(n,i,a,l){if(!n||!i||!a)return null;var c=n._size,f=c[0],d=c[1],h,m,g,_,x,w,y,E=4*d+(l?d+f+1:0),D=[],A=0,N=d,F=2*d,k=3*d,T=4*d,R=5*d+1;for(g=0;g<E;g++)D[g]=-1;var j=[],O=t(n),G=O._index,U=O._ptr;for(g=0;g<d;g++)for(m=a[g],j[m]=D[k+m]===-1?1:0;m!==-1&&D[k+m]===-1;m=i[m])D[k+m]=g;if(l){for(g=0;g<d;g++)D[a[g]]=g;for(h=0;h<f;h++){for(g=d,w=U[h],y=U[h+1],x=w;x<y;x++)g=Math.min(g,D[G[x]]);D[R+h]=D[T+g],D[T+g]=h}}for(h=0;h<d;h++)D[A+h]=h;for(g=0;g<d;g++){for(m=a[g],i[m]!==-1&&j[i[m]]--,_=l?D[T+g]:m;_!==-1;_=l?D[R+_]:-1)for(x=U[_];x<U[_+1];x++){h=G[x];var I=YN(h,m,D,k,N,F,A);I.jleaf>=1&&j[m]++,I.jleaf===2&&j[I.q]--}i[m]!==-1&&(D[A+m]=i[m])}for(m=0;m<d;m++)i[m]!==-1&&(j[i[m]]+=j[m]);return j}}),JN="csSqr",e4=["add","multiply","transpose"],t4=Ye(JN,e4,e=>{var{add:t,multiply:n,transpose:i}=e,a=VN({add:t,multiply:n,transpose:i}),l=QN({transpose:i});return function(d,h,m){var g=h._ptr,_=h._size,x=_[1],w,y={};if(y.q=a(d,h),d&&!y.q)return null;if(m){var E=d?GN(h,null,y.q):h;y.parent=$N(E);var D=UN(y.parent,x);if(y.cp=l(E,y.parent,D,1),E&&y.parent&&y.cp&&c(E,y))for(y.unz=0,w=0;w<x;w++)y.unz+=y.cp[w]}else y.unz=4*g[x]+x,y.lnz=y.unz;return y};function c(f,d){var h=f._ptr,m=f._index,g=f._size,_=g[0],x=g[1];d.pinv=[],d.leftmost=[];var w=d.parent,y=d.pinv,E=d.leftmost,D=[],A=0,N=_,F=_+x,k=_+2*x,T,R,j,O,G;for(R=0;R<x;R++)D[N+R]=-1,D[F+R]=-1,D[k+R]=0;for(T=0;T<_;T++)E[T]=-1;for(R=x-1;R>=0;R--)for(O=h[R],G=h[R+1],j=O;j<G;j++)E[m[j]]=R;for(T=_-1;T>=0;T--)y[T]=-1,R=E[T],R!==-1&&(D[k+R]++===0&&(D[F+R]=T),D[A+T]=D[N+R],D[N+R]=T);for(d.lnz=0,d.m2=_,R=0;R<x;R++)if(T=D[N+R],d.lnz++,T<0&&(T=d.m2++),y[T]=R,!(--k[R]<=0)){d.lnz+=D[k+R];var U=w[R];U!==-1&&(D[k+U]===0&&(D[F+U]=D[F+R]),D[A+D[F+R]]=D[N+U],D[N+U]=D[A+T],D[k+U]+=D[k+R])}for(T=0;T<_;T++)y[T]<0&&(y[T]=R++);return!0}});function H0(e,t){return e[t]<0}function L2(e,t){e[t]=Lo(e[t])}function ox(e){return e<0?Lo(e):e}function n4(e,t,n,i,a){var l=t._index,c=t._ptr,f=t._size,d=f[1],h,m,g,_=0;for(i[0]=e;_>=0;){e=i[_];var x=a?a[e]:e;H0(c,e)||(L2(c,e),i[d+_]=x<0?0:ox(c[x]));var w=1;for(m=i[d+_],g=x<0?0:ox(c[x+1]);m<g;m++)if(h=l[m],!H0(c,h)){i[d+_]=m,i[++_]=h,w=0;break}w&&(_--,i[--n]=e)}return n}function r4(e,t,n,i,a){var l=e._ptr,c=e._size,f=t._index,d=t._ptr,h=c[1],m,g,_,x=h;for(g=d[n],_=d[n+1],m=g;m<_;m++){var w=f[m];H0(l,w)||(x=n4(w,e,x,i,a))}for(m=x;m<h;m++)L2(l,i[m]);return x}var i4="csSpsolve",a4=["divideScalar","multiply","subtract"],o4=Ye(i4,a4,e=>{var{divideScalar:t,multiply:n,subtract:i}=e;return function(l,c,f,d,h,m,g){var _=l._values,x=l._index,w=l._ptr,y=l._size,E=y[1],D=c._values,A=c._index,N=c._ptr,F,k,T,R,j=r4(l,c,f,d,m);for(F=j;F<E;F++)h[d[F]]=0;for(k=N[f],T=N[f+1],F=k;F<T;F++)h[A[F]]=D[F];for(var O=j;O<E;O++){var G=d[O],U=m?m[G]:G;if(!(U<0))for(k=w[U],T=w[U+1],h[G]=t(h[G],_[g?k:T-1]),F=g?k+1:k,R=g?T:T-1;F<R;F++){var I=x[F];h[I]=i(h[I],n(_[F],h[G]))}}return j}}),s4="csLu",l4=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],u4=Ye(s4,l4,e=>{var{abs:t,divideScalar:n,multiply:i,subtract:a,larger:l,largerEq:c,SparseMatrix:f}=e,d=o4({divideScalar:n,multiply:i,subtract:a});return function(m,g,_){if(!m)return null;var x=m._size,w=x[1],y,E=100,D=100;g&&(y=g.q,E=g.lnz||E,D=g.unz||D);var A=[],N=[],F=[],k=new f({values:A,index:N,ptr:F,size:[w,w]}),T=[],R=[],j=[],O=new f({values:T,index:R,ptr:j,size:[w,w]}),G=[],U,I,W=[],B=[];for(U=0;U<w;U++)W[U]=0,G[U]=-1,F[U+1]=0;E=0,D=0;for(var re=0;re<w;re++){F[re]=E,j[re]=D;var K=y?y[re]:re,ee=d(k,m,K,B,W,G,1),V=-1,Q=-1;for(I=ee;I<w;I++)if(U=B[I],G[U]<0){var $=t(W[U]);l($,Q)&&(Q=$,V=U)}else R[D]=G[U],T[D++]=W[U];if(V===-1||Q<=0)return null;G[K]<0&&c(t(W[K]),i(Q,_))&&(V=K);var q=W[V];for(R[D]=re,T[D++]=q,G[V]=re,N[E]=V,A[E++]=1,I=ee;I<w;I++)U=B[I],G[U]<0&&(N[E]=U,A[E++]=n(W[U],q)),W[U]=0}for(F[w]=E,j[w]=D,I=0;I<E;I++)N[I]=G[N[I]];return A.splice(E,A.length-E),N.splice(E,N.length-E),T.splice(D,T.length-D),R.splice(D,R.length-D),{L:k,U:O,pinv:G}}}),sx="slu",c4=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],f4=Ye(sx,c4,e=>{var{typed:t,abs:n,add:i,multiply:a,transpose:l,divideScalar:c,subtract:f,larger:d,largerEq:h,SparseMatrix:m}=e,g=t4({add:i,multiply:a,transpose:l}),_=u4({abs:n,divideScalar:c,multiply:a,subtract:f,larger:d,largerEq:h,SparseMatrix:m});return t(sx,{"SparseMatrix, number, number":function(w,y,E){if(!vn(y)||y<0||y>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(E<0||E>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var D=g(y,w,!1),A=_(w,D,E);return{L:A.L,U:A.U,p:A.pinv,q:D.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function lx(e,t){var n,i=t.length,a=[];if(e)for(n=0;n<i;n++)a[e[n]]=t[n];else for(n=0;n<i;n++)a[n]=t[n];return a}var ux="lusolve",h4=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],d4=Ye(ux,h4,e=>{var{typed:t,matrix:n,lup:i,slu:a,usolve:l,lsolve:c,DenseMatrix:f}=e,d=Rg({DenseMatrix:f});return t(ux,{"Array, Array | Matrix":function(_,x){_=n(_);var w=i(_),y=m(w.L,w.U,w.p,null,x);return y.valueOf()},"DenseMatrix, Array | Matrix":function(_,x){var w=i(_);return m(w.L,w.U,w.p,null,x)},"SparseMatrix, Array | Matrix":function(_,x){var w=i(_);return m(w.L,w.U,w.p,null,x)},"SparseMatrix, Array | Matrix, number, number":function(_,x,w,y){var E=a(_,w,y);return m(E.L,E.U,E.p,E.q,x)},"Object, Array | Matrix":function(_,x){return m(_.L,_.U,_.p,_.q,x)}});function h(g){if(Wt(g))return g;if(gn(g))return n(g);throw new TypeError("Invalid Matrix LU decomposition")}function m(g,_,x,w,y){g=h(g),_=h(_),x&&(y=d(g,y,!0),y._data=lx(x,y._data));var E=c(g,y),D=l(_,E);return w&&(D._data=lx(w,D._data)),D}}),cx="det",m4=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],p4=Ye(cx,m4,e=>{var{typed:t,matrix:n,subtractScalar:i,multiply:a,divideScalar:l,isZero:c,unaryMinus:f}=e;return t(cx,{any:function(m){return Ut(m)},"Array | Matrix":function(m){var g;switch(Wt(m)?g=m.size():Array.isArray(m)?(m=n(m),g=m.size()):g=[],g.length){case 0:return Ut(m);case 1:if(g[0]===1)return Ut(m.valueOf()[0]);if(g[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Jt(g)+")");case 2:{var _=g[0],x=g[1];if(_===x)return d(m.clone().valueOf(),_);if(x===0)return 1;throw new RangeError("Matrix must be square (size: "+Jt(g)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(g)+")")}}});function d(h,m,g){if(m===1)return Ut(h[0][0]);if(m===2)return i(a(h[0][0],h[1][1]),a(h[1][0],h[0][1]));for(var _=!1,x=new Array(m).fill(0).map((R,j)=>j),w=0;w<m;w++){var y=x[w];if(c(h[y][w])){var E=void 0;for(E=w+1;E<m;E++)if(!c(h[x[E]][w])){y=x[E],x[E]=x[w],x[w]=y,_=!_;break}if(E===m)return h[y][w]}for(var D=h[y][w],A=w===0?1:h[x[w-1]][w-1],N=w+1;N<m;N++)for(var F=x[N],k=w+1;k<m;k++)h[F][k]=l(i(a(h[F][k],D),a(h[F][w],h[y][k])),A)}var T=h[x[m-1]][m-1];return _?f(T):T}}),fx="inv",g4=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],v4=Ye(fx,g4,e=>{var{typed:t,matrix:n,divideScalar:i,addScalar:a,multiply:l,unaryMinus:c,det:f,identity:d,abs:h}=e;return t(fx,{"Array | Matrix":function(_){var x=Wt(_)?_.size():Jn(_);switch(x.length){case 1:if(x[0]===1)return Wt(_)?n([i(1,_.valueOf()[0])]):[i(1,_[0])];throw new RangeError("Matrix must be square (size: "+Jt(x)+")");case 2:{var w=x[0],y=x[1];if(w===y)return Wt(_)?n(m(_.valueOf(),w,y),_.storage()):m(_,w,y);throw new RangeError("Matrix must be square (size: "+Jt(x)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(x)+")")}},any:function(_){return i(1,_)}});function m(g,_,x){var w,y,E,D,A;if(_===1){if(D=g[0][0],D===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,D)]]}else if(_===2){var N=f(g);if(N===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(g[1][1],N),i(c(g[0][1]),N)],[i(c(g[1][0]),N),i(g[0][0],N)]]}else{var F=g.concat();for(w=0;w<_;w++)F[w]=F[w].concat();for(var k=d(_).valueOf(),T=0;T<x;T++){var R=h(F[T][T]),j=T;for(w=T+1;w<_;)h(F[w][T])>R&&(R=h(F[w][T]),j=w),w++;if(R===0)throw Error("Cannot calculate inverse, determinant is zero");w=j,w!==T&&(A=F[T],F[T]=F[w],F[w]=A,A=k[T],k[T]=k[w],k[w]=A);var O=F[T],G=k[T];for(w=0;w<_;w++){var U=F[w],I=k[w];if(w!==T){if(U[T]!==0){for(E=i(c(U[T]),O[T]),y=T;y<x;y++)U[y]=a(U[y],l(E,O[y]));for(y=0;y<x;y++)I[y]=a(I[y],l(E,G[y]))}}else{for(E=O[T],y=T;y<x;y++)U[y]=i(U[y],E);for(y=0;y<x;y++)I[y]=i(I[y],E)}}}return k}}}),hx="pinv",y4=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],_4=Ye(hx,y4,e=>{var{typed:t,matrix:n,inv:i,deepEqual:a,equal:l,dotDivide:c,dot:f,ctranspose:d,divideScalar:h,multiply:m,add:g,Complex:_}=e;return t(hx,{"Array | Matrix":function(N){var F=Wt(N)?N.size():Jn(N);switch(F.length){case 1:return D(N)?d(N):F[0]===1?i(N):c(d(N),f(N,N));case 2:{if(D(N))return d(N);var k=F[0],T=F[1];if(k===T)try{return i(N)}catch(R){if(!(R instanceof Error&&R.message.match(/Cannot calculate inverse, determinant is zero/)))throw R}return Wt(N)?n(x(N.valueOf(),k,T),N.storage()):x(N,k,T)}default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(F)+")")}},any:function(N){return l(N,0)?Ut(N):h(1,N)}});function x(A,N,F){var{C:k,F:T}=y(A,N,F),R=m(i(m(d(k),k)),d(k)),j=m(d(T),i(m(T,d(T))));return m(j,R)}function w(A,N,F){for(var k=Ut(A),T=0,R=0;R<N;R++){if(F<=T)return k;for(var j=R;E(k[j][T]);)if(j++,N===j&&(j=R,T++,F===T))return k;[k[j],k[R]]=[k[R],k[j]];for(var O=k[R][T],G=0;G<F;G++)k[R][G]=c(k[R][G],O);for(var U=0;U<N;U++)if(U!==R){O=k[U][T];for(var I=0;I<F;I++)k[U][I]=g(k[U][I],m(-1,m(O,k[R][I])))}T++}return k}function y(A,N,F){var k=w(A,N,F),T=A.map((j,O)=>j.filter((G,U)=>U<N&&!E(f(k[U],k[U])))),R=k.filter((j,O)=>!E(f(k[O],k[O])));return{C:T,F:R}}function E(A){return l(g(A,_(1,1)),g(0,_(1,1)))}function D(A){return a(g(A,_(1,1)),g(m(A,0),_(1,1)))}}),Og=WA({config:Uo}),F2=n5({}),B2=c5({}),jg=d5({}),Mr=N5({Matrix:jg}),Dt=eA({BigNumber:Og,Complex:F2,DenseMatrix:Mr,Fraction:B2}),Pg=t8({typed:Dt}),fu=r8({typed:Dt}),R2=U8({typed:Dt}),Ei=B5({config:Uo,typed:Dt}),dx=q8({typed:Dt}),x4=T5({typed:Dt}),b4=z5({equalScalar:Ei,typed:Dt}),Kc=B8({typed:Dt}),w4=U5({typed:Dt}),ea=j5({Matrix:jg,equalScalar:Ei,typed:Dt}),qc=a8({typed:Dt}),Ig=K5({BigNumber:Og,typed:Dt}),_n=W5({DenseMatrix:Mr,Matrix:jg,SparseMatrix:ea,typed:Dt}),od=nN({matrix:_n,typed:Dt}),Ps=Z8({isInteger:x4,matrix:_n,typed:Dt}),D4=iN({conj:R2,transpose:od,typed:Dt}),O2=vN({DenseMatrix:Mr,SparseMatrix:ea,concat:Ps,equalScalar:Ei,matrix:_n,typed:Dt}),E4=Y5({Fraction:B2,typed:Dt}),S4=Y8({BigNumber:Og,DenseMatrix:Mr,SparseMatrix:ea,config:Uo,matrix:_n,typed:Dt}),C4=CN({DenseMatrix:Mr,SparseMatrix:ea,concat:Ps,config:Uo,matrix:_n,typed:Dt}),A4=sN({bignumber:Ig,fraction:E4,number:w4}),N4=eN({matrix:_n,config:Uo,typed:Dt}),M4=xN({DenseMatrix:Mr,SparseMatrix:ea,bignumber:Ig,concat:Ps,config:Uo,matrix:_n,typed:Dt}),Gd=J5({typed:Dt}),j2=ON({DenseMatrix:Mr,SparseMatrix:ea,addScalar:fu,concat:Ps,equalScalar:Ei,matrix:_n,typed:Dt}),T4=MN({equal:O2,typed:Dt}),Ko=uN({numeric:A4,typed:Dt}),k4=fN({DenseMatrix:Mr,SparseMatrix:ea,concat:Ps,divideScalar:Ko,equalScalar:Ei,matrix:_n,typed:Dt}),Hg=DN({DenseMatrix:Mr,SparseMatrix:ea,bignumber:Ig,concat:Ps,config:Uo,matrix:_n,typed:Dt}),z4=dN({DenseMatrix:Mr,divideScalar:Ko,equalScalar:Ei,matrix:_n,multiplyScalar:Kc,subtractScalar:qc,typed:Dt}),L4=P8({DenseMatrix:Mr,concat:Ps,equalScalar:Ei,matrix:_n,subtractScalar:qc,typed:Dt,unaryMinus:Gd}),F4=pN({DenseMatrix:Mr,divideScalar:Ko,equalScalar:Ei,matrix:_n,multiplyScalar:Kc,subtractScalar:qc,typed:Dt}),P2=PN({addScalar:fu,conj:R2,multiplyScalar:Kc,size:N4,typed:Dt}),B4=zN({larger:Hg,smaller:M4}),Ns=O8({addScalar:fu,dot:P2,equalScalar:Ei,matrix:_n,multiplyScalar:Kc,typed:Dt}),R4=f4({SparseMatrix:ea,abs:Pg,add:j2,divideScalar:Ko,larger:Hg,largerEq:C4,multiply:Ns,subtract:L4,transpose:od,typed:Dt}),O4=p4({divideScalar:Ko,isZero:b4,matrix:_n,multiply:Ns,subtractScalar:qc,typed:Dt,unaryMinus:Gd}),j4=v4({abs:Pg,addScalar:fu,det:O4,divideScalar:Ko,identity:S4,matrix:_n,multiply:Ns,typed:Dt,unaryMinus:Gd}),P4=_4({Complex:F2,add:j2,ctranspose:D4,deepEqual:T4,divideScalar:Ko,dot:P2,dotDivide:k4,equal:O2,inv:j4,matrix:_n,multiply:Ns,typed:Dt}),I4=BN({FibonacciHeap:B4,addScalar:fu,equalScalar:Ei}),H4=HN({DenseMatrix:Mr,Spa:I4,SparseMatrix:ea,abs:Pg,addScalar:fu,divideScalar:Ko,equalScalar:Ei,larger:Hg,matrix:_n,multiplyScalar:Kc,subtractScalar:qc,typed:Dt,unaryMinus:Gd}),G4=d4({DenseMatrix:Mr,lsolve:z4,lup:H4,matrix:_n,slu:R4,typed:Dt,usolve:F4});class G0{a;b;c;d;constructor(t){let n;if(console.log("params",t),Array.isArray(t)?n=t:n=[{gkRechts:t.GKR_A,gkHoch:t.GKH_A,pixelX:t.PX_A,pixelY:t.PY_A},{gkRechts:t.GKR_B,gkHoch:t.GKH_B,pixelX:t.PX_B,pixelY:t.PY_B}],n.length<2)throw new Error("At least 2 reference points are required for Helmert transformation");this.computeLeastSquares(n)}computeLeastSquares(t){const n=[],i=[];for(const d of t)n.push([d.gkRechts,d.gkHoch,1,0]),i.push(d.pixelX),n.push([d.gkHoch,-d.gkRechts,0,1]),i.push(d.pixelY);const a=_n(n),l=_n(i),c=Ns(od(a),a),f=Ns(od(a),l);try{const d=G4(c,f),h=dx(d).toArray();this.a=h[0],this.b=h[1],this.c=h[2],this.d=h[3]}catch(d){console.warn("Standard solver failed, using pseudoinverse:",d);const h=P4(c),m=Ns(h,f),g=dx(m).toArray();this.a=g[0],this.b=g[1],this.c=g[2],this.d=g[3]}}gkToPixel(t,n){const i=this.a*t+this.b*n+this.c,a=-this.b*t+this.a*n+this.d;return[i,a]}pixelToGK(t,n){const i=t-this.c,a=n-this.d,l=this.a*this.a+this.b*this.b,c=(this.a*i-this.b*a)/l,f=(this.b*i+this.a*a)/l;return[c,f]}getParameters(){const t=Math.sqrt(this.a*this.a+this.b*this.b),n=Math.atan2(-this.b,this.a);return{a:this.a,b:this.b,c:this.c,d:this.d,scale:t,rotation:n*180/Math.PI}}}function mx(e,t){const n=t.GK.Rechts-e.GK.Rechts,i=t.GK.Hoch-e.GK.Hoch,a=t.z-e.z;return Math.sqrt(n*n+i*i+a*a)}function px(e,t,n,i,a,l,c,f){console.log("durchhang",c);const d=f/e,h=t.Rechts+d*(n.Rechts-t.Rechts),m=t.Hoch+d*(n.Hoch-t.Hoch),g=f,_=e,x=i*g*(_-g)+a*g+l;return{GK:{Rechts:h,Hoch:m},z:x}}function U4(e){const t=e.UsedMasten;for(let n=0;n<t.length-1;n++){const i=t[n],a=t[n+1];for(const l of i.UsedEbenen){for(const c of l.UsedLeitungenLinks)gx(c,a);for(const c of l.UsedLeitungenRechts)gx(c,a)}}}function gx(e,t){if(e.NextMastEbene===0||e.NextMastLeiter===0)return;const n=$4(t,e.NextMastEbene,e.NextMastLeiter);if(!n)return;const i=e.Durchgangspunkt.GK.Rechts,a=e.Durchgangspunkt.GK.Hoch,l=e.Durchgangspunkt.z,c=n.Durchgangspunkt.GK.Rechts,f=n.Durchgangspunkt.GK.Hoch,d=n.Durchgangspunkt.z,h=(c-i)*(c-i)+(f-a)*(f-a);if(h===0)return;const m=Math.sqrt(h),g=e.Durchhang;e.ParabelA=4*g/h,e.ParabelB=(d-l-4*g)/m,e.ParabelC=l,e.BetrU=m,e.AmSeg=Math.floor(m/5),e.AmSeg<1&&(e.AmSeg=1),e.SegLenU=m/e.AmSeg,e.SegmentPunkte=[];for(let x=0;x<e.AmSeg;x++){const w=x*e.SegLenU,y=px(m,e.Durchgangspunkt.GK,n.Durchgangspunkt.GK,e.ParabelA,e.ParabelB,e.ParabelC,g,w);e.SegmentPunkte.push(y)}e.Mittelpkt=px(m,e.Durchgangspunkt.GK,n.Durchgangspunkt.GK,e.ParabelA,e.ParabelB,e.ParabelC,g,m/2);let _=0;for(let x=0;x<e.AmSeg-1;x++)_+=mx(e.SegmentPunkte[x],e.SegmentPunkte[x+1]);if(e.SegmentPunkte.length>0){const x=e.SegmentPunkte[e.SegmentPunkte.length-1];_+=mx(x,n.Durchgangspunkt)}e.LeiterLen=_}function $4(e,t,n){const i=e.UsedEbenen.find(a=>a.NummerEbene===t);if(!i)return null;if(n<0){const a=-n-1;if(a>=0&&a<i.UsedLeitungenLinks.length)return i.UsedLeitungenLinks[a]}else if(n>0){const a=n-1;if(a>=0&&a<i.UsedLeitungenRechts.length)return i.UsedLeitungenRechts[a]}return null}function xh(e){for(const t of e)U4(t)}const _c={enableLogging:!0},s0=()=>{const e=new Map;return e.set("L_80dB",{Name:"L_80dB",SchallLW:80}),e},en=k3((e,t)=>({projectName:"Neues Projekt",projectImage:null,imageWidth:893,imageHeight:639,referencePoints:[],originalData:null,hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,leiterTypes:s0(),trassenNew:new Map,poles:new Map,connectionLines:new Map,poleTemplates:new Map,dgmDreiecke:[],dgmKanten:[],immissionGrid:[],immissionGridDetailed:[],contourDisplayMode:"total",immissionGridSettings:{gridSizeX:10,gridSizeY:10,heightOffset:1.5,legendMode:"auto",legendMinValue:0,legendIntervalSize:10,legendIntervalCount:5,opacity:.6},showImmissionGrid:!1,showGridPoints:!1,isCalculatingGrid:!1,gridCalculationProgress:null,cachedImmissionValues:new Map,isComputationEnabled:!1,isImmissionPointsComputed:!1,isGridComputed:!1,calculator:null,dtmProcessor:null,colorPalettes:{dgm:"YlOrBr",immissionGrid:"RdYlGn"},mitFrequenz:!1,kt:0,computationErrors:[],editMode:"view",selectedElementType:"hoehenpunkt",selectedElementId:null,isEditFormOpen:!1,mastLayoutTemplates:new Map,loadProjectData:n=>{const i=new Map,a=new Map,l=new Map,c=new Map;let f=new Map;const d=[],h=new Map,m=new Map,g=new Map,_=new Map;if(console.log("loadProjectData - Checking for reference points:",{hasReferencePoints:!!n.ReferencePoints,hasGKR_A:n.GKR_A!==void 0,hasGKH_A:n.GKH_A!==void 0,hasPX_A:n.PX_A!==void 0,hasPY_A:n.PY_A!==void 0,GKR_A:n.GKR_A,GKH_A:n.GKH_A,PX_A:n.PX_A,PY_A:n.PY_A}),n.ReferencePoints&&Array.isArray(n.ReferencePoints))console.log("Loading from ReferencePoints array:",n.ReferencePoints),n.ReferencePoints.forEach(A=>{d.push({id:In(),pixelX:A.pixelX,pixelY:A.pixelY,gkRechts:A.gkRechts,gkHoch:A.gkHoch,label:A.label||String.fromCharCode(65+d.length)})});else{const A=["A","B"];for(const N of A){const F=`GKR_${N}`,k=`GKH_${N}`,T=`PX_${N}`,R=`PY_${N}`;n[F]!==void 0&&n[k]!==void 0&&n[T]!==void 0&&n[R]!==void 0&&(console.log(`Loading reference point ${N} from legacy format`),d.push({id:In(),pixelX:n[T],pixelY:n[R],gkRechts:n[F],gkHoch:n[k],label:N}))}}console.log("Final reference points loaded:",d);let x=893,w=639;console.log("Found image width and height: ",n.IM_X_max,n.IM_Y_max),n.IM_X_max&&n.IM_X_max>0&&(x=n.IM_X_max),n.IM_Y_max&&n.IM_Y_max>0&&(w=n.IM_Y_max);let y=null;n.ImageData&&(y=n.ImageData),n.Hoehenpunkte?.forEach(A=>{const N=In();i.set(N,{id:N,GK_Vektor:A.GK_Vektor})}),n.ESQSources?.forEach(A=>{const N=In();a.set(N,{id:N,Bezeichnung:A.Bezeichnung,Position:A.Position,Hoehe:A.Hoehe,Raumwinkelmass:A.Raumwinkelmass,Beurteilungszeitraum:A.Beurteilungszeitraum,Schallleistungspegel:A.Schallleistungspegel,L:A.L,S:A.S,Z_Impulshaltigkeit:A.Z_Impulshaltigkeit,Z_Tonhaltigkeit:A.Z_Tonhaltigkeit,Z_Cmet:A.Z_Cmet,Ruhezeitzuschlag:A.Ruhezeitzuschlag,Einwirkzeit:A.Einwirkzeit,Zeiteinheit:A.Zeiteinheit})}),n.ImmissionPoints?.forEach(A=>{const N=In();l.set(N,{id:N,Name:A.Name,Position:A.Position,HeightOffset:A.HeightOffset,G_Bodenfaktor:A.G_Bodenfaktor})}),f=s0(),n.LeiterTypes?.forEach(A=>{const N=A.Name.trim();f.set(N,{Name:N,SchallLW:A.SchallLW})}),n.Trassen?.forEach(A=>{const N=In(),F=`template_${N}`,k=$3(A,F,N);if(h.set(N,k.trasse),k.poles.forEach(R=>{m.set(R.id,R)}),k.connectionLines.forEach(R=>{g.set(R.id,R)}),!_.has(F)&&A.UsedMasten.length>0){const R=A.UsedMasten[0],j={id:F,name:`Template for ${A.Name}`,description:`Auto-generated from ${A.Name}`,levels:R.UsedEbenen.map(O=>({levelNumber:O.NummerEbene,defaultHeight:O.AbstandNullpunkt,leftConnections:O.UsedLeitungenLinks.length,rightConnections:O.UsedLeitungenRechts.length}))};_.set(F,j)}let T;if(A.UsedMasten&&A.UsedMasten.length>0){const R=A.UsedMasten[0];if(R.UsedEbenen&&R.UsedEbenen.length>0){const j=R.UsedEbenen.map((G,U)=>({nummerEbene:U+1,anzahlLeitungenLinks:G.UsedLeitungenLinks?.length||0,anzahlLeitungenRechts:G.UsedLeitungenRechts?.length||0}));T=F;const O={id:T,name:`Template für ${A.Name}`,description:`Auto-generiert aus ${A.Name} Konfiguration`,anzahlEbenen:R.UsedEbenen.length,ebenenConfig:j};c.set(T,O)}}A.UsedMasten?.forEach(()=>{In()})}),n.Trassen&&n.Trassen.length>0&&(console.log("Calculating parabola parameters for loaded trassen..."),xh(n.Trassen));const E=new yc(n.DGMDreiecke||[],n.Hoehenpunkte||[]);E.setDGMKante(n.DGMKanten||[]);const D=new Dn(n,E,_c);e({originalData:n,hoehenpunkte:i,esqSources:a,immissionPoints:l,leiterTypes:f,trassenNew:h,poles:m,connectionLines:g,poleTemplates:_,mastLayoutTemplates:c,mitFrequenz:n.mitFrequenz||!1,kt:n.Kt!==void 0?n.Kt:0,calculator:D,dtmProcessor:E,referencePoints:d,imageWidth:x,imageHeight:w,projectImage:y,projectName:n.Name||"Imported Project",cachedImmissionValues:new Map,isImmissionPointsComputed:!1,isGridComputed:!1,immissionGrid:[],immissionGridDetailed:[],showImmissionGrid:!1,showGridPoints:!1}),t().recomputeTriangulation(),console.log("Loading finished with image width and height: ",x,w)},setEditMode:n=>e({editMode:n}),setSelectedElementType:n=>e({selectedElementType:n}),selectElement:n=>e({selectedElementId:n}),setEditFormOpen:n=>e({isEditFormOpen:n}),createNewProject:n=>{e({projectName:n,projectImage:null,imageWidth:893,imageHeight:639,referencePoints:[],originalData:null,hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,leiterTypes:s0(),trassenNew:new Map,poles:new Map,connectionLines:new Map,poleTemplates:new Map,dgmDreiecke:[],dgmKanten:[],immissionGrid:[],immissionGridDetailed:[],calculator:null,dtmProcessor:null,cachedImmissionValues:new Map,isImmissionPointsComputed:!1,isGridComputed:!1,showImmissionGrid:!1,showGridPoints:!1})},setProjectImage:(n,i,a)=>{console.log("setProjectImage called with:",{imageUrl:n.substring(0,50)+"...",width:i,height:a,stack:new Error().stack?.split(`
`).slice(1,4).join(`
`)}),e({projectImage:n,imageWidth:i,imageHeight:a})},addReferencePoint:n=>{e(i=>({referencePoints:[...i.referencePoints,n]}))},updateReferencePoint:(n,i)=>{e(a=>({referencePoints:a.referencePoints.map(l=>l.id===n?{...l,...i}:l)}))},deleteReferencePoint:n=>{e(i=>{const a=i.referencePoints.filter(l=>l.id!==n);return a.length<2?(console.log("Less than 2 reference points remaining, clearing transformed elements"),{referencePoints:a,hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,trassenNew:new Map,poles:new Map,connections:new Map,connectionLines:new Map}):{referencePoints:a}})},setProjectName:n=>{e({projectName:n})},addHoehenpunkt:n=>{if(!t().hasValidTransformation())return console.warn("Cannot add Hoehenpunkt: No valid transformation available (need at least 2 reference points)"),"";const a=In(),l={id:a,GK_Vektor:n};return e(c=>{const f=new Map(c.hoehenpunkte);return f.set(a,l),{hoehenpunkte:f}}),t().recomputeTriangulation(),t().clearImmissionCache(),t().clearImmissionGrid(),a},updateHoehenpunkt:(n,i)=>{e(a=>{const l=new Map(a.hoehenpunkte),c=l.get(n);return c&&l.set(n,{...c,...i}),{hoehenpunkte:l}}),t().recomputeTriangulation(),t().clearImmissionCache(),t().clearImmissionGrid()},deleteHoehenpunkt:n=>{e(i=>{const a=new Map(i.hoehenpunkte);return a.delete(n),{hoehenpunkte:a}}),t().recomputeTriangulation(),t().clearImmissionCache(),t().clearImmissionGrid()},addESQ:n=>{if(!t().hasValidTransformation())return console.warn("Cannot add ESQ: No valid transformation available (need at least 2 reference points)"),"";const a=In(),l={id:a,Bezeichnung:"Neue ESQ",Position:n,Hoehe:0,Raumwinkelmass:0,Beurteilungszeitraum:0,Schallleistungspegel:!0,L:85,S:0,Z_Impulshaltigkeit:0,Z_Tonhaltigkeit:0,Z_Cmet:0,Ruhezeitzuschlag:!1,Einwirkzeit:16,Zeiteinheit:2};return e(c=>{const f=new Map(c.esqSources);return f.set(a,l),{esqSources:f}}),t().clearImmissionCache(),t().clearImmissionGrid(),a},updateESQ:(n,i)=>{e(a=>{const l=new Map(a.esqSources),c=l.get(n);return c&&l.set(n,{...c,...i}),{esqSources:l}}),t().clearImmissionCache(),t().clearImmissionGrid()},deleteESQ:n=>{e(i=>{const a=new Map(i.esqSources);return a.delete(n),{esqSources:a}}),t().clearImmissionCache(),t().clearImmissionGrid()},addImmissionPoint:n=>{if(!t().hasValidTransformation())return console.warn("Cannot add ImmissionPoint: No valid transformation available (need at least 2 reference points)"),"";const a=In(),l={id:a,Name:"Neuer Immissionspunkt",Position:n,HeightOffset:0,G_Bodenfaktor:1};return e(c=>{const f=new Map(c.immissionPoints);return f.set(a,l),{immissionPoints:f,isImmissionPointsComputed:!1}}),a},updateImmissionPoint:(n,i)=>{e(a=>{const l=new Map(a.immissionPoints),c=l.get(n);return c&&l.set(n,{...c,...i}),{immissionPoints:l,isImmissionPointsComputed:!1}})},deleteImmissionPoint:n=>{e(i=>{const a=new Map(i.immissionPoints);return a.delete(n),{immissionPoints:a}})},addPole:(n,i)=>{console.log("addMast called with trasseId:",n,"position:",i);const a=t();if(!a.hasValidTransformation())return console.warn("Cannot add Mast: No valid transformation available (need at least 2 reference points)"),"";const l=a.trassenNew.get(n);if(console.log("trasseNew found:",l),console.log("All trassenNew IDs:",Array.from(a.trassenNew.keys())),l){console.log("Using new structure for trasseId:",n);const c=l.templateId,f=a.mastLayoutTemplates.get(c);console.log("Template ID:",c,"MastLayoutTemplate found:",f);let d;f?d={id:c,name:f.name,description:f.description,levels:f.ebenenConfig.map(_=>({levelNumber:_.nummerEbene,defaultHeight:50-(_.nummerEbene-1)*10,leftConnections:_.anzahlLeitungenLinks,rightConnections:_.anzahlLeitungenRechts}))}:(console.warn("No MastLayoutTemplate found for ID:",c,"Creating default"),d={id:c,name:"Default Template",description:"Auto-generated template",levels:[{levelNumber:1,defaultHeight:50,leftConnections:3,rightConnections:3}]});const h=l.poleIds.length,m=`pole_${n}_${h+1}`,g={id:m,trasseId:n,name:`Mast ${h+1}`,position:i,poleHeight:60,nullpunktHeight:i.z,orientation:{x:0,y:1,Length:1},gkOrientation:{Rechts:0,Hoch:1},levels:[]};for(const _ of d.levels){const x={levelNumber:_.levelNumber,levelHeight:_.defaultHeight,leftConnections:[],rightConnections:[]};for(let w=0;w<_.leftConnections;w++){const y={id:Ql(g.id,_.levelNumber,"left",w+1),poleId:g.id,levelNumber:_.levelNumber,side:"left",connectionNumber:w+1,horizontalDistance2Pole:5+w*2,isolatorLength:2.5};x.leftConnections.push(y)}for(let w=0;w<_.rightConnections;w++){const y={id:Ql(g.id,_.levelNumber,"right",w+1),poleId:g.id,levelNumber:_.levelNumber,side:"right",connectionNumber:w+1,horizontalDistance2Pole:5+w*2,isolatorLength:2.5};x.rightConnections.push(y)}g.levels.push(x)}if(l.poleIds.length>0){const _=l.poleIds[l.poleIds.length-1],x=a.poles.get(_);if(x){for(const w of x.levels){const y=g.levels.find(E=>E.levelNumber===w.levelNumber);if(y){const E=Math.min(w.leftConnections.length,y.leftConnections.length);for(let A=0;A<E;A++){const N=w.leftConnections[A],F=y.leftConnections[A];N.connected2Connection=F.id;const k={id:`line_${_}_${m}_L${w.levelNumber}_L${A+1}`,trasseId:n,fromConnectionId:N.id,toConnectionId:F.id,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};e(T=>{const R=new Map(T.connectionLines);return R.set(k.id,k),{connectionLines:R}})}const D=Math.min(w.rightConnections.length,y.rightConnections.length);for(let A=0;A<D;A++){const N=w.rightConnections[A],F=y.rightConnections[A];N.connected2Connection=F.id;const k={id:`line_${_}_${m}_L${w.levelNumber}_R${A+1}`,trasseId:n,fromConnectionId:N.id,toConnectionId:F.id,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};e(T=>{const R=new Map(T.connectionLines);return R.set(k.id,k),{connectionLines:R}})}}}e(w=>{const y=new Map(w.poles);return y.set(_,x),{poles:y}})}}return e(_=>{const x=new Map(_.poles);x.set(g.id,g);const w=new Map(_.trassenNew),y=w.get(n);return y&&(y.poleIds.push(g.id),w.set(n,y)),{poles:x,trassenNew:w}}),g.id}else return""},exportProjectData:()=>{const n=t(),i=Array.from(n.hoehenpunkte.values()).map((d,h)=>({LfdNummer:h+1,GK_Vektor:d.GK_Vektor})),a=Array.from(n.esqSources.values()).map(d=>({...d,OriginalData:{}})),l=Array.from(n.immissionPoints.values()).map(d=>({Name:d.Name,Position:d.Position,HeightOffset:d.HeightOffset,G_Bodenfaktor:d.G_Bodenfaktor,OriginalData:{}})),c=[];n.trassenNew.forEach(d=>{const h=new Map,m=[];d.poleIds.forEach(_=>{const x=n.poles.get(_);x&&h.set(_,x)}),n.connectionLines.forEach(_=>{_.trasseId===d.id&&m.push(_)}),console.log("using trasseNew",d,"poles",h,"connectionLines",m,Array.from(n.leiterTypes.values()));const g=k0(d,h,m,Array.from(n.leiterTypes.values()));c.push(g)});const f={...n.originalData,Hoehenpunkte:i,ESQSources:a,ImmissionPoints:l,Trassen:c,LeiterTypes:Array.from(n.leiterTypes.values()),DGMDreiecke:n.dgmDreiecke,DGMKanten:n.dgmKanten,Name:n.projectName,IM_X_max:n.imageWidth,IM_Y_max:n.imageHeight,mitFrequenz:n.mitFrequenz,AgrKorrektur:n.originalData?.AgrKorrektur||!1,Kt:n.kt};if(n.projectImage&&(f.ImageData=n.projectImage),n.referencePoints.length>0){const d=["A","B"];n.referencePoints.forEach((h,m)=>{if(m<d.length){const g=d[m];f[`GKR_${g}`]=h.gkRechts,f[`GKH_${g}`]=h.gkHoch,f[`PX_${g}`]=h.pixelX,f[`PY_${g}`]=h.pixelY}}),f.ReferencePoints=n.referencePoints.map(h=>({pixelX:h.pixelX,pixelY:h.pixelY,gkRechts:h.gkRechts,gkHoch:h.gkHoch,label:h.label,id:h.id,name:h.label}))}return console.log("exportData",f),f},clearAll:()=>{e({hoehenpunkte:new Map,esqSources:new Map,immissionPoints:new Map,dgmDreiecke:[],dgmKanten:[],selectedElementId:null})},calculateImmissionValue:n=>{const i=t(),{originalData:a,immissionPoints:l}=i;if(!a)return 0;const c=l.get(n);if(!c)return 0;const f=t().exportProjectData();f.Trassen&&f.Trassen.length>0&&xh(f.Trassen);const d=new Dn(f,i.dtmProcessor,_c),h=f.ImmissionPoints.findIndex(m=>m.Name===c.Name);if(h===-1)return console.warn(`Immission point ${c.Name} not found in current data`),0;try{console.log(`DTM processor available: ${i.dtmProcessor!==null}`),i.dtmProcessor&&console.log(`DTM has ${i.dtmProcessor.DGMKante?.length||0} edges`),console.log("Computing immission value for",c);const m=d.calculateLatLTForImmissionPoint(h);return console.log(`Calculated value for ${c.Name}: ${m} dB`),m}catch(m){return console.error("Error calculating immission value:",m),0}},getCachedImmissionValue:n=>t().cachedImmissionValues.get(n)||0,computeImmissionPointsFromGUI:n=>{const i=t(),a=[];n&&n.length>0?(console.log("Calculating parabola parameters for conductors..."),xh(n)):console.log("No trassen to calculate parabola parameters for");const l=Array.from(i.esqSources.values()).map(y=>({Bezeichnung:y.Bezeichnung,Position:y.Position,Hoehe:y.Hoehe,Raumwinkelmass:y.Raumwinkelmass,Beurteilungszeitraum:y.Beurteilungszeitraum,Schallleistungspegel:y.Schallleistungspegel,L:y.L,S:y.S,Z_Impulshaltigkeit:y.Z_Impulshaltigkeit,Z_Tonhaltigkeit:y.Z_Tonhaltigkeit,Z_Cmet:y.Z_Cmet,Ruhezeitzuschlag:y.Ruhezeitzuschlag,Einwirkzeit:y.Einwirkzeit,Zeiteinheit:y.Zeiteinheit,OriginalData:{}})),c=Array.from(i.immissionPoints.values()).map(y=>({Name:y.Name,Position:y.Position,HeightOffset:y.HeightOffset,G_Bodenfaktor:y.G_Bodenfaktor}));console.log("state.originalData",i.originalData);let f=i.dgmDreiecke||[],d=i.dgmKanten||[],h=[],m=null;const g=Array.from(i.hoehenpunkte.values());if(g.length>=3){console.log("Creating terrain model from GUI Hoehenpunkte...");const{dreiecke:y,kanten:E}=x_(g);f=y,d=E,h=g.map((D,A)=>({LfdNummer:A+1,GK_Vektor:D.GK_Vektor})),m=new yc(f,h),d&&m.setDGMKante(d),e({dtmProcessor:m,dgmDreiecke:f,dgmKanten:d})}else i.originalData?.DGMDreiecke&&i.originalData?.Hoehenpunkte?(console.log("Using terrain model from original data..."),f=i.originalData.DGMDreiecke,d=i.originalData.DGMKanten||[],h=i.originalData.Hoehenpunkte,m=new yc(f,h),d&&m.setDGMKante(d),e({dtmProcessor:m})):(console.warn("No terrain data available, creating minimal DTM processor"),m=new yc([],[]),e({dtmProcessor:m}));const _={...i.originalData,Trassen:n,Hoehenpunkte:h,DGMDreiecke:f,DGMKanten:d,ImmissionPoints:c,LeiterTypes:Array.from(i.leiterTypes.values()),ESQSources:l,AgrKorrektur:i.originalData?.AgrKorrektur||!1,mitFrequenz:i.mitFrequenz};let x=null;if(m)x=new Dn(_,m,_c),e({calculator:x});else{const y="Failed to create DTM processor, cannot create calculator";console.error(y),a.push(y)}console.log("Running with calculator",x);const w=new Map;if(console.log("Computing immission values from GUI data..."),console.log("Using trassen:",n),console.log("Using immission points:",c),x)for(const[y,E]of i.immissionPoints){const D=c.findIndex(A=>A.Name===E.Name&&A.Position.GK.Rechts===E.Position.GK.Rechts&&A.Position.GK.Hoch===E.Position.GK.Hoch);if(D>=0)try{const A=x.calculateLatLTForImmissionPoint(D);w.set(y,A),console.log(`Calculated value for ${E.Name} (index ${D}): ${A} dB`)}catch(A){const N=`Error calculating immission for point "${E.Name}": ${A instanceof Error?A.message:String(A)}`;console.error(N),a.push(N),w.set(y,0)}else{const A=`Could not find immission point "${E.Name}" in data array`;console.warn(A),a.push(A),w.set(y,0)}}else{const y="Calculator not available - cannot compute immission values";console.error(y),a.push(y);for(const[E]of i.immissionPoints)w.set(E,0)}e({cachedImmissionValues:w,isImmissionPointsComputed:!0,computationErrors:a}),console.log(`Computed and cached ${w.size} immission point values from GUI data`),a.length>0&&console.error(`Computation completed with ${a.length} error(s)`)},clearImmissionCache:()=>{e({cachedImmissionValues:new Map,isImmissionPointsComputed:!1,isGridComputed:!1}),console.log("Immission cache cleared")},clearComputationErrors:()=>{e({computationErrors:[]})},generateImmissionGrid:async(n,i,a)=>{const l=t(),{gridSizeX:c,gridSizeY:f,heightOffset:d}=l.immissionGridSettings;if(!a){console.warn("No Helmert transform available for grid generation");return}e({isCalculatingGrid:!0,immissionGrid:[],immissionGridDetailed:[],gridCalculationProgress:null});try{const h=[],m=[],g=t().exportProjectData();xh(g.Trassen);const _=[];for(let y=0;y<f;y++)for(let E=0;E<c;E++){const D=E/(c-1)*n,A=y/(f-1)*i,[N,F]=a.pixelToGK(D,A);let k=50;if(l.dtmProcessor)try{const R={Rechts:N,Hoch:F};k=l.dtmProcessor.berechneHoeheDGM(R)}catch(R){console.warn(`Could not get DTM height at (${N}, ${F}):`,R)}const T={GK:{Rechts:N,Hoch:F},z:k+d};_.push({gk:T,index:_.length}),h.push({x:D,y:A,value:0}),m.push({x:D,y:A,total:0,esq:0,trassen:0})}const x={...g,mitFrequenz:l.mitFrequenz,ImmissionPoints:_.map((y,E)=>({Name:`Grid_${E}`,Position:y.gk,HeightOffset:d,G_Bodenfaktor:1,OriginalData:{}}))},w=new Dn(x,l.dtmProcessor,_c);console.log(`Calculating immission values for ${_.length} grid points...`),console.log("mitFrequenz",l.mitFrequenz),e({gridCalculationProgress:{current:0,total:_.length}});for(let y=0;y<_.length;y++){try{const E=w.calculateLatLTForImmissionPointDetailed(y);h[y].value=E.total,m[y].total=E.total,m[y].esq=E.esq,m[y].trassen=E.trassen}catch(E){console.error(`Error calculating grid point ${y}:`,E),h[y].value=0,m[y].total=0,m[y].esq=0,m[y].trassen=0}e({gridCalculationProgress:{current:y+1,total:_.length}}),y%5===0&&await new Promise(E=>setTimeout(E,0)),y%10===0&&console.log(`Progress: ${y+1}/${_.length}`)}console.log("Grid calculation complete"),e({immissionGrid:h,immissionGridDetailed:m,isCalculatingGrid:!1,gridCalculationProgress:null})}catch(h){console.error("Error generating immission grid:",h),e({isCalculatingGrid:!1,gridCalculationProgress:null})}},clearImmissionGrid:()=>{e({immissionGrid:[],immissionGridDetailed:[],showImmissionGrid:!1,showGridPoints:!1})},setShowImmissionGrid:n=>{e({showImmissionGrid:n})},setShowGridPoints:n=>{e({showGridPoints:n})},setContourDisplayMode:n=>{e({contourDisplayMode:n})},updateImmissionGridSettings:n=>{e(i=>({immissionGridSettings:{...i.immissionGridSettings,...n}}))},getInterpolatedGridValue:(n,i,a,l)=>{const c=t(),{immissionGrid:f,immissionGridSettings:d}=c;if(!f||f.length===0)return null;const{gridSizeX:h,gridSizeY:m}=d,g=n/a*(h-1),_=i/l*(m-1),x=Math.floor(g),w=Math.floor(_),y=Math.min(x+1,h-1),E=Math.min(w+1,m-1),D=g-x,A=_-w,N=(U,I)=>{const W=I*h+U;return W>=0&&W<f.length?f[W].value:0},F=N(x,w),k=N(y,w),T=N(x,E),R=N(y,E),j=F*(1-D)+k*D,O=T*(1-D)+R*D;return j*(1-A)+O*A},getInterpolatedDetailedGridValue:(n,i,a,l,c)=>{const f=t(),{immissionGridDetailed:d,immissionGridSettings:h}=f;if(!d||d.length===0)return null;const{gridSizeX:m,gridSizeY:g}=h,_=n/a*(m-1),x=i/l*(g-1),w=Math.floor(_),y=Math.floor(x),E=Math.min(w+1,m-1),D=Math.min(y+1,g-1),A=_-w,N=x-y,F=W=>{switch(c){case"esq":return W.esq||0;case"trassen":return W.trassen||0;case"total":default:return W.total||0}},k=(W,B)=>{const re=B*m+W;return re>=0&&re<d.length?F(d[re]):0},T=k(w,y),R=k(E,y),j=k(w,D),O=k(E,D),G=T*(1-A)+R*A,U=j*(1-A)+O*A;return G*(1-N)+U*N},hasValidTransformation:()=>t().referencePoints.length>=2,recomputeTriangulation:()=>{const n=t(),i=Array.from(n.hoehenpunkte.values());if(i.length>=3){const{dreiecke:a,kanten:l}=x_(i),c=i.map((d,h)=>({LfdNummer:h+1,GK_Vektor:d.GK_Vektor})),f=new yc(a,c);if(f.setDGMKante(l),e({dgmDreiecke:a,dgmKanten:l,dtmProcessor:f}),n.calculator&&n.originalData){const d={...n.originalData,DGMDreiecke:a,DGMKanten:l,Hoehenpunkte:c},h=new Dn(d,f,_c);e({calculator:h})}}else e({dgmDreiecke:[],dgmKanten:[],dtmProcessor:null})},addMastLayoutTemplate:n=>{const i=n.id||In(),a={...n,id:i};return e(l=>{const c=new Map(l.mastLayoutTemplates);return c.set(i,a),{mastLayoutTemplates:c}}),i},updateMastLayoutTemplate:(n,i)=>{e(a=>{const l=new Map(a.mastLayoutTemplates);return l.set(n,{...i,id:n}),{mastLayoutTemplates:l}})},loadStandardTemplates:()=>{const n=new Map;Ub.forEach(i=>{const a=N0(i);a.id=In(),n.set(a.id,a)}),e({mastLayoutTemplates:n})},addTrasseNew:(n,i)=>{console.log("addTrasseNew called with name:",n,"templateId:",i);const a=In(),l={id:a,name:n,templateId:i,poleIds:[]};return console.log("addTrasseNew - created trasse:",l),e(c=>{const f=new Map(c.trassenNew);return f.set(a,l),console.log("addTrasseNew - newTrassen map size after add:",f.size),console.log("addTrasseNew - newTrassen entries:",Array.from(f.entries())),{trassenNew:f}}),t().clearImmissionCache(),t().clearImmissionGrid(),console.log("addTrasseNew - returning id:",a),a},updateTrasseNew:(n,i)=>{e(a=>{const l=new Map(a.trassenNew),c=l.get(n);return c&&l.set(n,{...c,...i}),{trassenNew:l}})},deleteTrasseNew:n=>{e(i=>{const a=new Map(i.trassenNew),l=a.get(n);if(l){const c=new Map(i.poles),f=new Map(i.connectionLines);return l.poleIds.forEach(d=>{c.delete(d)}),Array.from(f.entries()).forEach(([d,h])=>{h.trasseId===n&&f.delete(d)}),a.delete(n),{trassenNew:a,poles:c,connectionLines:f}}return{}})},updatePole:(n,i)=>{e(a=>{const l=new Map(a.poles),c=l.get(n);return c&&l.set(n,{...c,...i}),{poles:l}}),t().clearImmissionCache(),t().clearImmissionGrid()},deletePole:n=>{e(i=>{const a=new Map(i.poles),l=a.get(n);if(l){const c=new Map(i.trassenNew),f=c.get(l.trasseId);f&&(f.poleIds=f.poleIds.filter(h=>h!==n),c.set(l.trasseId,f));const d=new Map(i.connectionLines);return Array.from(d.entries()).forEach(([h,m])=>{const g=m.fromConnectionId,_=m.toConnectionId;(g.startsWith(n+"_")||_.startsWith(n+"_"))&&d.delete(h)}),a.delete(n),{poles:a,trassenNew:c,connectionLines:d}}return{}}),t().clearImmissionCache(),t().clearImmissionGrid()},addConnectionLine:n=>{const i=n.id||In(),a={...n,id:i};return e(l=>{const c=new Map(l.connectionLines);return c.set(i,a),{connectionLines:c}}),i},updateConnectionLine:(n,i)=>{e(a=>{const l=new Map(a.connectionLines),c=l.get(n);return c&&l.set(n,{...c,...i}),{connectionLines:l}})},deleteConnectionLine:n=>{e(i=>{const a=new Map(i.connectionLines);return a.delete(n),{connectionLines:a}})},convertNewFormatToComputation:n=>{const i=t(),a=i.trassenNew.get(n);if(!a)return null;const l=new Map;a.poleIds.forEach(h=>{const m=i.poles.get(h);m&&l.set(h,m)});const c=Array.from(i.connectionLines.values()).filter(h=>h.trasseId===n),f=Array.from(i.leiterTypes.values());return k0(a,l,c,f)},addCornerHoehenpunkte:()=>{const n=t(),{imageWidth:i,imageHeight:a,referencePoints:l}=n;if(l.length<2){console.log("Not enough reference points to create corner Hoehenpunkte");return}const c=l.filter(f=>!isNaN(f.pixelX)&&!isNaN(f.pixelY)&&!isNaN(f.gkRechts)&&!isNaN(f.gkHoch)&&f.pixelX>=0&&f.pixelY>=0);if(c.length<2){console.log("Not enough valid reference points for transformation");return}try{const f=c.map(_=>({gkRechts:_.gkRechts,gkHoch:_.gkHoch,pixelX:_.pixelX,pixelY:a-_.pixelY})),d=new G0(f),h=[{x:0,y:0,label:"SW"},{x:i,y:0,label:"SE"},{x:i,y:a,label:"NE"},{x:0,y:a,label:"NW"}],m=new Map(n.hoehenpunkte);let g=0;return h.forEach(_=>{const[x,w]=d.pixelToGK(_.x,_.y);if(isNaN(x)||isNaN(w)){console.error(`Failed to transform corner ${_.label}: got NaN values`);return}const y=1;if(!Array.from(m.values()).some(D=>{const A=Math.abs(D.GK_Vektor.GK.Rechts-x),N=Math.abs(D.GK_Vektor.GK.Hoch-w);return A<y&&N<y})){const D=In(),A={id:D,GK_Vektor:{GK:{Rechts:x,Hoch:w},z:50}};m.set(D,A),g++,console.log(`Added corner Hoehenpunkt at ${_.label}: (${x.toFixed(2)}, ${w.toFixed(2)})`)}}),g>0?(e({hoehenpunkte:m}),t().recomputeTriangulation(),g):0}catch(f){console.error("Error creating corner Hoehenpunkte:",f);return}},resetAllHeightsToTerrain:()=>{const n=t();if(!n.dtmProcessor){console.warn("No DTM processor available for terrain height calculation");return}let i=0;const a=new Map(n.poles);for(const[f,d]of a)try{const h=n.dtmProcessor.berechneHoeheDGM(d.position.GK);isNaN(h)||(a.set(f,{...d,nullpunktHeight:h}),i++)}catch(h){console.error(`Error calculating terrain height for pole ${f}:`,h)}const l=new Map(n.esqSources);for(const[f,d]of l)try{const h=n.dtmProcessor.berechneHoeheDGM(d.Position.GK);isNaN(h)||(l.set(f,{...d,Position:{...d.Position,z:h}}),i++)}catch(h){console.error(`Error calculating terrain height for ESQ ${f}:`,h)}const c=new Map(n.immissionPoints);for(const[f,d]of c)try{const h=n.dtmProcessor.berechneHoeheDGM(d.Position.GK);isNaN(h)||(c.set(f,{...d,Position:{...d.Position,z:h}}),i++)}catch(h){console.error(`Error calculating terrain height for immission point ${f}:`,h)}e({poles:a,esqSources:l,immissionPoints:c,isImmissionPointsComputed:!1}),t().clearImmissionCache(),t().clearImmissionGrid(),console.log(`Updated heights for ${i} entities to match terrain`)},addLeiterType:n=>{e(i=>{const a=new Map(i.leiterTypes);return a.set(n.Name,n),{leiterTypes:a}})},updateLeiterType:(n,i)=>{e(a=>{const l=new Map(a.leiterTypes);return n!==i.Name&&l.delete(n),l.set(i.Name,i),{leiterTypes:l}})},deleteLeiterType:n=>{e(i=>{const a=new Map(i.leiterTypes);return a.delete(n),{leiterTypes:a}})},setColorPalette:(n,i)=>{e(a=>({colorPalettes:{...a.colorPalettes,[n]:i}}))},setMitFrequenz:n=>{e({mitFrequenz:n}),t().clearImmissionCache()},setKt:n=>{e({kt:n}),t().clearImmissionCache(),t().clearImmissionGrid()},deleteMastLayoutTemplate:n=>{e(i=>{const a=new Map(i.mastLayoutTemplates);return a.delete(n),{mastLayoutTemplates:a}})}}));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),vx=e=>{const t=K4(e);return t.charAt(0).toUpperCase()+t.slice(1)},I2=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),q4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=te.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...f},d)=>te.createElement("svg",{ref:d,...V4,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:I2("lucide",a),...!l&&!q4(f)&&{"aria-hidden":"true"},...f},[...c.map(([h,m])=>te.createElement(h,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=(e,t)=>{const n=te.forwardRef(({className:i,...a},l)=>te.createElement(Y4,{ref:l,iconNode:t,className:I2(`lucide-${Z4(vx(e))}`,`lucide-${e}`,i),...a}));return n.displayName=vx(e),n};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],yx=kt("archive",X4);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],Q4=kt("bug",W4);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],U0=kt("check",J4);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Hl=kt("chevron-down",e6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],n6=kt("chevron-up",t6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],H2=kt("circle-alert",r6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],a6=kt("cpu",i6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],s6=kt("eye-off",o6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],u6=kt("eye",l6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],G2=kt("file-text",c6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],h6=kt("folder-open",f6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Gg=kt("grid-3x3",d6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_x=kt("image",m6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],l0=kt("info",p6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],xx=kt("layers",g6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],y6=kt("loader-circle",v6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],x6=kt("map-pin",_6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],jh=kt("map",b6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],D6=kt("mountain",w6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],S6=kt("mouse-pointer",E6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],A6=kt("move",C6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],M6=kt("palette",N6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],k6=kt("panels-top-left",T6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],L6=kt("play",z6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ud=kt("plus",F6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],$0=kt("printer",B6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Ug=kt("route",R6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vc=kt("save",O6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P6=kt("settings",j6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Z0=kt("square-pen",I6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],G6=kt("target",H6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rc=kt("trash-2",U6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Z6=kt("upload",$6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jo=kt("x",K6);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],sd=kt("zap",q6);function U2(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=U2(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function $2(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=U2(e))&&(i&&(i+=" "),i+=t);return i}const $g="-",V6=e=>{const t=X6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:c=>{const f=c.split($g);return f[0]===""&&f.length!==1&&f.shift(),Z2(f,t)||Y6(c)},getConflictingClassGroupIds:(c,f)=>{const d=n[c]||[];return f&&i[c]?[...d,...i[c]]:d}}},Z2=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],i=t.nextPart.get(n),a=i?Z2(e.slice(1),i):void 0;if(a)return a;if(t.validators.length===0)return;const l=e.join($g);return t.validators.find(({validator:c})=>c(l))?.classGroupId},bx=/^\[(.+)\]$/,Y6=e=>{if(bx.test(e)){const t=bx.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},X6=e=>{const{theme:t,classGroups:n}=e,i={nextPart:new Map,validators:[]};for(const a in n)K0(n[a],i,a,t);return i},K0=(e,t,n,i)=>{e.forEach(a=>{if(typeof a=="string"){const l=a===""?t:wx(t,a);l.classGroupId=n;return}if(typeof a=="function"){if(W6(a)){K0(a(i),t,n,i);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([l,c])=>{K0(c,wx(t,l),n,i)})})},wx=(e,t)=>{let n=e;return t.split($g).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},W6=e=>e.isThemeGetter,Q6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,i=new Map;const a=(l,c)=>{n.set(l,c),t++,t>e&&(t=0,i=n,n=new Map)};return{get(l){let c=n.get(l);if(c!==void 0)return c;if((c=i.get(l))!==void 0)return a(l,c),c},set(l,c){n.has(l)?n.set(l,c):a(l,c)}}},q0="!",V0=":",J6=V0.length,eM=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=a=>{const l=[];let c=0,f=0,d=0,h;for(let w=0;w<a.length;w++){let y=a[w];if(c===0&&f===0){if(y===V0){l.push(a.slice(d,w)),d=w+J6;continue}if(y==="/"){h=w;continue}}y==="["?c++:y==="]"?c--:y==="("?f++:y===")"&&f--}const m=l.length===0?a:a.substring(d),g=tM(m),_=g!==m,x=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:_,baseClassName:g,maybePostfixModifierPosition:x}};if(t){const a=t+V0,l=i;i=c=>c.startsWith(a)?l(c.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const a=i;i=l=>n({className:l,parseClassName:a})}return i},tM=e=>e.endsWith(q0)?e.substring(0,e.length-1):e.startsWith(q0)?e.substring(1):e,nM=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let l=[];return i.forEach(c=>{c[0]==="["||t[c]?(a.push(...l.sort(),c),l=[]):l.push(c)}),a.push(...l.sort()),a}},rM=e=>({cache:Q6(e.cacheSize),parseClassName:eM(e),sortModifiers:nM(e),...V6(e)}),iM=/\s+/,aM=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:l}=t,c=[],f=e.trim().split(iM);let d="";for(let h=f.length-1;h>=0;h-=1){const m=f[h],{isExternal:g,modifiers:_,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:y}=n(m);if(g){d=m+(d.length>0?" "+d:d);continue}let E=!!y,D=i(E?w.substring(0,y):w);if(!D){if(!E){d=m+(d.length>0?" "+d:d);continue}if(D=i(w),!D){d=m+(d.length>0?" "+d:d);continue}E=!1}const A=l(_).join(":"),N=x?A+q0:A,F=N+D;if(c.includes(F))continue;c.push(F);const k=a(D,E);for(let T=0;T<k.length;++T){const R=k[T];c.push(N+R)}d=m+(d.length>0?" "+d:d)}return d};function oM(){let e=0,t,n,i="";for(;e<arguments.length;)(t=arguments[e++])&&(n=K2(t))&&(i&&(i+=" "),i+=n);return i}const K2=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=K2(e[i]))&&(n&&(n+=" "),n+=t);return n};function sM(e,...t){let n,i,a,l=c;function c(d){const h=t.reduce((m,g)=>g(m),e());return n=rM(h),i=n.cache.get,a=n.cache.set,l=f,f(d)}function f(d){const h=i(d);if(h)return h;const m=aM(d,n);return a(d,m),m}return function(){return l(oM.apply(null,arguments))}}const Mn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},q2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,V2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,lM=/^\d+\/\d+$/,uM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,hM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fl=e=>lM.test(e),wt=e=>!!e&&!Number.isNaN(Number(e)),Mo=e=>!!e&&Number.isInteger(Number(e)),u0=e=>e.endsWith("%")&&wt(e.slice(0,-1)),Ma=e=>uM.test(e),mM=()=>!0,pM=e=>cM.test(e)&&!fM.test(e),Y2=()=>!1,gM=e=>hM.test(e),vM=e=>dM.test(e),yM=e=>!et(e)&&!tt(e),_M=e=>hu(e,Q2,Y2),et=e=>q2.test(e),Ds=e=>hu(e,J2,pM),c0=e=>hu(e,EM,wt),Dx=e=>hu(e,X2,Y2),xM=e=>hu(e,W2,vM),bh=e=>hu(e,ew,gM),tt=e=>V2.test(e),xc=e=>du(e,J2),bM=e=>du(e,SM),Ex=e=>du(e,X2),wM=e=>du(e,Q2),DM=e=>du(e,W2),wh=e=>du(e,ew,!0),hu=(e,t,n)=>{const i=q2.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},du=(e,t,n=!1)=>{const i=V2.exec(e);return i?i[1]?t(i[1]):n:!1},X2=e=>e==="position"||e==="percentage",W2=e=>e==="image"||e==="url",Q2=e=>e==="length"||e==="size"||e==="bg-size",J2=e=>e==="length",EM=e=>e==="number",SM=e=>e==="family-name",ew=e=>e==="shadow",CM=()=>{const e=Mn("color"),t=Mn("font"),n=Mn("text"),i=Mn("font-weight"),a=Mn("tracking"),l=Mn("leading"),c=Mn("breakpoint"),f=Mn("container"),d=Mn("spacing"),h=Mn("radius"),m=Mn("shadow"),g=Mn("inset-shadow"),_=Mn("text-shadow"),x=Mn("drop-shadow"),w=Mn("blur"),y=Mn("perspective"),E=Mn("aspect"),D=Mn("ease"),A=Mn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...F(),tt,et],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],j=()=>[tt,et,d],O=()=>[Fl,"full","auto",...j()],G=()=>[Mo,"none","subgrid",tt,et],U=()=>["auto",{span:["full",Mo,tt,et]},Mo,tt,et],I=()=>[Mo,"auto",tt,et],W=()=>["auto","min","max","fr",tt,et],B=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...j()],ee=()=>[Fl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],V=()=>[e,tt,et],Q=()=>[...F(),Ex,Dx,{position:[tt,et]}],$=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",wM,_M,{size:[tt,et]}],ne=()=>[u0,xc,Ds],se=()=>["","none","full",h,tt,et],ce=()=>["",wt,xc,Ds],pe=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ze=()=>[wt,u0,Ex,Dx],ke=()=>["","none",w,tt,et],Ie=()=>["none",wt,tt,et],Ze=()=>["none",wt,tt,et],Xe=()=>[wt,tt,et],$e=()=>[Fl,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ma],breakpoint:[Ma],color:[mM],container:[Ma],"drop-shadow":[Ma],ease:["in","out","in-out"],font:[yM],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ma],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ma],shadow:[Ma],spacing:["px",wt],text:[Ma],"text-shadow":[Ma],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fl,et,tt,E]}],container:["container"],columns:[{columns:[wt,et,tt,f]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Mo,"auto",tt,et]}],basis:[{basis:[Fl,"full","auto",f,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wt,Fl,"auto","initial","none",et]}],grow:[{grow:["",wt,tt,et]}],shrink:[{shrink:["",wt,tt,et]}],order:[{order:[Mo,"first","last","none",tt,et]}],"grid-cols":[{"grid-cols":G()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":G()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[f,"screen",...ee()]}],"min-w":[{"min-w":[f,"screen","none",...ee()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[c]},...ee()]}],h:[{h:["screen","lh",...ee()]}],"min-h":[{"min-h":["screen","lh","none",...ee()]}],"max-h":[{"max-h":["screen","lh",...ee()]}],"font-size":[{text:["base",n,xc,Ds]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,tt,c0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",u0,et]}],"font-family":[{font:[bM,et,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tt,et]}],"line-clamp":[{"line-clamp":[wt,"none",tt,c0]}],leading:[{leading:[l,...j()]}],"list-image":[{"list-image":["none",tt,et]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tt,et]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[wt,"from-font","auto",tt,Ds]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[wt,"auto",tt,et]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt,et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt,et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:$()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mo,tt,et],radial:["",tt,et],conic:[Mo,tt,et]},DM,xM]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wt,tt,et]}],"outline-w":[{outline:["",wt,xc,Ds]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",m,wh,bh]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",g,wh,bh]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[wt,Ds]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",_,wh,bh]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[wt,tt,et]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ze()}],"mask-image-linear-to-pos":[{"mask-linear-to":ze()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":ze()}],"mask-image-t-to-pos":[{"mask-t-to":ze()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":ze()}],"mask-image-r-to-pos":[{"mask-r-to":ze()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":ze()}],"mask-image-b-to-pos":[{"mask-b-to":ze()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":ze()}],"mask-image-l-to-pos":[{"mask-l-to":ze()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":ze()}],"mask-image-x-to-pos":[{"mask-x-to":ze()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":ze()}],"mask-image-y-to-pos":[{"mask-y-to":ze()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[tt,et]}],"mask-image-radial-from-pos":[{"mask-radial-from":ze()}],"mask-image-radial-to-pos":[{"mask-radial-to":ze()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[wt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ze()}],"mask-image-conic-to-pos":[{"mask-conic-to":ze()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:$()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tt,et]}],filter:[{filter:["","none",tt,et]}],blur:[{blur:ke()}],brightness:[{brightness:[wt,tt,et]}],contrast:[{contrast:[wt,tt,et]}],"drop-shadow":[{"drop-shadow":["","none",x,wh,bh]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",wt,tt,et]}],"hue-rotate":[{"hue-rotate":[wt,tt,et]}],invert:[{invert:["",wt,tt,et]}],saturate:[{saturate:[wt,tt,et]}],sepia:[{sepia:["",wt,tt,et]}],"backdrop-filter":[{"backdrop-filter":["","none",tt,et]}],"backdrop-blur":[{"backdrop-blur":ke()}],"backdrop-brightness":[{"backdrop-brightness":[wt,tt,et]}],"backdrop-contrast":[{"backdrop-contrast":[wt,tt,et]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wt,tt,et]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wt,tt,et]}],"backdrop-invert":[{"backdrop-invert":["",wt,tt,et]}],"backdrop-opacity":[{"backdrop-opacity":[wt,tt,et]}],"backdrop-saturate":[{"backdrop-saturate":[wt,tt,et]}],"backdrop-sepia":[{"backdrop-sepia":["",wt,tt,et]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tt,et]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wt,"initial",tt,et]}],ease:[{ease:["linear","initial",D,tt,et]}],delay:[{delay:[wt,tt,et]}],animate:[{animate:["none",A,tt,et]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,tt,et]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ie()}],"rotate-x":[{"rotate-x":Ie()}],"rotate-y":[{"rotate-y":Ie()}],"rotate-z":[{"rotate-z":Ie()}],scale:[{scale:Ze()}],"scale-x":[{"scale-x":Ze()}],"scale-y":[{"scale-y":Ze()}],"scale-z":[{"scale-z":Ze()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[tt,et,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt,et]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt,et]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[wt,xc,Ds,c0]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},AM=sM(CM);function dn(...e){return AM($2(e))}const NM=({title:e,children:t,defaultPosition:n={x:10,y:10},defaultMinimized:i=!1,className:a})=>{const[l,c]=te.useState(n),[f,d]=te.useState(!1),[h,m]=te.useState(i),[g,_]=te.useState({x:0,y:0}),x=te.useRef(null),w=D=>{D.target.closest(".drag-handle")&&(d(!0),_({x:D.clientX-l.x,y:D.clientY-l.y}),D.preventDefault())},y=D=>{f&&c({x:D.clientX-g.x,y:D.clientY-g.y})},E=()=>{d(!1)};return te.useEffect(()=>{if(f)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",E)}},[f,g]),b.jsxs("div",{ref:x,className:dn("absolute bg-white/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200 z-[1000]",f&&"cursor-move select-none",a),style:{left:`${l.x}px`,top:`${l.y}px`,minWidth:"250px"},onMouseDown:w,children:[b.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200 bg-gray-50 rounded-t-lg",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{className:"drag-handle p-1 hover:bg-gray-200 rounded cursor-move",title:"Verschieben",children:b.jsx(A6,{className:"h-4 w-4 text-gray-600"})}),b.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:e})]}),b.jsx("button",{onClick:()=>m(!h),className:"p-1 hover:bg-gray-200 rounded transition-colors",title:h?"Maximieren":"Minimieren",children:h?b.jsx(Hl,{className:"h-4 w-4 text-gray-600"}):b.jsx(n6,{className:"h-4 w-4 text-gray-600"})})]}),!h&&b.jsx("div",{className:"p-4",children:t})]})},Sx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Cx=$2,MM=(e,t)=>n=>{var i;if(t?.variants==null)return Cx(e,n?.class,n?.className);const{variants:a,defaultVariants:l}=t,c=Object.keys(a).map(h=>{const m=n?.[h],g=l?.[h];if(m===null)return null;const _=Sx(m)||Sx(g);return a[h][_]}),f=n&&Object.entries(n).reduce((h,m)=>{let[g,_]=m;return _===void 0||(h[g]=_),h},{}),d=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((h,m)=>{let{class:g,className:_,...x}=m;return Object.entries(x).every(w=>{let[y,E]=w;return Array.isArray(E)?E.includes({...l,...f}[y]):{...l,...f}[y]===E})?[...h,g,_]:h},[]);return Cx(e,c,d,n?.class,n?.className)},Zg=MM("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),rt=te.forwardRef(({className:e,variant:t,size:n,...i},a)=>b.jsx("button",{className:dn(Zg({variant:t,size:n,className:e})),ref:a,...i}));rt.displayName="Button";const At=te.forwardRef(({className:e,type:t,...n},i)=>b.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:i,...n}));At.displayName="Input";const lt=te.forwardRef(({className:e,...t},n)=>b.jsx("label",{ref:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e}`,...t}));lt.displayName="Label";const zc={isCapturing:!1,onMapClick:()=>{}},Ax=e=>{zc.isCapturing=e},TM=e=>{zc.onMapClick=e},kM=({imageHeight:e})=>(Ng({click:t=>{if(zc.isCapturing){const{lat:n,lng:i}=t.latlng,a=Math.round(i),l=Math.round(e-n);zc.onMapClick(a,l),zc.isCapturing=!1}}}),null),zM=()=>{const{referencePoints:e,projectImage:t,addReferencePoint:n,updateReferencePoint:i,deleteReferencePoint:a}=en(),[l,c]=te.useState(!1),[f,d]=te.useState(null),[h,m]=te.useState({rechts:"",hoch:""}),[g,_]=te.useState(null),[x,w]=te.useState({rechts:"",hoch:""}),y=()=>{c(!0),d(null),m({rechts:"",hoch:""}),Ax(!0),TM((j,O)=>{d({x:j,y:O}),c(!1)})},E=()=>{c(!1),d(null),m({rechts:"",hoch:""}),Ax(!1)},D=()=>{if(!f||!h.rechts||!h.hoch)return;const j=parseFloat(h.rechts),O=parseFloat(h.hoch);if(isNaN(j)||isNaN(O)){alert("Bitte gültige Koordinaten eingeben.");return}const G={id:In(),pixelX:f.x,pixelY:f.y,gkRechts:j,gkHoch:O,label:String.fromCharCode(65+e.length)};n(G),d(null),m({rechts:"",hoch:""})},A=j=>{_(j.id),w({rechts:j.gkRechts.toString(),hoch:j.gkHoch.toString()})},N=()=>{if(!g)return;const j=parseFloat(x.rechts),O=parseFloat(x.hoch);if(isNaN(j)||isNaN(O)){alert("Bitte gültige Koordinaten eingeben.");return}i(g,{gkRechts:j,gkHoch:O}),_(null),w({rechts:"",hoch:""})},F=()=>{_(null),w({rechts:"",hoch:""})},k=j=>{confirm("Referenzpunkt wirklich löschen?")&&a(j)},T=()=>{e.forEach(G=>{a(G.id)});const j={id:In(),pixelX:2126,pixelY:1594,gkRechts:3525941,gkHoch:5385710,label:"A"};n(j);const O={id:In(),pixelX:1514,pixelY:1150,gkRechts:3525836,gkHoch:5385784,label:"B"};n(O),console.log("Debug reference points set:",[j,O])},R=e.length>=2;return b.jsx(NM,{title:"Referenzpunkt-Kalibrierung",defaultPosition:{x:window.innerWidth-360,y:300},className:"w-80",children:b.jsxs("div",{className:"space-y-4",children:[!t&&b.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:b.jsxs("p",{className:"text-xs text-yellow-800",children:[b.jsx("span",{className:"font-semibold",children:"Hinweis:"}),b.jsx("br",{}),"Bitte laden Sie zuerst ein Lageplan-Bild hoch."]})}),t&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:`p-2 rounded text-xs ${R?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[e.length===0&&"Setzen Sie mindestens 2 Referenzpunkte",e.length===1&&"1 Referenzpunkt gesetzt (min. 2 benötigt)",e.length>=2&&`${e.length} Referenzpunkte gesetzt ✓`]}),e.length>0&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{className:"text-xs font-semibold",children:"Gesetzte Punkte:"}),e.map(j=>b.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200",children:[b.jsxs("div",{className:"flex items-center justify-between mb-1",children:[b.jsxs("span",{className:"font-semibold text-sm",children:[b.jsx(x6,{className:"h-3 w-3 inline mr-1"}),"Punkt ",j.label]}),b.jsx("div",{className:"flex gap-1",children:g!==j.id&&b.jsxs(b.Fragment,{children:[b.jsx(rt,{size:"sm",variant:"ghost",className:"h-6 px-2",onClick:()=>A(j),children:"Bearbeiten"}),b.jsx(rt,{size:"sm",variant:"ghost",className:"h-6 px-2 text-red-600 hover:text-red-700",onClick:()=>k(j.id),children:b.jsx(Rc,{className:"h-3 w-3"})})]})})]}),g===j.id?b.jsxs("div",{className:"space-y-2 mt-2",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs",children:"GK Rechts:"}),b.jsx(At,{type:"number",value:x.rechts,onChange:O=>w({...x,rechts:O.target.value}),className:"h-7 text-xs"})]}),b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs",children:"GK Hoch:"}),b.jsx(At,{type:"number",value:x.hoch,onChange:O=>w({...x,hoch:O.target.value}),className:"h-7 text-xs"})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(rt,{size:"sm",variant:"default",className:"h-7 text-xs flex-1",onClick:N,children:[b.jsx(U0,{className:"h-3 w-3 mr-1"}),"Speichern"]}),b.jsxs(rt,{size:"sm",variant:"outline",className:"h-7 text-xs flex-1",onClick:F,children:[b.jsx(jo,{className:"h-3 w-3 mr-1"}),"Abbrechen"]})]})]}):b.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[b.jsxs("div",{children:["Pixel: (",j.pixelX,", ",j.pixelY,")"]}),b.jsxs("div",{children:["GK: (",j.gkRechts.toFixed(2),", ",j.gkHoch.toFixed(2),")"]})]})]},j.id))]}),!l&&!f&&b.jsxs(rt,{variant:"default",size:"sm",onClick:y,className:"w-full",disabled:e.length>=4,children:[b.jsx(Ud,{className:"h-4 w-4 mr-2"}),"Neuen Referenzpunkt hinzufügen"]}),l&&b.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[b.jsxs("p",{className:"text-xs text-blue-800 mb-2",children:[b.jsx(S6,{className:"h-3 w-3 inline mr-1"}),b.jsx("span",{className:"font-semibold",children:"Klicken Sie auf die Karte"}),b.jsx("br",{}),"um die Position des Referenzpunkts zu markieren."]}),b.jsxs(rt,{size:"sm",variant:"outline",onClick:E,className:"w-full h-7 text-xs",children:[b.jsx(jo,{className:"h-3 w-3 mr-1"}),"Abbrechen"]})]}),f&&b.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 rounded border border-gray-200",children:[b.jsxs("div",{className:"text-xs",children:[b.jsx("strong",{children:"Pixel-Position:"})," (",f.x,", ",f.y,")"]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs",children:"GK Rechts-Wert:"}),b.jsx(At,{type:"number",step:"0.01",value:h.rechts,onChange:j=>m({...h,rechts:j.target.value}),placeholder:"z.B. 3522278.47",className:"h-8 text-xs mt-1"})]}),b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs",children:"GK Hoch-Wert:"}),b.jsx(At,{type:"number",step:"0.01",value:h.hoch,onChange:j=>m({...h,hoch:j.target.value}),placeholder:"z.B. 5387345.79",className:"h-8 text-xs mt-1"})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(rt,{size:"sm",variant:"default",onClick:D,disabled:!h.rechts||!h.hoch,className:"flex-1 h-8 text-xs",children:[b.jsx(U0,{className:"h-3 w-3 mr-1"}),"Punkt hinzufügen"]}),b.jsxs(rt,{size:"sm",variant:"outline",onClick:E,className:"flex-1 h-8 text-xs",children:[b.jsx(jo,{className:"h-3 w-3 mr-1"}),"Abbrechen"]})]})]}),b.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[b.jsxs(rt,{size:"sm",variant:"outline",onClick:T,className:"w-full h-8 text-xs border-orange-300 text-orange-600 hover:bg-orange-50",children:[b.jsx(Q4,{className:"h-3 w-3 mr-1"}),"Debug: Test-Referenzpunkte setzen"]}),b.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-y-0.5",children:[b.jsx("div",{children:"Punkt A: Pixel(2126, 1594) → GK(3525941, 5385710)"}),b.jsx("div",{children:"Punkt B: Pixel(1514, 1150) → GK(3525836, 5385784)"})]})]})]})]})})};function Ph(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function LM(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tw(e){let t,n,i;e.length!==2?(t=Ph,n=(f,d)=>Ph(e(f),d),i=(f,d)=>e(f)-d):(t=e===Ph||e===LM?e:FM,n=e,i=e);function a(f,d,h=0,m=f.length){if(h<m){if(t(d,d)!==0)return m;do{const g=h+m>>>1;n(f[g],d)<0?h=g+1:m=g}while(h<m)}return h}function l(f,d,h=0,m=f.length){if(h<m){if(t(d,d)!==0)return m;do{const g=h+m>>>1;n(f[g],d)<=0?h=g+1:m=g}while(h<m)}return h}function c(f,d,h=0,m=f.length){const g=a(f,d,h,m-1);return g>h&&i(f[g-1],d)>-i(f[g],d)?g-1:g}return{left:a,center:c,right:l}}function FM(){return 0}function BM(e){return e===null?NaN:+e}const RM=tw(Ph),OM=RM.right;tw(BM).center;function jM(e,t){let n=0;for(let i of e)i!=null&&(i=+i)>=i&&++n;return n}function PM(e,t){let n,i;if(t===void 0)for(const a of e)a!=null&&(n===void 0?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)));else{let a=-1;for(let l of e)(l=t(l,++a,e))!=null&&(n===void 0?l>=l&&(n=i=l):(n>l&&(n=l),i<l&&(i=l)))}return[n,i]}class tu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let a=0;a<this._n&&a<32;a++){const l=n[a],c=t+l,f=Math.abs(t)<Math.abs(l)?t-(c-l):l-(c-t);f&&(n[i++]=f),t=c}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,a,l,c=0;if(n>0){for(c=t[--n];n>0&&(i=c,a=t[--n],c=i+a,l=a-(c-i),!l););n>0&&(l<0&&t[n-1]<0||l>0&&t[n-1]>0)&&(a=l*2,i=c+a,a==i-c&&(c=i))}return c}}const IM=Math.sqrt(50),HM=Math.sqrt(10),GM=Math.sqrt(2);function ld(e,t,n){const i=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),l=i/Math.pow(10,a),c=l>=IM?10:l>=HM?5:l>=GM?2:1;let f,d,h;return a<0?(h=Math.pow(10,-a)/c,f=Math.round(e*h),d=Math.round(t*h),f/h<e&&++f,d/h>t&&--d,h=-h):(h=Math.pow(10,a)*c,f=Math.round(e/h),d=Math.round(t/h),f*h<e&&++f,d*h>t&&--d),d<f&&.5<=n&&n<2?ld(e,t,n*2):[f,d,h]}function nw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[a,l,c]=i?ld(t,e,n):ld(e,t,n);if(!(l>=a))return[];const f=l-a+1,d=new Array(f);if(i)if(c<0)for(let h=0;h<f;++h)d[h]=(l-h)/-c;else for(let h=0;h<f;++h)d[h]=(l-h)*c;else if(c<0)for(let h=0;h<f;++h)d[h]=(a+h)/-c;else for(let h=0;h<f;++h)d[h]=(a+h)*c;return d}function ud(e,t,n){return t=+t,e=+e,n=+n,ld(e,t,n)[2]}function UM(e,t,n){t=+t,e=+e,n=+n;const i=t<e,a=i?ud(t,e,n):ud(e,t,n);return(i?-1:1)*(a<0?1/-a:a)}function $M(e,t,n){let i;for(;;){const a=ud(e,t,n);if(a===i||a===0||!isFinite(a))return[e,t];a>0?(e=Math.floor(e/a)*a,t=Math.ceil(t/a)*a):a<0&&(e=Math.ceil(e*a)/a,t=Math.floor(t*a)/a),i=a}}function ZM(e){return Math.max(1,Math.ceil(Math.log(jM(e))/Math.LN2)+1)}var KM=Array.prototype,qM=KM.slice;function VM(e,t){return e-t}function YM(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}const Nx=e=>()=>e;function XM(e,t){for(var n=-1,i=t.length,a;++n<i;)if(a=WM(e,t[n]))return a;return 0}function WM(e,t){for(var n=t[0],i=t[1],a=-1,l=0,c=e.length,f=c-1;l<c;f=l++){var d=e[l],h=d[0],m=d[1],g=e[f],_=g[0],x=g[1];if(QM(d,g,t))return 0;m>i!=x>i&&n<(_-h)*(i-m)/(x-m)+h&&(a=-a)}return a}function QM(e,t,n){var i;return JM(e,t,n)&&eT(e[i=+(e[0]===t[0])],n[i],t[i])}function JM(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function eT(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function tT(){}var Ta=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function rw(){var e=1,t=1,n=ZM,i=d;function a(h){var m=n(h);if(Array.isArray(m))m=m.slice().sort(VM);else{const g=PM(h,nT);for(m=nw(...$M(g[0],g[1],m),m);m[m.length-1]>=g[1];)m.pop();for(;m[1]<g[0];)m.shift()}return m.map(g=>l(h,g))}function l(h,m){const g=m==null?NaN:+m;if(isNaN(g))throw new Error(`invalid value: ${m}`);var _=[],x=[];return c(h,g,function(w){i(w,h,g),YM(w)>0?_.push([w]):x.push(w)}),x.forEach(function(w){for(var y=0,E=_.length,D;y<E;++y)if(XM((D=_[y])[0],w)!==-1){D.push(w);return}}),{type:"MultiPolygon",value:m,coordinates:_}}function c(h,m,g){var _=new Array,x=new Array,w,y,E,D,A,N;for(w=y=-1,D=Es(h[0],m),Ta[D<<1].forEach(F);++w<e-1;)E=D,D=Es(h[w+1],m),Ta[E|D<<1].forEach(F);for(Ta[D<<0].forEach(F);++y<t-1;){for(w=-1,D=Es(h[y*e+e],m),A=Es(h[y*e],m),Ta[D<<1|A<<2].forEach(F);++w<e-1;)E=D,D=Es(h[y*e+e+w+1],m),N=A,A=Es(h[y*e+w+1],m),Ta[E|D<<1|A<<2|N<<3].forEach(F);Ta[D|A<<3].forEach(F)}for(w=-1,A=h[y*e]>=m,Ta[A<<2].forEach(F);++w<e-1;)N=A,A=Es(h[y*e+w+1],m),Ta[A<<2|N<<3].forEach(F);Ta[A<<3].forEach(F);function F(k){var T=[k[0][0]+w,k[0][1]+y],R=[k[1][0]+w,k[1][1]+y],j=f(T),O=f(R),G,U;(G=x[j])?(U=_[O])?(delete x[G.end],delete _[U.start],G===U?(G.ring.push(R),g(G.ring)):_[G.start]=x[U.end]={start:G.start,end:U.end,ring:G.ring.concat(U.ring)}):(delete x[G.end],G.ring.push(R),x[G.end=O]=G):(G=_[O])?(U=x[j])?(delete _[G.start],delete x[U.end],G===U?(G.ring.push(R),g(G.ring)):_[U.start]=x[G.end]={start:U.start,end:G.end,ring:U.ring.concat(G.ring)}):(delete _[G.start],G.ring.unshift(T),_[G.start=j]=G):_[j]=x[O]={start:j,end:O,ring:[T,R]}}}function f(h){return h[0]*2+h[1]*(e+1)*4}function d(h,m,g){h.forEach(function(_){var x=_[0],w=_[1],y=x|0,E=w|0,D=f0(m[E*e+y]);x>0&&x<e&&y===x&&(_[0]=Mx(x,f0(m[E*e+y-1]),D,g)),w>0&&w<t&&E===w&&(_[1]=Mx(w,f0(m[(E-1)*e+y]),D,g))})}return a.contour=l,a.size=function(h){if(!arguments.length)return[e,t];var m=Math.floor(h[0]),g=Math.floor(h[1]);if(!(m>=0&&g>=0))throw new Error("invalid size");return e=m,t=g,a},a.thresholds=function(h){return arguments.length?(n=typeof h=="function"?h:Array.isArray(h)?Nx(qM.call(h)):Nx(h),a):n},a.smooth=function(h){return arguments.length?(i=h?d:tT,a):i===d},a}function nT(e){return isFinite(e)?e:NaN}function Es(e,t){return e==null?!1:+e>=t}function f0(e){return e==null||isNaN(e=+e)?-1/0:e}function Mx(e,t,n,i){const a=i-t,l=n-t,c=isFinite(a)||isFinite(l)?a/l:Math.sign(a)/Math.sign(l);return isNaN(c)?e:e+c-.5}function rT(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function iT(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}function $d(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Kg(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function mu(){}var zs=.7,nu=1/zs,Vl="\\s*([+-]?\\d+)\\s*",Oc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aT=/^#([0-9a-f]{3,8})$/,oT=new RegExp(`^rgb\\(${Vl},${Vl},${Vl}\\)$`),sT=new RegExp(`^rgb\\(${Wi},${Wi},${Wi}\\)$`),lT=new RegExp(`^rgba\\(${Vl},${Vl},${Vl},${Oc}\\)$`),uT=new RegExp(`^rgba\\(${Wi},${Wi},${Wi},${Oc}\\)$`),cT=new RegExp(`^hsl\\(${Oc},${Wi},${Wi}\\)$`),fT=new RegExp(`^hsla\\(${Oc},${Wi},${Wi},${Oc}\\)$`),Tx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$d(mu,Ls,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kx,formatHex:kx,formatHex8:hT,formatHsl:dT,formatRgb:zx,toString:zx});function kx(){return this.rgb().formatHex()}function hT(){return this.rgb().formatHex8()}function dT(){return aw(this).formatHsl()}function zx(){return this.rgb().formatRgb()}function Ls(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=aT.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Lx(t):n===3?new lr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oT.exec(e))?new lr(t[1],t[2],t[3],1):(t=sT.exec(e))?new lr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lT.exec(e))?Dh(t[1],t[2],t[3],t[4]):(t=uT.exec(e))?Dh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cT.exec(e))?Rx(t[1],t[2]/100,t[3]/100,1):(t=fT.exec(e))?Rx(t[1],t[2]/100,t[3]/100,t[4]):Tx.hasOwnProperty(e)?Lx(Tx[e]):e==="transparent"?new lr(NaN,NaN,NaN,0):null}function Lx(e){return new lr(e>>16&255,e>>8&255,e&255,1)}function Dh(e,t,n,i){return i<=0&&(e=t=n=NaN),new lr(e,t,n,i)}function iw(e){return e instanceof mu||(e=Ls(e)),e?(e=e.rgb(),new lr(e.r,e.g,e.b,e.opacity)):new lr}function jc(e,t,n,i){return arguments.length===1?iw(e):new lr(e,t,n,i??1)}function lr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}$d(lr,jc,Kg(mu,{brighter(e){return e=e==null?nu:Math.pow(nu,e),new lr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zs:Math.pow(zs,e),new lr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new lr(Ms(this.r),Ms(this.g),Ms(this.b),cd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fx,formatHex:Fx,formatHex8:mT,formatRgb:Bx,toString:Bx}));function Fx(){return`#${As(this.r)}${As(this.g)}${As(this.b)}`}function mT(){return`#${As(this.r)}${As(this.g)}${As(this.b)}${As((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bx(){const e=cd(this.opacity);return`${e===1?"rgb(":"rgba("}${Ms(this.r)}, ${Ms(this.g)}, ${Ms(this.b)}${e===1?")":`, ${e})`}`}function cd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ms(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function As(e){return e=Ms(e),(e<16?"0":"")+e.toString(16)}function Rx(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bi(e,t,n,i)}function aw(e){if(e instanceof bi)return new bi(e.h,e.s,e.l,e.opacity);if(e instanceof mu||(e=Ls(e)),!e)return new bi;if(e instanceof bi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),l=Math.max(t,n,i),c=NaN,f=l-a,d=(l+a)/2;return f?(t===l?c=(n-i)/f+(n<i)*6:n===l?c=(i-t)/f+2:c=(t-n)/f+4,f/=d<.5?l+a:2-l-a,c*=60):f=d>0&&d<1?0:c,new bi(c,f,d,e.opacity)}function pT(e,t,n,i){return arguments.length===1?aw(e):new bi(e,t,n,i??1)}function bi(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}$d(bi,pT,Kg(mu,{brighter(e){return e=e==null?nu:Math.pow(nu,e),new bi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zs:Math.pow(zs,e),new bi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new lr(h0(e>=240?e-240:e+120,a,i),h0(e,a,i),h0(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new bi(Ox(this.h),Eh(this.s),Eh(this.l),cd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cd(this.opacity);return`${e===1?"hsl(":"hsla("}${Ox(this.h)}, ${Eh(this.s)*100}%, ${Eh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ox(e){return e=(e||0)%360,e<0?e+360:e}function Eh(e){return Math.max(0,Math.min(1,e||0))}function h0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const gT=Math.PI/180,vT=180/Math.PI;var ow=-.14861,qg=1.78277,Vg=-.29227,Zd=-.90649,Pc=1.97294,jx=Pc*Zd,Px=Pc*qg,Ix=qg*Vg-Zd*ow;function yT(e){if(e instanceof Ts)return new Ts(e.h,e.s,e.l,e.opacity);e instanceof lr||(e=iw(e));var t=e.r/255,n=e.g/255,i=e.b/255,a=(Ix*i+jx*t-Px*n)/(Ix+jx-Px),l=i-a,c=(Pc*(n-a)-Vg*l)/Zd,f=Math.sqrt(c*c+l*l)/(Pc*a*(1-a)),d=f?Math.atan2(c,l)*vT-120:NaN;return new Ts(d<0?d+360:d,f,a,e.opacity)}function Ji(e,t,n,i){return arguments.length===1?yT(e):new Ts(e,t,n,i??1)}function Ts(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}$d(Ts,Ji,Kg(mu,{brighter(e){return e=e==null?nu:Math.pow(nu,e),new Ts(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zs:Math.pow(zs,e),new Ts(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*gT,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),a=Math.sin(e);return new lr(255*(t+n*(ow*i+qg*a)),255*(t+n*(Vg*i+Zd*a)),255*(t+n*(Pc*i)),this.opacity)}}));function _T(e,t,n,i,a){var l=e*e,c=l*e;return((1-3*e+3*l-c)*t+(4-6*l+3*c)*n+(1+3*e+3*l-3*c)*i+c*a)/6}function xT(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],l=e[i+1],c=i>0?e[i-1]:2*a-l,f=i<t-1?e[i+2]:2*l-a;return _T((n-i/t)*t,c,a,l,f)}}const Kd=e=>()=>e;function sw(e,t){return function(n){return e+n*t}}function bT(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function wT(e,t){var n=t-e;return n?sw(e,n>180||n<-180?n-360*Math.round(n/360):n):Kd(isNaN(e)?t:e)}function DT(e){return(e=+e)==1?Yl:function(t,n){return n-t?bT(t,n,e):Kd(isNaN(t)?n:t)}}function Yl(e,t){var n=t-e;return n?sw(e,n):Kd(isNaN(e)?t:e)}const fd=(function e(t){var n=DT(t);function i(a,l){var c=n((a=jc(a)).r,(l=jc(l)).r),f=n(a.g,l.g),d=n(a.b,l.b),h=Yl(a.opacity,l.opacity);return function(m){return a.r=c(m),a.g=f(m),a.b=d(m),a.opacity=h(m),a+""}}return i.gamma=e,i})(1);function ET(e){return function(t){var n=t.length,i=new Array(n),a=new Array(n),l=new Array(n),c,f;for(c=0;c<n;++c)f=jc(t[c]),i[c]=f.r||0,a[c]=f.g||0,l[c]=f.b||0;return i=e(i),a=e(a),l=e(l),f.opacity=1,function(d){return f.r=i(d),f.g=a(d),f.b=l(d),f+""}}}var ST=ET(xT);function CT(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(l){for(a=0;a<n;++a)i[a]=e[a]*(1-l)+t[a]*l;return i}}function AT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function NT(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),l=new Array(n),c;for(c=0;c<i;++c)a[c]=qd(e[c],t[c]);for(;c<n;++c)l[c]=t[c];return function(f){for(c=0;c<i;++c)l[c]=a[c](f);return l}}function MT(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function xi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function TT(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=qd(e[a],t[a]):i[a]=t[a];return function(l){for(a in n)i[a]=n[a](l);return i}}var Y0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d0=new RegExp(Y0.source,"g");function kT(e){return function(){return e}}function zT(e){return function(t){return e(t)+""}}function lw(e,t){var n=Y0.lastIndex=d0.lastIndex=0,i,a,l,c=-1,f=[],d=[];for(e=e+"",t=t+"";(i=Y0.exec(e))&&(a=d0.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),f[c]?f[c]+=l:f[++c]=l),(i=i[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,d.push({i:c,x:xi(i,a)})),n=d0.lastIndex;return n<t.length&&(l=t.slice(n),f[c]?f[c]+=l:f[++c]=l),f.length<2?d[0]?zT(d[0].x):kT(t):(t=d.length,function(h){for(var m=0,g;m<t;++m)f[(g=d[m]).i]=g.x(h);return f.join("")})}function qd(e,t){var n=typeof t,i;return t==null||n==="boolean"?Kd(t):(n==="number"?xi:n==="string"?(i=Ls(t))?(t=i,fd):lw:t instanceof Ls?fd:t instanceof Date?MT:AT(t)?CT:Array.isArray(t)?NT:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TT:xi)(e,t)}function uw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Hx=180/Math.PI,X0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cw(e,t,n,i,a,l){var c,f,d;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,d/=f),e*i<t*n&&(e=-e,t=-t,d=-d,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*Hx,skewX:Math.atan(d)*Hx,scaleX:c,scaleY:f}}var Sh;function LT(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?X0:cw(t.a,t.b,t.c,t.d,t.e,t.f)}function FT(e){return e==null||(Sh||(Sh=document.createElementNS("http://www.w3.org/2000/svg","g")),Sh.setAttribute("transform",e),!(e=Sh.transform.baseVal.consolidate()))?X0:(e=e.matrix,cw(e.a,e.b,e.c,e.d,e.e,e.f))}function fw(e,t,n,i){function a(h){return h.length?h.pop()+" ":""}function l(h,m,g,_,x,w){if(h!==g||m!==_){var y=x.push("translate(",null,t,null,n);w.push({i:y-4,x:xi(h,g)},{i:y-2,x:xi(m,_)})}else(g||_)&&x.push("translate("+g+t+_+n)}function c(h,m,g,_){h!==m?(h-m>180?m+=360:m-h>180&&(h+=360),_.push({i:g.push(a(g)+"rotate(",null,i)-2,x:xi(h,m)})):m&&g.push(a(g)+"rotate("+m+i)}function f(h,m,g,_){h!==m?_.push({i:g.push(a(g)+"skewX(",null,i)-2,x:xi(h,m)}):m&&g.push(a(g)+"skewX("+m+i)}function d(h,m,g,_,x,w){if(h!==g||m!==_){var y=x.push(a(x)+"scale(",null,",",null,")");w.push({i:y-4,x:xi(h,g)},{i:y-2,x:xi(m,_)})}else(g!==1||_!==1)&&x.push(a(x)+"scale("+g+","+_+")")}return function(h,m){var g=[],_=[];return h=e(h),m=e(m),l(h.translateX,h.translateY,m.translateX,m.translateY,g,_),c(h.rotate,m.rotate,g,_),f(h.skewX,m.skewX,g,_),d(h.scaleX,h.scaleY,m.scaleX,m.scaleY,g,_),h=m=null,function(x){for(var w=-1,y=_.length,E;++w<y;)g[(E=_[w]).i]=E.x(x);return g.join("")}}}var BT=fw(LT,"px, ","px)","deg)"),RT=fw(FT,", ",")",")");function hw(e){return(function t(n){n=+n;function i(a,l){var c=e((a=Ji(a)).h,(l=Ji(l)).h),f=Yl(a.s,l.s),d=Yl(a.l,l.l),h=Yl(a.opacity,l.opacity);return function(m){return a.h=c(m),a.s=f(m),a.l=d(Math.pow(m,n)),a.opacity=h(m),a+""}}return i.gamma=t,i})(1)}hw(wT);var Yg=hw(Yl);function OT(e){return function(){return e}}function jT(e){return+e}var Gx=[0,1];function Ro(e){return e}function W0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:OT(isNaN(t)?NaN:.5)}function PT(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function IT(e,t,n){var i=e[0],a=e[1],l=t[0],c=t[1];return a<i?(i=W0(a,i),l=n(c,l)):(i=W0(i,a),l=n(l,c)),function(f){return l(i(f))}}function HT(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),l=new Array(i),c=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<i;)a[c]=W0(e[c],e[c+1]),l[c]=n(t[c],t[c+1]);return function(f){var d=OM(e,f,1,i)-1;return l[d](a[d](f))}}function GT(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function UT(){var e=Gx,t=Gx,n=qd,i,a,l,c=Ro,f,d,h;function m(){var _=Math.min(e.length,t.length);return c!==Ro&&(c=PT(e[0],e[_-1])),f=_>2?HT:IT,d=h=null,g}function g(_){return _==null||isNaN(_=+_)?l:(d||(d=f(e.map(i),t,n)))(i(c(_)))}return g.invert=function(_){return c(a((h||(h=f(t,e.map(i),xi)))(_)))},g.domain=function(_){return arguments.length?(e=Array.from(_,jT),m()):e.slice()},g.range=function(_){return arguments.length?(t=Array.from(_),m()):t.slice()},g.rangeRound=function(_){return t=Array.from(_),n=uw,m()},g.clamp=function(_){return arguments.length?(c=_?!0:Ro,m()):c!==Ro},g.interpolate=function(_){return arguments.length?(n=_,m()):n},g.unknown=function(_){return arguments.length?(l=_,g):l},function(_,x){return i=_,a=x,m()}}function $T(){return UT()(Ro,Ro)}function ZT(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ru(e){return e=hd(Math.abs(e)),e?e[1]:NaN}function KT(e,t){return function(n,i){for(var a=n.length,l=[],c=0,f=e[0],d=0;a>0&&f>0&&(d+f+1>i&&(f=Math.max(1,i-d)),l.push(n.substring(a-=f,a+f)),!((d+=f+1)>i));)f=e[c=(c+1)%e.length];return l.reverse().join(t)}}function qT(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var VT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dd(e){if(!(t=VT.exec(e)))throw new Error("invalid format: "+e);var t;return new Xg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dd.prototype=Xg.prototype;function Xg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function YT(e){e:for(var t=e.length,n=1,i=-1,a;n<t;++n)switch(e[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var dw;function XT(e,t){var n=hd(e,t);if(!n)return e+"";var i=n[0],a=n[1],l=a-(dw=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=i.length;return l===c?i:l>c?i+new Array(l-c+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+hd(e,Math.max(0,t+l-1))[0]}function Ux(e,t){var n=hd(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const $x={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ZT,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ux(e*100,t),r:Ux,s:XT,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zx(e){return e}var Kx=Array.prototype.map,qx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function WT(e){var t=e.grouping===void 0||e.thousands===void 0?Zx:KT(Kx.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?Zx:qT(Kx.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function h(g){g=dd(g);var _=g.fill,x=g.align,w=g.sign,y=g.symbol,E=g.zero,D=g.width,A=g.comma,N=g.precision,F=g.trim,k=g.type;k==="n"?(A=!0,k="g"):$x[k]||(N===void 0&&(N=12),F=!0,k="g"),(E||_==="0"&&x==="=")&&(E=!0,_="0",x="=");var T=y==="$"?n:y==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",R=y==="$"?i:/[%p]/.test(k)?c:"",j=$x[k],O=/[defgprs%]/.test(k);N=N===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function G(U){var I=T,W=R,B,re,K;if(k==="c")W=j(U)+W,U="";else{U=+U;var ee=U<0||1/U<0;if(U=isNaN(U)?d:j(Math.abs(U),N),F&&(U=YT(U)),ee&&+U==0&&w!=="+"&&(ee=!1),I=(ee?w==="("?w:f:w==="-"||w==="("?"":w)+I,W=(k==="s"?qx[8+dw/3]:"")+W+(ee&&w==="("?")":""),O){for(B=-1,re=U.length;++B<re;)if(K=U.charCodeAt(B),48>K||K>57){W=(K===46?a+U.slice(B+1):U.slice(B))+W,U=U.slice(0,B);break}}}A&&!E&&(U=t(U,1/0));var V=I.length+U.length+W.length,Q=V<D?new Array(D-V+1).join(_):"";switch(A&&E&&(U=t(Q+U,Q.length?D-W.length:1/0),Q=""),x){case"<":U=I+U+W+Q;break;case"=":U=I+Q+U+W;break;case"^":U=Q.slice(0,V=Q.length>>1)+I+U+W+Q.slice(V);break;default:U=Q+I+U+W;break}return l(U)}return G.toString=function(){return g+""},G}function m(g,_){var x=h((g=dd(g),g.type="f",g)),w=Math.max(-8,Math.min(8,Math.floor(ru(_)/3)))*3,y=Math.pow(10,-w),E=qx[8+w/3];return function(D){return x(y*D)+E}}return{format:h,formatPrefix:m}}var Ch,mw,pw;QT({thousands:",",grouping:[3],currency:["$",""]});function QT(e){return Ch=WT(e),mw=Ch.format,pw=Ch.formatPrefix,Ch}function JT(e){return Math.max(0,-ru(Math.abs(e)))}function ek(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ru(t)/3)))*3-ru(Math.abs(e)))}function tk(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ru(t)-ru(e))+1}function nk(e,t,n,i){var a=UM(e,t,n),l;switch(i=dd(i??",f"),i.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(l=ek(a,c))&&(i.precision=l),pw(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=tk(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=JT(a))&&(i.precision=l-(i.type==="%")*2);break}}return mw(i)}function gw(e){var t=e.domain;return e.ticks=function(n){var i=t();return nw(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var a=t();return nk(a[0],a[a.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),a=0,l=i.length-1,c=i[a],f=i[l],d,h,m=10;for(f<c&&(h=c,c=f,f=h,h=a,a=l,l=h);m-- >0;){if(h=ud(c,f,n),h===d)return i[a]=c,i[l]=f,t(i);if(h>0)c=Math.floor(c/h)*h,f=Math.ceil(f/h)*h;else if(h<0)c=Math.ceil(c*h)/h,f=Math.floor(f*h)/h;else break;d=h}return e},e}function Q0(){var e=$T();return e.copy=function(){return GT(e,Q0())},rT.apply(e,arguments),gw(e)}function rk(){var e=0,t=1,n,i,a,l,c=Ro,f=!1,d;function h(g){return g==null||isNaN(g=+g)?d:c(a===0?.5:(g=(l(g)-n)*a,f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,n=l(e=+e),i=l(t=+t),a=n===i?0:1/(i-n),h):[e,t]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(_){var x,w;return arguments.length?([x,w]=_,c=g(x,w),h):[c(0),c(1)]}}return h.range=m(qd),h.rangeRound=m(uw),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return l=g,n=g(e),i=g(t),a=n===i?0:1/(i-n),h}}function ik(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Vd(){var e=gw(rk()(Ro));return e.copy=function(){return ik(e,Vd())},iT.apply(e,arguments)}var ak=Math.PI,ok=ak*2,sk=Math.abs,Wg=Math.sqrt;function wi(){}function md(e,t){e&&Yx.hasOwnProperty(e.type)&&Yx[e.type](e,t)}var Vx={Feature:function(e,t){md(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,a=n.length;++i<a;)md(n[i].geometry,t)}},Yx={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){J0(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)J0(n[i],t,0)},Polygon:function(e,t){Xx(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,a=n.length;++i<a;)Xx(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,a=n.length;++i<a;)md(n[i],t)}};function J0(e,t,n){var i=-1,a=e.length-n,l;for(t.lineStart();++i<a;)l=e[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function Xx(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)J0(e[n],t,1);t.polygonEnd()}function bc(e,t){e&&Vx.hasOwnProperty(e.type)?Vx[e.type](e,t):md(e,t)}const lk=e=>e;var m0=new tu,eg=new tu,vw,yw,tg,ng,za={point:wi,lineStart:wi,lineEnd:wi,polygonStart:function(){za.lineStart=uk,za.lineEnd=fk},polygonEnd:function(){za.lineStart=za.lineEnd=za.point=wi,m0.add(sk(eg)),eg=new tu},result:function(){var e=m0/2;return m0=new tu,e}};function uk(){za.point=ck}function ck(e,t){za.point=_w,vw=tg=e,yw=ng=t}function _w(e,t){eg.add(ng*e-tg*t),tg=e,ng=t}function fk(){_w(vw,yw)}var iu=1/0,pd=iu,Ic=-iu,gd=Ic,Wx={point:hk,lineStart:wi,lineEnd:wi,polygonStart:wi,polygonEnd:wi,result:function(){var e=[[iu,pd],[Ic,gd]];return Ic=gd=-(pd=iu=1/0),e}};function hk(e,t){e<iu&&(iu=e),e>Ic&&(Ic=e),t<pd&&(pd=t),t>gd&&(gd=t)}var rg=0,ig=0,Ec=0,vd=0,yd=0,Kl=0,ag=0,og=0,Sc=0,xw,bw,Ki,qi,oi={point:Fs,lineStart:Qx,lineEnd:Jx,polygonStart:function(){oi.lineStart=pk,oi.lineEnd=gk},polygonEnd:function(){oi.point=Fs,oi.lineStart=Qx,oi.lineEnd=Jx},result:function(){var e=Sc?[ag/Sc,og/Sc]:Kl?[vd/Kl,yd/Kl]:Ec?[rg/Ec,ig/Ec]:[NaN,NaN];return rg=ig=Ec=vd=yd=Kl=ag=og=Sc=0,e}};function Fs(e,t){rg+=e,ig+=t,++Ec}function Qx(){oi.point=dk}function dk(e,t){oi.point=mk,Fs(Ki=e,qi=t)}function mk(e,t){var n=e-Ki,i=t-qi,a=Wg(n*n+i*i);vd+=a*(Ki+e)/2,yd+=a*(qi+t)/2,Kl+=a,Fs(Ki=e,qi=t)}function Jx(){oi.point=Fs}function pk(){oi.point=vk}function gk(){ww(xw,bw)}function vk(e,t){oi.point=ww,Fs(xw=Ki=e,bw=qi=t)}function ww(e,t){var n=e-Ki,i=t-qi,a=Wg(n*n+i*i);vd+=a*(Ki+e)/2,yd+=a*(qi+t)/2,Kl+=a,a=qi*e-Ki*t,ag+=a*(Ki+e),og+=a*(qi+t),Sc+=a*3,Fs(Ki=e,qi=t)}function Dw(e){this._context=e}Dw.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ok);break}}},result:wi};var sg=new tu,p0,Ew,Sw,Cc,Ac,Hc={point:wi,lineStart:function(){Hc.point=yk},lineEnd:function(){p0&&Cw(Ew,Sw),Hc.point=wi},polygonStart:function(){p0=!0},polygonEnd:function(){p0=null},result:function(){var e=+sg;return sg=new tu,e}};function yk(e,t){Hc.point=Cw,Ew=Cc=e,Sw=Ac=t}function Cw(e,t){Cc-=e,Ac-=t,sg.add(Wg(Cc*Cc+Ac*Ac)),Cc=e,Ac=t}let eb,_d,tb,nb;class rb{constructor(t){this._append=t==null?Aw:_k(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==tb||this._append!==_d){const i=this._radius,a=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,tb=i,_d=this._append,nb=this._,this._=a}this._+=nb;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Aw(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _k(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Aw;if(t!==eb){const n=10**t;eb=t,_d=function(a){let l=1;this._+=a[0];for(const c=a.length;l<c;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}return _d}function Nw(e,t){let n=3,i=4.5,a,l;function c(f){return f&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),bc(f,a(l))),l.result()}return c.area=function(f){return bc(f,a(za)),za.result()},c.measure=function(f){return bc(f,a(Hc)),Hc.result()},c.bounds=function(f){return bc(f,a(Wx)),Wx.result()},c.centroid=function(f){return bc(f,a(oi)),oi.result()},c.projection=function(f){return arguments.length?(a=f==null?(e=null,lk):(e=f).stream,c):e},c.context=function(f){return arguments.length?(l=f==null?(t=null,new rb(n)):new Dw(t=f),typeof i!="function"&&l.pointRadius(i),c):t},c.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(l.pointRadius(+f),+f),c):i},c.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const d=Math.floor(f);if(!(d>=0))throw new RangeError(`invalid digits: ${f}`);n=d}return t===null&&(l=new rb(n)),c},c.projection(e).digits(n).context(t)}function Mw(e){return{stream:xk(e)}}function xk(e){return function(t){var n=new lg;for(var i in e)n[i]=e[i];return n.stream=t,n}}function lg(){}lg.prototype={constructor:lg,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bk(e){return e}var wk=2,ib=1e-6;function Dk(e){return"translate(0,"+e+")"}function Ek(e){return t=>+e(t)}function Sk(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Ck(){return!this.__axis}function Ak(e,t){var n=[],i=null,a=null,l=6,c=6,f=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,h=1,m="x",g=Dk;function _(x){var w=i??(t.ticks?t.ticks.apply(t,n):t.domain()),y=a??(t.tickFormat?t.tickFormat.apply(t,n):bk),E=Math.max(l,0)+f,D=t.range(),A=+D[0]+d,N=+D[D.length-1]+d,F=(t.bandwidth?Sk:Ek)(t.copy(),d),k=x.selection?x.selection():x,T=k.selectAll(".domain").data([null]),R=k.selectAll(".tick").data(w,t).order(),j=R.exit(),O=R.enter().append("g").attr("class","tick"),G=R.select("line"),U=R.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),R=R.merge(O),G=G.merge(O.append("line").attr("stroke","currentColor").attr(m+"2",h*l)),U=U.merge(O.append("text").attr("fill","currentColor").attr(m,h*E).attr("dy","0.32em")),x!==k&&(T=T.transition(x),R=R.transition(x),G=G.transition(x),U=U.transition(x),j=j.transition(x).attr("opacity",ib).attr("transform",function(I){return isFinite(I=F(I))?g(I+d):this.getAttribute("transform")}),O.attr("opacity",ib).attr("transform",function(I){var W=this.parentNode.__axis;return g((W&&isFinite(W=W(I))?W:F(I))+d)})),j.remove(),T.attr("d",c?"M"+h*c+","+A+"H"+d+"V"+N+"H"+h*c:"M"+d+","+A+"V"+N),R.attr("opacity",1).attr("transform",function(I){return g(F(I)+d)}),G.attr(m+"2",h*l),U.attr(m,h*E).text(y),k.filter(Ck).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","start"),k.each(function(){this.__axis=F})}return _.scale=function(x){return arguments.length?(t=x,_):t},_.ticks=function(){return n=Array.from(arguments),_},_.tickArguments=function(x){return arguments.length?(n=x==null?[]:Array.from(x),_):n.slice()},_.tickValues=function(x){return arguments.length?(i=x==null?null:Array.from(x),_):i&&i.slice()},_.tickFormat=function(x){return arguments.length?(a=x,_):a},_.tickSize=function(x){return arguments.length?(l=c=+x,_):l},_.tickSizeInner=function(x){return arguments.length?(l=+x,_):l},_.tickSizeOuter=function(x){return arguments.length?(c=+x,_):c},_.tickPadding=function(x){return arguments.length?(f=+x,_):f},_.offset=function(x){return arguments.length?(d=+x,_):d},_}function ab(e){return Ak(wk,e)}var Nk={value:()=>{}};function Tw(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ih(n)}function Ih(e){this._=e}function Mk(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ih.prototype=Tw.prototype={constructor:Ih,on:function(e,t){var n=this._,i=Mk(e+"",n),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(e=i[l]).type)&&(a=Tk(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=i[l]).type)n[a]=ob(n[a],e.name,t);else if(t==null)for(a in n)n[a]=ob(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ih(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],i=0,a=l.length;i<a;++i)l[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,l=i.length;a<l;++a)i[a].value.apply(t,n)}};function Tk(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function ob(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=Nk,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ug="http://www.w3.org/1999/xhtml";const sb={svg:"http://www.w3.org/2000/svg",xhtml:ug,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),sb.hasOwnProperty(t)?{space:sb[t],local:e}:e}function kk(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ug&&t.documentElement.namespaceURI===ug?t.createElement(e):t.createElementNS(n,e)}}function zk(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kw(e){var t=Yd(e);return(t.local?zk:kk)(t)}function Lk(){}function Qg(e){return e==null?Lk:function(){return this.querySelector(e)}}function Fk(e){typeof e!="function"&&(e=Qg(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,f=i[a]=new Array(c),d,h,m=0;m<c;++m)(d=l[m])&&(h=e.call(d,d.__data__,m,l))&&("__data__"in d&&(h.__data__=d.__data__),f[m]=h);return new $r(i,this._parents)}function Bk(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Rk(){return[]}function zw(e){return e==null?Rk:function(){return this.querySelectorAll(e)}}function Ok(e){return function(){return Bk(e.apply(this,arguments))}}function jk(e){typeof e=="function"?e=Ok(e):e=zw(e);for(var t=this._groups,n=t.length,i=[],a=[],l=0;l<n;++l)for(var c=t[l],f=c.length,d,h=0;h<f;++h)(d=c[h])&&(i.push(e.call(d,d.__data__,h,c)),a.push(d));return new $r(i,a)}function Lw(e){return function(){return this.matches(e)}}function Fw(e){return function(t){return t.matches(e)}}var Pk=Array.prototype.find;function Ik(e){return function(){return Pk.call(this.children,e)}}function Hk(){return this.firstElementChild}function Gk(e){return this.select(e==null?Hk:Ik(typeof e=="function"?e:Fw(e)))}var Uk=Array.prototype.filter;function $k(){return Array.from(this.children)}function Zk(e){return function(){return Uk.call(this.children,e)}}function Kk(e){return this.selectAll(e==null?$k:Zk(typeof e=="function"?e:Fw(e)))}function qk(e){typeof e!="function"&&(e=Lw(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,f=i[a]=[],d,h=0;h<c;++h)(d=l[h])&&e.call(d,d.__data__,h,l)&&f.push(d);return new $r(i,this._parents)}function Bw(e){return new Array(e.length)}function Vk(){return new $r(this._enter||this._groups.map(Bw),this._parents)}function xd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xd.prototype={constructor:xd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Yk(e){return function(){return e}}function Xk(e,t,n,i,a,l){for(var c=0,f,d=t.length,h=l.length;c<h;++c)(f=t[c])?(f.__data__=l[c],i[c]=f):n[c]=new xd(e,l[c]);for(;c<d;++c)(f=t[c])&&(a[c]=f)}function Wk(e,t,n,i,a,l,c){var f,d,h=new Map,m=t.length,g=l.length,_=new Array(m),x;for(f=0;f<m;++f)(d=t[f])&&(_[f]=x=c.call(d,d.__data__,f,t)+"",h.has(x)?a[f]=d:h.set(x,d));for(f=0;f<g;++f)x=c.call(e,l[f],f,l)+"",(d=h.get(x))?(i[f]=d,d.__data__=l[f],h.delete(x)):n[f]=new xd(e,l[f]);for(f=0;f<m;++f)(d=t[f])&&h.get(_[f])===d&&(a[f]=d)}function Qk(e){return e.__data__}function Jk(e,t){if(!arguments.length)return Array.from(this,Qk);var n=t?Wk:Xk,i=this._parents,a=this._groups;typeof e!="function"&&(e=Yk(e));for(var l=a.length,c=new Array(l),f=new Array(l),d=new Array(l),h=0;h<l;++h){var m=i[h],g=a[h],_=g.length,x=ez(e.call(m,m&&m.__data__,h,i)),w=x.length,y=f[h]=new Array(w),E=c[h]=new Array(w),D=d[h]=new Array(_);n(m,g,y,E,D,x,t);for(var A=0,N=0,F,k;A<w;++A)if(F=y[A]){for(A>=N&&(N=A+1);!(k=E[N])&&++N<w;);F._next=k||null}}return c=new $r(c,i),c._enter=f,c._exit=d,c}function ez(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tz(){return new $r(this._exit||this._groups.map(Bw),this._parents)}function nz(e,t,n){var i=this.enter(),a=this,l=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function rz(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,l=i.length,c=Math.min(a,l),f=new Array(a),d=0;d<c;++d)for(var h=n[d],m=i[d],g=h.length,_=f[d]=new Array(g),x,w=0;w<g;++w)(x=h[w]||m[w])&&(_[w]=x);for(;d<a;++d)f[d]=n[d];return new $r(f,this._parents)}function iz(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function az(e){e||(e=oz);function t(g,_){return g&&_?e(g.__data__,_.__data__):!g-!_}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var c=n[l],f=c.length,d=a[l]=new Array(f),h,m=0;m<f;++m)(h=c[m])&&(d[m]=h);d.sort(t)}return new $r(a,this._parents).order()}function oz(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sz(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lz(){return Array.from(this)}function uz(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function cz(){let e=0;for(const t of this)++e;return e}function fz(){return!this.node()}function hz(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],l=0,c=a.length,f;l<c;++l)(f=a[l])&&e.call(f,f.__data__,l,a);return this}function dz(e){return function(){this.removeAttribute(e)}}function mz(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pz(e,t){return function(){this.setAttribute(e,t)}}function gz(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vz(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yz(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _z(e,t){var n=Yd(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?mz:dz:typeof t=="function"?n.local?yz:vz:n.local?gz:pz)(n,t))}function Rw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xz(e){return function(){this.style.removeProperty(e)}}function bz(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wz(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Dz(e,t,n){return arguments.length>1?this.each((t==null?xz:typeof t=="function"?wz:bz)(e,t,n??"")):au(this.node(),e)}function au(e,t){return e.style.getPropertyValue(t)||Rw(e).getComputedStyle(e,null).getPropertyValue(t)}function Ez(e){return function(){delete this[e]}}function Sz(e,t){return function(){this[e]=t}}function Cz(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Az(e,t){return arguments.length>1?this.each((t==null?Ez:typeof t=="function"?Cz:Sz)(e,t)):this.node()[e]}function Ow(e){return e.trim().split(/^|\s+/)}function Jg(e){return e.classList||new jw(e)}function jw(e){this._node=e,this._names=Ow(e.getAttribute("class")||"")}jw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Pw(e,t){for(var n=Jg(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function Iw(e,t){for(var n=Jg(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function Nz(e){return function(){Pw(this,e)}}function Mz(e){return function(){Iw(this,e)}}function Tz(e,t){return function(){(t.apply(this,arguments)?Pw:Iw)(this,e)}}function kz(e,t){var n=Ow(e+"");if(arguments.length<2){for(var i=Jg(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Tz:t?Nz:Mz)(n,t))}function zz(){this.textContent=""}function Lz(e){return function(){this.textContent=e}}function Fz(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Bz(e){return arguments.length?this.each(e==null?zz:(typeof e=="function"?Fz:Lz)(e)):this.node().textContent}function Rz(){this.innerHTML=""}function Oz(e){return function(){this.innerHTML=e}}function jz(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Pz(e){return arguments.length?this.each(e==null?Rz:(typeof e=="function"?jz:Oz)(e)):this.node().innerHTML}function Iz(){this.nextSibling&&this.parentNode.appendChild(this)}function Hz(){return this.each(Iz)}function Gz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uz(){return this.each(Gz)}function $z(e){var t=typeof e=="function"?e:kw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Zz(){return null}function Kz(e,t){var n=typeof e=="function"?e:kw(e),i=t==null?Zz:typeof t=="function"?t:Qg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function qz(){var e=this.parentNode;e&&e.removeChild(this)}function Vz(){return this.each(qz)}function Yz(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xz(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wz(e){return this.select(e?Xz:Yz)}function Qz(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jz(e){return function(t){e.call(this,t,this.__data__)}}function eL(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function tL(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function nL(e,t,n){return function(){var i=this.__on,a,l=Jz(t);if(i){for(var c=0,f=i.length;c<f;++c)if((a=i[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},i?i.push(a):this.__on=[a]}}function rL(e,t,n){var i=eL(e+""),a,l=i.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var d=0,h=f.length,m;d<h;++d)for(a=0,m=f[d];a<l;++a)if((c=i[a]).type===m.type&&c.name===m.name)return m.value}return}for(f=t?nL:tL,a=0;a<l;++a)this.each(f(i[a],t,n));return this}function Hw(e,t,n){var i=Rw(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function iL(e,t){return function(){return Hw(this,e,t)}}function aL(e,t){return function(){return Hw(this,e,t.apply(this,arguments))}}function oL(e,t){return this.each((typeof t=="function"?aL:iL)(e,t))}function*sL(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var Gw=[null];function $r(e,t){this._groups=e,this._parents=t}function Yc(){return new $r([[document.documentElement]],Gw)}function lL(){return this}$r.prototype=Yc.prototype={constructor:$r,select:Fk,selectAll:jk,selectChild:Gk,selectChildren:Kk,filter:qk,data:Jk,enter:Vk,exit:tz,join:nz,merge:rz,selection:lL,order:iz,sort:az,call:sz,nodes:lz,node:uz,size:cz,empty:fz,each:hz,attr:_z,style:Dz,property:Az,classed:kz,text:Bz,html:Pz,raise:Hz,lower:Uz,append:$z,insert:Kz,remove:Vz,clone:Wz,datum:Qz,on:rL,dispatch:oL,[Symbol.iterator]:sL};function uL(e){return typeof e=="string"?new $r([[document.querySelector(e)]],[document.documentElement]):new $r([[e]],Gw)}var ou=0,Nc=0,wc=0,Uw=1e3,bd,Mc,wd=0,Bs=0,Xd=0,Gc=typeof performance=="object"&&performance.now?performance:Date,$w=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ev(){return Bs||($w(cL),Bs=Gc.now()+Xd)}function cL(){Bs=0}function Dd(){this._call=this._time=this._next=null}Dd.prototype=Zw.prototype={constructor:Dd,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ev():+n)+(t==null?0:+t),!this._next&&Mc!==this&&(Mc?Mc._next=this:bd=this,Mc=this),this._call=e,this._time=n,cg()},stop:function(){this._call&&(this._call=null,this._time=1/0,cg())}};function Zw(e,t,n){var i=new Dd;return i.restart(e,t,n),i}function fL(){ev(),++ou;for(var e=bd,t;e;)(t=Bs-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ou}function lb(){Bs=(wd=Gc.now())+Xd,ou=Nc=0;try{fL()}finally{ou=0,dL(),Bs=0}}function hL(){var e=Gc.now(),t=e-wd;t>Uw&&(Xd-=t,wd=e)}function dL(){for(var e,t=bd,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:bd=n);Mc=e,cg(i)}function cg(e){if(!ou){Nc&&(Nc=clearTimeout(Nc));var t=e-Bs;t>24?(e<1/0&&(Nc=setTimeout(lb,e-Gc.now()-Xd)),wc&&(wc=clearInterval(wc))):(wc||(wd=Gc.now(),wc=setInterval(hL,Uw)),ou=1,$w(lb))}}function ub(e,t,n){var i=new Dd;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var mL=Tw("start","end","cancel","interrupt"),pL=[],Kw=0,cb=1,fg=2,Hh=3,fb=4,hg=5,Gh=6;function Wd(e,t,n,i,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;gL(e,n,{name:t,index:i,group:a,on:mL,tween:pL,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Kw})}function tv(e,t){var n=Si(e,t);if(n.state>Kw)throw new Error("too late; already scheduled");return n}function ta(e,t){var n=Si(e,t);if(n.state>Hh)throw new Error("too late; already running");return n}function Si(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gL(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=Zw(l,0,n.time);function l(h){n.state=cb,n.timer.restart(c,n.delay,n.time),n.delay<=h&&c(h-n.delay)}function c(h){var m,g,_,x;if(n.state!==cb)return d();for(m in i)if(x=i[m],x.name===n.name){if(x.state===Hh)return ub(c);x.state===fb?(x.state=Gh,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete i[m]):+m<t&&(x.state=Gh,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete i[m])}if(ub(function(){n.state===Hh&&(n.state=fb,n.timer.restart(f,n.delay,n.time),f(h))}),n.state=fg,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fg){for(n.state=Hh,a=new Array(_=n.tween.length),m=0,g=-1;m<_;++m)(x=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++g]=x);a.length=g+1}}function f(h){for(var m=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(d),n.state=hg,1),g=-1,_=a.length;++g<_;)a[g].call(e,m);n.state===hg&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Gh,n.timer.stop(),delete i[t];for(var h in i)return;delete e.__transition}}function vL(e,t){var n=e.__transition,i,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){l=!1;continue}a=i.state>fg&&i.state<hg,i.state=Gh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}l&&delete e.__transition}}function yL(e){return this.each(function(){vL(this,e)})}function _L(e,t){var n,i;return function(){var a=ta(this,e),l=a.tween;if(l!==n){i=n=l;for(var c=0,f=i.length;c<f;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function xL(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=ta(this,e),c=l.tween;if(c!==i){a=(i=c).slice();for(var f={name:t,value:n},d=0,h=a.length;d<h;++d)if(a[d].name===t){a[d]=f;break}d===h&&a.push(f)}l.tween=a}}function bL(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Si(this.node(),n).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===e)return c.value;return null}return this.each((t==null?_L:xL)(n,e,t))}function nv(e,t,n){var i=e._id;return e.each(function(){var a=ta(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Si(a,i).value[t]}}function qw(e,t){var n;return(typeof t=="number"?xi:t instanceof Ls?fd:(n=Ls(t))?(t=n,fd):lw)(e,t)}function wL(e){return function(){this.removeAttribute(e)}}function DL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function EL(e,t,n){var i,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===i?l:l=t(i=c,n)}}function SL(e,t,n){var i,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===i?l:l=t(i=c,n)}}function CL(e,t,n){var i,a,l;return function(){var c,f=n(this),d;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),d=f+"",c===d?null:c===i&&d===a?l:(a=d,l=t(i=c,f)))}}function AL(e,t,n){var i,a,l;return function(){var c,f=n(this),d;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),d=f+"",c===d?null:c===i&&d===a?l:(a=d,l=t(i=c,f)))}}function NL(e,t){var n=Yd(e),i=n==="transform"?RT:qw;return this.attrTween(e,typeof t=="function"?(n.local?AL:CL)(n,i,nv(this,"attr."+e,t)):t==null?(n.local?DL:wL)(n):(n.local?SL:EL)(n,i,t))}function ML(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function TL(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kL(e,t){var n,i;function a(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&TL(e,l)),n}return a._value=t,a}function zL(e,t){var n,i;function a(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&ML(e,l)),n}return a._value=t,a}function LL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Yd(e);return this.tween(n,(i.local?kL:zL)(i,t))}function FL(e,t){return function(){tv(this,e).delay=+t.apply(this,arguments)}}function BL(e,t){return t=+t,function(){tv(this,e).delay=t}}function RL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?FL:BL)(t,e)):Si(this.node(),t).delay}function OL(e,t){return function(){ta(this,e).duration=+t.apply(this,arguments)}}function jL(e,t){return t=+t,function(){ta(this,e).duration=t}}function PL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OL:jL)(t,e)):Si(this.node(),t).duration}function IL(e,t){if(typeof t!="function")throw new Error;return function(){ta(this,e).ease=t}}function HL(e){var t=this._id;return arguments.length?this.each(IL(t,e)):Si(this.node(),t).ease}function GL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ta(this,e).ease=n}}function UL(e){if(typeof e!="function")throw new Error;return this.each(GL(this._id,e))}function $L(e){typeof e!="function"&&(e=Lw(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,f=i[a]=[],d,h=0;h<c;++h)(d=l[h])&&e.call(d,d.__data__,h,l)&&f.push(d);return new Ra(i,this._parents,this._name,this._id)}function ZL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,l=Math.min(i,a),c=new Array(i),f=0;f<l;++f)for(var d=t[f],h=n[f],m=d.length,g=c[f]=new Array(m),_,x=0;x<m;++x)(_=d[x]||h[x])&&(g[x]=_);for(;f<i;++f)c[f]=t[f];return new Ra(c,this._parents,this._name,this._id)}function KL(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qL(e,t,n){var i,a,l=KL(t)?tv:ta;return function(){var c=l(this,e),f=c.on;f!==i&&(a=(i=f).copy()).on(t,n),c.on=a}}function VL(e,t){var n=this._id;return arguments.length<2?Si(this.node(),n).on.on(e):this.each(qL(n,e,t))}function YL(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function XL(){return this.on("end.remove",YL(this._id))}function WL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qg(e));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var f=i[c],d=f.length,h=l[c]=new Array(d),m,g,_=0;_<d;++_)(m=f[_])&&(g=e.call(m,m.__data__,_,f))&&("__data__"in m&&(g.__data__=m.__data__),h[_]=g,Wd(h[_],t,n,_,h,Si(m,n)));return new Ra(l,this._parents,t,n)}function QL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zw(e));for(var i=this._groups,a=i.length,l=[],c=[],f=0;f<a;++f)for(var d=i[f],h=d.length,m,g=0;g<h;++g)if(m=d[g]){for(var _=e.call(m,m.__data__,g,d),x,w=Si(m,n),y=0,E=_.length;y<E;++y)(x=_[y])&&Wd(x,t,n,y,_,w);l.push(_),c.push(m)}return new Ra(l,c,t,n)}var JL=Yc.prototype.constructor;function e9(){return new JL(this._groups,this._parents)}function t9(e,t){var n,i,a;return function(){var l=au(this,e),c=(this.style.removeProperty(e),au(this,e));return l===c?null:l===n&&c===i?a:a=t(n=l,i=c)}}function Vw(e){return function(){this.style.removeProperty(e)}}function n9(e,t,n){var i,a=n+"",l;return function(){var c=au(this,e);return c===a?null:c===i?l:l=t(i=c,n)}}function r9(e,t,n){var i,a,l;return function(){var c=au(this,e),f=n(this),d=f+"";return f==null&&(d=f=(this.style.removeProperty(e),au(this,e))),c===d?null:c===i&&d===a?l:(a=d,l=t(i=c,f))}}function i9(e,t){var n,i,a,l="style."+t,c="end."+l,f;return function(){var d=ta(this,e),h=d.on,m=d.value[l]==null?f||(f=Vw(t)):void 0;(h!==n||a!==m)&&(i=(n=h).copy()).on(c,a=m),d.on=i}}function a9(e,t,n){var i=(e+="")=="transform"?BT:qw;return t==null?this.styleTween(e,t9(e,i)).on("end.style."+e,Vw(e)):typeof t=="function"?this.styleTween(e,r9(e,i,nv(this,"style."+e,t))).each(i9(this._id,e)):this.styleTween(e,n9(e,i,t),n).on("end.style."+e,null)}function o9(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function s9(e,t,n){var i,a;function l(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&o9(e,c,n)),i}return l._value=t,l}function l9(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,s9(e,t,n??""))}function u9(e){return function(){this.textContent=e}}function c9(e){return function(){var t=e(this);this.textContent=t??""}}function f9(e){return this.tween("text",typeof e=="function"?c9(nv(this,"text",e)):u9(e==null?"":e+""))}function h9(e){return function(t){this.textContent=e.call(this,t)}}function d9(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&h9(a)),t}return i._value=e,i}function m9(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,d9(e))}function p9(){for(var e=this._name,t=this._id,n=Yw(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],f=c.length,d,h=0;h<f;++h)if(d=c[h]){var m=Si(d,t);Wd(d,e,n,h,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Ra(i,this._parents,e,n)}function g9(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(l,c){var f={value:c},d={value:function(){--a===0&&l()}};n.each(function(){var h=ta(this,i),m=h.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(d)),h.on=t}),a===0&&l()})}var v9=0;function Ra(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Yw(){return++v9}var ka=Yc.prototype;Ra.prototype={constructor:Ra,select:WL,selectAll:QL,selectChild:ka.selectChild,selectChildren:ka.selectChildren,filter:$L,merge:ZL,selection:e9,transition:p9,call:ka.call,nodes:ka.nodes,node:ka.node,size:ka.size,empty:ka.empty,each:ka.each,on:VL,attr:NL,attrTween:LL,style:a9,styleTween:l9,text:f9,textTween:m9,remove:XL,tween:bL,delay:RL,duration:PL,ease:HL,easeVarying:UL,end:g9,[Symbol.iterator]:ka[Symbol.iterator]};function y9(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _9={time:null,delay:0,duration:250,ease:y9};function x9(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function b9(e){var t,n;e instanceof Ra?(t=e._id,e=e._name):(t=Yw(),(n=_9).time=ev(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],f=c.length,d,h=0;h<f;++h)(d=c[h])&&Wd(d,e,t,h,c,n||x9(d,t));return new Ra(i,this._parents,e,t)}Yc.prototype.interrupt=yL;Yc.prototype.transition=b9;function na(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const pu=e=>ST(e[e.length-1]);var w9=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(na);const dg=pu(w9);var D9=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(na);const Xw=pu(D9);var E9=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(na);const S9=pu(E9);var C9=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(na);const A9=pu(C9);var N9=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(na);const M9=pu(N9);var T9=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(na);const k9=pu(T9),z9=Yg(Ji(300,.5,0),Ji(-240,.5,1));var L9=Yg(Ji(-100,.75,.35),Ji(80,1.5,.8)),F9=Yg(Ji(260,.75,.35),Ji(80,1.5,.8)),Ah=Ji();function B9(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ah.h=360*e-100,Ah.s=1.5-1.5*t,Ah.l=.8-.9*t,Ah+""}var Nh=jc(),R9=Math.PI/3,O9=Math.PI*2/3;function j9(e){var t;return e=(.5-e)*Math.PI,Nh.r=255*(t=Math.sin(e))*t,Nh.g=255*(t=Math.sin(e+R9))*t,Nh.b=255*(t=Math.sin(e+O9))*t,Nh+""}function Qd(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const mg=Qd(na("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var P9=Qd(na("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),pg=Qd(na("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),gg=Qd(na("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Tc(e,t,n){this.k=e,this.x=t,this.y=n}Tc.prototype={constructor:Tc,scale:function(e){return e===1?this:new Tc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Tc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Tc.prototype;const Ww=({minValue:e,maxValue:t,colorScheme:n,title:i,unit:a="",width:l=100,height:c=200,position:f="bottomleft",customIntervals:d,intervalLabels:h})=>{const m=te.useRef(null);return te.useEffect(()=>{if(!m.current)return;const g=uL(m.current);g.selectAll("*").remove();const _={top:30,right:60,bottom:30,left:15},x=l-_.left-_.right,w=c-_.top-_.bottom,y=g.append("g").attr("transform",`translate(${_.left},${_.top})`);y.append("text").attr("x",x/2).attr("y",-10).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").text(i);const E=Vd(n).domain([e,t]);if(d&&d.length>0){const D=w/d.length;d.forEach((A,N)=>{const F=N*D;y.append("rect").attr("x",0).attr("y",F).attr("width",x).attr("height",D).style("fill",E(A)).style("stroke","#ccc").style("stroke-width",.5)}),y.append("rect").attr("x",0).attr("y",0).attr("width",x).attr("height",w).style("fill","none").style("stroke","#ccc").style("stroke-width",1)}else{const D=`legend-gradient-${Date.now()}`,N=g.append("defs").append("linearGradient").attr("id",D).attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%"),F=20;for(let k=0;k<=F;k++){const T=k/F,R=e+T*(t-e);N.append("stop").attr("offset",`${T*100}%`).attr("stop-color",E(R))}y.append("rect").attr("x",0).attr("y",0).attr("width",x).attr("height",w).style("fill",`url(#${D})`).style("stroke","#ccc").style("stroke-width",1)}if(d&&h){const D=w/d.length,A=[];for(let F=0;F<=d.length;F++)A.push(F*D);const N=ab(Q0().domain([0,1]).range([w,0])).tickValues(A.map(F=>1-F/w)).tickFormat((F,k)=>k<h.length?h[k]:"");y.append("g").attr("transform",`translate(${x}, 0)`).call(N).style("font-size","10px")}else{const D=Q0().domain([e,t]).range([w,0]),A=ab(D).ticks(5).tickFormat(N=>{const F=Number(N);return a?`${F.toFixed(1)}${a}`:F.toFixed(1)});y.append("g").attr("transform",`translate(${x}, 0)`).call(A).style("font-size","10px")}},[e,t,n,i,a,l,c,d,h]),b.jsx("div",{className:`leaflet-control leaflet-control-legend-d3 legend-d3-${f}`,style:{position:"absolute",[f.includes("bottom")?"bottom":"top"]:"10px",[f.includes("left")?"left":"right"]:"10px",backgroundColor:"white",padding:"5px",borderRadius:"5px",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",zIndex:1e3,pointerEvents:"none"},children:b.jsx("svg",{ref:m,width:l,height:c,style:{display:"block"}})})};function En(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function hb(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Qw(...e){return t=>{let n=!1;const i=e.map(a=>{const l=hb(a,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<i.length;a++){const l=i[a];typeof l=="function"?l():hb(e[a],null)}}}}function Nr(...e){return te.useCallback(Qw(...e),e)}function I9(e,t){const n=te.createContext(t),i=l=>{const{children:c,...f}=l,d=te.useMemo(()=>f,Object.values(f));return b.jsx(n.Provider,{value:d,children:c})};i.displayName=e+"Provider";function a(l){const c=te.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[i,a]}function gu(e,t=[]){let n=[];function i(l,c){const f=te.createContext(c),d=n.length;n=[...n,c];const h=g=>{const{scope:_,children:x,...w}=g,y=_?.[e]?.[d]||f,E=te.useMemo(()=>w,Object.values(w));return b.jsx(y.Provider,{value:E,children:x})};h.displayName=l+"Provider";function m(g,_){const x=_?.[e]?.[d]||f,w=te.useContext(x);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[h,m]}const a=()=>{const l=n.map(c=>te.createContext(c));return function(f){const d=f?.[e]||l;return te.useMemo(()=>({[`__scope${e}`]:{...f,[e]:d}}),[f,d])}};return a.scopeName=e,[i,H9(a,...t)]}function H9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const c=i.reduce((f,{useScope:d,scopeName:h})=>{const g=d(l)[`__scope${h}`];return{...f,...g}},{});return te.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}var su=globalThis?.document?te.useLayoutEffect:()=>{},G9=Bb[" useId ".trim().toString()]||(()=>{}),U9=0;function Lc(e){const[t,n]=te.useState(G9());return su(()=>{n(i=>i??String(U9++))},[e]),e||(t?`radix-${t}`:"")}var $9=Bb[" useInsertionEffect ".trim().toString()]||su;function Jd({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[a,l,c]=Z9({defaultProp:t,onChange:n}),f=e!==void 0,d=f?e:a;{const m=te.useRef(e!==void 0);te.useEffect(()=>{const g=m.current;g!==f&&console.warn(`${i} is changing from ${g?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=f},[f,i])}const h=te.useCallback(m=>{if(f){const g=K9(m)?m(e):m;g!==e&&c.current?.(g)}else l(m)},[f,e,l,c]);return[d,h]}function Z9({defaultProp:e,onChange:t}){const[n,i]=te.useState(e),a=te.useRef(n),l=te.useRef(t);return $9(()=>{l.current=t},[t]),te.useEffect(()=>{a.current!==n&&(l.current?.(n),a.current=n)},[n,a]),[n,i,l]}function K9(e){return typeof e=="function"}function Ed(e){const t=q9(e),n=te.forwardRef((i,a)=>{const{children:l,...c}=i,f=te.Children.toArray(l),d=f.find(Y9);if(d){const h=d.props.children,m=f.map(g=>g===d?te.Children.count(h)>1?te.Children.only(null):te.isValidElement(h)?h.props.children:null:g);return b.jsx(t,{...c,ref:a,children:te.isValidElement(h)?te.cloneElement(h,void 0,m):null})}return b.jsx(t,{...c,ref:a,children:l})});return n.displayName=`${e}.Slot`,n}function q9(e){const t=te.forwardRef((n,i)=>{const{children:a,...l}=n;if(te.isValidElement(a)){const c=W9(a),f=X9(l,a.props);return a.type!==te.Fragment&&(f.ref=i?Qw(i,c):c),te.cloneElement(a,f)}return te.Children.count(a)>1?te.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Jw=Symbol("radix.slottable");function V9(e){const t=({children:n})=>b.jsx(b.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Jw,t}function Y9(e){return te.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Jw}function X9(e,t){const n={...t};for(const i in t){const a=e[i],l=t[i];/^on[A-Z]/.test(i)?a&&l?n[i]=(...f)=>{const d=l(...f);return a(...f),d}:a&&(n[i]=a):i==="style"?n[i]={...a,...l}:i==="className"&&(n[i]=[a,l].filter(Boolean).join(" "))}return{...e,...n}}function W9(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Q9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gn=Q9.reduce((e,t)=>{const n=Ed(`Primitive.${t}`),i=te.forwardRef((a,l)=>{const{asChild:c,...f}=a,d=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(d,{...f,ref:l})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function J9(e,t){e&&Dg.flushSync(()=>e.dispatchEvent(t))}function lu(e){const t=te.useRef(e);return te.useEffect(()=>{t.current=e}),te.useMemo(()=>(...n)=>t.current?.(...n),[])}function e7(e,t=globalThis?.document){const n=lu(e);te.useEffect(()=>{const i=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var t7="DismissableLayer",vg="dismissableLayer.update",n7="dismissableLayer.pointerDownOutside",r7="dismissableLayer.focusOutside",db,eD=te.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tD=te.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:c,onDismiss:f,...d}=e,h=te.useContext(eD),[m,g]=te.useState(null),_=m?.ownerDocument??globalThis?.document,[,x]=te.useState({}),w=Nr(t,R=>g(R)),y=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),D=y.indexOf(E),A=m?y.indexOf(m):-1,N=h.layersWithOutsidePointerEventsDisabled.size>0,F=A>=D,k=o7(R=>{const j=R.target,O=[...h.branches].some(G=>G.contains(j));!F||O||(a?.(R),c?.(R),R.defaultPrevented||f?.())},_),T=s7(R=>{const j=R.target;[...h.branches].some(G=>G.contains(j))||(l?.(R),c?.(R),R.defaultPrevented||f?.())},_);return e7(R=>{A===h.layers.size-1&&(i?.(R),!R.defaultPrevented&&f&&(R.preventDefault(),f()))},_),te.useEffect(()=>{if(m)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(db=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),mb(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=db)}},[m,_,n,h]),te.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),mb())},[m,h]),te.useEffect(()=>{const R=()=>x({});return document.addEventListener(vg,R),()=>document.removeEventListener(vg,R)},[]),b.jsx(Gn.div,{...d,ref:w,style:{pointerEvents:N?F?"auto":"none":void 0,...e.style},onFocusCapture:En(e.onFocusCapture,T.onFocusCapture),onBlurCapture:En(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:En(e.onPointerDownCapture,k.onPointerDownCapture)})});tD.displayName=t7;var i7="DismissableLayerBranch",a7=te.forwardRef((e,t)=>{const n=te.useContext(eD),i=te.useRef(null),a=Nr(t,i);return te.useEffect(()=>{const l=i.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),b.jsx(Gn.div,{...e,ref:a})});a7.displayName=i7;function o7(e,t=globalThis?.document){const n=lu(e),i=te.useRef(!1),a=te.useRef(()=>{});return te.useEffect(()=>{const l=f=>{if(f.target&&!i.current){let d=function(){nD(n7,n,h,{discrete:!0})};const h={originalEvent:f};f.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);i.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",l),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function s7(e,t=globalThis?.document){const n=lu(e),i=te.useRef(!1);return te.useEffect(()=>{const a=l=>{l.target&&!i.current&&nD(r7,n,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function mb(){const e=new CustomEvent(vg);document.dispatchEvent(e)}function nD(e,t,n,{discrete:i}){const a=n.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),i?J9(a,l):a.dispatchEvent(l)}var g0="focusScope.autoFocusOnMount",v0="focusScope.autoFocusOnUnmount",pb={bubbles:!1,cancelable:!0},l7="FocusScope",rD=te.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...c}=e,[f,d]=te.useState(null),h=lu(a),m=lu(l),g=te.useRef(null),_=Nr(t,y=>d(y)),x=te.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;te.useEffect(()=>{if(i){let y=function(N){if(x.paused||!f)return;const F=N.target;f.contains(F)?g.current=F:ko(g.current,{select:!0})},E=function(N){if(x.paused||!f)return;const F=N.relatedTarget;F!==null&&(f.contains(F)||ko(g.current,{select:!0}))},D=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&ko(f)};document.addEventListener("focusin",y),document.addEventListener("focusout",E);const A=new MutationObserver(D);return f&&A.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",E),A.disconnect()}}},[i,f,x.paused]),te.useEffect(()=>{if(f){vb.add(x);const y=document.activeElement;if(!f.contains(y)){const D=new CustomEvent(g0,pb);f.addEventListener(g0,h),f.dispatchEvent(D),D.defaultPrevented||(u7(m7(iD(f)),{select:!0}),document.activeElement===y&&ko(f))}return()=>{f.removeEventListener(g0,h),setTimeout(()=>{const D=new CustomEvent(v0,pb);f.addEventListener(v0,m),f.dispatchEvent(D),D.defaultPrevented||ko(y??document.body,{select:!0}),f.removeEventListener(v0,m),vb.remove(x)},0)}}},[f,h,m,x]);const w=te.useCallback(y=>{if(!n&&!i||x.paused)return;const E=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,D=document.activeElement;if(E&&D){const A=y.currentTarget,[N,F]=c7(A);N&&F?!y.shiftKey&&D===F?(y.preventDefault(),n&&ko(N,{select:!0})):y.shiftKey&&D===N&&(y.preventDefault(),n&&ko(F,{select:!0})):D===A&&y.preventDefault()}},[n,i,x.paused]);return b.jsx(Gn.div,{tabIndex:-1,...c,ref:_,onKeyDown:w})});rD.displayName=l7;function u7(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(ko(i,{select:t}),document.activeElement!==n)return}function c7(e){const t=iD(e),n=gb(t,e),i=gb(t.reverse(),e);return[n,i]}function iD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gb(e,t){for(const n of e)if(!f7(n,{upTo:t}))return n}function f7(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function h7(e){return e instanceof HTMLInputElement&&"select"in e}function ko(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&h7(e)&&t&&e.select()}}var vb=d7();function d7(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=yb(e,t),e.unshift(t)},remove(t){e=yb(e,t),e[0]?.resume()}}}function yb(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function m7(e){return e.filter(t=>t.tagName!=="A")}var p7="Portal",aD=te.forwardRef((e,t)=>{const{container:n,...i}=e,[a,l]=te.useState(!1);su(()=>l(!0),[]);const c=n||a&&globalThis?.document?.body;return c?kd.createPortal(b.jsx(Gn.div,{...i,ref:t}),c):null});aD.displayName=p7;function g7(e,t){return te.useReducer((n,i)=>t[n][i]??n,e)}var vu=e=>{const{present:t,children:n}=e,i=v7(t),a=typeof n=="function"?n({present:i.isPresent}):te.Children.only(n),l=Nr(i.ref,y7(a));return typeof n=="function"||i.isPresent?te.cloneElement(a,{ref:l}):null};vu.displayName="Presence";function v7(e){const[t,n]=te.useState(),i=te.useRef(null),a=te.useRef(e),l=te.useRef("none"),c=e?"mounted":"unmounted",[f,d]=g7(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return te.useEffect(()=>{const h=Mh(i.current);l.current=f==="mounted"?h:"none"},[f]),su(()=>{const h=i.current,m=a.current;if(m!==e){const _=l.current,x=Mh(h);e?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&_!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),su(()=>{if(t){let h;const m=t.ownerDocument.defaultView??window,g=x=>{const y=Mh(i.current).includes(CSS.escape(x.animationName));if(x.target===t&&y&&(d("ANIMATION_END"),!a.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",h=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},_=x=>{x.target===t&&(l.current=Mh(i.current))};return t.addEventListener("animationstart",_),t.addEventListener("animationcancel",g),t.addEventListener("animationend",g),()=>{m.clearTimeout(h),t.removeEventListener("animationstart",_),t.removeEventListener("animationcancel",g),t.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:te.useCallback(h=>{i.current=h?getComputedStyle(h):null,n(h)},[])}}function Mh(e){return e?.animationName||"none"}function y7(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var y0=0;function _7(){te.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??_b()),document.body.insertAdjacentElement("beforeend",e[1]??_b()),y0++,()=>{y0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),y0--}},[])}function _b(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Vi=function(){return Vi=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Vi.apply(this,arguments)};function oD(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function x7(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,l;i<a;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return e.concat(l||Array.prototype.slice.call(t))}var Uh="right-scroll-bar-position",$h="width-before-scroll-bar",b7="with-scroll-bars-hidden",w7="--removed-body-scroll-bar-size";function _0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function D7(e,t){var n=te.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var a=n.value;a!==i&&(n.value=i,n.callback(i,a))}}}})[0];return n.callback=t,n.facade}var E7=typeof window<"u"?te.useLayoutEffect:te.useEffect,xb=new WeakMap;function S7(e,t){var n=D7(null,function(i){return e.forEach(function(a){return _0(a,i)})});return E7(function(){var i=xb.get(n);if(i){var a=new Set(i),l=new Set(e),c=n.current;a.forEach(function(f){l.has(f)||_0(f,null)}),l.forEach(function(f){a.has(f)||_0(f,c)})}xb.set(n,e)},[e]),n}function C7(e){return e}function A7(e,t){t===void 0&&(t=C7);var n=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(l){var c=t(l,i);return n.push(c),function(){n=n.filter(function(f){return f!==c})}},assignSyncMedium:function(l){for(i=!0;n.length;){var c=n;n=[],c.forEach(l)}n={push:function(f){return l(f)},filter:function(){return n}}},assignMedium:function(l){i=!0;var c=[];if(n.length){var f=n;n=[],f.forEach(l),c=n}var d=function(){var m=c;c=[],m.forEach(l)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(m){c.push(m),h()},filter:function(m){return c=c.filter(m),n}}}};return a}function N7(e){e===void 0&&(e={});var t=A7(null);return t.options=Vi({async:!0,ssr:!1},e),t}var sD=function(e){var t=e.sideCar,n=oD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return te.createElement(i,Vi({},n))};sD.isSideCarExport=!0;function M7(e,t){return e.useMedium(t),sD}var lD=N7(),x0=function(){},em=te.forwardRef(function(e,t){var n=te.useRef(null),i=te.useState({onScrollCapture:x0,onWheelCapture:x0,onTouchMoveCapture:x0}),a=i[0],l=i[1],c=e.forwardProps,f=e.children,d=e.className,h=e.removeScrollBar,m=e.enabled,g=e.shards,_=e.sideCar,x=e.noRelative,w=e.noIsolation,y=e.inert,E=e.allowPinchZoom,D=e.as,A=D===void 0?"div":D,N=e.gapMode,F=oD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=_,T=S7([n,t]),R=Vi(Vi({},F),a);return te.createElement(te.Fragment,null,m&&te.createElement(k,{sideCar:lD,removeScrollBar:h,shards:g,noRelative:x,noIsolation:w,inert:y,setCallbacks:l,allowPinchZoom:!!E,lockRef:n,gapMode:N}),c?te.cloneElement(te.Children.only(f),Vi(Vi({},R),{ref:T})):te.createElement(A,Vi({},R,{className:d,ref:T}),f))});em.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};em.classNames={fullWidth:$h,zeroRight:Uh};var T7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function k7(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=T7();return t&&e.setAttribute("nonce",t),e}function z7(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function L7(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var F7=function(){var e=0,t=null;return{add:function(n){e==0&&(t=k7())&&(z7(t,n),L7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},B7=function(){var e=F7();return function(t,n){te.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},uD=function(){var e=B7(),t=function(n){var i=n.styles,a=n.dynamic;return e(i,a),null};return t},R7={left:0,top:0,right:0,gap:0},b0=function(e){return parseInt(e||"",10)||0},O7=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[b0(n),b0(i),b0(a)]},j7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return R7;var t=O7(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},P7=uD(),Xl="data-scroll-locked",I7=function(e,t,n,i){var a=e.left,l=e.top,c=e.right,f=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(b7,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(f,"px ").concat(i,`;
  }
  body[`).concat(Xl,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(f,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uh,` {
    right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat($h,` {
    margin-right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(Uh," .").concat(Uh,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat($h," .").concat($h,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Xl,`] {
    `).concat(w7,": ").concat(f,`px;
  }
`)},bb=function(){var e=parseInt(document.body.getAttribute(Xl)||"0",10);return isFinite(e)?e:0},H7=function(){te.useEffect(function(){return document.body.setAttribute(Xl,(bb()+1).toString()),function(){var e=bb()-1;e<=0?document.body.removeAttribute(Xl):document.body.setAttribute(Xl,e.toString())}},[])},G7=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,a=i===void 0?"margin":i;H7();var l=te.useMemo(function(){return j7(a)},[a]);return te.createElement(P7,{styles:I7(l,!t,a,n?"":"!important")})},yg=!1;if(typeof window<"u")try{var Th=Object.defineProperty({},"passive",{get:function(){return yg=!0,!0}});window.addEventListener("test",Th,Th),window.removeEventListener("test",Th,Th)}catch{yg=!1}var Bl=yg?{passive:!1}:!1,U7=function(e){return e.tagName==="TEXTAREA"},cD=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!U7(e)&&n[t]==="visible")},$7=function(e){return cD(e,"overflowY")},Z7=function(e){return cD(e,"overflowX")},wb=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=fD(e,i);if(a){var l=hD(e,i),c=l[1],f=l[2];if(c>f)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},K7=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},q7=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},fD=function(e,t){return e==="v"?$7(t):Z7(t)},hD=function(e,t){return e==="v"?K7(t):q7(t)},V7=function(e,t){return e==="h"&&t==="rtl"?-1:1},Y7=function(e,t,n,i,a){var l=V7(e,window.getComputedStyle(t).direction),c=l*i,f=n.target,d=t.contains(f),h=!1,m=c>0,g=0,_=0;do{if(!f)break;var x=hD(e,f),w=x[0],y=x[1],E=x[2],D=y-E-l*w;(w||D)&&fD(e,f)&&(g+=D,_+=w);var A=f.parentNode;f=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!d&&f!==document.body||d&&(t.contains(f)||t===f));return(m&&Math.abs(g)<1||!m&&Math.abs(_)<1)&&(h=!0),h},kh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Db=function(e){return[e.deltaX,e.deltaY]},Eb=function(e){return e&&"current"in e?e.current:e},X7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},W7=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Q7=0,Rl=[];function J7(e){var t=te.useRef([]),n=te.useRef([0,0]),i=te.useRef(),a=te.useState(Q7++)[0],l=te.useState(uD)[0],c=te.useRef(e);te.useEffect(function(){c.current=e},[e]),te.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=x7([e.lockRef.current],(e.shards||[]).map(Eb),!0).filter(Boolean);return y.forEach(function(E){return E.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var f=te.useCallback(function(y,E){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!c.current.allowPinchZoom;var D=kh(y),A=n.current,N="deltaX"in y?y.deltaX:A[0]-D[0],F="deltaY"in y?y.deltaY:A[1]-D[1],k,T=y.target,R=Math.abs(N)>Math.abs(F)?"h":"v";if("touches"in y&&R==="h"&&T.type==="range")return!1;var j=wb(R,T);if(!j)return!0;if(j?k=R:(k=R==="v"?"h":"v",j=wb(R,T)),!j)return!1;if(!i.current&&"changedTouches"in y&&(N||F)&&(i.current=k),!k)return!0;var O=i.current||k;return Y7(O,E,y,O==="h"?N:F)},[]),d=te.useCallback(function(y){var E=y;if(!(!Rl.length||Rl[Rl.length-1]!==l)){var D="deltaY"in E?Db(E):kh(E),A=t.current.filter(function(k){return k.name===E.type&&(k.target===E.target||E.target===k.shadowParent)&&X7(k.delta,D)})[0];if(A&&A.should){E.cancelable&&E.preventDefault();return}if(!A){var N=(c.current.shards||[]).map(Eb).filter(Boolean).filter(function(k){return k.contains(E.target)}),F=N.length>0?f(E,N[0]):!c.current.noIsolation;F&&E.cancelable&&E.preventDefault()}}},[]),h=te.useCallback(function(y,E,D,A){var N={name:y,delta:E,target:D,should:A,shadowParent:eF(D)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(F){return F!==N})},1)},[]),m=te.useCallback(function(y){n.current=kh(y),i.current=void 0},[]),g=te.useCallback(function(y){h(y.type,Db(y),y.target,f(y,e.lockRef.current))},[]),_=te.useCallback(function(y){h(y.type,kh(y),y.target,f(y,e.lockRef.current))},[]);te.useEffect(function(){return Rl.push(l),e.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:_}),document.addEventListener("wheel",d,Bl),document.addEventListener("touchmove",d,Bl),document.addEventListener("touchstart",m,Bl),function(){Rl=Rl.filter(function(y){return y!==l}),document.removeEventListener("wheel",d,Bl),document.removeEventListener("touchmove",d,Bl),document.removeEventListener("touchstart",m,Bl)}},[]);var x=e.removeScrollBar,w=e.inert;return te.createElement(te.Fragment,null,w?te.createElement(l,{styles:W7(a)}):null,x?te.createElement(G7,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function eF(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const tF=M7(lD,J7);var dD=te.forwardRef(function(e,t){return te.createElement(em,Vi({},e,{ref:t,sideCar:tF}))});dD.classNames=em.classNames;var nF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ol=new WeakMap,zh=new WeakMap,Lh={},w0=0,mD=function(e){return e&&(e.host||mD(e.parentNode))},rF=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=mD(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iF=function(e,t,n,i){var a=rF(t,Array.isArray(e)?e:[e]);Lh[n]||(Lh[n]=new WeakMap);var l=Lh[n],c=[],f=new Set,d=new Set(a),h=function(g){!g||f.has(g)||(f.add(g),h(g.parentNode))};a.forEach(h);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(_){if(f.has(_))m(_);else try{var x=_.getAttribute(i),w=x!==null&&x!=="false",y=(Ol.get(_)||0)+1,E=(l.get(_)||0)+1;Ol.set(_,y),l.set(_,E),c.push(_),y===1&&w&&zh.set(_,!0),E===1&&_.setAttribute(n,"true"),w||_.setAttribute(i,"true")}catch(D){console.error("aria-hidden: cannot operate on ",_,D)}})};return m(t),f.clear(),w0++,function(){c.forEach(function(g){var _=Ol.get(g)-1,x=l.get(g)-1;Ol.set(g,_),l.set(g,x),_||(zh.has(g)||g.removeAttribute(i),zh.delete(g)),x||g.removeAttribute(n)}),w0--,w0||(Ol=new WeakMap,Ol=new WeakMap,zh=new WeakMap,Lh={})}},aF=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),a=nF(e);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),iF(i,a,n,"aria-hidden")):function(){return null}},tm="Dialog",[pD,gD]=gu(tm),[oF,Ci]=pD(tm),vD=e=>{const{__scopeDialog:t,children:n,open:i,defaultOpen:a,onOpenChange:l,modal:c=!0}=e,f=te.useRef(null),d=te.useRef(null),[h,m]=Jd({prop:i,defaultProp:a??!1,onChange:l,caller:tm});return b.jsx(oF,{scope:t,triggerRef:f,contentRef:d,contentId:Lc(),titleId:Lc(),descriptionId:Lc(),open:h,onOpenChange:m,onOpenToggle:te.useCallback(()=>m(g=>!g),[m]),modal:c,children:n})};vD.displayName=tm;var yD="DialogTrigger",_D=te.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Ci(yD,n),l=Nr(t,a.triggerRef);return b.jsx(Gn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":av(a.open),...i,ref:l,onClick:En(e.onClick,a.onOpenToggle)})});_D.displayName=yD;var rv="DialogPortal",[sF,xD]=pD(rv,{forceMount:void 0}),bD=e=>{const{__scopeDialog:t,forceMount:n,children:i,container:a}=e,l=Ci(rv,t);return b.jsx(sF,{scope:t,forceMount:n,children:te.Children.map(i,c=>b.jsx(vu,{present:n||l.open,children:b.jsx(aD,{asChild:!0,container:a,children:c})}))})};bD.displayName=rv;var Sd="DialogOverlay",wD=te.forwardRef((e,t)=>{const n=xD(Sd,e.__scopeDialog),{forceMount:i=n.forceMount,...a}=e,l=Ci(Sd,e.__scopeDialog);return l.modal?b.jsx(vu,{present:i||l.open,children:b.jsx(uF,{...a,ref:t})}):null});wD.displayName=Sd;var lF=Ed("DialogOverlay.RemoveScroll"),uF=te.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Ci(Sd,n);return b.jsx(dD,{as:lF,allowPinchZoom:!0,shards:[a.contentRef],children:b.jsx(Gn.div,{"data-state":av(a.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),Rs="DialogContent",DD=te.forwardRef((e,t)=>{const n=xD(Rs,e.__scopeDialog),{forceMount:i=n.forceMount,...a}=e,l=Ci(Rs,e.__scopeDialog);return b.jsx(vu,{present:i||l.open,children:l.modal?b.jsx(cF,{...a,ref:t}):b.jsx(fF,{...a,ref:t})})});DD.displayName=Rs;var cF=te.forwardRef((e,t)=>{const n=Ci(Rs,e.__scopeDialog),i=te.useRef(null),a=Nr(t,n.contentRef,i);return te.useEffect(()=>{const l=i.current;if(l)return aF(l)},[]),b.jsx(ED,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:En(e.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:En(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,f=c.button===0&&c.ctrlKey===!0;(c.button===2||f)&&l.preventDefault()}),onFocusOutside:En(e.onFocusOutside,l=>l.preventDefault())})}),fF=te.forwardRef((e,t)=>{const n=Ci(Rs,e.__scopeDialog),i=te.useRef(!1),a=te.useRef(!1);return b.jsx(ED,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(i.current||n.triggerRef.current?.focus(),l.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=l.target;n.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),ED=te.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,...c}=e,f=Ci(Rs,n),d=te.useRef(null),h=Nr(t,d);return _7(),b.jsxs(b.Fragment,{children:[b.jsx(rD,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:l,children:b.jsx(tD,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":av(f.open),...c,ref:h,onDismiss:()=>f.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(dF,{titleId:f.titleId}),b.jsx(pF,{contentRef:d,descriptionId:f.descriptionId})]})]})}),iv="DialogTitle",SD=te.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Ci(iv,n);return b.jsx(Gn.h2,{id:a.titleId,...i,ref:t})});SD.displayName=iv;var CD="DialogDescription",AD=te.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Ci(CD,n);return b.jsx(Gn.p,{id:a.descriptionId,...i,ref:t})});AD.displayName=CD;var ND="DialogClose",MD=te.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,a=Ci(ND,n);return b.jsx(Gn.button,{type:"button",...i,ref:t,onClick:En(e.onClick,()=>a.onOpenChange(!1))})});MD.displayName=ND;function av(e){return e?"open":"closed"}var TD="DialogTitleWarning",[hF,kD]=I9(TD,{contentName:Rs,titleName:iv,docsSlug:"dialog"}),dF=({titleId:e})=>{const t=kD(TD),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return te.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},mF="DialogDescriptionWarning",pF=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kD(mF).contentName}}.`;return te.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},zD=vD,gF=_D,LD=bD,FD=wD,BD=DD,RD=SD,OD=AD,ov=MD;function Ai({...e}){return b.jsx(zD,{"data-slot":"dialog",...e})}function vF({...e}){return b.jsx(LD,{"data-slot":"dialog-portal",...e})}function yF({className:e,...t}){return b.jsx(FD,{"data-slot":"dialog-overlay",className:dn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[9999] bg-black/80",e),...t})}function Ni({className:e,children:t,showCloseButton:n=!0,...i}){return b.jsxs(vF,{"data-slot":"dialog-portal",children:[b.jsx(yF,{}),b.jsxs(BD,{"data-slot":"dialog-content",className:dn("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[10000] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...i,children:[t,n&&b.jsxs(ov,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[b.jsx(jo,{}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Mi({className:e,...t}){return b.jsx("div",{"data-slot":"dialog-header",className:dn("flex flex-col gap-2 text-center sm:text-left",e),...t})}function sv({className:e,...t}){return b.jsx("div",{"data-slot":"dialog-footer",className:dn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Ti({className:e,...t}){return b.jsx(RD,{"data-slot":"dialog-title",className:dn("text-lg leading-none font-semibold",e),...t})}function _F({className:e,...t}){return b.jsx(OD,{"data-slot":"dialog-description",className:dn("text-muted-foreground text-sm",e),...t})}function xF(e){const t=te.useRef({value:e,previous:e});return te.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function bF(e){const[t,n]=te.useState(void 0);return su(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let c,f;if("borderBoxSize"in l){const d=l.borderBoxSize,h=Array.isArray(d)?d[0]:d;c=h.inlineSize,f=h.blockSize}else c=e.offsetWidth,f=e.offsetHeight;n({width:c,height:f})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var nm="Checkbox",[wF,jR]=gu(nm),[DF,lv]=wF(nm);function EF(e){const{__scopeCheckbox:t,checked:n,children:i,defaultChecked:a,disabled:l,form:c,name:f,onCheckedChange:d,required:h,value:m="on",internal_do_not_use_render:g}=e,[_,x]=Jd({prop:n,defaultProp:a??!1,onChange:d,caller:nm}),[w,y]=te.useState(null),[E,D]=te.useState(null),A=te.useRef(!1),N=w?!!c||!!w.closest("form"):!0,F={checked:_,disabled:l,setChecked:x,control:w,setControl:y,name:f,form:c,value:m,hasConsumerStoppedPropagationRef:A,required:h,defaultChecked:Po(a)?!1:a,isFormControl:N,bubbleInput:E,setBubbleInput:D};return b.jsx(DF,{scope:t,...F,children:SF(g)?g(F):i})}var jD="CheckboxTrigger",PD=te.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...i},a)=>{const{control:l,value:c,disabled:f,checked:d,required:h,setControl:m,setChecked:g,hasConsumerStoppedPropagationRef:_,isFormControl:x,bubbleInput:w}=lv(jD,e),y=Nr(a,m),E=te.useRef(d);return te.useEffect(()=>{const D=l?.form;if(D){const A=()=>g(E.current);return D.addEventListener("reset",A),()=>D.removeEventListener("reset",A)}},[l,g]),b.jsx(Gn.button,{type:"button",role:"checkbox","aria-checked":Po(d)?"mixed":d,"aria-required":h,"data-state":$D(d),"data-disabled":f?"":void 0,disabled:f,value:c,...i,ref:y,onKeyDown:En(t,D=>{D.key==="Enter"&&D.preventDefault()}),onClick:En(n,D=>{g(A=>Po(A)?!0:!A),w&&x&&(_.current=D.isPropagationStopped(),_.current||D.stopPropagation())})})});PD.displayName=jD;var uv=te.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:i,checked:a,defaultChecked:l,required:c,disabled:f,value:d,onCheckedChange:h,form:m,...g}=e;return b.jsx(EF,{__scopeCheckbox:n,checked:a,defaultChecked:l,disabled:f,required:c,onCheckedChange:h,name:i,form:m,value:d,internal_do_not_use_render:({isFormControl:_})=>b.jsxs(b.Fragment,{children:[b.jsx(PD,{...g,ref:t,__scopeCheckbox:n}),_&&b.jsx(UD,{__scopeCheckbox:n})]})})});uv.displayName=nm;var ID="CheckboxIndicator",HD=te.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:i,...a}=e,l=lv(ID,n);return b.jsx(vu,{present:i||Po(l.checked)||l.checked===!0,children:b.jsx(Gn.span,{"data-state":$D(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});HD.displayName=ID;var GD="CheckboxBubbleInput",UD=te.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:i,hasConsumerStoppedPropagationRef:a,checked:l,defaultChecked:c,required:f,disabled:d,name:h,value:m,form:g,bubbleInput:_,setBubbleInput:x}=lv(GD,e),w=Nr(n,x),y=xF(l),E=bF(i);te.useEffect(()=>{const A=_;if(!A)return;const N=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(N,"checked").set,T=!a.current;if(y!==l&&k){const R=new Event("click",{bubbles:T});A.indeterminate=Po(l),k.call(A,Po(l)?!1:l),A.dispatchEvent(R)}},[_,y,l,a]);const D=te.useRef(Po(l)?!1:l);return b.jsx(Gn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??D.current,required:f,disabled:d,name:h,value:m,form:g,...t,tabIndex:-1,ref:w,style:{...t.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});UD.displayName=GD;function SF(e){return typeof e=="function"}function Po(e){return e==="indeterminate"}function $D(e){return Po(e)?"indeterminate":e?"checked":"unchecked"}const La=te.forwardRef(({className:e,...t},n)=>b.jsx(uv,{ref:n,className:dn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:b.jsx(HD,{className:dn("flex items-center justify-center text-current"),children:b.jsx(U0,{className:"h-4 w-4"})})}));La.displayName=uv.displayName;const ZD=[{name:"YlOrBr",label:"Gelb-Orange-Braun",interpolator:Xw},{name:"Viridis",label:"Viridis",interpolator:mg},{name:"Plasma",label:"Plasma",interpolator:gg},{name:"Inferno",label:"Inferno",interpolator:pg},{name:"Magma",label:"Magma",interpolator:P9},{name:"Warm",label:"Warm",interpolator:L9},{name:"Cool",label:"Cool",interpolator:F9},{name:"Cubehelix",label:"Cubehelix",interpolator:z9},{name:"Blues",label:"Blau",interpolator:S9},{name:"Greens",label:"Grün",interpolator:A9},{name:"Oranges",label:"Orange",interpolator:k9},{name:"Purples",label:"Lila",interpolator:M9}],KD=[{name:"RdYlGn",label:"Rot-Gelb-Grün (umgekehrt)",interpolator:e=>dg(1-e)},{name:"RdYlGnNormal",label:"Rot-Gelb-Grün",interpolator:dg},{name:"Viridis",label:"Viridis",interpolator:mg},{name:"ViridisReverse",label:"Viridis (umgekehrt)",interpolator:e=>mg(1-e)},{name:"Plasma",label:"Plasma",interpolator:gg},{name:"PlasmaReverse",label:"Plasma (umgekehrt)",interpolator:e=>gg(1-e)},{name:"Inferno",label:"Inferno",interpolator:pg},{name:"InfernoReverse",label:"Inferno (umgekehrt)",interpolator:e=>pg(1-e)},{name:"Rainbow",label:"Regenbogen",interpolator:B9},{name:"Sinebow",label:"Sinebow",interpolator:j9}],Sb=({scheme:e,width:t=200,height:n=20})=>{const a=`gradient-${e.name}-${Date.now()}`;return b.jsxs("svg",{width:t,height:n,style:{border:"1px solid #ccc",borderRadius:"2px"},children:[b.jsx("defs",{children:b.jsx("linearGradient",{id:a,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:Array.from({length:50},(l,c)=>{const f=c/49;return b.jsx("stop",{offset:`${f*100}%`,stopColor:e.interpolator(f)},c)})})}),b.jsx("rect",{x:"0",y:"0",width:t,height:n,fill:`url(#${a})`})]})},CF=({isOpen:e,onClose:t})=>{const{colorPalettes:n,setColorPalette:i,immissionGridSettings:a,updateImmissionGridSettings:l}=en(),[c,f]=te.useState(n.dgm),[d,h]=te.useState(n.immissionGrid),[m,g]=te.useState(a.legendMode),[_,x]=te.useState(a.legendMinValue),[w,y]=te.useState(a.legendIntervalSize),[E,D]=te.useState(a.legendIntervalCount),[A,N]=te.useState(a.opacity),F=()=>{i("dgm",c),i("immissionGrid",d),l({legendMode:m,legendMinValue:_,legendIntervalSize:w,legendIntervalCount:E,opacity:A}),t()},k=()=>{f(n.dgm),h(n.immissionGrid),g(a.legendMode),x(a.legendMinValue),y(a.legendIntervalSize),D(a.legendIntervalCount),N(a.opacity),t()};return b.jsx(Ai,{open:e,onOpenChange:k,children:b.jsxs(Ni,{className:"sm:max-w-3xl max-h-[80vh] overflow-y-auto",children:[b.jsx(Mi,{children:b.jsx(Ti,{children:"Farbpaletten Einstellungen"})}),b.jsxs("div",{className:"mt-4 space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Digitales Geländemodell (DGM)"}),b.jsx("div",{className:"grid grid-cols-1 gap-2",children:ZD.map(T=>b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("input",{type:"radio",id:`dgm-${T.name}`,name:"dgm-palette",value:T.name,checked:c===T.name,onChange:R=>f(R.target.value),className:"w-4 h-4"}),b.jsxs(lt,{htmlFor:`dgm-${T.name}`,className:"flex items-center gap-3 cursor-pointer flex-1",children:[b.jsx("span",{className:"min-w-[150px]",children:T.label}),b.jsx(Sb,{scheme:T})]})]},T.name))})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Immissionsgitter"}),b.jsx("div",{className:"grid grid-cols-1 gap-2",children:KD.map(T=>b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("input",{type:"radio",id:`immission-${T.name}`,name:"immission-palette",value:T.name,checked:d===T.name,onChange:R=>h(R.target.value),className:"w-4 h-4"}),b.jsxs(lt,{htmlFor:`immission-${T.name}`,className:"flex items-center gap-3 cursor-pointer flex-1",children:[b.jsx("span",{className:"min-w-[150px]",children:T.label}),b.jsx(Sb,{scheme:T})]})]},T.name))})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Immissionsgitter Legende & Darstellung"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(lt,{htmlFor:"opacity",className:"min-w-[120px]",children:"Transparenz:"}),b.jsx(At,{id:"opacity",type:"number",min:"0",max:"1",step:"0.1",value:A,onChange:T=>N(Number(T.target.value)),className:"w-24"}),b.jsx("span",{className:"text-sm text-gray-600",children:"(0 = transparent, 1 = opak)"})]}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(La,{id:"auto-legend",checked:m==="auto",onCheckedChange:T=>g(T?"auto":"custom")}),b.jsx(lt,{htmlFor:"auto-legend",children:"Automatische Legende"})]}),m==="custom"&&b.jsxs("div",{className:"space-y-3 ml-6",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(lt,{htmlFor:"min-value",className:"min-w-[120px]",children:"Min Wert:"}),b.jsx(At,{id:"min-value",type:"number",value:_,onChange:T=>x(Number(T.target.value)),className:"w-24"}),b.jsx("span",{className:"text-sm text-gray-600",children:"dB(A)"})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(lt,{htmlFor:"interval-size",className:"min-w-[120px]",children:"Intervallgröße:"}),b.jsx(At,{id:"interval-size",type:"number",value:w,onChange:T=>y(Number(T.target.value)),className:"w-24"}),b.jsx("span",{className:"text-sm text-gray-600",children:"dB(A)"})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(lt,{htmlFor:"interval-count",className:"min-w-[120px]",children:"Anzahl Intervalle:"}),b.jsx(At,{id:"interval-count",type:"number",value:E,onChange:T=>D(Number(T.target.value)),className:"w-24"})]}),b.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Bereich: ",_," - ",_+w*E," dB(A)"]})]})]})]})]}),b.jsxs(sv,{className:"mt-6",children:[b.jsx(rt,{variant:"outline",onClick:k,children:"Abbrechen"}),b.jsx(rt,{onClick:F,children:"Anwenden"})]})]})})},qD=(e,t)=>{const i=(e==="dgm"?ZD:KD).find(a=>a.name===t);return i?i.interpolator:e==="dgm"?Xw:a=>dg(1-a)};function AF(e,t,n,i){const[a,l]=i.pixelToGK(e,t);for(const c of n){const f=c.A?.HP?.GK_Vektor,d=c.B?.HP?.GK_Vektor,h=c.C?.HP?.GK_Vektor;if(!f||!d||!h)continue;const m=f.GK.Rechts,g=f.GK.Hoch,_=d.GK.Rechts,x=d.GK.Hoch,w=h.GK.Rechts,y=h.GK.Hoch,E=w-m,D=y-g,A=_-m,N=x-g,F=a-m,k=l-g,T=E*E+D*D,R=E*A+D*N,j=E*F+D*k,O=A*A+N*N,G=A*F+N*k,U=1/(T*O-R*R),I=(O*j-R*G)*U,W=(T*G-R*j)*U;if(I>=0&&W>=0&&I+W<=1)return(1-I-W)*f.z+I*h.z+W*d.z}return null}const NF=({width:e,height:t,dgmDreiecke:n,transform:i,gridSize:a=25,thresholds:l=15,opacity:c=.5})=>{const f=Fd(),d=te.useRef(null),h=te.useRef(null),m=te.useRef(null),{colorPalettes:g}=en(),_=qD("dgm",g.dgm),{contourSVG:x,minHeight:w,maxHeight:y}=te.useMemo(()=>{if(!n||n.length===0||!i)return console.log("No DTM data or transform available"),{contourSVG:null,minHeight:0,maxHeight:0};console.log(`Generating contour grid: ${e}x${t}, gridSize: ${a}`);const E=Math.ceil(e/a),D=Math.ceil(t/a),A=new Array(E*D);let N=0,F=1/0,k=-1/0;for(let B=0;B<D;B++)for(let re=0;re<E;re++){const K=re*a,ee=B*a,V=t-ee,Q=AF(K,V,n,i),$=B*E+re;Q!==null?(A[$]=Q,N++,F=Math.min(F,Q),k=Math.max(k,Q)):A[$]=NaN}if(console.log(`Extracted heights at ${N} grid points`),console.log(`Height range: ${F.toFixed(2)} to ${k.toFixed(2)}`),N===0)return console.warn("No valid height points found in DTM"),{contourSVG:null,minHeight:0,maxHeight:0};const T=rw().size([E,D]).thresholds(l).smooth(!0),R=A.map(B=>isNaN(B)?F-1:B),j=T(R),O=Vd(_).domain([F,k]),G=Mw({point:function(B,re){this.stream.point(B*a,re*a)}}),U=Nw().projection(G),I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.setAttribute("xmlns","http://www.w3.org/2000/svg"),I.setAttribute("viewBox",`0 0 ${e} ${t}`),I.style.width="100%",I.style.height="100%";const W=document.createElementNS("http://www.w3.org/2000/svg","g");return W.setAttribute("opacity",c.toString()),j.forEach(B=>{const re=document.createElementNS("http://www.w3.org/2000/svg","path"),K=U(B);K&&(re.setAttribute("d",K),re.setAttribute("fill",O(B.value)),re.setAttribute("fill-opacity","0.4"),re.setAttribute("stroke",O(B.value)),re.setAttribute("stroke-width","1"),re.setAttribute("stroke-opacity","0.8")),W.appendChild(re)}),I.appendChild(W),console.log(`Generated ${j.length} contour lines`),{contourSVG:I,minHeight:F,maxHeight:k}},[e,t,n,i,a,l,c,_]);return te.useEffect(()=>{if(!x||!f)return;d.current&&f.removeLayer(d.current);const E=[[0,0],[t,e]],D=ur.svgOverlay(x.cloneNode(!0),E,{interactive:!1,zIndex:400});return D.addTo(f),d.current=D,()=>{d.current&&(f.removeLayer(d.current),d.current=null)}},[x,f,t,e]),te.useEffect(()=>{if(console.log("ContourOverlay Legend effect:",{hasMap:!!f,minHeight:w.toFixed(2),maxHeight:y.toFixed(2),hasContourSVG:!!x,isValidRange:w!==y&&!isNaN(w)&&!isNaN(y)}),!f||!x||w===y||isNaN(w)||isNaN(y)){m.current&&(m.current.unmount(),m.current=null),h.current&&(h.current.remove(),h.current=null);return}if(console.log("Creating ContourOverlay legend with height range:",w.toFixed(2),"to",y.toFixed(2),"m"),!h.current){const E=document.createElement("div");E.className="contour-legend-container",E.style.position="absolute",E.style.bottom="10px",E.style.left="10px",E.style.zIndex="1000",E.style.pointerEvents="none",f.getContainer().appendChild(E),h.current=E,m.current=wg.createRoot(E)}return m.current&&(console.log("Rendering ContourOverlay D3Legend component"),m.current.render(b.jsx(Ww,{minValue:w,maxValue:y,colorScheme:_,title:"Höhe",unit:" m",position:"bottomleft",width:120,height:220}))),()=>{console.log("Cleaning up ContourOverlay legend"),m.current&&(m.current.unmount(),m.current=null),h.current&&(h.current.remove(),h.current=null)}},[f,w,y,_,x]),null},MF=({width:e,height:t,transform:n,gridValues:i,gridValuesDetailed:a,displayMode:l="total",opacity:c=.6,thresholds:f=[5]})=>{const d=Fd(),h=te.useRef(null),m=te.useRef(null),g=te.useRef(null),{colorPalettes:_,immissionGridSettings:x}=en(),w=qD("immission",_.immissionGrid),{contourSVG:y,minValue:E,maxValue:D,legendMin:A,legendMax:N}=te.useMemo(()=>{const F=l!=="total"&&a&&a.length>0,k=F?a:i;if(!k||k.length===0||!n)return console.log("No grid values or transform available"),{contourSVG:null,minValue:0,maxValue:0,legendMin:0,legendMax:0};console.log(`Generating immission grid contours (${l} mode): ${e}x${t}, ${k.length} points`);const T=$e=>{if(F)switch(l){case"esq":return $e.esq||0;case"trassen":return $e.trassen||0;default:return $e.total||0}return $e.value||0},R=k.map($e=>$e.x),j=k.map($e=>$e.y),O=[...new Set(R)].sort(($e,Ke)=>$e-Ke),G=[...new Set(j)].sort(($e,Ke)=>$e-Ke),U=O.length,I=G.length;console.log(`Grid dimensions: ${U}x${I}`);const W=k.map($e=>T($e)).filter($e=>!isNaN($e)),B=Math.min(...W),re=Math.max(...W);let K=B,ee=re,V=f;if(x.legendMode==="custom"){K=x.legendMinValue,ee=K+x.legendIntervalSize*x.legendIntervalCount;const $e=[];for(let Ke=0;Ke<=x.legendIntervalCount;Ke++)$e.push(K+Ke*x.legendIntervalSize);V=$e}console.log(`Immission value range: ${B.toFixed(2)} to ${re.toFixed(2)} dB(A)`),console.log(`Legend range: ${K.toFixed(2)} to ${ee.toFixed(2)} dB(A)`);const Q=k.map($e=>[$e.x,t-$e.y]),$=Fo.from(Q),q=Math.ceil(e/10),ne=Math.ceil(t/10),se=new Array(q*ne);for(let $e=0;$e<ne;$e++)for(let Ke=0;Ke<q;Ke++){const H=Ke/(q-1)*e,Te=$e/(ne-1)*t;let Se=NaN;for(let ie=0;ie<$.triangles.length;ie+=3){const ue=$.triangles[ie],be=$.triangles[ie+1],De=$.triangles[ie+2],ge=k[ue],X=k[be],oe=k[De],le=t-ge.y,me=t-X.y,ye=t-oe.y,de=oe.x-ge.x,Be=ye-le,Fe=X.x-ge.x,Re=me-le,je=H-ge.x,We=Te-le,ht=de*de+Be*Be,dt=de*Fe+Be*Re,Et=de*je+Be*We,Nt=Fe*Fe+Re*Re,Qt=Fe*je+Re*We,tn=1/(ht*Nt-dt*dt),Sn=(Nt*Et-dt*Qt)*tn,Cn=(ht*Qt-dt*Et)*tn;if(Sn>=0&&Cn>=0&&Sn+Cn<=1){Se=(1-Sn-Cn)*T(ge)+Sn*T(oe)+Cn*T(X);break}}const ae=$e*q+Ke;se[ae]=Se}const ce=se.map($e=>isNaN($e)?B-1:$e),_e=rw().size([q,ne]).thresholds(V).smooth(!0)(ce),ze=Vd(w).domain([K,ee]),ke=Mw({point:function($e,Ke){this.stream.point($e*(e/(q-1)),Ke*(t/(ne-1)))}}),Ie=Nw().projection(ke),Ze=document.createElementNS("http://www.w3.org/2000/svg","svg");Ze.setAttribute("xmlns","http://www.w3.org/2000/svg"),Ze.setAttribute("viewBox",`0 0 ${e} ${t}`),Ze.style.width="100%",Ze.style.height="100%";const Xe=document.createElementNS("http://www.w3.org/2000/svg","g");return Xe.setAttribute("opacity",c.toString()),_e.forEach($e=>{const Ke=document.createElementNS("http://www.w3.org/2000/svg","path"),H=Ie($e);H&&(Ke.setAttribute("d",H),Ke.setAttribute("fill",ze($e.value)),Ke.setAttribute("fill-opacity","0.5"),Ke.setAttribute("stroke",ze($e.value)),Ke.setAttribute("stroke-width","0.5"),Ke.setAttribute("stroke-opacity","0.8")),Xe.appendChild(Ke)}),Ze.appendChild(Xe),console.log(`Generated ${_e.length} immission contour lines`),{contourSVG:Ze,minValue:B,maxValue:re,legendMin:K,legendMax:ee}},[e,t,i,a,l,n,c,w,f,x]);return te.useEffect(()=>{if(!y||!d)return;h.current&&d.removeLayer(h.current);const F=[[0,0],[t,e]],k=ur.svgOverlay(y.cloneNode(!0),F,{interactive:!1,zIndex:450});return k.addTo(d),h.current=k,()=>{h.current&&(d.removeLayer(h.current),h.current=null)}},[y,d,t,e]),te.useEffect(()=>{if(console.log("ImmissionGrid Legend effect:",{hasMap:!!d,minValue:E.toFixed(2),maxValue:D.toFixed(2),hasContourSVG:!!y,isValidRange:E!==D&&!isNaN(E)&&!isNaN(D),legendMode:x.legendMode}),!d||!y){g.current&&(g.current.unmount(),g.current=null),m.current&&(m.current.remove(),m.current=null);return}let F,k;if(x.legendMode==="custom"){F=[],k=[];for(let T=x.legendIntervalCount-1;T>=0;T--){const j=A+T*x.legendIntervalSize+x.legendIntervalSize/2;F.push(j)}for(let T=x.legendIntervalCount;T>=0;T--){const R=A+T*x.legendIntervalSize;k.push(`${R.toFixed(0)} dB(A)`)}}if(x.legendMode==="auto"&&(A===N||isNaN(A)||isNaN(N))){g.current&&(g.current.unmount(),g.current=null),m.current&&(m.current.remove(),m.current=null);return}if(console.log("Creating ImmissionGrid legend with range:",A.toFixed(2),"to",N.toFixed(2),"dB(A)"),!m.current){const T=document.createElement("div");T.className="immission-legend-container",T.style.position="absolute",T.style.bottom="10px",T.style.right="10px",T.style.zIndex="1000",T.style.pointerEvents="none",d.getContainer().appendChild(T),m.current=T,g.current=wg.createRoot(T)}if(g.current){console.log("Rendering ImmissionGrid D3Legend component");let T="Immission";switch(l){case"esq":T="ESQ Sources";break;case"trassen":T="Transmission Lines";break;case"total":default:T="Total Immission";break}g.current.render(b.jsx(Ww,{minValue:A,maxValue:N,colorScheme:w,title:T,unit:" dB(A)",position:"bottomright",width:120,height:220,customIntervals:F,intervalLabels:k}))}return()=>{console.log("Cleaning up ImmissionGrid legend"),g.current&&(g.current.unmount(),g.current=null),m.current&&(m.current.remove(),m.current=null)}},[d,A,N,w,y,x,l]),null};var VD="AlertDialog",[TF,PR]=gu(VD,[gD]),Oa=gD(),YD=e=>{const{__scopeAlertDialog:t,...n}=e,i=Oa(t);return b.jsx(zD,{...i,...n,modal:!0})};YD.displayName=VD;var kF="AlertDialogTrigger",zF=te.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(gF,{...a,...i,ref:t})});zF.displayName=kF;var LF="AlertDialogPortal",XD=e=>{const{__scopeAlertDialog:t,...n}=e,i=Oa(t);return b.jsx(LD,{...i,...n})};XD.displayName=LF;var FF="AlertDialogOverlay",WD=te.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(FD,{...a,...i,ref:t})});WD.displayName=FF;var Wl="AlertDialogContent",[BF,RF]=TF(Wl),OF=V9("AlertDialogContent"),QD=te.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:i,...a}=e,l=Oa(n),c=te.useRef(null),f=Nr(t,c),d=te.useRef(null);return b.jsx(hF,{contentName:Wl,titleName:JD,docsSlug:"alert-dialog",children:b.jsx(BF,{scope:n,cancelRef:d,children:b.jsxs(BD,{role:"alertdialog",...l,...a,ref:f,onOpenAutoFocus:En(a.onOpenAutoFocus,h=>{h.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[b.jsx(OF,{children:i}),b.jsx(PF,{contentRef:c})]})})})});QD.displayName=Wl;var JD="AlertDialogTitle",eE=te.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(RD,{...a,...i,ref:t})});eE.displayName=JD;var tE="AlertDialogDescription",nE=te.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(OD,{...a,...i,ref:t})});nE.displayName=tE;var jF="AlertDialogAction",rE=te.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,a=Oa(n);return b.jsx(ov,{...a,...i,ref:t})});rE.displayName=jF;var iE="AlertDialogCancel",aE=te.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,{cancelRef:a}=RF(iE,n),l=Oa(n),c=Nr(t,a);return b.jsx(ov,{...l,...i,ref:c})});aE.displayName=iE;var PF=({contentRef:e})=>{const t=`\`${Wl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Wl}\` by passing a \`${tE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Wl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return te.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},IF=YD,HF=XD,GF=WD,UF=QD,$F=rE,ZF=aE,KF=eE,qF=nE;function oE({...e}){return b.jsx(IF,{"data-slot":"alert-dialog",...e})}function VF({...e}){return b.jsx(HF,{"data-slot":"alert-dialog-portal",...e})}function YF({className:e,...t}){return b.jsx(GF,{"data-slot":"alert-dialog-overlay",className:dn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[9999] bg-black/80",e),...t})}function sE({className:e,...t}){return b.jsxs(VF,{children:[b.jsx(YF,{}),b.jsx(UF,{"data-slot":"alert-dialog-content",className:dn("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[10000] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function lE({className:e,...t}){return b.jsx("div",{"data-slot":"alert-dialog-header",className:dn("flex flex-col gap-2 text-center sm:text-left",e),...t})}function uE({className:e,...t}){return b.jsx("div",{"data-slot":"alert-dialog-footer",className:dn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function cE({className:e,...t}){return b.jsx(KF,{"data-slot":"alert-dialog-title",className:dn("text-lg font-semibold",e),...t})}function fE({className:e,...t}){return b.jsx(qF,{"data-slot":"alert-dialog-description",className:dn("text-muted-foreground text-sm",e),...t})}function hE({className:e,...t}){return b.jsx($F,{className:dn(Zg(),e),...t})}function XF({className:e,...t}){return b.jsx(ZF,{className:dn(Zg({variant:"outline"}),e),...t})}const dE=te.createContext(void 0),WF=({children:e})=>{const[t,n]=te.useState({isOpen:!1,message:"",resolve:()=>{}}),[i,a]=te.useState({isOpen:!1,message:"",defaultValue:"",resolve:()=>{}}),[l,c]=te.useState(""),f=te.useCallback(g=>new Promise(_=>{n({isOpen:!0,message:g,resolve:_})}),[]),d=te.useCallback((g,_="")=>new Promise(x=>{c(_),a({isOpen:!0,message:g,defaultValue:_,resolve:x})}),[]),h=te.useCallback(g=>{t.resolve(g),n({isOpen:!1,message:"",resolve:()=>{}})},[t]),m=te.useCallback(g=>{i.resolve(g),a({isOpen:!1,message:"",defaultValue:"",resolve:()=>{}}),c("")},[i]);return b.jsxs(dE.Provider,{value:{confirm:f,prompt:d},children:[e,b.jsx(oE,{open:t.isOpen,onOpenChange:g=>!g&&h(!1),children:b.jsxs(sE,{children:[b.jsxs(lE,{children:[b.jsx(cE,{children:"Bestätigung"}),b.jsx(fE,{children:t.message})]}),b.jsxs(uE,{children:[b.jsx(XF,{onClick:()=>h(!1),children:"Abbrechen"}),b.jsx(hE,{onClick:()=>h(!0),children:"Bestätigen"})]})]})}),b.jsx(Ai,{open:i.isOpen,onOpenChange:g=>!g&&m(null),children:b.jsxs(Ni,{children:[b.jsxs(Mi,{children:[b.jsx(Ti,{children:"Eingabe erforderlich"}),b.jsx(_F,{children:i.message})]}),b.jsx("div",{className:"grid gap-4 py-4",children:b.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[b.jsx(lt,{htmlFor:"prompt-input",className:"text-right",children:"Wert:"}),b.jsx(At,{id:"prompt-input",value:l,onChange:g=>c(g.target.value),className:"col-span-3",onKeyDown:g=>{g.key==="Enter"&&m(l)},autoFocus:!0})]})}),b.jsxs(sv,{children:[b.jsx(rt,{variant:"outline",onClick:()=>m(null),children:"Abbrechen"}),b.jsx(rt,{onClick:()=>m(l),children:"OK"})]})]})})]})},rm=()=>{const e=te.useContext(dE);if(!e)throw new Error("useDialog must be used within a DialogProvider");return e},QF=({transform:e})=>{const[t,n]=te.useState(!1),[i,a]=te.useState({x:0,y:0}),[l,c]=te.useState(null),{addHoehenpunkt:f,addESQ:d,addImmissionPoint:h,trassenNew:m,dtmProcessor:g,addPole:_}=en(),x=te.useCallback((N,F)=>{if(!e)return null;const[k,T]=e.pixelToGK(F,N);let R=50;if(g)try{const j={Rechts:k,Hoch:T};R=g.berechneHoeheDGM(j)}catch(j){console.error("Error calculating terrain height:",j)}return{GK:{Rechts:k,Hoch:T},z:R}},[e,g]),w=te.useCallback(()=>{if(!l||!e)return;const N=x(l.lat,l.lng);N&&f(N),n(!1)},[l,e,x,f]),y=te.useCallback(()=>{if(!l||!e)return;const N=x(l.lat,l.lng);N&&d(N),n(!1)},[l,e,x,d]),E=te.useCallback(()=>{if(!l||!e)return;const N=x(l.lat,l.lng);N&&h(N),n(!1)},[l,e,x,h]),D=te.useCallback(async N=>{if(!l||!e)return;const F=x(l.lat,l.lng);if(!F)return;let k=N;if(!k){if(m.size===0)return;m.size===1&&(k=Array.from(m.keys())[0])}k&&_(k,F),n(!1)},[l,e,x,m,_]);if(Ng({contextmenu:N=>{ur.DomEvent.preventDefault(N.originalEvent),ur.DomEvent.stopPropagation(N.originalEvent);const{lat:F,lng:k}=N.latlng,T=N.originalEvent.pageX||N.originalEvent.clientX,R=N.originalEvent.pageY||N.originalEvent.clientY;c({lat:F,lng:k}),a({x:T,y:R}),n(!0)},click:()=>{n(!1)},dragstart:()=>{n(!1)}}),!t)return null;const A=Array.from(m.entries()).map(([N,F])=>({id:N,name:F.name,mastCount:F.poleIds.length}));return kd.createPortal(b.jsxs("div",{style:{position:"fixed",left:i.x,top:i.y,zIndex:1e4,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"4px 0",minWidth:"200px"},children:[b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:w,children:"📍 Höhenpunkt hinzufügen"}),b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:E,children:"📡 Immissionspunkt hinzufügen"}),b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:y,children:"⚡ ESQ hinzufügen"}),b.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"4px 0"}}),A.length===0?b.jsx("div",{style:{padding:"8px 12px",fontSize:"14px",color:"#999",fontStyle:"italic"},children:"Keine Trassen vorhanden"}):A.length===1?b.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:N=>N.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",onClick:()=>D(A[0].id),children:["🏗️ Mast hinzufügen (",A[0].name,")"]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{padding:"8px 12px",fontSize:"14px",color:"#666"},children:"Mast hinzufügen zu:"}),A.map(N=>b.jsxs("div",{style:{padding:"8px 12px 8px 24px",cursor:"pointer",fontSize:"14px"},onMouseEnter:F=>F.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:F=>F.currentTarget.style.backgroundColor="transparent",onClick:()=>D(N.id),children:[N.name," (",N.mastCount," Masten)"]},N.id))]})]}),document.body)},Fh=({id:e,type:t,position:n,icon:i,popupContent:a,onDelete:l,onEdit:c})=>{const[f,d]=te.useState(!1),[h,m]=te.useState({x:0,y:0}),{selectElement:g,setEditFormOpen:_,setSelectedElementType:x}=en(),w=te.useCallback(A=>{ur.DomEvent.preventDefault(A.originalEvent),ur.DomEvent.stopPropagation(A.originalEvent);const N=A.originalEvent.pageX||A.originalEvent.clientX,F=A.originalEvent.pageY||A.originalEvent.clientY;m({x:N,y:F}),d(!0)},[]),y=te.useCallback(()=>{c?c():(g(e),x(t==="immissionpoint"?"immissionpoint":t),_(!0)),d(!1)},[e,t,c,g,x,_]),E=te.useCallback(()=>{l(),d(!1)},[l]);te.useEffect(()=>{if(!f)return;const A=F=>{F.key==="Escape"&&d(!1)},N=()=>{d(!1)};return document.addEventListener("keydown",A),document.addEventListener("click",N),()=>{document.removeEventListener("keydown",A),document.removeEventListener("click",N)}},[f]);const D=()=>{switch(t){case"hoehenpunkt":return"Höhenpunkt";case"esq":return"ESQ";case"immissionpoint":return"Immissionspunkt";case"pole":return"Mast";default:return"Element"}};return b.jsxs(b.Fragment,{children:[b.jsx(A0,{position:n,icon:i,eventHandlers:{contextmenu:w,click:A=>{ur.DomEvent.stopPropagation(A)}},children:b.jsx(Gl,{children:a})}),f&&kd.createPortal(b.jsxs("div",{style:{position:"fixed",left:h.x,top:h.y,zIndex:1e4,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"4px 0",minWidth:"150px"},onClick:A=>A.stopPropagation(),children:[b.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:A=>A.currentTarget.style.backgroundColor="transparent",onClick:y,children:["✏️ ",D()," bearbeiten"]}),b.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"4px 0"}}),b.jsxs("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px",color:"#dc2626"},onMouseEnter:A=>{A.currentTarget.style.backgroundColor="#fee2e2"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="transparent"},onClick:E,children:["🗑️ ",D()," löschen"]})]}),document.body)]})},JF=({mastId:e,nextMastId:t,isOpen:n,onClose:i})=>{const{poles:a,trassenNew:l,connectionLines:c,updatePole:f,updateConnectionLine:d,leiterTypes:h}=en(),m=a.get(e),g=m,_=m||g,x=!!m,w=a.get(t),E=w||w,A=m?l.get(m.trasseId):void 0,[N,F]=te.useState({ebenen:[]});if(te.useEffect(()=>{if(!_)return;let j=[];x&&m&&(j=m.levels.map(O=>{const G=O.leftConnections.map(I=>Array.from(c.values()).find(W=>W.fromConnectionId===I.id)),U=O.rightConnections.map(I=>Array.from(c.values()).find(W=>W.fromConnectionId===I.id));return{leitungenLinks:O.leftConnections.map((I,W)=>{const B=G[W];return{durchhang:B?.maxSag||5,isolatorlaenge:I.isolatorLength||2.5,schallLw:B?.connectionLineType||"",schallLwDB:B?.soundPowerLevel||55}}),leitungenRechts:O.rightConnections.map((I,W)=>{const B=U[W];return{durchhang:B?.maxSag||5,isolatorlaenge:I.isolatorLength||2.5,schallLw:B?.connectionLineType||"",schallLwDB:B?.soundPowerLevel||55}})}})),F({ebenen:j})},[_,x,m,g,c]),!_||!E||!A)return null;const k=()=>{x&&m&&N.ebenen.forEach((j,O)=>{const G=m.levels[O];G&&(j.leitungenLinks.forEach((U,I)=>{const W=G.leftConnections[I];if(!W)return;const B=Array.from(c.values()).find(V=>V.fromConnectionId===W.id);B&&d(B.id,{maxSag:U.durchhang,connectionLineType:U.schallLw,soundPowerLevel:U.schallLwDB});const re={...W,isolatorLength:U.isolatorlaenge},K={...G,leftConnections:G.leftConnections.map((V,Q)=>Q===I?re:V)},ee={...m,levels:m.levels.map((V,Q)=>Q===O?K:V)};f(e,ee)}),j.leitungenRechts.forEach((U,I)=>{const W=G.rightConnections[I];if(!W)return;const B=Array.from(c.values()).find(V=>V.fromConnectionId===W.id);B&&d(B.id,{maxSag:U.durchhang,connectionLineType:U.schallLw,soundPowerLevel:U.schallLwDB});const re={...W,isolatorLength:U.isolatorlaenge},K={...G,rightConnections:G.rightConnections.map((V,Q)=>Q===I?re:V)},ee={...m,levels:m.levels.map((V,Q)=>Q===O?K:V)};f(e,ee)}))}),i()},T=(j,O,G,U,I)=>{const W=[...N.ebenen];O==="left"?W[j].leitungenLinks[G][U]=I:W[j].leitungenRechts[G][U]=I,F({...N,ebenen:W})},R=()=>b.jsxs("svg",{width:600,height:450,className:"border rounded bg-gray-50",children:[b.jsx("line",{x1:0,y1:420,x2:600,y2:420,stroke:"#8B4513",strokeWidth:3}),Array.from({length:20},(B,re)=>b.jsx("line",{x1:re*25,y1:420,x2:re*25+10,y2:430,stroke:"#8B4513",strokeWidth:1,opacity:.5},`ground-${re}`)),b.jsx("line",{x1:40,y1:420,x2:40,y2:30,stroke:"#333",strokeWidth:6}),b.jsx("line",{x1:560,y1:420,x2:560,y2:30,stroke:"#333",strokeWidth:6}),N.ebenen.map((B,re)=>{const ee=30+390/(N.ebenen.length+1)*(re+1);return B?b.jsxs("g",{children:[b.jsx("line",{x1:10,y1:ee,x2:70,y2:ee,stroke:"#666",strokeWidth:3}),b.jsx("line",{x1:530,y1:ee,x2:590,y2:ee,stroke:"#666",strokeWidth:3}),B.leitungenLinks.map((V,Q)=>{const $=15+Q*10,q=40-$,ne=560-$,se=(q+ne)/2,ce=ee+V.durchhang*3;return b.jsx("g",{children:b.jsx("path",{d:`M ${q} ${ee} Q ${se} ${ce} ${ne} ${ee}`,fill:"none",stroke:"#FF0000",strokeWidth:2})},`left-${Q}`)}),B.leitungenRechts.map((V,Q)=>{const $=15+Q*10,q=40+$,ne=560+$,se=(q+ne)/2,ce=ee+V.durchhang*3;return b.jsx("g",{children:b.jsx("path",{d:`M ${q} ${ee} Q ${se} ${ce} ${ne} ${ee}`,fill:"none",stroke:"#0000FF",strokeWidth:2})},`right-${Q}`)}),b.jsxs("text",{x:10,y:ee+4,fontSize:12,fill:"#333",fontWeight:"bold",children:["E",re+1]})]},re):null}),b.jsx("text",{x:40,y:20,fontSize:11,textAnchor:"middle",fill:"#333",children:_&&_?.name||"Mast 1"}),b.jsx("text",{x:560,y:20,fontSize:11,textAnchor:"middle",fill:"#333",children:E&&E?.name||"Mast 2"}),b.jsxs("g",{transform:"translate(10, 430)",children:[b.jsx("circle",{cx:0,cy:0,r:3,fill:"#FF0000"}),b.jsx("text",{x:8,y:3,fontSize:10,fill:"#666",children:"Links"}),b.jsx("circle",{cx:50,cy:0,r:3,fill:"#0000FF"}),b.jsx("text",{x:58,y:3,fontSize:10,fill:"#666",children:"Rechts"})]})]});return b.jsx(Ai,{open:n,onOpenChange:i,children:b.jsxs(Ni,{className:"!max-w-[90vw] !w-[90vw] !max-h-[90vh] overflow-y-auto",style:{width:"90vw",maxWidth:"90vw",height:"85vh"},children:[b.jsx(Mi,{children:b.jsxs(Ti,{children:[b.jsx(sd,{className:"h-5 w-5 inline-block mr-2"}),"Leitungen bearbeiten: ",m?.name||""," → ",E?.name||""]})}),b.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsx("div",{className:"text-sm text-gray-600",children:"Konfigurieren Sie Durchhang und Isolatorlänge für alle Leitungen"}),N.ebenen.map((j,O)=>b.jsxs("div",{className:"border rounded p-3 space-y-3",children:[b.jsxs("div",{className:"font-medium text-sm",children:["Ebene ",O+1]}),b.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[j.leitungenLinks.length>0&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{className:"text-xs font-medium",children:"Leiter Links"}),j.leitungenLinks.map((G,U)=>b.jsxs("div",{className:"space-y-1 p-2 bg-gray-50 rounded",children:[b.jsxs("div",{className:"text-xs font-medium",children:["L",U+1]}),b.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"Durchhang (m)"}),b.jsx(At,{type:"number",step:"0.1",value:G.durchhang,onChange:I=>T(O,"left",U,"durchhang",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]}),b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"Isolator (m)"}),b.jsx(At,{type:"number",step:"0.1",value:G.isolatorlaenge,onChange:I=>T(O,"left",U,"isolatorlaenge",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]}),b.jsxs("div",{className:"mt-2",children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"Leitertyp (Schall)"}),b.jsxs("select",{value:G.schallLw,onChange:I=>{const W=I.target.value;if(T(O,"left",U,"schallLw",W),W&&h.has(W)){const B=h.get(W);B&&T(O,"left",U,"schallLwDB",B.SchallLW)}},className:"w-full h-7 text-xs rounded-md border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Kein Typ (Standard)"}),Array.from(h.entries()).map(([I,W])=>b.jsxs("option",{value:I,children:[W.Name," (",W.SchallLW," dB)"]},I))]}),!G.schallLw&&b.jsxs("div",{className:"mt-1",children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"SchallLW (dB)"}),b.jsx(At,{type:"number",step:"0.1",value:G.schallLwDB,onChange:I=>T(O,"left",U,"schallLwDB",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]})]},U))]}),j.leitungenRechts.length>0&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{className:"text-xs font-medium",children:"Leiter Rechts"}),j.leitungenRechts.map((G,U)=>b.jsxs("div",{className:"space-y-1 p-2 bg-gray-50 rounded",children:[b.jsxs("div",{className:"text-xs font-medium",children:["R",U+1]}),b.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"Durchhang (m)"}),b.jsx(At,{type:"number",step:"0.1",value:G.durchhang,onChange:I=>T(O,"right",U,"durchhang",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]}),b.jsxs("div",{children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"Isolator (m)"}),b.jsx(At,{type:"number",step:"0.1",value:G.isolatorlaenge,onChange:I=>T(O,"right",U,"isolatorlaenge",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]}),b.jsxs("div",{className:"mt-2",children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"Leitertyp (Schall)"}),b.jsxs("select",{value:G.schallLw,onChange:I=>{const W=I.target.value;if(T(O,"right",U,"schallLw",W),W&&h.has(W)){const B=h.get(W);B&&T(O,"right",U,"schallLwDB",B.SchallLW)}},className:"w-full h-7 text-xs rounded-md border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Kein Typ (Standard)"}),Array.from(h.entries()).map(([I,W])=>b.jsxs("option",{value:I,children:[W.Name," (",W.SchallLW," dB)"]},I))]}),!G.schallLw&&b.jsxs("div",{className:"mt-1",children:[b.jsx(lt,{className:"text-xs text-gray-600",children:"SchallLW (dB)"}),b.jsx(At,{type:"number",step:"0.1",value:G.schallLwDB,onChange:I=>T(O,"right",U,"schallLwDB",parseFloat(I.target.value)||0),className:"h-7 text-xs"})]})]})]},U))]})]})]},O))]}),b.jsxs("div",{className:"flex-1 space-y-2",children:[b.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Visualisierung"}),b.jsx("div",{className:"overflow-auto p-2",children:b.jsx("div",{className:"inline-block min-w-fit",children:R()})})]})]}),b.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[b.jsxs(rt,{variant:"outline",onClick:i,children:[b.jsx(jo,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),b.jsxs(rt,{onClick:k,children:[b.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})},eB=({mastId:e,nextMastId:t,mastName:n,nextMastName:i,trasseName:a,mastIndex:l,positions:c})=>{const[f,d]=te.useState(!1),[h,m]=te.useState({x:0,y:0}),[g,_]=te.useState(!1),x=te.useCallback(E=>{ur.DomEvent.preventDefault(E.originalEvent),ur.DomEvent.stopPropagation(E.originalEvent);const D=E.originalEvent.pageX||E.originalEvent.clientX,A=E.originalEvent.pageY||E.originalEvent.clientY;m({x:D,y:A}),d(!0)},[]),w=te.useCallback(()=>{_(!0),d(!1)},[]);te.useEffect(()=>{if(!f)return;const E=A=>{A.key==="Escape"&&d(!1)},D=()=>{d(!1)};return document.addEventListener("keydown",E),document.addEventListener("click",D),()=>{document.removeEventListener("keydown",E),document.removeEventListener("click",D)}},[f]);const y=`${a}: Mast ${l+1} → Mast ${l+2}`;return b.jsxs(b.Fragment,{children:[b.jsx(Gb,{positions:c,pathOptions:{color:"#000000",weight:3,opacity:.7},eventHandlers:{contextmenu:x,click:E=>{ur.DomEvent.stopPropagation(E)}},children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsxs("strong",{children:["Leitung ",a]}),b.jsx("br",{}),n," → ",i,b.jsx("br",{}),"Mast #",l+1," zu Mast #",l+2]})})}),f&&kd.createPortal(b.jsxs("div",{style:{position:"fixed",left:h.x,top:h.y,zIndex:1e4,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",padding:"4px 0",minWidth:"180px"},onClick:E=>E.stopPropagation(),children:[b.jsx("div",{style:{padding:"8px 12px",cursor:"pointer",fontSize:"14px"},onMouseEnter:E=>E.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:E=>E.currentTarget.style.backgroundColor="transparent",onClick:w,children:"⚡ Leitungen bearbeiten"}),b.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"4px 0"}}),b.jsx("div",{style:{padding:"8px 12px",fontSize:"12px",color:"#666",backgroundColor:"#f8f8f8"},children:y})]}),document.body),g&&b.jsx(JF,{mastId:e,nextMastId:t,isOpen:g,onClose:()=>_(!1)})]})};function tB(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(a),t&&(i.href=t),a.href=e,a.href}const nB=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Io(e){const t=[];for(let n=0,i=e.length;n<i;n++)t.push(e[n]);return t}let jl=null;function mE(e={}){return jl||(e.includeStyleProperties?(jl=e.includeStyleProperties,jl):(jl=Io(window.getComputedStyle(document.documentElement)),jl))}function Cd(e,t){const i=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return i?parseFloat(i.replace("px","")):0}function rB(e){const t=Cd(e,"border-left-width"),n=Cd(e,"border-right-width");return e.clientWidth+t+n}function iB(e){const t=Cd(e,"border-top-width"),n=Cd(e,"border-bottom-width");return e.clientHeight+t+n}function pE(e,t={}){const n=t.width||rB(e),i=t.height||iB(e);return{width:n,height:i}}function aB(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Ur=16384;function oB(e){(e.width>Ur||e.height>Ur)&&(e.width>Ur&&e.height>Ur?e.width>e.height?(e.height*=Ur/e.width,e.width=Ur):(e.width*=Ur/e.height,e.height=Ur):e.width>Ur?(e.height*=Ur/e.width,e.width=Ur):(e.width*=Ur/e.height,e.height=Ur))}function Ad(e){return new Promise((t,n)=>{const i=new Image;i.onload=()=>{i.decode().then(()=>{requestAnimationFrame(()=>t(i))})},i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=e})}async function sB(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function lB(e,t,n){const i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${n}`),a.setAttribute("viewBox",`0 0 ${t} ${n}`),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("externalResourcesRequired","true"),a.appendChild(l),l.appendChild(e),sB(a)}const Cr=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Cr(n,t)};function uB(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function cB(e,t){return mE(t).map(n=>{const i=e.getPropertyValue(n),a=e.getPropertyPriority(n);return`${n}: ${i}${a?" !important":""};`}).join(" ")}function fB(e,t,n,i){const a=`.${e}:${t}`,l=n.cssText?uB(n):cB(n,i);return document.createTextNode(`${a}{${l}}`)}function Cb(e,t,n,i){const a=window.getComputedStyle(e,n),l=a.getPropertyValue("content");if(l===""||l==="none")return;const c=nB();try{t.className=`${t.className} ${c}`}catch{return}const f=document.createElement("style");f.appendChild(fB(c,n,a,i)),t.appendChild(f)}function hB(e,t,n){Cb(e,t,":before",n),Cb(e,t,":after",n)}const Ab="application/font-woff",Nb="image/jpeg",dB={woff:Ab,woff2:Ab,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Nb,jpeg:Nb,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function mB(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function cv(e){const t=mB(e).toLowerCase();return dB[t]||""}function pB(e){return e.split(/,/)[1]}function _g(e){return e.search(/^(data:)/)!==-1}function gB(e,t){return`data:${t};base64,${e}`}async function gE(e,t,n){const i=await fetch(e,t);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const a=await i.blob();return new Promise((l,c)=>{const f=new FileReader;f.onerror=c,f.onloadend=()=>{try{l(n({res:i,result:f.result}))}catch(d){c(d)}},f.readAsDataURL(a)})}const D0={};function vB(e,t,n){let i=e.replace(/\?.*/,"");return n&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),t?`[${t}]${i}`:i}async function fv(e,t,n){const i=vB(e,t,n.includeQueryParams);if(D0[i]!=null)return D0[i];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const l=await gE(e,n.fetchRequestInit,({res:c,result:f})=>(t||(t=c.headers.get("Content-Type")||""),pB(f)));a=gB(l,t)}catch(l){a=n.imagePlaceholder||"";let c=`Failed to fetch resource: ${e}`;l&&(c=typeof l=="string"?l:l.message),c&&console.warn(c)}return D0[i]=a,a}async function yB(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Ad(t)}async function _B(e,t){if(e.currentSrc){const l=document.createElement("canvas"),c=l.getContext("2d");l.width=e.clientWidth,l.height=e.clientHeight,c?.drawImage(e,0,0,l.width,l.height);const f=l.toDataURL();return Ad(f)}const n=e.poster,i=cv(n),a=await fv(n,i,t);return Ad(a)}async function xB(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await im(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function bB(e,t){return Cr(e,HTMLCanvasElement)?yB(e):Cr(e,HTMLVideoElement)?_B(e,t):Cr(e,HTMLIFrameElement)?xB(e,t):e.cloneNode(vE(e))}const wB=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",vE=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function DB(e,t,n){var i,a;if(vE(t))return t;let l=[];return wB(e)&&e.assignedNodes?l=Io(e.assignedNodes()):Cr(e,HTMLIFrameElement)&&(!((i=e.contentDocument)===null||i===void 0)&&i.body)?l=Io(e.contentDocument.body.childNodes):l=Io(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),l.length===0||Cr(e,HTMLVideoElement)||await l.reduce((c,f)=>c.then(()=>im(f,n)).then(d=>{d&&t.appendChild(d)}),Promise.resolve()),t}function EB(e,t,n){const i=t.style;if(!i)return;const a=window.getComputedStyle(e);a.cssText?(i.cssText=a.cssText,i.transformOrigin=a.transformOrigin):mE(n).forEach(l=>{let c=a.getPropertyValue(l);l==="font-size"&&c.endsWith("px")&&(c=`${Math.floor(parseFloat(c.substring(0,c.length-2)))-.1}px`),Cr(e,HTMLIFrameElement)&&l==="display"&&c==="inline"&&(c="block"),l==="d"&&t.getAttribute("d")&&(c=`path(${t.getAttribute("d")})`),i.setProperty(l,c,a.getPropertyPriority(l))})}function SB(e,t){Cr(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Cr(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function CB(e,t){if(Cr(e,HTMLSelectElement)){const n=t,i=Array.from(n.children).find(a=>e.value===a.getAttribute("value"));i&&i.setAttribute("selected","")}}function AB(e,t,n){return Cr(t,Element)&&(EB(e,t,n),hB(e,t,n),SB(e,t),CB(e,t)),t}async function NB(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const i={};for(let l=0;l<n.length;l++){const f=n[l].getAttribute("xlink:href");if(f){const d=e.querySelector(f),h=document.querySelector(f);!d&&h&&!i[f]&&(i[f]=await im(h,t,!0))}}const a=Object.values(i);if(a.length){const l="http://www.w3.org/1999/xhtml",c=document.createElementNS(l,"svg");c.setAttribute("xmlns",l),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const f=document.createElementNS(l,"defs");c.appendChild(f);for(let d=0;d<a.length;d++)f.appendChild(a[d]);e.appendChild(c)}return e}async function im(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(i=>bB(i,t)).then(i=>DB(e,i,t)).then(i=>AB(e,i,t)).then(i=>NB(i,t))}const yE=/url\((['"]?)([^'"]+?)\1\)/g,MB=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,TB=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function kB(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function zB(e){const t=[];return e.replace(yE,(n,i,a)=>(t.push(a),n)),t.filter(n=>!_g(n))}async function LB(e,t,n,i,a){try{const l=n?tB(t,n):t,c=cv(t);let f;return a||(f=await fv(l,c,i)),e.replace(kB(t),`$1${f}$3`)}catch{}return e}function FB(e,{preferredFontFormat:t}){return t?e.replace(TB,n=>{for(;;){const[i,,a]=MB.exec(n)||[];if(!a)return"";if(a===t)return`src: ${i};`}}):e}function _E(e){return e.search(yE)!==-1}async function xE(e,t,n){if(!_E(e))return e;const i=FB(e,n);return zB(i).reduce((l,c)=>l.then(f=>LB(f,c,t,n)),Promise.resolve(i))}async function Pl(e,t,n){var i;const a=(i=t.style)===null||i===void 0?void 0:i.getPropertyValue(e);if(a){const l=await xE(a,null,n);return t.style.setProperty(e,l,t.style.getPropertyPriority(e)),!0}return!1}async function BB(e,t){await Pl("background",e,t)||await Pl("background-image",e,t),await Pl("mask",e,t)||await Pl("-webkit-mask",e,t)||await Pl("mask-image",e,t)||await Pl("-webkit-mask-image",e,t)}async function RB(e,t){const n=Cr(e,HTMLImageElement);if(!(n&&!_g(e.src))&&!(Cr(e,SVGImageElement)&&!_g(e.href.baseVal)))return;const i=n?e.src:e.href.baseVal,a=await fv(i,cv(i),t);await new Promise((l,c)=>{e.onload=l,e.onerror=t.onImageErrorHandler?(...d)=>{try{l(t.onImageErrorHandler(...d))}catch(h){c(h)}}:c;const f=e;f.decode&&(f.decode=l),f.loading==="lazy"&&(f.loading="eager"),n?(e.srcset="",e.src=a):e.href.baseVal=a})}async function OB(e,t){const i=Io(e.childNodes).map(a=>bE(a,t));await Promise.all(i).then(()=>e)}async function bE(e,t){Cr(e,Element)&&(await BB(e,t),await RB(e,t),await OB(e,t))}function jB(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const i=t.style;return i!=null&&Object.keys(i).forEach(a=>{n[a]=i[a]}),e}const Mb={};async function Tb(e){let t=Mb[e];if(t!=null)return t;const i=await(await fetch(e)).text();return t={url:e,cssText:i},Mb[e]=t,t}async function kb(e,t){let n=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,l=(n.match(/url\([^)]+\)/g)||[]).map(async c=>{let f=c.replace(i,"$1");return f.startsWith("https://")||(f=new URL(f,e.url).href),gE(f,t.fetchRequestInit,({result:d})=>(n=n.replace(c,`url(${d})`),[c,d]))});return Promise.all(l).then(()=>n)}function zb(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let i=e.replace(n,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=a.exec(i);if(d===null)break;t.push(d[0])}i=i.replace(a,"");const l=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,c="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",f=new RegExp(c,"gi");for(;;){let d=l.exec(i);if(d===null){if(d=f.exec(i),d===null)break;l.lastIndex=f.lastIndex}else f.lastIndex=l.lastIndex;t.push(d[0])}return t}async function PB(e,t){const n=[],i=[];return e.forEach(a=>{if("cssRules"in a)try{Io(a.cssRules||[]).forEach((l,c)=>{if(l.type===CSSRule.IMPORT_RULE){let f=c+1;const d=l.href,h=Tb(d).then(m=>kb(m,t)).then(m=>zb(m).forEach(g=>{try{a.insertRule(g,g.startsWith("@import")?f+=1:a.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:g,error:_})}})).catch(m=>{console.error("Error loading remote css",m.toString())});i.push(h)}})}catch(l){const c=e.find(f=>f.href==null)||document.styleSheets[0];a.href!=null&&i.push(Tb(a.href).then(f=>kb(f,t)).then(f=>zb(f).forEach(d=>{c.insertRule(d,c.cssRules.length)})).catch(f=>{console.error("Error loading remote stylesheet",f)})),console.error("Error inlining remote css file",l)}}),Promise.all(i).then(()=>(e.forEach(a=>{if("cssRules"in a)try{Io(a.cssRules||[]).forEach(l=>{n.push(l)})}catch(l){console.error(`Error while reading CSS rules from ${a.href}`,l)}}),n))}function IB(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>_E(t.style.getPropertyValue("src")))}async function HB(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Io(e.ownerDocument.styleSheets),i=await PB(n,t);return IB(i)}function wE(e){return e.trim().replace(/["']/g,"")}function GB(e){const t=new Set;function n(i){(i.style.fontFamily||getComputedStyle(i).fontFamily).split(",").forEach(l=>{t.add(wE(l))}),Array.from(i.children).forEach(l=>{l instanceof HTMLElement&&n(l)})}return n(e),t}async function UB(e,t){const n=await HB(e,t),i=GB(e);return(await Promise.all(n.filter(l=>i.has(wE(l.style.fontFamily))).map(l=>{const c=l.parentStyleSheet?l.parentStyleSheet.href:null;return xE(l.cssText,c,t)}))).join(`
`)}async function $B(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await UB(e,t);if(n){const i=document.createElement("style"),a=document.createTextNode(n);i.appendChild(a),e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}}async function ZB(e,t={}){const{width:n,height:i}=pE(e,t),a=await im(e,t,!0);return await $B(a,t),await bE(a,t),jB(a,t),await lB(a,n,i)}async function KB(e,t={}){const{width:n,height:i}=pE(e,t),a=await ZB(e,t),l=await Ad(a),c=document.createElement("canvas"),f=c.getContext("2d"),d=t.pixelRatio||aB(),h=t.canvasWidth||n,m=t.canvasHeight||i;return c.width=h*d,c.height=m*d,t.skipAutoScale||oB(c),c.style.width=`${h}`,c.style.height=`${m}`,t.backgroundColor&&(f.fillStyle=t.backgroundColor,f.fillRect(0,0,c.width,c.height)),f.drawImage(l,0,0,c.width,c.height),c}async function qB(e,t={}){return(await KB(e,t)).toDataURL()}const VB=({isOpen:e,onClose:t,contourInfo:n})=>{const[i,a]=te.useState("Lageplan Karte"),[l,c]=te.useState(!1),f=()=>{if(!n||!n.showImmissionGrid)return"";if(!n.hasDetailedData)return"Immissions-Konturplot: Gesamt";switch(n.displayMode){case"esq":return"Immissions-Konturplot: ESQ-Quellen";case"trassen":return"Immissions-Konturplot: Übertragungsleitungen";case"total":default:return"Immissions-Konturplot: Gesamt (ESQ + Übertragungsleitungen)"}},d=async()=>{c(!0);try{const h=document.getElementById("map-container"),m=document.querySelector(".leaflet-container");if(!m||!h){alert("Karte konnte nicht gefunden werden.");return}const g=m.querySelector(".leaflet-control-container");g&&(g.style.display="none");const _=await qB(h,{quality:1,backgroundColor:"#ffffff",width:h.offsetWidth,height:h.offsetHeight,filter:w=>w.classList&&(w.classList.contains("print-hide")||w.classList.contains("leaflet-control-zoom")||w.classList.contains("leaflet-control-attribution"))?!1:(w.classList&&(w.classList.contains("contour-legend-container")||w.classList.contains("immission-legend-container")||w.classList.contains("leaflet-control-legend-d3")),!0)});g&&(g.style.display="");const x=window.open("","_blank");if(!x){alert("Bitte erlauben Sie Pop-ups für diese Website, um zu drucken.");return}x.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${i}</title>
          <style>
            @page {
              size: landscape;
              margin: 1cm;
            }
            body {
              margin: 0;
              padding: 0;
              font-family: Arial, sans-serif;
            }
            .print-header {
              text-align: center;
              font-size: 24px;
              font-weight: bold;
              padding: 20px;
              margin-bottom: 20px;
              border-bottom: 2px solid #333;
            }
            .contour-info {
              text-align: center;
              font-size: 14px;
              font-style: italic;
              color: #666;
              margin-bottom: 15px;
              padding: 8px;
              background-color: #f8f9fa;
              border-radius: 4px;
            }
            .map-image {
              width: 100%;
              height: auto;
              max-height: 80vh;
              object-fit: contain;
            }
            @media print {
              body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
            }
          </style>
        </head>
        <body>
          <div class="print-header">${i}</div>
          ${f()?`<div class="contour-info">${f()}</div>`:""}
          <img src="${_}" class="map-image" />
          <script>
            window.onload = function() {
              setTimeout(function() {
                window.print();
                window.close();
              }, 500);
            };
          <\/script>
        </body>
        </html>
      `),x.document.close(),t()}catch(h){console.error("Fehler beim Erstellen des Druckbilds:",h),alert("Es gab einen Fehler beim Vorbereiten des Drucks. Bitte versuchen Sie es erneut.")}finally{c(!1)}};return b.jsx(Ai,{open:e,onOpenChange:t,children:b.jsxs(Ni,{className:"sm:max-w-[425px]",children:[b.jsx(Mi,{children:b.jsxs(Ti,{className:"flex items-center gap-2",children:[b.jsx($0,{className:"h-5 w-5"}),"Karte drucken"]})}),b.jsxs("div",{className:"grid gap-4 py-4",children:[b.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[b.jsx(lt,{htmlFor:"header",className:"text-right",children:"Überschrift:"}),b.jsx(At,{id:"header",value:i,onChange:h=>a(h.target.value),className:"col-span-3",placeholder:"Geben Sie eine Überschrift ein..."})]}),b.jsxs("div",{className:"text-sm text-gray-600",children:[b.jsx("p",{children:"Die Karte wird mit der aktuellen Ansicht gedruckt."}),b.jsx("p",{className:"mt-2",children:"Hinweis: Für beste Ergebnisse:"}),b.jsxs("ul",{className:"list-disc list-inside mt-1",children:[b.jsx("li",{children:"Stellen Sie die gewünschte Ansicht ein"}),b.jsx("li",{children:"Verwenden Sie Querformat beim Drucken"}),b.jsx("li",{children:"Aktivieren Sie Hintergrundgrafiken"})]})]})]}),b.jsxs(sv,{children:[b.jsx(rt,{variant:"outline",onClick:t,disabled:l,children:"Abbrechen"}),b.jsxs(rt,{onClick:d,disabled:l,className:"flex items-center gap-2",children:[b.jsx($0,{className:"h-4 w-4"}),l?"Verarbeitung...":"Drucken"]})]})]})})},YB=({transform:e,position:t="bottomleft"})=>{const n=Fd(),[i,a]=te.useState(null);if(te.useEffect(()=>{if(!e){a(null);return}const c=()=>{const f=n.getContainer().offsetWidth,d=Math.min(200,f/4),h=n.containerPointToLatLng([0,n.getContainer().offsetHeight/2]),m=n.containerPointToLatLng([d,n.getContainer().offsetHeight/2]),[g,_]=e.pixelToGK(h.lng,h.lat),[x,w]=e.pixelToGK(m.lng,m.lat),y=Math.sqrt(Math.pow(x-g,2)+Math.pow(w-_,2)),E=[1,2,5,10,20,25,50,100,200,250,500,1e3,2e3,2500,5e3,1e4,2e4,25e3,5e4,1e5];let D=E[0];for(const F of E)if(F<=y)D=F;else break;const A=D/y*d;let N;D>=1e3?N=`${D/1e3} km`:N=`${D} m`,a({width:Math.round(A),label:N})};return n.on("zoomend",c),n.on("moveend",c),c(),()=>{n.off("zoomend",c),n.off("moveend",c)}},[n,e]),!i||!e)return null;const l={bottomleft:{bottom:"10px",left:"10px"},bottomright:{bottom:"10px",right:"10px"},topleft:{top:"10px",left:"10px"},topright:{top:"10px",right:"10px"}};return b.jsxs("div",{className:"leaflet-control-scale leaflet-control",style:{position:"absolute",...l[t],zIndex:1e3,background:"rgba(255, 255, 255, 0.8)",padding:"5px 10px",borderRadius:"4px",boxShadow:"0 1px 5px rgba(0,0,0,0.4)",fontSize:"11px",lineHeight:"1.5"},children:[b.jsx("div",{style:{marginBottom:"2px",fontWeight:"bold",color:"#333"},children:"GK Koordinatensystem"}),b.jsxs("div",{style:{position:"relative"},children:[b.jsxs("div",{style:{width:`${i.width}px`,height:"4px",border:"1px solid #333",borderTop:"none",background:"white",position:"relative"},children:[b.jsx("div",{style:{position:"absolute",left:"0",top:"-1px",width:"1px",height:"6px",background:"#333"}}),b.jsx("div",{style:{position:"absolute",right:"0",top:"-1px",width:"1px",height:"6px",background:"#333"}})]}),b.jsx("div",{style:{marginTop:"2px",textAlign:"center",color:"#333",fontWeight:"bold"},children:i.label})]})]})},XB=({transform:e,imageHeight:t,imageWidth:n})=>{const[i,a]=te.useState(null),l=en(),{editMode:c,selectedElementType:f,addHoehenpunkt:d,addESQ:h,addImmissionPoint:m,dtmProcessor:g,immissionGrid:_,showImmissionGrid:x,getInterpolatedGridValue:w,getInterpolatedDetailedGridValue:y}=l;if(console.log("Store debug v2:",{hasDetailedGrid:!!l.immissionGridDetailed,detailedGridLength:l.immissionGridDetailed?.length||0,displayMode:l.contourDisplayMode,timestamp:Date.now()}),Ng({mousemove:D=>{const{lat:A,lng:N}=D.latlng,F=N,k=t-A,T=F>=0&&F<=n&&A>=0&&A<=t;if(e&&T){const[R,j]=e.pixelToGK(F,A);let O=null;if(g)try{const U={Rechts:R,Hoch:j};O=g.berechneHoeheDGM(U)}catch(U){console.error("Error calculating terrain height",U)}let G=null;if(x&&_.length>0){const U=l.immissionGridDetailed||[],I=l.contourDisplayMode||"total";U.length>0&&I!=="total"?G=y(F,A,n,t,I):G=w(F,A,n,t)}a({pixel:[F,k],gk:[R,j],terrainHeight:O,gridImmission:G})}else a(e&&!T?{pixel:[F,k],gk:[0,0],terrainHeight:null,gridImmission:null}:{pixel:[F,k],gk:[0,0],terrainHeight:null,gridImmission:null})},mouseout:()=>{a(null)},click:D=>{if(c==="add"&&e){const{lat:A,lng:N}=D.latlng,[F,k]=e.pixelToGK(N,A),T={GK:{Rechts:F,Hoch:k},z:50};f==="hoehenpunkt"?d(T):f==="immissionpoint"?m(T):f==="esq"&&h(T)}}}),!i)return null;const E=D=>D<35?"#22c55e":D<45?"#84cc16":D<55?"#eab308":D<65?"#f97316":"#ef4444";return b.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"5px",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",zIndex:1e3,fontSize:"12px",fontFamily:"monospace",minWidth:"200px"},children:[b.jsxs("div",{style:{marginBottom:"4px"},children:[b.jsx("strong",{children:"Pixel:"})," (",i.pixel[0].toFixed(1),", ",i.pixel[1].toFixed(1),")"]}),e&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"4px"},children:[b.jsx("strong",{children:"GK:"})," (",i.gk[0].toFixed(2),", ",i.gk[1].toFixed(2),")"]}),i.terrainHeight!==null&&b.jsxs("div",{style:{marginBottom:"4px"},children:[b.jsx("strong",{children:"Geländehöhe:"})," ",i.terrainHeight.toFixed(1)," m"]}),i.gridImmission!==null&&b.jsxs("div",{style:{padding:"4px",marginTop:"6px",borderRadius:"3px",backgroundColor:E(i.gridImmission)+"20",border:`1px solid ${E(i.gridImmission)}`},children:[b.jsx("strong",{children:(()=>{const D=l.immissionGridDetailed||[],A=l.contourDisplayMode||"total";if(D.length>0&&A!=="total")switch(A){case"esq":return"Immission (ESQ only):";case"trassen":return"Immission (Trassen only):";default:return"Immission (Grid):"}return"Immission (Grid):"})()}),b.jsxs("span",{style:{marginLeft:"4px",fontWeight:"bold",color:E(i.gridImmission)},children:[i.gridImmission.toFixed(1)," dB(A)"]})]})]})]})},E0=e=>ur.divIcon({className:"custom-marker",html:`<div style="
      background-color: ${e};
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    "></div>`,iconSize:[16,16],iconAnchor:[8,8]}),WB=e=>ur.divIcon({className:"reference-marker",html:`<div style="
      background-color: #ff00ff;
      width: 20px;
      height: 20px;
      border-radius: 3px;
      border: 2px solid #000;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 12px;
    ">${e}</div>`,iconSize:[24,24],iconAnchor:[12,12]}),QB=()=>ur.divIcon({className:"mast-marker",html:`<div style="
      background-color: #8B4513;
      width: 16px;
      height: 16px;
      border-radius: 2px;
      border: 2px solid #654321;
      box-shadow: 0 2px 4px rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    ">
      <div style="
        width: 8px;
        height: 8px;
        background-color: #fff;
        border-radius: 50%;
      "></div>
    </div>`,iconSize:[20,20],iconAnchor:[10,10]}),JB=e=>{const n=(i=>i<35?"#22c55e":i<45?"#84cc16":i<55?"#eab308":i<65?"#f97316":"#ef4444")(e);return ur.divIcon({className:"grid-point-marker",html:`<div style="
      background-color: ${n};
      width: 6px;
      height: 6px;
      border-radius: 50%;
      border: 1px solid rgba(0,0,0,0.3);
      box-shadow: 0 1px 2px rgba(0,0,0,0.3);
    "></div>`,iconSize:[8,8],iconAnchor:[4,4]})},eR=({imageWidth:e,imageHeight:t,onTransformUpdate:n,showTrassen:i=!0,showDGM:a=!1,showContour:l=!1,onDimensionsUpdate:c})=>{const{originalData:f,projectImage:d,imageWidth:h,imageHeight:m,referencePoints:g,hoehenpunkte:_,esqSources:x,immissionPoints:w,trassenNew:y,poles:E,dgmDreiecke:D,dgmKanten:A,immissionGrid:N,immissionGridSettings:F,showImmissionGrid:k,showGridPoints:T,deleteHoehenpunkt:R,deleteESQ:j,deleteImmissionPoint:O,deletePole:G,getCachedImmissionValue:U,immissionGridDetailed:I,setContourDisplayMode:W,contourDisplayMode:B}=en(),re=h||e||893,K=m||t||639,{confirm:ee}=rm(),V=f||{},[Q,$]=te.useState(!1),[q,ne]=te.useState({width:re,height:K}),[se,ce]=te.useState(null),pe=a,_e=i,ze=l,[ke,Ie]=te.useState(null),Ze=te.useRef(null),[Xe,$e]=te.useState(!1),Ke=te.useCallback((ue,be,De)=>new Promise((ge,X)=>{const oe=new Image;oe.onload=()=>{const le=document.createElement("canvas"),me=le.getContext("2d");if(!me){X(new Error("Could not get canvas context"));return}le.width=be,le.height=De,me.drawImage(oe,0,0,be,De);const ye=le.toDataURL("image/png");ge(ye)},oe.onerror=()=>X(new Error("Failed to load image")),oe.src=ue}),[]);te.useEffect(()=>{d&&re&&K?(console.log("Scaling image to dimensions:",{imageWidth:re,imageHeight:K,projectImage:d.substring(0,50)+"..."}),Ke(d,re,K).then(ue=>{console.log("Image scaling completed successfully"),ce(ue),$(!0)}).catch(ue=>{console.error("Failed to scale image:",ue),ce(d),$(!0)})):d?(ce(d),$(!0)):(ce(null),$(!1))},[d,re,K,Ke]),te.useEffect(()=>{ne({width:re,height:K}),c?.({width:re,height:K})},[re,K,c]),te.useEffect(()=>{if(q.height!==0)if(g.length>=2){const ue=g.map(De=>({gkRechts:De.gkRechts,gkHoch:De.gkHoch,pixelX:De.pixelX,pixelY:q.height-De.pixelY})),be=new G0(ue);Ze.current=be,Ie(be),n?.(be)}else{console.log("Running in fallback mode");const ue=[],be=["A","B"];for(const De of be){const ge=`GKR_${De}`,X=`GKH_${De}`,oe=`PX_${De}`,le=`PY_${De}`;V[ge]!==void 0&&V[X]!==void 0&&V[oe]!==void 0&&V[le]!==void 0&&ue.push({gkRechts:V[ge],gkHoch:V[X],pixelX:V[oe],pixelY:q.height-V[le]})}if(ue.length>=2){const De=new G0(ue);Ze.current=De,Ie(De),n?.(De)}else Ze.current=null,Ie(null),n?.(null)}},[q.height,g]);const H=[[0,0],[q.height,q.width]],Te=E0("#ff4444"),Se=E0("#4444ff"),ae=E0("#44ff44"),ie=(ue,be)=>{if(!ke)return null;const[De,ge]=ke.gkToPixel(ue,be);return[ge,De]};return b.jsxs("div",{id:"map-container",style:{height:"800px",width:"100%",position:"relative"},children:[b.jsx(VB,{isOpen:Xe,onClose:()=>$e(!1),contourInfo:{showImmissionGrid:k,displayMode:B||"total",hasDetailedData:I&&I.length>0||!1}}),se&&b.jsx(rt,{onClick:()=>$e(!0),className:"absolute top-24 left-4 z-[1000] shadow-md print-hide bg-white",title:"Karte drucken",children:b.jsx($0,{className:"h-5 w-5",color:"black"})}),se&&k&&Array.isArray(I)&&I.length>0&&b.jsxs("div",{className:"absolute top-36 left-4 z-[1000] shadow-md print-hide bg-white rounded-md p-2",children:[b.jsx("div",{className:"text-xs font-medium mb-1 text-gray-700",children:"Contour Display:"}),b.jsxs("div",{className:"flex flex-col space-y-1",children:[b.jsx(rt,{onClick:()=>W("total"),variant:B==="total"?"default":"outline",size:"sm",className:"text-xs h-8",title:"Show total immission (ESQ + Transmission Lines)",children:"Total"}),b.jsx(rt,{onClick:()=>W("esq"),variant:B==="esq"?"default":"outline",size:"sm",className:"text-xs h-8",title:"Show ESQ sources only",children:"ESQ"}),b.jsx(rt,{onClick:()=>W("trassen"),variant:B==="trassen"?"default":"outline",size:"sm",className:"text-xs h-8",title:"Show transmission lines only",children:"Trassen"})]})]}),!se&&b.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxWidth:"400px"},children:[b.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"15px",color:"#333"},children:"Kein Projekt geladen"}),b.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"20px"},children:"Bitte verwenden Sie die Projektverwaltung, um:"}),b.jsxs("ul",{style:{textAlign:"left",fontSize:"14px",color:"#666",paddingLeft:"20px"},children:[b.jsx("li",{children:"Ein neues Projekt zu erstellen"}),b.jsx("li",{children:"Ein Beispielprojekt zu laden"}),b.jsx("li",{children:"Ein gespeichertes Projekt zu öffnen"})]})]}),Q&&b.jsxs(C3,{crs:ur.CRS.Simple,bounds:H,style:{height:"100%",width:"100%"},minZoom:-10,maxZoom:10,children:[b.jsx(XB,{transform:ke,imageHeight:q.height,imageWidth:q.width}),b.jsx(kM,{imageHeight:q.height}),ke&&b.jsxs(b.Fragment,{children:[b.jsx(QF,{transform:ke,imageHeight:q.height}),b.jsx(YB,{transform:ke,position:"bottomleft"})]}),se&&b.jsx(E3,{url:se,bounds:H}),ze&&b.jsx(NF,{width:q.width,height:q.height,dgmDreiecke:D,transform:ke,gridSize:25,thresholds:15,opacity:.5}),k&&N.length>0&&b.jsx(MF,{width:q.width,height:q.height,transform:ke,gridValues:N,gridValuesDetailed:I,displayMode:B,opacity:F.opacity,thresholds:15}),T&&N.length>0&&N.map((ue,be)=>{const De=ue.y,ge=ue.x;return b.jsx(A0,{position:[De,ge],icon:JB(ue.value),eventHandlers:{click:X=>{ur.DomEvent.stopPropagation(X)}},children:b.jsx(Gl,{children:b.jsxs("div",{style:{fontSize:"12px"},children:[b.jsxs("strong",{children:["Gitterpunkt #",be+1]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Immissionswert:"}),b.jsxs("span",{style:{marginLeft:"4px",fontWeight:"bold",color:ue.value<35?"#22c55e":ue.value<45?"#84cc16":ue.value<55?"#eab308":ue.value<65?"#f97316":"#ef4444"},children:[ue.value.toFixed(2)," dB(A)"]}),b.jsx("br",{}),b.jsx("strong",{children:"Position:"}),b.jsx("br",{}),"Pixel: (",ue.x.toFixed(1),", ",(q.height-ue.y).toFixed(1),")"]})})},`grid-point-${be}`)}),g.map(ue=>b.jsx(A0,{position:[q.height-ue.pixelY,ue.pixelX],icon:WB(ue.label),children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsxs("strong",{children:["Referenzpunkt ",ue.label]}),b.jsx("br",{}),"Pixel: (",ue.pixelX,", ",ue.pixelY,")",b.jsx("br",{}),"GK Rechts: ",ue.gkRechts.toFixed(2),b.jsx("br",{}),"GK Hoch: ",ue.gkHoch.toFixed(2)]})})},ue.id)),Array.from(w.entries()).map(([ue,be])=>{const De=ie(be.Position.GK.Rechts,be.Position.GK.Hoch);return De?b.jsx(Fh,{id:ue,type:"immissionpoint",position:De,icon:Te,onDelete:async()=>{await ee("Immissionspunkt löschen?")&&O(ue)},popupContent:b.jsxs("div",{children:[b.jsxs("strong",{children:["Immissionspunkt: ",be.Name]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Berechneter Wert:"}),b.jsx("br",{}),b.jsxs("span",{style:{fontSize:"14px",fontWeight:"bold",color:"#d9534f",backgroundColor:"#f9f2f4",padding:"2px 6px",borderRadius:"3px",border:"1px solid #ebccd1"},children:[U(ue).toFixed(2)," dB(A)"]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Pixel Koordinaten:"}),b.jsx("br",{}),"X: ",De[1].toFixed(1),", Y: ",De[0].toFixed(1),b.jsx("br",{}),b.jsx("strong",{children:"GK Koordinaten:"}),b.jsx("br",{}),"Rechts: ",be.Position.GK.Rechts.toFixed(2),b.jsx("br",{}),"Hoch: ",be.Position.GK.Hoch.toFixed(2),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Höhe: ",be.Position.z.toFixed(2)," m",b.jsx("br",{}),"Höhenoffset: ",be.HeightOffset," m"]})},`immission-${ue}`):null}),Array.from(x.entries()).map(([ue,be])=>{const De=ie(be.Position.GK.Rechts,be.Position.GK.Hoch);return De?b.jsx(Fh,{id:ue,type:"esq",position:De,icon:Se,onDelete:async()=>{await ee("ESQ löschen?")&&j(ue)},popupContent:b.jsxs("div",{children:[b.jsxs("strong",{children:["ESQ: ",be.Bezeichnung]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Pixel Koordinaten:"}),b.jsx("br",{}),"X: ",De[1].toFixed(1),", Y: ",De[0].toFixed(1),b.jsx("br",{}),b.jsx("strong",{children:"GK Koordinaten:"}),b.jsx("br",{}),"Rechts: ",be.Position.GK.Rechts.toFixed(2),b.jsx("br",{}),"Hoch: ",be.Position.GK.Hoch.toFixed(2),b.jsx("br",{}),"Z (Gelände): ",be.Position.z.toFixed(2)," m",b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Höhe über Grund: ",be.Hoehe.toFixed(2)," m",b.jsx("br",{}),"Gesamthöhe: ",(be.Position.z+be.Hoehe).toFixed(2)," m",b.jsx("br",{}),"Schallleistungspegel: ",be.L," dB"]})},`esq-${ue}`):null}),Array.from(_.entries()).map(([ue,be])=>{const De=ie(be.GK_Vektor.GK.Rechts,be.GK_Vektor.GK.Hoch);return De?b.jsx(Fh,{id:ue,type:"hoehenpunkt",position:De,icon:ae,onDelete:async()=>{await ee("Höhenpunkt löschen?")&&R(ue)},popupContent:b.jsxs("div",{children:[b.jsx("strong",{children:"Höhenpunkt"}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Pixel Koordinaten:"}),b.jsx("br",{}),"X: ",De[1].toFixed(1),", Y: ",De[0].toFixed(1),b.jsx("br",{}),b.jsx("strong",{children:"GK Koordinaten:"}),b.jsx("br",{}),"Rechts: ",be.GK_Vektor.GK.Rechts.toFixed(2),b.jsx("br",{}),"Hoch: ",be.GK_Vektor.GK.Hoch.toFixed(2),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Höhe: ",be.GK_Vektor.z.toFixed(2)," m"]})},`hoehe-${ue}`):null}),_e&&Array.from(y.entries()).map(([ue,be])=>{const De=be.poleIds.map(ge=>E.get(ge)).filter(Boolean);return b.jsxs(sr.Fragment,{children:[De.map((ge,X)=>{if(!ge)return null;const oe=ge.position;if(!oe)return null;const le=ie(oe.GK.Rechts,oe.GK.Hoch);return le?b.jsx(Fh,{id:ge.id,type:"pole",position:le,icon:QB(),onDelete:async()=>{await ee(`Mast "${ge.name}" löschen?`)&&G(ge.id)},popupContent:b.jsxs("div",{children:[b.jsxs("strong",{children:["Mast ",be.name," #",X+1]}),b.jsx("br",{}),ge.name!=="No Name"&&b.jsxs(b.Fragment,{children:["Name: ",ge.name,b.jsx("br",{})]}),b.jsx("hr",{style:{margin:"5px 0"}}),b.jsx("strong",{children:"Position:"}),b.jsx("br",{}),"GK Rechts: ",oe.GK.Rechts.toFixed(2),b.jsx("br",{}),"GK Hoch: ",oe.GK.Hoch.toFixed(2),b.jsx("br",{}),"Fußpunkt Höhe: ",oe.z.toFixed(2)," m",b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Nullpunkt Höhe: ",ge.nullpunktHeight.toFixed(2)," m",b.jsx("br",{}),"Mast Höhe: ",ge.poleHeight.toFixed(2)," m",b.jsx("br",{}),"Gesamthöhe: ",(oe.z+ge.nullpunktHeight+ge.poleHeight).toFixed(2)," m",b.jsx("br",{}),"Ebenen: ",ge.levels?.length||0]})},`pole-${ge.id}`):null}),De.map((ge,X)=>{if(X===De.length-1)return null;const oe=De[X+1],le=ge?.position,me=oe?.position;if(!le||!me)return null;const ye=ie(le.GK.Rechts,le.GK.Hoch),de=ie(me.GK.Rechts,me.GK.Hoch);return!ye||!de?null:b.jsx(eB,{mastId:ge.id,nextMastId:oe.id,mastName:ge.name,nextMastName:oe.name,trasseName:be.name,mastIndex:X,positions:[ye,de]},`line-${ue}-${X}`)})]},`trasse-${ue}`)}),pe&&D?.map((ue,be)=>{const De=ue.A?.HP?.GK_Vektor,ge=ue.B?.HP?.GK_Vektor,X=ue.C?.HP?.GK_Vektor;if(!De||!ge||!X)return null;const oe=ie(De.GK.Rechts,De.GK.Hoch),le=ie(ge.GK.Rechts,ge.GK.Hoch),me=ie(X.GK.Rechts,X.GK.Hoch);if(!oe||!le||!me)return null;const ye=[oe,le,me];return b.jsx(A3,{positions:ye,pathOptions:{color:"#0088cc",weight:1,opacity:.6,fillColor:"#0088cc",fillOpacity:.1},children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsxs("strong",{children:["DGM Dreieck #",ue.LfdNummer]}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Punkt A: Höhe ",De.z.toFixed(2)," m",b.jsx("br",{}),"Punkt B: Höhe ",ge.z.toFixed(2)," m",b.jsx("br",{}),"Punkt C: Höhe ",X.z.toFixed(2)," m"]})})},`dreieck-${be}`)}),pe&&A?.map((ue,be)=>{const De=ue.EckeA?.HP?.GK_Vektor,ge=ue.EckeB?.HP?.GK_Vektor;if(!De||!ge)return null;const X=ie(De.GK.Rechts,De.GK.Hoch),oe=ie(ge.GK.Rechts,ge.GK.Hoch);if(!X||!oe)return null;const le=[X,oe];return b.jsx(Gb,{positions:le,pathOptions:{color:"#004466",weight:2,opacity:.8,dashArray:"5, 5"},children:b.jsx(Gl,{children:b.jsxs("div",{children:[b.jsx("strong",{children:"DGM Kante"}),b.jsx("br",{}),b.jsx("hr",{style:{margin:"5px 0"}}),"Dreieck A: #",ue.DreieckA,b.jsx("br",{}),"Dreieck B: #",ue.DreieckB,b.jsx("br",{}),"Höhe A: ",De.z.toFixed(2)," m",b.jsx("br",{}),"Höhe B: ",ge.z.toFixed(2)," m"]})})},`kante-${be}`)})]})]})},tR=()=>{const{selectedElementId:e,selectedElementType:t,isEditFormOpen:n,setEditFormOpen:i,hoehenpunkte:a,esqSources:l,immissionPoints:c,updateHoehenpunkt:f,updateESQ:d,updateImmissionPoint:h}=en(),[m,g]=te.useState({});if(te.useEffect(()=>{if(e){if(t==="hoehenpunkt"){const D=a.get(e);D&&g({rechts:D.GK_Vektor.GK.Rechts,hoch:D.GK_Vektor.GK.Hoch,z:D.GK_Vektor.z})}else if(t==="immissionpoint"){const D=c.get(e);D&&g({name:D.Name,rechts:D.Position.GK.Rechts,hoch:D.Position.GK.Hoch,z:D.Position.z,heightOffset:D.HeightOffset,g_bodenfaktor:D.G_Bodenfaktor})}else if(t==="esq"){const D=l.get(e);D&&g({bezeichnung:D.Bezeichnung,rechts:D.Position.GK.Rechts,hoch:D.Position.GK.Hoch,z:D.Position.z,hoehe:D.Hoehe,l:D.L,s:D.S,z_impulshaltigkeit:D.Z_Impulshaltigkeit,z_tonhaltigkeit:D.Z_Tonhaltigkeit,z_cmet:D.Z_Cmet,schallleistungspegel:D.Schallleistungspegel,ruhezeitzuschlag:D.Ruhezeitzuschlag,beurteilungszeitraum:D.Beurteilungszeitraum,einwirkzeit:D.Einwirkzeit,zeiteinheit:D.Zeiteinheit})}}},[e,t,a,c,l]),!n||!e)return null;const _=D=>{D.preventDefault(),t==="hoehenpunkt"?f(e,{GK_Vektor:{GK:{Rechts:parseFloat(m.rechts),Hoch:parseFloat(m.hoch)},z:parseFloat(m.z)}}):t==="immissionpoint"?h(e,{Name:m.name,Position:{GK:{Rechts:parseFloat(m.rechts),Hoch:parseFloat(m.hoch)},z:parseFloat(m.z)},HeightOffset:parseFloat(m.heightOffset),G_Bodenfaktor:parseFloat(m.g_bodenfaktor)}):t==="esq"&&d(e,{Bezeichnung:m.bezeichnung,Position:{GK:{Rechts:parseFloat(m.rechts),Hoch:parseFloat(m.hoch)},z:parseFloat(m.z)},Hoehe:parseFloat(m.hoehe),L:parseFloat(m.l),S:parseFloat(m.s),Z_Impulshaltigkeit:parseFloat(m.z_impulshaltigkeit),Z_Tonhaltigkeit:parseFloat(m.z_tonhaltigkeit),Z_Cmet:parseFloat(m.z_cmet),Schallleistungspegel:m.schallleistungspegel,Ruhezeitzuschlag:m.ruhezeitzuschlag,Beurteilungszeitraum:parseInt(m.beurteilungszeitraum)||0,Einwirkzeit:parseFloat(m.einwirkzeit),Zeiteinheit:parseInt(m.zeiteinheit)||0}),i(!1)},x={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",zIndex:2e3,minWidth:"300px",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto"},w={width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"},y={display:"block",marginBottom:"5px",fontWeight:"bold",fontSize:"12px"},E={padding:"10px 20px",margin:"5px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"};return b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1999},onClick:()=>i(!1)}),b.jsxs("div",{style:x,children:[b.jsxs("h3",{style:{marginTop:0},children:[t==="hoehenpunkt"&&"Höhenpunkt bearbeiten",t==="immissionpoint"&&"Immissionspunkt bearbeiten",t==="esq"&&"ESQ bearbeiten"]}),b.jsxs("form",{onSubmit:_,children:[t==="hoehenpunkt"&&b.jsxs(b.Fragment,{children:[b.jsx("label",{style:y,children:"GK Rechts:"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.rechts||"",onChange:D=>g({...m,rechts:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Hoch:"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.hoch||"",onChange:D=>g({...m,hoch:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"Höhe (z):"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.z||"",onChange:D=>g({...m,z:D.target.value}),required:!0})]}),t==="immissionpoint"&&b.jsxs(b.Fragment,{children:[b.jsx("label",{style:y,children:"Name:"}),b.jsx("input",{style:w,type:"text",value:m.name||"",onChange:D=>g({...m,name:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Rechts:"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.rechts||"",onChange:D=>g({...m,rechts:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Hoch:"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.hoch||"",onChange:D=>g({...m,hoch:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"Höhe (z):"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.z||"",onChange:D=>g({...m,z:D.target.value}),required:!0}),b.jsx("div",{children:"-------"}),b.jsx("div",{children:"Not used"}),b.jsx("label",{style:y,children:"Höhenoffset:"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.heightOffset||"",onChange:D=>g({...m,heightOffset:D.target.value}),required:!0}),b.jsx("div",{children:"-------"}),b.jsx("label",{style:y,children:"Bodenfaktor (G):"}),b.jsx("input",{style:w,type:"number",step:"0.01",value:m.g_bodenfaktor||"",onChange:D=>g({...m,g_bodenfaktor:D.target.value}),required:!0})]}),t==="esq"&&b.jsxs(b.Fragment,{children:[b.jsx("label",{style:y,children:"Bezeichnung:"}),b.jsx("input",{style:w,type:"text",value:m.bezeichnung||"",onChange:D=>g({...m,bezeichnung:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Rechts:"}),b.jsx("input",{disabled:!0,style:w,type:"number",step:"0.01",value:m.rechts||"",onChange:D=>g({...m,rechts:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"GK Hoch:"}),b.jsx("input",{disabled:!0,style:w,type:"number",step:"0.01",value:m.hoch||"",onChange:D=>g({...m,hoch:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"Position Höhe (z):"}),b.jsx("input",{disabled:!0,style:w,type:"number",step:"0.01",value:m.z||"",onChange:D=>g({...m,z:D.target.value}),required:!0}),b.jsx("label",{style:{...y,color:"red"},children:"Höhe:"}),b.jsx("input",{style:{...w,color:"red"},type:"number",step:"0.01",value:m.hoehe||"",onChange:D=>g({...m,hoehe:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"Schallleistungspegel (L):"}),b.jsx("input",{style:w,type:"number",step:"0.1",value:m.l||"",onChange:D=>g({...m,l:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"S:"}),b.jsx("input",{style:w,type:"number",step:"0.1",value:m.s||"",onChange:D=>g({...m,s:D.target.value})}),b.jsx("label",{style:y,children:"Z Impulshaltigkeit:"}),b.jsx("input",{style:w,type:"number",step:"0.1",value:m.z_impulshaltigkeit||"",onChange:D=>g({...m,z_impulshaltigkeit:D.target.value})}),b.jsx("label",{style:y,children:"Z Tonhaltigkeit:"}),b.jsx("input",{style:w,type:"number",step:"0.1",value:m.z_tonhaltigkeit||"",onChange:D=>g({...m,z_tonhaltigkeit:D.target.value})}),b.jsx("label",{style:y,children:"Z Cmet:"}),b.jsx("input",{style:w,type:"number",step:"0.1",value:m.z_cmet||"",onChange:D=>g({...m,z_cmet:D.target.value})}),b.jsxs("label",{style:{...y,display:"flex",alignItems:"center"},children:[b.jsx("input",{type:"checkbox",checked:m.schallleistungspegel||!1,onChange:D=>g({...m,schallleistungspegel:D.target.checked}),style:{marginRight:"5px"}}),"Schallleistungspegel"]}),b.jsxs("label",{style:{...y,display:"flex",alignItems:"center"},children:[b.jsx("input",{type:"checkbox",checked:m.ruhezeitzuschlag||!1,onChange:D=>g({...m,ruhezeitzuschlag:D.target.checked}),style:{marginRight:"5px"}}),"Ruhezeitzuschlag"]}),b.jsx("label",{style:y,children:"Beurteilungszeitraum:"}),b.jsxs("select",{style:w,value:m.beurteilungszeitraum??0,onChange:D=>g({...m,beurteilungszeitraum:parseInt(D.target.value)}),required:!0,children:[b.jsx("option",{value:"0",children:"0 - Tag (6:00-22:00)"}),b.jsx("option",{value:"1",children:"1 - Nacht (22:00-6:00)"}),b.jsx("option",{value:"2",children:"2 - Lauteste Stunde"})]}),b.jsx("label",{style:y,children:"Einwirkzeit:"}),b.jsx("input",{style:w,type:"number",step:"0.1",value:m.einwirkzeit||"",onChange:D=>g({...m,einwirkzeit:D.target.value}),required:!0}),b.jsx("label",{style:y,children:"Zeiteinheit:"}),b.jsxs("select",{style:w,value:m.zeiteinheit??0,onChange:D=>g({...m,zeiteinheit:parseInt(D.target.value)}),required:!0,children:[b.jsx("option",{value:"0",children:"0 - Sekunden"}),b.jsx("option",{value:"1",children:"1 - Minuten"}),b.jsx("option",{value:"2",children:"2 - Stunden"})]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[b.jsx("button",{type:"button",style:{...E,background:"#f5f5f5",color:"#333"},onClick:()=>i(!1),children:"Abbrechen"}),b.jsx("button",{type:"submit",style:{...E,background:"#4CAF50",color:"white"},children:"Speichern"})]})]})]})]})};function Bh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var S0={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Lb;function nR(){return Lb||(Lb=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(i,a,l){function c(h,m){if(!a[h]){if(!i[h]){var g=typeof Bh=="function"&&Bh;if(!m&&g)return g(h,!0);if(f)return f(h,!0);var _=new Error("Cannot find module '"+h+"'");throw _.code="MODULE_NOT_FOUND",_}var x=a[h]={exports:{}};i[h][0].call(x.exports,function(w){var y=i[h][1][w];return c(y||w)},x,x.exports,n,i,a,l)}return a[h].exports}for(var f=typeof Bh=="function"&&Bh,d=0;d<l.length;d++)c(l[d]);return c})({1:[function(n,i,a){var l=n("./utils"),c=n("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(d){for(var h,m,g,_,x,w,y,E=[],D=0,A=d.length,N=A,F=l.getTypeOf(d)!=="string";D<d.length;)N=A-D,g=F?(h=d[D++],m=D<A?d[D++]:0,D<A?d[D++]:0):(h=d.charCodeAt(D++),m=D<A?d.charCodeAt(D++):0,D<A?d.charCodeAt(D++):0),_=h>>2,x=(3&h)<<4|m>>4,w=1<N?(15&m)<<2|g>>6:64,y=2<N?63&g:64,E.push(f.charAt(_)+f.charAt(x)+f.charAt(w)+f.charAt(y));return E.join("")},a.decode=function(d){var h,m,g,_,x,w,y=0,E=0,D="data:";if(d.substr(0,D.length)===D)throw new Error("Invalid base64 input, it looks like a data url.");var A,N=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===f.charAt(64)&&N--,d.charAt(d.length-2)===f.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=c.uint8array?new Uint8Array(0|N):new Array(0|N);y<d.length;)h=f.indexOf(d.charAt(y++))<<2|(_=f.indexOf(d.charAt(y++)))>>4,m=(15&_)<<4|(x=f.indexOf(d.charAt(y++)))>>2,g=(3&x)<<6|(w=f.indexOf(d.charAt(y++))),A[E++]=h,x!==64&&(A[E++]=m),w!==64&&(A[E++]=g);return A}},{"./support":30,"./utils":32}],2:[function(n,i,a){var l=n("./external"),c=n("./stream/DataWorker"),f=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function h(m,g,_,x,w){this.compressedSize=m,this.uncompressedSize=g,this.crc32=_,this.compression=x,this.compressedContent=w}h.prototype={getContentWorker:function(){var m=new c(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),g=this;return m.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new c(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,g,_){return m.pipe(new f).pipe(new d("uncompressedSize")).pipe(g.compressWorker(_)).pipe(new d("compressedSize")).withStreamInfo("compression",g)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,a){var l=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,a){var l=n("./utils"),c=(function(){for(var f,d=[],h=0;h<256;h++){f=h;for(var m=0;m<8;m++)f=1&f?3988292384^f>>>1:f>>>1;d[h]=f}return d})();i.exports=function(f,d){return f!==void 0&&f.length?l.getTypeOf(f)!=="string"?(function(h,m,g,_){var x=c,w=_+g;h^=-1;for(var y=_;y<w;y++)h=h>>>8^x[255&(h^m[y])];return-1^h})(0|d,f,f.length,0):(function(h,m,g,_){var x=c,w=_+g;h^=-1;for(var y=_;y<w;y++)h=h>>>8^x[255&(h^m.charCodeAt(y))];return-1^h})(0|d,f,f.length,0):0}},{"./utils":32}],5:[function(n,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,i,a){var l=null;l=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:l}},{lie:37}],7:[function(n,i,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=n("pako"),f=n("./utils"),d=n("./stream/GenericWorker"),h=l?"uint8array":"array";function m(g,_){d.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=_,this.meta={}}a.magic="\b\0",f.inherits(m,d),m.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(h,g.data),!1)},m.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(_){g.push({data:_,meta:g.meta})}},a.compressWorker=function(g){return new m("Deflate",g)},a.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,a){function l(x,w){var y,E="";for(y=0;y<w;y++)E+=String.fromCharCode(255&x),x>>>=8;return E}function c(x,w,y,E,D,A){var N,F,k=x.file,T=x.compression,R=A!==h.utf8encode,j=f.transformTo("string",A(k.name)),O=f.transformTo("string",h.utf8encode(k.name)),G=k.comment,U=f.transformTo("string",A(G)),I=f.transformTo("string",h.utf8encode(G)),W=O.length!==k.name.length,B=I.length!==G.length,re="",K="",ee="",V=k.dir,Q=k.date,$={crc32:0,compressedSize:0,uncompressedSize:0};w&&!y||($.crc32=x.crc32,$.compressedSize=x.compressedSize,$.uncompressedSize=x.uncompressedSize);var q=0;w&&(q|=8),R||!W&&!B||(q|=2048);var ne=0,se=0;V&&(ne|=16),D==="UNIX"?(se=798,ne|=(function(pe,_e){var ze=pe;return pe||(ze=_e?16893:33204),(65535&ze)<<16})(k.unixPermissions,V)):(se=20,ne|=(function(pe){return 63&(pe||0)})(k.dosPermissions)),N=Q.getUTCHours(),N<<=6,N|=Q.getUTCMinutes(),N<<=5,N|=Q.getUTCSeconds()/2,F=Q.getUTCFullYear()-1980,F<<=4,F|=Q.getUTCMonth()+1,F<<=5,F|=Q.getUTCDate(),W&&(K=l(1,1)+l(m(j),4)+O,re+="up"+l(K.length,2)+K),B&&(ee=l(1,1)+l(m(U),4)+I,re+="uc"+l(ee.length,2)+ee);var ce="";return ce+=`
\0`,ce+=l(q,2),ce+=T.magic,ce+=l(N,2),ce+=l(F,2),ce+=l($.crc32,4),ce+=l($.compressedSize,4),ce+=l($.uncompressedSize,4),ce+=l(j.length,2),ce+=l(re.length,2),{fileRecord:g.LOCAL_FILE_HEADER+ce+j+re,dirRecord:g.CENTRAL_FILE_HEADER+l(se,2)+ce+l(U.length,2)+"\0\0\0\0"+l(ne,4)+l(E,4)+j+re+U}}var f=n("../utils"),d=n("../stream/GenericWorker"),h=n("../utf8"),m=n("../crc32"),g=n("../signature");function _(x,w,y,E){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=y,this.encodeFileName=E,this.streamFiles=x,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(_,d),_.prototype.push=function(x){var w=x.meta.percent||0,y=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(x):(this.bytesWritten+=x.data.length,d.prototype.push.call(this,{data:x.data,meta:{currentFile:this.currentFile,percent:y?(w+100*(y-E-1))/y:100}}))},_.prototype.openedSource=function(x){this.currentSourceOffset=this.bytesWritten,this.currentFile=x.file.name;var w=this.streamFiles&&!x.file.dir;if(w){var y=c(x,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(x){this.accumulate=!1;var w=this.streamFiles&&!x.file.dir,y=c(x,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),w)this.push({data:(function(E){return g.DATA_DESCRIPTOR+l(E.crc32,4)+l(E.compressedSize,4)+l(E.uncompressedSize,4)})(x),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var x=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var y=this.bytesWritten-x,E=(function(D,A,N,F,k){var T=f.transformTo("string",k(F));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(D,2)+l(D,2)+l(A,4)+l(N,4)+l(T.length,2)+T})(this.dirRecords.length,y,x,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(x){this._sources.push(x);var w=this;return x.on("data",function(y){w.processChunk(y)}),x.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),x.on("error",function(y){w.error(y)}),this},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(x){var w=this._sources;if(!d.prototype.error.call(this,x))return!1;for(var y=0;y<w.length;y++)try{w[y].error(x)}catch{}return!0},_.prototype.lock=function(){d.prototype.lock.call(this);for(var x=this._sources,w=0;w<x.length;w++)x[w].lock()},i.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,a){var l=n("../compressions"),c=n("./ZipFileWorker");a.generateWorker=function(f,d,h){var m=new c(d.streamFiles,h,d.platform,d.encodeFileName),g=0;try{f.forEach(function(_,x){g++;var w=(function(A,N){var F=A||N,k=l[F];if(!k)throw new Error(F+" is not a valid compression method !");return k})(x.options.compression,d.compression),y=x.options.compressionOptions||d.compressionOptions||{},E=x.dir,D=x.date;x._compressWorker(w,y).withStreamInfo("file",{name:_,dir:E,date:D,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(m)}),m.entriesCount=g}catch(_){m.error(_)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,a){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new l;for(var f in this)typeof this[f]!="function"&&(c[f]=this[f]);return c}}(l.prototype=n("./object")).loadAsync=n("./load"),l.support=n("./support"),l.defaults=n("./defaults"),l.version="3.10.1",l.loadAsync=function(c,f){return new l().loadAsync(c,f)},l.external=n("./external"),i.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,a){var l=n("./utils"),c=n("./external"),f=n("./utf8"),d=n("./zipEntries"),h=n("./stream/Crc32Probe"),m=n("./nodejsUtils");function g(_){return new c.Promise(function(x,w){var y=_.decompressed.getContentWorker().pipe(new h);y.on("error",function(E){w(E)}).on("end",function(){y.streamInfo.crc32!==_.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):x()}).resume()})}i.exports=function(_,x){var w=this;return x=l.extend(x||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),m.isNode&&m.isStream(_)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",_,!0,x.optimizedBinaryString,x.base64).then(function(y){var E=new d(x);return E.load(y),E}).then(function(y){var E=[c.Promise.resolve(y)],D=y.files;if(x.checkCRC32)for(var A=0;A<D.length;A++)E.push(g(D[A]));return c.Promise.all(E)}).then(function(y){for(var E=y.shift(),D=E.files,A=0;A<D.length;A++){var N=D[A],F=N.fileNameStr,k=l.resolve(N.fileNameStr);w.file(k,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:x.createFolders}),N.dir||(w.file(k).unsafeOriginalName=F)}return E.zipComment.length&&(w.comment=E.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,a){var l=n("../utils"),c=n("../stream/GenericWorker");function f(d,h){c.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(h)}l.inherits(f,c),f.prototype._bindStream=function(d){var h=this;(this._stream=d).pause(),d.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},f.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,a){var l=n("readable-stream").Readable;function c(f,d,h){l.call(this,d),this._helper=f;var m=this;f.on("data",function(g,_){m.push(g)||m._helper.pause(),h&&h(_)}).on("error",function(g){m.emit("error",g)}).on("end",function(){m.push(null)})}n("../utils").inherits(c,l),c.prototype._read=function(){this._helper.resume()},i.exports=c},{"../utils":32,"readable-stream":16}],14:[function(n,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,c);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,c)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var c=new Buffer(l);return c.fill(0),c},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(n,i,a){function l(k,T,R){var j,O=f.getTypeOf(T),G=f.extend(R||{},m);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(k=D(k)),G.createFolders&&(j=E(k))&&A.call(this,j,!0);var U=O==="string"&&G.binary===!1&&G.base64===!1;R&&R.binary!==void 0||(G.binary=!U),(T instanceof g&&T.uncompressedSize===0||G.dir||!T||T.length===0)&&(G.base64=!1,G.binary=!0,T="",G.compression="STORE",O="string");var I=null;I=T instanceof g||T instanceof d?T:w.isNode&&w.isStream(T)?new y(k,T):f.prepareContent(k,T,G.binary,G.optimizedBinaryString,G.base64);var W=new _(k,I,G);this.files[k]=W}var c=n("./utf8"),f=n("./utils"),d=n("./stream/GenericWorker"),h=n("./stream/StreamHelper"),m=n("./defaults"),g=n("./compressedObject"),_=n("./zipObject"),x=n("./generate"),w=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),E=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var T=k.lastIndexOf("/");return 0<T?k.substring(0,T):""},D=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},A=function(k,T){return T=T!==void 0?T:m.createFolders,k=D(k),this.files[k]||l.call(this,k,null,{dir:!0,createFolders:T}),this.files[k]};function N(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var T,R,j;for(T in this.files)j=this.files[T],(R=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&k(R,j)},filter:function(k){var T=[];return this.forEach(function(R,j){k(R,j)&&T.push(j)}),T},file:function(k,T,R){if(arguments.length!==1)return k=this.root+k,l.call(this,k,T,R),this;if(N(k)){var j=k;return this.filter(function(G,U){return!U.dir&&j.test(G)})}var O=this.files[this.root+k];return O&&!O.dir?O:null},folder:function(k){if(!k)return this;if(N(k))return this.filter(function(O,G){return G.dir&&k.test(O)});var T=this.root+k,R=A.call(this,T),j=this.clone();return j.root=R.name,j},remove:function(k){k=this.root+k;var T=this.files[k];if(T||(k.slice(-1)!=="/"&&(k+="/"),T=this.files[k]),T&&!T.dir)delete this.files[k];else for(var R=this.filter(function(O,G){return G.name.slice(0,k.length)===k}),j=0;j<R.length;j++)delete this.files[R[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var T,R={};try{if((R=f.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");f.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var j=R.comment||this.comment||"";T=x.generateWorker(this,R,j)}catch(O){(T=new d("error")).error(O)}return new h(T,R.type||"string",R.mimeType)},generateAsync:function(k,T){return this.generateInternalStream(k).accumulate(T)},generateNodeStream:function(k,T){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(T)}};i.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,a){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,a){var l=n("./DataReader");function c(f){l.call(this,f);for(var d=0;d<this.data.length;d++)f[d]=255&f[d]}n("../utils").inherits(c,l),c.prototype.byteAt=function(f){return this.data[this.zero+f]},c.prototype.lastIndexOfSignature=function(f){for(var d=f.charCodeAt(0),h=f.charCodeAt(1),m=f.charCodeAt(2),g=f.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===d&&this.data[_+1]===h&&this.data[_+2]===m&&this.data[_+3]===g)return _-this.zero;return-1},c.prototype.readAndCheckSignature=function(f){var d=f.charCodeAt(0),h=f.charCodeAt(1),m=f.charCodeAt(2),g=f.charCodeAt(3),_=this.readData(4);return d===_[0]&&h===_[1]&&m===_[2]&&g===_[3]},c.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./DataReader":18}],18:[function(n,i,a){var l=n("../utils");function c(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var d,h=0;for(this.checkOffset(f),d=this.index+f-1;d>=this.index;d--)h=(h<<8)+this.byteAt(d);return this.index+=f,h},readString:function(f){return l.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},i.exports=c},{"../utils":32}],19:[function(n,i,a){var l=n("./Uint8ArrayReader");function c(f){l.call(this,f)}n("../utils").inherits(c,l),c.prototype.readData=function(f){this.checkOffset(f);var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,a){var l=n("./DataReader");function c(f){l.call(this,f)}n("../utils").inherits(c,l),c.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},c.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},c.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},c.prototype.readData=function(f){this.checkOffset(f);var d=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./DataReader":18}],21:[function(n,i,a){var l=n("./ArrayReader");function c(f){l.call(this,f)}n("../utils").inherits(c,l),c.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,d},i.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,a){var l=n("../utils"),c=n("../support"),f=n("./ArrayReader"),d=n("./StringReader"),h=n("./NodeBufferReader"),m=n("./Uint8ArrayReader");i.exports=function(g){var _=l.getTypeOf(g);return l.checkSupport(_),_!=="string"||c.uint8array?_==="nodebuffer"?new h(g):c.uint8array?new m(l.transformTo("uint8array",g)):new f(l.transformTo("array",g)):new d(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,a){var l=n("./GenericWorker"),c=n("../utils");function f(d){l.call(this,"ConvertWorker to "+d),this.destType=d}c.inherits(f,l),f.prototype.processChunk=function(d){this.push({data:c.transformTo(this.destType,d.data),meta:d.meta})},i.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,a){var l=n("./GenericWorker"),c=n("../crc32");function f(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(f,l),f.prototype.processChunk=function(d){this.streamInfo.crc32=c(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,a){var l=n("../utils"),c=n("./GenericWorker");function f(d){c.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}l.inherits(f,c),f.prototype.processChunk=function(d){if(d){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+d.data.length}c.prototype.processChunk.call(this,d)},i.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,a){var l=n("../utils"),c=n("./GenericWorker");function f(d){c.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=l.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}l.inherits(f,c),f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,h);break;case"uint8array":d=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":d=this.data.slice(this.index,h)}return this.index=h,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,a){function l(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,f){return this._listeners[c].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,f){if(this._listeners[c])for(var d=0;d<this._listeners[c].length;d++)this._listeners[c][d].call(this,f)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var f=this;return c.on("data",function(d){f.processChunk(d)}),c.on("end",function(){f.end()}),c.on("error",function(d){f.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,f){return this.extraStreamInfo[c]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},i.exports=l},{}],29:[function(n,i,a){var l=n("../utils"),c=n("./ConvertWorker"),f=n("./GenericWorker"),d=n("../base64"),h=n("../support"),m=n("../external"),g=null;if(h.nodestream)try{g=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(w,y){return new m.Promise(function(E,D){var A=[],N=w._internalType,F=w._outputType,k=w._mimeType;w.on("data",function(T,R){A.push(T),y&&y(R)}).on("error",function(T){A=[],D(T)}).on("end",function(){try{var T=(function(R,j,O){switch(R){case"blob":return l.newBlob(l.transformTo("arraybuffer",j),O);case"base64":return d.encode(j);default:return l.transformTo(R,j)}})(F,(function(R,j){var O,G=0,U=null,I=0;for(O=0;O<j.length;O++)I+=j[O].length;switch(R){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(U=new Uint8Array(I),O=0;O<j.length;O++)U.set(j[O],G),G+=j[O].length;return U;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+R+"'")}})(N,A),k);E(T)}catch(R){D(R)}A=[]}).resume()})}function x(w,y,E){var D=y;switch(y){case"blob":case"arraybuffer":D="uint8array";break;case"base64":D="string"}try{this._internalType=D,this._outputType=y,this._mimeType=E,l.checkSupport(D),this._worker=w.pipe(new c(D)),w.lock()}catch(A){this._worker=new f("error"),this._worker.error(A)}}x.prototype={accumulate:function(w){return _(this,w)},on:function(w,y){var E=this;return w==="data"?this._worker.on(w,function(D){y.call(E,D.data,D.meta)}):this._worker.on(w,function(){l.delay(y,arguments,E)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var l=new ArrayBuffer(0);try{a.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(l),a.blob=c.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,a){for(var l=n("./utils"),c=n("./support"),f=n("./nodejsUtils"),d=n("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function g(){d.call(this,"utf-8 decode"),this.leftOver=null}function _(){d.call(this,"utf-8 encode")}a.utf8encode=function(x){return c.nodebuffer?f.newBufferFrom(x,"utf-8"):(function(w){var y,E,D,A,N,F=w.length,k=0;for(A=0;A<F;A++)(64512&(E=w.charCodeAt(A)))==55296&&A+1<F&&(64512&(D=w.charCodeAt(A+1)))==56320&&(E=65536+(E-55296<<10)+(D-56320),A++),k+=E<128?1:E<2048?2:E<65536?3:4;for(y=c.uint8array?new Uint8Array(k):new Array(k),A=N=0;N<k;A++)(64512&(E=w.charCodeAt(A)))==55296&&A+1<F&&(64512&(D=w.charCodeAt(A+1)))==56320&&(E=65536+(E-55296<<10)+(D-56320),A++),E<128?y[N++]=E:(E<2048?y[N++]=192|E>>>6:(E<65536?y[N++]=224|E>>>12:(y[N++]=240|E>>>18,y[N++]=128|E>>>12&63),y[N++]=128|E>>>6&63),y[N++]=128|63&E);return y})(x)},a.utf8decode=function(x){return c.nodebuffer?l.transformTo("nodebuffer",x).toString("utf-8"):(function(w){var y,E,D,A,N=w.length,F=new Array(2*N);for(y=E=0;y<N;)if((D=w[y++])<128)F[E++]=D;else if(4<(A=h[D]))F[E++]=65533,y+=A-1;else{for(D&=A===2?31:A===3?15:7;1<A&&y<N;)D=D<<6|63&w[y++],A--;1<A?F[E++]=65533:D<65536?F[E++]=D:(D-=65536,F[E++]=55296|D>>10&1023,F[E++]=56320|1023&D)}return F.length!==E&&(F.subarray?F=F.subarray(0,E):F.length=E),l.applyFromCharCode(F)})(x=l.transformTo(c.uint8array?"uint8array":"array",x))},l.inherits(g,d),g.prototype.processChunk=function(x){var w=l.transformTo(c.uint8array?"uint8array":"array",x.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var y=w;(w=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),w.set(y,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var E=(function(A,N){var F;for((N=N||A.length)>A.length&&(N=A.length),F=N-1;0<=F&&(192&A[F])==128;)F--;return F<0||F===0?N:F+h[A[F]]>N?F:N})(w),D=w;E!==w.length&&(c.uint8array?(D=w.subarray(0,E),this.leftOver=w.subarray(E,w.length)):(D=w.slice(0,E),this.leftOver=w.slice(E,w.length))),this.push({data:a.utf8decode(D),meta:x.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=g,l.inherits(_,d),_.prototype.processChunk=function(x){this.push({data:a.utf8encode(x.data),meta:x.meta})},a.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,a){var l=n("./support"),c=n("./base64"),f=n("./nodejsUtils"),d=n("./external");function h(y){return y}function m(y,E){for(var D=0;D<y.length;++D)E[D]=255&y.charCodeAt(D);return E}n("setimmediate"),a.newBlob=function(y,E){a.checkSupport("blob");try{return new Blob([y],{type:E})}catch{try{var D=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return D.append(y),D.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(y,E,D){var A=[],N=0,F=y.length;if(F<=D)return String.fromCharCode.apply(null,y);for(;N<F;)E==="array"||E==="nodebuffer"?A.push(String.fromCharCode.apply(null,y.slice(N,Math.min(N+D,F)))):A.push(String.fromCharCode.apply(null,y.subarray(N,Math.min(N+D,F)))),N+=D;return A.join("")},stringifyByChar:function(y){for(var E="",D=0;D<y.length;D++)E+=String.fromCharCode(y[D]);return E},applyCanBeUsed:{uint8array:(function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}})()}};function _(y){var E=65536,D=a.getTypeOf(y),A=!0;if(D==="uint8array"?A=g.applyCanBeUsed.uint8array:D==="nodebuffer"&&(A=g.applyCanBeUsed.nodebuffer),A)for(;1<E;)try{return g.stringifyByChunk(y,D,E)}catch{E=Math.floor(E/2)}return g.stringifyByChar(y)}function x(y,E){for(var D=0;D<y.length;D++)E[D]=y[D];return E}a.applyFromCharCode=_;var w={};w.string={string:h,array:function(y){return m(y,new Array(y.length))},arraybuffer:function(y){return w.string.uint8array(y).buffer},uint8array:function(y){return m(y,new Uint8Array(y.length))},nodebuffer:function(y){return m(y,f.allocBuffer(y.length))}},w.array={string:_,array:h,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return f.newBufferFrom(y)}},w.arraybuffer={string:function(y){return _(new Uint8Array(y))},array:function(y){return x(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:h,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return f.newBufferFrom(new Uint8Array(y))}},w.uint8array={string:_,array:function(y){return x(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:h,nodebuffer:function(y){return f.newBufferFrom(y)}},w.nodebuffer={string:_,array:function(y){return x(y,new Array(y.length))},arraybuffer:function(y){return w.nodebuffer.uint8array(y).buffer},uint8array:function(y){return x(y,new Uint8Array(y.length))},nodebuffer:h},a.transformTo=function(y,E){if(E=E||"",!y)return E;a.checkSupport(y);var D=a.getTypeOf(E);return w[D][y](E)},a.resolve=function(y){for(var E=y.split("/"),D=[],A=0;A<E.length;A++){var N=E[A];N==="."||N===""&&A!==0&&A!==E.length-1||(N===".."?D.pop():D.push(N))}return D.join("/")},a.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":l.nodebuffer&&f.isBuffer(y)?"nodebuffer":l.uint8array&&y instanceof Uint8Array?"uint8array":l.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(y){if(!l[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(y){var E,D,A="";for(D=0;D<(y||"").length;D++)A+="\\x"+((E=y.charCodeAt(D))<16?"0":"")+E.toString(16).toUpperCase();return A},a.delay=function(y,E,D){setImmediate(function(){y.apply(D||null,E||[])})},a.inherits=function(y,E){function D(){}D.prototype=E.prototype,y.prototype=new D},a.extend=function(){var y,E,D={};for(y=0;y<arguments.length;y++)for(E in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],E)&&D[E]===void 0&&(D[E]=arguments[y][E]);return D},a.prepareContent=function(y,E,D,A,N){return d.Promise.resolve(E).then(function(F){return l.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new d.Promise(function(k,T){var R=new FileReader;R.onload=function(j){k(j.target.result)},R.onerror=function(j){T(j.target.error)},R.readAsArrayBuffer(F)}):F}).then(function(F){var k=a.getTypeOf(F);return k?(k==="arraybuffer"?F=a.transformTo("uint8array",F):k==="string"&&(N?F=c.decode(F):D&&A!==!0&&(F=(function(T){return m(T,l.uint8array?new Uint8Array(T.length):new Array(T.length))})(F))),F):d.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,a){var l=n("./reader/readerFor"),c=n("./utils"),f=n("./signature"),d=n("./zipEntry"),h=n("./support");function m(g){this.files=[],this.loadOptions=g}m.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(_)+", expected "+c.pretty(g)+")")}},isSignature:function(g,_){var x=this.reader.index;this.reader.setIndex(g);var w=this.reader.readString(4)===_;return this.reader.setIndex(x),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),_=h.uint8array?"uint8array":"array",x=c.transformTo(_,g);this.zipComment=this.loadOptions.decodeFileName(x)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,_,x,w=this.zip64EndOfCentralSize-44;0<w;)g=this.reader.readInt(2),_=this.reader.readInt(4),x=this.reader.readData(_),this.zip64ExtensibleData[g]={id:g,length:_,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,_;for(g=0;g<this.files.length;g++)_=this.files[g],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(g=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var _=g;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var w=_-x;if(0<w)this.isSignature(_,f.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(g){this.reader=l(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,a){var l=n("./reader/readerFor"),c=n("./utils"),f=n("./compressedObject"),d=n("./crc32"),h=n("./utf8"),m=n("./compressions"),g=n("./support");function _(x,w){this.options=x,this.loadOptions=w}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(x){var w,y;if(x.skip(22),this.fileNameLength=x.readInt(2),y=x.readInt(2),this.fileName=x.readData(this.fileNameLength),x.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(E){for(var D in m)if(Object.prototype.hasOwnProperty.call(m,D)&&m[D].magic===E)return m[D];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,w,x.readData(this.compressedSize))},readCentralPart:function(x){this.versionMadeBy=x.readInt(2),x.skip(2),this.bitFlag=x.readInt(2),this.compressionMethod=x.readString(2),this.date=x.readDate(),this.crc32=x.readInt(4),this.compressedSize=x.readInt(4),this.uncompressedSize=x.readInt(4);var w=x.readInt(2);if(this.extraFieldsLength=x.readInt(2),this.fileCommentLength=x.readInt(2),this.diskNumberStart=x.readInt(2),this.internalFileAttributes=x.readInt(2),this.externalFileAttributes=x.readInt(4),this.localHeaderOffset=x.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");x.skip(w),this.readExtraFields(x),this.parseZIP64ExtraField(x),this.fileComment=x.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var x=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),x==0&&(this.dosPermissions=63&this.externalFileAttributes),x==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var x=l(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=x.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=x.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=x.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=x.readInt(4))}},readExtraFields:function(x){var w,y,E,D=x.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});x.index+4<D;)w=x.readInt(2),y=x.readInt(2),E=x.readData(y),this.extraFields[w]={id:w,length:y,value:E};x.setIndex(D)},handleUTF8:function(){var x=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var y=c.transformTo(x,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var D=c.transformTo(x,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(D)}}},findExtraFieldUnicodePath:function(){var x=this.extraFields[28789];if(x){var w=l(x.value);return w.readInt(1)!==1||d(this.fileName)!==w.readInt(4)?null:h.utf8decode(w.readData(x.length-5))}return null},findExtraFieldUnicodeComment:function(){var x=this.extraFields[25461];if(x){var w=l(x.value);return w.readInt(1)!==1||d(this.fileComment)!==w.readInt(4)?null:h.utf8decode(w.readData(x.length-5))}return null}},i.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,a){function l(w,y,E){this.name=w,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=y,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var c=n("./stream/StreamHelper"),f=n("./stream/DataWorker"),d=n("./utf8"),h=n("./compressedObject"),m=n("./stream/GenericWorker");l.prototype={internalStream:function(w){var y=null,E="string";try{if(!w)throw new Error("No output type specified.");var D=(E=w.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),y=this._decompressWorker();var A=!this._dataBinary;A&&!D&&(y=y.pipe(new d.Utf8EncodeWorker)),!A&&D&&(y=y.pipe(new d.Utf8DecodeWorker))}catch(N){(y=new m("error")).error(N)}return new c(y,E,"")},async:function(w,y){return this.internalStream(w).accumulate(y)},nodeStream:function(w,y){return this.internalStream(w||"nodebuffer").toNodejsStream(y)},_compressWorker:function(w,y){if(this._data instanceof h&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new d.Utf8EncodeWorker)),h.createWorkerFrom(E,w,y)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new f(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},x=0;x<g.length;x++)l.prototype[g[x]]=_;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,a){(function(l){var c,f,d=l.MutationObserver||l.WebKitMutationObserver;if(d){var h=0,m=new d(w),g=l.document.createTextNode("");m.observe(g,{characterData:!0}),c=function(){g.data=h=++h%2}}else if(l.setImmediate||l.MessageChannel===void 0)c="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var y=l.document.createElement("script");y.onreadystatechange=function(){w(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},l.document.documentElement.appendChild(y)}:function(){setTimeout(w,0)};else{var _=new l.MessageChannel;_.port1.onmessage=w,c=function(){_.port2.postMessage(0)}}var x=[];function w(){var y,E;f=!0;for(var D=x.length;D;){for(E=x,x=[],y=-1;++y<D;)E[y]();D=x.length}f=!1}i.exports=function(y){x.push(y)!==1||f||c()}}).call(this,typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,a){var l=n("immediate");function c(){}var f={},d=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function g(D){if(typeof D!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,D!==c&&y(this,D)}function _(D,A,N){this.promise=D,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function x(D,A,N){l(function(){var F;try{F=A(N)}catch(k){return f.reject(D,k)}F===D?f.reject(D,new TypeError("Cannot resolve promise with itself")):f.resolve(D,F)})}function w(D){var A=D&&D.then;if(D&&(typeof D=="object"||typeof D=="function")&&typeof A=="function")return function(){A.apply(D,arguments)}}function y(D,A){var N=!1;function F(R){N||(N=!0,f.reject(D,R))}function k(R){N||(N=!0,f.resolve(D,R))}var T=E(function(){A(k,F)});T.status==="error"&&F(T.value)}function E(D,A){var N={};try{N.value=D(A),N.status="success"}catch(F){N.status="error",N.value=F}return N}(i.exports=g).prototype.finally=function(D){if(typeof D!="function")return this;var A=this.constructor;return this.then(function(N){return A.resolve(D()).then(function(){return N})},function(N){return A.resolve(D()).then(function(){throw N})})},g.prototype.catch=function(D){return this.then(null,D)},g.prototype.then=function(D,A){if(typeof D!="function"&&this.state===h||typeof A!="function"&&this.state===d)return this;var N=new this.constructor(c);return this.state!==m?x(N,this.state===h?D:A,this.outcome):this.queue.push(new _(N,D,A)),N},_.prototype.callFulfilled=function(D){f.resolve(this.promise,D)},_.prototype.otherCallFulfilled=function(D){x(this.promise,this.onFulfilled,D)},_.prototype.callRejected=function(D){f.reject(this.promise,D)},_.prototype.otherCallRejected=function(D){x(this.promise,this.onRejected,D)},f.resolve=function(D,A){var N=E(w,A);if(N.status==="error")return f.reject(D,N.value);var F=N.value;if(F)y(D,F);else{D.state=h,D.outcome=A;for(var k=-1,T=D.queue.length;++k<T;)D.queue[k].callFulfilled(A)}return D},f.reject=function(D,A){D.state=d,D.outcome=A;for(var N=-1,F=D.queue.length;++N<F;)D.queue[N].callRejected(A);return D},g.resolve=function(D){return D instanceof this?D:f.resolve(new this(c),D)},g.reject=function(D){var A=new this(c);return f.reject(A,D)},g.all=function(D){var A=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=D.length,F=!1;if(!N)return this.resolve([]);for(var k=new Array(N),T=0,R=-1,j=new this(c);++R<N;)O(D[R],R);return j;function O(G,U){A.resolve(G).then(function(I){k[U]=I,++T!==N||F||(F=!0,f.resolve(j,k))},function(I){F||(F=!0,f.reject(j,I))})}},g.race=function(D){var A=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=D.length,F=!1;if(!N)return this.resolve([]);for(var k=-1,T=new this(c);++k<N;)R=D[k],A.resolve(R).then(function(j){F||(F=!0,f.resolve(T,j))},function(j){F||(F=!0,f.reject(T,j))});var R;return T}},{immediate:36}],38:[function(n,i,a){var l={};(0,n("./lib/utils/common").assign)(l,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,a){var l=n("./zlib/deflate"),c=n("./utils/common"),f=n("./utils/strings"),d=n("./zlib/messages"),h=n("./zlib/zstream"),m=Object.prototype.toString,g=0,_=-1,x=0,w=8;function y(D){if(!(this instanceof y))return new y(D);this.options=c.assign({level:_,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:x,to:""},D||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var N=l.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(N!==g)throw new Error(d[N]);if(A.header&&l.deflateSetHeader(this.strm,A.header),A.dictionary){var F;if(F=typeof A.dictionary=="string"?f.string2buf(A.dictionary):m.call(A.dictionary)==="[object ArrayBuffer]"?new Uint8Array(A.dictionary):A.dictionary,(N=l.deflateSetDictionary(this.strm,F))!==g)throw new Error(d[N]);this._dict_set=!0}}function E(D,A){var N=new y(A);if(N.push(D,!0),N.err)throw N.msg||d[N.err];return N.result}y.prototype.push=function(D,A){var N,F,k=this.strm,T=this.options.chunkSize;if(this.ended)return!1;F=A===~~A?A:A===!0?4:0,typeof D=="string"?k.input=f.string2buf(D):m.call(D)==="[object ArrayBuffer]"?k.input=new Uint8Array(D):k.input=D,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new c.Buf8(T),k.next_out=0,k.avail_out=T),(N=l.deflate(k,F))!==1&&N!==g)return this.onEnd(N),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(c.shrinkBuf(k.output,k.next_out))):this.onData(c.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&N!==1);return F===4?(N=l.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===g):F!==2||(this.onEnd(g),!(k.avail_out=0))},y.prototype.onData=function(D){this.chunks.push(D)},y.prototype.onEnd=function(D){D===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=D,this.msg=this.strm.msg},a.Deflate=y,a.deflate=E,a.deflateRaw=function(D,A){return(A=A||{}).raw=!0,E(D,A)},a.gzip=function(D,A){return(A=A||{}).gzip=!0,E(D,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,a){var l=n("./zlib/inflate"),c=n("./utils/common"),f=n("./utils/strings"),d=n("./zlib/constants"),h=n("./zlib/messages"),m=n("./zlib/zstream"),g=n("./zlib/gzheader"),_=Object.prototype.toString;function x(y){if(!(this instanceof x))return new x(y);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},y||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||y&&y.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var D=l.inflateInit2(this.strm,E.windowBits);if(D!==d.Z_OK)throw new Error(h[D]);this.header=new g,l.inflateGetHeader(this.strm,this.header)}function w(y,E){var D=new x(E);if(D.push(y,!0),D.err)throw D.msg||h[D.err];return D.result}x.prototype.push=function(y,E){var D,A,N,F,k,T,R=this.strm,j=this.options.chunkSize,O=this.options.dictionary,G=!1;if(this.ended)return!1;A=E===~~E?E:E===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof y=="string"?R.input=f.binstring2buf(y):_.call(y)==="[object ArrayBuffer]"?R.input=new Uint8Array(y):R.input=y,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new c.Buf8(j),R.next_out=0,R.avail_out=j),(D=l.inflate(R,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&O&&(T=typeof O=="string"?f.string2buf(O):_.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,D=l.inflateSetDictionary(this.strm,T)),D===d.Z_BUF_ERROR&&G===!0&&(D=d.Z_OK,G=!1),D!==d.Z_STREAM_END&&D!==d.Z_OK)return this.onEnd(D),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&D!==d.Z_STREAM_END&&(R.avail_in!==0||A!==d.Z_FINISH&&A!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=f.utf8border(R.output,R.next_out),F=R.next_out-N,k=f.buf2string(R.output,N),R.next_out=F,R.avail_out=j-F,F&&c.arraySet(R.output,R.output,N,F,0),this.onData(k)):this.onData(c.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(G=!0)}while((0<R.avail_in||R.avail_out===0)&&D!==d.Z_STREAM_END);return D===d.Z_STREAM_END&&(A=d.Z_FINISH),A===d.Z_FINISH?(D=l.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===d.Z_OK):A!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(R.avail_out=0))},x.prototype.onData=function(y){this.chunks.push(y)},x.prototype.onEnd=function(y){y===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Inflate=x,a.inflate=w,a.inflateRaw=function(y,E){return(E=E||{}).raw=!0,w(y,E)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(d){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var g in m)m.hasOwnProperty(g)&&(d[g]=m[g])}}return d},a.shrinkBuf=function(d,h){return d.length===h?d:d.subarray?d.subarray(0,h):(d.length=h,d)};var c={arraySet:function(d,h,m,g,_){if(h.subarray&&d.subarray)d.set(h.subarray(m,m+g),_);else for(var x=0;x<g;x++)d[_+x]=h[m+x]},flattenChunks:function(d){var h,m,g,_,x,w;for(h=g=0,m=d.length;h<m;h++)g+=d[h].length;for(w=new Uint8Array(g),h=_=0,m=d.length;h<m;h++)x=d[h],w.set(x,_),_+=x.length;return w}},f={arraySet:function(d,h,m,g,_){for(var x=0;x<g;x++)d[_+x]=h[m+x]},flattenChunks:function(d){return[].concat.apply([],d)}};a.setTyped=function(d){d?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,c)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,f))},a.setTyped(l)},{}],42:[function(n,i,a){var l=n("./common"),c=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var d=new l.Buf8(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(g,_){if(_<65537&&(g.subarray&&f||!g.subarray&&c))return String.fromCharCode.apply(null,l.shrinkBuf(g,_));for(var x="",w=0;w<_;w++)x+=String.fromCharCode(g[w]);return x}d[254]=d[254]=1,a.string2buf=function(g){var _,x,w,y,E,D=g.length,A=0;for(y=0;y<D;y++)(64512&(x=g.charCodeAt(y)))==55296&&y+1<D&&(64512&(w=g.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),y++),A+=x<128?1:x<2048?2:x<65536?3:4;for(_=new l.Buf8(A),y=E=0;E<A;y++)(64512&(x=g.charCodeAt(y)))==55296&&y+1<D&&(64512&(w=g.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),y++),x<128?_[E++]=x:(x<2048?_[E++]=192|x>>>6:(x<65536?_[E++]=224|x>>>12:(_[E++]=240|x>>>18,_[E++]=128|x>>>12&63),_[E++]=128|x>>>6&63),_[E++]=128|63&x);return _},a.buf2binstring=function(g){return m(g,g.length)},a.binstring2buf=function(g){for(var _=new l.Buf8(g.length),x=0,w=_.length;x<w;x++)_[x]=g.charCodeAt(x);return _},a.buf2string=function(g,_){var x,w,y,E,D=_||g.length,A=new Array(2*D);for(x=w=0;x<D;)if((y=g[x++])<128)A[w++]=y;else if(4<(E=d[y]))A[w++]=65533,x+=E-1;else{for(y&=E===2?31:E===3?15:7;1<E&&x<D;)y=y<<6|63&g[x++],E--;1<E?A[w++]=65533:y<65536?A[w++]=y:(y-=65536,A[w++]=55296|y>>10&1023,A[w++]=56320|1023&y)}return m(A,w)},a.utf8border=function(g,_){var x;for((_=_||g.length)>g.length&&(_=g.length),x=_-1;0<=x&&(192&g[x])==128;)x--;return x<0||x===0?_:x+d[g[x]]>_?x:_}},{"./common":41}],43:[function(n,i,a){i.exports=function(l,c,f,d){for(var h=65535&l|0,m=l>>>16&65535|0,g=0;f!==0;){for(f-=g=2e3<f?2e3:f;m=m+(h=h+c[d++]|0)|0,--g;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(n,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,a){var l=(function(){for(var c,f=[],d=0;d<256;d++){c=d;for(var h=0;h<8;h++)c=1&c?3988292384^c>>>1:c>>>1;f[d]=c}return f})();i.exports=function(c,f,d,h){var m=l,g=h+d;c^=-1;for(var _=h;_<g;_++)c=c>>>8^m[255&(c^f[_])];return-1^c}},{}],46:[function(n,i,a){var l,c=n("../utils/common"),f=n("./trees"),d=n("./adler32"),h=n("./crc32"),m=n("./messages"),g=0,_=4,x=0,w=-2,y=-1,E=4,D=2,A=8,N=9,F=286,k=30,T=19,R=2*F+1,j=15,O=3,G=258,U=G+O+1,I=42,W=113,B=1,re=2,K=3,ee=4;function V(H,Te){return H.msg=m[Te],Te}function Q(H){return(H<<1)-(4<H?9:0)}function $(H){for(var Te=H.length;0<=--Te;)H[Te]=0}function q(H){var Te=H.state,Se=Te.pending;Se>H.avail_out&&(Se=H.avail_out),Se!==0&&(c.arraySet(H.output,Te.pending_buf,Te.pending_out,Se,H.next_out),H.next_out+=Se,Te.pending_out+=Se,H.total_out+=Se,H.avail_out-=Se,Te.pending-=Se,Te.pending===0&&(Te.pending_out=0))}function ne(H,Te){f._tr_flush_block(H,0<=H.block_start?H.block_start:-1,H.strstart-H.block_start,Te),H.block_start=H.strstart,q(H.strm)}function se(H,Te){H.pending_buf[H.pending++]=Te}function ce(H,Te){H.pending_buf[H.pending++]=Te>>>8&255,H.pending_buf[H.pending++]=255&Te}function pe(H,Te){var Se,ae,ie=H.max_chain_length,ue=H.strstart,be=H.prev_length,De=H.nice_match,ge=H.strstart>H.w_size-U?H.strstart-(H.w_size-U):0,X=H.window,oe=H.w_mask,le=H.prev,me=H.strstart+G,ye=X[ue+be-1],de=X[ue+be];H.prev_length>=H.good_match&&(ie>>=2),De>H.lookahead&&(De=H.lookahead);do if(X[(Se=Te)+be]===de&&X[Se+be-1]===ye&&X[Se]===X[ue]&&X[++Se]===X[ue+1]){ue+=2,Se++;do;while(X[++ue]===X[++Se]&&X[++ue]===X[++Se]&&X[++ue]===X[++Se]&&X[++ue]===X[++Se]&&X[++ue]===X[++Se]&&X[++ue]===X[++Se]&&X[++ue]===X[++Se]&&X[++ue]===X[++Se]&&ue<me);if(ae=G-(me-ue),ue=me-G,be<ae){if(H.match_start=Te,De<=(be=ae))break;ye=X[ue+be-1],de=X[ue+be]}}while((Te=le[Te&oe])>ge&&--ie!=0);return be<=H.lookahead?be:H.lookahead}function _e(H){var Te,Se,ae,ie,ue,be,De,ge,X,oe,le=H.w_size;do{if(ie=H.window_size-H.lookahead-H.strstart,H.strstart>=le+(le-U)){for(c.arraySet(H.window,H.window,le,le,0),H.match_start-=le,H.strstart-=le,H.block_start-=le,Te=Se=H.hash_size;ae=H.head[--Te],H.head[Te]=le<=ae?ae-le:0,--Se;);for(Te=Se=le;ae=H.prev[--Te],H.prev[Te]=le<=ae?ae-le:0,--Se;);ie+=le}if(H.strm.avail_in===0)break;if(be=H.strm,De=H.window,ge=H.strstart+H.lookahead,X=ie,oe=void 0,oe=be.avail_in,X<oe&&(oe=X),Se=oe===0?0:(be.avail_in-=oe,c.arraySet(De,be.input,be.next_in,oe,ge),be.state.wrap===1?be.adler=d(be.adler,De,oe,ge):be.state.wrap===2&&(be.adler=h(be.adler,De,oe,ge)),be.next_in+=oe,be.total_in+=oe,oe),H.lookahead+=Se,H.lookahead+H.insert>=O)for(ue=H.strstart-H.insert,H.ins_h=H.window[ue],H.ins_h=(H.ins_h<<H.hash_shift^H.window[ue+1])&H.hash_mask;H.insert&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[ue+O-1])&H.hash_mask,H.prev[ue&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=ue,ue++,H.insert--,!(H.lookahead+H.insert<O)););}while(H.lookahead<U&&H.strm.avail_in!==0)}function ze(H,Te){for(var Se,ae;;){if(H.lookahead<U){if(_e(H),H.lookahead<U&&Te===g)return B;if(H.lookahead===0)break}if(Se=0,H.lookahead>=O&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,Se=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),Se!==0&&H.strstart-Se<=H.w_size-U&&(H.match_length=pe(H,Se)),H.match_length>=O)if(ae=f._tr_tally(H,H.strstart-H.match_start,H.match_length-O),H.lookahead-=H.match_length,H.match_length<=H.max_lazy_match&&H.lookahead>=O){for(H.match_length--;H.strstart++,H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,Se=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart,--H.match_length!=0;);H.strstart++}else H.strstart+=H.match_length,H.match_length=0,H.ins_h=H.window[H.strstart],H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+1])&H.hash_mask;else ae=f._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++;if(ae&&(ne(H,!1),H.strm.avail_out===0))return B}return H.insert=H.strstart<O-1?H.strstart:O-1,Te===_?(ne(H,!0),H.strm.avail_out===0?K:ee):H.last_lit&&(ne(H,!1),H.strm.avail_out===0)?B:re}function ke(H,Te){for(var Se,ae,ie;;){if(H.lookahead<U){if(_e(H),H.lookahead<U&&Te===g)return B;if(H.lookahead===0)break}if(Se=0,H.lookahead>=O&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,Se=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),H.prev_length=H.match_length,H.prev_match=H.match_start,H.match_length=O-1,Se!==0&&H.prev_length<H.max_lazy_match&&H.strstart-Se<=H.w_size-U&&(H.match_length=pe(H,Se),H.match_length<=5&&(H.strategy===1||H.match_length===O&&4096<H.strstart-H.match_start)&&(H.match_length=O-1)),H.prev_length>=O&&H.match_length<=H.prev_length){for(ie=H.strstart+H.lookahead-O,ae=f._tr_tally(H,H.strstart-1-H.prev_match,H.prev_length-O),H.lookahead-=H.prev_length-1,H.prev_length-=2;++H.strstart<=ie&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,Se=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),--H.prev_length!=0;);if(H.match_available=0,H.match_length=O-1,H.strstart++,ae&&(ne(H,!1),H.strm.avail_out===0))return B}else if(H.match_available){if((ae=f._tr_tally(H,0,H.window[H.strstart-1]))&&ne(H,!1),H.strstart++,H.lookahead--,H.strm.avail_out===0)return B}else H.match_available=1,H.strstart++,H.lookahead--}return H.match_available&&(ae=f._tr_tally(H,0,H.window[H.strstart-1]),H.match_available=0),H.insert=H.strstart<O-1?H.strstart:O-1,Te===_?(ne(H,!0),H.strm.avail_out===0?K:ee):H.last_lit&&(ne(H,!1),H.strm.avail_out===0)?B:re}function Ie(H,Te,Se,ae,ie){this.good_length=H,this.max_lazy=Te,this.nice_length=Se,this.max_chain=ae,this.func=ie}function Ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*R),this.dyn_dtree=new c.Buf16(2*(2*k+1)),this.bl_tree=new c.Buf16(2*(2*T+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(j+1),this.heap=new c.Buf16(2*F+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*F+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Xe(H){var Te;return H&&H.state?(H.total_in=H.total_out=0,H.data_type=D,(Te=H.state).pending=0,Te.pending_out=0,Te.wrap<0&&(Te.wrap=-Te.wrap),Te.status=Te.wrap?I:W,H.adler=Te.wrap===2?0:1,Te.last_flush=g,f._tr_init(Te),x):V(H,w)}function $e(H){var Te=Xe(H);return Te===x&&(function(Se){Se.window_size=2*Se.w_size,$(Se.head),Se.max_lazy_match=l[Se.level].max_lazy,Se.good_match=l[Se.level].good_length,Se.nice_match=l[Se.level].nice_length,Se.max_chain_length=l[Se.level].max_chain,Se.strstart=0,Se.block_start=0,Se.lookahead=0,Se.insert=0,Se.match_length=Se.prev_length=O-1,Se.match_available=0,Se.ins_h=0})(H.state),Te}function Ke(H,Te,Se,ae,ie,ue){if(!H)return w;var be=1;if(Te===y&&(Te=6),ae<0?(be=0,ae=-ae):15<ae&&(be=2,ae-=16),ie<1||N<ie||Se!==A||ae<8||15<ae||Te<0||9<Te||ue<0||E<ue)return V(H,w);ae===8&&(ae=9);var De=new Ze;return(H.state=De).strm=H,De.wrap=be,De.gzhead=null,De.w_bits=ae,De.w_size=1<<De.w_bits,De.w_mask=De.w_size-1,De.hash_bits=ie+7,De.hash_size=1<<De.hash_bits,De.hash_mask=De.hash_size-1,De.hash_shift=~~((De.hash_bits+O-1)/O),De.window=new c.Buf8(2*De.w_size),De.head=new c.Buf16(De.hash_size),De.prev=new c.Buf16(De.w_size),De.lit_bufsize=1<<ie+6,De.pending_buf_size=4*De.lit_bufsize,De.pending_buf=new c.Buf8(De.pending_buf_size),De.d_buf=1*De.lit_bufsize,De.l_buf=3*De.lit_bufsize,De.level=Te,De.strategy=ue,De.method=Se,$e(H)}l=[new Ie(0,0,0,0,function(H,Te){var Se=65535;for(Se>H.pending_buf_size-5&&(Se=H.pending_buf_size-5);;){if(H.lookahead<=1){if(_e(H),H.lookahead===0&&Te===g)return B;if(H.lookahead===0)break}H.strstart+=H.lookahead,H.lookahead=0;var ae=H.block_start+Se;if((H.strstart===0||H.strstart>=ae)&&(H.lookahead=H.strstart-ae,H.strstart=ae,ne(H,!1),H.strm.avail_out===0)||H.strstart-H.block_start>=H.w_size-U&&(ne(H,!1),H.strm.avail_out===0))return B}return H.insert=0,Te===_?(ne(H,!0),H.strm.avail_out===0?K:ee):(H.strstart>H.block_start&&(ne(H,!1),H.strm.avail_out),B)}),new Ie(4,4,8,4,ze),new Ie(4,5,16,8,ze),new Ie(4,6,32,32,ze),new Ie(4,4,16,16,ke),new Ie(8,16,32,32,ke),new Ie(8,16,128,128,ke),new Ie(8,32,128,256,ke),new Ie(32,128,258,1024,ke),new Ie(32,258,258,4096,ke)],a.deflateInit=function(H,Te){return Ke(H,Te,A,15,8,0)},a.deflateInit2=Ke,a.deflateReset=$e,a.deflateResetKeep=Xe,a.deflateSetHeader=function(H,Te){return H&&H.state?H.state.wrap!==2?w:(H.state.gzhead=Te,x):w},a.deflate=function(H,Te){var Se,ae,ie,ue;if(!H||!H.state||5<Te||Te<0)return H?V(H,w):w;if(ae=H.state,!H.output||!H.input&&H.avail_in!==0||ae.status===666&&Te!==_)return V(H,H.avail_out===0?-5:w);if(ae.strm=H,Se=ae.last_flush,ae.last_flush=Te,ae.status===I)if(ae.wrap===2)H.adler=0,se(ae,31),se(ae,139),se(ae,8),ae.gzhead?(se(ae,(ae.gzhead.text?1:0)+(ae.gzhead.hcrc?2:0)+(ae.gzhead.extra?4:0)+(ae.gzhead.name?8:0)+(ae.gzhead.comment?16:0)),se(ae,255&ae.gzhead.time),se(ae,ae.gzhead.time>>8&255),se(ae,ae.gzhead.time>>16&255),se(ae,ae.gzhead.time>>24&255),se(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),se(ae,255&ae.gzhead.os),ae.gzhead.extra&&ae.gzhead.extra.length&&(se(ae,255&ae.gzhead.extra.length),se(ae,ae.gzhead.extra.length>>8&255)),ae.gzhead.hcrc&&(H.adler=h(H.adler,ae.pending_buf,ae.pending,0)),ae.gzindex=0,ae.status=69):(se(ae,0),se(ae,0),se(ae,0),se(ae,0),se(ae,0),se(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),se(ae,3),ae.status=W);else{var be=A+(ae.w_bits-8<<4)<<8;be|=(2<=ae.strategy||ae.level<2?0:ae.level<6?1:ae.level===6?2:3)<<6,ae.strstart!==0&&(be|=32),be+=31-be%31,ae.status=W,ce(ae,be),ae.strstart!==0&&(ce(ae,H.adler>>>16),ce(ae,65535&H.adler)),H.adler=1}if(ae.status===69)if(ae.gzhead.extra){for(ie=ae.pending;ae.gzindex<(65535&ae.gzhead.extra.length)&&(ae.pending!==ae.pending_buf_size||(ae.gzhead.hcrc&&ae.pending>ie&&(H.adler=h(H.adler,ae.pending_buf,ae.pending-ie,ie)),q(H),ie=ae.pending,ae.pending!==ae.pending_buf_size));)se(ae,255&ae.gzhead.extra[ae.gzindex]),ae.gzindex++;ae.gzhead.hcrc&&ae.pending>ie&&(H.adler=h(H.adler,ae.pending_buf,ae.pending-ie,ie)),ae.gzindex===ae.gzhead.extra.length&&(ae.gzindex=0,ae.status=73)}else ae.status=73;if(ae.status===73)if(ae.gzhead.name){ie=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ie&&(H.adler=h(H.adler,ae.pending_buf,ae.pending-ie,ie)),q(H),ie=ae.pending,ae.pending===ae.pending_buf_size)){ue=1;break}ue=ae.gzindex<ae.gzhead.name.length?255&ae.gzhead.name.charCodeAt(ae.gzindex++):0,se(ae,ue)}while(ue!==0);ae.gzhead.hcrc&&ae.pending>ie&&(H.adler=h(H.adler,ae.pending_buf,ae.pending-ie,ie)),ue===0&&(ae.gzindex=0,ae.status=91)}else ae.status=91;if(ae.status===91)if(ae.gzhead.comment){ie=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ie&&(H.adler=h(H.adler,ae.pending_buf,ae.pending-ie,ie)),q(H),ie=ae.pending,ae.pending===ae.pending_buf_size)){ue=1;break}ue=ae.gzindex<ae.gzhead.comment.length?255&ae.gzhead.comment.charCodeAt(ae.gzindex++):0,se(ae,ue)}while(ue!==0);ae.gzhead.hcrc&&ae.pending>ie&&(H.adler=h(H.adler,ae.pending_buf,ae.pending-ie,ie)),ue===0&&(ae.status=103)}else ae.status=103;if(ae.status===103&&(ae.gzhead.hcrc?(ae.pending+2>ae.pending_buf_size&&q(H),ae.pending+2<=ae.pending_buf_size&&(se(ae,255&H.adler),se(ae,H.adler>>8&255),H.adler=0,ae.status=W)):ae.status=W),ae.pending!==0){if(q(H),H.avail_out===0)return ae.last_flush=-1,x}else if(H.avail_in===0&&Q(Te)<=Q(Se)&&Te!==_)return V(H,-5);if(ae.status===666&&H.avail_in!==0)return V(H,-5);if(H.avail_in!==0||ae.lookahead!==0||Te!==g&&ae.status!==666){var De=ae.strategy===2?(function(ge,X){for(var oe;;){if(ge.lookahead===0&&(_e(ge),ge.lookahead===0)){if(X===g)return B;break}if(ge.match_length=0,oe=f._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++,oe&&(ne(ge,!1),ge.strm.avail_out===0))return B}return ge.insert=0,X===_?(ne(ge,!0),ge.strm.avail_out===0?K:ee):ge.last_lit&&(ne(ge,!1),ge.strm.avail_out===0)?B:re})(ae,Te):ae.strategy===3?(function(ge,X){for(var oe,le,me,ye,de=ge.window;;){if(ge.lookahead<=G){if(_e(ge),ge.lookahead<=G&&X===g)return B;if(ge.lookahead===0)break}if(ge.match_length=0,ge.lookahead>=O&&0<ge.strstart&&(le=de[me=ge.strstart-1])===de[++me]&&le===de[++me]&&le===de[++me]){ye=ge.strstart+G;do;while(le===de[++me]&&le===de[++me]&&le===de[++me]&&le===de[++me]&&le===de[++me]&&le===de[++me]&&le===de[++me]&&le===de[++me]&&me<ye);ge.match_length=G-(ye-me),ge.match_length>ge.lookahead&&(ge.match_length=ge.lookahead)}if(ge.match_length>=O?(oe=f._tr_tally(ge,1,ge.match_length-O),ge.lookahead-=ge.match_length,ge.strstart+=ge.match_length,ge.match_length=0):(oe=f._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++),oe&&(ne(ge,!1),ge.strm.avail_out===0))return B}return ge.insert=0,X===_?(ne(ge,!0),ge.strm.avail_out===0?K:ee):ge.last_lit&&(ne(ge,!1),ge.strm.avail_out===0)?B:re})(ae,Te):l[ae.level].func(ae,Te);if(De!==K&&De!==ee||(ae.status=666),De===B||De===K)return H.avail_out===0&&(ae.last_flush=-1),x;if(De===re&&(Te===1?f._tr_align(ae):Te!==5&&(f._tr_stored_block(ae,0,0,!1),Te===3&&($(ae.head),ae.lookahead===0&&(ae.strstart=0,ae.block_start=0,ae.insert=0))),q(H),H.avail_out===0))return ae.last_flush=-1,x}return Te!==_?x:ae.wrap<=0?1:(ae.wrap===2?(se(ae,255&H.adler),se(ae,H.adler>>8&255),se(ae,H.adler>>16&255),se(ae,H.adler>>24&255),se(ae,255&H.total_in),se(ae,H.total_in>>8&255),se(ae,H.total_in>>16&255),se(ae,H.total_in>>24&255)):(ce(ae,H.adler>>>16),ce(ae,65535&H.adler)),q(H),0<ae.wrap&&(ae.wrap=-ae.wrap),ae.pending!==0?x:1)},a.deflateEnd=function(H){var Te;return H&&H.state?(Te=H.state.status)!==I&&Te!==69&&Te!==73&&Te!==91&&Te!==103&&Te!==W&&Te!==666?V(H,w):(H.state=null,Te===W?V(H,-3):x):w},a.deflateSetDictionary=function(H,Te){var Se,ae,ie,ue,be,De,ge,X,oe=Te.length;if(!H||!H.state||(ue=(Se=H.state).wrap)===2||ue===1&&Se.status!==I||Se.lookahead)return w;for(ue===1&&(H.adler=d(H.adler,Te,oe,0)),Se.wrap=0,oe>=Se.w_size&&(ue===0&&($(Se.head),Se.strstart=0,Se.block_start=0,Se.insert=0),X=new c.Buf8(Se.w_size),c.arraySet(X,Te,oe-Se.w_size,Se.w_size,0),Te=X,oe=Se.w_size),be=H.avail_in,De=H.next_in,ge=H.input,H.avail_in=oe,H.next_in=0,H.input=Te,_e(Se);Se.lookahead>=O;){for(ae=Se.strstart,ie=Se.lookahead-(O-1);Se.ins_h=(Se.ins_h<<Se.hash_shift^Se.window[ae+O-1])&Se.hash_mask,Se.prev[ae&Se.w_mask]=Se.head[Se.ins_h],Se.head[Se.ins_h]=ae,ae++,--ie;);Se.strstart=ae,Se.lookahead=O-1,_e(Se)}return Se.strstart+=Se.lookahead,Se.block_start=Se.strstart,Se.insert=Se.lookahead,Se.lookahead=0,Se.match_length=Se.prev_length=O-1,Se.match_available=0,H.next_in=De,H.input=ge,H.avail_in=be,Se.wrap=ue,x},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,a){i.exports=function(l,c){var f,d,h,m,g,_,x,w,y,E,D,A,N,F,k,T,R,j,O,G,U,I,W,B,re;f=l.state,d=l.next_in,B=l.input,h=d+(l.avail_in-5),m=l.next_out,re=l.output,g=m-(c-l.avail_out),_=m+(l.avail_out-257),x=f.dmax,w=f.wsize,y=f.whave,E=f.wnext,D=f.window,A=f.hold,N=f.bits,F=f.lencode,k=f.distcode,T=(1<<f.lenbits)-1,R=(1<<f.distbits)-1;e:do{N<15&&(A+=B[d++]<<N,N+=8,A+=B[d++]<<N,N+=8),j=F[A&T];t:for(;;){if(A>>>=O=j>>>24,N-=O,(O=j>>>16&255)===0)re[m++]=65535&j;else{if(!(16&O)){if((64&O)==0){j=F[(65535&j)+(A&(1<<O)-1)];continue t}if(32&O){f.mode=12;break e}l.msg="invalid literal/length code",f.mode=30;break e}G=65535&j,(O&=15)&&(N<O&&(A+=B[d++]<<N,N+=8),G+=A&(1<<O)-1,A>>>=O,N-=O),N<15&&(A+=B[d++]<<N,N+=8,A+=B[d++]<<N,N+=8),j=k[A&R];n:for(;;){if(A>>>=O=j>>>24,N-=O,!(16&(O=j>>>16&255))){if((64&O)==0){j=k[(65535&j)+(A&(1<<O)-1)];continue n}l.msg="invalid distance code",f.mode=30;break e}if(U=65535&j,N<(O&=15)&&(A+=B[d++]<<N,(N+=8)<O&&(A+=B[d++]<<N,N+=8)),x<(U+=A&(1<<O)-1)){l.msg="invalid distance too far back",f.mode=30;break e}if(A>>>=O,N-=O,(O=m-g)<U){if(y<(O=U-O)&&f.sane){l.msg="invalid distance too far back",f.mode=30;break e}if(W=D,(I=0)===E){if(I+=w-O,O<G){for(G-=O;re[m++]=D[I++],--O;);I=m-U,W=re}}else if(E<O){if(I+=w+E-O,(O-=E)<G){for(G-=O;re[m++]=D[I++],--O;);if(I=0,E<G){for(G-=O=E;re[m++]=D[I++],--O;);I=m-U,W=re}}}else if(I+=E-O,O<G){for(G-=O;re[m++]=D[I++],--O;);I=m-U,W=re}for(;2<G;)re[m++]=W[I++],re[m++]=W[I++],re[m++]=W[I++],G-=3;G&&(re[m++]=W[I++],1<G&&(re[m++]=W[I++]))}else{for(I=m-U;re[m++]=re[I++],re[m++]=re[I++],re[m++]=re[I++],2<(G-=3););G&&(re[m++]=re[I++],1<G&&(re[m++]=re[I++]))}break}}break}}while(d<h&&m<_);d-=G=N>>3,A&=(1<<(N-=G<<3))-1,l.next_in=d,l.next_out=m,l.avail_in=d<h?h-d+5:5-(d-h),l.avail_out=m<_?_-m+257:257-(m-_),f.hold=A,f.bits=N}},{}],49:[function(n,i,a){var l=n("../utils/common"),c=n("./adler32"),f=n("./crc32"),d=n("./inffast"),h=n("./inftrees"),m=1,g=2,_=0,x=-2,w=1,y=852,E=592;function D(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(I){var W;return I&&I.state?(W=I.state,I.total_in=I.total_out=W.total=0,I.msg="",W.wrap&&(I.adler=1&W.wrap),W.mode=w,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new l.Buf32(y),W.distcode=W.distdyn=new l.Buf32(E),W.sane=1,W.back=-1,_):x}function F(I){var W;return I&&I.state?((W=I.state).wsize=0,W.whave=0,W.wnext=0,N(I)):x}function k(I,W){var B,re;return I&&I.state?(re=I.state,W<0?(B=0,W=-W):(B=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?x:(re.window!==null&&re.wbits!==W&&(re.window=null),re.wrap=B,re.wbits=W,F(I))):x}function T(I,W){var B,re;return I?(re=new A,(I.state=re).window=null,(B=k(I,W))!==_&&(I.state=null),B):x}var R,j,O=!0;function G(I){if(O){var W;for(R=new l.Buf32(512),j=new l.Buf32(32),W=0;W<144;)I.lens[W++]=8;for(;W<256;)I.lens[W++]=9;for(;W<280;)I.lens[W++]=7;for(;W<288;)I.lens[W++]=8;for(h(m,I.lens,0,288,R,0,I.work,{bits:9}),W=0;W<32;)I.lens[W++]=5;h(g,I.lens,0,32,j,0,I.work,{bits:5}),O=!1}I.lencode=R,I.lenbits=9,I.distcode=j,I.distbits=5}function U(I,W,B,re){var K,ee=I.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new l.Buf8(ee.wsize)),re>=ee.wsize?(l.arraySet(ee.window,W,B-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(re<(K=ee.wsize-ee.wnext)&&(K=re),l.arraySet(ee.window,W,B-re,K,ee.wnext),(re-=K)?(l.arraySet(ee.window,W,B-re,re,0),ee.wnext=re,ee.whave=ee.wsize):(ee.wnext+=K,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=K))),0}a.inflateReset=F,a.inflateReset2=k,a.inflateResetKeep=N,a.inflateInit=function(I){return T(I,15)},a.inflateInit2=T,a.inflate=function(I,W){var B,re,K,ee,V,Q,$,q,ne,se,ce,pe,_e,ze,ke,Ie,Ze,Xe,$e,Ke,H,Te,Se,ae,ie=0,ue=new l.Buf8(4),be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return x;(B=I.state).mode===12&&(B.mode=13),V=I.next_out,K=I.output,$=I.avail_out,ee=I.next_in,re=I.input,Q=I.avail_in,q=B.hold,ne=B.bits,se=Q,ce=$,Te=_;e:for(;;)switch(B.mode){case w:if(B.wrap===0){B.mode=13;break}for(;ne<16;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(2&B.wrap&&q===35615){ue[B.check=0]=255&q,ue[1]=q>>>8&255,B.check=f(B.check,ue,2,0),ne=q=0,B.mode=2;break}if(B.flags=0,B.head&&(B.head.done=!1),!(1&B.wrap)||(((255&q)<<8)+(q>>8))%31){I.msg="incorrect header check",B.mode=30;break}if((15&q)!=8){I.msg="unknown compression method",B.mode=30;break}if(ne-=4,H=8+(15&(q>>>=4)),B.wbits===0)B.wbits=H;else if(H>B.wbits){I.msg="invalid window size",B.mode=30;break}B.dmax=1<<H,I.adler=B.check=1,B.mode=512&q?10:12,ne=q=0;break;case 2:for(;ne<16;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(B.flags=q,(255&B.flags)!=8){I.msg="unknown compression method",B.mode=30;break}if(57344&B.flags){I.msg="unknown header flags set",B.mode=30;break}B.head&&(B.head.text=q>>8&1),512&B.flags&&(ue[0]=255&q,ue[1]=q>>>8&255,B.check=f(B.check,ue,2,0)),ne=q=0,B.mode=3;case 3:for(;ne<32;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}B.head&&(B.head.time=q),512&B.flags&&(ue[0]=255&q,ue[1]=q>>>8&255,ue[2]=q>>>16&255,ue[3]=q>>>24&255,B.check=f(B.check,ue,4,0)),ne=q=0,B.mode=4;case 4:for(;ne<16;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}B.head&&(B.head.xflags=255&q,B.head.os=q>>8),512&B.flags&&(ue[0]=255&q,ue[1]=q>>>8&255,B.check=f(B.check,ue,2,0)),ne=q=0,B.mode=5;case 5:if(1024&B.flags){for(;ne<16;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}B.length=q,B.head&&(B.head.extra_len=q),512&B.flags&&(ue[0]=255&q,ue[1]=q>>>8&255,B.check=f(B.check,ue,2,0)),ne=q=0}else B.head&&(B.head.extra=null);B.mode=6;case 6:if(1024&B.flags&&(Q<(pe=B.length)&&(pe=Q),pe&&(B.head&&(H=B.head.extra_len-B.length,B.head.extra||(B.head.extra=new Array(B.head.extra_len)),l.arraySet(B.head.extra,re,ee,pe,H)),512&B.flags&&(B.check=f(B.check,re,pe,ee)),Q-=pe,ee+=pe,B.length-=pe),B.length))break e;B.length=0,B.mode=7;case 7:if(2048&B.flags){if(Q===0)break e;for(pe=0;H=re[ee+pe++],B.head&&H&&B.length<65536&&(B.head.name+=String.fromCharCode(H)),H&&pe<Q;);if(512&B.flags&&(B.check=f(B.check,re,pe,ee)),Q-=pe,ee+=pe,H)break e}else B.head&&(B.head.name=null);B.length=0,B.mode=8;case 8:if(4096&B.flags){if(Q===0)break e;for(pe=0;H=re[ee+pe++],B.head&&H&&B.length<65536&&(B.head.comment+=String.fromCharCode(H)),H&&pe<Q;);if(512&B.flags&&(B.check=f(B.check,re,pe,ee)),Q-=pe,ee+=pe,H)break e}else B.head&&(B.head.comment=null);B.mode=9;case 9:if(512&B.flags){for(;ne<16;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(q!==(65535&B.check)){I.msg="header crc mismatch",B.mode=30;break}ne=q=0}B.head&&(B.head.hcrc=B.flags>>9&1,B.head.done=!0),I.adler=B.check=0,B.mode=12;break;case 10:for(;ne<32;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}I.adler=B.check=D(q),ne=q=0,B.mode=11;case 11:if(B.havedict===0)return I.next_out=V,I.avail_out=$,I.next_in=ee,I.avail_in=Q,B.hold=q,B.bits=ne,2;I.adler=B.check=1,B.mode=12;case 12:if(W===5||W===6)break e;case 13:if(B.last){q>>>=7&ne,ne-=7&ne,B.mode=27;break}for(;ne<3;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}switch(B.last=1&q,ne-=1,3&(q>>>=1)){case 0:B.mode=14;break;case 1:if(G(B),B.mode=20,W!==6)break;q>>>=2,ne-=2;break e;case 2:B.mode=17;break;case 3:I.msg="invalid block type",B.mode=30}q>>>=2,ne-=2;break;case 14:for(q>>>=7&ne,ne-=7&ne;ne<32;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if((65535&q)!=(q>>>16^65535)){I.msg="invalid stored block lengths",B.mode=30;break}if(B.length=65535&q,ne=q=0,B.mode=15,W===6)break e;case 15:B.mode=16;case 16:if(pe=B.length){if(Q<pe&&(pe=Q),$<pe&&(pe=$),pe===0)break e;l.arraySet(K,re,ee,pe,V),Q-=pe,ee+=pe,$-=pe,V+=pe,B.length-=pe;break}B.mode=12;break;case 17:for(;ne<14;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(B.nlen=257+(31&q),q>>>=5,ne-=5,B.ndist=1+(31&q),q>>>=5,ne-=5,B.ncode=4+(15&q),q>>>=4,ne-=4,286<B.nlen||30<B.ndist){I.msg="too many length or distance symbols",B.mode=30;break}B.have=0,B.mode=18;case 18:for(;B.have<B.ncode;){for(;ne<3;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}B.lens[be[B.have++]]=7&q,q>>>=3,ne-=3}for(;B.have<19;)B.lens[be[B.have++]]=0;if(B.lencode=B.lendyn,B.lenbits=7,Se={bits:B.lenbits},Te=h(0,B.lens,0,19,B.lencode,0,B.work,Se),B.lenbits=Se.bits,Te){I.msg="invalid code lengths set",B.mode=30;break}B.have=0,B.mode=19;case 19:for(;B.have<B.nlen+B.ndist;){for(;Ie=(ie=B.lencode[q&(1<<B.lenbits)-1])>>>16&255,Ze=65535&ie,!((ke=ie>>>24)<=ne);){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(Ze<16)q>>>=ke,ne-=ke,B.lens[B.have++]=Ze;else{if(Ze===16){for(ae=ke+2;ne<ae;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(q>>>=ke,ne-=ke,B.have===0){I.msg="invalid bit length repeat",B.mode=30;break}H=B.lens[B.have-1],pe=3+(3&q),q>>>=2,ne-=2}else if(Ze===17){for(ae=ke+3;ne<ae;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}ne-=ke,H=0,pe=3+(7&(q>>>=ke)),q>>>=3,ne-=3}else{for(ae=ke+7;ne<ae;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}ne-=ke,H=0,pe=11+(127&(q>>>=ke)),q>>>=7,ne-=7}if(B.have+pe>B.nlen+B.ndist){I.msg="invalid bit length repeat",B.mode=30;break}for(;pe--;)B.lens[B.have++]=H}}if(B.mode===30)break;if(B.lens[256]===0){I.msg="invalid code -- missing end-of-block",B.mode=30;break}if(B.lenbits=9,Se={bits:B.lenbits},Te=h(m,B.lens,0,B.nlen,B.lencode,0,B.work,Se),B.lenbits=Se.bits,Te){I.msg="invalid literal/lengths set",B.mode=30;break}if(B.distbits=6,B.distcode=B.distdyn,Se={bits:B.distbits},Te=h(g,B.lens,B.nlen,B.ndist,B.distcode,0,B.work,Se),B.distbits=Se.bits,Te){I.msg="invalid distances set",B.mode=30;break}if(B.mode=20,W===6)break e;case 20:B.mode=21;case 21:if(6<=Q&&258<=$){I.next_out=V,I.avail_out=$,I.next_in=ee,I.avail_in=Q,B.hold=q,B.bits=ne,d(I,ce),V=I.next_out,K=I.output,$=I.avail_out,ee=I.next_in,re=I.input,Q=I.avail_in,q=B.hold,ne=B.bits,B.mode===12&&(B.back=-1);break}for(B.back=0;Ie=(ie=B.lencode[q&(1<<B.lenbits)-1])>>>16&255,Ze=65535&ie,!((ke=ie>>>24)<=ne);){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(Ie&&(240&Ie)==0){for(Xe=ke,$e=Ie,Ke=Ze;Ie=(ie=B.lencode[Ke+((q&(1<<Xe+$e)-1)>>Xe)])>>>16&255,Ze=65535&ie,!(Xe+(ke=ie>>>24)<=ne);){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}q>>>=Xe,ne-=Xe,B.back+=Xe}if(q>>>=ke,ne-=ke,B.back+=ke,B.length=Ze,Ie===0){B.mode=26;break}if(32&Ie){B.back=-1,B.mode=12;break}if(64&Ie){I.msg="invalid literal/length code",B.mode=30;break}B.extra=15&Ie,B.mode=22;case 22:if(B.extra){for(ae=B.extra;ne<ae;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}B.length+=q&(1<<B.extra)-1,q>>>=B.extra,ne-=B.extra,B.back+=B.extra}B.was=B.length,B.mode=23;case 23:for(;Ie=(ie=B.distcode[q&(1<<B.distbits)-1])>>>16&255,Ze=65535&ie,!((ke=ie>>>24)<=ne);){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if((240&Ie)==0){for(Xe=ke,$e=Ie,Ke=Ze;Ie=(ie=B.distcode[Ke+((q&(1<<Xe+$e)-1)>>Xe)])>>>16&255,Ze=65535&ie,!(Xe+(ke=ie>>>24)<=ne);){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}q>>>=Xe,ne-=Xe,B.back+=Xe}if(q>>>=ke,ne-=ke,B.back+=ke,64&Ie){I.msg="invalid distance code",B.mode=30;break}B.offset=Ze,B.extra=15&Ie,B.mode=24;case 24:if(B.extra){for(ae=B.extra;ne<ae;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}B.offset+=q&(1<<B.extra)-1,q>>>=B.extra,ne-=B.extra,B.back+=B.extra}if(B.offset>B.dmax){I.msg="invalid distance too far back",B.mode=30;break}B.mode=25;case 25:if($===0)break e;if(pe=ce-$,B.offset>pe){if((pe=B.offset-pe)>B.whave&&B.sane){I.msg="invalid distance too far back",B.mode=30;break}_e=pe>B.wnext?(pe-=B.wnext,B.wsize-pe):B.wnext-pe,pe>B.length&&(pe=B.length),ze=B.window}else ze=K,_e=V-B.offset,pe=B.length;for($<pe&&(pe=$),$-=pe,B.length-=pe;K[V++]=ze[_e++],--pe;);B.length===0&&(B.mode=21);break;case 26:if($===0)break e;K[V++]=B.length,$--,B.mode=21;break;case 27:if(B.wrap){for(;ne<32;){if(Q===0)break e;Q--,q|=re[ee++]<<ne,ne+=8}if(ce-=$,I.total_out+=ce,B.total+=ce,ce&&(I.adler=B.check=B.flags?f(B.check,K,ce,V-ce):c(B.check,K,ce,V-ce)),ce=$,(B.flags?q:D(q))!==B.check){I.msg="incorrect data check",B.mode=30;break}ne=q=0}B.mode=28;case 28:if(B.wrap&&B.flags){for(;ne<32;){if(Q===0)break e;Q--,q+=re[ee++]<<ne,ne+=8}if(q!==(4294967295&B.total)){I.msg="incorrect length check",B.mode=30;break}ne=q=0}B.mode=29;case 29:Te=1;break e;case 30:Te=-3;break e;case 31:return-4;case 32:default:return x}return I.next_out=V,I.avail_out=$,I.next_in=ee,I.avail_in=Q,B.hold=q,B.bits=ne,(B.wsize||ce!==I.avail_out&&B.mode<30&&(B.mode<27||W!==4))&&U(I,I.output,I.next_out,ce-I.avail_out)?(B.mode=31,-4):(se-=I.avail_in,ce-=I.avail_out,I.total_in+=se,I.total_out+=ce,B.total+=ce,B.wrap&&ce&&(I.adler=B.check=B.flags?f(B.check,K,ce,I.next_out-ce):c(B.check,K,ce,I.next_out-ce)),I.data_type=B.bits+(B.last?64:0)+(B.mode===12?128:0)+(B.mode===20||B.mode===15?256:0),(se==0&&ce===0||W===4)&&Te===_&&(Te=-5),Te)},a.inflateEnd=function(I){if(!I||!I.state)return x;var W=I.state;return W.window&&(W.window=null),I.state=null,_},a.inflateGetHeader=function(I,W){var B;return I&&I.state?(2&(B=I.state).wrap)==0?x:((B.head=W).done=!1,_):x},a.inflateSetDictionary=function(I,W){var B,re=W.length;return I&&I.state?(B=I.state).wrap!==0&&B.mode!==11?x:B.mode===11&&c(1,W,re,0)!==B.check?-3:U(I,W,re,re)?(B.mode=31,-4):(B.havedict=1,_):x},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,a){var l=n("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,g,_,x,w,y,E,D){var A,N,F,k,T,R,j,O,G,U=D.bits,I=0,W=0,B=0,re=0,K=0,ee=0,V=0,Q=0,$=0,q=0,ne=null,se=0,ce=new l.Buf16(16),pe=new l.Buf16(16),_e=null,ze=0;for(I=0;I<=15;I++)ce[I]=0;for(W=0;W<x;W++)ce[g[_+W]]++;for(K=U,re=15;1<=re&&ce[re]===0;re--);if(re<K&&(K=re),re===0)return w[y++]=20971520,w[y++]=20971520,D.bits=1,0;for(B=1;B<re&&ce[B]===0;B++);for(K<B&&(K=B),I=Q=1;I<=15;I++)if(Q<<=1,(Q-=ce[I])<0)return-1;if(0<Q&&(m===0||re!==1))return-1;for(pe[1]=0,I=1;I<15;I++)pe[I+1]=pe[I]+ce[I];for(W=0;W<x;W++)g[_+W]!==0&&(E[pe[g[_+W]]++]=W);if(R=m===0?(ne=_e=E,19):m===1?(ne=c,se-=257,_e=f,ze-=257,256):(ne=d,_e=h,-1),I=B,T=y,V=W=q=0,F=-1,k=($=1<<(ee=K))-1,m===1&&852<$||m===2&&592<$)return 1;for(;;){for(j=I-V,G=E[W]<R?(O=0,E[W]):E[W]>R?(O=_e[ze+E[W]],ne[se+E[W]]):(O=96,0),A=1<<I-V,B=N=1<<ee;w[T+(q>>V)+(N-=A)]=j<<24|O<<16|G|0,N!==0;);for(A=1<<I-1;q&A;)A>>=1;if(A!==0?(q&=A-1,q+=A):q=0,W++,--ce[I]==0){if(I===re)break;I=g[_+E[W]]}if(K<I&&(q&k)!==F){for(V===0&&(V=K),T+=B,Q=1<<(ee=I-V);ee+V<re&&!((Q-=ce[ee+V])<=0);)ee++,Q<<=1;if($+=1<<ee,m===1&&852<$||m===2&&592<$)return 1;w[F=q&k]=K<<24|ee<<16|T-y|0}}return q!==0&&(w[T+q]=I-V<<24|64<<16|0),D.bits=K,0}},{"../utils/common":41}],51:[function(n,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,a){var l=n("../utils/common"),c=0,f=1;function d(ie){for(var ue=ie.length;0<=--ue;)ie[ue]=0}var h=0,m=29,g=256,_=g+1+m,x=30,w=19,y=2*_+1,E=15,D=16,A=7,N=256,F=16,k=17,T=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(_+2));d(U);var I=new Array(2*x);d(I);var W=new Array(512);d(W);var B=new Array(256);d(B);var re=new Array(m);d(re);var K,ee,V,Q=new Array(x);function $(ie,ue,be,De,ge){this.static_tree=ie,this.extra_bits=ue,this.extra_base=be,this.elems=De,this.max_length=ge,this.has_stree=ie&&ie.length}function q(ie,ue){this.dyn_tree=ie,this.max_code=0,this.stat_desc=ue}function ne(ie){return ie<256?W[ie]:W[256+(ie>>>7)]}function se(ie,ue){ie.pending_buf[ie.pending++]=255&ue,ie.pending_buf[ie.pending++]=ue>>>8&255}function ce(ie,ue,be){ie.bi_valid>D-be?(ie.bi_buf|=ue<<ie.bi_valid&65535,se(ie,ie.bi_buf),ie.bi_buf=ue>>D-ie.bi_valid,ie.bi_valid+=be-D):(ie.bi_buf|=ue<<ie.bi_valid&65535,ie.bi_valid+=be)}function pe(ie,ue,be){ce(ie,be[2*ue],be[2*ue+1])}function _e(ie,ue){for(var be=0;be|=1&ie,ie>>>=1,be<<=1,0<--ue;);return be>>>1}function ze(ie,ue,be){var De,ge,X=new Array(E+1),oe=0;for(De=1;De<=E;De++)X[De]=oe=oe+be[De-1]<<1;for(ge=0;ge<=ue;ge++){var le=ie[2*ge+1];le!==0&&(ie[2*ge]=_e(X[le]++,le))}}function ke(ie){var ue;for(ue=0;ue<_;ue++)ie.dyn_ltree[2*ue]=0;for(ue=0;ue<x;ue++)ie.dyn_dtree[2*ue]=0;for(ue=0;ue<w;ue++)ie.bl_tree[2*ue]=0;ie.dyn_ltree[2*N]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Ie(ie){8<ie.bi_valid?se(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function Ze(ie,ue,be,De){var ge=2*ue,X=2*be;return ie[ge]<ie[X]||ie[ge]===ie[X]&&De[ue]<=De[be]}function Xe(ie,ue,be){for(var De=ie.heap[be],ge=be<<1;ge<=ie.heap_len&&(ge<ie.heap_len&&Ze(ue,ie.heap[ge+1],ie.heap[ge],ie.depth)&&ge++,!Ze(ue,De,ie.heap[ge],ie.depth));)ie.heap[be]=ie.heap[ge],be=ge,ge<<=1;ie.heap[be]=De}function $e(ie,ue,be){var De,ge,X,oe,le=0;if(ie.last_lit!==0)for(;De=ie.pending_buf[ie.d_buf+2*le]<<8|ie.pending_buf[ie.d_buf+2*le+1],ge=ie.pending_buf[ie.l_buf+le],le++,De===0?pe(ie,ge,ue):(pe(ie,(X=B[ge])+g+1,ue),(oe=R[X])!==0&&ce(ie,ge-=re[X],oe),pe(ie,X=ne(--De),be),(oe=j[X])!==0&&ce(ie,De-=Q[X],oe)),le<ie.last_lit;);pe(ie,N,ue)}function Ke(ie,ue){var be,De,ge,X=ue.dyn_tree,oe=ue.stat_desc.static_tree,le=ue.stat_desc.has_stree,me=ue.stat_desc.elems,ye=-1;for(ie.heap_len=0,ie.heap_max=y,be=0;be<me;be++)X[2*be]!==0?(ie.heap[++ie.heap_len]=ye=be,ie.depth[be]=0):X[2*be+1]=0;for(;ie.heap_len<2;)X[2*(ge=ie.heap[++ie.heap_len]=ye<2?++ye:0)]=1,ie.depth[ge]=0,ie.opt_len--,le&&(ie.static_len-=oe[2*ge+1]);for(ue.max_code=ye,be=ie.heap_len>>1;1<=be;be--)Xe(ie,X,be);for(ge=me;be=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],Xe(ie,X,1),De=ie.heap[1],ie.heap[--ie.heap_max]=be,ie.heap[--ie.heap_max]=De,X[2*ge]=X[2*be]+X[2*De],ie.depth[ge]=(ie.depth[be]>=ie.depth[De]?ie.depth[be]:ie.depth[De])+1,X[2*be+1]=X[2*De+1]=ge,ie.heap[1]=ge++,Xe(ie,X,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],(function(de,Be){var Fe,Re,je,We,ht,dt,Et=Be.dyn_tree,Nt=Be.max_code,Qt=Be.stat_desc.static_tree,tn=Be.stat_desc.has_stree,Sn=Be.stat_desc.extra_bits,Cn=Be.stat_desc.extra_base,Un=Be.stat_desc.max_length,ki=0;for(We=0;We<=E;We++)de.bl_count[We]=0;for(Et[2*de.heap[de.heap_max]+1]=0,Fe=de.heap_max+1;Fe<y;Fe++)Un<(We=Et[2*Et[2*(Re=de.heap[Fe])+1]+1]+1)&&(We=Un,ki++),Et[2*Re+1]=We,Nt<Re||(de.bl_count[We]++,ht=0,Cn<=Re&&(ht=Sn[Re-Cn]),dt=Et[2*Re],de.opt_len+=dt*(We+ht),tn&&(de.static_len+=dt*(Qt[2*Re+1]+ht)));if(ki!==0){do{for(We=Un-1;de.bl_count[We]===0;)We--;de.bl_count[We]--,de.bl_count[We+1]+=2,de.bl_count[Un]--,ki-=2}while(0<ki);for(We=Un;We!==0;We--)for(Re=de.bl_count[We];Re!==0;)Nt<(je=de.heap[--Fe])||(Et[2*je+1]!==We&&(de.opt_len+=(We-Et[2*je+1])*Et[2*je],Et[2*je+1]=We),Re--)}})(ie,ue),ze(X,ye,ie.bl_count)}function H(ie,ue,be){var De,ge,X=-1,oe=ue[1],le=0,me=7,ye=4;for(oe===0&&(me=138,ye=3),ue[2*(be+1)+1]=65535,De=0;De<=be;De++)ge=oe,oe=ue[2*(De+1)+1],++le<me&&ge===oe||(le<ye?ie.bl_tree[2*ge]+=le:ge!==0?(ge!==X&&ie.bl_tree[2*ge]++,ie.bl_tree[2*F]++):le<=10?ie.bl_tree[2*k]++:ie.bl_tree[2*T]++,X=ge,ye=(le=0)===oe?(me=138,3):ge===oe?(me=6,3):(me=7,4))}function Te(ie,ue,be){var De,ge,X=-1,oe=ue[1],le=0,me=7,ye=4;for(oe===0&&(me=138,ye=3),De=0;De<=be;De++)if(ge=oe,oe=ue[2*(De+1)+1],!(++le<me&&ge===oe)){if(le<ye)for(;pe(ie,ge,ie.bl_tree),--le!=0;);else ge!==0?(ge!==X&&(pe(ie,ge,ie.bl_tree),le--),pe(ie,F,ie.bl_tree),ce(ie,le-3,2)):le<=10?(pe(ie,k,ie.bl_tree),ce(ie,le-3,3)):(pe(ie,T,ie.bl_tree),ce(ie,le-11,7));X=ge,ye=(le=0)===oe?(me=138,3):ge===oe?(me=6,3):(me=7,4)}}d(Q);var Se=!1;function ae(ie,ue,be,De){ce(ie,(h<<1)+(De?1:0),3),(function(ge,X,oe,le){Ie(ge),se(ge,oe),se(ge,~oe),l.arraySet(ge.pending_buf,ge.window,X,oe,ge.pending),ge.pending+=oe})(ie,ue,be)}a._tr_init=function(ie){Se||((function(){var ue,be,De,ge,X,oe=new Array(E+1);for(ge=De=0;ge<m-1;ge++)for(re[ge]=De,ue=0;ue<1<<R[ge];ue++)B[De++]=ge;for(B[De-1]=ge,ge=X=0;ge<16;ge++)for(Q[ge]=X,ue=0;ue<1<<j[ge];ue++)W[X++]=ge;for(X>>=7;ge<x;ge++)for(Q[ge]=X<<7,ue=0;ue<1<<j[ge]-7;ue++)W[256+X++]=ge;for(be=0;be<=E;be++)oe[be]=0;for(ue=0;ue<=143;)U[2*ue+1]=8,ue++,oe[8]++;for(;ue<=255;)U[2*ue+1]=9,ue++,oe[9]++;for(;ue<=279;)U[2*ue+1]=7,ue++,oe[7]++;for(;ue<=287;)U[2*ue+1]=8,ue++,oe[8]++;for(ze(U,_+1,oe),ue=0;ue<x;ue++)I[2*ue+1]=5,I[2*ue]=_e(ue,5);K=new $(U,R,g+1,_,E),ee=new $(I,j,0,x,E),V=new $(new Array(0),O,0,w,A)})(),Se=!0),ie.l_desc=new q(ie.dyn_ltree,K),ie.d_desc=new q(ie.dyn_dtree,ee),ie.bl_desc=new q(ie.bl_tree,V),ie.bi_buf=0,ie.bi_valid=0,ke(ie)},a._tr_stored_block=ae,a._tr_flush_block=function(ie,ue,be,De){var ge,X,oe=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=(function(le){var me,ye=4093624447;for(me=0;me<=31;me++,ye>>>=1)if(1&ye&&le.dyn_ltree[2*me]!==0)return c;if(le.dyn_ltree[18]!==0||le.dyn_ltree[20]!==0||le.dyn_ltree[26]!==0)return f;for(me=32;me<g;me++)if(le.dyn_ltree[2*me]!==0)return f;return c})(ie)),Ke(ie,ie.l_desc),Ke(ie,ie.d_desc),oe=(function(le){var me;for(H(le,le.dyn_ltree,le.l_desc.max_code),H(le,le.dyn_dtree,le.d_desc.max_code),Ke(le,le.bl_desc),me=w-1;3<=me&&le.bl_tree[2*G[me]+1]===0;me--);return le.opt_len+=3*(me+1)+5+5+4,me})(ie),ge=ie.opt_len+3+7>>>3,(X=ie.static_len+3+7>>>3)<=ge&&(ge=X)):ge=X=be+5,be+4<=ge&&ue!==-1?ae(ie,ue,be,De):ie.strategy===4||X===ge?(ce(ie,2+(De?1:0),3),$e(ie,U,I)):(ce(ie,4+(De?1:0),3),(function(le,me,ye,de){var Be;for(ce(le,me-257,5),ce(le,ye-1,5),ce(le,de-4,4),Be=0;Be<de;Be++)ce(le,le.bl_tree[2*G[Be]+1],3);Te(le,le.dyn_ltree,me-1),Te(le,le.dyn_dtree,ye-1)})(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,oe+1),$e(ie,ie.dyn_ltree,ie.dyn_dtree)),ke(ie),De&&Ie(ie)},a._tr_tally=function(ie,ue,be){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=ue>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&ue,ie.pending_buf[ie.l_buf+ie.last_lit]=255&be,ie.last_lit++,ue===0?ie.dyn_ltree[2*be]++:(ie.matches++,ue--,ie.dyn_ltree[2*(B[be]+g+1)]++,ie.dyn_dtree[2*ne(ue)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){ce(ie,2,3),pe(ie,N,U),(function(ue){ue.bi_valid===16?(se(ue,ue.bi_buf),ue.bi_buf=0,ue.bi_valid=0):8<=ue.bi_valid&&(ue.pending_buf[ue.pending++]=255&ue.bi_buf,ue.bi_buf>>=8,ue.bi_valid-=8)})(ie)}},{"../utils/common":41}],53:[function(n,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,a){(function(l){(function(c,f){if(!c.setImmediate){var d,h,m,g,_=1,x={},w=!1,y=c.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(c);E=E&&E.setTimeout?E:c,d={}.toString.call(c.process)==="[object process]"?function(F){process.nextTick(function(){A(F)})}:(function(){if(c.postMessage&&!c.importScripts){var F=!0,k=c.onmessage;return c.onmessage=function(){F=!1},c.postMessage("","*"),c.onmessage=k,F}})()?(g="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",N,!1):c.attachEvent("onmessage",N),function(F){c.postMessage(g+F,"*")}):c.MessageChannel?((m=new MessageChannel).port1.onmessage=function(F){A(F.data)},function(F){m.port2.postMessage(F)}):y&&"onreadystatechange"in y.createElement("script")?(h=y.documentElement,function(F){var k=y.createElement("script");k.onreadystatechange=function(){A(F),k.onreadystatechange=null,h.removeChild(k),k=null},h.appendChild(k)}):function(F){setTimeout(A,0,F)},E.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var k=new Array(arguments.length-1),T=0;T<k.length;T++)k[T]=arguments[T+1];var R={callback:F,args:k};return x[_]=R,d(_),_++},E.clearImmediate=D}function D(F){delete x[F]}function A(F){if(w)setTimeout(A,0,F);else{var k=x[F];if(k){w=!0;try{(function(T){var R=T.callback,j=T.args;switch(j.length){case 0:R();break;case 1:R(j[0]);break;case 2:R(j[0],j[1]);break;case 3:R(j[0],j[1],j[2]);break;default:R.apply(f,j)}})(k)}finally{D(F),w=!1}}}}function N(F){F.source===c&&typeof F.data=="string"&&F.data.indexOf(g)===0&&A(+F.data.slice(g.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(S0)),S0.exports}var rR=nR();const DE=Td(rR);class Il{static async exportToZip(t,n,i){const a=new DE,l={exportDate:new Date().toISOString(),version:"1.0",projectName:n},c=JSON.stringify({ProjectData:t,Metadata:l},null,2);if(a.file("project.json",c),i){const d=i.match(/^data:image\/(\w+);base64,(.+)$/);if(d){const h=d[1],m=await fetch(i).then(g=>g.blob());a.file(`lageplan.${h}`,m)}}return await a.generateAsync({type:"blob"})}static exportToJson(t,n,i){const a={ProjectData:t,Metadata:{exportDate:new Date().toISOString(),version:"1.0",projectName:n,imageData:i||null}};return JSON.stringify(a,null,2)}static downloadBlob(t,n){const i=URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}}class yr extends Error{details;constructor(t,n){super(t),this.name="UsedDataLoadError",this.details=n}}class Fb{static async loadFromFile(t){try{const n=await fetch(t);if(!n.ok)throw new yr(`Failed to fetch file: ${n.statusText}`);const i=await n.text();return this.loadFromJson(i)}catch(n){throw n instanceof yr?n:new yr("Failed to load file",n)}}static loadFromJson(t){try{const n=JSON.parse(t);return this.validateAndTransform(n)}catch(n){throw n instanceof yr?n:new yr("Invalid JSON format",n)}}static validateAndTransform(t){if(!t||typeof t!="object")throw new yr("Data must be an object");const n={Trassen:this.validateTrassen(t.Trassen),Hoehenpunkte:this.validateHoehenpunkte(t.Hoehenpunkte),DGMDreiecke:this.validateDGMDreiecke(t.DGMDreiecke),DGMKanten:this.validateDGMKanten(t.DGMKanten),ImmissionPoints:this.validateImmissionPoints(t.ImmissionPoints),LeiterTypes:t.LeiterTypes||[],ESQSources:this.validateESQSources(t.ESQSources),AgrKorrektur:!!t.AgrKorrektur,mitFrequenz:t.mitFrequenz!==void 0?!!t.mitFrequenz:!1},i=["A","B","C","D","E","F","G","H","I","J"];for(const a of i){const l=`GKR_${a}`,c=`GKH_${a}`,f=`PX_${a}`,d=`PY_${a}`;t[l]!==void 0&&(n[l]=t[l]),t[c]!==void 0&&(n[c]=t[c]),t[f]!==void 0&&(n[f]=t[f]),t[d]!==void 0&&(n[d]=t[d])}return t.IM_X_max!==void 0&&(n.IM_X_max=t.IM_X_max),t.IM_Y_max!==void 0&&(n.IM_Y_max=t.IM_Y_max),t.Name!==void 0&&(n.Name=t.Name),t.ReferencePoints!==void 0&&(n.ReferencePoints=t.ReferencePoints),t.ImageData!==void 0&&(n.ImageData=t.ImageData),n}static validateTrassen(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid Trasse at index ${i}`);return{Nummer:Number(n.Nummer)||0,Name:String(n.Name||""),AnzahlMastebenen:Number(n.AnzahlMastebenen)||0,AnzahlMastleitungen:Number(n.AnzahlMastleitungen)||0,UsedMasten:this.validateMasten(n.UsedMasten)}}):[]}static validateMasten(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid Mast at index ${i}`);return{Fusspunkt:n.Fusspunkt||{},Name:String(n.Name||""),NullpunktHoehe:Number(n.NullpunktHoehe)||0,MastHoehe:Number(n.MastHoehe)||0,Ausrichtung:this.validateVector2d(n.Ausrichtung),GKAusrichtung:this.validateGKVector2d(n.GKAusrichtung),UsedEbenen:this.validateEbenen(n.UsedEbenen)}}):[]}static validateEbenen(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid Ebene at index ${i}`);return{NummerEbene:Number(n.NummerEbene)||0,AbstandNullpunkt:Number(n.AbstandNullpunkt)||0,UsedLeitungenLinks:this.validateLeitungen(n.UsedLeitungenLinks),UsedLeitungenRechts:this.validateLeitungen(n.UsedLeitungenRechts)}}):[]}static validateLeitungen(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid Leiter at index ${i}`);return{Durchgangspunkt:this.validateGKVector3d(n.Durchgangspunkt),ACDC:Number(n.ACDC)||0,NummerLeiter:Number(n.NummerLeiter)||0,AbstandMastachse:Number(n.AbstandMastachse)||0,Isolatorlaenge:Number(n.Isolatorlaenge)||0,NextMastEbene:Number(n.NextMastEbene)||0,NextMastLeiter:Number(n.NextMastLeiter)||0,Einbauart:Number(n.Einbauart)||0,Durchhang:Number(n.Durchhang)||0,ParabelA:Number(n.ParabelA)||0,ParabelB:Number(n.ParabelB)||0,ParabelC:Number(n.ParabelC)||0,SchallLw:String(n.SchallLw||""),SchallLwDB:Number(n.SchallLwDB)||0,BetrU:Number(n.BetrU)||0,AmSeg:Number(n.AmSeg)||0,SegLenU:Number(n.SegLenU)||0,LeiterLen:Number(n.LeiterLen)||0,Mittelpkt:this.validateGKVector3d(n.Mittelpkt),SegmentPunkte:this.validateGKVector3dArray(n.SegmentPunkte)}}):[]}static validateImmissionPoints(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid ImmissionPoint at index ${i}`);return{Name:String(n.Name||""),OriginalData:n.OriginalData||{},Position:this.validateGKVector3d(n.Position),HeightOffset:Number(n.HeightOffset)||0,G_Bodenfaktor:Number(n.G_Bodenfaktor)||0}}):[]}static validateESQSources(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid ESQ at index ${i}`);return{Bezeichnung:String(n.Bezeichnung||""),Position:this.validateGKVector3d(n.Position),Hoehe:Number(n.Hoehe)||0,Raumwinkelmass:Number(n.Raumwinkelmass)||0,Beurteilungszeitraum:Number(n.Beurteilungszeitraum)||0,Schallleistungspegel:!!n.Schallleistungspegel,L:Number(n.L)||0,S:Number(n.S)||0,Z_Impulshaltigkeit:Number(n.Z_Impulshaltigkeit)||0,Z_Tonhaltigkeit:Number(n.Z_Tonhaltigkeit)||0,Z_Cmet:Number(n.Z_Cmet)||0,Ruhezeitzuschlag:!!n.Ruhezeitzuschlag,Einwirkzeit:Number(n.Einwirkzeit)||0,Zeiteinheit:Number(n.Zeiteinheit)||0}}):[]}static validateHoehenpunkte(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid Hoehenpunkt at index ${i}`);return{LfdNummer:Number(n.LfdNummer)||0,GK_Vektor:this.validateGKVector3d(n.GK_Vektor)}}):[]}static validateDGMDreiecke(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid DGMDreieck at index ${i}`);return{A:n.A||{},B:n.B||{},C:n.C||{},LfdNummer:Number(n.LfdNummer)||0}}):[]}static validateDGMKanten(t){return Array.isArray(t)?t.map((n,i)=>{if(!n||typeof n!="object")throw new yr(`Invalid DGMKante at index ${i}`);return{EckeA:n.EckeA||{},EckeB:n.EckeB||{},DreieckA:Number(n.DreieckA)||0,DreieckB:Number(n.DreieckB)||0}}):[]}static validateVector2d(t){return!t||typeof t!="object"?{x:0,y:0,Length:0}:{x:Number(t.x)||0,y:Number(t.y)||0,Length:Number(t.Length)||0}}static validateGKVector2d(t){return!t||typeof t!="object"?{Rechts:0,Hoch:0}:{Rechts:Number(t.Rechts)||0,Hoch:Number(t.Hoch)||0}}static validateGKVector3d(t){return!t||typeof t!="object"?{GK:{Rechts:0,Hoch:0},z:0}:{GK:this.validateGKVector2d(t.GK),z:Number(t.z)||0}}static validateGKVector3dArray(t){return Array.isArray(t)?t.map(n=>this.validateGKVector3d(n)):[]}}class iR{static async importFromZip(t){const i=await new DE().loadAsync(t),a=i.file("project.json");if(!a)throw new Error("Invalid project file: project.json not found");const l=await a.async("text"),c=JSON.parse(l);if(!c.ProjectData)throw new Error("Invalid project file: ProjectData not found");const f=Fb.validateAndTransform(c.ProjectData);let d;const h=Object.keys(i.files).filter(_=>_.startsWith("lageplan.")&&!i.files[_].dir);if(h.length>0){const _=i.file(h[0]);if(_){const x=await _.async("blob");d=await aR(x)}}const m=f.IM_X_max,g=f.IM_Y_max;return{projectData:f,imageData:d,projectName:c.Metadata?.projectName,imageWidth:m,imageHeight:g}}static async importFromJson(t){const n=await t.text(),i=JSON.parse(n);if(!i.ProjectData)throw new Error("Invalid project file: ProjectData not found");const a=Fb.validateAndTransform(i.ProjectData),l=a.IM_X_max,c=a.IM_Y_max;return{projectData:a,imageData:i.Metadata?.imageData,projectName:i.Metadata?.projectName||i.ProjectData?.Name,imageWidth:l,imageHeight:c}}static async importProject(t){const n=t.name.toLowerCase();if(n.endsWith(".zip"))return this.importFromZip(t);if(n.endsWith(".json"))return this.importFromJson(t);throw new Error("Unsupported file type. Please use .zip or .json files.")}}async function aR(e){return new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=n,i.readAsDataURL(e)})}const oR=`
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
`,EE=({isVisible:e,message:t="Berechnung läuft...",progress:n})=>e?b.jsxs(b.Fragment,{children:[b.jsx("style",{children:oR}),b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",style:{backdropFilter:"blur(4px)"},children:b.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 flex flex-col items-center space-y-4 min-w-[320px] max-w-[400px]",style:{animation:"fadeIn 0.2s ease-out"},children:[b.jsxs("div",{className:"relative",children:[b.jsx(y6,{className:"h-12 w-12 animate-spin text-blue-600"}),b.jsx("div",{className:"absolute inset-0 h-12 w-12 animate-ping opacity-20",children:b.jsx("div",{className:"h-full w-full rounded-full bg-blue-600"})})]}),b.jsxs("div",{className:"text-center w-full",children:[b.jsx("p",{className:"text-lg font-medium text-gray-900",children:t}),n&&b.jsxs("div",{className:"mt-4 w-full",children:[b.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.current.toLocaleString("de-DE")," von ",n.total.toLocaleString("de-DE")," berechnet"]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:b.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-300 ease-out",style:{width:`${n.current/n.total*100}%`}})}),b.jsxs("div",{className:"flex justify-between items-center mt-2",children:[b.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(n.current/n.total*100),"%"]}),n.current>0&&n.total>n.current&&b.jsxs("div",{className:"text-xs text-gray-500",children:["Verbleibend: ",(n.total-n.current).toLocaleString("de-DE")]})]})]})]})]})})]}):null,sR=({mapWidth:e,mapHeight:t,transform:n})=>{const{immissionGrid:i,immissionGridSettings:a,showImmissionGrid:l,showGridPoints:c,isCalculatingGrid:f,gridCalculationProgress:d,generateImmissionGrid:h,clearImmissionGrid:m,setShowImmissionGrid:g,setShowGridPoints:_,updateImmissionGridSettings:x}=en(),[w,y]=te.useState(a),E=async()=>{x(w),await h(e,t,n),l||g(!0)},{confirm:D}=rm(),A=async()=>{await D("Immissionsgitter löschen?")&&m()};return b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Immissionsgitter"}),i.length>0&&b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>g(!l),className:"h-6 px-2",children:l?b.jsx(u6,{className:"h-3 w-3"}):b.jsx(s6,{className:"h-3 w-3"})})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("div",{children:[b.jsx(lt,{htmlFor:"gridX",className:"text-xs",children:"Punkte X"}),b.jsx(At,{id:"gridX",type:"number",min:"2",max:"50",value:w.gridSizeX,onChange:N=>y({...w,gridSizeX:parseInt(N.target.value)||10}),className:"h-8 text-xs"})]}),b.jsxs("div",{children:[b.jsx(lt,{htmlFor:"gridY",className:"text-xs",children:"Punkte Y"}),b.jsx(At,{id:"gridY",type:"number",min:"2",max:"50",value:w.gridSizeY,onChange:N=>y({...w,gridSizeY:parseInt(N.target.value)||10}),className:"h-8 text-xs"})]})]}),b.jsxs("div",{children:[b.jsx(lt,{htmlFor:"heightOffset",className:"text-xs",children:"Höhenoffset (m)"}),b.jsx(At,{id:"heightOffset",type:"number",min:"0",max:"100",step:"0.5",value:w.heightOffset,onChange:N=>y({...w,heightOffset:parseFloat(N.target.value)||1.5}),className:"h-8 text-xs"})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(rt,{variant:"default",size:"sm",onClick:E,disabled:f||!n,className:"flex-1",children:[b.jsx(Gg,{className:"h-4 w-4 mr-1"}),f?"Berechne...":"Gitter erstellen"]}),i.length>0&&b.jsx(rt,{variant:"destructive",size:"sm",onClick:A,disabled:f,children:b.jsx(Rc,{className:"h-4 w-4"})})]}),i.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"text-xs text-gray-600",children:[i.length," Punkte berechnet",i.length>0&&b.jsxs("div",{className:"text-xs",children:["Wertebereich: ",Math.min(...i.map(N=>N.value)).toFixed(1)," - ",Math.max(...i.map(N=>N.value)).toFixed(1)," dB(A)"]})]}),b.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-3 border-t border-gray-200",children:[b.jsx(La,{id:"showGridPoints",checked:c,onCheckedChange:N=>_(N)}),b.jsx("label",{htmlFor:"showGridPoints",className:"text-xs font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Gitterpunkte anzeigen"})]})]}),!n&&b.jsx("div",{className:"text-xs text-amber-600",children:"Hinweis: Helmert-Transformation erforderlich (Referenzpunkte A & B setzen)"})]}),b.jsx(EE,{isVisible:f,message:`Berechne ${w.gridSizeX*w.gridSizeY} Gitterpunkte...`,progress:d||void 0})]})},lR=({isOpen:e,onClose:t,mapWidth:n,mapHeight:i,transform:a})=>b.jsx(Ai,{open:e,onOpenChange:t,children:b.jsxs(Ni,{className:"sm:max-w-md",children:[b.jsx(Mi,{children:b.jsx(Ti,{children:"Immissionsgitter Einstellungen"})}),b.jsx("div",{className:"mt-4",children:b.jsx(sR,{mapWidth:n,mapHeight:i,transform:a})})]})});function uR(e){const t=e+"CollectionProvider",[n,i]=gu(t),[a,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=y=>{const{scope:E,children:D}=y,A=sr.useRef(null),N=sr.useRef(new Map).current;return b.jsx(a,{scope:E,itemMap:N,collectionRef:A,children:D})};c.displayName=t;const f=e+"CollectionSlot",d=Ed(f),h=sr.forwardRef((y,E)=>{const{scope:D,children:A}=y,N=l(f,D),F=Nr(E,N.collectionRef);return b.jsx(d,{ref:F,children:A})});h.displayName=f;const m=e+"CollectionItemSlot",g="data-radix-collection-item",_=Ed(m),x=sr.forwardRef((y,E)=>{const{scope:D,children:A,...N}=y,F=sr.useRef(null),k=Nr(E,F),T=l(m,D);return sr.useEffect(()=>(T.itemMap.set(F,{ref:F,...N}),()=>void T.itemMap.delete(F))),b.jsx(_,{[g]:"",ref:k,children:A})});x.displayName=m;function w(y){const E=l(e+"CollectionConsumer",y);return sr.useCallback(()=>{const A=E.collectionRef.current;if(!A)return[];const N=Array.from(A.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((T,R)=>N.indexOf(T.ref.current)-N.indexOf(R.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:c,Slot:h,ItemSlot:x},w,i]}var cR=te.createContext(void 0);function SE(e){const t=te.useContext(cR);return e||t||"ltr"}var C0="rovingFocusGroup.onEntryFocus",fR={bubbles:!1,cancelable:!0},Xc="RovingFocusGroup",[xg,CE,hR]=uR(Xc),[dR,AE]=gu(Xc,[hR]),[mR,pR]=dR(Xc),NE=te.forwardRef((e,t)=>b.jsx(xg.Provider,{scope:e.__scopeRovingFocusGroup,children:b.jsx(xg.Slot,{scope:e.__scopeRovingFocusGroup,children:b.jsx(gR,{...e,ref:t})})}));NE.displayName=Xc;var gR=te.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:a=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...g}=e,_=te.useRef(null),x=Nr(t,_),w=SE(l),[y,E]=Jd({prop:c,defaultProp:f??null,onChange:d,caller:Xc}),[D,A]=te.useState(!1),N=lu(h),F=CE(n),k=te.useRef(!1),[T,R]=te.useState(0);return te.useEffect(()=>{const j=_.current;if(j)return j.addEventListener(C0,N),()=>j.removeEventListener(C0,N)},[N]),b.jsx(mR,{scope:n,orientation:i,dir:w,loop:a,currentTabStopId:y,onItemFocus:te.useCallback(j=>E(j),[E]),onItemShiftTab:te.useCallback(()=>A(!0),[]),onFocusableItemAdd:te.useCallback(()=>R(j=>j+1),[]),onFocusableItemRemove:te.useCallback(()=>R(j=>j-1),[]),children:b.jsx(Gn.div,{tabIndex:D||T===0?-1:0,"data-orientation":i,...g,ref:x,style:{outline:"none",...e.style},onMouseDown:En(e.onMouseDown,()=>{k.current=!0}),onFocus:En(e.onFocus,j=>{const O=!k.current;if(j.target===j.currentTarget&&O&&!D){const G=new CustomEvent(C0,fR);if(j.currentTarget.dispatchEvent(G),!G.defaultPrevented){const U=F().filter(K=>K.focusable),I=U.find(K=>K.active),W=U.find(K=>K.id===y),re=[I,W,...U].filter(Boolean).map(K=>K.ref.current);kE(re,m)}}k.current=!1}),onBlur:En(e.onBlur,()=>A(!1))})})}),ME="RovingFocusGroupItem",TE=te.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:a=!1,tabStopId:l,children:c,...f}=e,d=Lc(),h=l||d,m=pR(ME,n),g=m.currentTabStopId===h,_=CE(n),{onFocusableItemAdd:x,onFocusableItemRemove:w,currentTabStopId:y}=m;return te.useEffect(()=>{if(i)return x(),()=>w()},[i,x,w]),b.jsx(xg.ItemSlot,{scope:n,id:h,focusable:i,active:a,children:b.jsx(Gn.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...f,ref:t,onMouseDown:En(e.onMouseDown,E=>{i?m.onItemFocus(h):E.preventDefault()}),onFocus:En(e.onFocus,()=>m.onItemFocus(h)),onKeyDown:En(e.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){m.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const D=_R(E,m.orientation,m.dir);if(D!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let N=_().filter(F=>F.focusable).map(F=>F.ref.current);if(D==="last")N.reverse();else if(D==="prev"||D==="next"){D==="prev"&&N.reverse();const F=N.indexOf(E.currentTarget);N=m.loop?xR(N,F+1):N.slice(F+1)}setTimeout(()=>kE(N))}}),children:typeof c=="function"?c({isCurrentTabStop:g,hasTabStop:y!=null}):c})})});TE.displayName=ME;var vR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yR(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function _R(e,t,n){const i=yR(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return vR[i]}function kE(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function xR(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var bR=NE,wR=TE,am="Tabs",[DR,IR]=gu(am,[AE]),zE=AE(),[ER,hv]=DR(am),LE=te.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:a,defaultValue:l,orientation:c="horizontal",dir:f,activationMode:d="automatic",...h}=e,m=SE(f),[g,_]=Jd({prop:i,onChange:a,defaultProp:l??"",caller:am});return b.jsx(ER,{scope:n,baseId:Lc(),value:g,onValueChange:_,orientation:c,dir:m,activationMode:d,children:b.jsx(Gn.div,{dir:m,"data-orientation":c,...h,ref:t})})});LE.displayName=am;var FE="TabsList",BE=te.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...a}=e,l=hv(FE,n),c=zE(n);return b.jsx(bR,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:i,children:b.jsx(Gn.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:t})})});BE.displayName=FE;var RE="TabsTrigger",OE=te.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:a=!1,...l}=e,c=hv(RE,n),f=zE(n),d=IE(c.baseId,i),h=HE(c.baseId,i),m=i===c.value;return b.jsx(wR,{asChild:!0,...f,focusable:!a,active:m,children:b.jsx(Gn.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...l,ref:t,onMouseDown:En(e.onMouseDown,g=>{!a&&g.button===0&&g.ctrlKey===!1?c.onValueChange(i):g.preventDefault()}),onKeyDown:En(e.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&c.onValueChange(i)}),onFocus:En(e.onFocus,()=>{const g=c.activationMode!=="manual";!m&&!a&&g&&c.onValueChange(i)})})})});OE.displayName=RE;var jE="TabsContent",PE=te.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:a,children:l,...c}=e,f=hv(jE,n),d=IE(f.baseId,i),h=HE(f.baseId,i),m=i===f.value,g=te.useRef(m);return te.useEffect(()=>{const _=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(_)},[]),b.jsx(vu,{present:a||m,children:({present:_})=>b.jsx(Gn.div,{"data-state":m?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":d,hidden:!_,id:h,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:_&&l})})});PE.displayName=jE;function IE(e,t){return`${e}-trigger-${t}`}function HE(e,t){return`${e}-content-${t}`}var SR=LE,CR=BE,AR=OE,NR=PE;function GE({className:e,...t}){return b.jsx(SR,{"data-slot":"tabs",className:dn("flex flex-col gap-2",e),...t})}function UE({className:e,...t}){return b.jsx(CR,{"data-slot":"tabs-list",className:dn("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Nd({className:e,...t}){return b.jsx(AR,{"data-slot":"tabs-trigger",className:dn("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Md({className:e,...t}){return b.jsx(NR,{"data-slot":"tabs-content",className:dn("flex-1 outline-none",e),...t})}const MR=({isOpen:e,onClose:t,onSave:n,existingTemplate:i})=>{const[a,l]=te.useState(()=>i||{name:"",description:"",anzahlEbenen:1,ebenenConfig:[{nummerEbene:1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1}]}),[c,f]=te.useState("none"),[d,h]=te.useState([]),[m,g]=te.useState("general");te.useEffect(()=>{e&&(l(i?{...i,ebenenConfig:i.ebenenConfig?[...i.ebenenConfig]:[]}:{name:"",description:"",anzahlEbenen:1,ebenenConfig:[{nummerEbene:1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1}]}),g("general"),f("none"))},[e,i]);const _=D=>{const A=a.ebenenConfig||[];let N=[];if(D>A.length){N=[...A];for(let F=A.length;F<D;F++)N.push({nummerEbene:F+1,anzahlLeitungenLinks:1,anzahlLeitungenRechts:1})}else D<A.length?N=A.slice(0,D):N=A;N=N.map((F,k)=>({...F,nummerEbene:k+1})),l({...a,anzahlEbenen:D,ebenenConfig:N})},x=D=>{if(console.log("Selected template:",D),f(D),D==="none")return;const N={simple:"Einfacher Einzelmast","380kv":"Standard 380kV","110kv":"Kompakt 110kV","220kv":"Doppelsystem 220kV"}[D],F=Ub.find(k=>k.name===N);if(F){const k=N0(F);l(k)}},w=()=>{const D=N0(a),A=O3(D);if(A.length>0){h(A);return}n(D),t()},y=(D,A)=>{l(N=>{const F=[...N.ebenenConfig||[]];return F[D]={...F[D],...A},{...N,ebenenConfig:F}})},E=()=>{const{anzahlEbenen:D=1,ebenenConfig:A=[]}=a,N=400,F=450,k=F/2,T=N-30,R=30,j=T-R;return b.jsxs("svg",{width:F,height:N,className:"border rounded",children:[b.jsx("line",{x1:0,y1:T,x2:F,y2:T,stroke:"#8B4513",strokeWidth:2}),b.jsx("line",{x1:k,y1:T,x2:k,y2:R,stroke:"#333",strokeWidth:4}),A.map((O,G)=>{const U=T-(G+1)/(D+1)*j,I=O.anzahlLeitungenLinks||0,W=O.anzahlLeitungenRechts||0;return b.jsxs("g",{children:[b.jsx("line",{x1:k-60,y1:U,x2:k+60,y2:U,stroke:"#666",strokeWidth:2}),Array.from({length:I},(B,re)=>{const K=k-20-re*15;return b.jsx("circle",{cx:K,cy:U,r:4,fill:"#FF0000"},`left-${re}`)}),Array.from({length:W},(B,re)=>{const K=k+20+re*15;return b.jsx("circle",{cx:K,cy:U,r:4,fill:"#0000FF"},`right-${re}`)}),b.jsxs("text",{x:k+70,y:U+5,fontSize:12,fill:"#333",children:["E",O.nummerEbene,": ",I,"L/",W,"R"]})]},G)}),b.jsx("text",{x:k-50,y:20,fontSize:14,fill:"#333",children:"Links"}),b.jsx("text",{x:k+20,y:20,fontSize:14,fill:"#333",children:"Rechts"})]})};return b.jsx(Ai,{open:e,onOpenChange:t,modal:!0,children:b.jsxs(Ni,{className:"!max-w-[90vw] !w-[90vw] !max-h-[90vh] overflow-y-auto",style:{width:"90vw",maxWidth:"90vw",height:"85vh"},onPointerDownOutside:D=>D.preventDefault(),children:[b.jsx(Mi,{children:b.jsx(Ti,{children:i?"Mast-Layout bearbeiten":"Neues Mast-Layout erstellen"})}),b.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsxs(GE,{value:m,onValueChange:g,children:[b.jsxs(UE,{className:"grid w-full grid-cols-2",children:[b.jsx(Nd,{value:"general",children:"Allgemein"}),b.jsx(Nd,{value:"details",children:"Ebenen-Details"})]}),b.jsxs(Md,{value:"general",className:"space-y-4",children:[!i&&b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"template-select",children:"Vorlage verwenden"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs("select",{id:"template-select",className:"flex-1 h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",value:c,onChange:D=>{console.log("Select changed to:",D.target.value),x(D.target.value)},children:[b.jsx("option",{value:"none",children:"Keine Vorlage"}),b.jsx("option",{value:"simple",children:"Einfacher Einzelmast"}),b.jsx("option",{value:"380kv",children:"Standard 380kV"}),b.jsx("option",{value:"110kv",children:"Kompakt 110kV"}),b.jsx("option",{value:"220kv",children:"Doppelsystem 220kV"})]}),b.jsx(rt,{type:"button",size:"sm",onClick:()=>{console.log("Test button clicked!"),alert("Button works!")},children:"Test"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"name",children:"Name *"}),b.jsx(At,{id:"name",value:a.name||"",onChange:D=>l({...a,name:D.target.value}),placeholder:"z.B. Standard 380kV"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"description",children:"Beschreibung"}),b.jsx(At,{id:"description",value:a.description||"",onChange:D=>l({...a,description:D.target.value}),placeholder:"Optionale Beschreibung..."})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"anzahlEbenen",children:"Anzahl Ebenen *"}),b.jsx(At,{id:"anzahlEbenen",type:"number",min:1,max:10,value:a.anzahlEbenen||1,onChange:D=>{const A=parseInt(D.target.value)||1;_(A)}})]})]}),b.jsx(Md,{value:"details",className:"space-y-4",children:a.ebenenConfig?.map((D,A)=>b.jsxs("div",{className:"border rounded p-3 space-y-3",children:[b.jsxs("div",{className:"font-medium",children:["Ebene ",D.nummerEbene]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx(lt,{className:"text-xs",children:"Leiter Links"}),b.jsx(At,{type:"number",min:0,max:10,value:D.anzahlLeitungenLinks||0,onChange:N=>{const F=parseInt(N.target.value)||0;y(A,{anzahlLeitungenLinks:F})}})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx(lt,{className:"text-xs",children:"Leiter Rechts"}),b.jsx(At,{type:"number",min:0,max:10,value:D.anzahlLeitungenRechts||0,onChange:N=>{const F=parseInt(N.target.value)||0;y(A,{anzahlLeitungenRechts:F})}})]})]})]},A))})]}),d.length>0&&b.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 space-y-1",children:[b.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-medium",children:[b.jsx(H2,{className:"h-4 w-4"}),"Validierungsfehler"]}),d.map((D,A)=>b.jsxs("div",{className:"text-sm text-red-600",children:["• ",D]},A))]})]}),b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsx("div",{className:"font-medium",children:"Vorschau"}),b.jsx("div",{className:"overflow-auto p-2",children:b.jsx("div",{className:"inline-block min-w-fit",children:E()})}),b.jsxs("div",{className:"bg-gray-50 rounded p-3 space-y-2 text-sm",children:[b.jsx("div",{className:"font-medium",children:"Zusammenfassung"}),b.jsxs("div",{children:["• ",a.anzahlEbenen||1," Ebene(n)"]}),a.ebenenConfig?.map((D,A)=>b.jsxs("div",{children:["• Ebene ",D.nummerEbene,": ",D.anzahlLeitungenLinks||0,"L/",D.anzahlLeitungenRechts||0,"R"]},A))]})]})]}),b.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[b.jsxs(rt,{variant:"outline",onClick:t,children:[b.jsx(jo,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),b.jsxs(rt,{onClick:w,children:[b.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})},TR=({isOpen:e,onClose:t})=>{const{leiterTypes:n}=en(),[i,a]=te.useState([]),[l,c]=te.useState(""),[f,d]=te.useState(55);te.useEffect(()=>{if(e){const y=[];n.forEach((E,D)=>{y.push({id:D,Name:E.Name,SchallLW:E.SchallLW,isEditing:!1})}),a(y),c(""),d(55)}},[e,n]);const h=()=>{if(l.trim()){const y={id:l.trim(),Name:l.trim(),SchallLW:f,isEditing:!1};if(i.some(E=>E.Name===y.Name)){alert(`Ein Leitertyp mit dem Namen "${y.Name}" existiert bereits.`);return}a([...i,y]),c(""),d(55)}},m=y=>{a(i.map(E=>E.id===y?{...E,isEditing:!0,tempName:E.Name,tempSchallLW:E.SchallLW}:{...E,isEditing:!1}))},g=y=>{a(i.map(E=>E.id===y&&E.tempName?{...E,id:E.tempName.trim(),Name:E.tempName.trim(),SchallLW:E.tempSchallLW||E.SchallLW,isEditing:!1,tempName:void 0,tempSchallLW:void 0}:E))},_=y=>{a(i.map(E=>E.id===y?{...E,isEditing:!1,tempName:void 0,tempSchallLW:void 0}:E))},x=async(y,E)=>{await confirm(`Leitertyp "${E}" wirklich löschen?`)&&a(i.filter(A=>A.id!==y))},w=()=>{const y=en.getState(),E=new Map;y.leiterTypes.forEach((D,A)=>{E.set(A,D)}),E.forEach((D,A)=>{i.some(N=>N.Name===A)||y.deleteLeiterType(A)}),i.forEach(D=>{const A=E.get(D.Name);A?A.SchallLW!==D.SchallLW&&y.updateLeiterType(D.Name,{Name:D.Name,SchallLW:D.SchallLW}):y.addLeiterType({Name:D.Name,SchallLW:D.SchallLW})}),t()};return b.jsx(Ai,{open:e,onOpenChange:t,children:b.jsxs(Ni,{className:"sm:max-w-lg",children:[b.jsx(Mi,{children:b.jsxs(Ti,{className:"flex items-center gap-2",children:[b.jsx(sd,{className:"h-5 w-5"}),"Leitertypen verwalten"]})}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-2",children:[b.jsx(lt,{className:"text-sm font-medium",children:"Neuen Leitertyp hinzufügen"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx(At,{type:"text",placeholder:"Name (z.B. L1)",value:l,onChange:y=>c(y.target.value),onKeyPress:y=>{y.key==="Enter"&&l.trim()&&h()},className:"flex-1"}),b.jsx(At,{type:"number",placeholder:"SchallLW (dB)",value:f,onChange:y=>d(parseFloat(y.target.value)||0),min:0,max:200,step:.1,className:"w-32"}),b.jsx(rt,{onClick:h,disabled:!l.trim(),size:"sm",children:b.jsx(Ud,{className:"h-4 w-4"})})]})]}),b.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.length===0?b.jsxs("div",{className:"text-center py-8 text-gray-500",children:[b.jsx(sd,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),b.jsx("p",{className:"text-sm",children:"Keine Leitertypen vorhanden"}),b.jsx("p",{className:"text-xs mt-1",children:"Fügen Sie einen neuen Leitertyp hinzu"})]}):i.map(y=>b.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:y.isEditing?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex gap-2 flex-1",children:[b.jsx(At,{type:"text",value:y.tempName||"",onChange:E=>{a(i.map(D=>D.id===y.id?{...D,tempName:E.target.value}:D))},className:"flex-1"}),b.jsx(At,{type:"number",value:y.tempSchallLW,onChange:E=>{a(i.map(D=>D.id===y.id?{...D,tempSchallLW:parseFloat(E.target.value)||0}:D))},min:0,max:200,step:.1,className:"w-32"})]}),b.jsxs("div",{className:"flex gap-1 ml-2",children:[b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>g(y.id),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",children:b.jsx(Vc,{className:"h-4 w-4"})}),b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>_(y.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:b.jsx(jo,{className:"h-4 w-4"})})]})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"font-medium text-sm",children:y.Name}),b.jsxs("div",{className:"text-xs text-gray-500",children:["SchallLW: ",y.SchallLW," dB"]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>m(y.id),className:"h-8 w-8 p-0",children:b.jsx(Z0,{className:"h-4 w-4"})}),b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>x(y.id,y.Name),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:b.jsx(Rc,{className:"h-4 w-4"})})]})]})},y.id))}),i.length>0&&b.jsxs("div",{className:"pt-3 border-t text-xs text-gray-600",children:[i.length," Leitertyp(en) insgesamt"]}),b.jsxs("div",{className:"flex justify-end gap-2 pt-3 border-t",children:[b.jsx(rt,{variant:"outline",onClick:t,children:"Abbrechen"}),b.jsx(rt,{onClick:w,children:"Änderungen speichern"})]})]})]})})},kR=({isOpen:e,onClose:t})=>{const{trassenNew:n,poles:i,connectionLines:a,mastLayoutTemplates:l,leiterTypes:c,addTrasseNew:f,updateTrasseNew:d,deleteTrasseNew:h,addMastLayoutTemplate:m,updateMastLayoutTemplate:g,deleteMastLayoutTemplate:_,loadStandardTemplates:x}=en();console.log("TrasseManagerDialog - trassenNew from store:",n),console.log("TrasseManagerDialog - trassenNew size:",n.size),console.log("Templates",l);const{prompt:w,confirm:y}=rm(),[E,D]=te.useState(""),[A,N]=te.useState(""),[F,k]=te.useState(!1),[T,R]=te.useState(!1),[j,O]=te.useState();te.useEffect(()=>{e&&l.size===0&&(console.log("Loading standard templates..."),x())},[e]);const G=()=>{if(console.log("handleAddTrasse called"),console.log("newTrasseName:",E),console.log("selectedTemplateId:",A),E.trim()&&A){console.log("Calling addTrasseNew...");const ee=f(E,A);console.log("addTrasseNew returned trasseId:",ee),ee?(D(""),N(""),console.log("Trasse created successfully")):console.error("Failed to create Trasse - template required")}else console.log("Cannot add trasse - missing name or templateId")},U=async(ee,V)=>{const Q=await w("Trassen-Name bearbeiten:",V);Q&&Q!==V&&d(ee,{name:Q})},I=async(ee,V)=>{await y(`Trasse "${V}" wirklich löschen?`)&&h(ee)},W=ee=>{j?g(j.id,ee):m(ee),O(void 0)},B=ee=>{O(ee),k(!0)},re=async(ee,V)=>{await y(`Vorlage "${V}" wirklich löschen?`)&&_(ee)},K=ee=>{const V=n.get(ee);if(!V){console.error("Trasse not found:",ee);return}const Q=new Map;V.poleIds.forEach(ne=>{const se=i.get(ne);se&&Q.set(ne,se)});const $=Array.from(a.values()).filter(ne=>ne.trasseId===ee),q=k0(V,Q,$,Array.from(c.values()));if(console.log("=== New UI to UsedTrasse Conversion ==="),console.log("Input TrasseNew:",V),console.log("Input Poles:",Q),console.log("Input ConnectionLines:",$),console.log("Output UsedTrasse:",q),q.UsedMasten.length>0){const ne=q.UsedMasten[0];if(ne.UsedEbenen.length>0){const se=ne.UsedEbenen[0];if(se.UsedLeitungenLinks&&se.UsedLeitungenLinks.length>0){const ce=se.UsedLeitungenLinks[0];console.log("First conductor details:"),console.log("  - SchallLw:",ce.SchallLw),console.log("  - SchallLwDB:",ce.SchallLwDB),console.log("  - Durchhang:",ce.Durchhang)}}}alert(`Conversion completed for Trasse "${V.name}". Check the console for details.`)};return b.jsxs(Ai,{open:e,onOpenChange:t,children:[b.jsxs(Ni,{className:"sm:max-w-lg",children:[b.jsx(Mi,{children:b.jsx(Ti,{children:"Trassen verwalten"})}),b.jsxs("div",{className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"p-3 bg-green-50 rounded-lg space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(lt,{className:"text-sm font-medium",children:"Leitertypen (Schallpegel)"}),b.jsxs(rt,{variant:"outline",size:"sm",onClick:()=>R(!0),children:[b.jsx(sd,{className:"h-4 w-4 mr-2"}),"Leitertypen verwalten"]})]}),b.jsxs("div",{className:"text-xs text-gray-600",children:[c.size," Leitertyp(en) definiert"]})]}),b.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(lt,{className:"text-sm font-medium",children:"Mast-Layout-Vorlagen"}),b.jsxs(rt,{variant:"outline",size:"sm",onClick:()=>{O(void 0),k(!0)},children:[b.jsx(k6,{className:"h-4 w-4 mr-2"}),"Neue Vorlage"]})]}),l&&l.size>0?b.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Array.from(l.entries()).map(([ee,V])=>b.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-white rounded text-xs",children:[b.jsx("span",{children:V.name}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>B(V),className:"h-6 w-6 p-0",children:b.jsx(Z0,{className:"h-3 w-3"})}),b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>re(ee,V.name),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:b.jsx(Rc,{className:"h-3 w-3"})})]})]},ee))}):b.jsxs("div",{className:"text-center py-3 bg-gray-50 rounded text-xs text-gray-500",children:[b.jsx("p",{children:"Keine Vorlagen vorhanden"}),b.jsx(rt,{variant:"link",size:"sm",onClick:x,className:"mt-1",children:"Standard-Vorlagen laden"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{className:"text-sm",children:"Neue Trasse hinzufügen"}),!A&&E.trim()&&b.jsxs("div",{className:"text-xs text-amber-600 flex items-center gap-1",children:[b.jsx(H2,{className:"h-3 w-3"}),"Bitte wählen Sie eine Vorlage aus"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx(At,{type:"text",placeholder:"Trassen-Name...",value:E,onChange:ee=>D(ee.target.value),onKeyPress:ee=>{ee.key==="Enter"&&E.trim()&&A&&G()},className:"flex-1"}),l&&l.size>0?b.jsxs("select",{value:A||"",onChange:ee=>N(ee.target.value),className:"w-[180px] h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[b.jsx("option",{value:"",children:"Vorlage wählen (erforderlich)"}),Array.from(l.entries()).map(([ee,V])=>b.jsx("option",{value:ee,children:V.name},ee))]}):b.jsx(rt,{variant:"outline",size:"sm",onClick:x,className:"w-[180px]",children:"Vorlagen laden"}),b.jsx(rt,{onClick:G,disabled:!E.trim()||!A,size:"sm",title:A?"":"Bitte wählen Sie eine Vorlage",children:b.jsx(Ud,{className:"h-4 w-4"})})]})]}),b.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.size===0?b.jsxs("div",{className:"text-center py-8 text-gray-500",children:[b.jsx(Ug,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),b.jsx("p",{className:"text-sm",children:"Keine Trassen vorhanden"}),b.jsx("p",{className:"text-xs mt-1",children:"Fügen Sie eine neue Trasse hinzu"})]}):Array.from(n.entries()).map(([ee,V])=>b.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"font-medium text-sm",children:V.name}),b.jsxs("div",{className:"text-xs text-gray-500",children:[V.poleIds.length," Mast(e)",V.templateId&&l?.get(V.templateId)&&b.jsxs("span",{className:"ml-2 text-blue-600",title:"Basiert auf Vorlage (Kopie)",children:["⚡ ",l.get(V.templateId).name]})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>K(ee),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",title:"Run trasseUIToUsedTrasse conversion",children:b.jsx(L6,{className:"h-4 w-4"})}),b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>U(ee,V.name),className:"h-8 w-8 p-0",children:b.jsx(Z0,{className:"h-4 w-4"})}),b.jsx(rt,{variant:"ghost",size:"sm",onClick:()=>I(ee,V.name),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:b.jsx(Rc,{className:"h-4 w-4"})})]})]},ee))}),n.size>0&&b.jsxs("div",{className:"pt-3 border-t text-xs text-gray-600",children:[n.size," Trasse(n) insgesamt"]})]})]}),b.jsx(MR,{isOpen:F,onClose:()=>{k(!1),O(void 0)},onSave:W,existingTemplate:j,existingTemplates:l}),b.jsx(TR,{isOpen:T,onClose:()=>R(!1)})]})},zR=({isOpen:e,onClose:t,showTrassen:n,setShowTrassen:i,showDGM:a,setShowDGM:l,showContour:c,setShowContour:f})=>{const{showImmissionGrid:d,setShowImmissionGrid:h,showGridPoints:m,setShowGridPoints:g,immissionGrid:_,dgmKanten:x}=en();return b.jsx(Ai,{open:e,onOpenChange:t,children:b.jsxs(Ni,{className:"sm:max-w-md",children:[b.jsx(Mi,{children:b.jsx(Ti,{children:"Kartenebenen"})}),b.jsxs("div",{className:"mt-4 space-y-4",children:[b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(La,{id:"trassen-layer",checked:n,onCheckedChange:w=>i(w)}),b.jsxs(lt,{htmlFor:"trassen-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(Ug,{className:"h-4 w-4"}),b.jsx("span",{children:"Trassen anzeigen"})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(La,{id:"dgm-layer",checked:a,onCheckedChange:w=>l(w),disabled:!x||x.length===0}),b.jsxs(lt,{htmlFor:"dgm-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(D6,{className:"h-4 w-4"}),b.jsx("span",{children:"DGM anzeigen"}),(!x||x.length===0)&&b.jsx("span",{className:"text-xs text-gray-500",children:"(nicht verfügbar)"})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(La,{id:"contour-layer",checked:c,onCheckedChange:w=>f(w)}),b.jsxs(lt,{htmlFor:"contour-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(jh,{className:"h-4 w-4"}),b.jsx("span",{children:"Höhenlinien anzeigen"})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(La,{id:"immission-grid-layer",checked:d,onCheckedChange:w=>h(w),disabled:!_||_.length===0}),b.jsxs(lt,{htmlFor:"immission-grid-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(Gg,{className:"h-4 w-4"}),b.jsx("span",{children:"Immissionsgitter anzeigen"}),(!_||_.length===0)&&b.jsx("span",{className:"text-xs text-gray-500",children:"(nicht berechnet)"})]})]}),_&&_.length>0&&b.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[b.jsx(La,{id:"grid-points-layer",checked:m,onCheckedChange:w=>g(w)}),b.jsxs(lt,{htmlFor:"grid-points-layer",className:"flex items-center gap-2 cursor-pointer flex-1",children:[b.jsx(G6,{className:"h-4 w-4"}),b.jsx("span",{children:"Gitterpunkte anzeigen"})]})]})]}),b.jsx("div",{className:"pt-3 border-t space-y-1",children:b.jsxs("div",{className:"text-xs text-gray-600",children:[_&&_.length>0&&b.jsxs("div",{children:[_.length," Immissionsgitterpunkte berechnet"]}),x&&x.length>0&&b.jsxs("div",{children:[x.length," DGM-Kanten geladen"]})]})})]})]})})},LR=({isOpen:e,onClose:t})=>{const{projectName:n,mitFrequenz:i,kt:a,setProjectName:l,setMitFrequenz:c,setKt:f}=en(),[d,h]=te.useState(n),[m,g]=te.useState(i),[_,x]=te.useState(a);te.useEffect(()=>{e&&(h(n),g(i),x(a))},[e,n,i,a]);const w=()=>{l(d),c(m),f(_),t()},y=()=>{h(n),g(i),x(a),t()};return b.jsx(Ai,{open:e,onOpenChange:t,children:b.jsxs(Ni,{className:"sm:max-w-[500px]",children:[b.jsx(Mi,{children:b.jsx(Ti,{children:"Projekteinstellungen"})}),b.jsxs("div",{className:"space-y-6 py-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"projectName",className:"text-sm font-medium",children:"Projektname"}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(G2,{className:"h-4 w-4 text-gray-500"}),b.jsx(At,{id:"projectName",type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"Projektname eingeben...",className:"flex-1"})]})]}),b.jsx("div",{className:"border-t pt-4"}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(La,{id:"mitFrequenz",checked:m,onCheckedChange:E=>g(E)}),b.jsx(lt,{htmlFor:"mitFrequenz",className:"text-sm font-medium",children:"Frequenzabhängige Berechnung"})]}),b.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600 ml-6",children:[b.jsx(l0,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),b.jsx("span",{children:"Aktiviert die frequenzabhängige Berechnung der Schallimmissionen"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"kt",className:"text-sm font-medium",children:"Kt - Ton- und Informationshaltigkeit"}),b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx(At,{id:"kt",type:"number",value:_,onChange:E=>x(parseFloat(E.target.value)||0),step:"0.1",className:"w-32"}),b.jsx("span",{className:"text-sm text-gray-600",children:"dB"})]}),b.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[b.jsx(l0,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),b.jsx("span",{children:"Zuschlag für Ton- und Informationshaltigkeit nach TA Lärm. Typische Werte: 0 dB (keine Auffälligkeit), 3-6 dB (deutliche Ton- oder Informationshaltigkeit)"})]})]}),b.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:b.jsxs("div",{className:"flex items-start space-x-2",children:[b.jsx(l0,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),b.jsxs("div",{className:"text-sm text-blue-800",children:[b.jsx("p",{className:"font-medium",children:"Hinweis:"}),b.jsx("p",{children:"Änderungen an diesen Einstellungen führen dazu, dass alle zwischengespeicherten Berechnungsergebnisse gelöscht werden und eine Neuberechnung erforderlich ist."})]})]})})]}),b.jsxs("div",{className:"flex justify-end space-x-2",children:[b.jsx(rt,{variant:"outline",onClick:y,children:"Abbrechen"}),b.jsx(rt,{onClick:w,children:"Speichern"})]})]})})},FR=({mapWidth:e,mapHeight:t,transform:n,showTrassen:i,setShowTrassen:a,showDGM:l,setShowDGM:c,showContour:f,setShowContour:d})=>{const h=te.useRef(null),m=te.useRef(null),g=te.useRef(null),[_,x]=te.useState(!1),[w,y]=te.useState(!1),[E,D]=te.useState(!1),[A,N]=te.useState("Berechnung läuft..."),[F,k]=te.useState(void 0),[T,R]=te.useState(null),[j,O]=te.useState(!1),[G,U]=te.useState(!1),[I,W]=te.useState(!1),[B,re]=te.useState(!1),[K,ee]=te.useState(!1),{projectName:V,projectImage:Q,imageWidth:$,imageHeight:q,referencePoints:ne,setProjectName:se,createNewProject:ce,setProjectImage:pe,exportProjectData:_e,loadProjectData:ze,computeImmissionPointsFromGUI:ke,immissionPoints:Ie,isImmissionPointsComputed:Ze,isGridComputed:Xe,immissionGrid:$e,mitFrequenz:Ke,kt:H}=en(),{prompt:Te,confirm:Se}=rm(),ae=async()=>{const me=await Te("Name für neues Projekt:","Neues Projekt");me&&await Se("Aktuelle Projektdaten werden gelöscht. Fortfahren?")&&ce(me)},ie=async(me,ye,de)=>{try{if(!await Se(`Beispielprojekt "${ye}" laden? Aktuelle Daten werden überschrieben.`))return;const Fe=await fetch(me);if(!Fe.ok)throw new Error(`Failed to load project: ${Fe.statusText}`);const Re=await Fe.json();if(ze(Re.ProjectData),console.log("Project name: ",ye),ye.toLowerCase().includes("tausend")){const{imageWidth:je,imageHeight:We}=en.getState();console.log("Setting image width and height to ",je,We),pe(de,je,We)}else pe(de,893,639);se(ye)}catch(Be){console.error("Error loading default project:",Be),alert(`Fehler beim Laden des Beispielprojekts: ${Be.message}`)}},ue=me=>{const ye=me.target.files?.[0];if(!ye)return;if(!ye.type.startsWith("image/")){alert("Bitte wählen Sie eine Bilddatei aus.");return}x(!0);const de=new FileReader;de.onload=Be=>{const Fe=Be.target?.result,Re=document.createElement("img");Re.onload=()=>{pe(Fe,Re.width,Re.height),x(!1)},Re.onerror=()=>{alert("Fehler beim Laden des Bildes."),x(!1)},Re.src=Fe},de.onerror=()=>{alert("Fehler beim Lesen der Datei."),x(!1)},de.readAsDataURL(ye)},be=async(me=!1)=>{try{const ye=_e(),de=`${V.replace(/[^a-z0-9]/gi,"_")}_export`;if(me){const Be=await Il.exportToZip(ye,V,Q||void 0);Il.downloadBlob(Be,`${de}.zip`)}else{const Be=Il.exportToJson(ye,V,Q||void 0),Fe=new Blob([Be],{type:"application/json"});Il.downloadBlob(Fe,`${de}.json`)}}catch(ye){console.error("Export error:",ye),alert("Fehler beim Exportieren des Projekts.")}},De=async me=>{const ye=me.target.files?.[0];if(ye){try{const de=await iR.importProject(ye);if(console.log("Import result:",{hasImageData:!!de.imageData,imageWidth:de.imageWidth,imageHeight:de.imageHeight,hasProjectDataImageData:!!de.projectData.ImageData,IM_X_max:de.projectData.IM_X_max,IM_Y_max:de.projectData.IM_Y_max}),ze(de.projectData),de.imageData){const Fe=de.imageWidth&&de.imageWidth>0?de.imageWidth:893,Re=de.imageHeight&&de.imageHeight>0?de.imageHeight:639;console.log("PATH 1: Setting project image dimensions from migration with embedded imageData:",{width:Fe,height:Re,fromProjectData:de.imageWidth,fromProjectHeight:de.imageHeight}),pe(de.imageData,Fe,Re)}else de.imageWidth&&de.imageHeight&&de.imageWidth>0&&de.imageHeight>0&&(console.log("PATH 2: No imageData, but setting dimensions in store:",{width:de.imageWidth,height:de.imageHeight}),en.setState({imageWidth:de.imageWidth,imageHeight:de.imageHeight}));!de.imageData&&de.projectData.ImageData&&(console.log("PATH 3: Using ImageData from projectData with dimensions:",{width:de.imageWidth||893,height:de.imageHeight||639}),pe(de.projectData.ImageData,de.imageWidth||893,de.imageHeight||639));const Be=ye.name.replace(/_export\.(json|zip)$/,"").replace(/_/g," ");se(de.projectName||de.projectData.Name||Be)}catch(de){console.error("Import error:",de),alert(`Fehler beim Importieren: ${de.message}`)}m.current&&(m.current.value="")}},ge=async me=>{const ye=me.target.files?.[0];if(ye){if(!ye.name.toLowerCase().endsWith(".zip")){alert("Bitte wählen Sie eine ZIP-Datei aus.");return}D(!0),N("Transformiere ZIP-Datei...");try{const de=new FormData;de.append("ZipFile",ye);const Fe=await fetch("http://coronapluswebapi.kuf-remote.de/api/Project/transform-zip",{method:"POST",body:de});if(!Fe.ok){const je=await Fe.json().catch(()=>({}));throw new Error(je.error||`Server error: ${Fe.statusText}`)}const Re=await Fe.json();if(Re.projectData){if(ze(Re.projectData),Re.lageplanImage){const Nt=`data:image/jpeg;base64,${Re.lageplanImage}`,Qt=Re.projectData?.IM_X_max||893,tn=Re.projectData?.IM_Y_max||639;console.log("Setting lageplan image from migration API with project dimensions:",{width:Qt,height:tn,IM_X_max:Re.projectData?.IM_X_max,IM_Y_max:Re.projectData?.IM_Y_max}),pe(Nt,Qt,tn)}const je=ye.name.replace(/\.zip$/i,"").replace(/_/g," ");se(Re.projectData.Name||je);const We=Re.projectData,ht=`${je}_migrated`,dt=Re.lageplanImage?`data:image/jpeg;base64,${Re.lageplanImage}`:void 0,Et=await Il.exportToZip(We,je,dt);Il.downloadBlob(Et,`${ht}.zip`),alert("Projekt erfolgreich migriert und gespeichert!")}else throw new Error("Keine Projektdaten in der Antwort erhalten.")}catch(de){console.error("Migration error:",de),alert(`Fehler bei der Migration: ${de.message}`)}finally{D(!1),N("Berechnung läuft..."),g.current&&(g.current.value="")}}},X=async()=>{N(`Konvertiere GUI-Daten und berechne ${Ie.size} Immissionspunkte...`),k(void 0),y(!0);try{console.log("Converting GUI data to UsedData format...");const ye=en.getState().exportProjectData().Trassen||[];console.log("Converted",ye.length,"trassen for computation"),typeof ke!="function"?(console.error("computeImmissionPointsFromGUI not implemented yet"),alert("Die Funktion wird noch implementiert...")):(await new Promise(de=>setTimeout(de,100)),ke(ye),console.log("GUI-based immission points calculation complete"))}catch(me){console.error("Error during GUI-based calculation:",me),alert("Fehler bei der GUI-basierten Berechnung: "+me.message)}finally{y(!1),k(void 0)}},oe=Q&&ne.length>=2,le=me=>{R(T===me?null:me)};return b.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white border-b shadow-sm z-[9999]",children:[b.jsxs("div",{className:"flex items-center px-4 h-12 space-x-2",children:[b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsx("span",{className:"text-sm font-medium",children:"Projekt:"}),b.jsx("span",{className:"text-sm font-semibold text-gray-700",children:V||"Unbenanntes Projekt"})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>le("file"),className:"h-8",children:[b.jsx(G2,{className:"h-4 w-4 mr-1"}),"Datei",b.jsx(Hl,{className:"h-3 w-3 ml-1"})]}),T==="file"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-48 py-1 z-[10000]",children:[b.jsxs("button",{onClick:()=>{ae(),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(Ud,{className:"h-4 w-4 mr-2"}),"Neues Projekt"]}),b.jsxs("button",{onClick:()=>{m.current?.click(),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(h6,{className:"h-4 w-4 mr-2"}),"Öffnen"]}),b.jsx("div",{className:"border-t my-1"}),b.jsxs("button",{onClick:()=>{be(!1),R(null)},disabled:!oe,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Als JSON speichern"]}),b.jsxs("button",{onClick:()=>{be(!0),R(null)},disabled:!oe,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx(yx,{className:"h-4 w-4 mr-2"}),"Als ZIP speichern"]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>le("lageplan"),className:"h-8",children:[b.jsx(_x,{className:"h-4 w-4 mr-1"}),"Lageplan",b.jsx(Hl,{className:"h-3 w-3 ml-1"})]}),T==="lageplan"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-48 py-1 z-[10000]",children:[b.jsxs("button",{onClick:()=>{h.current?.click(),R(null)},disabled:_,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center",children:[b.jsx(_x,{className:"h-4 w-4 mr-2"}),_?"Lade Bild...":Q?"Bild ändern":"Bild hochladen"]}),Q&&b.jsxs("div",{className:"px-3 py-2 text-xs text-gray-600",children:["Größe: ",$," × ",q," px"]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>le("samples"),className:"h-8",children:[b.jsx(jh,{className:"h-4 w-4 mr-1"}),"Beispiele",b.jsx(Hl,{className:"h-3 w-3 ml-1"})]}),T==="samples"&&b.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-56 py-1 z-[10000]",children:[{file:"/src/test/data/simple1.json",name:"Simple 1",image:"/Lageplan.jpg"},{file:"/src/test/data/foo1.json",name:"Foo1",image:"/Lageplan.jpg"},{file:"/src/test/data/terrain4combined.json",name:"Terrain 4 Combined",image:"/Lageplan.jpg"},{file:"/src/test/data/terrain5complex.json",name:"Terrain 5 Complex",image:"/Lageplan.jpg"},{file:"/src/test/data/trasse3.json",name:"Trasse 3",image:"/Lageplan.jpg"},{file:"/src/test/data/trasse4gelaende.json",name:"Trasse 4 Gelände",image:"/Lageplan.jpg"},{file:"/src/test/data/Foo3.json",name:"Foo3",image:"/Lageplan.jpg"},{file:"/src/test/data/Foo3TrasseOnly.json",name:"Foo3 Trasse Only",image:"/Lageplan.jpg"},{file:"/src/test/data/Tausend_2025_1.json",name:"Tausend",image:"/Lageplan_Tausend.jpg"}].map(({file:me,name:ye,image:de})=>b.jsx("button",{onClick:()=>{ie(me,ye,de),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100",children:ye},ye))})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>le("migration"),className:"h-8",children:[b.jsx(Z6,{className:"h-4 w-4 mr-1"}),"Migration",b.jsx(Hl,{className:"h-3 w-3 ml-1"})]}),T==="migration"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-56 py-1 z-[10000]",children:[b.jsxs("button",{onClick:()=>{g.current?.click(),R(null)},disabled:E,className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx(yx,{className:"h-4 w-4 mr-2"}),E?"Transformiere...":"ZIP-Datei transformieren"]}),b.jsx("div",{className:"px-3 py-2 text-xs text-gray-600",children:"Lädt eine ZIP-Datei hoch, transformiert sie über die API und speichert das Ergebnis automatisch."})]})]}),b.jsxs("div",{className:"relative",children:[b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>le("tools"),className:"h-8",children:[b.jsx(xx,{className:"h-4 w-4 mr-1"}),"Werkzeuge",b.jsx(Hl,{className:"h-3 w-3 ml-1"})]}),T==="tools"&&b.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg w-64 py-1 z-[10000]",children:[b.jsxs("button",{onClick:async()=>{await Se("Alle Höhen der Objekte (Masten, ESQ, Immissionspunkte) werden an die Geländehöhe angepasst. Fortfahren?")&&(en.getState().resetAllHeightsToTerrain(),alert("Höhen wurden erfolgreich an das Gelände angepasst.")),R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100",children:[b.jsx(jh,{className:"h-4 w-4 mr-2 inline"}),"Höhen an Gelände anpassen"]}),b.jsxs("button",{onClick:async()=>{const me=await Te("Höhe für alle Eckpunkte (in Metern):","100");if(me!==null){const ye=parseFloat(me);if(isNaN(ye)){alert("Ungültige Höhenangabe");return}const de=en.getState();if(!n||!Q){alert("Bitte laden Sie zuerst ein Bild und setzen Sie Referenzpunkte.");return}const Be=[{x:0,y:0,name:"Ecke_OL"},{x:$,y:0,name:"Ecke_OR"},{x:0,y:q,name:"Ecke_UL"},{x:$,y:q,name:"Ecke_UR"}];for(const Fe of Be){const[Re,je]=n.pixelToGK(Fe.x,Fe.y),We=1;let ht=null;if(de.hoehenpunkte.forEach((dt,Et)=>{if(dt.GK_Vektor&&dt.GK_Vektor.GK){const Nt=Math.abs(dt.GK_Vektor.GK.Rechts-Re),Qt=Math.abs(dt.GK_Vektor.GK.Hoch-je);Nt<We&&Qt<We&&(ht=Et)}}),ht)de.updateHoehenpunkt(ht,{GK_Vektor:{GK:{Rechts:Re,Hoch:je},z:ye}});else{const dt={GK:{Rechts:Re,Hoch:je},z:ye};de.addHoehenpunkt(dt)}}alert(`Höhenpunkte mit Höhe ${ye}m wurden in allen vier Ecken des Bildes gesetzt.`)}R(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-100",children:[b.jsx(jh,{className:"h-4 w-4 mr-2 inline"}),"Eckpunkte mit Höhe setzen"]})]})]}),b.jsx("div",{className:"h-6 w-px bg-gray-300"}),b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>O(!0),className:"h-8",children:[b.jsx(Gg,{className:"h-4 w-4 mr-2"}),"Immissionsgitter"]}),b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>U(!0),className:"h-8",children:[b.jsx(Ug,{className:"h-4 w-4 mr-2"}),"Trassen verwalten"]}),b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>W(!0),className:"h-8",children:[b.jsx(xx,{className:"h-4 w-4 mr-2"}),"Kartenebenen"]}),b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>re(!0),className:"h-8",children:[b.jsx(M6,{className:"h-4 w-4 mr-2"}),"Farbpaletten"]}),b.jsx("div",{className:"h-6 w-px bg-gray-300"}),b.jsxs(rt,{variant:"ghost",size:"sm",onClick:()=>ee(!0),className:"h-8",title:"Berechnungseinstellungen öffnen",children:[b.jsx(P6,{className:"h-4 w-4 mr-2"}),"Einstellungen ",Ke&&"(F)"," ",H!==0&&`(Kt: ${H})`]}),b.jsxs(rt,{variant:"outline",size:"sm",onClick:X,disabled:w||Ie.size===0,className:"h-8",title:"Konvertiere GUI-Daten zu UsedData und berechne Immissionspunkte",children:[b.jsx(a6,{className:"h-4 w-4 mr-2"}),w?"Berechnung läuft...":"Compute from GUI"]}),b.jsxs("div",{className:"ml-auto flex items-center space-x-4 text-xs",children:[ne.length>=2?b.jsxs("span",{className:"text-green-600",children:["✓ ",ne.length," Referenzpunkte"]}):b.jsxs("span",{className:"text-yellow-600",children:["⚠ ",ne.length,"/2 Referenzpunkte"]}),Ie.size>0&&b.jsxs("span",{className:Ze?"text-green-600":"text-blue-600",children:[Ze&&"✓ ",Ie.size," Immissionspunkte"]}),$e.length>0&&b.jsxs("span",{className:Xe?"text-green-600":"text-blue-600",children:[Xe&&"✓ ",$e.length," Gitterpunkte"]})]})]}),b.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:ue,style:{display:"none"}}),b.jsx("input",{ref:m,type:"file",accept:"application/json,.json,.zip,application/zip",onChange:De,style:{display:"none"}}),b.jsx("input",{ref:g,type:"file",accept:".zip,application/zip",onChange:ge,style:{display:"none"}}),b.jsx(lR,{isOpen:j,onClose:()=>O(!1),mapWidth:e,mapHeight:t,transform:n}),b.jsx(kR,{isOpen:G,onClose:()=>U(!1)}),b.jsx(zR,{isOpen:I,onClose:()=>W(!1),showTrassen:i,setShowTrassen:a,showDGM:l,setShowDGM:c,showContour:f,setShowContour:d}),b.jsx(CF,{isOpen:B,onClose:()=>re(!1)}),b.jsx(LR,{isOpen:K,onClose:()=>ee(!1)}),b.jsx(EE,{isVisible:w||E,message:A,progress:F})]})},BR=({mastId:e,isPole:t=!1,isOpen:n,onClose:i})=>{const{poles:a,trassenNew:l,connectionLines:c,mastLayoutTemplates:f,updatePole:d,addConnectionLine:h,updateConnectionLine:m,dtmProcessor:g}=en(),_=t,x=t?a.get(e):void 0,w=_||x,y=x?l.get(x.trasseId):void 0,E=y,D=y?.templateId?f.get(y.templateId):void 0,[A,N]=te.useState({name:"",mastHoehe:100,nullpunktHoehe:150,ebenen:[]}),[F,k]=te.useState("general"),[T,R]=te.useState(!1),j=y?y.poleIds.indexOf(e):-1,O=y?j===y.poleIds.length-1:!0,G=y&&!O?y.poleIds[j+1]:null,U=G?a.get(G):null;if(te.useEffect(()=>{if(!w)return;let V=[],Q="",$=100,q=150;if(console.log("Input is this pole: ",x),t&&x&&(Q=x.name||"",$=x.poleHeight,q=x.nullpunktHeight,V=x.levels.map(ne=>({abstandNullpunkt:ne.levelHeight,leitungenLinks:ne.leftConnections.map(se=>{let ce=0,pe=0;if(se.connected2Connection){const _e=se.connected2Connection.match(/_L(\d+)_([LR])(\d+)$/);if(_e){ce=parseInt(_e[1])||0;const ze=_e[2],ke=parseInt(_e[3])||1;pe=ze==="L"?ke:-ke}}return{abstandMastachse:se.horizontalDistance2Pole,nextMastEbene:ce,nextMastLeiter:pe,einbauart:se.einbauart||0,connected2Connection:se.connected2Connection}}),leitungenRechts:ne.rightConnections.map(se=>{let ce=0,pe=0;if(se.connected2Connection){const _e=se.connected2Connection.match(/_L(\d+)_([LR])(\d+)$/);if(_e){ce=parseInt(_e[1])||0;const ze=_e[2],ke=parseInt(_e[3])||1;pe=ze==="L"?-ke:ke}}return{abstandMastachse:se.horizontalDistance2Pole,nextMastEbene:ce,nextMastLeiter:pe,einbauart:se.einbauart||0,connected2Connection:se.connected2Connection}})}))),V.length===0&&D){const ne=$/(D.anzahlEbenen+1);D.ebenenConfig.forEach((se,ce)=>{V.push({abstandNullpunkt:(ce+1)*ne,leitungenLinks:Array.from({length:se.anzahlLeitungenLinks},(pe,_e)=>({abstandMastachse:10+_e*5,nextMastEbene:ce+1,nextMastLeiter:_e+1,einbauart:0})),leitungenRechts:Array.from({length:se.anzahlLeitungenRechts},(pe,_e)=>({abstandMastachse:10+_e*5,nextMastEbene:ce+1,nextMastLeiter:-(_e+1),einbauart:0}))})})}N({name:Q,mastHoehe:$,nullpunktHoehe:q,ebenen:V}),console.log("Using this ebenenData: ",V)},[w,_,x,D,t,c]),!w||!E)return null;const I=()=>{if(t&&x){const V={...x,name:A.name,poleHeight:A.mastHoehe,nullpunktHeight:A.nullpunktHoehe,levels:A.ebenen.map((Q,$)=>({levelNumber:$+1,levelHeight:Q.abstandNullpunkt,leftConnections:Q.leitungenLinks.map((q,ne)=>{const se=x.levels[$]?.leftConnections[ne],ce=se?.id||`${e}_${$+1}_left_${ne+1}`;let pe=q.connected2Connection;if(!pe&&!T&&G&&q.nextMastEbene>0){const _e=q.nextMastLeiter>0?"left":"right",ze=Math.abs(q.nextMastLeiter),ke=_e==="left"?"L":"R";pe=`${G}_L${q.nextMastEbene}_${ke}${ze}`}return{id:ce,poleId:e,levelNumber:$+1,side:"left",connectionNumber:ne+1,horizontalDistance2Pole:q.abstandMastachse,isolatorLength:se?.isolatorLength||2.5,einbauart:q.einbauart,connected2Connection:pe,durchgangspunktGK:se?.durchgangspunktGK,durchgangspunktZ:se?.durchgangspunktZ}}),rightConnections:Q.leitungenRechts.map((q,ne)=>{const se=x.levels[$]?.rightConnections[ne],ce=se?.id||`${e}_${$+1}_right_${ne+1}`;let pe=q.connected2Connection;if(!pe&&!T&&G&&q.nextMastEbene>0){const _e=q.nextMastLeiter>0?"right":"left",ze=Math.abs(q.nextMastLeiter),ke=_e==="left"?"L":"R";pe=`${G}_L${q.nextMastEbene}_${ke}${ze}`}return{id:ce,poleId:e,levelNumber:$+1,side:"right",connectionNumber:ne+1,horizontalDistance2Pole:q.abstandMastachse,isolatorLength:se?.isolatorLength||2.5,einbauart:q.einbauart,connected2Connection:pe,durchgangspunktGK:se?.durchgangspunktGK,durchgangspunktZ:se?.durchgangspunktZ}})}))};d(e,V),V.levels.forEach(Q=>{Q.leftConnections.forEach($=>{if($.connected2Connection){const q=Array.from(c.values()).find(ne=>ne.fromConnectionId===$.id);if(q)q.toConnectionId!==$.connected2Connection&&m(q.id,{toConnectionId:$.connected2Connection});else if(G){const se={id:`line_${e}_${G}_L${Q.levelNumber}_L${$.connectionNumber}`,trasseId:x.trasseId,fromConnectionId:$.id,toConnectionId:$.connected2Connection,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};h(se)}}}),Q.rightConnections.forEach($=>{if($.connected2Connection){const q=Array.from(c.values()).find(ne=>ne.fromConnectionId===$.id);if(q)q.toConnectionId!==$.connected2Connection&&m(q.id,{toConnectionId:$.connected2Connection});else if(G){const se={id:`line_${e}_${G}_L${Q.levelNumber}_R${$.connectionNumber}`,trasseId:x.trasseId,fromConnectionId:$.id,toConnectionId:$.connected2Connection,connectionLineType:"L_80dB",maxSag:5,operatingVoltage:380,soundPowerLevel:80};h(se)}}})})}i()},W=(V,Q)=>{const $=[...A.ebenen];$[V].abstandNullpunkt=Q,N({...A,ebenen:$})},B=(V,Q,$,q)=>{const ne=[...A.ebenen];Q==="left"?ne[V].leitungenLinks[$].abstandMastachse=q:ne[V].leitungenRechts[$].abstandMastachse=q,N({...A,ebenen:ne})},re=(V,Q,$,q)=>{const ne=[...A.ebenen];Q==="left"?ne[V].leitungenLinks[$].connected2Connection=q||void 0:ne[V].leitungenRechts[$].connected2Connection=q||void 0,N({...A,ebenen:ne})},K=(V,Q,$,q)=>{const ne=[...A.ebenen];Q==="left"?ne[V].leitungenLinks[$].einbauart=q:ne[V].leitungenRechts[$].einbauart=q,N({...A,ebenen:ne})},ee=()=>{const ce=390/A.mastHoehe;let pe=20;A.ebenen.forEach(ze=>{ze.leitungenLinks.forEach(ke=>{pe=Math.max(pe,ke.abstandMastachse)}),ze.leitungenRechts.forEach(ke=>{pe=Math.max(pe,ke.abstandMastachse)})});const _e=Math.min(3,150/pe);return b.jsxs("svg",{width:500,height:450,className:"border rounded bg-gray-50",children:[b.jsx("line",{x1:0,y1:420,x2:500,y2:420,stroke:"#8B4513",strokeWidth:3}),Array.from({length:20},(ze,ke)=>b.jsx("line",{x1:ke*25,y1:420,x2:ke*25+10,y2:430,stroke:"#8B4513",strokeWidth:1,opacity:.5},`ground-${ke}`)),b.jsx("line",{x1:250,y1:420,x2:250,y2:30,stroke:"#333",strokeWidth:6}),b.jsxs("text",{x:260,y:25,fontSize:12,fill:"#666",children:[A.mastHoehe.toFixed(1),"m"]}),b.jsx("line",{x1:220,y1:420-A.nullpunktHoehe*ce,x2:280,y2:420-A.nullpunktHoehe*ce,stroke:"#0066CC",strokeWidth:1,strokeDasharray:"5,5"}),b.jsxs("text",{x:285,y:420-A.nullpunktHoehe*ce+4,fontSize:10,fill:"#0066CC",children:["Nullpunkt (",A.nullpunktHoehe.toFixed(1),"m)"]}),A.ebenen.map((ze,ke)=>{const Ie=420-ze.abstandNullpunkt*ce;return b.jsxs("g",{children:[b.jsx("line",{x1:250-(pe*_e+20),y1:Ie,x2:250+(pe*_e+20),y2:Ie,stroke:"#666",strokeWidth:3}),ze.leitungenLinks.map((Ze,Xe)=>{const $e=250-Ze.abstandMastachse*_e;return b.jsxs("g",{children:[b.jsx("line",{x1:245,y1:Ie,x2:$e,y2:Ie+8,stroke:"#4A5568",strokeWidth:2}),b.jsx("circle",{cx:$e,cy:Ie+8,r:5,fill:"#FF0000",stroke:"#CC0000",strokeWidth:1}),b.jsxs("text",{x:$e-10,y:Ie+25,fontSize:9,fill:"#666",textAnchor:"middle",children:[Ze.abstandMastachse.toFixed(1),"m"]})]},`left-${Xe}`)}),ze.leitungenRechts.map((Ze,Xe)=>{const $e=250+Ze.abstandMastachse*_e;return b.jsxs("g",{children:[b.jsx("line",{x1:255,y1:Ie,x2:$e,y2:Ie+8,stroke:"#4A5568",strokeWidth:2}),b.jsx("circle",{cx:$e,cy:Ie+8,r:5,fill:"#0000FF",stroke:"#0000CC",strokeWidth:1}),b.jsxs("text",{x:$e+10,y:Ie+25,fontSize:9,fill:"#666",textAnchor:"middle",children:[Ze.abstandMastachse.toFixed(1),"m"]})]},`right-${Xe}`)}),b.jsxs("text",{x:250-(pe*_e+30),y:Ie+4,fontSize:12,fill:"#333",fontWeight:"bold",children:["E",ke+1]}),b.jsxs("text",{x:250+(pe*_e+25),y:Ie+4,fontSize:10,fill:"#666",children:[ze.abstandNullpunkt.toFixed(1),"m"]})]},ke)}),b.jsxs("g",{transform:"translate(10, 20)",children:[b.jsx("text",{fontSize:11,fontWeight:"bold",fill:"#333",children:"Legende:"}),b.jsx("circle",{cx:10,cy:20,r:4,fill:"#FF0000"}),b.jsx("text",{x:20,y:24,fontSize:10,fill:"#666",children:"Links"}),b.jsx("circle",{cx:70,cy:20,r:4,fill:"#0000FF"}),b.jsx("text",{x:80,y:24,fontSize:10,fill:"#666",children:"Rechts"})]})]})};return b.jsx(Ai,{open:n,onOpenChange:i,children:b.jsxs(Ni,{className:"!max-w-[90vw] !w-[90vw] !max-h-[90vh] overflow-y-auto",style:{width:"90vw",maxWidth:"90vw",height:"85vh"},children:[b.jsx(Mi,{children:b.jsxs(Ti,{children:["Mast bearbeiten: ",x?.name||"Unnamed Pole"," "]})}),b.jsxs(GE,{value:F,onValueChange:k,children:[b.jsxs(UE,{className:"grid w-full grid-cols-2",children:[b.jsx(Nd,{value:"general",children:"Allgemein"}),b.jsx(Nd,{value:"levels",children:"Ebenen & Leiter"})]}),b.jsxs(Md,{value:"general",className:"space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"name",children:"Name"}),b.jsx(At,{id:"name",value:A.name,onChange:V=>N({...A,name:V.target.value})})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(lt,{htmlFor:"mastHoehe",children:"Masthöhe [m] (nur visuelle Darstellung)"}),b.jsx(At,{id:"mastHoehe",type:"number",step:"0.1",value:A.mastHoehe,onChange:V=>N({...A,mastHoehe:parseFloat(V.target.value)||0})})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx(lt,{htmlFor:"nullpunktHoehe",children:"Nullpunkthöhe (m)"}),x&&g&&b.jsx(rt,{type:"button",variant:"outline",size:"sm",onClick:()=>{try{const V=g.berechneHoeheDGM(x.position.GK);isNaN(V)||N({...A,nullpunktHoehe:V})}catch(V){console.error("Error calculating terrain height:",V)}},className:"h-7 text-xs",children:"An Gelände anpassen"})]}),b.jsx(At,{id:"nullpunktHoehe",type:"number",step:"0.1",value:A.nullpunktHoehe,onChange:V=>N({...A,nullpunktHoehe:parseFloat(V.target.value)||0})})]})]}),D&&b.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[b.jsxs("div",{className:"text-sm font-medium text-blue-900",children:["Template: ",D.name]}),b.jsx("div",{className:"text-xs text-blue-700 mt-1",children:D.description})]}),b.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-1 text-sm",children:[b.jsxs("div",{className:"font-medium",children:["Trasse: ",t??y?.name]}),t&&x?b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:["Position: ",x.position.GK.Rechts.toFixed(2),", ",x.position.GK.Hoch.toFixed(2)]}),b.jsxs("div",{children:["Höhe über NN: ",x.position.z.toFixed(2),"m"]})]}):null]})]}),b.jsx(Md,{value:"levels",className:"space-y-4",children:D?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[b.jsx("input",{type:"checkbox",id:"disableAutoConnection",checked:T,onChange:V=>R(V.target.checked),className:"h-4 w-4"}),b.jsx(lt,{htmlFor:"disableAutoConnection",className:"text-sm",children:'Automatische Verbindungen deaktivieren (erlaubt explizites "Keine Verbindung")'})]}),b.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[b.jsxs("div",{className:"flex-1 space-y-4",children:[b.jsxs("div",{className:"text-sm text-gray-600",children:['Konfiguration basiert auf Template "',D.name,'"']}),A.ebenen.map((V,Q)=>{const $=D.ebenenConfig[Q];return $?b.jsxs("div",{className:"border rounded p-3 space-y-2",children:[b.jsxs("div",{className:"font-medium text-sm",children:["Ebene ",Q+1," (",$.anzahlLeitungenLinks,"L/",$.anzahlLeitungenRechts,"R)"]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx(lt,{className:"text-xs",children:"Höhe über Nullpunkt (m)"}),b.jsx(At,{type:"number",step:"0.1",value:V.abstandNullpunkt,onChange:q=>W(Q,parseFloat(q.target.value)||0),className:"h-8"})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[V.leitungenLinks.length>0&&b.jsxs("div",{className:"space-y-1",children:[b.jsx(lt,{className:"text-xs font-medium",children:"Leiter Links"}),V.leitungenLinks.map((q,ne)=>b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsxs("span",{className:"text-xs w-8",children:["L",ne+1,":"]}),b.jsx(At,{type:"number",step:"0.1",value:q.abstandMastachse,onChange:se=>B(Q,"left",ne,parseFloat(se.target.value)||0),className:"flex-1 h-7 text-xs",placeholder:"Abstand (m)"})]}),!O&&U&&b.jsxs("select",{value:q.connected2Connection||"",onChange:se=>{re(Q,"left",ne,se.target.value)},className:"w-full h-6 text-xs rounded border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Keine Verbindung"}),t&&U?U.levels.map((se,ce)=>b.jsxs("optgroup",{label:`Ebene ${ce+1}`,children:[se.leftConnections.map((pe,_e)=>b.jsxs("option",{value:pe.id,children:["Links ",_e+1]},`l-${_e}`)),se.rightConnections.map((pe,_e)=>b.jsxs("option",{value:pe.id,children:["Rechts ",_e+1]},`r-${_e}`))]},ce)):b.jsx("div",{})]}),b.jsxs("select",{value:q.einbauart,onChange:se=>K(Q,"left",ne,parseInt(se.target.value)),className:"w-full h-6 text-xs rounded border border-input bg-background px-2",title:"Isolator-Einbauart",children:[b.jsx("option",{value:"0",children:"T-380KV"}),b.jsx("option",{value:"1",children:"T-220KV"}),b.jsx("option",{value:"2",children:"Abspann"})]})]},ne))]}),V.leitungenRechts.length>0&&b.jsxs("div",{className:"space-y-1",children:[b.jsx(lt,{className:"text-xs font-medium",children:"Leiter Rechts"}),V.leitungenRechts.map((q,ne)=>b.jsxs("div",{className:"space-y-1",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsxs("span",{className:"text-xs w-8",children:["R",ne+1,":"]}),b.jsx(At,{type:"number",step:"0.1",value:q.abstandMastachse,onChange:se=>B(Q,"right",ne,parseFloat(se.target.value)||0),className:"flex-1 h-7 text-xs",placeholder:"Abstand (m)"})]}),!O&&U&&b.jsxs("select",{value:q.connected2Connection||"",onChange:se=>{re(Q,"right",ne,se.target.value)},className:"w-full h-6 text-xs rounded border border-input bg-background px-2",children:[b.jsx("option",{value:"",children:"Keine Verbindung"}),t&&U?U.levels.map(se=>b.jsxs("optgroup",{label:`Ebene ${se.levelNumber}`,children:[se.leftConnections.map(ce=>b.jsxs("option",{value:ce.id,children:["Links ",ce.connectionNumber," (",ce.id,")"]},ce.id)),se.rightConnections.map(ce=>b.jsxs("option",{value:ce.id,children:["Rechts ",ce.connectionNumber," (",ce.id,")"]},ce.id))]},se.levelNumber)):b.jsx("div",{})]}),b.jsxs("select",{value:q.einbauart,onChange:se=>K(Q,"right",ne,parseInt(se.target.value)),className:"w-full h-6 text-xs rounded border border-input bg-background px-2",title:"Isolator-Einbauart",children:[b.jsx("option",{value:"0",children:"T-380KV"}),b.jsx("option",{value:"1",children:"T-220KV"}),b.jsx("option",{value:"2",children:"Abspann"})]})]},ne))]})]})]},Q):null})]}),b.jsxs("div",{className:"flex-1 space-y-2",children:[b.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Visualisierung"}),b.jsx("div",{className:"overflow-auto p-2",children:b.jsx("div",{className:"inline-block min-w-fit",children:ee()})})]})]})]}):b.jsxs("div",{className:"text-center py-8 text-gray-500",children:[b.jsx("p",{children:"Dieser Mast hat kein Template zugewiesen."}),b.jsx("p",{className:"text-sm mt-2",children:"Bitte weisen Sie der Trasse ein Template zu."})]})})]}),b.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[b.jsxs(rt,{variant:"outline",onClick:i,children:[b.jsx(jo,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),b.jsxs(rt,{onClick:I,children:[b.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})};function RR(){const{computationErrors:e,clearComputationErrors:t}=en(),[n,i]=te.useState(!1);te.useEffect(()=>{e.length>0&&i(!0)},[e]);const a=()=>{i(!1),t()};return{ErrorDialog:()=>b.jsx(oE,{open:n,onOpenChange:i,children:b.jsxs(sE,{className:"max-w-2xl",children:[b.jsxs(lE,{children:[b.jsx(cE,{className:"text-red-600",children:"Computation Errors Detected"}),b.jsx(fE,{className:"mt-4",children:b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"font-medium mb-3",children:"The following errors occurred while computing immission values:"}),b.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 max-h-96 overflow-y-auto",children:b.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.map((l,c)=>b.jsx("li",{className:"text-sm text-red-800",children:l},c))})}),b.jsx("p",{className:"text-sm text-gray-600 mt-3",children:"Please check your data and try again. Common issues include:"}),b.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 ml-4",children:[b.jsx("li",{children:"Missing or invalid terrain data"}),b.jsx("li",{children:"Incorrectly configured trassen or masts"}),b.jsx("li",{children:"Invalid immission point positions"}),b.jsx("li",{children:"Calculation parameters out of valid range"})]})]})})]}),b.jsx(uE,{children:b.jsx(hE,{onClick:a,children:"OK"})})]})})}}function OR(){const[e,t]=te.useState(null),[n,i]=te.useState(!0),[a,l]=te.useState(!1),[c,f]=te.useState(!1),[d,h]=te.useState({width:800,height:600}),{imageWidth:m,imageHeight:g,loadStandardTemplates:_,selectedElementId:x,selectedElementType:w,isEditFormOpen:y,setEditFormOpen:E}=en(),{ErrorDialog:D}=RR();return te.useEffect(()=>{_()},[]),te.useEffect(()=>{m&&g&&h({width:m,height:g})},[m,g]),b.jsx(WF,{children:b.jsxs("div",{style:{height:"100vh",width:"100vw"},children:[b.jsx(FR,{mapWidth:d.width,mapHeight:d.height,transform:e,showTrassen:n,setShowTrassen:i,showDGM:a,setShowDGM:l,showContour:c,setShowContour:f}),b.jsxs("div",{style:{paddingTop:"48px",height:"100%"},children:[b.jsx(eR,{onTransformUpdate:t,showTrassen:n,showDGM:a,showContour:c,onDimensionsUpdate:h}),b.jsx(zM,{}),w==="pole"&&x&&b.jsx(BR,{mastId:x,isPole:w==="pole",isOpen:y,onClose:()=>E(!1)}),w!=="pole"&&b.jsx(tR,{})]}),b.jsx(D,{})]})})}wg.createRoot(document.getElementById("root")).render(b.jsx(te.StrictMode,{children:b.jsx(OR,{})}));
